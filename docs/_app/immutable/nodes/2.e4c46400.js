import{B as yY,C as J1,D as sy,E as wY,F as iv,s as an,f as ht,G as xY,g as ft,d as Z,j as it,z as Ge,A as Sn,H as gu,r as ni,u as ii,v as ri,w as si,x as Xt,I as _f,J as Ha,o as Au,a as _t,e as ua,c as At,i as Pe,K as $d,L as Bt,M as Mn,N as lx,t as z3,h as Pt,O as sa,p as Wa,P as cx,Q as Z1,R as UT,S as VT,k as oa,T as Af,U as Ki,y as Zt,V as ay,W as vn,X as cg,Y as oy,Z as Dp,_ as CY,$ as EY,a0 as xm,a1 as uk,a2 as ya,a3 as HT,l as Vt,m as Ht,n as dL,a4 as pL,a5 as mL,a6 as ux,a7 as SY,q as hk,a8 as rr}from"../chunks/scheduler.0f43c31e.js";import{g as Rs,t as pe,c as Ds,a as oe,S as ln,i as cn,b as Oe,d as ze,m as Ne,e as Fe,f as eA,h as bd,j as r2}from"../chunks/index.d436a0bd.js";import{w as Is,d as cu,r as s2}from"../chunks/index.9bcc865d.js";import{c as bt,g as U0,a as MY,b as TY,h as U3,s as V3,d as vl,e as ec,f as tc,i as p1,j as H3,k as $T,m as $3,p as G3,n as $u,o as pf,q as Q3,r as Md,t as Wu,u as Td,v as sg,w as Gu,x as ag,y as yd,z as qu,A as $_,B as m1,C as $w,D as a0,E as hx,F as T4,G as fk,H as dk,I as Qr,J as Hl,K as fu,L as Pg,M as IY,N as f0,O as pk,P as a2,Q as o2,R as l2,S as c2,T as I4,U as PY,V as ly,W as tA,X as nA,Y as kY,Z as mk,l as BY}from"../chunks/index.30964fc0.js";import{a as gL}from"../chunks/paths.ddc293a8.js";function vL(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}function _L(i,e){const t=e.token={};function n(r,s,a,o){if(e.token!==t)return;e.resolved=o;let l=e.ctx;a!==void 0&&(l=l.slice(),l[a]=o);const c=r&&(e.current=r)(l);let u=!1;e.block&&(e.blocks?e.blocks.forEach((h,f)=>{f!==s&&h&&(Rs(),pe(h,1,1,()=>{e.blocks[f]===h&&(e.blocks[f]=null)}),Ds())}):e.block.d(1),c.c(),oe(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[s]=c),u&&wY()}if(yY(i)){const r=J1();if(i.then(s=>{sy(r),n(e.then,1,e.value,s),sy(null)},s=>{if(sy(r),n(e.catch,2,e.error,s),sy(null),!e.hasCatch)throw s}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,i),!0;e.resolved=i}}function AL(i,e,t){const n=e.slice(),{resolved:r}=i;i.current===i.then&&(n[i.value]=r),i.current===i.catch&&(n[i.error]=r),i.block.p(n,t)}function Tc(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function RY(i,e){i.d(1),e.delete(i.key)}function bL(i,e){pe(i,1,1,()=>{e.delete(i.key)})}function GT(i,e,t,n,r,s,a,o,l,c,u,h){let f=i.length,d=s.length,g=f;const v={};for(;g--;)v[i[g].key]=g;const A=[],_=new Map,y=new Map,x=[];for(g=d;g--;){const P=h(r,s,g),B=t(P);let M=a.get(B);M?n&&x.push(()=>M.p(P,e)):(M=c(B,P),M.c()),_.set(B,A[g]=M),B in v&&y.set(B,Math.abs(g-v[B]))}const C=new Set,S=new Set;function I(P){oe(P,1),P.m(o,u),a.set(P.key,P),u=P.first,d--}for(;f&&d;){const P=A[d-1],B=i[f-1],M=P.key,D=B.key;P===B?(u=P.first,f--,d--):_.has(D)?!a.has(M)||C.has(M)?I(P):S.has(D)?f--:y.get(M)>y.get(D)?(S.add(M),I(P)):(C.add(D),f--):(l(B,a),f--)}for(;f--;){const P=i[f];_.has(P.key)||l(P,a)}for(;d;)I(A[d-1]);return iv(x),A}function Fn(i,e){const t={},n={},r={$$scope:1};let s=i.length;for(;s--;){const a=i[s],o=e[s];if(o){for(const l in a)l in o||(n[l]=1);for(const l in o)r[l]||(t[l]=o[l],r[l]=1);i[s]=o}else for(const l in a)r[l]=1}for(const a in n)a in t||(t[a]=void 0);return t}function ur(i){return typeof i=="object"&&i!==null?i:{}}function DY(i){const e=i-1;return e*e*e+1}function LY(i){let e,t,n,r,s,a,o,l,c,u,h,f,d,g,v,A,_,y,x,C;return document.title=e=i[0],{c(){t=ht("meta"),n=ht("meta"),r=ht("meta"),s=ht("meta"),a=ht("meta"),o=ht("meta"),l=ht("meta"),c=ht("meta"),u=ht("meta"),h=ht("meta"),f=ht("meta"),d=ht("meta"),g=ht("meta"),v=ht("meta"),A=ht("meta"),_=ht("meta"),y=ht("meta"),x=ht("link"),this.h()},l(S){const I=xY("svelte-12a08dr",document.head);t=ft(I,"META",{name:!0,content:!0}),n=ft(I,"META",{name:!0,content:!0}),r=ft(I,"META",{name:!0,content:!0}),s=ft(I,"META",{property:!0,content:!0}),a=ft(I,"META",{property:!0,content:!0}),o=ft(I,"META",{property:!0,content:!0}),l=ft(I,"META",{property:!0,content:!0}),c=ft(I,"META",{property:!0,content:!0}),u=ft(I,"META",{property:!0,content:!0}),h=ft(I,"META",{property:!0,content:!0}),f=ft(I,"META",{name:!0,content:!0}),d=ft(I,"META",{name:!0,content:!0}),g=ft(I,"META",{name:!0,content:!0}),v=ft(I,"META",{name:!0,content:!0}),A=ft(I,"META",{name:!0,content:!0}),_=ft(I,"META",{name:!0,content:!0}),y=ft(I,"META",{name:!0,content:!0}),x=ft(I,"LINK",{rel:!0,href:!0}),I.forEach(Z),this.h()},h(){it(t,"name","description"),it(t,"content",i[1]),it(n,"name","author"),it(n,"content","Yi Zhe Ang"),it(r,"name","news_keywords"),it(r,"content",i[3]),it(s,"property","og:title"),it(s,"content",i[0]),it(a,"property","og:site_name"),it(a,"content","Yi Zhe Ang"),it(o,"property","og:url"),it(o,"content",i[2]),it(l,"property","og:description"),it(l,"content",i[1]),it(c,"property","og:type"),it(c,"content","article"),it(u,"property","og:locale"),it(u,"content","en_US"),it(h,"property","og:image"),it(h,"content",i[4]),it(f,"name","twitter:card"),it(f,"content","summary_large_image"),it(d,"name","twitter:site"),it(d,"content","https://yizhe-ang.github.io/"),it(g,"name","twitter:creator"),it(g,"content","@yizhe_ang"),it(v,"name","twitter:title"),it(v,"content",i[0]),it(A,"name","twitter:description"),it(A,"content",i[1]),it(_,"name","twitter:image:src"),it(_,"content",i[4]),it(y,"name","robots"),it(y,"content","max-image-preview:large"),it(x,"rel","canonical"),it(x,"href",C=i[2]+"/")},m(S,I){Ge(document.head,t),Ge(document.head,n),Ge(document.head,r),Ge(document.head,s),Ge(document.head,a),Ge(document.head,o),Ge(document.head,l),Ge(document.head,c),Ge(document.head,u),Ge(document.head,h),Ge(document.head,f),Ge(document.head,d),Ge(document.head,g),Ge(document.head,v),Ge(document.head,A),Ge(document.head,_),Ge(document.head,y),Ge(document.head,x)},p(S,[I]){I&1&&e!==(e=S[0])&&(document.title=e),I&2&&it(t,"content",S[1]),I&8&&it(r,"content",S[3]),I&1&&it(s,"content",S[0]),I&4&&it(o,"content",S[2]),I&2&&it(l,"content",S[1]),I&16&&it(h,"content",S[4]),I&1&&it(v,"content",S[0]),I&2&&it(A,"content",S[1]),I&16&&it(_,"content",S[4]),I&4&&C!==(C=S[2]+"/")&&it(x,"href",C)},i:Sn,o:Sn,d(S){Z(t),Z(n),Z(r),Z(s),Z(a),Z(o),Z(l),Z(c),Z(u),Z(h),Z(f),Z(d),Z(g),Z(v),Z(A),Z(_),Z(y),Z(x)}}}function OY(i,e,t){let{title:n="The Matrix Arcade"}=e,{description:r="A Visual Explorable of Matrices and Linear Transformations"}=e,{url:s="https://yizhe-ang.github.io/matrix-explorable/"}=e,{keywords:a="matrix, vector, multiplication, linear, transformation, visual, explorable, explainer, math, linear algebra, interactive, visualization, tutorial, intuition"}=e,{socialImg:o="https://yizhe-ang.github.io/matrix-explorable/social.png"}=e;return i.$$set=l=>{"title"in l&&t(0,n=l.title),"description"in l&&t(1,r=l.description),"url"in l&&t(2,s=l.url),"keywords"in l&&t(3,a=l.keywords),"socialImg"in l&&t(4,o=l.socialImg)},[n,r,s,a,o]}class NY extends ln{constructor(e){super(),cn(this,e,OY,LY,an,{title:0,description:1,url:2,keywords:3,socialImg:4})}}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const u2="155dev",FY={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},zY={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},yL=0,q3=1,wL=2,UY=3,VY=0,QT=1,h2=2,ju=3,mh=0,Fo=1,ms=2,HY=2,oh=0,Dd=1,j3=2,W3=3,Y3=4,xL=5,Cd=100,qT=101,jT=102,X3=103,K3=104,WT=200,YT=201,XT=202,KT=203,f2=204,d2=205,JT=206,ZT=207,e5=208,t5=209,n5=210,CL=0,EL=1,SL=2,fx=3,ML=4,TL=5,IL=6,PL=7,iA=0,kL=1,BL=2,bf=0,RL=1,DL=2,LL=3,i5=4,OL=5,rA=300,Cf=301,Gd=302,g1=303,v1=304,rv=306,Ef=1e3,la=1001,T0=1002,ji=1003,_1=1004,r5=1004,xg=1005,s5=1005,Dr=1006,p2=1007,a5=1007,vu=1008,o5=1008,ns=1009,sA=1010,aA=1011,V0=1012,sv=1013,Ic=1014,is=1015,Kl=1016,m2=1017,g2=1018,Ld=1020,l5=1021,Bs=1023,v2=1024,_2=1025,Od=1026,I0=1027,ug=1028,c5=1029,hg=1030,u5=1031,h5=1033,Z_=33776,Gw=33777,Qw=33778,e1=33779,dx=35840,J3=35841,px=35842,Z3=35843,f5=36196,mx=37492,gx=37496,vx=37808,eM=37809,tM=37810,nM=37811,iM=37812,rM=37813,sM=37814,aM=37815,oM=37816,lM=37817,cM=37818,uM=37819,hM=37820,fM=37821,t1=36492,NL=36283,dM=36284,pM=36285,mM=36286,FL=2200,zL=2201,UL=2202,kg=2300,P0=2301,qw=2302,d0=2400,p0=2401,A1=2402,A2=2500,d5=2501,VL=0,p5=1,_x=2,b1=3e3,lh=3001,HL=3200,$L=3201,rp=0,GL=1,ch="",kn="srgb",Nc="srgb-linear",m5="display-p3",$Y=0,jw=7680,GY=7681,QY=7682,qY=7683,jY=34055,WY=34056,YY=5386,XY=512,KY=513,JY=514,ZY=515,eX=516,tX=517,nX=518,QL=519,qL=512,jL=513,WL=514,YL=515,XL=516,KL=517,JL=518,ZL=519,y1=35044,iX=35048,rX=35040,sX=35045,aX=35049,oX=35041,lX=35046,cX=35050,uX=35042,hX="100",gM="300 es",Ax=1035,Ju=2e3,w1=2001;let Oc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}};const ro=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let gk=1234567;const A0=Math.PI/180,Bg=180/Math.PI;function Jl(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(ro[i&255]+ro[i>>8&255]+ro[i>>16&255]+ro[i>>24&255]+"-"+ro[e&255]+ro[e>>8&255]+"-"+ro[e>>16&15|64]+ro[e>>24&255]+"-"+ro[t&63|128]+ro[t>>8&255]+"-"+ro[t>>16&255]+ro[t>>24&255]+ro[n&255]+ro[n>>8&255]+ro[n>>16&255]+ro[n>>24&255]).toLowerCase()}function Ps(i,e,t){return Math.max(e,Math.min(t,i))}function g5(i,e){return(i%e+e)%e}function fX(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function dX(i,e,t){return i!==e?(t-i)/(e-i):0}function n1(i,e,t){return(1-t)*i+t*e}function pX(i,e,t,n){return n1(i,e,1-Math.exp(-t*n))}function mX(i,e=1){return e-Math.abs(g5(i,e*2)-e)}function gX(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function vX(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function _X(i,e){return i+Math.floor(Math.random()*(e-i+1))}function AX(i,e){return i+Math.random()*(e-i)}function bX(i){return i*(.5-Math.random())}function yX(i){i!==void 0&&(gk=i);let e=gk+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function wX(i){return i*A0}function xX(i){return i*Bg}function vM(i){return(i&i-1)===0&&i!==0}function eO(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function bx(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function CX(i,e,t,n,r){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),c=s((e+n)/2),u=a((e+n)/2),h=s((e-n)/2),f=a((e-n)/2),d=s((n-e)/2),g=a((n-e)/2);switch(r){case"XYX":i.set(o*u,l*h,l*f,o*c);break;case"YZY":i.set(l*f,o*u,l*h,o*c);break;case"ZXZ":i.set(l*h,l*f,o*u,o*c);break;case"XZX":i.set(o*u,l*g,l*d,o*c);break;case"YXY":i.set(l*d,o*u,l*g,o*c);break;case"ZYZ":i.set(l*g,l*d,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Xl(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function wi(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const v5={DEG2RAD:A0,RAD2DEG:Bg,generateUUID:Jl,clamp:Ps,euclideanModulo:g5,mapLinear:fX,inverseLerp:dX,lerp:n1,damp:pX,pingpong:mX,smoothstep:gX,smootherstep:vX,randInt:_X,randFloat:AX,randFloatSpread:bX,seededRandom:yX,degToRad:wX,radToDeg:xX,isPowerOfTwo:vM,ceilPowerOfTwo:eO,floorPowerOfTwo:bx,setQuaternionFromProperEuler:CX,normalize:wi,denormalize:Xl};let Et=class tO{constructor(e=0,t=0){tO.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Ps(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*r+e.x,this.y=s*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Ei=class nO{constructor(e,t,n,r,s,a,o,l,c){nO.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,o,l,c)}set(e,t,n,r,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=s,u[5]=l,u[6]=n,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[3],l=n[6],c=n[1],u=n[4],h=n[7],f=n[2],d=n[5],g=n[8],v=r[0],A=r[3],_=r[6],y=r[1],x=r[4],C=r[7],S=r[2],I=r[5],P=r[8];return s[0]=a*v+o*y+l*S,s[3]=a*A+o*x+l*I,s[6]=a*_+o*C+l*P,s[1]=c*v+u*y+h*S,s[4]=c*A+u*x+h*I,s[7]=c*_+u*C+h*P,s[2]=f*v+d*y+g*S,s[5]=f*A+d*x+g*I,s[8]=f*_+d*C+g*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-n*s*u+n*o*l+r*s*c-r*a*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=u*a-o*c,f=o*l-u*s,d=c*s-a*l,g=t*h+n*f+r*d;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=h*v,e[1]=(r*c-u*n)*v,e[2]=(o*n-r*a)*v,e[3]=f*v,e[4]=(u*t-r*l)*v,e[5]=(r*s-o*t)*v,e[6]=d*v,e[7]=(n*l-c*t)*v,e[8]=(a*t-n*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*a+c*o)+a+e,-r*c,r*l,-r*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(P4.makeScale(e,t)),this}rotate(e){return this.premultiply(P4.makeRotation(-e)),this}translate(e,t){return this.premultiply(P4.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}};const P4=new Ei;function iO(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const EX={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function fg(i,e){return new EX[i](e)}function x1(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}const vk={};function i1(i){i in vk||(vk[i]=!0,console.warn(i))}function Cg(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function k4(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}const SX=new Ei().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),MX=new Ei().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function TX(i){return i.convertSRGBToLinear().applyMatrix3(MX)}function IX(i){return i.applyMatrix3(SX).convertLinearToSRGB()}const PX={[Nc]:i=>i,[kn]:i=>i.convertSRGBToLinear(),[m5]:TX},kX={[Nc]:i=>i,[kn]:i=>i.convertLinearToSRGB(),[m5]:IX},Ul={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(i){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!i},get workingColorSpace(){return Nc},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,e,t){if(this.enabled===!1||e===t||!e||!t)return i;const n=PX[e],r=kX[t];if(n===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this.workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this.workingColorSpace)}};let Cm;class _5{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Cm===void 0&&(Cm=x1("canvas")),Cm.width=e.width,Cm.height=e.height;const n=Cm.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Cm}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=x1("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Cg(s[a]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Cg(t[n]/255)*255):t[n]=Cg(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let BX=0,m0=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:BX++}),this.uuid=Jl(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(B4(r[a].image)):s.push(B4(r[a]))}else s=B4(r);n.url=s}return t||(e.images[this.uuid]=n),n}};function B4(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?_5.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let RX=0;class rs extends Oc{constructor(e=rs.DEFAULT_IMAGE,t=rs.DEFAULT_MAPPING,n=la,r=la,s=Dr,a=vu,o=Bs,l=ns,c=rs.DEFAULT_ANISOTROPY,u=ch){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:RX++}),this.uuid=Jl(),this.name="",this.source=new m0(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Et(0,0),this.repeat=new Et(1,1),this.center=new Et(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ei,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(i1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===lh?kn:ch),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==rA)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ef:e.x=e.x-Math.floor(e.x);break;case la:e.x=e.x<0?0:1;break;case T0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ef:e.y=e.y-Math.floor(e.y);break;case la:e.y=e.y<0?0:1;break;case T0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return i1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===kn?lh:b1}set encoding(e){i1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===lh?kn:ch}}rs.DEFAULT_IMAGE=null;rs.DEFAULT_MAPPING=rA;rs.DEFAULT_ANISOTROPY=1;let Hi=class rO{constructor(e=0,t=0,n=0,r=1){rO.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,c=l[0],u=l[4],h=l[8],f=l[1],d=l[5],g=l[9],v=l[2],A=l[6],_=l[10];if(Math.abs(u-f)<.01&&Math.abs(h-v)<.01&&Math.abs(g-A)<.01){if(Math.abs(u+f)<.1&&Math.abs(h+v)<.1&&Math.abs(g+A)<.1&&Math.abs(c+d+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const x=(c+1)/2,C=(d+1)/2,S=(_+1)/2,I=(u+f)/4,P=(h+v)/4,B=(g+A)/4;return x>C&&x>S?x<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(x),r=I/n,s=P/n):C>S?C<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),n=I/r,s=B/r):S<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(S),n=P/s,r=B/s),this.set(n,r,s,t),this}let y=Math.sqrt((A-g)*(A-g)+(h-v)*(h-v)+(f-u)*(f-u));return Math.abs(y)<.001&&(y=1),this.x=(A-g)/y,this.y=(h-v)/y,this.z=(f-u)/y,this.w=Math.acos((c+d+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}};class po extends Oc{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Hi(0,0,e,t),this.scissorTest=!1,this.viewport=new Hi(0,0,e,t);const r={width:e,height:t,depth:1};n.encoding!==void 0&&(i1("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===lh?kn:ch),this.texture=new rs(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Dr,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new m0(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class b2 extends rs{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ji,this.minFilter=ji,this.wrapR=la,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class DX extends po{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new b2(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class y2 extends rs{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ji,this.minFilter=ji,this.wrapR=la,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class LX extends po{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new y2(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class OX extends po{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let a=0;a<n;a++)this.texture[a]=s.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}let ca=class{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,a,o){let l=n[r+0],c=n[r+1],u=n[r+2],h=n[r+3];const f=s[a+0],d=s[a+1],g=s[a+2],v=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(o===1){e[t+0]=f,e[t+1]=d,e[t+2]=g,e[t+3]=v;return}if(h!==v||l!==f||c!==d||u!==g){let A=1-o;const _=l*f+c*d+u*g+h*v,y=_>=0?1:-1,x=1-_*_;if(x>Number.EPSILON){const S=Math.sqrt(x),I=Math.atan2(S,_*y);A=Math.sin(A*I)/S,o=Math.sin(o*I)/S}const C=o*y;if(l=l*A+f*C,c=c*A+d*C,u=u*A+g*C,h=h*A+v*C,A===1-o){const S=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=S,c*=S,u*=S,h*=S}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,r,s,a){const o=n[r],l=n[r+1],c=n[r+2],u=n[r+3],h=s[a],f=s[a+1],d=s[a+2],g=s[a+3];return e[t]=o*g+u*h+l*d-c*f,e[t+1]=l*g+u*f+c*h-o*d,e[t+2]=c*g+u*d+o*f-l*h,e[t+3]=u*g-o*h-l*f-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(n/2),u=o(r/2),h=o(s/2),f=l(n/2),d=l(r/2),g=l(s/2);switch(a){case"XYZ":this._x=f*u*h+c*d*g,this._y=c*d*h-f*u*g,this._z=c*u*g+f*d*h,this._w=c*u*h-f*d*g;break;case"YXZ":this._x=f*u*h+c*d*g,this._y=c*d*h-f*u*g,this._z=c*u*g-f*d*h,this._w=c*u*h+f*d*g;break;case"ZXY":this._x=f*u*h-c*d*g,this._y=c*d*h+f*u*g,this._z=c*u*g+f*d*h,this._w=c*u*h-f*d*g;break;case"ZYX":this._x=f*u*h-c*d*g,this._y=c*d*h+f*u*g,this._z=c*u*g-f*d*h,this._w=c*u*h+f*d*g;break;case"YZX":this._x=f*u*h+c*d*g,this._y=c*d*h+f*u*g,this._z=c*u*g-f*d*h,this._w=c*u*h-f*d*g;break;case"XZY":this._x=f*u*h-c*d*g,this._y=c*d*h-f*u*g,this._z=c*u*g+f*d*h,this._w=c*u*h+f*d*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],h=t[10],f=n+o+h;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(u-l)*d,this._y=(s-c)*d,this._z=(a-r)*d}else if(n>o&&n>h){const d=2*Math.sqrt(1+n-o-h);this._w=(u-l)/d,this._x=.25*d,this._y=(r+a)/d,this._z=(s+c)/d}else if(o>h){const d=2*Math.sqrt(1+o-n-h);this._w=(s-c)/d,this._x=(r+a)/d,this._y=.25*d,this._z=(l+u)/d}else{const d=2*Math.sqrt(1+h-n-o);this._w=(a-r)/d,this._x=(s+c)/d,this._y=(l+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ps(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=n*u+a*o+r*c-s*l,this._y=r*u+a*l+s*o-n*c,this._z=s*u+a*c+n*l-r*o,this._w=a*u-n*o-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+n*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const d=1-t;return this._w=d*a+t*this._w,this._x=d*n+t*this._x,this._y=d*r+t*this._y,this._z=d*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),h=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=a*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=s*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},fe=class sO{constructor(e=0,t=0,n=0){sO.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(_k.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(_k.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=l*t+a*r-o*n,u=l*n+o*t-s*r,h=l*r+s*n-a*t,f=-s*t-a*n-o*r;return this.x=c*l+f*-s+u*-o-h*-a,this.y=u*l+f*-a+h*-s-c*-o,this.z=h*l+f*-o+c*-a-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-n*l,this.z=n*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return R4.copy(this).projectOnVector(e),this.sub(R4)}reflect(e){return this.sub(R4.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Ps(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const R4=new fe,_k=new ca;class bu{constructor(e=new fe(1/0,1/0,1/0),t=new fe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Xh.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Xh.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Xh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Em.copy(e.boundingBox),Em.applyMatrix4(e.matrixWorld),this.union(Em);else{const r=e.geometry;if(r!==void 0)if(t&&r.attributes!==void 0&&r.attributes.position!==void 0){const s=r.attributes.position;for(let a=0,o=s.count;a<o;a++)Xh.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),this.expandByPoint(Xh)}else r.boundingBox===null&&r.computeBoundingBox(),Em.copy(r.boundingBox),Em.applyMatrix4(e.matrixWorld),this.union(Em)}const n=e.children;for(let r=0,s=n.length;r<s;r++)this.expandByObject(n[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Xh),Xh.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(a_),cy.subVectors(this.max,a_),Sm.subVectors(e.a,a_),Mm.subVectors(e.b,a_),Tm.subVectors(e.c,a_),sd.subVectors(Mm,Sm),ad.subVectors(Tm,Mm),Lp.subVectors(Sm,Tm);let t=[0,-sd.z,sd.y,0,-ad.z,ad.y,0,-Lp.z,Lp.y,sd.z,0,-sd.x,ad.z,0,-ad.x,Lp.z,0,-Lp.x,-sd.y,sd.x,0,-ad.y,ad.x,0,-Lp.y,Lp.x,0];return!D4(t,Sm,Mm,Tm,cy)||(t=[1,0,0,0,1,0,0,0,1],!D4(t,Sm,Mm,Tm,cy))?!1:(uy.crossVectors(sd,ad),t=[uy.x,uy.y,uy.z],D4(t,Sm,Mm,Tm,cy))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Xh).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Xh).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Yh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Yh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Yh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Yh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Yh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Yh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Yh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Yh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Yh),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Yh=[new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe],Xh=new fe,Em=new bu,Sm=new fe,Mm=new fe,Tm=new fe,sd=new fe,ad=new fe,Lp=new fe,a_=new fe,cy=new fe,uy=new fe,Op=new fe;function D4(i,e,t,n,r){for(let s=0,a=i.length-3;s<=a;s+=3){Op.fromArray(i,s);const o=r.x*Math.abs(Op.x)+r.y*Math.abs(Op.y)+r.z*Math.abs(Op.z),l=e.dot(Op),c=t.dot(Op),u=n.dot(Op);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const NX=new bu,o_=new fe,L4=new fe;class Vc{constructor(e=new fe,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):NX.setFromPoints(e).getCenter(n);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;o_.subVectors(e,this.center);const t=o_.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(o_,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(L4.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(o_.copy(e.center).add(L4)),this.expandByPoint(o_.copy(e.center).sub(L4))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Kh=new fe,O4=new fe,hy=new fe,od=new fe,N4=new fe,fy=new fe,F4=new fe;class av{constructor(e=new fe,t=new fe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Kh)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Kh.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Kh.copy(this.origin).addScaledVector(this.direction,t),Kh.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){O4.copy(e).add(t).multiplyScalar(.5),hy.copy(t).sub(e).normalize(),od.copy(this.origin).sub(O4);const s=e.distanceTo(t)*.5,a=-this.direction.dot(hy),o=od.dot(this.direction),l=-od.dot(hy),c=od.lengthSq(),u=Math.abs(1-a*a);let h,f,d,g;if(u>0)if(h=a*l-o,f=a*o-l,g=s*u,h>=0)if(f>=-g)if(f<=g){const v=1/u;h*=v,f*=v,d=h*(h+a*f+2*o)+f*(a*h+f+2*l)+c}else f=s,h=Math.max(0,-(a*f+o)),d=-h*h+f*(f+2*l)+c;else f=-s,h=Math.max(0,-(a*f+o)),d=-h*h+f*(f+2*l)+c;else f<=-g?(h=Math.max(0,-(-a*s+o)),f=h>0?-s:Math.min(Math.max(-s,-l),s),d=-h*h+f*(f+2*l)+c):f<=g?(h=0,f=Math.min(Math.max(-s,-l),s),d=f*(f+2*l)+c):(h=Math.max(0,-(a*s+o)),f=h>0?s:Math.min(Math.max(-s,-l),s),d=-h*h+f*(f+2*l)+c);else f=a>0?-s:s,h=Math.max(0,-(a*f+o)),d=-h*h+f*(f+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(O4).addScaledVector(hy,f),d}intersectSphere(e,t){Kh.subVectors(e.center,this.origin);const n=Kh.dot(this.direction),r=Kh.dot(Kh)-n*n,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=n-a,l=n+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,f=this.origin;return c>=0?(n=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(n=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,a=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,a=(e.min.y-f.y)*u),n>a||s>r||((s>n||isNaN(n))&&(n=s),(a<r||isNaN(r))&&(r=a),h>=0?(o=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(o=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),n>l||o>r)||((o>n||n!==n)&&(n=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Kh)!==null}intersectTriangle(e,t,n,r,s){N4.subVectors(t,e),fy.subVectors(n,e),F4.crossVectors(N4,fy);let a=this.direction.dot(F4),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;od.subVectors(this.origin,e);const l=o*this.direction.dot(fy.crossVectors(od,fy));if(l<0)return null;const c=o*this.direction.dot(N4.cross(od));if(c<0||l+c>a)return null;const u=-o*od.dot(F4);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}let Wn=class _M{constructor(e,t,n,r,s,a,o,l,c,u,h,f,d,g,v,A){_M.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,o,l,c,u,h,f,d,g,v,A)}set(e,t,n,r,s,a,o,l,c,u,h,f,d,g,v,A){const _=this.elements;return _[0]=e,_[4]=t,_[8]=n,_[12]=r,_[1]=s,_[5]=a,_[9]=o,_[13]=l,_[2]=c,_[6]=u,_[10]=h,_[14]=f,_[3]=d,_[7]=g,_[11]=v,_[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new _M().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Im.setFromMatrixColumn(e,0).length(),s=1/Im.setFromMatrixColumn(e,1).length(),a=1/Im.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,a=Math.cos(n),o=Math.sin(n),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=a*u,d=a*h,g=o*u,v=o*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=d+g*c,t[5]=f-v*c,t[9]=-o*l,t[2]=v-f*c,t[6]=g+d*c,t[10]=a*l}else if(e.order==="YXZ"){const f=l*u,d=l*h,g=c*u,v=c*h;t[0]=f+v*o,t[4]=g*o-d,t[8]=a*c,t[1]=a*h,t[5]=a*u,t[9]=-o,t[2]=d*o-g,t[6]=v+f*o,t[10]=a*l}else if(e.order==="ZXY"){const f=l*u,d=l*h,g=c*u,v=c*h;t[0]=f-v*o,t[4]=-a*h,t[8]=g+d*o,t[1]=d+g*o,t[5]=a*u,t[9]=v-f*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const f=a*u,d=a*h,g=o*u,v=o*h;t[0]=l*u,t[4]=g*c-d,t[8]=f*c+v,t[1]=l*h,t[5]=v*c+f,t[9]=d*c-g,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const f=a*l,d=a*c,g=o*l,v=o*c;t[0]=l*u,t[4]=v-f*h,t[8]=g*h+d,t[1]=h,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=d*h+g,t[10]=f-v*h}else if(e.order==="XZY"){const f=a*l,d=a*c,g=o*l,v=o*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=f*h+v,t[5]=a*u,t[9]=d*h-g,t[2]=g*h-d,t[6]=o*u,t[10]=v*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(FX,e,zX)}lookAt(e,t,n){const r=this.elements;return Nl.subVectors(e,t),Nl.lengthSq()===0&&(Nl.z=1),Nl.normalize(),ld.crossVectors(n,Nl),ld.lengthSq()===0&&(Math.abs(n.z)===1?Nl.x+=1e-4:Nl.z+=1e-4,Nl.normalize(),ld.crossVectors(n,Nl)),ld.normalize(),dy.crossVectors(Nl,ld),r[0]=ld.x,r[4]=dy.x,r[8]=Nl.x,r[1]=ld.y,r[5]=dy.y,r[9]=Nl.y,r[2]=ld.z,r[6]=dy.z,r[10]=Nl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[4],l=n[8],c=n[12],u=n[1],h=n[5],f=n[9],d=n[13],g=n[2],v=n[6],A=n[10],_=n[14],y=n[3],x=n[7],C=n[11],S=n[15],I=r[0],P=r[4],B=r[8],M=r[12],D=r[1],F=r[5],z=r[9],U=r[13],$=r[2],O=r[6],ie=r[10],W=r[14],J=r[3],Ce=r[7],Me=r[11],ge=r[15];return s[0]=a*I+o*D+l*$+c*J,s[4]=a*P+o*F+l*O+c*Ce,s[8]=a*B+o*z+l*ie+c*Me,s[12]=a*M+o*U+l*W+c*ge,s[1]=u*I+h*D+f*$+d*J,s[5]=u*P+h*F+f*O+d*Ce,s[9]=u*B+h*z+f*ie+d*Me,s[13]=u*M+h*U+f*W+d*ge,s[2]=g*I+v*D+A*$+_*J,s[6]=g*P+v*F+A*O+_*Ce,s[10]=g*B+v*z+A*ie+_*Me,s[14]=g*M+v*U+A*W+_*ge,s[3]=y*I+x*D+C*$+S*J,s[7]=y*P+x*F+C*O+S*Ce,s[11]=y*B+x*z+C*ie+S*Me,s[15]=y*M+x*U+C*W+S*ge,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],h=e[6],f=e[10],d=e[14],g=e[3],v=e[7],A=e[11],_=e[15];return g*(+s*l*h-r*c*h-s*o*f+n*c*f+r*o*d-n*l*d)+v*(+t*l*d-t*c*f+s*a*f-r*a*d+r*c*u-s*l*u)+A*(+t*c*h-t*o*d-s*a*h+n*a*d+s*o*u-n*c*u)+_*(-r*o*u-t*l*h+t*o*f+r*a*h-n*a*f+n*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],d=e[11],g=e[12],v=e[13],A=e[14],_=e[15],y=h*A*c-v*f*c+v*l*d-o*A*d-h*l*_+o*f*_,x=g*f*c-u*A*c-g*l*d+a*A*d+u*l*_-a*f*_,C=u*v*c-g*h*c+g*o*d-a*v*d-u*o*_+a*h*_,S=g*h*l-u*v*l-g*o*f+a*v*f+u*o*A-a*h*A,I=t*y+n*x+r*C+s*S;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/I;return e[0]=y*P,e[1]=(v*f*s-h*A*s-v*r*d+n*A*d+h*r*_-n*f*_)*P,e[2]=(o*A*s-v*l*s+v*r*c-n*A*c-o*r*_+n*l*_)*P,e[3]=(h*l*s-o*f*s-h*r*c+n*f*c+o*r*d-n*l*d)*P,e[4]=x*P,e[5]=(u*A*s-g*f*s+g*r*d-t*A*d-u*r*_+t*f*_)*P,e[6]=(g*l*s-a*A*s-g*r*c+t*A*c+a*r*_-t*l*_)*P,e[7]=(a*f*s-u*l*s+u*r*c-t*f*c-a*r*d+t*l*d)*P,e[8]=C*P,e[9]=(g*h*s-u*v*s-g*n*d+t*v*d+u*n*_-t*h*_)*P,e[10]=(a*v*s-g*o*s+g*n*c-t*v*c-a*n*_+t*o*_)*P,e[11]=(u*o*s-a*h*s-u*n*c+t*h*c+a*n*d-t*o*d)*P,e[12]=S*P,e[13]=(u*v*r-g*h*r+g*n*f-t*v*f-u*n*A+t*h*A)*P,e[14]=(g*o*r-a*v*r-g*n*l+t*v*l+a*n*A-t*o*A)*P,e[15]=(a*h*r-u*o*r+u*n*l-t*h*l-a*n*f+t*o*f)*P,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+n,c*o-r*l,c*l+r*o,0,c*o+r*l,u*o+n,u*l-r*a,0,c*l-r*o,u*l+r*a,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,a){return this.set(1,n,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,u=a+a,h=o+o,f=s*c,d=s*u,g=s*h,v=a*u,A=a*h,_=o*h,y=l*c,x=l*u,C=l*h,S=n.x,I=n.y,P=n.z;return r[0]=(1-(v+_))*S,r[1]=(d+C)*S,r[2]=(g-x)*S,r[3]=0,r[4]=(d-C)*I,r[5]=(1-(f+_))*I,r[6]=(A+y)*I,r[7]=0,r[8]=(g+x)*P,r[9]=(A-y)*P,r[10]=(1-(f+v))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=Im.set(r[0],r[1],r[2]).length();const a=Im.set(r[4],r[5],r[6]).length(),o=Im.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],nu.copy(this);const c=1/s,u=1/a,h=1/o;return nu.elements[0]*=c,nu.elements[1]*=c,nu.elements[2]*=c,nu.elements[4]*=u,nu.elements[5]*=u,nu.elements[6]*=u,nu.elements[8]*=h,nu.elements[9]*=h,nu.elements[10]*=h,t.setFromRotationMatrix(nu),n.x=s,n.y=a,n.z=o,this}makePerspective(e,t,n,r,s,a,o=Ju){const l=this.elements,c=2*s/(t-e),u=2*s/(n-r),h=(t+e)/(t-e),f=(n+r)/(n-r);let d,g;if(o===Ju)d=-(a+s)/(a-s),g=-2*a*s/(a-s);else if(o===w1)d=-a/(a-s),g=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,s,a,o=Ju){const l=this.elements,c=1/(t-e),u=1/(n-r),h=1/(a-s),f=(t+e)*c,d=(n+r)*u;let g,v;if(o===Ju)g=(a+s)*h,v=-2*h;else if(o===w1)g=s*h,v=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=v,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}};const Im=new fe,nu=new Wn,FX=new fe(0,0,0),zX=new fe(1,1,1),ld=new fe,dy=new fe,Nl=new fe,Ak=new Wn,bk=new ca;class H0{constructor(e=0,t=0,n=0,r=H0.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],c=r[5],u=r[9],h=r[2],f=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(Ps(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Ps(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ps(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ps(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Ps(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Ps(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Ak.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ak,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return bk.setFromEuler(this),this.setFromQuaternion(bk,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}H0.DEFAULT_ORDER="XYZ";let w2=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},UX=0;const yk=new fe,Pm=new ca,Jh=new Wn,py=new fe,l_=new fe,VX=new fe,HX=new ca,wk=new fe(1,0,0),xk=new fe(0,1,0),Ck=new fe(0,0,1),$X={type:"added"},Ek={type:"removed"};class Oi extends Oc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:UX++}),this.uuid=Jl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Oi.DEFAULT_UP.clone();const e=new fe,t=new H0,n=new ca,r=new fe(1,1,1);function s(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Wn},normalMatrix:{value:new Ei}}),this.matrix=new Wn,this.matrixWorld=new Wn,this.matrixAutoUpdate=Oi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Oi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new w2,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Pm.setFromAxisAngle(e,t),this.quaternion.multiply(Pm),this}rotateOnWorldAxis(e,t){return Pm.setFromAxisAngle(e,t),this.quaternion.premultiply(Pm),this}rotateX(e){return this.rotateOnAxis(wk,e)}rotateY(e){return this.rotateOnAxis(xk,e)}rotateZ(e){return this.rotateOnAxis(Ck,e)}translateOnAxis(e,t){return yk.copy(e).applyQuaternion(this.quaternion),this.position.add(yk.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(wk,e)}translateY(e){return this.translateOnAxis(xk,e)}translateZ(e){return this.translateOnAxis(Ck,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Jh.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?py.copy(e):py.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),l_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Jh.lookAt(l_,py,this.up):Jh.lookAt(py,l_,this.up),this.quaternion.setFromRotationMatrix(Jh),r&&(Jh.extractRotation(r.matrixWorld),Pm.setFromRotationMatrix(Jh),this.quaternion.premultiply(Pm.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent($X)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Ek)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Ek)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Jh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Jh.multiply(e.parent.matrixWorld)),e.applyMatrix4(Jh),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectsByProperty(e,t);a.length>0&&(n=n.concat(a))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(l_,e,VX),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(l_,HX,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const s=t[n];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++){const o=r[s];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),h=a(e.shapes),f=a(e.skeletons),d=a(e.animations),g=a(e.nodes);o.length>0&&(n.geometries=o),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),u.length>0&&(n.images=u),h.length>0&&(n.shapes=h),f.length>0&&(n.skeletons=f),d.length>0&&(n.animations=d),g.length>0&&(n.nodes=g)}return n.object=r,n;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}Oi.DEFAULT_UP=new fe(0,1,0);Oi.DEFAULT_MATRIX_AUTO_UPDATE=!0;Oi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const iu=new fe,Zh=new fe,z4=new fe,ef=new fe,km=new fe,Bm=new fe,Sk=new fe,U4=new fe,V4=new fe,H4=new fe;let my=!1;class al{constructor(e=new fe,t=new fe,n=new fe){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),iu.subVectors(e,t),r.cross(iu);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){iu.subVectors(r,t),Zh.subVectors(n,t),z4.subVectors(e,t);const a=iu.dot(iu),o=iu.dot(Zh),l=iu.dot(z4),c=Zh.dot(Zh),u=Zh.dot(z4),h=a*c-o*o;if(h===0)return s.set(-2,-1,-1);const f=1/h,d=(c*l-o*u)*f,g=(a*u-o*l)*f;return s.set(1-d-g,g,d)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,ef),ef.x>=0&&ef.y>=0&&ef.x+ef.y<=1}static getUV(e,t,n,r,s,a,o,l){return my===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),my=!0),this.getInterpolation(e,t,n,r,s,a,o,l)}static getInterpolation(e,t,n,r,s,a,o,l){return this.getBarycoord(e,t,n,r,ef),l.setScalar(0),l.addScaledVector(s,ef.x),l.addScaledVector(a,ef.y),l.addScaledVector(o,ef.z),l}static isFrontFacing(e,t,n,r){return iu.subVectors(n,t),Zh.subVectors(e,t),iu.cross(Zh).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return iu.subVectors(this.c,this.b),Zh.subVectors(this.a,this.b),iu.cross(Zh).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return al.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return al.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,s){return my===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),my=!0),al.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}getInterpolation(e,t,n,r,s){return al.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return al.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return al.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let a,o;km.subVectors(r,n),Bm.subVectors(s,n),U4.subVectors(e,n);const l=km.dot(U4),c=Bm.dot(U4);if(l<=0&&c<=0)return t.copy(n);V4.subVectors(e,r);const u=km.dot(V4),h=Bm.dot(V4);if(u>=0&&h<=u)return t.copy(r);const f=l*h-u*c;if(f<=0&&l>=0&&u<=0)return a=l/(l-u),t.copy(n).addScaledVector(km,a);H4.subVectors(e,s);const d=km.dot(H4),g=Bm.dot(H4);if(g>=0&&d<=g)return t.copy(s);const v=d*c-l*g;if(v<=0&&c>=0&&g<=0)return o=c/(c-g),t.copy(n).addScaledVector(Bm,o);const A=u*g-d*h;if(A<=0&&h-u>=0&&d-g>=0)return Sk.subVectors(s,r),o=(h-u)/(h-u+(d-g)),t.copy(r).addScaledVector(Sk,o);const _=1/(A+v+f);return a=v*_,o=f*_,t.copy(n).addScaledVector(km,a).addScaledVector(Bm,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let GX=0,xa=class extends Oc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:GX++}),this.uuid=Jl(),this.name="",this.type="Material",this.blending=Dd,this.side=mh,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=f2,this.blendDst=d2,this.blendEquation=Cd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=fx,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=QL,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=jw,this.stencilZFail=jw,this.stencilZPass=jw,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Dd&&(n.blending=this.blending),this.side!==mh&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(n.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(n.textures=s),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}};const aO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ru={h:0,s:0,l:0},gy={h:0,s:0,l:0};function $4(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}let qt=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=kn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ul.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Ul.workingColorSpace){return this.r=e,this.g=t,this.b=n,Ul.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Ul.workingColorSpace){if(e=g5(e,1),t=Ps(t,0,1),n=Ps(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,a=2*n-s;this.r=$4(a,s,e+1/3),this.g=$4(a,s,e),this.b=$4(a,s,e-1/3)}return Ul.toWorkingColorSpace(this,r),this}setStyle(e,t=kn){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=kn){const n=aO[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Cg(e.r),this.g=Cg(e.g),this.b=Cg(e.b),this}copyLinearToSRGB(e){return this.r=k4(e.r),this.g=k4(e.g),this.b=k4(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=kn){return Ul.fromWorkingColorSpace(so.copy(this),e),Math.round(Ps(so.r*255,0,255))*65536+Math.round(Ps(so.g*255,0,255))*256+Math.round(Ps(so.b*255,0,255))}getHexString(e=kn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ul.workingColorSpace){Ul.fromWorkingColorSpace(so.copy(this),t);const n=so.r,r=so.g,s=so.b,a=Math.max(n,r,s),o=Math.min(n,r,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const h=a-o;switch(c=u<=.5?h/(a+o):h/(2-a-o),a){case n:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-n)/h+2;break;case s:l=(n-r)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Ul.workingColorSpace){return Ul.fromWorkingColorSpace(so.copy(this),t),e.r=so.r,e.g=so.g,e.b=so.b,e}getStyle(e=kn){Ul.fromWorkingColorSpace(so.copy(this),e);const t=so.r,n=so.g,r=so.b;return e!==kn?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(ru),ru.h+=e,ru.s+=t,ru.l+=n,this.setHSL(ru.h,ru.s,ru.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(ru),e.getHSL(gy);const n=n1(ru.h,gy.h,t),r=n1(ru.s,gy.s,t),s=n1(ru.l,gy.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const so=new qt;qt.NAMES=aO;class Lo extends xa{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new qt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=iA,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const vf=QX();function QX(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(n[l]=0,n[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(n[l]=1024>>-c-14,n[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(n[l]=c+15<<10,n[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(n[l]=31744,n[l|256]=64512,r[l]=24,r[l|256]=24):(n[l]=31744,n[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function il(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=Ps(i,-65504,65504),vf.floatView[0]=i;const e=vf.uint32View[0],t=e>>23&511;return vf.baseTable[t]+((e&8388607)>>vf.shiftTable[t])}function G_(i){const e=i>>10;return vf.uint32View[0]=vf.mantissaTable[vf.offsetTable[e]+(i&1023)]+vf.exponentTable[e],vf.floatView[0]}const qX={toHalfFloat:il,fromHalfFloat:G_},ia=new fe,vy=new Et;class Un{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=y1,this.updateRange={offset:0,count:-1},this.gpuType=is,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)vy.fromBufferAttribute(this,t),vy.applyMatrix3(e),this.setXY(t,vy.x,vy.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)ia.fromBufferAttribute(this,t),ia.applyMatrix3(e),this.setXYZ(t,ia.x,ia.y,ia.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ia.fromBufferAttribute(this,t),ia.applyMatrix4(e),this.setXYZ(t,ia.x,ia.y,ia.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ia.fromBufferAttribute(this,t),ia.applyNormalMatrix(e),this.setXYZ(t,ia.x,ia.y,ia.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ia.fromBufferAttribute(this,t),ia.transformDirection(e),this.setXYZ(t,ia.x,ia.y,ia.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Xl(t,this.array)),t}setX(e,t){return this.normalized&&(t=wi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Xl(t,this.array)),t}setY(e,t){return this.normalized&&(t=wi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Xl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=wi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Xl(t,this.array)),t}setW(e,t){return this.normalized&&(t=wi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=wi(t,this.array),n=wi(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=wi(t,this.array),n=wi(n,this.array),r=wi(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=wi(t,this.array),n=wi(n,this.array),r=wi(r,this.array),s=wi(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==y1&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class jX extends Un{constructor(e,t,n){super(new Int8Array(e),t,n)}}class WX extends Un{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class YX extends Un{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class XX extends Un{constructor(e,t,n){super(new Int16Array(e),t,n)}}class A5 extends Un{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class KX extends Un{constructor(e,t,n){super(new Int32Array(e),t,n)}}class b5 extends Un{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class JX extends Un{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=G_(this.array[e*this.itemSize]);return this.normalized&&(t=Xl(t,this.array)),t}setX(e,t){return this.normalized&&(t=wi(t,this.array)),this.array[e*this.itemSize]=il(t),this}getY(e){let t=G_(this.array[e*this.itemSize+1]);return this.normalized&&(t=Xl(t,this.array)),t}setY(e,t){return this.normalized&&(t=wi(t,this.array)),this.array[e*this.itemSize+1]=il(t),this}getZ(e){let t=G_(this.array[e*this.itemSize+2]);return this.normalized&&(t=Xl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=wi(t,this.array)),this.array[e*this.itemSize+2]=il(t),this}getW(e){let t=G_(this.array[e*this.itemSize+3]);return this.normalized&&(t=Xl(t,this.array)),t}setW(e,t){return this.normalized&&(t=wi(t,this.array)),this.array[e*this.itemSize+3]=il(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=wi(t,this.array),n=wi(n,this.array)),this.array[e+0]=il(t),this.array[e+1]=il(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=wi(t,this.array),n=wi(n,this.array),r=wi(r,this.array)),this.array[e+0]=il(t),this.array[e+1]=il(n),this.array[e+2]=il(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=wi(t,this.array),n=wi(n,this.array),r=wi(r,this.array),s=wi(s,this.array)),this.array[e+0]=il(t),this.array[e+1]=il(n),this.array[e+2]=il(r),this.array[e+3]=il(s),this}}class hn extends Un{constructor(e,t,n){super(new Float32Array(e),t,n)}}class ZX extends Un{constructor(e,t,n){super(new Float64Array(e),t,n)}}let eK=0;const vc=new Wn,G4=new Oi,Rm=new fe,Fl=new bu,c_=new bu,Fa=new fe;class ai extends Oc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:eK++}),this.uuid=Jl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(iO(e)?b5:A5)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Ei().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return vc.makeRotationFromQuaternion(e),this.applyMatrix4(vc),this}rotateX(e){return vc.makeRotationX(e),this.applyMatrix4(vc),this}rotateY(e){return vc.makeRotationY(e),this.applyMatrix4(vc),this}rotateZ(e){return vc.makeRotationZ(e),this.applyMatrix4(vc),this}translate(e,t,n){return vc.makeTranslation(e,t,n),this.applyMatrix4(vc),this}scale(e,t,n){return vc.makeScale(e,t,n),this.applyMatrix4(vc),this}lookAt(e){return G4.lookAt(e),G4.updateMatrix(),this.applyMatrix4(G4.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Rm).negate(),this.translate(Rm.x,Rm.y,Rm.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new hn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new bu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new fe(-1/0,-1/0,-1/0),new fe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];Fl.setFromBufferAttribute(s),this.morphTargetsRelative?(Fa.addVectors(this.boundingBox.min,Fl.min),this.boundingBox.expandByPoint(Fa),Fa.addVectors(this.boundingBox.max,Fl.max),this.boundingBox.expandByPoint(Fa)):(this.boundingBox.expandByPoint(Fl.min),this.boundingBox.expandByPoint(Fl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new fe,1/0);return}if(e){const n=this.boundingSphere.center;if(Fl.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];c_.setFromBufferAttribute(o),this.morphTargetsRelative?(Fa.addVectors(Fl.min,c_.min),Fl.expandByPoint(Fa),Fa.addVectors(Fl.max,c_.max),Fl.expandByPoint(Fa)):(Fl.expandByPoint(c_.min),Fl.expandByPoint(c_.max))}Fl.getCenter(n);let r=0;for(let s=0,a=e.count;s<a;s++)Fa.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Fa));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)Fa.fromBufferAttribute(o,c),l&&(Rm.fromBufferAttribute(e,c),Fa.add(Rm)),r=Math.max(r,n.distanceToSquared(Fa))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,r=t.position.array,s=t.normal.array,a=t.uv.array,o=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Un(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let D=0;D<o;D++)c[D]=new fe,u[D]=new fe;const h=new fe,f=new fe,d=new fe,g=new Et,v=new Et,A=new Et,_=new fe,y=new fe;function x(D,F,z){h.fromArray(r,D*3),f.fromArray(r,F*3),d.fromArray(r,z*3),g.fromArray(a,D*2),v.fromArray(a,F*2),A.fromArray(a,z*2),f.sub(h),d.sub(h),v.sub(g),A.sub(g);const U=1/(v.x*A.y-A.x*v.y);isFinite(U)&&(_.copy(f).multiplyScalar(A.y).addScaledVector(d,-v.y).multiplyScalar(U),y.copy(d).multiplyScalar(v.x).addScaledVector(f,-A.x).multiplyScalar(U),c[D].add(_),c[F].add(_),c[z].add(_),u[D].add(y),u[F].add(y),u[z].add(y))}let C=this.groups;C.length===0&&(C=[{start:0,count:n.length}]);for(let D=0,F=C.length;D<F;++D){const z=C[D],U=z.start,$=z.count;for(let O=U,ie=U+$;O<ie;O+=3)x(n[O+0],n[O+1],n[O+2])}const S=new fe,I=new fe,P=new fe,B=new fe;function M(D){P.fromArray(s,D*3),B.copy(P);const F=c[D];S.copy(F),S.sub(P.multiplyScalar(P.dot(F))).normalize(),I.crossVectors(B,F);const U=I.dot(u[D])<0?-1:1;l[D*4]=S.x,l[D*4+1]=S.y,l[D*4+2]=S.z,l[D*4+3]=U}for(let D=0,F=C.length;D<F;++D){const z=C[D],U=z.start,$=z.count;for(let O=U,ie=U+$;O<ie;O+=3)M(n[O+0]),M(n[O+1]),M(n[O+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Un(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let f=0,d=n.count;f<d;f++)n.setXYZ(f,0,0,0);const r=new fe,s=new fe,a=new fe,o=new fe,l=new fe,c=new fe,u=new fe,h=new fe;if(e)for(let f=0,d=e.count;f<d;f+=3){const g=e.getX(f+0),v=e.getX(f+1),A=e.getX(f+2);r.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),a.fromBufferAttribute(t,A),u.subVectors(a,s),h.subVectors(r,s),u.cross(h),o.fromBufferAttribute(n,g),l.fromBufferAttribute(n,v),c.fromBufferAttribute(n,A),o.add(u),l.add(u),c.add(u),n.setXYZ(g,o.x,o.y,o.z),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(A,c.x,c.y,c.z)}else for(let f=0,d=t.count;f<d;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),a.fromBufferAttribute(t,f+2),u.subVectors(a,s),h.subVectors(r,s),u.cross(h),n.setXYZ(f+0,u.x,u.y,u.z),n.setXYZ(f+1,u.x,u.y,u.z),n.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Fa.fromBufferAttribute(e,t),Fa.normalize(),e.setXYZ(t,Fa.x,Fa.y,Fa.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,h=o.normalized,f=new c.constructor(l.length*u);let d=0,g=0;for(let v=0,A=l.length;v<A;v++){o.isInterleavedBufferAttribute?d=l[v]*o.data.stride+o.offset:d=l[v]*u;for(let _=0;_<u;_++)f[g++]=c[d++]}return new Un(f,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ai,n=this.index.array,r=this.attributes;for(const o in r){const l=r[o],c=e(l,n);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,h=c.length;u<h;u++){const f=c[u],d=e(f,n);l.push(d)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const c=n[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,f=c.length;h<f;h++){const d=c[h];u.push(d.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let f=0,d=h.length;f<d;f++)u.push(h[f].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const h=a[c];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Mk=new Wn,Np=new av,_y=new Vc,Tk=new fe,Dm=new fe,Lm=new fe,Om=new fe,Q4=new fe,Ay=new fe,by=new Et,yy=new Et,wy=new Et,Ik=new fe,Pk=new fe,kk=new fe,xy=new fe,Cy=new fe;class cr extends Oi{constructor(e=new ai,t=new Lo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){Ay.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=o[l],h=s[l];u!==0&&(Q4.fromBufferAttribute(h,e),a?Ay.addScaledVector(Q4,u):Ay.addScaledVector(Q4.sub(t),u))}t.add(Ay)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),_y.copy(n.boundingSphere),_y.applyMatrix4(s),Np.copy(e.ray).recast(e.near),!(_y.containsPoint(Np.origin)===!1&&(Np.intersectSphere(_y,Tk)===null||Np.origin.distanceToSquared(Tk)>(e.far-e.near)**2))&&(Mk.copy(s).invert(),Np.copy(e.ray).applyMatrix4(Mk),!(n.boundingBox!==null&&Np.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Np)))}_computeIntersections(e,t,n){let r;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,f=s.groups,d=s.drawRange;if(o!==null)if(Array.isArray(a))for(let g=0,v=f.length;g<v;g++){const A=f[g],_=a[A.materialIndex],y=Math.max(A.start,d.start),x=Math.min(o.count,Math.min(A.start+A.count,d.start+d.count));for(let C=y,S=x;C<S;C+=3){const I=o.getX(C),P=o.getX(C+1),B=o.getX(C+2);r=Ey(this,_,e,n,c,u,h,I,P,B),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=A.materialIndex,t.push(r))}}else{const g=Math.max(0,d.start),v=Math.min(o.count,d.start+d.count);for(let A=g,_=v;A<_;A+=3){const y=o.getX(A),x=o.getX(A+1),C=o.getX(A+2);r=Ey(this,a,e,n,c,u,h,y,x,C),r&&(r.faceIndex=Math.floor(A/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(a))for(let g=0,v=f.length;g<v;g++){const A=f[g],_=a[A.materialIndex],y=Math.max(A.start,d.start),x=Math.min(l.count,Math.min(A.start+A.count,d.start+d.count));for(let C=y,S=x;C<S;C+=3){const I=C,P=C+1,B=C+2;r=Ey(this,_,e,n,c,u,h,I,P,B),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=A.materialIndex,t.push(r))}}else{const g=Math.max(0,d.start),v=Math.min(l.count,d.start+d.count);for(let A=g,_=v;A<_;A+=3){const y=A,x=A+1,C=A+2;r=Ey(this,a,e,n,c,u,h,y,x,C),r&&(r.faceIndex=Math.floor(A/3),t.push(r))}}}}function tK(i,e,t,n,r,s,a,o){let l;if(e.side===Fo?l=n.intersectTriangle(a,s,r,!0,o):l=n.intersectTriangle(r,s,a,e.side===mh,o),l===null)return null;Cy.copy(o),Cy.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(Cy);return c<t.near||c>t.far?null:{distance:c,point:Cy.clone(),object:i}}function Ey(i,e,t,n,r,s,a,o,l,c){i.getVertexPosition(o,Dm),i.getVertexPosition(l,Lm),i.getVertexPosition(c,Om);const u=tK(i,e,t,n,Dm,Lm,Om,xy);if(u){r&&(by.fromBufferAttribute(r,o),yy.fromBufferAttribute(r,l),wy.fromBufferAttribute(r,c),u.uv=al.getInterpolation(xy,Dm,Lm,Om,by,yy,wy,new Et)),s&&(by.fromBufferAttribute(s,o),yy.fromBufferAttribute(s,l),wy.fromBufferAttribute(s,c),u.uv1=al.getInterpolation(xy,Dm,Lm,Om,by,yy,wy,new Et),u.uv2=u.uv1),a&&(Ik.fromBufferAttribute(a,o),Pk.fromBufferAttribute(a,l),kk.fromBufferAttribute(a,c),u.normal=al.getInterpolation(xy,Dm,Lm,Om,Ik,Pk,kk,new fe),u.normal.dot(n.direction)>0&&u.normal.multiplyScalar(-1));const h={a:o,b:l,c,normal:new fe,materialIndex:0};al.getNormal(Dm,Lm,Om,h.normal),u.face=h}return u}class $0 extends ai{constructor(e=1,t=1,n=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],h=[];let f=0,d=0;g("z","y","x",-1,-1,n,t,e,a,s,0),g("z","y","x",1,-1,n,t,-e,a,s,1),g("x","z","y",1,1,e,n,t,r,a,2),g("x","z","y",1,-1,e,n,-t,r,a,3),g("x","y","z",1,-1,e,t,n,r,s,4),g("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new hn(c,3)),this.setAttribute("normal",new hn(u,3)),this.setAttribute("uv",new hn(h,2));function g(v,A,_,y,x,C,S,I,P,B,M){const D=C/P,F=S/B,z=C/2,U=S/2,$=I/2,O=P+1,ie=B+1;let W=0,J=0;const Ce=new fe;for(let Me=0;Me<ie;Me++){const ge=Me*F-U;for(let ve=0;ve<O;ve++){const nt=ve*D-z;Ce[v]=nt*y,Ce[A]=ge*x,Ce[_]=$,c.push(Ce.x,Ce.y,Ce.z),Ce[v]=0,Ce[A]=0,Ce[_]=I>0?1:-1,u.push(Ce.x,Ce.y,Ce.z),h.push(ve/P),h.push(1-Me/B),W+=1}}for(let Me=0;Me<B;Me++)for(let ge=0;ge<P;ge++){const ve=f+ge+O*Me,nt=f+ge+O*(Me+1),$e=f+(ge+1)+O*(Me+1),X=f+(ge+1)+O*Me;l.push(ve,nt,X),l.push(nt,$e,X),J+=6}o.addGroup(d,J,M),d+=J,f+=W}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $0(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Rg(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function Bo(i){const e={};for(let t=0;t<i.length;t++){const n=Rg(i[t]);for(const r in n)e[r]=n[r]}return e}function nK(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function oO(i){return i.getRenderTarget()===null?i.outputColorSpace:Nc}const x2={clone:Rg,merge:Bo};var iK=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,rK=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class _l extends xa{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=iK,this.fragmentShader=rK,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Rg(e.uniforms),this.uniformsGroups=nK(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}let oA=class extends Oi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Wn,this.projectionMatrix=new Wn,this.projectionMatrixInverse=new Wn,this.coordinateSystem=Ju}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};class yr extends oA{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Bg*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(A0*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Bg*2*Math.atan(Math.tan(A0*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(A0*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*n/c,r*=a.width/l,n*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Nm=-90,Fm=1;class lO extends Oi{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null;const r=new yr(Nm,Fm,e,t);r.layers=this.layers,this.add(r);const s=new yr(Nm,Fm,e,t);s.layers=this.layers,this.add(s);const a=new yr(Nm,Fm,e,t);a.layers=this.layers,this.add(a);const o=new yr(Nm,Fm,e,t);o.layers=this.layers,this.add(o);const l=new yr(Nm,Fm,e,t);l.layers=this.layers,this.add(l);const c=new yr(Nm,Fm,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,a,o,l]=t;for(const c of t)this.remove(c);if(e===Ju)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===w1)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,s,a,o,l,c]=this.children,u=e.getRenderTarget(),h=e.xr.enabled;e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(u),e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class lA extends rs{constructor(e,t,n,r,s,a,o,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Cf,super(e,t,n,r,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class cO extends po{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];t.encoding!==void 0&&(i1("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===lh?kn:ch),this.texture=new lA(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Dr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new $0(5,5,5),s=new _l({name:"CubemapFromEquirect",uniforms:Rg(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Fo,blending:oh});s.uniforms.tEquirect.value=t;const a=new cr(r,s),o=t.minFilter;return t.minFilter===vu&&(t.minFilter=Dr),new lO(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(s)}}const q4=new fe,sK=new fe,aK=new Ei;let wd=class{constructor(e=new fe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=q4.subVectors(n,t).cross(sK.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(q4),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||aK.getNormalMatrix(e),r=this.coplanarPoint(q4).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Fp=new Vc,Sy=new fe;class C2{constructor(e=new wd,t=new wd,n=new wd,r=new wd,s=new wd,a=new wd){this.planes=[e,t,n,r,s,a]}set(e,t,n,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Ju){const n=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],l=r[3],c=r[4],u=r[5],h=r[6],f=r[7],d=r[8],g=r[9],v=r[10],A=r[11],_=r[12],y=r[13],x=r[14],C=r[15];if(n[0].setComponents(l-s,f-c,A-d,C-_).normalize(),n[1].setComponents(l+s,f+c,A+d,C+_).normalize(),n[2].setComponents(l+a,f+u,A+g,C+y).normalize(),n[3].setComponents(l-a,f-u,A-g,C-y).normalize(),n[4].setComponents(l-o,f-h,A-v,C-x).normalize(),t===Ju)n[5].setComponents(l+o,f+h,A+v,C+x).normalize();else if(t===w1)n[5].setComponents(o,h,v,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Fp.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Fp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Fp)}intersectsSprite(e){return Fp.center.set(0,0,0),Fp.radius=.7071067811865476,Fp.applyMatrix4(e.matrixWorld),this.intersectsSphere(Fp)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Sy.x=r.normal.x>0?e.max.x:e.min.x,Sy.y=r.normal.y>0?e.max.y:e.min.y,Sy.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Sy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function uO(){let i=null,e=!1,t=null,n=null;function r(s,a){t(s,a),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function oK(i,e){const t=e.isWebGL2,n=new WeakMap;function r(c,u){const h=c.array,f=c.usage,d=i.createBuffer();i.bindBuffer(u,d),i.bufferData(u,h,f),c.onUploadCallback();let g;if(h instanceof Float32Array)g=i.FLOAT;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)g=i.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=i.UNSIGNED_SHORT;else if(h instanceof Int16Array)g=i.SHORT;else if(h instanceof Uint32Array)g=i.UNSIGNED_INT;else if(h instanceof Int32Array)g=i.INT;else if(h instanceof Int8Array)g=i.BYTE;else if(h instanceof Uint8Array)g=i.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)g=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:d,type:g,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,h){const f=u.array,d=u.updateRange;i.bindBuffer(h,c),d.count===-1?i.bufferSubData(h,0,f):(t?i.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f,d.offset,d.count):i.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f.subarray(d.offset,d.offset+d.count)),d.count=-1),u.onUploadCallback()}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),n.get(c)}function o(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=n.get(c);u&&(i.deleteBuffer(u.buffer),n.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const f=n.get(c);(!f||f.version<c.version)&&n.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const h=n.get(c);h===void 0?n.set(c,r(c,u)):h.version<c.version&&(s(h.buffer,c,u),h.version=c.version)}return{get:a,remove:o,update:l}}class ov extends ai{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(n),l=Math.floor(r),c=o+1,u=l+1,h=e/o,f=t/l,d=[],g=[],v=[],A=[];for(let _=0;_<u;_++){const y=_*f-a;for(let x=0;x<c;x++){const C=x*h-s;g.push(C,-y,0),v.push(0,0,1),A.push(x/o),A.push(1-_/l)}}for(let _=0;_<l;_++)for(let y=0;y<o;y++){const x=y+c*_,C=y+c*(_+1),S=y+1+c*(_+1),I=y+1+c*_;d.push(x,C,I),d.push(C,S,I)}this.setIndex(d),this.setAttribute("position",new hn(g,3)),this.setAttribute("normal",new hn(v,3)),this.setAttribute("uv",new hn(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ov(e.width,e.height,e.widthSegments,e.heightSegments)}}var lK=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,cK=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,uK=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,hK=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,fK=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,dK=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,pK=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,mK=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,gK=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,vK=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,_K=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,AK=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bK=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,yK=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,wK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,xK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,CK=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,EK=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,SK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,MK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,TK=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,IK=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,PK=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,kK=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,BK=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,RK=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,DK=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,LK=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,OK="gl_FragColor = linearToOutputTexel( gl_FragColor );",NK=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,FK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,zK=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,UK=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,VK=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,HK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,$K=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,GK=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,QK=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,qK=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,jK=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,WK=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,YK=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,XK=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,KK=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,JK=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ZK=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,eJ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,tJ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,nJ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,iJ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,rJ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,sJ=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,aJ=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,oJ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lJ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,cJ=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,uJ=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,hJ=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,fJ=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,dJ=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,pJ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,mJ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,gJ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vJ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,_J=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,AJ=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,bJ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,yJ=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,wJ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,xJ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,CJ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,EJ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,SJ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,MJ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,TJ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,IJ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,PJ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,kJ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,BJ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,RJ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,DJ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,LJ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,OJ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,NJ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,FJ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,zJ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,UJ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,VJ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,HJ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,$J=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,GJ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,QJ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,qJ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,jJ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,WJ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,YJ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,XJ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,KJ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,JJ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,ZJ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,eZ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,tZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,nZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,iZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,rZ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const sZ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,aZ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,oZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,lZ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,uZ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hZ=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fZ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,dZ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,pZ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,mZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,gZ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vZ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_Z=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,AZ=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,bZ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yZ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wZ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xZ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,CZ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EZ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,SZ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,MZ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,TZ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IZ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,PZ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kZ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,BZ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,RZ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,DZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,LZ=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,OZ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,NZ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,FZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,gi={alphahash_fragment:lK,alphahash_pars_fragment:cK,alphamap_fragment:uK,alphamap_pars_fragment:hK,alphatest_fragment:fK,alphatest_pars_fragment:dK,aomap_fragment:pK,aomap_pars_fragment:mK,begin_vertex:gK,beginnormal_vertex:vK,bsdfs:_K,iridescence_fragment:AK,bumpmap_pars_fragment:bK,clipping_planes_fragment:yK,clipping_planes_pars_fragment:wK,clipping_planes_pars_vertex:xK,clipping_planes_vertex:CK,color_fragment:EK,color_pars_fragment:SK,color_pars_vertex:MK,color_vertex:TK,common:IK,cube_uv_reflection_fragment:PK,defaultnormal_vertex:kK,displacementmap_pars_vertex:BK,displacementmap_vertex:RK,emissivemap_fragment:DK,emissivemap_pars_fragment:LK,colorspace_fragment:OK,colorspace_pars_fragment:NK,envmap_fragment:FK,envmap_common_pars_fragment:zK,envmap_pars_fragment:UK,envmap_pars_vertex:VK,envmap_physical_pars_fragment:ZK,envmap_vertex:HK,fog_vertex:$K,fog_pars_vertex:GK,fog_fragment:QK,fog_pars_fragment:qK,gradientmap_pars_fragment:jK,lightmap_fragment:WK,lightmap_pars_fragment:YK,lights_lambert_fragment:XK,lights_lambert_pars_fragment:KK,lights_pars_begin:JK,lights_toon_fragment:eJ,lights_toon_pars_fragment:tJ,lights_phong_fragment:nJ,lights_phong_pars_fragment:iJ,lights_physical_fragment:rJ,lights_physical_pars_fragment:sJ,lights_fragment_begin:aJ,lights_fragment_maps:oJ,lights_fragment_end:lJ,logdepthbuf_fragment:cJ,logdepthbuf_pars_fragment:uJ,logdepthbuf_pars_vertex:hJ,logdepthbuf_vertex:fJ,map_fragment:dJ,map_pars_fragment:pJ,map_particle_fragment:mJ,map_particle_pars_fragment:gJ,metalnessmap_fragment:vJ,metalnessmap_pars_fragment:_J,morphcolor_vertex:AJ,morphnormal_vertex:bJ,morphtarget_pars_vertex:yJ,morphtarget_vertex:wJ,normal_fragment_begin:xJ,normal_fragment_maps:CJ,normal_pars_fragment:EJ,normal_pars_vertex:SJ,normal_vertex:MJ,normalmap_pars_fragment:TJ,clearcoat_normal_fragment_begin:IJ,clearcoat_normal_fragment_maps:PJ,clearcoat_pars_fragment:kJ,iridescence_pars_fragment:BJ,opaque_fragment:RJ,packing:DJ,premultiplied_alpha_fragment:LJ,project_vertex:OJ,dithering_fragment:NJ,dithering_pars_fragment:FJ,roughnessmap_fragment:zJ,roughnessmap_pars_fragment:UJ,shadowmap_pars_fragment:VJ,shadowmap_pars_vertex:HJ,shadowmap_vertex:$J,shadowmask_pars_fragment:GJ,skinbase_vertex:QJ,skinning_pars_vertex:qJ,skinning_vertex:jJ,skinnormal_vertex:WJ,specularmap_fragment:YJ,specularmap_pars_fragment:XJ,tonemapping_fragment:KJ,tonemapping_pars_fragment:JJ,transmission_fragment:ZJ,transmission_pars_fragment:eZ,uv_pars_fragment:tZ,uv_pars_vertex:nZ,uv_vertex:iZ,worldpos_vertex:rZ,background_vert:sZ,background_frag:aZ,backgroundCube_vert:oZ,backgroundCube_frag:lZ,cube_vert:cZ,cube_frag:uZ,depth_vert:hZ,depth_frag:fZ,distanceRGBA_vert:dZ,distanceRGBA_frag:pZ,equirect_vert:mZ,equirect_frag:gZ,linedashed_vert:vZ,linedashed_frag:_Z,meshbasic_vert:AZ,meshbasic_frag:bZ,meshlambert_vert:yZ,meshlambert_frag:wZ,meshmatcap_vert:xZ,meshmatcap_frag:CZ,meshnormal_vert:EZ,meshnormal_frag:SZ,meshphong_vert:MZ,meshphong_frag:TZ,meshphysical_vert:IZ,meshphysical_frag:PZ,meshtoon_vert:kZ,meshtoon_frag:BZ,points_vert:RZ,points_frag:DZ,shadow_vert:LZ,shadow_frag:OZ,sprite_vert:NZ,sprite_frag:FZ},Jt={common:{diffuse:{value:new qt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ei},alphaMap:{value:null},alphaMapTransform:{value:new Ei},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ei}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ei}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ei}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ei},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ei},normalScale:{value:new Et(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ei},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ei}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ei}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ei}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new qt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ei},alphaTest:{value:0},uvTransform:{value:new Ei}},sprite:{diffuse:{value:new qt(16777215)},opacity:{value:1},center:{value:new Et(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ei},alphaMap:{value:null},alphaMapTransform:{value:new Ei},alphaTest:{value:0}}},hu={basic:{uniforms:Bo([Jt.common,Jt.specularmap,Jt.envmap,Jt.aomap,Jt.lightmap,Jt.fog]),vertexShader:gi.meshbasic_vert,fragmentShader:gi.meshbasic_frag},lambert:{uniforms:Bo([Jt.common,Jt.specularmap,Jt.envmap,Jt.aomap,Jt.lightmap,Jt.emissivemap,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.fog,Jt.lights,{emissive:{value:new qt(0)}}]),vertexShader:gi.meshlambert_vert,fragmentShader:gi.meshlambert_frag},phong:{uniforms:Bo([Jt.common,Jt.specularmap,Jt.envmap,Jt.aomap,Jt.lightmap,Jt.emissivemap,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.fog,Jt.lights,{emissive:{value:new qt(0)},specular:{value:new qt(1118481)},shininess:{value:30}}]),vertexShader:gi.meshphong_vert,fragmentShader:gi.meshphong_frag},standard:{uniforms:Bo([Jt.common,Jt.envmap,Jt.aomap,Jt.lightmap,Jt.emissivemap,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.roughnessmap,Jt.metalnessmap,Jt.fog,Jt.lights,{emissive:{value:new qt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:gi.meshphysical_vert,fragmentShader:gi.meshphysical_frag},toon:{uniforms:Bo([Jt.common,Jt.aomap,Jt.lightmap,Jt.emissivemap,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.gradientmap,Jt.fog,Jt.lights,{emissive:{value:new qt(0)}}]),vertexShader:gi.meshtoon_vert,fragmentShader:gi.meshtoon_frag},matcap:{uniforms:Bo([Jt.common,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.fog,{matcap:{value:null}}]),vertexShader:gi.meshmatcap_vert,fragmentShader:gi.meshmatcap_frag},points:{uniforms:Bo([Jt.points,Jt.fog]),vertexShader:gi.points_vert,fragmentShader:gi.points_frag},dashed:{uniforms:Bo([Jt.common,Jt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:gi.linedashed_vert,fragmentShader:gi.linedashed_frag},depth:{uniforms:Bo([Jt.common,Jt.displacementmap]),vertexShader:gi.depth_vert,fragmentShader:gi.depth_frag},normal:{uniforms:Bo([Jt.common,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,{opacity:{value:1}}]),vertexShader:gi.meshnormal_vert,fragmentShader:gi.meshnormal_frag},sprite:{uniforms:Bo([Jt.sprite,Jt.fog]),vertexShader:gi.sprite_vert,fragmentShader:gi.sprite_frag},background:{uniforms:{uvTransform:{value:new Ei},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:gi.background_vert,fragmentShader:gi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:gi.backgroundCube_vert,fragmentShader:gi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:gi.cube_vert,fragmentShader:gi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:gi.equirect_vert,fragmentShader:gi.equirect_frag},distanceRGBA:{uniforms:Bo([Jt.common,Jt.displacementmap,{referencePosition:{value:new fe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:gi.distanceRGBA_vert,fragmentShader:gi.distanceRGBA_frag},shadow:{uniforms:Bo([Jt.lights,Jt.fog,{color:{value:new qt(0)},opacity:{value:1}}]),vertexShader:gi.shadow_vert,fragmentShader:gi.shadow_frag}};hu.physical={uniforms:Bo([hu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ei},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ei},clearcoatNormalScale:{value:new Et(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ei},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ei},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ei},sheen:{value:0},sheenColor:{value:new qt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ei},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ei},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ei},transmissionSamplerSize:{value:new Et},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ei},attenuationDistance:{value:0},attenuationColor:{value:new qt(0)},specularColor:{value:new qt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ei},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ei},anisotropyVector:{value:new Et},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ei}}]),vertexShader:gi.meshphysical_vert,fragmentShader:gi.meshphysical_frag};const My={r:0,b:0,g:0};function zZ(i,e,t,n,r,s,a){const o=new qt(0);let l=s===!0?0:1,c,u,h=null,f=0,d=null;function g(A,_){let y=!1,x=_.isScene===!0?_.background:null;switch(x&&x.isTexture&&(x=(_.backgroundBlurriness>0?t:e).get(x)),x===null?v(o,l):x&&x.isColor&&(v(x,1),y=!0),i.xr.getEnvironmentBlendMode()){case"opaque":y=!0;break;case"additive":n.buffers.color.setClear(0,0,0,1,a),y=!0;break;case"alpha-blend":n.buffers.color.setClear(0,0,0,0,a),y=!0;break}(i.autoClear||y)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),x&&(x.isCubeTexture||x.mapping===rv)?(u===void 0&&(u=new cr(new $0(1,1,1),new _l({name:"BackgroundCubeMaterial",uniforms:Rg(hu.backgroundCube.uniforms),vertexShader:hu.backgroundCube.vertexShader,fragmentShader:hu.backgroundCube.fragmentShader,side:Fo,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(I,P,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=x,u.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,u.material.toneMapped=x.colorSpace!==kn,(h!==x||f!==x.version||d!==i.toneMapping)&&(u.material.needsUpdate=!0,h=x,f=x.version,d=i.toneMapping),u.layers.enableAll(),A.unshift(u,u.geometry,u.material,0,0,null)):x&&x.isTexture&&(c===void 0&&(c=new cr(new ov(2,2),new _l({name:"BackgroundMaterial",uniforms:Rg(hu.background.uniforms),vertexShader:hu.background.vertexShader,fragmentShader:hu.background.fragmentShader,side:mh,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,c.material.toneMapped=x.colorSpace!==kn,x.matrixAutoUpdate===!0&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(h!==x||f!==x.version||d!==i.toneMapping)&&(c.material.needsUpdate=!0,h=x,f=x.version,d=i.toneMapping),c.layers.enableAll(),A.unshift(c,c.geometry,c.material,0,0,null))}function v(A,_){A.getRGB(My,oO(i)),n.buffers.color.setClear(My.r,My.g,My.b,_,a)}return{getClearColor:function(){return o},setClearColor:function(A,_=1){o.set(A),l=_,v(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(A){l=A,v(o,l)},render:g}}function UZ(i,e,t,n){const r=i.getParameter(i.MAX_VERTEX_ATTRIBS),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),a=n.isWebGL2||s!==null,o={},l=A(null);let c=l,u=!1;function h($,O,ie,W,J){let Ce=!1;if(a){const Me=v(W,ie,O);c!==Me&&(c=Me,d(c.object)),Ce=_($,W,ie,J),Ce&&y($,W,ie,J)}else{const Me=O.wireframe===!0;(c.geometry!==W.id||c.program!==ie.id||c.wireframe!==Me)&&(c.geometry=W.id,c.program=ie.id,c.wireframe=Me,Ce=!0)}J!==null&&t.update(J,i.ELEMENT_ARRAY_BUFFER),(Ce||u)&&(u=!1,B($,O,ie,W),J!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(J).buffer))}function f(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}function d($){return n.isWebGL2?i.bindVertexArray($):s.bindVertexArrayOES($)}function g($){return n.isWebGL2?i.deleteVertexArray($):s.deleteVertexArrayOES($)}function v($,O,ie){const W=ie.wireframe===!0;let J=o[$.id];J===void 0&&(J={},o[$.id]=J);let Ce=J[O.id];Ce===void 0&&(Ce={},J[O.id]=Ce);let Me=Ce[W];return Me===void 0&&(Me=A(f()),Ce[W]=Me),Me}function A($){const O=[],ie=[],W=[];for(let J=0;J<r;J++)O[J]=0,ie[J]=0,W[J]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:O,enabledAttributes:ie,attributeDivisors:W,object:$,attributes:{},index:null}}function _($,O,ie,W){const J=c.attributes,Ce=O.attributes;let Me=0;const ge=ie.getAttributes();for(const ve in ge)if(ge[ve].location>=0){const $e=J[ve];let X=Ce[ve];if(X===void 0&&(ve==="instanceMatrix"&&$.instanceMatrix&&(X=$.instanceMatrix),ve==="instanceColor"&&$.instanceColor&&(X=$.instanceColor)),$e===void 0||$e.attribute!==X||X&&$e.data!==X.data)return!0;Me++}return c.attributesNum!==Me||c.index!==W}function y($,O,ie,W){const J={},Ce=O.attributes;let Me=0;const ge=ie.getAttributes();for(const ve in ge)if(ge[ve].location>=0){let $e=Ce[ve];$e===void 0&&(ve==="instanceMatrix"&&$.instanceMatrix&&($e=$.instanceMatrix),ve==="instanceColor"&&$.instanceColor&&($e=$.instanceColor));const X={};X.attribute=$e,$e&&$e.data&&(X.data=$e.data),J[ve]=X,Me++}c.attributes=J,c.attributesNum=Me,c.index=W}function x(){const $=c.newAttributes;for(let O=0,ie=$.length;O<ie;O++)$[O]=0}function C($){S($,0)}function S($,O){const ie=c.newAttributes,W=c.enabledAttributes,J=c.attributeDivisors;ie[$]=1,W[$]===0&&(i.enableVertexAttribArray($),W[$]=1),J[$]!==O&&((n.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"]($,O),J[$]=O)}function I(){const $=c.newAttributes,O=c.enabledAttributes;for(let ie=0,W=O.length;ie<W;ie++)O[ie]!==$[ie]&&(i.disableVertexAttribArray(ie),O[ie]=0)}function P($,O,ie,W,J,Ce,Me){Me===!0?i.vertexAttribIPointer($,O,ie,J,Ce):i.vertexAttribPointer($,O,ie,W,J,Ce)}function B($,O,ie,W){if(n.isWebGL2===!1&&($.isInstancedMesh||W.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;x();const J=W.attributes,Ce=ie.getAttributes(),Me=O.defaultAttributeValues;for(const ge in Ce){const ve=Ce[ge];if(ve.location>=0){let nt=J[ge];if(nt===void 0&&(ge==="instanceMatrix"&&$.instanceMatrix&&(nt=$.instanceMatrix),ge==="instanceColor"&&$.instanceColor&&(nt=$.instanceColor)),nt!==void 0){const $e=nt.normalized,X=nt.itemSize,Be=t.get(nt);if(Be===void 0)continue;const mt=Be.buffer,Ue=Be.type,Tt=Be.bytesPerElement,yt=n.isWebGL2===!0&&(Ue===i.INT||Ue===i.UNSIGNED_INT||nt.gpuType===sv);if(nt.isInterleavedBufferAttribute){const Ye=nt.data,lt=Ye.stride,ue=nt.offset;if(Ye.isInstancedInterleavedBuffer){for(let dt=0;dt<ve.locationSize;dt++)S(ve.location+dt,Ye.meshPerAttribute);$.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=Ye.meshPerAttribute*Ye.count)}else for(let dt=0;dt<ve.locationSize;dt++)C(ve.location+dt);i.bindBuffer(i.ARRAY_BUFFER,mt);for(let dt=0;dt<ve.locationSize;dt++)P(ve.location+dt,X/ve.locationSize,Ue,$e,lt*Tt,(ue+X/ve.locationSize*dt)*Tt,yt)}else{if(nt.isInstancedBufferAttribute){for(let Ye=0;Ye<ve.locationSize;Ye++)S(ve.location+Ye,nt.meshPerAttribute);$.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=nt.meshPerAttribute*nt.count)}else for(let Ye=0;Ye<ve.locationSize;Ye++)C(ve.location+Ye);i.bindBuffer(i.ARRAY_BUFFER,mt);for(let Ye=0;Ye<ve.locationSize;Ye++)P(ve.location+Ye,X/ve.locationSize,Ue,$e,X*Tt,X/ve.locationSize*Ye*Tt,yt)}}else if(Me!==void 0){const $e=Me[ge];if($e!==void 0)switch($e.length){case 2:i.vertexAttrib2fv(ve.location,$e);break;case 3:i.vertexAttrib3fv(ve.location,$e);break;case 4:i.vertexAttrib4fv(ve.location,$e);break;default:i.vertexAttrib1fv(ve.location,$e)}}}}I()}function M(){z();for(const $ in o){const O=o[$];for(const ie in O){const W=O[ie];for(const J in W)g(W[J].object),delete W[J];delete O[ie]}delete o[$]}}function D($){if(o[$.id]===void 0)return;const O=o[$.id];for(const ie in O){const W=O[ie];for(const J in W)g(W[J].object),delete W[J];delete O[ie]}delete o[$.id]}function F($){for(const O in o){const ie=o[O];if(ie[$.id]===void 0)continue;const W=ie[$.id];for(const J in W)g(W[J].object),delete W[J];delete ie[$.id]}}function z(){U(),u=!0,c!==l&&(c=l,d(c.object))}function U(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:z,resetDefaultState:U,dispose:M,releaseStatesOfGeometry:D,releaseStatesOfProgram:F,initAttributes:x,enableAttribute:C,disableUnusedAttributes:I}}function VZ(i,e,t,n){const r=n.isWebGL2;let s;function a(c){s=c}function o(c,u){i.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,h){if(h===0)return;let f,d;if(r)f=i,d="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[d](s,c,u,h),t.update(u,s,h)}this.setMode=a,this.render=o,this.renderInstances=l}function HZ(i,e,t){let n;function r(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");n=i.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function s(P){if(P==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&i.constructor.name==="WebGL2RenderingContext";let o=t.precision!==void 0?t.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const c=a||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,h=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),f=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=i.getParameter(i.MAX_TEXTURE_SIZE),g=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),v=i.getParameter(i.MAX_VERTEX_ATTRIBS),A=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),_=i.getParameter(i.MAX_VARYING_VECTORS),y=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),x=f>0,C=a||e.has("OES_texture_float"),S=x&&C,I=a?i.getParameter(i.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:g,maxAttributes:v,maxVertexUniforms:A,maxVaryings:_,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:C,floatVertexTextures:S,maxSamples:I}}function $Z(i){const e=this;let t=null,n=0,r=!1,s=!1;const a=new wd,o=new Ei,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){const d=h.length!==0||f||n!==0||r;return r=f,n=h.length,d},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,f){t=u(h,f,0)},this.setState=function(h,f,d){const g=h.clippingPlanes,v=h.clipIntersection,A=h.clipShadows,_=i.get(h);if(!r||g===null||g.length===0||s&&!A)s?u(null):c();else{const y=s?0:n,x=y*4;let C=_.clippingState||null;l.value=C,C=u(g,f,x,d);for(let S=0;S!==x;++S)C[S]=t[S];_.clippingState=C,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(h,f,d,g){const v=h!==null?h.length:0;let A=null;if(v!==0){if(A=l.value,g!==!0||A===null){const _=d+v*4,y=f.matrixWorldInverse;o.getNormalMatrix(y),(A===null||A.length<_)&&(A=new Float32Array(_));for(let x=0,C=d;x!==v;++x,C+=4)a.copy(h[x]).applyMatrix4(y,o),a.normal.toArray(A,C),A[C+3]=a.constant}l.value=A,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,A}}function GZ(i){let e=new WeakMap;function t(a,o){return o===g1?a.mapping=Cf:o===v1&&(a.mapping=Gd),a}function n(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const o=a.mapping;if(o===g1||o===v1)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new cO(l.height/2);return c.fromEquirectangularTexture(i,a),e.set(a,c),a.addEventListener("dispose",r),t(c.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class yh extends oA{constructor(e=-1,t=1,n=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,a=n+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const dg=4,Bk=[.125,.215,.35,.446,.526,.582],o0=20,j4=new yh,Rk=new qt;let W4=null;const e0=(1+Math.sqrt(5))/2,zm=1/e0,Dk=[new fe(1,1,1),new fe(-1,1,1),new fe(1,1,-1),new fe(-1,1,-1),new fe(0,e0,zm),new fe(0,e0,-zm),new fe(zm,0,e0),new fe(-zm,0,e0),new fe(e0,zm,0),new fe(-e0,zm,0)];class AM{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){W4=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Nk(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Ok(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(W4),e.scissorTest=!1,Ty(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Cf||e.mapping===Gd?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),W4=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Dr,minFilter:Dr,generateMipmaps:!1,type:Kl,format:Bs,colorSpace:Nc,depthBuffer:!1},r=Lk(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Lk(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=QZ(s)),this._blurMaterial=qZ(s,e,t)}return r}_compileMaterial(e){const t=new cr(this._lodPlanes[0],e);this._renderer.compile(t,j4)}_sceneToCubeUV(e,t,n,r){const o=new yr(90,1,t,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,f=u.toneMapping;u.getClearColor(Rk),u.toneMapping=bf,u.autoClear=!1;const d=new Lo({name:"PMREM.Background",side:Fo,depthWrite:!1,depthTest:!1}),g=new cr(new $0,d);let v=!1;const A=e.background;A?A.isColor&&(d.color.copy(A),e.background=null,v=!0):(d.color.copy(Rk),v=!0);for(let _=0;_<6;_++){const y=_%3;y===0?(o.up.set(0,l[_],0),o.lookAt(c[_],0,0)):y===1?(o.up.set(0,0,l[_]),o.lookAt(0,c[_],0)):(o.up.set(0,l[_],0),o.lookAt(0,0,c[_]));const x=this._cubeSize;Ty(r,y*x,_>2?x:0,x,x),u.setRenderTarget(r),v&&u.render(g,o),u.render(e,o)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=f,u.autoClear=h,e.background=A}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Cf||e.mapping===Gd;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Nk()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Ok());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new cr(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;Ty(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(a,j4)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=Dk[(r-1)%Dk.length];this._blur(e,r-1,r,s,a)}t.autoClear=n}_blur(e,t,n,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",s),this._halfBlur(a,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new cr(this._lodPlanes[r],c),f=c.uniforms,d=this._sizeLods[n]-1,g=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*o0-1),v=s/g,A=isFinite(s)?1+Math.floor(u*v):o0;A>o0&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${A} samples when the maximum is set to ${o0}`);const _=[];let y=0;for(let P=0;P<o0;++P){const B=P/v,M=Math.exp(-B*B/2);_.push(M),P===0?y+=M:P<A&&(y+=2*M)}for(let P=0;P<_.length;P++)_[P]=_[P]/y;f.envMap.value=e.texture,f.samples.value=A,f.weights.value=_,f.latitudinal.value=a==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:x}=this;f.dTheta.value=g,f.mipInt.value=x-n;const C=this._sizeLods[r],S=3*C*(r>x-dg?r-x+dg:0),I=4*(this._cubeSize-C);Ty(t,S,I,3*C,2*C),l.setRenderTarget(t),l.render(h,j4)}}function QZ(i){const e=[],t=[],n=[];let r=i;const s=i-dg+1+Bk.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>i-dg?l=Bk[a-i+dg-1]:a===0&&(l=0),n.push(l);const c=1/(o-2),u=-c,h=1+c,f=[u,u,h,u,h,h,u,u,h,h,u,h],d=6,g=6,v=3,A=2,_=1,y=new Float32Array(v*g*d),x=new Float32Array(A*g*d),C=new Float32Array(_*g*d);for(let I=0;I<d;I++){const P=I%3*2/3-1,B=I>2?0:-1,M=[P,B,0,P+2/3,B,0,P+2/3,B+1,0,P,B,0,P+2/3,B+1,0,P,B+1,0];y.set(M,v*g*I),x.set(f,A*g*I);const D=[I,I,I,I,I,I];C.set(D,_*g*I)}const S=new ai;S.setAttribute("position",new Un(y,v)),S.setAttribute("uv",new Un(x,A)),S.setAttribute("faceIndex",new Un(C,_)),e.push(S),r>dg&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Lk(i,e,t){const n=new po(i,e,t);return n.texture.mapping=rv,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Ty(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function qZ(i,e,t){const n=new Float32Array(o0),r=new fe(0,1,0);return new _l({name:"SphericalGaussianBlur",defines:{n:o0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:y5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:oh,depthTest:!1,depthWrite:!1})}function Ok(){return new _l({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:y5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:oh,depthTest:!1,depthWrite:!1})}function Nk(){return new _l({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:y5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:oh,depthTest:!1,depthWrite:!1})}function y5(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function jZ(i){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){const l=o.mapping,c=l===g1||l===v1,u=l===Cf||l===Gd;if(c||u)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let h=e.get(o);return t===null&&(t=new AM(i)),h=c?t.fromEquirectangular(o,h):t.fromCubemap(o,h),e.set(o,h),h.texture}else{if(e.has(o))return e.get(o).texture;{const h=o.image;if(c&&h&&h.height>0||u&&h&&r(h)){t===null&&(t=new AM(i));const f=c?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,f),o.addEventListener("dispose",s),f.texture}else return null}}}return o}function r(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function WZ(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const r=t(n);return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function YZ(i,e,t,n){const r={},s=new WeakMap;function a(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const g in f.attributes)e.remove(f.attributes[g]);for(const g in f.morphAttributes){const v=f.morphAttributes[g];for(let A=0,_=v.length;A<_;A++)e.remove(v[A])}f.removeEventListener("dispose",a),delete r[f.id];const d=s.get(f);d&&(e.remove(d),s.delete(f)),n.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function o(h,f){return r[f.id]===!0||(f.addEventListener("dispose",a),r[f.id]=!0,t.memory.geometries++),f}function l(h){const f=h.attributes;for(const g in f)e.update(f[g],i.ARRAY_BUFFER);const d=h.morphAttributes;for(const g in d){const v=d[g];for(let A=0,_=v.length;A<_;A++)e.update(v[A],i.ARRAY_BUFFER)}}function c(h){const f=[],d=h.index,g=h.attributes.position;let v=0;if(d!==null){const y=d.array;v=d.version;for(let x=0,C=y.length;x<C;x+=3){const S=y[x+0],I=y[x+1],P=y[x+2];f.push(S,I,I,P,P,S)}}else{const y=g.array;v=g.version;for(let x=0,C=y.length/3-1;x<C;x+=3){const S=x+0,I=x+1,P=x+2;f.push(S,I,I,P,P,S)}}const A=new(iO(f)?b5:A5)(f,1);A.version=v;const _=s.get(h);_&&e.remove(_),s.set(h,A)}function u(h){const f=s.get(h);if(f){const d=h.index;d!==null&&f.version<d.version&&c(h)}else c(h);return s.get(h)}return{get:o,update:l,getWireframeAttribute:u}}function XZ(i,e,t,n){const r=n.isWebGL2;let s;function a(f){s=f}let o,l;function c(f){o=f.type,l=f.bytesPerElement}function u(f,d){i.drawElements(s,d,o,f*l),t.update(d,s,1)}function h(f,d,g){if(g===0)return;let v,A;if(r)v=i,A="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),A="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[A](s,d,o,f*l,g),t.update(d,s,g)}this.setMode=a,this.setIndex=c,this.render=u,this.renderInstances=h}function KZ(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,a,o){switch(t.calls++,a){case i.TRIANGLES:t.triangles+=o*(s/3);break;case i.LINES:t.lines+=o*(s/2);break;case i.LINE_STRIP:t.lines+=o*(s-1);break;case i.LINE_LOOP:t.lines+=o*s;break;case i.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function JZ(i,e){return i[0]-e[0]}function ZZ(i,e){return Math.abs(e[1])-Math.abs(i[1])}function eee(i,e,t){const n={},r=new Float32Array(8),s=new WeakMap,a=new Hi,o=[];for(let c=0;c<8;c++)o[c]=[c,0];function l(c,u,h){const f=c.morphTargetInfluences;if(e.isWebGL2===!0){const d=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,g=d!==void 0?d.length:0;let v=s.get(u);if(v===void 0||v.count!==g){let $=function(){z.dispose(),s.delete(u),u.removeEventListener("dispose",$)};v!==void 0&&v.texture.dispose();const y=u.morphAttributes.position!==void 0,x=u.morphAttributes.normal!==void 0,C=u.morphAttributes.color!==void 0,S=u.morphAttributes.position||[],I=u.morphAttributes.normal||[],P=u.morphAttributes.color||[];let B=0;y===!0&&(B=1),x===!0&&(B=2),C===!0&&(B=3);let M=u.attributes.position.count*B,D=1;M>e.maxTextureSize&&(D=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);const F=new Float32Array(M*D*4*g),z=new b2(F,M,D,g);z.type=is,z.needsUpdate=!0;const U=B*4;for(let O=0;O<g;O++){const ie=S[O],W=I[O],J=P[O],Ce=M*D*4*O;for(let Me=0;Me<ie.count;Me++){const ge=Me*U;y===!0&&(a.fromBufferAttribute(ie,Me),F[Ce+ge+0]=a.x,F[Ce+ge+1]=a.y,F[Ce+ge+2]=a.z,F[Ce+ge+3]=0),x===!0&&(a.fromBufferAttribute(W,Me),F[Ce+ge+4]=a.x,F[Ce+ge+5]=a.y,F[Ce+ge+6]=a.z,F[Ce+ge+7]=0),C===!0&&(a.fromBufferAttribute(J,Me),F[Ce+ge+8]=a.x,F[Ce+ge+9]=a.y,F[Ce+ge+10]=a.z,F[Ce+ge+11]=J.itemSize===4?a.w:1)}}v={count:g,texture:z,size:new Et(M,D)},s.set(u,v),u.addEventListener("dispose",$)}let A=0;for(let y=0;y<f.length;y++)A+=f[y];const _=u.morphTargetsRelative?1:1-A;h.getUniforms().setValue(i,"morphTargetBaseInfluence",_),h.getUniforms().setValue(i,"morphTargetInfluences",f),h.getUniforms().setValue(i,"morphTargetsTexture",v.texture,t),h.getUniforms().setValue(i,"morphTargetsTextureSize",v.size)}else{const d=f===void 0?0:f.length;let g=n[u.id];if(g===void 0||g.length!==d){g=[];for(let x=0;x<d;x++)g[x]=[x,0];n[u.id]=g}for(let x=0;x<d;x++){const C=g[x];C[0]=x,C[1]=f[x]}g.sort(ZZ);for(let x=0;x<8;x++)x<d&&g[x][1]?(o[x][0]=g[x][0],o[x][1]=g[x][1]):(o[x][0]=Number.MAX_SAFE_INTEGER,o[x][1]=0);o.sort(JZ);const v=u.morphAttributes.position,A=u.morphAttributes.normal;let _=0;for(let x=0;x<8;x++){const C=o[x],S=C[0],I=C[1];S!==Number.MAX_SAFE_INTEGER&&I?(v&&u.getAttribute("morphTarget"+x)!==v[S]&&u.setAttribute("morphTarget"+x,v[S]),A&&u.getAttribute("morphNormal"+x)!==A[S]&&u.setAttribute("morphNormal"+x,A[S]),r[x]=I,_+=I):(v&&u.hasAttribute("morphTarget"+x)===!0&&u.deleteAttribute("morphTarget"+x),A&&u.hasAttribute("morphNormal"+x)===!0&&u.deleteAttribute("morphNormal"+x),r[x]=0)}const y=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(i,"morphTargetBaseInfluence",y),h.getUniforms().setValue(i,"morphTargetInfluences",r)}}return{update:l}}function tee(i,e,t,n){let r=new WeakMap;function s(l){const c=n.render.frame,u=l.geometry,h=e.get(l,u);if(r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==c&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,i.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;r.get(f)!==c&&(f.update(),r.set(f,c))}return h}function a(){r=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}const hO=new rs,fO=new b2,dO=new y2,pO=new lA,Fk=[],zk=[],Uk=new Float32Array(16),Vk=new Float32Array(9),Hk=new Float32Array(4);function lv(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=Fk[r];if(s===void 0&&(s=new Float32Array(r),Fk[r]=s),e!==0){n.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,i[a].toArray(s,o)}return s}function Ca(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Ea(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function E2(i,e){let t=zk[e];t===void 0&&(t=new Int32Array(e),zk[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function nee(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function iee(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ca(t,e))return;i.uniform2fv(this.addr,e),Ea(t,e)}}function ree(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ca(t,e))return;i.uniform3fv(this.addr,e),Ea(t,e)}}function see(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ca(t,e))return;i.uniform4fv(this.addr,e),Ea(t,e)}}function aee(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ca(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Ea(t,e)}else{if(Ca(t,n))return;Hk.set(n),i.uniformMatrix2fv(this.addr,!1,Hk),Ea(t,n)}}function oee(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ca(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Ea(t,e)}else{if(Ca(t,n))return;Vk.set(n),i.uniformMatrix3fv(this.addr,!1,Vk),Ea(t,n)}}function lee(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ca(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Ea(t,e)}else{if(Ca(t,n))return;Uk.set(n),i.uniformMatrix4fv(this.addr,!1,Uk),Ea(t,n)}}function cee(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function uee(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ca(t,e))return;i.uniform2iv(this.addr,e),Ea(t,e)}}function hee(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ca(t,e))return;i.uniform3iv(this.addr,e),Ea(t,e)}}function fee(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ca(t,e))return;i.uniform4iv(this.addr,e),Ea(t,e)}}function dee(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function pee(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ca(t,e))return;i.uniform2uiv(this.addr,e),Ea(t,e)}}function mee(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ca(t,e))return;i.uniform3uiv(this.addr,e),Ea(t,e)}}function gee(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ca(t,e))return;i.uniform4uiv(this.addr,e),Ea(t,e)}}function vee(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2D(e||hO,r)}function _ee(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||dO,r)}function Aee(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||pO,r)}function bee(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||fO,r)}function yee(i){switch(i){case 5126:return nee;case 35664:return iee;case 35665:return ree;case 35666:return see;case 35674:return aee;case 35675:return oee;case 35676:return lee;case 5124:case 35670:return cee;case 35667:case 35671:return uee;case 35668:case 35672:return hee;case 35669:case 35673:return fee;case 5125:return dee;case 36294:return pee;case 36295:return mee;case 36296:return gee;case 35678:case 36198:case 36298:case 36306:case 35682:return vee;case 35679:case 36299:case 36307:return _ee;case 35680:case 36300:case 36308:case 36293:return Aee;case 36289:case 36303:case 36311:case 36292:return bee}}function wee(i,e){i.uniform1fv(this.addr,e)}function xee(i,e){const t=lv(e,this.size,2);i.uniform2fv(this.addr,t)}function Cee(i,e){const t=lv(e,this.size,3);i.uniform3fv(this.addr,t)}function Eee(i,e){const t=lv(e,this.size,4);i.uniform4fv(this.addr,t)}function See(i,e){const t=lv(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function Mee(i,e){const t=lv(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function Tee(i,e){const t=lv(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function Iee(i,e){i.uniform1iv(this.addr,e)}function Pee(i,e){i.uniform2iv(this.addr,e)}function kee(i,e){i.uniform3iv(this.addr,e)}function Bee(i,e){i.uniform4iv(this.addr,e)}function Ree(i,e){i.uniform1uiv(this.addr,e)}function Dee(i,e){i.uniform2uiv(this.addr,e)}function Lee(i,e){i.uniform3uiv(this.addr,e)}function Oee(i,e){i.uniform4uiv(this.addr,e)}function Nee(i,e,t){const n=this.cache,r=e.length,s=E2(t,r);Ca(n,s)||(i.uniform1iv(this.addr,s),Ea(n,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||hO,s[a])}function Fee(i,e,t){const n=this.cache,r=e.length,s=E2(t,r);Ca(n,s)||(i.uniform1iv(this.addr,s),Ea(n,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||dO,s[a])}function zee(i,e,t){const n=this.cache,r=e.length,s=E2(t,r);Ca(n,s)||(i.uniform1iv(this.addr,s),Ea(n,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||pO,s[a])}function Uee(i,e,t){const n=this.cache,r=e.length,s=E2(t,r);Ca(n,s)||(i.uniform1iv(this.addr,s),Ea(n,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||fO,s[a])}function Vee(i){switch(i){case 5126:return wee;case 35664:return xee;case 35665:return Cee;case 35666:return Eee;case 35674:return See;case 35675:return Mee;case 35676:return Tee;case 5124:case 35670:return Iee;case 35667:case 35671:return Pee;case 35668:case 35672:return kee;case 35669:case 35673:return Bee;case 5125:return Ree;case 36294:return Dee;case 36295:return Lee;case 36296:return Oee;case 35678:case 36198:case 36298:case 36306:case 35682:return Nee;case 35679:case 36299:case 36307:return Fee;case 35680:case 36300:case 36308:case 36293:return zee;case 36289:case 36303:case 36311:case 36292:return Uee}}class Hee{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=yee(t.type)}}class $ee{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=Vee(t.type)}}class Gee{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],n)}}}const Y4=/(\w+)(\])?(\[|\.)?/g;function $k(i,e){i.seq.push(e),i.map[e.id]=e}function Qee(i,e,t){const n=i.name,r=n.length;for(Y4.lastIndex=0;;){const s=Y4.exec(n),a=Y4.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===r){$k(t,c===void 0?new Hee(o,i,e):new $ee(o,i,e));break}else{let h=t.map[o];h===void 0&&(h=new Gee(o),$k(t,h)),t=h}}}class Ww{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);Qee(s,a,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=n[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&n.push(a)}return n}}function Gk(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}let qee=0;function jee(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;n.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return n.join(`
`)}function Wee(i){switch(i){case Nc:return["Linear","( value )"];case kn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),["Linear","( value )"]}}function Qk(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+jee(i.getShaderSource(e),a)}else return r}function Yee(i,e){const t=Wee(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Xee(i,e){let t;switch(e){case RL:t="Linear";break;case DL:t="Reinhard";break;case LL:t="OptimizedCineon";break;case i5:t="ACESFilmic";break;case OL:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Kee(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.normalMapTangentSpace||i.clearcoatNormalMap||i.flatShading||i.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Q_).join(`
`)}function Jee(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function Zee(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),a=s.name;let o=1;s.type===i.FLOAT_MAT2&&(o=2),s.type===i.FLOAT_MAT3&&(o=3),s.type===i.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:i.getAttribLocation(e,a),locationSize:o}}return t}function Q_(i){return i!==""}function qk(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function jk(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ete=/^[ \t]*#include +<([\w\d./]+)>/gm;function bM(i){return i.replace(ete,nte)}const tte=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function nte(i,e){let t=gi[e];if(t===void 0){const n=tte.get(e);if(n!==void 0)t=gi[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return bM(t)}const ite=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Wk(i){return i.replace(ite,rte)}function rte(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Yk(i){let e="precision "+i.precision+` float;
precision `+i.precision+" int;";return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function ste(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===QT?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===h2?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===ju&&(e="SHADOWMAP_TYPE_VSM"),e}function ate(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Cf:case Gd:e="ENVMAP_TYPE_CUBE";break;case rv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function ote(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Gd:e="ENVMAP_MODE_REFRACTION";break}return e}function lte(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case iA:e="ENVMAP_BLENDING_MULTIPLY";break;case kL:e="ENVMAP_BLENDING_MIX";break;case BL:e="ENVMAP_BLENDING_ADD";break}return e}function cte(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function ute(i,e,t,n){const r=i.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=ste(t),c=ate(t),u=ote(t),h=lte(t),f=cte(t),d=t.isWebGL2?"":Kee(t),g=Jee(s),v=r.createProgram();let A,_,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(A=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Q_).join(`
`),A.length>0&&(A+=`
`),_=[d,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Q_).join(`
`),_.length>0&&(_+=`
`)):(A=[Yk(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Q_).join(`
`),_=[d,Yk(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==bf?"#define TONE_MAPPING":"",t.toneMapping!==bf?gi.tonemapping_pars_fragment:"",t.toneMapping!==bf?Xee("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",gi.colorspace_pars_fragment,Yee("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Q_).join(`
`)),a=bM(a),a=qk(a,t),a=jk(a,t),o=bM(o),o=qk(o,t),o=jk(o,t),a=Wk(a),o=Wk(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,A=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,_=["#define varying in",t.glslVersion===gM?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===gM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const x=y+A+a,C=y+_+o,S=Gk(r,r.VERTEX_SHADER,x),I=Gk(r,r.FRAGMENT_SHADER,C);if(r.attachShader(v,S),r.attachShader(v,I),t.index0AttributeName!==void 0?r.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),i.debug.checkShaderErrors){const M=r.getProgramInfoLog(v).trim(),D=r.getShaderInfoLog(S).trim(),F=r.getShaderInfoLog(I).trim();let z=!0,U=!0;if(r.getProgramParameter(v,r.LINK_STATUS)===!1)if(z=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,v,S,I);else{const $=Qk(r,S,"vertex"),O=Qk(r,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,r.VALIDATE_STATUS)+`

Program Info Log: `+M+`
`+$+`
`+O)}else M!==""?console.warn("THREE.WebGLProgram: Program Info Log:",M):(D===""||F==="")&&(U=!1);U&&(this.diagnostics={runnable:z,programLog:M,vertexShader:{log:D,prefix:A},fragmentShader:{log:F,prefix:_}})}r.deleteShader(S),r.deleteShader(I);let P;this.getUniforms=function(){return P===void 0&&(P=new Ww(r,v)),P};let B;return this.getAttributes=function(){return B===void 0&&(B=Zee(r,v)),B},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=qee++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=S,this.fragmentShader=I,this}let hte=0;class fte{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new dte(e),t.set(e,n)),n}}class dte{constructor(e){this.id=hte++,this.code=e,this.usedTimes=0}}function pte(i,e,t,n,r,s,a){const o=new w2,l=new fte,c=[],u=r.isWebGL2,h=r.logarithmicDepthBuffer,f=r.vertexTextures;let d=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(M){return M===0?"uv":`uv${M}`}function A(M,D,F,z,U){const $=z.fog,O=U.geometry,ie=M.isMeshStandardMaterial?z.environment:null,W=(M.isMeshStandardMaterial?t:e).get(M.envMap||ie),J=W&&W.mapping===rv?W.image.height:null,Ce=g[M.type];M.precision!==null&&(d=r.getMaxPrecision(M.precision),d!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",d,"instead."));const Me=O.morphAttributes.position||O.morphAttributes.normal||O.morphAttributes.color,ge=Me!==void 0?Me.length:0;let ve=0;O.morphAttributes.position!==void 0&&(ve=1),O.morphAttributes.normal!==void 0&&(ve=2),O.morphAttributes.color!==void 0&&(ve=3);let nt,$e,X,Be;if(Ce){const oi=hu[Ce];nt=oi.vertexShader,$e=oi.fragmentShader}else nt=M.vertexShader,$e=M.fragmentShader,l.update(M),X=l.getVertexShaderID(M),Be=l.getFragmentShaderID(M);const mt=i.getRenderTarget(),Ue=U.isInstancedMesh===!0,Tt=!!M.map,yt=!!M.matcap,Ye=!!W,lt=!!M.aoMap,ue=!!M.lightMap,dt=!!M.bumpMap,le=!!M.normalMap,he=!!M.displacementMap,xe=!!M.emissiveMap,pt=!!M.metalnessMap,Ze=!!M.roughnessMap,me=M.anisotropy>0,te=M.clearcoat>0,Se=M.iridescence>0,j=M.sheen>0,q=M.transmission>0,Ve=me&&!!M.anisotropyMap,ct=te&&!!M.clearcoatMap,ne=te&&!!M.clearcoatNormalMap,Je=te&&!!M.clearcoatRoughnessMap,Lt=Se&&!!M.iridescenceMap,we=Se&&!!M.iridescenceThicknessMap,Ie=j&&!!M.sheenColorMap,de=j&&!!M.sheenRoughnessMap,Xe=!!M.specularMap,Nt=!!M.specularColorMap,Qt=!!M.specularIntensityMap,Ft=q&&!!M.transmissionMap,jt=q&&!!M.thicknessMap,St=!!M.gradientMap,Re=!!M.alphaMap,Rt=M.alphaTest>0,tt=!!M.alphaHash,Ut=!!M.extensions,$t=!!O.attributes.uv1,Le=!!O.attributes.uv2,wn=!!O.attributes.uv3;let fi=bf;return M.toneMapped&&(mt===null||mt.isXRRenderTarget===!0)&&(fi=i.toneMapping),{isWebGL2:u,shaderID:Ce,shaderType:M.type,shaderName:M.name,vertexShader:nt,fragmentShader:$e,defines:M.defines,customVertexShaderID:X,customFragmentShaderID:Be,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:d,instancing:Ue,instancingColor:Ue&&U.instanceColor!==null,supportsVertexTextures:f,outputColorSpace:mt===null?i.outputColorSpace:mt.isXRRenderTarget===!0?mt.texture.colorSpace:Nc,map:Tt,matcap:yt,envMap:Ye,envMapMode:Ye&&W.mapping,envMapCubeUVHeight:J,aoMap:lt,lightMap:ue,bumpMap:dt,normalMap:le,displacementMap:f&&he,emissiveMap:xe,normalMapObjectSpace:le&&M.normalMapType===GL,normalMapTangentSpace:le&&M.normalMapType===rp,metalnessMap:pt,roughnessMap:Ze,anisotropy:me,anisotropyMap:Ve,clearcoat:te,clearcoatMap:ct,clearcoatNormalMap:ne,clearcoatRoughnessMap:Je,iridescence:Se,iridescenceMap:Lt,iridescenceThicknessMap:we,sheen:j,sheenColorMap:Ie,sheenRoughnessMap:de,specularMap:Xe,specularColorMap:Nt,specularIntensityMap:Qt,transmission:q,transmissionMap:Ft,thicknessMap:jt,gradientMap:St,opaque:M.transparent===!1&&M.blending===Dd,alphaMap:Re,alphaTest:Rt,alphaHash:tt,combine:M.combine,mapUv:Tt&&v(M.map.channel),aoMapUv:lt&&v(M.aoMap.channel),lightMapUv:ue&&v(M.lightMap.channel),bumpMapUv:dt&&v(M.bumpMap.channel),normalMapUv:le&&v(M.normalMap.channel),displacementMapUv:he&&v(M.displacementMap.channel),emissiveMapUv:xe&&v(M.emissiveMap.channel),metalnessMapUv:pt&&v(M.metalnessMap.channel),roughnessMapUv:Ze&&v(M.roughnessMap.channel),anisotropyMapUv:Ve&&v(M.anisotropyMap.channel),clearcoatMapUv:ct&&v(M.clearcoatMap.channel),clearcoatNormalMapUv:ne&&v(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Je&&v(M.clearcoatRoughnessMap.channel),iridescenceMapUv:Lt&&v(M.iridescenceMap.channel),iridescenceThicknessMapUv:we&&v(M.iridescenceThicknessMap.channel),sheenColorMapUv:Ie&&v(M.sheenColorMap.channel),sheenRoughnessMapUv:de&&v(M.sheenRoughnessMap.channel),specularMapUv:Xe&&v(M.specularMap.channel),specularColorMapUv:Nt&&v(M.specularColorMap.channel),specularIntensityMapUv:Qt&&v(M.specularIntensityMap.channel),transmissionMapUv:Ft&&v(M.transmissionMap.channel),thicknessMapUv:jt&&v(M.thicknessMap.channel),alphaMapUv:Re&&v(M.alphaMap.channel),vertexTangents:!!O.attributes.tangent&&(le||me),vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!O.attributes.color&&O.attributes.color.itemSize===4,vertexUv1s:$t,vertexUv2s:Le,vertexUv3s:wn,pointsUvs:U.isPoints===!0&&!!O.attributes.uv&&(Tt||Re),fog:!!$,useFog:M.fog===!0,fogExp2:$&&$.isFogExp2,flatShading:M.flatShading===!0,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:U.isSkinnedMesh===!0,morphTargets:O.morphAttributes.position!==void 0,morphNormals:O.morphAttributes.normal!==void 0,morphColors:O.morphAttributes.color!==void 0,morphTargetsCount:ge,morphTextureStride:ve,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:M.dithering,shadowMapEnabled:i.shadowMap.enabled&&F.length>0,shadowMapType:i.shadowMap.type,toneMapping:fi,useLegacyLights:i._useLegacyLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===ms,flipSided:M.side===Fo,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:Ut&&M.extensions.derivatives===!0,extensionFragDepth:Ut&&M.extensions.fragDepth===!0,extensionDrawBuffers:Ut&&M.extensions.drawBuffers===!0,extensionShaderTextureLOD:Ut&&M.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||n.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}}function _(M){const D=[];if(M.shaderID?D.push(M.shaderID):(D.push(M.customVertexShaderID),D.push(M.customFragmentShaderID)),M.defines!==void 0)for(const F in M.defines)D.push(F),D.push(M.defines[F]);return M.isRawShaderMaterial===!1&&(y(D,M),x(D,M),D.push(i.outputColorSpace)),D.push(M.customProgramCacheKey),D.join()}function y(M,D){M.push(D.precision),M.push(D.outputColorSpace),M.push(D.envMapMode),M.push(D.envMapCubeUVHeight),M.push(D.mapUv),M.push(D.alphaMapUv),M.push(D.lightMapUv),M.push(D.aoMapUv),M.push(D.bumpMapUv),M.push(D.normalMapUv),M.push(D.displacementMapUv),M.push(D.emissiveMapUv),M.push(D.metalnessMapUv),M.push(D.roughnessMapUv),M.push(D.anisotropyMapUv),M.push(D.clearcoatMapUv),M.push(D.clearcoatNormalMapUv),M.push(D.clearcoatRoughnessMapUv),M.push(D.iridescenceMapUv),M.push(D.iridescenceThicknessMapUv),M.push(D.sheenColorMapUv),M.push(D.sheenRoughnessMapUv),M.push(D.specularMapUv),M.push(D.specularColorMapUv),M.push(D.specularIntensityMapUv),M.push(D.transmissionMapUv),M.push(D.thicknessMapUv),M.push(D.combine),M.push(D.fogExp2),M.push(D.sizeAttenuation),M.push(D.morphTargetsCount),M.push(D.morphAttributeCount),M.push(D.numDirLights),M.push(D.numPointLights),M.push(D.numSpotLights),M.push(D.numSpotLightMaps),M.push(D.numHemiLights),M.push(D.numRectAreaLights),M.push(D.numDirLightShadows),M.push(D.numPointLightShadows),M.push(D.numSpotLightShadows),M.push(D.numSpotLightShadowsWithMaps),M.push(D.shadowMapType),M.push(D.toneMapping),M.push(D.numClippingPlanes),M.push(D.numClipIntersection),M.push(D.depthPacking)}function x(M,D){o.disableAll(),D.isWebGL2&&o.enable(0),D.supportsVertexTextures&&o.enable(1),D.instancing&&o.enable(2),D.instancingColor&&o.enable(3),D.matcap&&o.enable(4),D.envMap&&o.enable(5),D.normalMapObjectSpace&&o.enable(6),D.normalMapTangentSpace&&o.enable(7),D.clearcoat&&o.enable(8),D.iridescence&&o.enable(9),D.alphaTest&&o.enable(10),D.vertexColors&&o.enable(11),D.vertexAlphas&&o.enable(12),D.vertexUv1s&&o.enable(13),D.vertexUv2s&&o.enable(14),D.vertexUv3s&&o.enable(15),D.vertexTangents&&o.enable(16),D.anisotropy&&o.enable(17),M.push(o.mask),o.disableAll(),D.fog&&o.enable(0),D.useFog&&o.enable(1),D.flatShading&&o.enable(2),D.logarithmicDepthBuffer&&o.enable(3),D.skinning&&o.enable(4),D.morphTargets&&o.enable(5),D.morphNormals&&o.enable(6),D.morphColors&&o.enable(7),D.premultipliedAlpha&&o.enable(8),D.shadowMapEnabled&&o.enable(9),D.useLegacyLights&&o.enable(10),D.doubleSided&&o.enable(11),D.flipSided&&o.enable(12),D.useDepthPacking&&o.enable(13),D.dithering&&o.enable(14),D.transmission&&o.enable(15),D.sheen&&o.enable(16),D.opaque&&o.enable(17),D.pointsUvs&&o.enable(18),M.push(o.mask)}function C(M){const D=g[M.type];let F;if(D){const z=hu[D];F=x2.clone(z.uniforms)}else F=M.uniforms;return F}function S(M,D){let F;for(let z=0,U=c.length;z<U;z++){const $=c[z];if($.cacheKey===D){F=$,++F.usedTimes;break}}return F===void 0&&(F=new ute(i,D,M,s),c.push(F)),F}function I(M){if(--M.usedTimes===0){const D=c.indexOf(M);c[D]=c[c.length-1],c.pop(),M.destroy()}}function P(M){l.remove(M)}function B(){l.dispose()}return{getParameters:A,getProgramCacheKey:_,getUniforms:C,acquireProgram:S,releaseProgram:I,releaseShaderCache:P,programs:c,dispose:B}}function mte(){let i=new WeakMap;function e(s){let a=i.get(s);return a===void 0&&(a={},i.set(s,a)),a}function t(s){i.delete(s)}function n(s,a,o){i.get(s)[a]=o}function r(){i=new WeakMap}return{get:e,remove:t,update:n,dispose:r}}function gte(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function Xk(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function Kk(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function a(h,f,d,g,v,A){let _=i[e];return _===void 0?(_={id:h.id,object:h,geometry:f,material:d,groupOrder:g,renderOrder:h.renderOrder,z:v,group:A},i[e]=_):(_.id=h.id,_.object=h,_.geometry=f,_.material=d,_.groupOrder=g,_.renderOrder=h.renderOrder,_.z=v,_.group=A),e++,_}function o(h,f,d,g,v,A){const _=a(h,f,d,g,v,A);d.transmission>0?n.push(_):d.transparent===!0?r.push(_):t.push(_)}function l(h,f,d,g,v,A){const _=a(h,f,d,g,v,A);d.transmission>0?n.unshift(_):d.transparent===!0?r.unshift(_):t.unshift(_)}function c(h,f){t.length>1&&t.sort(h||gte),n.length>1&&n.sort(f||Xk),r.length>1&&r.sort(f||Xk)}function u(){for(let h=e,f=i.length;h<f;h++){const d=i[h];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:o,unshift:l,finish:u,sort:c}}function vte(){let i=new WeakMap;function e(n,r){const s=i.get(n);let a;return s===void 0?(a=new Kk,i.set(n,[a])):r>=s.length?(a=new Kk,s.push(a)):a=s[r],a}function t(){i=new WeakMap}return{get:e,dispose:t}}function _te(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new fe,color:new qt};break;case"SpotLight":t={position:new fe,direction:new fe,color:new qt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new fe,color:new qt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new fe,skyColor:new qt,groundColor:new qt};break;case"RectAreaLight":t={color:new qt,position:new fe,halfWidth:new fe,halfHeight:new fe};break}return i[e.id]=t,t}}}function Ate(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Et};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Et};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Et,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let bte=0;function yte(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function wte(i,e){const t=new _te,n=Ate(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new fe);const s=new fe,a=new Wn,o=new Wn;function l(u,h){let f=0,d=0,g=0;for(let F=0;F<9;F++)r.probe[F].set(0,0,0);let v=0,A=0,_=0,y=0,x=0,C=0,S=0,I=0,P=0,B=0;u.sort(yte);const M=h===!0?Math.PI:1;for(let F=0,z=u.length;F<z;F++){const U=u[F],$=U.color,O=U.intensity,ie=U.distance,W=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)f+=$.r*O*M,d+=$.g*O*M,g+=$.b*O*M;else if(U.isLightProbe)for(let J=0;J<9;J++)r.probe[J].addScaledVector(U.sh.coefficients[J],O);else if(U.isDirectionalLight){const J=t.get(U);if(J.color.copy(U.color).multiplyScalar(U.intensity*M),U.castShadow){const Ce=U.shadow,Me=n.get(U);Me.shadowBias=Ce.bias,Me.shadowNormalBias=Ce.normalBias,Me.shadowRadius=Ce.radius,Me.shadowMapSize=Ce.mapSize,r.directionalShadow[v]=Me,r.directionalShadowMap[v]=W,r.directionalShadowMatrix[v]=U.shadow.matrix,C++}r.directional[v]=J,v++}else if(U.isSpotLight){const J=t.get(U);J.position.setFromMatrixPosition(U.matrixWorld),J.color.copy($).multiplyScalar(O*M),J.distance=ie,J.coneCos=Math.cos(U.angle),J.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),J.decay=U.decay,r.spot[_]=J;const Ce=U.shadow;if(U.map&&(r.spotLightMap[P]=U.map,P++,Ce.updateMatrices(U),U.castShadow&&B++),r.spotLightMatrix[_]=Ce.matrix,U.castShadow){const Me=n.get(U);Me.shadowBias=Ce.bias,Me.shadowNormalBias=Ce.normalBias,Me.shadowRadius=Ce.radius,Me.shadowMapSize=Ce.mapSize,r.spotShadow[_]=Me,r.spotShadowMap[_]=W,I++}_++}else if(U.isRectAreaLight){const J=t.get(U);J.color.copy($).multiplyScalar(O),J.halfWidth.set(U.width*.5,0,0),J.halfHeight.set(0,U.height*.5,0),r.rectArea[y]=J,y++}else if(U.isPointLight){const J=t.get(U);if(J.color.copy(U.color).multiplyScalar(U.intensity*M),J.distance=U.distance,J.decay=U.decay,U.castShadow){const Ce=U.shadow,Me=n.get(U);Me.shadowBias=Ce.bias,Me.shadowNormalBias=Ce.normalBias,Me.shadowRadius=Ce.radius,Me.shadowMapSize=Ce.mapSize,Me.shadowCameraNear=Ce.camera.near,Me.shadowCameraFar=Ce.camera.far,r.pointShadow[A]=Me,r.pointShadowMap[A]=W,r.pointShadowMatrix[A]=U.shadow.matrix,S++}r.point[A]=J,A++}else if(U.isHemisphereLight){const J=t.get(U);J.skyColor.copy(U.color).multiplyScalar(O*M),J.groundColor.copy(U.groundColor).multiplyScalar(O*M),r.hemi[x]=J,x++}}y>0&&(e.isWebGL2||i.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Jt.LTC_FLOAT_1,r.rectAreaLTC2=Jt.LTC_FLOAT_2):i.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Jt.LTC_HALF_1,r.rectAreaLTC2=Jt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=f,r.ambient[1]=d,r.ambient[2]=g;const D=r.hash;(D.directionalLength!==v||D.pointLength!==A||D.spotLength!==_||D.rectAreaLength!==y||D.hemiLength!==x||D.numDirectionalShadows!==C||D.numPointShadows!==S||D.numSpotShadows!==I||D.numSpotMaps!==P)&&(r.directional.length=v,r.spot.length=_,r.rectArea.length=y,r.point.length=A,r.hemi.length=x,r.directionalShadow.length=C,r.directionalShadowMap.length=C,r.pointShadow.length=S,r.pointShadowMap.length=S,r.spotShadow.length=I,r.spotShadowMap.length=I,r.directionalShadowMatrix.length=C,r.pointShadowMatrix.length=S,r.spotLightMatrix.length=I+P-B,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=B,D.directionalLength=v,D.pointLength=A,D.spotLength=_,D.rectAreaLength=y,D.hemiLength=x,D.numDirectionalShadows=C,D.numPointShadows=S,D.numSpotShadows=I,D.numSpotMaps=P,r.version=bte++)}function c(u,h){let f=0,d=0,g=0,v=0,A=0;const _=h.matrixWorldInverse;for(let y=0,x=u.length;y<x;y++){const C=u[y];if(C.isDirectionalLight){const S=r.directional[f];S.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(_),f++}else if(C.isSpotLight){const S=r.spot[g];S.position.setFromMatrixPosition(C.matrixWorld),S.position.applyMatrix4(_),S.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(_),g++}else if(C.isRectAreaLight){const S=r.rectArea[v];S.position.setFromMatrixPosition(C.matrixWorld),S.position.applyMatrix4(_),o.identity(),a.copy(C.matrixWorld),a.premultiply(_),o.extractRotation(a),S.halfWidth.set(C.width*.5,0,0),S.halfHeight.set(0,C.height*.5,0),S.halfWidth.applyMatrix4(o),S.halfHeight.applyMatrix4(o),v++}else if(C.isPointLight){const S=r.point[d];S.position.setFromMatrixPosition(C.matrixWorld),S.position.applyMatrix4(_),d++}else if(C.isHemisphereLight){const S=r.hemi[A];S.direction.setFromMatrixPosition(C.matrixWorld),S.direction.transformDirection(_),A++}}}return{setup:l,setupView:c,state:r}}function Jk(i,e){const t=new wte(i,e),n=[],r=[];function s(){n.length=0,r.length=0}function a(h){n.push(h)}function o(h){r.push(h)}function l(h){t.setup(n,h)}function c(h){t.setupView(n,h)}return{init:s,state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:a,pushShadow:o}}function xte(i,e){let t=new WeakMap;function n(s,a=0){const o=t.get(s);let l;return o===void 0?(l=new Jk(i,e),t.set(s,[l])):a>=o.length?(l=new Jk(i,e),o.push(l)):l=o[a],l}function r(){t=new WeakMap}return{get:n,dispose:r}}class w5 extends xa{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=HL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class x5 extends xa{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Cte=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Ete=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Ste(i,e,t){let n=new C2;const r=new Et,s=new Et,a=new Hi,o=new w5({depthPacking:$L}),l=new x5,c={},u=t.maxTextureSize,h={[mh]:Fo,[Fo]:mh,[ms]:ms},f=new _l({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Et},radius:{value:4}},vertexShader:Cte,fragmentShader:Ete}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const g=new ai;g.setAttribute("position",new Un(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new cr(g,f),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=QT;let _=this.type;this.render=function(S,I,P){if(A.enabled===!1||A.autoUpdate===!1&&A.needsUpdate===!1||S.length===0)return;const B=i.getRenderTarget(),M=i.getActiveCubeFace(),D=i.getActiveMipmapLevel(),F=i.state;F.setBlending(oh),F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);const z=_!==ju&&this.type===ju,U=_===ju&&this.type!==ju;for(let $=0,O=S.length;$<O;$++){const ie=S[$],W=ie.shadow;if(W===void 0){console.warn("THREE.WebGLShadowMap:",ie,"has no shadow.");continue}if(W.autoUpdate===!1&&W.needsUpdate===!1)continue;r.copy(W.mapSize);const J=W.getFrameExtents();if(r.multiply(J),s.copy(W.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/J.x),r.x=s.x*J.x,W.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/J.y),r.y=s.y*J.y,W.mapSize.y=s.y)),W.map===null||z===!0||U===!0){const Me=this.type!==ju?{minFilter:ji,magFilter:ji}:{};W.map!==null&&W.map.dispose(),W.map=new po(r.x,r.y,Me),W.map.texture.name=ie.name+".shadowMap",W.camera.updateProjectionMatrix()}i.setRenderTarget(W.map),i.clear();const Ce=W.getViewportCount();for(let Me=0;Me<Ce;Me++){const ge=W.getViewport(Me);a.set(s.x*ge.x,s.y*ge.y,s.x*ge.z,s.y*ge.w),F.viewport(a),W.updateMatrices(ie,Me),n=W.getFrustum(),C(I,P,W.camera,ie,this.type)}W.isPointLightShadow!==!0&&this.type===ju&&y(W,P),W.needsUpdate=!1}_=this.type,A.needsUpdate=!1,i.setRenderTarget(B,M,D)};function y(S,I){const P=e.update(v);f.defines.VSM_SAMPLES!==S.blurSamples&&(f.defines.VSM_SAMPLES=S.blurSamples,d.defines.VSM_SAMPLES=S.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new po(r.x,r.y)),f.uniforms.shadow_pass.value=S.map.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,i.setRenderTarget(S.mapPass),i.clear(),i.renderBufferDirect(I,null,P,f,v,null),d.uniforms.shadow_pass.value=S.mapPass.texture,d.uniforms.resolution.value=S.mapSize,d.uniforms.radius.value=S.radius,i.setRenderTarget(S.map),i.clear(),i.renderBufferDirect(I,null,P,d,v,null)}function x(S,I,P,B){let M=null;const D=P.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(D!==void 0)M=D;else if(M=P.isPointLight===!0?l:o,i.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0){const F=M.uuid,z=I.uuid;let U=c[F];U===void 0&&(U={},c[F]=U);let $=U[z];$===void 0&&($=M.clone(),U[z]=$),M=$}if(M.visible=I.visible,M.wireframe=I.wireframe,B===ju?M.side=I.shadowSide!==null?I.shadowSide:I.side:M.side=I.shadowSide!==null?I.shadowSide:h[I.side],M.alphaMap=I.alphaMap,M.alphaTest=I.alphaTest,M.map=I.map,M.clipShadows=I.clipShadows,M.clippingPlanes=I.clippingPlanes,M.clipIntersection=I.clipIntersection,M.displacementMap=I.displacementMap,M.displacementScale=I.displacementScale,M.displacementBias=I.displacementBias,M.wireframeLinewidth=I.wireframeLinewidth,M.linewidth=I.linewidth,P.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const F=i.properties.get(M);F.light=P}return M}function C(S,I,P,B,M){if(S.visible===!1)return;if(S.layers.test(I.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&M===ju)&&(!S.frustumCulled||n.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,S.matrixWorld);const z=e.update(S),U=S.material;if(Array.isArray(U)){const $=z.groups;for(let O=0,ie=$.length;O<ie;O++){const W=$[O],J=U[W.materialIndex];if(J&&J.visible){const Ce=x(S,J,B,M);i.renderBufferDirect(P,null,z,Ce,S,W)}}}else if(U.visible){const $=x(S,U,B,M);i.renderBufferDirect(P,null,z,$,S,null)}}const F=S.children;for(let z=0,U=F.length;z<U;z++)C(F[z],I,P,B,M)}}function Mte(i,e,t){const n=t.isWebGL2;function r(){let Re=!1;const Rt=new Hi;let tt=null;const Ut=new Hi(0,0,0,0);return{setMask:function($t){tt!==$t&&!Re&&(i.colorMask($t,$t,$t,$t),tt=$t)},setLocked:function($t){Re=$t},setClear:function($t,Le,wn,fi,Vr){Vr===!0&&($t*=fi,Le*=fi,wn*=fi),Rt.set($t,Le,wn,fi),Ut.equals(Rt)===!1&&(i.clearColor($t,Le,wn,fi),Ut.copy(Rt))},reset:function(){Re=!1,tt=null,Ut.set(-1,0,0,0)}}}function s(){let Re=!1,Rt=null,tt=null,Ut=null;return{setTest:function($t){$t?mt(i.DEPTH_TEST):Ue(i.DEPTH_TEST)},setMask:function($t){Rt!==$t&&!Re&&(i.depthMask($t),Rt=$t)},setFunc:function($t){if(tt!==$t){switch($t){case CL:i.depthFunc(i.NEVER);break;case EL:i.depthFunc(i.ALWAYS);break;case SL:i.depthFunc(i.LESS);break;case fx:i.depthFunc(i.LEQUAL);break;case ML:i.depthFunc(i.EQUAL);break;case TL:i.depthFunc(i.GEQUAL);break;case IL:i.depthFunc(i.GREATER);break;case PL:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}tt=$t}},setLocked:function($t){Re=$t},setClear:function($t){Ut!==$t&&(i.clearDepth($t),Ut=$t)},reset:function(){Re=!1,Rt=null,tt=null,Ut=null}}}function a(){let Re=!1,Rt=null,tt=null,Ut=null,$t=null,Le=null,wn=null,fi=null,Vr=null;return{setTest:function(oi){Re||(oi?mt(i.STENCIL_TEST):Ue(i.STENCIL_TEST))},setMask:function(oi){Rt!==oi&&!Re&&(i.stencilMask(oi),Rt=oi)},setFunc:function(oi,As,er){(tt!==oi||Ut!==As||$t!==er)&&(i.stencilFunc(oi,As,er),tt=oi,Ut=As,$t=er)},setOp:function(oi,As,er){(Le!==oi||wn!==As||fi!==er)&&(i.stencilOp(oi,As,er),Le=oi,wn=As,fi=er)},setLocked:function(oi){Re=oi},setClear:function(oi){Vr!==oi&&(i.clearStencil(oi),Vr=oi)},reset:function(){Re=!1,Rt=null,tt=null,Ut=null,$t=null,Le=null,wn=null,fi=null,Vr=null}}}const o=new r,l=new s,c=new a,u=new WeakMap,h=new WeakMap;let f={},d={},g=new WeakMap,v=[],A=null,_=!1,y=null,x=null,C=null,S=null,I=null,P=null,B=null,M=!1,D=null,F=null,z=null,U=null,$=null;const O=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ie=!1,W=0;const J=i.getParameter(i.VERSION);J.indexOf("WebGL")!==-1?(W=parseFloat(/^WebGL (\d)/.exec(J)[1]),ie=W>=1):J.indexOf("OpenGL ES")!==-1&&(W=parseFloat(/^OpenGL ES (\d)/.exec(J)[1]),ie=W>=2);let Ce=null,Me={};const ge=i.getParameter(i.SCISSOR_BOX),ve=i.getParameter(i.VIEWPORT),nt=new Hi().fromArray(ge),$e=new Hi().fromArray(ve);function X(Re,Rt,tt,Ut){const $t=new Uint8Array(4),Le=i.createTexture();i.bindTexture(Re,Le),i.texParameteri(Re,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(Re,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let wn=0;wn<tt;wn++)n&&(Re===i.TEXTURE_3D||Re===i.TEXTURE_2D_ARRAY)?i.texImage3D(Rt,0,i.RGBA,1,1,Ut,0,i.RGBA,i.UNSIGNED_BYTE,$t):i.texImage2D(Rt+wn,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,$t);return Le}const Be={};Be[i.TEXTURE_2D]=X(i.TEXTURE_2D,i.TEXTURE_2D,1),Be[i.TEXTURE_CUBE_MAP]=X(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(Be[i.TEXTURE_2D_ARRAY]=X(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Be[i.TEXTURE_3D]=X(i.TEXTURE_3D,i.TEXTURE_3D,1,1)),o.setClear(0,0,0,1),l.setClear(1),c.setClear(0),mt(i.DEPTH_TEST),l.setFunc(fx),he(!1),xe(q3),mt(i.CULL_FACE),dt(oh);function mt(Re){f[Re]!==!0&&(i.enable(Re),f[Re]=!0)}function Ue(Re){f[Re]!==!1&&(i.disable(Re),f[Re]=!1)}function Tt(Re,Rt){return d[Re]!==Rt?(i.bindFramebuffer(Re,Rt),d[Re]=Rt,n&&(Re===i.DRAW_FRAMEBUFFER&&(d[i.FRAMEBUFFER]=Rt),Re===i.FRAMEBUFFER&&(d[i.DRAW_FRAMEBUFFER]=Rt)),!0):!1}function yt(Re,Rt){let tt=v,Ut=!1;if(Re)if(tt=g.get(Rt),tt===void 0&&(tt=[],g.set(Rt,tt)),Re.isWebGLMultipleRenderTargets){const $t=Re.texture;if(tt.length!==$t.length||tt[0]!==i.COLOR_ATTACHMENT0){for(let Le=0,wn=$t.length;Le<wn;Le++)tt[Le]=i.COLOR_ATTACHMENT0+Le;tt.length=$t.length,Ut=!0}}else tt[0]!==i.COLOR_ATTACHMENT0&&(tt[0]=i.COLOR_ATTACHMENT0,Ut=!0);else tt[0]!==i.BACK&&(tt[0]=i.BACK,Ut=!0);Ut&&(t.isWebGL2?i.drawBuffers(tt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(tt))}function Ye(Re){return A!==Re?(i.useProgram(Re),A=Re,!0):!1}const lt={[Cd]:i.FUNC_ADD,[qT]:i.FUNC_SUBTRACT,[jT]:i.FUNC_REVERSE_SUBTRACT};if(n)lt[X3]=i.MIN,lt[K3]=i.MAX;else{const Re=e.get("EXT_blend_minmax");Re!==null&&(lt[X3]=Re.MIN_EXT,lt[K3]=Re.MAX_EXT)}const ue={[WT]:i.ZERO,[YT]:i.ONE,[XT]:i.SRC_COLOR,[f2]:i.SRC_ALPHA,[n5]:i.SRC_ALPHA_SATURATE,[e5]:i.DST_COLOR,[JT]:i.DST_ALPHA,[KT]:i.ONE_MINUS_SRC_COLOR,[d2]:i.ONE_MINUS_SRC_ALPHA,[t5]:i.ONE_MINUS_DST_COLOR,[ZT]:i.ONE_MINUS_DST_ALPHA};function dt(Re,Rt,tt,Ut,$t,Le,wn,fi){if(Re===oh){_===!0&&(Ue(i.BLEND),_=!1);return}if(_===!1&&(mt(i.BLEND),_=!0),Re!==xL){if(Re!==y||fi!==M){if((x!==Cd||I!==Cd)&&(i.blendEquation(i.FUNC_ADD),x=Cd,I=Cd),fi)switch(Re){case Dd:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case j3:i.blendFunc(i.ONE,i.ONE);break;case W3:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Y3:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Re);break}else switch(Re){case Dd:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case j3:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case W3:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Y3:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Re);break}C=null,S=null,P=null,B=null,y=Re,M=fi}return}$t=$t||Rt,Le=Le||tt,wn=wn||Ut,(Rt!==x||$t!==I)&&(i.blendEquationSeparate(lt[Rt],lt[$t]),x=Rt,I=$t),(tt!==C||Ut!==S||Le!==P||wn!==B)&&(i.blendFuncSeparate(ue[tt],ue[Ut],ue[Le],ue[wn]),C=tt,S=Ut,P=Le,B=wn),y=Re,M=!1}function le(Re,Rt){Re.side===ms?Ue(i.CULL_FACE):mt(i.CULL_FACE);let tt=Re.side===Fo;Rt&&(tt=!tt),he(tt),Re.blending===Dd&&Re.transparent===!1?dt(oh):dt(Re.blending,Re.blendEquation,Re.blendSrc,Re.blendDst,Re.blendEquationAlpha,Re.blendSrcAlpha,Re.blendDstAlpha,Re.premultipliedAlpha),l.setFunc(Re.depthFunc),l.setTest(Re.depthTest),l.setMask(Re.depthWrite),o.setMask(Re.colorWrite);const Ut=Re.stencilWrite;c.setTest(Ut),Ut&&(c.setMask(Re.stencilWriteMask),c.setFunc(Re.stencilFunc,Re.stencilRef,Re.stencilFuncMask),c.setOp(Re.stencilFail,Re.stencilZFail,Re.stencilZPass)),Ze(Re.polygonOffset,Re.polygonOffsetFactor,Re.polygonOffsetUnits),Re.alphaToCoverage===!0?mt(i.SAMPLE_ALPHA_TO_COVERAGE):Ue(i.SAMPLE_ALPHA_TO_COVERAGE)}function he(Re){D!==Re&&(Re?i.frontFace(i.CW):i.frontFace(i.CCW),D=Re)}function xe(Re){Re!==yL?(mt(i.CULL_FACE),Re!==F&&(Re===q3?i.cullFace(i.BACK):Re===wL?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Ue(i.CULL_FACE),F=Re}function pt(Re){Re!==z&&(ie&&i.lineWidth(Re),z=Re)}function Ze(Re,Rt,tt){Re?(mt(i.POLYGON_OFFSET_FILL),(U!==Rt||$!==tt)&&(i.polygonOffset(Rt,tt),U=Rt,$=tt)):Ue(i.POLYGON_OFFSET_FILL)}function me(Re){Re?mt(i.SCISSOR_TEST):Ue(i.SCISSOR_TEST)}function te(Re){Re===void 0&&(Re=i.TEXTURE0+O-1),Ce!==Re&&(i.activeTexture(Re),Ce=Re)}function Se(Re,Rt,tt){tt===void 0&&(Ce===null?tt=i.TEXTURE0+O-1:tt=Ce);let Ut=Me[tt];Ut===void 0&&(Ut={type:void 0,texture:void 0},Me[tt]=Ut),(Ut.type!==Re||Ut.texture!==Rt)&&(Ce!==tt&&(i.activeTexture(tt),Ce=tt),i.bindTexture(Re,Rt||Be[Re]),Ut.type=Re,Ut.texture=Rt)}function j(){const Re=Me[Ce];Re!==void 0&&Re.type!==void 0&&(i.bindTexture(Re.type,null),Re.type=void 0,Re.texture=void 0)}function q(){try{i.compressedTexImage2D.apply(i,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Ve(){try{i.compressedTexImage3D.apply(i,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function ct(){try{i.texSubImage2D.apply(i,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function ne(){try{i.texSubImage3D.apply(i,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Je(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Lt(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function we(){try{i.texStorage2D.apply(i,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Ie(){try{i.texStorage3D.apply(i,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function de(){try{i.texImage2D.apply(i,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Xe(){try{i.texImage3D.apply(i,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Nt(Re){nt.equals(Re)===!1&&(i.scissor(Re.x,Re.y,Re.z,Re.w),nt.copy(Re))}function Qt(Re){$e.equals(Re)===!1&&(i.viewport(Re.x,Re.y,Re.z,Re.w),$e.copy(Re))}function Ft(Re,Rt){let tt=h.get(Rt);tt===void 0&&(tt=new WeakMap,h.set(Rt,tt));let Ut=tt.get(Re);Ut===void 0&&(Ut=i.getUniformBlockIndex(Rt,Re.name),tt.set(Re,Ut))}function jt(Re,Rt){const Ut=h.get(Rt).get(Re);u.get(Rt)!==Ut&&(i.uniformBlockBinding(Rt,Ut,Re.__bindingPointIndex),u.set(Rt,Ut))}function St(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),n===!0&&(i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),f={},Ce=null,Me={},d={},g=new WeakMap,v=[],A=null,_=!1,y=null,x=null,C=null,S=null,I=null,P=null,B=null,M=!1,D=null,F=null,z=null,U=null,$=null,nt.set(0,0,i.canvas.width,i.canvas.height),$e.set(0,0,i.canvas.width,i.canvas.height),o.reset(),l.reset(),c.reset()}return{buffers:{color:o,depth:l,stencil:c},enable:mt,disable:Ue,bindFramebuffer:Tt,drawBuffers:yt,useProgram:Ye,setBlending:dt,setMaterial:le,setFlipSided:he,setCullFace:xe,setLineWidth:pt,setPolygonOffset:Ze,setScissorTest:me,activeTexture:te,bindTexture:Se,unbindTexture:j,compressedTexImage2D:q,compressedTexImage3D:Ve,texImage2D:de,texImage3D:Xe,updateUBOMapping:Ft,uniformBlockBinding:jt,texStorage2D:we,texStorage3D:Ie,texSubImage2D:ct,texSubImage3D:ne,compressedTexSubImage2D:Je,compressedTexSubImage3D:Lt,scissor:Nt,viewport:Qt,reset:St}}function Tte(i,e,t,n,r,s,a){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let v;const A=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(j,q){return _?new OffscreenCanvas(j,q):x1("canvas")}function x(j,q,Ve,ct){let ne=1;if((j.width>ct||j.height>ct)&&(ne=ct/Math.max(j.width,j.height)),ne<1||q===!0)if(typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&j instanceof ImageBitmap){const Je=q?bx:Math.floor,Lt=Je(ne*j.width),we=Je(ne*j.height);v===void 0&&(v=y(Lt,we));const Ie=Ve?y(Lt,we):v;return Ie.width=Lt,Ie.height=we,Ie.getContext("2d").drawImage(j,0,0,Lt,we),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+j.width+"x"+j.height+") to ("+Lt+"x"+we+")."),Ie}else return"data"in j&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+j.width+"x"+j.height+")."),j;return j}function C(j){return vM(j.width)&&vM(j.height)}function S(j){return o?!1:j.wrapS!==la||j.wrapT!==la||j.minFilter!==ji&&j.minFilter!==Dr}function I(j,q){return j.generateMipmaps&&q&&j.minFilter!==ji&&j.minFilter!==Dr}function P(j){i.generateMipmap(j)}function B(j,q,Ve,ct,ne=!1){if(o===!1)return q;if(j!==null){if(i[j]!==void 0)return i[j];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+j+"'")}let Je=q;return q===i.RED&&(Ve===i.FLOAT&&(Je=i.R32F),Ve===i.HALF_FLOAT&&(Je=i.R16F),Ve===i.UNSIGNED_BYTE&&(Je=i.R8)),q===i.RG&&(Ve===i.FLOAT&&(Je=i.RG32F),Ve===i.HALF_FLOAT&&(Je=i.RG16F),Ve===i.UNSIGNED_BYTE&&(Je=i.RG8)),q===i.RGBA&&(Ve===i.FLOAT&&(Je=i.RGBA32F),Ve===i.HALF_FLOAT&&(Je=i.RGBA16F),Ve===i.UNSIGNED_BYTE&&(Je=ct===kn&&ne===!1?i.SRGB8_ALPHA8:i.RGBA8),Ve===i.UNSIGNED_SHORT_4_4_4_4&&(Je=i.RGBA4),Ve===i.UNSIGNED_SHORT_5_5_5_1&&(Je=i.RGB5_A1)),(Je===i.R16F||Je===i.R32F||Je===i.RG16F||Je===i.RG32F||Je===i.RGBA16F||Je===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Je}function M(j,q,Ve){return I(j,Ve)===!0||j.isFramebufferTexture&&j.minFilter!==ji&&j.minFilter!==Dr?Math.log2(Math.max(q.width,q.height))+1:j.mipmaps!==void 0&&j.mipmaps.length>0?j.mipmaps.length:j.isCompressedTexture&&Array.isArray(j.image)?q.mipmaps.length:1}function D(j){return j===ji||j===_1||j===xg?i.NEAREST:i.LINEAR}function F(j){const q=j.target;q.removeEventListener("dispose",F),U(q),q.isVideoTexture&&g.delete(q)}function z(j){const q=j.target;q.removeEventListener("dispose",z),O(q)}function U(j){const q=n.get(j);if(q.__webglInit===void 0)return;const Ve=j.source,ct=A.get(Ve);if(ct){const ne=ct[q.__cacheKey];ne.usedTimes--,ne.usedTimes===0&&$(j),Object.keys(ct).length===0&&A.delete(Ve)}n.remove(j)}function $(j){const q=n.get(j);i.deleteTexture(q.__webglTexture);const Ve=j.source,ct=A.get(Ve);delete ct[q.__cacheKey],a.memory.textures--}function O(j){const q=j.texture,Ve=n.get(j),ct=n.get(q);if(ct.__webglTexture!==void 0&&(i.deleteTexture(ct.__webglTexture),a.memory.textures--),j.depthTexture&&j.depthTexture.dispose(),j.isWebGLCubeRenderTarget)for(let ne=0;ne<6;ne++)i.deleteFramebuffer(Ve.__webglFramebuffer[ne]),Ve.__webglDepthbuffer&&i.deleteRenderbuffer(Ve.__webglDepthbuffer[ne]);else{if(i.deleteFramebuffer(Ve.__webglFramebuffer),Ve.__webglDepthbuffer&&i.deleteRenderbuffer(Ve.__webglDepthbuffer),Ve.__webglMultisampledFramebuffer&&i.deleteFramebuffer(Ve.__webglMultisampledFramebuffer),Ve.__webglColorRenderbuffer)for(let ne=0;ne<Ve.__webglColorRenderbuffer.length;ne++)Ve.__webglColorRenderbuffer[ne]&&i.deleteRenderbuffer(Ve.__webglColorRenderbuffer[ne]);Ve.__webglDepthRenderbuffer&&i.deleteRenderbuffer(Ve.__webglDepthRenderbuffer)}if(j.isWebGLMultipleRenderTargets)for(let ne=0,Je=q.length;ne<Je;ne++){const Lt=n.get(q[ne]);Lt.__webglTexture&&(i.deleteTexture(Lt.__webglTexture),a.memory.textures--),n.remove(q[ne])}n.remove(q),n.remove(j)}let ie=0;function W(){ie=0}function J(){const j=ie;return j>=l&&console.warn("THREE.WebGLTextures: Trying to use "+j+" texture units while this GPU supports only "+l),ie+=1,j}function Ce(j){const q=[];return q.push(j.wrapS),q.push(j.wrapT),q.push(j.wrapR||0),q.push(j.magFilter),q.push(j.minFilter),q.push(j.anisotropy),q.push(j.internalFormat),q.push(j.format),q.push(j.type),q.push(j.generateMipmaps),q.push(j.premultiplyAlpha),q.push(j.flipY),q.push(j.unpackAlignment),q.push(j.colorSpace),q.join()}function Me(j,q){const Ve=n.get(j);if(j.isVideoTexture&&te(j),j.isRenderTargetTexture===!1&&j.version>0&&Ve.__version!==j.version){const ct=j.image;if(ct===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ct.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Tt(Ve,j,q);return}}t.bindTexture(i.TEXTURE_2D,Ve.__webglTexture,i.TEXTURE0+q)}function ge(j,q){const Ve=n.get(j);if(j.version>0&&Ve.__version!==j.version){Tt(Ve,j,q);return}t.bindTexture(i.TEXTURE_2D_ARRAY,Ve.__webglTexture,i.TEXTURE0+q)}function ve(j,q){const Ve=n.get(j);if(j.version>0&&Ve.__version!==j.version){Tt(Ve,j,q);return}t.bindTexture(i.TEXTURE_3D,Ve.__webglTexture,i.TEXTURE0+q)}function nt(j,q){const Ve=n.get(j);if(j.version>0&&Ve.__version!==j.version){yt(Ve,j,q);return}t.bindTexture(i.TEXTURE_CUBE_MAP,Ve.__webglTexture,i.TEXTURE0+q)}const $e={[Ef]:i.REPEAT,[la]:i.CLAMP_TO_EDGE,[T0]:i.MIRRORED_REPEAT},X={[ji]:i.NEAREST,[_1]:i.NEAREST_MIPMAP_NEAREST,[xg]:i.NEAREST_MIPMAP_LINEAR,[Dr]:i.LINEAR,[p2]:i.LINEAR_MIPMAP_NEAREST,[vu]:i.LINEAR_MIPMAP_LINEAR},Be={[qL]:i.NEVER,[ZL]:i.ALWAYS,[jL]:i.LESS,[YL]:i.LEQUAL,[WL]:i.EQUAL,[JL]:i.GEQUAL,[XL]:i.GREATER,[KL]:i.NOTEQUAL};function mt(j,q,Ve){if(Ve?(i.texParameteri(j,i.TEXTURE_WRAP_S,$e[q.wrapS]),i.texParameteri(j,i.TEXTURE_WRAP_T,$e[q.wrapT]),(j===i.TEXTURE_3D||j===i.TEXTURE_2D_ARRAY)&&i.texParameteri(j,i.TEXTURE_WRAP_R,$e[q.wrapR]),i.texParameteri(j,i.TEXTURE_MAG_FILTER,X[q.magFilter]),i.texParameteri(j,i.TEXTURE_MIN_FILTER,X[q.minFilter])):(i.texParameteri(j,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(j,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(j===i.TEXTURE_3D||j===i.TEXTURE_2D_ARRAY)&&i.texParameteri(j,i.TEXTURE_WRAP_R,i.CLAMP_TO_EDGE),(q.wrapS!==la||q.wrapT!==la)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(j,i.TEXTURE_MAG_FILTER,D(q.magFilter)),i.texParameteri(j,i.TEXTURE_MIN_FILTER,D(q.minFilter)),q.minFilter!==ji&&q.minFilter!==Dr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),q.compareFunction&&(i.texParameteri(j,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(j,i.TEXTURE_COMPARE_FUNC,Be[q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const ct=e.get("EXT_texture_filter_anisotropic");if(q.magFilter===ji||q.minFilter!==xg&&q.minFilter!==vu||q.type===is&&e.has("OES_texture_float_linear")===!1||o===!1&&q.type===Kl&&e.has("OES_texture_half_float_linear")===!1)return;(q.anisotropy>1||n.get(q).__currentAnisotropy)&&(i.texParameterf(j,ct.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,r.getMaxAnisotropy())),n.get(q).__currentAnisotropy=q.anisotropy)}}function Ue(j,q){let Ve=!1;j.__webglInit===void 0&&(j.__webglInit=!0,q.addEventListener("dispose",F));const ct=q.source;let ne=A.get(ct);ne===void 0&&(ne={},A.set(ct,ne));const Je=Ce(q);if(Je!==j.__cacheKey){ne[Je]===void 0&&(ne[Je]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,Ve=!0),ne[Je].usedTimes++;const Lt=ne[j.__cacheKey];Lt!==void 0&&(ne[j.__cacheKey].usedTimes--,Lt.usedTimes===0&&$(q)),j.__cacheKey=Je,j.__webglTexture=ne[Je].texture}return Ve}function Tt(j,q,Ve){let ct=i.TEXTURE_2D;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(ct=i.TEXTURE_2D_ARRAY),q.isData3DTexture&&(ct=i.TEXTURE_3D);const ne=Ue(j,q),Je=q.source;t.bindTexture(ct,j.__webglTexture,i.TEXTURE0+Ve);const Lt=n.get(Je);if(Je.version!==Lt.__version||ne===!0){t.activeTexture(i.TEXTURE0+Ve),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,q.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,q.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE);const we=S(q)&&C(q.image)===!1;let Ie=x(q.image,we,!1,u);Ie=Se(q,Ie);const de=C(Ie)||o,Xe=s.convert(q.format,q.colorSpace);let Nt=s.convert(q.type),Qt=B(q.internalFormat,Xe,Nt,q.colorSpace);mt(ct,q,de);let Ft;const jt=q.mipmaps,St=o&&q.isVideoTexture!==!0,Re=Lt.__version===void 0||ne===!0,Rt=M(q,Ie,de);if(q.isDepthTexture)Qt=i.DEPTH_COMPONENT,o?q.type===is?Qt=i.DEPTH_COMPONENT32F:q.type===Ic?Qt=i.DEPTH_COMPONENT24:q.type===Ld?Qt=i.DEPTH24_STENCIL8:Qt=i.DEPTH_COMPONENT16:q.type===is&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),q.format===Od&&Qt===i.DEPTH_COMPONENT&&q.type!==V0&&q.type!==Ic&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),q.type=Ic,Nt=s.convert(q.type)),q.format===I0&&Qt===i.DEPTH_COMPONENT&&(Qt=i.DEPTH_STENCIL,q.type!==Ld&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),q.type=Ld,Nt=s.convert(q.type))),Re&&(St?t.texStorage2D(i.TEXTURE_2D,1,Qt,Ie.width,Ie.height):t.texImage2D(i.TEXTURE_2D,0,Qt,Ie.width,Ie.height,0,Xe,Nt,null));else if(q.isDataTexture)if(jt.length>0&&de){St&&Re&&t.texStorage2D(i.TEXTURE_2D,Rt,Qt,jt[0].width,jt[0].height);for(let tt=0,Ut=jt.length;tt<Ut;tt++)Ft=jt[tt],St?t.texSubImage2D(i.TEXTURE_2D,tt,0,0,Ft.width,Ft.height,Xe,Nt,Ft.data):t.texImage2D(i.TEXTURE_2D,tt,Qt,Ft.width,Ft.height,0,Xe,Nt,Ft.data);q.generateMipmaps=!1}else St?(Re&&t.texStorage2D(i.TEXTURE_2D,Rt,Qt,Ie.width,Ie.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,Ie.width,Ie.height,Xe,Nt,Ie.data)):t.texImage2D(i.TEXTURE_2D,0,Qt,Ie.width,Ie.height,0,Xe,Nt,Ie.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){St&&Re&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Rt,Qt,jt[0].width,jt[0].height,Ie.depth);for(let tt=0,Ut=jt.length;tt<Ut;tt++)Ft=jt[tt],q.format!==Bs?Xe!==null?St?t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,tt,0,0,0,Ft.width,Ft.height,Ie.depth,Xe,Ft.data,0,0):t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,tt,Qt,Ft.width,Ft.height,Ie.depth,0,Ft.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):St?t.texSubImage3D(i.TEXTURE_2D_ARRAY,tt,0,0,0,Ft.width,Ft.height,Ie.depth,Xe,Nt,Ft.data):t.texImage3D(i.TEXTURE_2D_ARRAY,tt,Qt,Ft.width,Ft.height,Ie.depth,0,Xe,Nt,Ft.data)}else{St&&Re&&t.texStorage2D(i.TEXTURE_2D,Rt,Qt,jt[0].width,jt[0].height);for(let tt=0,Ut=jt.length;tt<Ut;tt++)Ft=jt[tt],q.format!==Bs?Xe!==null?St?t.compressedTexSubImage2D(i.TEXTURE_2D,tt,0,0,Ft.width,Ft.height,Xe,Ft.data):t.compressedTexImage2D(i.TEXTURE_2D,tt,Qt,Ft.width,Ft.height,0,Ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):St?t.texSubImage2D(i.TEXTURE_2D,tt,0,0,Ft.width,Ft.height,Xe,Nt,Ft.data):t.texImage2D(i.TEXTURE_2D,tt,Qt,Ft.width,Ft.height,0,Xe,Nt,Ft.data)}else if(q.isDataArrayTexture)St?(Re&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Rt,Qt,Ie.width,Ie.height,Ie.depth),t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Ie.width,Ie.height,Ie.depth,Xe,Nt,Ie.data)):t.texImage3D(i.TEXTURE_2D_ARRAY,0,Qt,Ie.width,Ie.height,Ie.depth,0,Xe,Nt,Ie.data);else if(q.isData3DTexture)St?(Re&&t.texStorage3D(i.TEXTURE_3D,Rt,Qt,Ie.width,Ie.height,Ie.depth),t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Ie.width,Ie.height,Ie.depth,Xe,Nt,Ie.data)):t.texImage3D(i.TEXTURE_3D,0,Qt,Ie.width,Ie.height,Ie.depth,0,Xe,Nt,Ie.data);else if(q.isFramebufferTexture){if(Re)if(St)t.texStorage2D(i.TEXTURE_2D,Rt,Qt,Ie.width,Ie.height);else{let tt=Ie.width,Ut=Ie.height;for(let $t=0;$t<Rt;$t++)t.texImage2D(i.TEXTURE_2D,$t,Qt,tt,Ut,0,Xe,Nt,null),tt>>=1,Ut>>=1}}else if(jt.length>0&&de){St&&Re&&t.texStorage2D(i.TEXTURE_2D,Rt,Qt,jt[0].width,jt[0].height);for(let tt=0,Ut=jt.length;tt<Ut;tt++)Ft=jt[tt],St?t.texSubImage2D(i.TEXTURE_2D,tt,0,0,Xe,Nt,Ft):t.texImage2D(i.TEXTURE_2D,tt,Qt,Xe,Nt,Ft);q.generateMipmaps=!1}else St?(Re&&t.texStorage2D(i.TEXTURE_2D,Rt,Qt,Ie.width,Ie.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,Xe,Nt,Ie)):t.texImage2D(i.TEXTURE_2D,0,Qt,Xe,Nt,Ie);I(q,de)&&P(ct),Lt.__version=Je.version,q.onUpdate&&q.onUpdate(q)}j.__version=q.version}function yt(j,q,Ve){if(q.image.length!==6)return;const ct=Ue(j,q),ne=q.source;t.bindTexture(i.TEXTURE_CUBE_MAP,j.__webglTexture,i.TEXTURE0+Ve);const Je=n.get(ne);if(ne.version!==Je.__version||ct===!0){t.activeTexture(i.TEXTURE0+Ve),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,q.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,q.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE);const Lt=q.isCompressedTexture||q.image[0].isCompressedTexture,we=q.image[0]&&q.image[0].isDataTexture,Ie=[];for(let tt=0;tt<6;tt++)!Lt&&!we?Ie[tt]=x(q.image[tt],!1,!0,c):Ie[tt]=we?q.image[tt].image:q.image[tt],Ie[tt]=Se(q,Ie[tt]);const de=Ie[0],Xe=C(de)||o,Nt=s.convert(q.format,q.colorSpace),Qt=s.convert(q.type),Ft=B(q.internalFormat,Nt,Qt,q.colorSpace),jt=o&&q.isVideoTexture!==!0,St=Je.__version===void 0||ct===!0;let Re=M(q,de,Xe);mt(i.TEXTURE_CUBE_MAP,q,Xe);let Rt;if(Lt){jt&&St&&t.texStorage2D(i.TEXTURE_CUBE_MAP,Re,Ft,de.width,de.height);for(let tt=0;tt<6;tt++){Rt=Ie[tt].mipmaps;for(let Ut=0;Ut<Rt.length;Ut++){const $t=Rt[Ut];q.format!==Bs?Nt!==null?jt?t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,Ut,0,0,$t.width,$t.height,Nt,$t.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,Ut,Ft,$t.width,$t.height,0,$t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):jt?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,Ut,0,0,$t.width,$t.height,Nt,Qt,$t.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,Ut,Ft,$t.width,$t.height,0,Nt,Qt,$t.data)}}}else{Rt=q.mipmaps,jt&&St&&(Rt.length>0&&Re++,t.texStorage2D(i.TEXTURE_CUBE_MAP,Re,Ft,Ie[0].width,Ie[0].height));for(let tt=0;tt<6;tt++)if(we){jt?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,0,0,0,Ie[tt].width,Ie[tt].height,Nt,Qt,Ie[tt].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,0,Ft,Ie[tt].width,Ie[tt].height,0,Nt,Qt,Ie[tt].data);for(let Ut=0;Ut<Rt.length;Ut++){const Le=Rt[Ut].image[tt].image;jt?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,Ut+1,0,0,Le.width,Le.height,Nt,Qt,Le.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,Ut+1,Ft,Le.width,Le.height,0,Nt,Qt,Le.data)}}else{jt?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,0,0,0,Nt,Qt,Ie[tt]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,0,Ft,Nt,Qt,Ie[tt]);for(let Ut=0;Ut<Rt.length;Ut++){const $t=Rt[Ut];jt?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,Ut+1,0,0,Nt,Qt,$t.image[tt]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,Ut+1,Ft,Nt,Qt,$t.image[tt])}}}I(q,Xe)&&P(i.TEXTURE_CUBE_MAP),Je.__version=ne.version,q.onUpdate&&q.onUpdate(q)}j.__version=q.version}function Ye(j,q,Ve,ct,ne){const Je=s.convert(Ve.format,Ve.colorSpace),Lt=s.convert(Ve.type),we=B(Ve.internalFormat,Je,Lt,Ve.colorSpace);n.get(q).__hasExternalTextures||(ne===i.TEXTURE_3D||ne===i.TEXTURE_2D_ARRAY?t.texImage3D(ne,0,we,q.width,q.height,q.depth,0,Je,Lt,null):t.texImage2D(ne,0,we,q.width,q.height,0,Je,Lt,null)),t.bindFramebuffer(i.FRAMEBUFFER,j),me(q)?f.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,ct,ne,n.get(Ve).__webglTexture,0,Ze(q)):(ne===i.TEXTURE_2D||ne>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&ne<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,ct,ne,n.get(Ve).__webglTexture,0),t.bindFramebuffer(i.FRAMEBUFFER,null)}function lt(j,q,Ve){if(i.bindRenderbuffer(i.RENDERBUFFER,j),q.depthBuffer&&!q.stencilBuffer){let ct=i.DEPTH_COMPONENT16;if(Ve||me(q)){const ne=q.depthTexture;ne&&ne.isDepthTexture&&(ne.type===is?ct=i.DEPTH_COMPONENT32F:ne.type===Ic&&(ct=i.DEPTH_COMPONENT24));const Je=Ze(q);me(q)?f.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Je,ct,q.width,q.height):i.renderbufferStorageMultisample(i.RENDERBUFFER,Je,ct,q.width,q.height)}else i.renderbufferStorage(i.RENDERBUFFER,ct,q.width,q.height);i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,j)}else if(q.depthBuffer&&q.stencilBuffer){const ct=Ze(q);Ve&&me(q)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,ct,i.DEPTH24_STENCIL8,q.width,q.height):me(q)?f.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ct,i.DEPTH24_STENCIL8,q.width,q.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,q.width,q.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,j)}else{const ct=q.isWebGLMultipleRenderTargets===!0?q.texture:[q.texture];for(let ne=0;ne<ct.length;ne++){const Je=ct[ne],Lt=s.convert(Je.format,Je.colorSpace),we=s.convert(Je.type),Ie=B(Je.internalFormat,Lt,we,Je.colorSpace),de=Ze(q);Ve&&me(q)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,de,Ie,q.width,q.height):me(q)?f.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,de,Ie,q.width,q.height):i.renderbufferStorage(i.RENDERBUFFER,Ie,q.width,q.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function ue(j,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,j),!(q.depthTexture&&q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(q.depthTexture).__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),Me(q.depthTexture,0);const ct=n.get(q.depthTexture).__webglTexture,ne=Ze(q);if(q.depthTexture.format===Od)me(q)?f.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,ct,0,ne):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,ct,0);else if(q.depthTexture.format===I0)me(q)?f.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,ct,0,ne):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,ct,0);else throw new Error("Unknown depthTexture format")}function dt(j){const q=n.get(j),Ve=j.isWebGLCubeRenderTarget===!0;if(j.depthTexture&&!q.__autoAllocateDepthBuffer){if(Ve)throw new Error("target.depthTexture not supported in Cube render targets");ue(q.__webglFramebuffer,j)}else if(Ve){q.__webglDepthbuffer=[];for(let ct=0;ct<6;ct++)t.bindFramebuffer(i.FRAMEBUFFER,q.__webglFramebuffer[ct]),q.__webglDepthbuffer[ct]=i.createRenderbuffer(),lt(q.__webglDepthbuffer[ct],j,!1)}else t.bindFramebuffer(i.FRAMEBUFFER,q.__webglFramebuffer),q.__webglDepthbuffer=i.createRenderbuffer(),lt(q.__webglDepthbuffer,j,!1);t.bindFramebuffer(i.FRAMEBUFFER,null)}function le(j,q,Ve){const ct=n.get(j);q!==void 0&&Ye(ct.__webglFramebuffer,j,j.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D),Ve!==void 0&&dt(j)}function he(j){const q=j.texture,Ve=n.get(j),ct=n.get(q);j.addEventListener("dispose",z),j.isWebGLMultipleRenderTargets!==!0&&(ct.__webglTexture===void 0&&(ct.__webglTexture=i.createTexture()),ct.__version=q.version,a.memory.textures++);const ne=j.isWebGLCubeRenderTarget===!0,Je=j.isWebGLMultipleRenderTargets===!0,Lt=C(j)||o;if(ne){Ve.__webglFramebuffer=[];for(let we=0;we<6;we++)Ve.__webglFramebuffer[we]=i.createFramebuffer()}else{if(Ve.__webglFramebuffer=i.createFramebuffer(),Je)if(r.drawBuffers){const we=j.texture;for(let Ie=0,de=we.length;Ie<de;Ie++){const Xe=n.get(we[Ie]);Xe.__webglTexture===void 0&&(Xe.__webglTexture=i.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&j.samples>0&&me(j)===!1){const we=Je?q:[q];Ve.__webglMultisampledFramebuffer=i.createFramebuffer(),Ve.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,Ve.__webglMultisampledFramebuffer);for(let Ie=0;Ie<we.length;Ie++){const de=we[Ie];Ve.__webglColorRenderbuffer[Ie]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,Ve.__webglColorRenderbuffer[Ie]);const Xe=s.convert(de.format,de.colorSpace),Nt=s.convert(de.type),Qt=B(de.internalFormat,Xe,Nt,de.colorSpace,j.isXRRenderTarget===!0),Ft=Ze(j);i.renderbufferStorageMultisample(i.RENDERBUFFER,Ft,Qt,j.width,j.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ie,i.RENDERBUFFER,Ve.__webglColorRenderbuffer[Ie])}i.bindRenderbuffer(i.RENDERBUFFER,null),j.depthBuffer&&(Ve.__webglDepthRenderbuffer=i.createRenderbuffer(),lt(Ve.__webglDepthRenderbuffer,j,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(ne){t.bindTexture(i.TEXTURE_CUBE_MAP,ct.__webglTexture),mt(i.TEXTURE_CUBE_MAP,q,Lt);for(let we=0;we<6;we++)Ye(Ve.__webglFramebuffer[we],j,q,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+we);I(q,Lt)&&P(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Je){const we=j.texture;for(let Ie=0,de=we.length;Ie<de;Ie++){const Xe=we[Ie],Nt=n.get(Xe);t.bindTexture(i.TEXTURE_2D,Nt.__webglTexture),mt(i.TEXTURE_2D,Xe,Lt),Ye(Ve.__webglFramebuffer,j,Xe,i.COLOR_ATTACHMENT0+Ie,i.TEXTURE_2D),I(Xe,Lt)&&P(i.TEXTURE_2D)}t.unbindTexture()}else{let we=i.TEXTURE_2D;(j.isWebGL3DRenderTarget||j.isWebGLArrayRenderTarget)&&(o?we=j.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(we,ct.__webglTexture),mt(we,q,Lt),Ye(Ve.__webglFramebuffer,j,q,i.COLOR_ATTACHMENT0,we),I(q,Lt)&&P(we),t.unbindTexture()}j.depthBuffer&&dt(j)}function xe(j){const q=C(j)||o,Ve=j.isWebGLMultipleRenderTargets===!0?j.texture:[j.texture];for(let ct=0,ne=Ve.length;ct<ne;ct++){const Je=Ve[ct];if(I(Je,q)){const Lt=j.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,we=n.get(Je).__webglTexture;t.bindTexture(Lt,we),P(Lt),t.unbindTexture()}}}function pt(j){if(o&&j.samples>0&&me(j)===!1){const q=j.isWebGLMultipleRenderTargets?j.texture:[j.texture],Ve=j.width,ct=j.height;let ne=i.COLOR_BUFFER_BIT;const Je=[],Lt=j.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,we=n.get(j),Ie=j.isWebGLMultipleRenderTargets===!0;if(Ie)for(let de=0;de<q.length;de++)t.bindFramebuffer(i.FRAMEBUFFER,we.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+de,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,we.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+de,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,we.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,we.__webglFramebuffer);for(let de=0;de<q.length;de++){Je.push(i.COLOR_ATTACHMENT0+de),j.depthBuffer&&Je.push(Lt);const Xe=we.__ignoreDepthValues!==void 0?we.__ignoreDepthValues:!1;if(Xe===!1&&(j.depthBuffer&&(ne|=i.DEPTH_BUFFER_BIT),j.stencilBuffer&&(ne|=i.STENCIL_BUFFER_BIT)),Ie&&i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,we.__webglColorRenderbuffer[de]),Xe===!0&&(i.invalidateFramebuffer(i.READ_FRAMEBUFFER,[Lt]),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[Lt])),Ie){const Nt=n.get(q[de]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Nt,0)}i.blitFramebuffer(0,0,Ve,ct,0,0,Ve,ct,ne,i.NEAREST),d&&i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Je)}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Ie)for(let de=0;de<q.length;de++){t.bindFramebuffer(i.FRAMEBUFFER,we.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+de,i.RENDERBUFFER,we.__webglColorRenderbuffer[de]);const Xe=n.get(q[de]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,we.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+de,i.TEXTURE_2D,Xe,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,we.__webglMultisampledFramebuffer)}}function Ze(j){return Math.min(h,j.samples)}function me(j){const q=n.get(j);return o&&j.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&q.__useRenderToTexture!==!1}function te(j){const q=a.render.frame;g.get(j)!==q&&(g.set(j,q),j.update())}function Se(j,q){const Ve=j.colorSpace,ct=j.format,ne=j.type;return j.isCompressedTexture===!0||j.format===Ax||Ve!==Nc&&Ve!==ch&&(Ve===kn?o===!1?e.has("EXT_sRGB")===!0&&ct===Bs?(j.format=Ax,j.minFilter=Dr,j.generateMipmaps=!1):q=_5.sRGBToLinear(q):(ct!==Bs||ne!==ns)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ve)),q}this.allocateTextureUnit=J,this.resetTextureUnits=W,this.setTexture2D=Me,this.setTexture2DArray=ge,this.setTexture3D=ve,this.setTextureCube=nt,this.rebindTextures=le,this.setupRenderTarget=he,this.updateRenderTargetMipmap=xe,this.updateMultisampleRenderTarget=pt,this.setupDepthRenderbuffer=dt,this.setupFrameBufferTexture=Ye,this.useMultisampledRTT=me}function mO(i,e,t){const n=t.isWebGL2;function r(s,a=ch){let o;if(s===ns)return i.UNSIGNED_BYTE;if(s===m2)return i.UNSIGNED_SHORT_4_4_4_4;if(s===g2)return i.UNSIGNED_SHORT_5_5_5_1;if(s===sA)return i.BYTE;if(s===aA)return i.SHORT;if(s===V0)return i.UNSIGNED_SHORT;if(s===sv)return i.INT;if(s===Ic)return i.UNSIGNED_INT;if(s===is)return i.FLOAT;if(s===Kl)return n?i.HALF_FLOAT:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===l5)return i.ALPHA;if(s===Bs)return i.RGBA;if(s===v2)return i.LUMINANCE;if(s===_2)return i.LUMINANCE_ALPHA;if(s===Od)return i.DEPTH_COMPONENT;if(s===I0)return i.DEPTH_STENCIL;if(s===Ax)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===ug)return i.RED;if(s===c5)return i.RED_INTEGER;if(s===hg)return i.RG;if(s===u5)return i.RG_INTEGER;if(s===h5)return i.RGBA_INTEGER;if(s===Z_||s===Gw||s===Qw||s===e1)if(a===kn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===Z_)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Gw)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Qw)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===e1)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===Z_)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Gw)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Qw)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===e1)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===dx||s===J3||s===px||s===Z3)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===dx)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===J3)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===px)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Z3)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===f5)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===mx||s===gx)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(s===mx)return a===kn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===gx)return a===kn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===vx||s===eM||s===tM||s===nM||s===iM||s===rM||s===sM||s===aM||s===oM||s===lM||s===cM||s===uM||s===hM||s===fM)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(s===vx)return a===kn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===eM)return a===kn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===tM)return a===kn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===nM)return a===kn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===iM)return a===kn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===rM)return a===kn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===sM)return a===kn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===aM)return a===kn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===oM)return a===kn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===lM)return a===kn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===cM)return a===kn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===uM)return a===kn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===hM)return a===kn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===fM)return a===kn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===t1)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(s===t1)return a===kn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===NL||s===dM||s===pM||s===mM)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(s===t1)return o.COMPRESSED_RED_RGTC1_EXT;if(s===dM)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===pM)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===mM)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Ld?n?i.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):i[s]!==void 0?i[s]:null}return{convert:r}}class gO extends yr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let Zu=class extends Oi{constructor(){super(),this.isGroup=!0,this.type="Group"}};const Ite={type:"move"};class X4{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Zu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Zu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new fe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new fe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Zu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new fe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new fe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const v of e.hand.values()){const A=t.getJointPose(v,n),_=this._getHandJoint(c,v);A!==null&&(_.matrix.fromArray(A.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=A.radius),_.visible=A!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],f=u.position.distanceTo(h.position),d=.02,g=.005;c.inputState.pinching&&f>d+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=d-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Ite)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Zu;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class vO extends rs{constructor(e,t,n,r,s,a,o,l,c,u){if(u=u!==void 0?u:Od,u!==Od&&u!==I0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&u===Od&&(n=Ic),n===void 0&&u===I0&&(n=Ld),super(null,r,s,a,o,l,u,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:ji,this.minFilter=l!==void 0?l:ji,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Pte extends Oc{constructor(e,t){super();const n=this;let r=null,s=1,a=null,o="local-floor",l=1,c=null,u=null,h=null,f=null,d=null,g=null;const v=t.getContextAttributes();let A=null,_=null;const y=[],x=[],C=new yr;C.layers.enable(1),C.viewport=new Hi;const S=new yr;S.layers.enable(2),S.viewport=new Hi;const I=[C,S],P=new gO;P.layers.enable(1),P.layers.enable(2);let B=null,M=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ge){let ve=y[ge];return ve===void 0&&(ve=new X4,y[ge]=ve),ve.getTargetRaySpace()},this.getControllerGrip=function(ge){let ve=y[ge];return ve===void 0&&(ve=new X4,y[ge]=ve),ve.getGripSpace()},this.getHand=function(ge){let ve=y[ge];return ve===void 0&&(ve=new X4,y[ge]=ve),ve.getHandSpace()};function D(ge){const ve=x.indexOf(ge.inputSource);if(ve===-1)return;const nt=y[ve];nt!==void 0&&(nt.update(ge.inputSource,ge.frame,c||a),nt.dispatchEvent({type:ge.type,data:ge.inputSource}))}function F(){r.removeEventListener("select",D),r.removeEventListener("selectstart",D),r.removeEventListener("selectend",D),r.removeEventListener("squeeze",D),r.removeEventListener("squeezestart",D),r.removeEventListener("squeezeend",D),r.removeEventListener("end",F),r.removeEventListener("inputsourceschange",z);for(let ge=0;ge<y.length;ge++){const ve=x[ge];ve!==null&&(x[ge]=null,y[ge].disconnect(ve))}B=null,M=null,e.setRenderTarget(A),d=null,f=null,h=null,r=null,_=null,Me.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ge){s=ge,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ge){o=ge,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(ge){c=ge},this.getBaseLayer=function(){return f!==null?f:d},this.getBinding=function(){return h},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=async function(ge){if(r=ge,r!==null){if(A=e.getRenderTarget(),r.addEventListener("select",D),r.addEventListener("selectstart",D),r.addEventListener("selectend",D),r.addEventListener("squeeze",D),r.addEventListener("squeezestart",D),r.addEventListener("squeezeend",D),r.addEventListener("end",F),r.addEventListener("inputsourceschange",z),v.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ve={antialias:r.renderState.layers===void 0?v.antialias:!0,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};d=new XRWebGLLayer(r,t,ve),r.updateRenderState({baseLayer:d}),_=new po(d.framebufferWidth,d.framebufferHeight,{format:Bs,type:ns,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let ve=null,nt=null,$e=null;v.depth&&($e=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ve=v.stencil?I0:Od,nt=v.stencil?Ld:Ic);const X={colorFormat:t.RGBA8,depthFormat:$e,scaleFactor:s};h=new XRWebGLBinding(r,t),f=h.createProjectionLayer(X),r.updateRenderState({layers:[f]}),_=new po(f.textureWidth,f.textureHeight,{format:Bs,type:ns,depthTexture:new vO(f.textureWidth,f.textureHeight,nt,void 0,void 0,void 0,void 0,void 0,void 0,ve),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0});const Be=e.properties.get(_);Be.__ignoreDepthValues=f.ignoreDepthValues}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await r.requestReferenceSpace(o),Me.setContext(r),Me.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function z(ge){for(let ve=0;ve<ge.removed.length;ve++){const nt=ge.removed[ve],$e=x.indexOf(nt);$e>=0&&(x[$e]=null,y[$e].disconnect(nt))}for(let ve=0;ve<ge.added.length;ve++){const nt=ge.added[ve];let $e=x.indexOf(nt);if($e===-1){for(let Be=0;Be<y.length;Be++)if(Be>=x.length){x.push(nt),$e=Be;break}else if(x[Be]===null){x[Be]=nt,$e=Be;break}if($e===-1)break}const X=y[$e];X&&X.connect(nt)}}const U=new fe,$=new fe;function O(ge,ve,nt){U.setFromMatrixPosition(ve.matrixWorld),$.setFromMatrixPosition(nt.matrixWorld);const $e=U.distanceTo($),X=ve.projectionMatrix.elements,Be=nt.projectionMatrix.elements,mt=X[14]/(X[10]-1),Ue=X[14]/(X[10]+1),Tt=(X[9]+1)/X[5],yt=(X[9]-1)/X[5],Ye=(X[8]-1)/X[0],lt=(Be[8]+1)/Be[0],ue=mt*Ye,dt=mt*lt,le=$e/(-Ye+lt),he=le*-Ye;ve.matrixWorld.decompose(ge.position,ge.quaternion,ge.scale),ge.translateX(he),ge.translateZ(le),ge.matrixWorld.compose(ge.position,ge.quaternion,ge.scale),ge.matrixWorldInverse.copy(ge.matrixWorld).invert();const xe=mt+le,pt=Ue+le,Ze=ue-he,me=dt+($e-he),te=Tt*Ue/pt*xe,Se=yt*Ue/pt*xe;ge.projectionMatrix.makePerspective(Ze,me,te,Se,xe,pt),ge.projectionMatrixInverse.copy(ge.projectionMatrix).invert()}function ie(ge,ve){ve===null?ge.matrixWorld.copy(ge.matrix):ge.matrixWorld.multiplyMatrices(ve.matrixWorld,ge.matrix),ge.matrixWorldInverse.copy(ge.matrixWorld).invert()}this.updateCamera=function(ge){if(r===null)return;P.near=S.near=C.near=ge.near,P.far=S.far=C.far=ge.far,(B!==P.near||M!==P.far)&&(r.updateRenderState({depthNear:P.near,depthFar:P.far}),B=P.near,M=P.far);const ve=ge.parent,nt=P.cameras;ie(P,ve);for(let $e=0;$e<nt.length;$e++)ie(nt[$e],ve);nt.length===2?O(P,C,S):P.projectionMatrix.copy(C.projectionMatrix),W(ge,P,ve)};function W(ge,ve,nt){nt===null?ge.matrix.copy(ve.matrixWorld):(ge.matrix.copy(nt.matrixWorld),ge.matrix.invert(),ge.matrix.multiply(ve.matrixWorld)),ge.matrix.decompose(ge.position,ge.quaternion,ge.scale),ge.updateMatrixWorld(!0);const $e=ge.children;for(let X=0,Be=$e.length;X<Be;X++)$e[X].updateMatrixWorld(!0);ge.projectionMatrix.copy(ve.projectionMatrix),ge.projectionMatrixInverse.copy(ve.projectionMatrixInverse),ge.isPerspectiveCamera&&(ge.fov=Bg*2*Math.atan(1/ge.projectionMatrix.elements[5]),ge.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(f===null&&d===null))return l},this.setFoveation=function(ge){l=ge,f!==null&&(f.fixedFoveation=ge),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=ge)};let J=null;function Ce(ge,ve){if(u=ve.getViewerPose(c||a),g=ve,u!==null){const nt=u.views;d!==null&&(e.setRenderTargetFramebuffer(_,d.framebuffer),e.setRenderTarget(_));let $e=!1;nt.length!==P.cameras.length&&(P.cameras.length=0,$e=!0);for(let X=0;X<nt.length;X++){const Be=nt[X];let mt=null;if(d!==null)mt=d.getViewport(Be);else{const Tt=h.getViewSubImage(f,Be);mt=Tt.viewport,X===0&&(e.setRenderTargetTextures(_,Tt.colorTexture,f.ignoreDepthValues?void 0:Tt.depthStencilTexture),e.setRenderTarget(_))}let Ue=I[X];Ue===void 0&&(Ue=new yr,Ue.layers.enable(X),Ue.viewport=new Hi,I[X]=Ue),Ue.matrix.fromArray(Be.transform.matrix),Ue.matrix.decompose(Ue.position,Ue.quaternion,Ue.scale),Ue.projectionMatrix.fromArray(Be.projectionMatrix),Ue.projectionMatrixInverse.copy(Ue.projectionMatrix).invert(),Ue.viewport.set(mt.x,mt.y,mt.width,mt.height),X===0&&(P.matrix.copy(Ue.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),$e===!0&&P.cameras.push(Ue)}}for(let nt=0;nt<y.length;nt++){const $e=x[nt],X=y[nt];$e!==null&&X!==void 0&&X.update($e,ve,c||a)}J&&J(ge,ve),ve.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:ve}),g=null}const Me=new uO;Me.setAnimationLoop(Ce),this.setAnimationLoop=function(ge){J=ge},this.dispose=function(){}}}function kte(i,e){function t(A,_){A.matrixAutoUpdate===!0&&A.updateMatrix(),_.value.copy(A.matrix)}function n(A,_){_.color.getRGB(A.fogColor.value,oO(i)),_.isFog?(A.fogNear.value=_.near,A.fogFar.value=_.far):_.isFogExp2&&(A.fogDensity.value=_.density)}function r(A,_,y,x,C){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(A,_):_.isMeshToonMaterial?(s(A,_),h(A,_)):_.isMeshPhongMaterial?(s(A,_),u(A,_)):_.isMeshStandardMaterial?(s(A,_),f(A,_),_.isMeshPhysicalMaterial&&d(A,_,C)):_.isMeshMatcapMaterial?(s(A,_),g(A,_)):_.isMeshDepthMaterial?s(A,_):_.isMeshDistanceMaterial?(s(A,_),v(A,_)):_.isMeshNormalMaterial?s(A,_):_.isLineBasicMaterial?(a(A,_),_.isLineDashedMaterial&&o(A,_)):_.isPointsMaterial?l(A,_,y,x):_.isSpriteMaterial?c(A,_):_.isShadowMaterial?(A.color.value.copy(_.color),A.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function s(A,_){A.opacity.value=_.opacity,_.color&&A.diffuse.value.copy(_.color),_.emissive&&A.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(A.map.value=_.map,t(_.map,A.mapTransform)),_.alphaMap&&(A.alphaMap.value=_.alphaMap,t(_.alphaMap,A.alphaMapTransform)),_.bumpMap&&(A.bumpMap.value=_.bumpMap,t(_.bumpMap,A.bumpMapTransform),A.bumpScale.value=_.bumpScale,_.side===Fo&&(A.bumpScale.value*=-1)),_.normalMap&&(A.normalMap.value=_.normalMap,t(_.normalMap,A.normalMapTransform),A.normalScale.value.copy(_.normalScale),_.side===Fo&&A.normalScale.value.negate()),_.displacementMap&&(A.displacementMap.value=_.displacementMap,t(_.displacementMap,A.displacementMapTransform),A.displacementScale.value=_.displacementScale,A.displacementBias.value=_.displacementBias),_.emissiveMap&&(A.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,A.emissiveMapTransform)),_.specularMap&&(A.specularMap.value=_.specularMap,t(_.specularMap,A.specularMapTransform)),_.alphaTest>0&&(A.alphaTest.value=_.alphaTest);const y=e.get(_).envMap;if(y&&(A.envMap.value=y,A.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,A.reflectivity.value=_.reflectivity,A.ior.value=_.ior,A.refractionRatio.value=_.refractionRatio),_.lightMap){A.lightMap.value=_.lightMap;const x=i._useLegacyLights===!0?Math.PI:1;A.lightMapIntensity.value=_.lightMapIntensity*x,t(_.lightMap,A.lightMapTransform)}_.aoMap&&(A.aoMap.value=_.aoMap,A.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,A.aoMapTransform))}function a(A,_){A.diffuse.value.copy(_.color),A.opacity.value=_.opacity,_.map&&(A.map.value=_.map,t(_.map,A.mapTransform))}function o(A,_){A.dashSize.value=_.dashSize,A.totalSize.value=_.dashSize+_.gapSize,A.scale.value=_.scale}function l(A,_,y,x){A.diffuse.value.copy(_.color),A.opacity.value=_.opacity,A.size.value=_.size*y,A.scale.value=x*.5,_.map&&(A.map.value=_.map,t(_.map,A.uvTransform)),_.alphaMap&&(A.alphaMap.value=_.alphaMap,t(_.alphaMap,A.alphaMapTransform)),_.alphaTest>0&&(A.alphaTest.value=_.alphaTest)}function c(A,_){A.diffuse.value.copy(_.color),A.opacity.value=_.opacity,A.rotation.value=_.rotation,_.map&&(A.map.value=_.map,t(_.map,A.mapTransform)),_.alphaMap&&(A.alphaMap.value=_.alphaMap,t(_.alphaMap,A.alphaMapTransform)),_.alphaTest>0&&(A.alphaTest.value=_.alphaTest)}function u(A,_){A.specular.value.copy(_.specular),A.shininess.value=Math.max(_.shininess,1e-4)}function h(A,_){_.gradientMap&&(A.gradientMap.value=_.gradientMap)}function f(A,_){A.metalness.value=_.metalness,_.metalnessMap&&(A.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,A.metalnessMapTransform)),A.roughness.value=_.roughness,_.roughnessMap&&(A.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,A.roughnessMapTransform)),e.get(_).envMap&&(A.envMapIntensity.value=_.envMapIntensity)}function d(A,_,y){A.ior.value=_.ior,_.sheen>0&&(A.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),A.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(A.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,A.sheenColorMapTransform)),_.sheenRoughnessMap&&(A.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,A.sheenRoughnessMapTransform))),_.clearcoat>0&&(A.clearcoat.value=_.clearcoat,A.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(A.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,A.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(A.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,A.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(A.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,A.clearcoatNormalMapTransform),A.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===Fo&&A.clearcoatNormalScale.value.negate())),_.iridescence>0&&(A.iridescence.value=_.iridescence,A.iridescenceIOR.value=_.iridescenceIOR,A.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],A.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(A.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,A.iridescenceMapTransform)),_.iridescenceThicknessMap&&(A.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,A.iridescenceThicknessMapTransform))),_.transmission>0&&(A.transmission.value=_.transmission,A.transmissionSamplerMap.value=y.texture,A.transmissionSamplerSize.value.set(y.width,y.height),_.transmissionMap&&(A.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,A.transmissionMapTransform)),A.thickness.value=_.thickness,_.thicknessMap&&(A.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,A.thicknessMapTransform)),A.attenuationDistance.value=_.attenuationDistance,A.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(A.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(A.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,A.anisotropyMapTransform))),A.specularIntensity.value=_.specularIntensity,A.specularColor.value.copy(_.specularColor),_.specularColorMap&&(A.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,A.specularColorMapTransform)),_.specularIntensityMap&&(A.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,A.specularIntensityMapTransform))}function g(A,_){_.matcap&&(A.matcap.value=_.matcap)}function v(A,_){const y=e.get(_).light;A.referencePosition.value.setFromMatrixPosition(y.matrixWorld),A.nearDistance.value=y.shadow.camera.near,A.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function Bte(i,e,t,n){let r={},s={},a=[];const o=t.isWebGL2?i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(y,x){const C=x.program;n.uniformBlockBinding(y,C)}function c(y,x){let C=r[y.id];C===void 0&&(g(y),C=u(y),r[y.id]=C,y.addEventListener("dispose",A));const S=x.program;n.updateUBOMapping(y,S);const I=e.render.frame;s[y.id]!==I&&(f(y),s[y.id]=I)}function u(y){const x=h();y.__bindingPointIndex=x;const C=i.createBuffer(),S=y.__size,I=y.usage;return i.bindBuffer(i.UNIFORM_BUFFER,C),i.bufferData(i.UNIFORM_BUFFER,S,I),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,x,C),C}function h(){for(let y=0;y<o;y++)if(a.indexOf(y)===-1)return a.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(y){const x=r[y.id],C=y.uniforms,S=y.__cache;i.bindBuffer(i.UNIFORM_BUFFER,x);for(let I=0,P=C.length;I<P;I++){const B=C[I];if(d(B,I,S)===!0){const M=B.__offset,D=Array.isArray(B.value)?B.value:[B.value];let F=0;for(let z=0;z<D.length;z++){const U=D[z],$=v(U);typeof U=="number"?(B.__data[0]=U,i.bufferSubData(i.UNIFORM_BUFFER,M+F,B.__data)):U.isMatrix3?(B.__data[0]=U.elements[0],B.__data[1]=U.elements[1],B.__data[2]=U.elements[2],B.__data[3]=U.elements[0],B.__data[4]=U.elements[3],B.__data[5]=U.elements[4],B.__data[6]=U.elements[5],B.__data[7]=U.elements[0],B.__data[8]=U.elements[6],B.__data[9]=U.elements[7],B.__data[10]=U.elements[8],B.__data[11]=U.elements[0]):(U.toArray(B.__data,F),F+=$.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,M,B.__data)}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function d(y,x,C){const S=y.value;if(C[x]===void 0){if(typeof S=="number")C[x]=S;else{const I=Array.isArray(S)?S:[S],P=[];for(let B=0;B<I.length;B++)P.push(I[B].clone());C[x]=P}return!0}else if(typeof S=="number"){if(C[x]!==S)return C[x]=S,!0}else{const I=Array.isArray(C[x])?C[x]:[C[x]],P=Array.isArray(S)?S:[S];for(let B=0;B<I.length;B++){const M=I[B];if(M.equals(P[B])===!1)return M.copy(P[B]),!0}}return!1}function g(y){const x=y.uniforms;let C=0;const S=16;let I=0;for(let P=0,B=x.length;P<B;P++){const M=x[P],D={boundary:0,storage:0},F=Array.isArray(M.value)?M.value:[M.value];for(let z=0,U=F.length;z<U;z++){const $=F[z],O=v($);D.boundary+=O.boundary,D.storage+=O.storage}if(M.__data=new Float32Array(D.storage/Float32Array.BYTES_PER_ELEMENT),M.__offset=C,P>0){I=C%S;const z=S-I;I!==0&&z-D.boundary<0&&(C+=S-I,M.__offset=C)}C+=D.storage}return I=C%S,I>0&&(C+=S-I),y.__size=C,y.__cache={},this}function v(y){const x={boundary:0,storage:0};return typeof y=="number"?(x.boundary=4,x.storage=4):y.isVector2?(x.boundary=8,x.storage=8):y.isVector3||y.isColor?(x.boundary=16,x.storage=12):y.isVector4?(x.boundary=16,x.storage=16):y.isMatrix3?(x.boundary=48,x.storage=48):y.isMatrix4?(x.boundary=64,x.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),x}function A(y){const x=y.target;x.removeEventListener("dispose",A);const C=a.indexOf(x.__bindingPointIndex);a.splice(C,1),i.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}function _(){for(const y in r)i.deleteBuffer(r[y]);a=[],r={},s={}}return{bind:l,update:c,dispose:_}}function Rte(){const i=x1("canvas");return i.style.display="block",i}class C5{constructor(e={}){const{canvas:t=Rte(),context:n=null,depth:r=!0,stencil:s=!0,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1,webgl1:f=!1}=e;this.isWebGLRenderer=!0,f&&(this.isWebGL1Renderer=!0);let d;n!==null?d=n.getContextAttributes().alpha:d=a;const g=new Uint32Array(4),v=new Int32Array(4);let A=null,_=null;const y=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=kn,this._useLegacyLights=!1,this.toneMapping=bf,this.toneMappingExposure=1;const C=this;let S=!1,I=0,P=0,B=null,M=-1,D=null;const F=new Hi,z=new Hi;let U=null;const $=new qt(0);let O=0,ie=t.width,W=t.height,J=1,Ce=null,Me=null;const ge=new Hi(0,0,ie,W),ve=new Hi(0,0,ie,W);let nt=!1;const $e=new C2;let X=!1,Be=!1,mt=null;const Ue=new Wn,Tt=new Et,yt=new fe,Ye={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function lt(){return B===null?J:1}let ue=n;function dt(ce,ot){for(let vt=0;vt<ce.length;vt++){const Ke=ce[vt],wt=t.getContext(Ke,ot);if(wt!==null)return wt}return null}try{const ce={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${u2}`),t.addEventListener("webglcontextlost",tt,!1),t.addEventListener("webglcontextrestored",Ut,!1),t.addEventListener("webglcontextcreationerror",$t,!1),ue===null){const ot=["webgl2","webgl","experimental-webgl"];if(C.isWebGL1Renderer===!0&&ot.shift(),ue=dt(ot,ce),ue===null)throw dt(ot)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&ue instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),ue.getShaderPrecisionFormat===void 0&&(ue.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ce){throw console.error("THREE.WebGLRenderer: "+ce.message),ce}let le,he,xe,pt,Ze,me,te,Se,j,q,Ve,ct,ne,Je,Lt,we,Ie,de,Xe,Nt,Qt,Ft,jt,St;function Re(){le=new WZ(ue),he=new HZ(ue,le,e),le.init(he),Ft=new mO(ue,le,he),xe=new Mte(ue,le,he),pt=new KZ(ue),Ze=new mte,me=new Tte(ue,le,xe,Ze,he,Ft,pt),te=new GZ(C),Se=new jZ(C),j=new oK(ue,he),jt=new UZ(ue,le,j,he),q=new YZ(ue,j,pt,jt),Ve=new tee(ue,q,j,pt),Xe=new eee(ue,he,me),we=new $Z(Ze),ct=new pte(C,te,Se,le,he,jt,we),ne=new kte(C,Ze),Je=new vte,Lt=new xte(le,he),de=new zZ(C,te,Se,xe,Ve,d,l),Ie=new Ste(C,Ve,he),St=new Bte(ue,pt,he,xe),Nt=new VZ(ue,le,pt,he),Qt=new XZ(ue,le,pt,he),pt.programs=ct.programs,C.capabilities=he,C.extensions=le,C.properties=Ze,C.renderLists=Je,C.shadowMap=Ie,C.state=xe,C.info=pt}Re();const Rt=new Pte(C,ue);this.xr=Rt,this.getContext=function(){return ue},this.getContextAttributes=function(){return ue.getContextAttributes()},this.forceContextLoss=function(){const ce=le.get("WEBGL_lose_context");ce&&ce.loseContext()},this.forceContextRestore=function(){const ce=le.get("WEBGL_lose_context");ce&&ce.restoreContext()},this.getPixelRatio=function(){return J},this.setPixelRatio=function(ce){ce!==void 0&&(J=ce,this.setSize(ie,W,!1))},this.getSize=function(ce){return ce.set(ie,W)},this.setSize=function(ce,ot,vt=!0){if(Rt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ie=ce,W=ot,t.width=Math.floor(ce*J),t.height=Math.floor(ot*J),vt===!0&&(t.style.width=ce+"px",t.style.height=ot+"px"),this.setViewport(0,0,ce,ot)},this.getDrawingBufferSize=function(ce){return ce.set(ie*J,W*J).floor()},this.setDrawingBufferSize=function(ce,ot,vt){ie=ce,W=ot,J=vt,t.width=Math.floor(ce*vt),t.height=Math.floor(ot*vt),this.setViewport(0,0,ce,ot)},this.getCurrentViewport=function(ce){return ce.copy(F)},this.getViewport=function(ce){return ce.copy(ge)},this.setViewport=function(ce,ot,vt,Ke){ce.isVector4?ge.set(ce.x,ce.y,ce.z,ce.w):ge.set(ce,ot,vt,Ke),xe.viewport(F.copy(ge).multiplyScalar(J).floor())},this.getScissor=function(ce){return ce.copy(ve)},this.setScissor=function(ce,ot,vt,Ke){ce.isVector4?ve.set(ce.x,ce.y,ce.z,ce.w):ve.set(ce,ot,vt,Ke),xe.scissor(z.copy(ve).multiplyScalar(J).floor())},this.getScissorTest=function(){return nt},this.setScissorTest=function(ce){xe.setScissorTest(nt=ce)},this.setOpaqueSort=function(ce){Ce=ce},this.setTransparentSort=function(ce){Me=ce},this.getClearColor=function(ce){return ce.copy(de.getClearColor())},this.setClearColor=function(){de.setClearColor.apply(de,arguments)},this.getClearAlpha=function(){return de.getClearAlpha()},this.setClearAlpha=function(){de.setClearAlpha.apply(de,arguments)},this.clear=function(ce=!0,ot=!0,vt=!0){let Ke=0;if(ce){let wt=!1;if(B!==null){const en=B.texture.format;wt=en===h5||en===u5||en===c5}if(wt){const en=B.texture.type,_n=en===ns||en===Ic||en===V0||en===Ld||en===m2||en===g2,fn=de.getClearColor(),Tn=de.getClearAlpha(),Qn=fn.r,xn=fn.g,In=fn.b;_n?(g[0]=Qn,g[1]=xn,g[2]=In,g[3]=Tn,ue.clearBufferuiv(ue.COLOR,0,g)):(v[0]=Qn,v[1]=xn,v[2]=In,v[3]=Tn,ue.clearBufferiv(ue.COLOR,0,v))}else Ke|=ue.COLOR_BUFFER_BIT}ot&&(Ke|=ue.DEPTH_BUFFER_BIT),vt&&(Ke|=ue.STENCIL_BUFFER_BIT),ue.clear(Ke)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",tt,!1),t.removeEventListener("webglcontextrestored",Ut,!1),t.removeEventListener("webglcontextcreationerror",$t,!1),Je.dispose(),Lt.dispose(),Ze.dispose(),te.dispose(),Se.dispose(),Ve.dispose(),jt.dispose(),St.dispose(),ct.dispose(),Rt.dispose(),Rt.removeEventListener("sessionstart",As),Rt.removeEventListener("sessionend",er),mt&&(mt.dispose(),mt=null),pa.stop()};function tt(ce){ce.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function Ut(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const ce=pt.autoReset,ot=Ie.enabled,vt=Ie.autoUpdate,Ke=Ie.needsUpdate,wt=Ie.type;Re(),pt.autoReset=ce,Ie.enabled=ot,Ie.autoUpdate=vt,Ie.needsUpdate=Ke,Ie.type=wt}function $t(ce){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ce.statusMessage)}function Le(ce){const ot=ce.target;ot.removeEventListener("dispose",Le),wn(ot)}function wn(ce){fi(ce),Ze.remove(ce)}function fi(ce){const ot=Ze.get(ce).programs;ot!==void 0&&(ot.forEach(function(vt){ct.releaseProgram(vt)}),ce.isShaderMaterial&&ct.releaseShaderCache(ce))}this.renderBufferDirect=function(ce,ot,vt,Ke,wt,en){ot===null&&(ot=Ye);const _n=wt.isMesh&&wt.matrixWorld.determinant()<0,fn=Ao(ce,ot,vt,Ke,wt);xe.setMaterial(Ke,_n);let Tn=vt.index,Qn=1;Ke.wireframe===!0&&(Tn=q.getWireframeAttribute(vt),Qn=2);const xn=vt.drawRange,In=vt.attributes.position;let tr=xn.start*Qn,ki=(xn.start+xn.count)*Qn;en!==null&&(tr=Math.max(tr,en.start*Qn),ki=Math.min(ki,(en.start+en.count)*Qn)),Tn!==null?(tr=Math.max(tr,0),ki=Math.min(ki,Tn.count)):In!=null&&(tr=Math.max(tr,0),ki=Math.min(ki,In.count));const as=ki-tr;if(as<0||as===1/0)return;jt.setup(wt,Ke,fn,vt,Tn);let js,Kn=Nt;if(Tn!==null&&(js=j.get(Tn),Kn=Qt,Kn.setIndex(js)),wt.isMesh)Ke.wireframe===!0?(xe.setLineWidth(Ke.wireframeLinewidth*lt()),Kn.setMode(ue.LINES)):Kn.setMode(ue.TRIANGLES);else if(wt.isLine){let Bn=Ke.linewidth;Bn===void 0&&(Bn=1),xe.setLineWidth(Bn*lt()),wt.isLineSegments?Kn.setMode(ue.LINES):wt.isLineLoop?Kn.setMode(ue.LINE_LOOP):Kn.setMode(ue.LINE_STRIP)}else wt.isPoints?Kn.setMode(ue.POINTS):wt.isSprite&&Kn.setMode(ue.TRIANGLES);if(wt.isInstancedMesh)Kn.renderInstances(tr,as,wt.count);else if(vt.isInstancedBufferGeometry){const Bn=vt._maxInstanceCount!==void 0?vt._maxInstanceCount:1/0,bo=Math.min(vt.instanceCount,Bn);Kn.renderInstances(tr,as,bo)}else Kn.render(tr,as)},this.compile=function(ce,ot){function vt(Ke,wt,en){Ke.transparent===!0&&Ke.side===ms&&Ke.forceSinglePass===!1?(Ke.side=Fo,Ke.needsUpdate=!0,Su(Ke,wt,en),Ke.side=mh,Ke.needsUpdate=!0,Su(Ke,wt,en),Ke.side=ms):Su(Ke,wt,en)}_=Lt.get(ce),_.init(),x.push(_),ce.traverseVisible(function(Ke){Ke.isLight&&Ke.layers.test(ot.layers)&&(_.pushLight(Ke),Ke.castShadow&&_.pushShadow(Ke))}),_.setupLights(C._useLegacyLights),ce.traverse(function(Ke){const wt=Ke.material;if(wt)if(Array.isArray(wt))for(let en=0;en<wt.length;en++){const _n=wt[en];vt(_n,ce,Ke)}else vt(wt,ce,Ke)}),x.pop(),_=null};let Vr=null;function oi(ce){Vr&&Vr(ce)}function As(){pa.stop()}function er(){pa.start()}const pa=new uO;pa.setAnimationLoop(oi),typeof self<"u"&&pa.setContext(self),this.setAnimationLoop=function(ce){Vr=ce,Rt.setAnimationLoop(ce),ce===null?pa.stop():pa.start()},Rt.addEventListener("sessionstart",As),Rt.addEventListener("sessionend",er),this.render=function(ce,ot){if(ot!==void 0&&ot.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;ce.matrixWorldAutoUpdate===!0&&ce.updateMatrixWorld(),ot.parent===null&&ot.matrixWorldAutoUpdate===!0&&ot.updateMatrixWorld(),Rt.enabled===!0&&Rt.isPresenting===!0&&(Rt.cameraAutoUpdate===!0&&Rt.updateCamera(ot),ot=Rt.getCamera()),ce.isScene===!0&&ce.onBeforeRender(C,ce,ot,B),_=Lt.get(ce,x.length),_.init(),x.push(_),Ue.multiplyMatrices(ot.projectionMatrix,ot.matrixWorldInverse),$e.setFromProjectionMatrix(Ue),Be=this.localClippingEnabled,X=we.init(this.clippingPlanes,Be),A=Je.get(ce,y.length),A.init(),y.push(A),El(ce,ot,0,C.sortObjects),A.finish(),C.sortObjects===!0&&A.sort(Ce,Me),this.info.render.frame++,X===!0&&we.beginShadows();const vt=_.state.shadowsArray;if(Ie.render(vt,ce,ot),X===!0&&we.endShadows(),this.info.autoReset===!0&&this.info.reset(),de.render(A,ce),_.setupLights(C._useLegacyLights),ot.isArrayCamera){const Ke=ot.cameras;for(let wt=0,en=Ke.length;wt<en;wt++){const _n=Ke[wt];rc(A,ce,_n,_n.viewport)}}else rc(A,ce,ot);B!==null&&(me.updateMultisampleRenderTarget(B),me.updateRenderTargetMipmap(B)),ce.isScene===!0&&ce.onAfterRender(C,ce,ot),jt.resetDefaultState(),M=-1,D=null,x.pop(),x.length>0?_=x[x.length-1]:_=null,y.pop(),y.length>0?A=y[y.length-1]:A=null};function El(ce,ot,vt,Ke){if(ce.visible===!1)return;if(ce.layers.test(ot.layers)){if(ce.isGroup)vt=ce.renderOrder;else if(ce.isLOD)ce.autoUpdate===!0&&ce.update(ot);else if(ce.isLight)_.pushLight(ce),ce.castShadow&&_.pushShadow(ce);else if(ce.isSprite){if(!ce.frustumCulled||$e.intersectsSprite(ce)){Ke&&yt.setFromMatrixPosition(ce.matrixWorld).applyMatrix4(Ue);const _n=Ve.update(ce),fn=ce.material;fn.visible&&A.push(ce,_n,fn,vt,yt.z,null)}}else if((ce.isMesh||ce.isLine||ce.isPoints)&&(!ce.frustumCulled||$e.intersectsObject(ce))){const _n=Ve.update(ce),fn=ce.material;if(Ke&&(ce.boundingSphere!==void 0?(ce.boundingSphere===null&&ce.computeBoundingSphere(),yt.copy(ce.boundingSphere.center)):(_n.boundingSphere===null&&_n.computeBoundingSphere(),yt.copy(_n.boundingSphere.center)),yt.applyMatrix4(ce.matrixWorld).applyMatrix4(Ue)),Array.isArray(fn)){const Tn=_n.groups;for(let Qn=0,xn=Tn.length;Qn<xn;Qn++){const In=Tn[Qn],tr=fn[In.materialIndex];tr&&tr.visible&&A.push(ce,_n,tr,vt,yt.z,In)}}else fn.visible&&A.push(ce,_n,fn,vt,yt.z,null)}}const en=ce.children;for(let _n=0,fn=en.length;_n<fn;_n++)El(en[_n],ot,vt,Ke)}function rc(ce,ot,vt,Ke){const wt=ce.opaque,en=ce.transmissive,_n=ce.transparent;_.setupLightsView(vt),X===!0&&we.setGlobalState(C.clippingPlanes,vt),en.length>0&&Ka(wt,en,ot,vt),Ke&&xe.viewport(F.copy(Ke)),wt.length>0&&Sl(wt,ot,vt),en.length>0&&Sl(en,ot,vt),_n.length>0&&Sl(_n,ot,vt),xe.buffers.depth.setTest(!0),xe.buffers.depth.setMask(!0),xe.buffers.color.setMask(!0),xe.setPolygonOffset(!1)}function Ka(ce,ot,vt,Ke){const wt=he.isWebGL2;mt===null&&(mt=new po(1,1,{generateMipmaps:!0,type:le.has("EXT_color_buffer_half_float")?Kl:ns,minFilter:vu,samples:wt?4:0})),C.getDrawingBufferSize(Tt),wt?mt.setSize(Tt.x,Tt.y):mt.setSize(bx(Tt.x),bx(Tt.y));const en=C.getRenderTarget();C.setRenderTarget(mt),C.getClearColor($),O=C.getClearAlpha(),O<1&&C.setClearColor(16777215,.5),C.clear();const _n=C.toneMapping;C.toneMapping=bf,Sl(ce,vt,Ke),me.updateMultisampleRenderTarget(mt),me.updateRenderTargetMipmap(mt);let fn=!1;for(let Tn=0,Qn=ot.length;Tn<Qn;Tn++){const xn=ot[Tn],In=xn.object,tr=xn.geometry,ki=xn.material,as=xn.group;if(ki.side===ms&&In.layers.test(Ke.layers)){const js=ki.side;ki.side=Fo,ki.needsUpdate=!0,Hc(In,vt,Ke,tr,ki,as),ki.side=js,ki.needsUpdate=!0,fn=!0}}fn===!0&&(me.updateMultisampleRenderTarget(mt),me.updateRenderTargetMipmap(mt)),C.setRenderTarget(en),C.setClearColor($,O),C.toneMapping=_n}function Sl(ce,ot,vt){const Ke=ot.isScene===!0?ot.overrideMaterial:null;for(let wt=0,en=ce.length;wt<en;wt++){const _n=ce[wt],fn=_n.object,Tn=_n.geometry,Qn=Ke===null?_n.material:Ke,xn=_n.group;fn.layers.test(vt.layers)&&Hc(fn,ot,vt,Tn,Qn,xn)}}function Hc(ce,ot,vt,Ke,wt,en){ce.onBeforeRender(C,ot,vt,Ke,wt,en),ce.modelViewMatrix.multiplyMatrices(vt.matrixWorldInverse,ce.matrixWorld),ce.normalMatrix.getNormalMatrix(ce.modelViewMatrix),wt.onBeforeRender(C,ot,vt,Ke,ce,en),wt.transparent===!0&&wt.side===ms&&wt.forceSinglePass===!1?(wt.side=Fo,wt.needsUpdate=!0,C.renderBufferDirect(vt,ot,Ke,wt,ce,en),wt.side=mh,wt.needsUpdate=!0,C.renderBufferDirect(vt,ot,Ke,wt,ce,en),wt.side=ms):C.renderBufferDirect(vt,ot,Ke,wt,ce,en),ce.onAfterRender(C,ot,vt,Ke,wt,en)}function Su(ce,ot,vt){ot.isScene!==!0&&(ot=Ye);const Ke=Ze.get(ce),wt=_.state.lights,en=_.state.shadowsArray,_n=wt.state.version,fn=ct.getParameters(ce,wt.state,en,ot,vt),Tn=ct.getProgramCacheKey(fn);let Qn=Ke.programs;Ke.environment=ce.isMeshStandardMaterial?ot.environment:null,Ke.fog=ot.fog,Ke.envMap=(ce.isMeshStandardMaterial?Se:te).get(ce.envMap||Ke.environment),Qn===void 0&&(ce.addEventListener("dispose",Le),Qn=new Map,Ke.programs=Qn);let xn=Qn.get(Tn);if(xn!==void 0){if(Ke.currentProgram===xn&&Ke.lightsStateVersion===_n)return Hf(ce,fn),xn}else fn.uniforms=ct.getUniforms(ce),ce.onBuild(vt,fn,C),ce.onBeforeCompile(fn,C),xn=ct.acquireProgram(fn,Tn),Qn.set(Tn,xn),Ke.uniforms=fn.uniforms;const In=Ke.uniforms;(!ce.isShaderMaterial&&!ce.isRawShaderMaterial||ce.clipping===!0)&&(In.clippingPlanes=we.uniform),Hf(ce,fn),Ke.needsLights=Ns(ce),Ke.lightsStateVersion=_n,Ke.needsLights&&(In.ambientLightColor.value=wt.state.ambient,In.lightProbe.value=wt.state.probe,In.directionalLights.value=wt.state.directional,In.directionalLightShadows.value=wt.state.directionalShadow,In.spotLights.value=wt.state.spot,In.spotLightShadows.value=wt.state.spotShadow,In.rectAreaLights.value=wt.state.rectArea,In.ltc_1.value=wt.state.rectAreaLTC1,In.ltc_2.value=wt.state.rectAreaLTC2,In.pointLights.value=wt.state.point,In.pointLightShadows.value=wt.state.pointShadow,In.hemisphereLights.value=wt.state.hemi,In.directionalShadowMap.value=wt.state.directionalShadowMap,In.directionalShadowMatrix.value=wt.state.directionalShadowMatrix,In.spotShadowMap.value=wt.state.spotShadowMap,In.spotLightMatrix.value=wt.state.spotLightMatrix,In.spotLightMap.value=wt.state.spotLightMap,In.pointShadowMap.value=wt.state.pointShadowMap,In.pointShadowMatrix.value=wt.state.pointShadowMatrix);const tr=xn.getUniforms(),ki=Ww.seqWithValue(tr.seq,In);return Ke.currentProgram=xn,Ke.uniformsList=ki,xn}function Hf(ce,ot){const vt=Ze.get(ce);vt.outputColorSpace=ot.outputColorSpace,vt.instancing=ot.instancing,vt.skinning=ot.skinning,vt.morphTargets=ot.morphTargets,vt.morphNormals=ot.morphNormals,vt.morphColors=ot.morphColors,vt.morphTargetsCount=ot.morphTargetsCount,vt.numClippingPlanes=ot.numClippingPlanes,vt.numIntersection=ot.numClipIntersection,vt.vertexAlphas=ot.vertexAlphas,vt.vertexTangents=ot.vertexTangents,vt.toneMapping=ot.toneMapping}function Ao(ce,ot,vt,Ke,wt){ot.isScene!==!0&&(ot=Ye),me.resetTextureUnits();const en=ot.fog,_n=Ke.isMeshStandardMaterial?ot.environment:null,fn=B===null?C.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:Nc,Tn=(Ke.isMeshStandardMaterial?Se:te).get(Ke.envMap||_n),Qn=Ke.vertexColors===!0&&!!vt.attributes.color&&vt.attributes.color.itemSize===4,xn=!!vt.attributes.tangent&&(!!Ke.normalMap||Ke.anisotropy>0),In=!!vt.morphAttributes.position,tr=!!vt.morphAttributes.normal,ki=!!vt.morphAttributes.color;let as=bf;Ke.toneMapped&&(B===null||B.isXRRenderTarget===!0)&&(as=C.toneMapping);const js=vt.morphAttributes.position||vt.morphAttributes.normal||vt.morphAttributes.color,Kn=js!==void 0?js.length:0,Bn=Ze.get(Ke),bo=_.state.lights;if(X===!0&&(Be===!0||ce!==D)){const Ws=ce===D&&Ke.id===M;we.setState(Ke,ce,Ws)}let Mr=!1;Ke.version===Bn.__version?(Bn.needsLights&&Bn.lightsStateVersion!==bo.state.version||Bn.outputColorSpace!==fn||wt.isInstancedMesh&&Bn.instancing===!1||!wt.isInstancedMesh&&Bn.instancing===!0||wt.isSkinnedMesh&&Bn.skinning===!1||!wt.isSkinnedMesh&&Bn.skinning===!0||Bn.envMap!==Tn||Ke.fog===!0&&Bn.fog!==en||Bn.numClippingPlanes!==void 0&&(Bn.numClippingPlanes!==we.numPlanes||Bn.numIntersection!==we.numIntersection)||Bn.vertexAlphas!==Qn||Bn.vertexTangents!==xn||Bn.morphTargets!==In||Bn.morphNormals!==tr||Bn.morphColors!==ki||Bn.toneMapping!==as||he.isWebGL2===!0&&Bn.morphTargetsCount!==Kn)&&(Mr=!0):(Mr=!0,Bn.__version=Ke.version);let hr=Bn.currentProgram;Mr===!0&&(hr=Su(Ke,ot,wt));let Yr=!1,sc=!1,Ml=!1;const fr=hr.getUniforms(),Ja=Bn.uniforms;if(xe.useProgram(hr.program)&&(Yr=!0,sc=!0,Ml=!0),Ke.id!==M&&(M=Ke.id,sc=!0),Yr||D!==ce){if(fr.setValue(ue,"projectionMatrix",ce.projectionMatrix),he.logarithmicDepthBuffer&&fr.setValue(ue,"logDepthBufFC",2/(Math.log(ce.far+1)/Math.LN2)),D!==ce&&(D=ce,sc=!0,Ml=!0),Ke.isShaderMaterial||Ke.isMeshPhongMaterial||Ke.isMeshToonMaterial||Ke.isMeshStandardMaterial||Ke.envMap){const Ws=fr.map.cameraPosition;Ws!==void 0&&Ws.setValue(ue,yt.setFromMatrixPosition(ce.matrixWorld))}(Ke.isMeshPhongMaterial||Ke.isMeshToonMaterial||Ke.isMeshLambertMaterial||Ke.isMeshBasicMaterial||Ke.isMeshStandardMaterial||Ke.isShaderMaterial)&&fr.setValue(ue,"isOrthographic",ce.isOrthographicCamera===!0),(Ke.isMeshPhongMaterial||Ke.isMeshToonMaterial||Ke.isMeshLambertMaterial||Ke.isMeshBasicMaterial||Ke.isMeshStandardMaterial||Ke.isShaderMaterial||Ke.isShadowMaterial||wt.isSkinnedMesh)&&fr.setValue(ue,"viewMatrix",ce.matrixWorldInverse)}if(wt.isSkinnedMesh){fr.setOptional(ue,wt,"bindMatrix"),fr.setOptional(ue,wt,"bindMatrixInverse");const Ws=wt.skeleton;Ws&&(he.floatVertexTextures?(Ws.boneTexture===null&&Ws.computeBoneTexture(),fr.setValue(ue,"boneTexture",Ws.boneTexture,me),fr.setValue(ue,"boneTextureSize",Ws.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Tl=vt.morphAttributes;if((Tl.position!==void 0||Tl.normal!==void 0||Tl.color!==void 0&&he.isWebGL2===!0)&&Xe.update(wt,vt,hr),(sc||Bn.receiveShadow!==wt.receiveShadow)&&(Bn.receiveShadow=wt.receiveShadow,fr.setValue(ue,"receiveShadow",wt.receiveShadow)),Ke.isMeshGouraudMaterial&&Ke.envMap!==null&&(Ja.envMap.value=Tn,Ja.flipEnvMap.value=Tn.isCubeTexture&&Tn.isRenderTargetTexture===!1?-1:1),sc&&(fr.setValue(ue,"toneMappingExposure",C.toneMappingExposure),Bn.needsLights&&Mu(Ja,Ml),en&&Ke.fog===!0&&ne.refreshFogUniforms(Ja,en),ne.refreshMaterialUniforms(Ja,Ke,J,W,mt),Ww.upload(ue,Bn.uniformsList,Ja,me)),Ke.isShaderMaterial&&Ke.uniformsNeedUpdate===!0&&(Ww.upload(ue,Bn.uniformsList,Ja,me),Ke.uniformsNeedUpdate=!1),Ke.isSpriteMaterial&&fr.setValue(ue,"center",wt.center),fr.setValue(ue,"modelViewMatrix",wt.modelViewMatrix),fr.setValue(ue,"normalMatrix",wt.normalMatrix),fr.setValue(ue,"modelMatrix",wt.matrixWorld),Ke.isShaderMaterial||Ke.isRawShaderMaterial){const Ws=Ke.uniformsGroups;for(let $c=0,Ih=Ws.length;$c<Ih;$c++)if(he.isWebGL2){const ac=Ws[$c];St.update(ac,hr),St.bind(ac,hr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return hr}function Mu(ce,ot){ce.ambientLightColor.needsUpdate=ot,ce.lightProbe.needsUpdate=ot,ce.directionalLights.needsUpdate=ot,ce.directionalLightShadows.needsUpdate=ot,ce.pointLights.needsUpdate=ot,ce.pointLightShadows.needsUpdate=ot,ce.spotLights.needsUpdate=ot,ce.spotLightShadows.needsUpdate=ot,ce.rectAreaLights.needsUpdate=ot,ce.hemisphereLights.needsUpdate=ot}function Ns(ce){return ce.isMeshLambertMaterial||ce.isMeshToonMaterial||ce.isMeshPhongMaterial||ce.isMeshStandardMaterial||ce.isShadowMaterial||ce.isShaderMaterial&&ce.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(ce,ot,vt){Ze.get(ce.texture).__webglTexture=ot,Ze.get(ce.depthTexture).__webglTexture=vt;const Ke=Ze.get(ce);Ke.__hasExternalTextures=!0,Ke.__hasExternalTextures&&(Ke.__autoAllocateDepthBuffer=vt===void 0,Ke.__autoAllocateDepthBuffer||le.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ke.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ce,ot){const vt=Ze.get(ce);vt.__webglFramebuffer=ot,vt.__useDefaultFramebuffer=ot===void 0},this.setRenderTarget=function(ce,ot=0,vt=0){B=ce,I=ot,P=vt;let Ke=!0,wt=null,en=!1,_n=!1;if(ce){const Tn=Ze.get(ce);Tn.__useDefaultFramebuffer!==void 0?(xe.bindFramebuffer(ue.FRAMEBUFFER,null),Ke=!1):Tn.__webglFramebuffer===void 0?me.setupRenderTarget(ce):Tn.__hasExternalTextures&&me.rebindTextures(ce,Ze.get(ce.texture).__webglTexture,Ze.get(ce.depthTexture).__webglTexture);const Qn=ce.texture;(Qn.isData3DTexture||Qn.isDataArrayTexture||Qn.isCompressedArrayTexture)&&(_n=!0);const xn=Ze.get(ce).__webglFramebuffer;ce.isWebGLCubeRenderTarget?(wt=xn[ot],en=!0):he.isWebGL2&&ce.samples>0&&me.useMultisampledRTT(ce)===!1?wt=Ze.get(ce).__webglMultisampledFramebuffer:wt=xn,F.copy(ce.viewport),z.copy(ce.scissor),U=ce.scissorTest}else F.copy(ge).multiplyScalar(J).floor(),z.copy(ve).multiplyScalar(J).floor(),U=nt;if(xe.bindFramebuffer(ue.FRAMEBUFFER,wt)&&he.drawBuffers&&Ke&&xe.drawBuffers(ce,wt),xe.viewport(F),xe.scissor(z),xe.setScissorTest(U),en){const Tn=Ze.get(ce.texture);ue.framebufferTexture2D(ue.FRAMEBUFFER,ue.COLOR_ATTACHMENT0,ue.TEXTURE_CUBE_MAP_POSITIVE_X+ot,Tn.__webglTexture,vt)}else if(_n){const Tn=Ze.get(ce.texture),Qn=ot||0;ue.framebufferTextureLayer(ue.FRAMEBUFFER,ue.COLOR_ATTACHMENT0,Tn.__webglTexture,vt||0,Qn)}M=-1},this.readRenderTargetPixels=function(ce,ot,vt,Ke,wt,en,_n){if(!(ce&&ce.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let fn=Ze.get(ce).__webglFramebuffer;if(ce.isWebGLCubeRenderTarget&&_n!==void 0&&(fn=fn[_n]),fn){xe.bindFramebuffer(ue.FRAMEBUFFER,fn);try{const Tn=ce.texture,Qn=Tn.format,xn=Tn.type;if(Qn!==Bs&&Ft.convert(Qn)!==ue.getParameter(ue.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const In=xn===Kl&&(le.has("EXT_color_buffer_half_float")||he.isWebGL2&&le.has("EXT_color_buffer_float"));if(xn!==ns&&Ft.convert(xn)!==ue.getParameter(ue.IMPLEMENTATION_COLOR_READ_TYPE)&&!(xn===is&&(he.isWebGL2||le.has("OES_texture_float")||le.has("WEBGL_color_buffer_float")))&&!In){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ot>=0&&ot<=ce.width-Ke&&vt>=0&&vt<=ce.height-wt&&ue.readPixels(ot,vt,Ke,wt,Ft.convert(Qn),Ft.convert(xn),en)}finally{const Tn=B!==null?Ze.get(B).__webglFramebuffer:null;xe.bindFramebuffer(ue.FRAMEBUFFER,Tn)}}},this.copyFramebufferToTexture=function(ce,ot,vt=0){const Ke=Math.pow(2,-vt),wt=Math.floor(ot.image.width*Ke),en=Math.floor(ot.image.height*Ke);me.setTexture2D(ot,0),ue.copyTexSubImage2D(ue.TEXTURE_2D,vt,0,0,ce.x,ce.y,wt,en),xe.unbindTexture()},this.copyTextureToTexture=function(ce,ot,vt,Ke=0){const wt=ot.image.width,en=ot.image.height,_n=Ft.convert(vt.format),fn=Ft.convert(vt.type);me.setTexture2D(vt,0),ue.pixelStorei(ue.UNPACK_FLIP_Y_WEBGL,vt.flipY),ue.pixelStorei(ue.UNPACK_PREMULTIPLY_ALPHA_WEBGL,vt.premultiplyAlpha),ue.pixelStorei(ue.UNPACK_ALIGNMENT,vt.unpackAlignment),ot.isDataTexture?ue.texSubImage2D(ue.TEXTURE_2D,Ke,ce.x,ce.y,wt,en,_n,fn,ot.image.data):ot.isCompressedTexture?ue.compressedTexSubImage2D(ue.TEXTURE_2D,Ke,ce.x,ce.y,ot.mipmaps[0].width,ot.mipmaps[0].height,_n,ot.mipmaps[0].data):ue.texSubImage2D(ue.TEXTURE_2D,Ke,ce.x,ce.y,_n,fn,ot.image),Ke===0&&vt.generateMipmaps&&ue.generateMipmap(ue.TEXTURE_2D),xe.unbindTexture()},this.copyTextureToTexture3D=function(ce,ot,vt,Ke,wt=0){if(C.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const en=ce.max.x-ce.min.x+1,_n=ce.max.y-ce.min.y+1,fn=ce.max.z-ce.min.z+1,Tn=Ft.convert(Ke.format),Qn=Ft.convert(Ke.type);let xn;if(Ke.isData3DTexture)me.setTexture3D(Ke,0),xn=ue.TEXTURE_3D;else if(Ke.isDataArrayTexture)me.setTexture2DArray(Ke,0),xn=ue.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ue.pixelStorei(ue.UNPACK_FLIP_Y_WEBGL,Ke.flipY),ue.pixelStorei(ue.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ke.premultiplyAlpha),ue.pixelStorei(ue.UNPACK_ALIGNMENT,Ke.unpackAlignment);const In=ue.getParameter(ue.UNPACK_ROW_LENGTH),tr=ue.getParameter(ue.UNPACK_IMAGE_HEIGHT),ki=ue.getParameter(ue.UNPACK_SKIP_PIXELS),as=ue.getParameter(ue.UNPACK_SKIP_ROWS),js=ue.getParameter(ue.UNPACK_SKIP_IMAGES),Kn=vt.isCompressedTexture?vt.mipmaps[0]:vt.image;ue.pixelStorei(ue.UNPACK_ROW_LENGTH,Kn.width),ue.pixelStorei(ue.UNPACK_IMAGE_HEIGHT,Kn.height),ue.pixelStorei(ue.UNPACK_SKIP_PIXELS,ce.min.x),ue.pixelStorei(ue.UNPACK_SKIP_ROWS,ce.min.y),ue.pixelStorei(ue.UNPACK_SKIP_IMAGES,ce.min.z),vt.isDataTexture||vt.isData3DTexture?ue.texSubImage3D(xn,wt,ot.x,ot.y,ot.z,en,_n,fn,Tn,Qn,Kn.data):vt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ue.compressedTexSubImage3D(xn,wt,ot.x,ot.y,ot.z,en,_n,fn,Tn,Kn.data)):ue.texSubImage3D(xn,wt,ot.x,ot.y,ot.z,en,_n,fn,Tn,Qn,Kn),ue.pixelStorei(ue.UNPACK_ROW_LENGTH,In),ue.pixelStorei(ue.UNPACK_IMAGE_HEIGHT,tr),ue.pixelStorei(ue.UNPACK_SKIP_PIXELS,ki),ue.pixelStorei(ue.UNPACK_SKIP_ROWS,as),ue.pixelStorei(ue.UNPACK_SKIP_IMAGES,js),wt===0&&Ke.generateMipmaps&&ue.generateMipmap(xn),xe.unbindTexture()},this.initTexture=function(ce){ce.isCubeTexture?me.setTextureCube(ce,0):ce.isData3DTexture?me.setTexture3D(ce,0):ce.isDataArrayTexture||ce.isCompressedArrayTexture?me.setTexture2DArray(ce,0):me.setTexture2D(ce,0),xe.unbindTexture()},this.resetState=function(){I=0,P=0,B=null,xe.reset(),jt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ju}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===kn?lh:b1}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===lh?kn:Nc}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class E5 extends C5{}E5.prototype.isWebGL1Renderer=!0;class S2{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new qt(e),this.density=t}clone(){return new S2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class M2{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new qt(e),this.near=t,this.far=n}clone(){return new M2(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}let cv=class extends Oi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}};class cA{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=y1,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Jl()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Jl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Jl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Io=new fe;class Qd{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Io.fromBufferAttribute(this,t),Io.applyMatrix4(e),this.setXYZ(t,Io.x,Io.y,Io.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Io.fromBufferAttribute(this,t),Io.applyNormalMatrix(e),this.setXYZ(t,Io.x,Io.y,Io.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Io.fromBufferAttribute(this,t),Io.transformDirection(e),this.setXYZ(t,Io.x,Io.y,Io.z);return this}setX(e,t){return this.normalized&&(t=wi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=wi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=wi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=wi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Xl(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Xl(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Xl(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Xl(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=wi(t,this.array),n=wi(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=wi(t,this.array),n=wi(n,this.array),r=wi(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=wi(t,this.array),n=wi(n,this.array),r=wi(r,this.array),s=wi(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Un(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Qd(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class S5 extends xa{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new qt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Um;const u_=new fe,Vm=new fe,Hm=new fe,$m=new Et,h_=new Et,_O=new Wn,Iy=new fe,f_=new fe,Py=new fe,Zk=new Et,K4=new Et,e8=new Et;let AO=class extends Oi{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Um===void 0){Um=new ai;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new cA(t,5);Um.setIndex([0,1,2,0,2,3]),Um.setAttribute("position",new Qd(n,3,0,!1)),Um.setAttribute("uv",new Qd(n,2,3,!1))}this.geometry=Um,this.material=e!==void 0?e:new S5,this.center=new Et(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Vm.setFromMatrixScale(this.matrixWorld),_O.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Hm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Vm.multiplyScalar(-Hm.z);const n=this.material.rotation;let r,s;n!==0&&(s=Math.cos(n),r=Math.sin(n));const a=this.center;ky(Iy.set(-.5,-.5,0),Hm,a,Vm,r,s),ky(f_.set(.5,-.5,0),Hm,a,Vm,r,s),ky(Py.set(.5,.5,0),Hm,a,Vm,r,s),Zk.set(0,0),K4.set(1,0),e8.set(1,1);let o=e.ray.intersectTriangle(Iy,f_,Py,!1,u_);if(o===null&&(ky(f_.set(-.5,.5,0),Hm,a,Vm,r,s),K4.set(0,1),o=e.ray.intersectTriangle(Iy,Py,f_,!1,u_),o===null))return;const l=e.ray.origin.distanceTo(u_);l<e.near||l>e.far||t.push({distance:l,point:u_.clone(),uv:al.getInterpolation(u_,Iy,f_,Py,Zk,K4,e8,new Et),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};function ky(i,e,t,n,r,s){$m.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(h_.x=s*$m.x-r*$m.y,h_.y=r*$m.x+s*$m.y):h_.copy($m),i.copy(e),i.x+=h_.x,i.y+=h_.y,i.applyMatrix4(_O)}const By=new fe,t8=new fe;class bO extends Oi{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){By.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(By);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){By.setFromMatrixPosition(e.matrixWorld),t8.setFromMatrixPosition(this.matrixWorld);const n=By.distanceTo(t8)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),n>=a)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const a=n[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const n8=new fe,i8=new Hi,r8=new Hi,Dte=new fe,s8=new Wn,Gm=new fe,J4=new Vc,a8=new Wn,Z4=new av;class M5 extends cr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Wn,this.bindMatrixInverse=new Wn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new bu),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)Gm.fromBufferAttribute(t,n),this.applyBoneTransform(n,Gm),this.boundingBox.expandByPoint(Gm)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Vc),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)Gm.fromBufferAttribute(t,n),this.applyBoneTransform(n,Gm),this.boundingSphere.expandByPoint(Gm)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),J4.copy(this.boundingSphere),J4.applyMatrix4(r),e.ray.intersectsSphere(J4)!==!1&&(a8.copy(r).invert(),Z4.copy(e.ray).applyMatrix4(a8),!(this.boundingBox!==null&&Z4.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Z4)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Hi,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;i8.fromBufferAttribute(r.attributes.skinIndex,e),r8.fromBufferAttribute(r.attributes.skinWeight,e),n8.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=r8.getComponent(s);if(a!==0){const o=i8.getComponent(s);s8.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(Dte.copy(n8).applyMatrix4(s8),a)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class T2 extends Oi{constructor(){super(),this.isBone=!0,this.type="Bone"}}let b0=class extends rs{constructor(e=null,t=1,n=1,r,s,a,o,l,c=ji,u=ji,h,f){super(null,a,o,l,c,u,r,s,h,f),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};const o8=new Wn,Lte=new Wn;class uA{constructor(e=[],t=[]){this.uuid=Jl(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Wn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Wn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:Lte;o8.multiplyMatrices(o,t[s]),o8.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new uA(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=eO(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new b0(t,e,e,Bs,is);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new T2),this.bones.push(a),this.boneInverses.push(new Wn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const o=n[r];e.boneInverses.push(o.toArray())}return e}}class Dg extends Un{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Qm=new Wn,l8=new Wn,Ry=[],c8=new bu,Ote=new Wn,d_=new cr,p_=new Vc;class T5 extends cr{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Dg(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,Ote)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new bu),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Qm),c8.copy(e.boundingBox).applyMatrix4(Qm),this.boundingBox.union(c8)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Vc),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Qm),p_.copy(e.boundingSphere).applyMatrix4(Qm),this.boundingSphere.union(p_)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(d_.geometry=this.geometry,d_.material=this.material,d_.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),p_.copy(this.boundingSphere),p_.applyMatrix4(n),e.ray.intersectsSphere(p_)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Qm),l8.multiplyMatrices(n,Qm),d_.matrixWorld=l8,d_.raycast(e,Ry);for(let a=0,o=Ry.length;a<o;a++){const l=Ry[a];l.instanceId=s,l.object=this,t.push(l)}Ry.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Dg(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class mo extends xa{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new qt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const u8=new fe,h8=new fe,f8=new Wn,eS=new av,Dy=new Vc;let Sf=class extends Oi{constructor(e=new ai,t=new mo){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)u8.fromBufferAttribute(t,r-1),h8.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=u8.distanceTo(h8);e.setAttribute("lineDistance",new hn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Dy.copy(n.boundingSphere),Dy.applyMatrix4(r),Dy.radius+=s,e.ray.intersectsSphere(Dy)===!1)return;f8.copy(r).invert(),eS.copy(e.ray).applyMatrix4(f8);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=new fe,u=new fe,h=new fe,f=new fe,d=this.isLineSegments?2:1,g=n.index,A=n.attributes.position;if(g!==null){const _=Math.max(0,a.start),y=Math.min(g.count,a.start+a.count);for(let x=_,C=y-1;x<C;x+=d){const S=g.getX(x),I=g.getX(x+1);if(c.fromBufferAttribute(A,S),u.fromBufferAttribute(A,I),eS.distanceSqToSegment(c,u,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const B=e.ray.origin.distanceTo(f);B<e.near||B>e.far||t.push({distance:B,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{const _=Math.max(0,a.start),y=Math.min(A.count,a.start+a.count);for(let x=_,C=y-1;x<C;x+=d){if(c.fromBufferAttribute(A,x),u.fromBufferAttribute(A,x+1),eS.distanceSqToSegment(c,u,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(f);I<e.near||I>e.far||t.push({distance:I,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}};const d8=new fe,p8=new fe;class yu extends Sf{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)d8.fromBufferAttribute(t,r),p8.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+d8.distanceTo(p8);e.setAttribute("lineDistance",new hn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class I5 extends Sf{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class I2 extends xa{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new qt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const m8=new Wn,yM=new av,Ly=new Vc,Oy=new fe;let P5=class extends Oi{constructor(e=new ai,t=new I2){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Ly.copy(n.boundingSphere),Ly.applyMatrix4(r),Ly.radius+=s,e.ray.intersectsSphere(Ly)===!1)return;m8.copy(r).invert(),yM.copy(e.ray).applyMatrix4(m8);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=n.index,h=n.attributes.position;if(c!==null){const f=Math.max(0,a.start),d=Math.min(c.count,a.start+a.count);for(let g=f,v=d;g<v;g++){const A=c.getX(g);Oy.fromBufferAttribute(h,A),g8(Oy,A,l,r,e,t,this)}}else{const f=Math.max(0,a.start),d=Math.min(h.count,a.start+a.count);for(let g=f,v=d;g<v;g++)Oy.fromBufferAttribute(h,g),g8(Oy,g,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}};function g8(i,e,t,n,r,s,a){const o=yM.distanceSqToPoint(i);if(o<t){const l=new fe;yM.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:a})}}class Nte extends rs{constructor(e,t,n,r,s,a,o,l,c){super(e,t,n,r,s,a,o,l,c),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Dr,this.magFilter=s!==void 0?s:Dr,this.generateMipmaps=!1;const u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Fte extends rs{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ji,this.minFilter=ji,this.generateMipmaps=!1,this.needsUpdate=!0}}class hA extends rs{constructor(e,t,n,r,s,a,o,l,c,u,h,f){super(null,a,o,l,c,u,r,s,h,f),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class yO extends hA{constructor(e,t,n,r,s,a){super(e,t,n,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=la}}class wO extends hA{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Cf),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class zte extends rs{constructor(e,t,n,r,s,a,o,l,c){super(e,t,n,r,s,a,o,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class wu{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const s=n.length;let a;t?a=t:a=e*n[s-1];let o=0,l=s-1,c;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),c=n[r]-a,c<0)o=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,n[r]===a)return r/(s-1);const u=n[r],f=n[r+1]-u,d=(a-u)/f;return(r+d)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),l=t||(a.isVector2?new Et:new fe);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new fe,r=[],s=[],a=[],o=new fe,l=new Wn;for(let d=0;d<=e;d++){const g=d/e;r[d]=this.getTangentAt(g,new fe)}s[0]=new fe,a[0]=new fe;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),h=Math.abs(r[0].y),f=Math.abs(r[0].z);u<=c&&(c=u,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),f<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),a[d]=a[d-1].clone(),o.crossVectors(r[d-1],r[d]),o.length()>Number.EPSILON){o.normalize();const g=Math.acos(Ps(r[d-1].dot(r[d]),-1,1));s[d].applyMatrix4(l.makeRotationAxis(o,g))}a[d].crossVectors(r[d],s[d])}if(t===!0){let d=Math.acos(Ps(s[0].dot(s[e]),-1,1));d/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(d=-d);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(r[g],d*g)),a[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class P2 extends wu{constructor(e=0,t=0,n=1,r=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t){const n=t||new Et,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=l-this.aX,d=c-this.aY;l=f*u-d*h+this.aX,c=f*h+d*u+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class xO extends P2{constructor(e,t,n,r,s,a){super(e,t,n,n,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function k5(){let i=0,e=0,t=0,n=0;function r(s,a,o,l){i=s,e=o,t=-3*s+3*a-2*o-l,n=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,c){r(a,o,c*(o-s),c*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,c,u,h){let f=(a-s)/c-(o-s)/(c+u)+(o-a)/u,d=(o-a)/u-(l-a)/(u+h)+(l-o)/h;f*=u,d*=u,r(a,o,f,d)},calc:function(s){const a=s*s,o=a*s;return i+e*s+t*a+n*o}}}const Ny=new fe,tS=new k5,nS=new k5,iS=new k5;class CO extends wu{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new fe){const n=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let c,u;this.closed||o>0?c=r[(o-1)%s]:(Ny.subVectors(r[0],r[1]).add(r[0]),c=Ny);const h=r[o%s],f=r[(o+1)%s];if(this.closed||o+2<s?u=r[(o+2)%s]:(Ny.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=Ny),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(h),d),v=Math.pow(h.distanceToSquared(f),d),A=Math.pow(f.distanceToSquared(u),d);v<1e-4&&(v=1),g<1e-4&&(g=v),A<1e-4&&(A=v),tS.initNonuniformCatmullRom(c.x,h.x,f.x,u.x,g,v,A),nS.initNonuniformCatmullRom(c.y,h.y,f.y,u.y,g,v,A),iS.initNonuniformCatmullRom(c.z,h.z,f.z,u.z,g,v,A)}else this.curveType==="catmullrom"&&(tS.initCatmullRom(c.x,h.x,f.x,u.x,this.tension),nS.initCatmullRom(c.y,h.y,f.y,u.y,this.tension),iS.initCatmullRom(c.z,h.z,f.z,u.z,this.tension));return n.set(tS.calc(l),nS.calc(l),iS.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new fe().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function v8(i,e,t,n,r){const s=(n-e)*.5,a=(r-t)*.5,o=i*i,l=i*o;return(2*t-2*n+s+a)*l+(-3*t+3*n-2*s-a)*o+s*i+t}function Ute(i,e){const t=1-i;return t*t*e}function Vte(i,e){return 2*(1-i)*i*e}function Hte(i,e){return i*i*e}function r1(i,e,t,n){return Ute(i,e)+Vte(i,t)+Hte(i,n)}function $te(i,e){const t=1-i;return t*t*t*e}function Gte(i,e){const t=1-i;return 3*t*t*i*e}function Qte(i,e){return 3*(1-i)*i*i*e}function qte(i,e){return i*i*i*e}function s1(i,e,t,n,r){return $te(i,e)+Gte(i,t)+Qte(i,n)+qte(i,r)}class B5 extends wu{constructor(e=new Et,t=new Et,n=new Et,r=new Et){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Et){const n=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set(s1(e,r.x,s.x,a.x,o.x),s1(e,r.y,s.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class EO extends wu{constructor(e=new fe,t=new fe,n=new fe,r=new fe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new fe){const n=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set(s1(e,r.x,s.x,a.x,o.x),s1(e,r.y,s.y,a.y,o.y),s1(e,r.z,s.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class k2 extends wu{constructor(e=new Et,t=new Et){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Et){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Et){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class SO extends wu{constructor(e=new fe,t=new fe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new fe){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new fe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class R5 extends wu{constructor(e=new Et,t=new Et,n=new Et){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Et){const n=t,r=this.v0,s=this.v1,a=this.v2;return n.set(r1(e,r.x,s.x,a.x),r1(e,r.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class D5 extends wu{constructor(e=new fe,t=new fe,n=new fe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new fe){const n=t,r=this.v0,s=this.v1,a=this.v2;return n.set(r1(e,r.x,s.x,a.x),r1(e,r.y,s.y,a.y),r1(e,r.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class L5 extends wu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Et){const n=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,l=r[a===0?a:a-1],c=r[a],u=r[a>r.length-2?r.length-1:a+1],h=r[a>r.length-3?r.length-1:a+2];return n.set(v8(o,l.x,c.x,u.x,h.x),v8(o,l.y,c.y,u.y,h.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new Et().fromArray(r))}return this}}var O5=Object.freeze({__proto__:null,ArcCurve:xO,CatmullRomCurve3:CO,CubicBezierCurve:B5,CubicBezierCurve3:EO,EllipseCurve:P2,LineCurve:k2,LineCurve3:SO,QuadraticBezierCurve:R5,QuadraticBezierCurve3:D5,SplineCurve:L5});class MO extends wu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new k2(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const a=r[s]-n,o=this.curves[s],l=o.getLength(),c=l===0?0:1-a/l;return o.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let c=0;c<l.length;c++){const u=l[c];n&&n.equals(u)||(t.push(u),n=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new O5[r.type]().fromJSON(r))}return this}}class C1 extends MO{constructor(e){super(),this.type="Path",this.currentPoint=new Et,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new k2(this.currentPoint.clone(),new Et(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new R5(this.currentPoint.clone(),new Et(e,t),new Et(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,a){const o=new B5(this.currentPoint.clone(),new Et(e,t),new Et(n,r),new Et(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new L5(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,n,r,s,a),this}absarc(e,t,n,r,s,a){return this.absellipse(e,t,n,n,r,s,a),this}ellipse(e,t,n,r,s,a,o,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,n,r,s,a,o,l),this}absellipse(e,t,n,r,s,a,o,l){const c=new P2(e,t,n,r,s,a,o,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class fA extends ai{constructor(e=[new Et(0,-.5),new Et(.5,0),new Et(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Ps(r,0,Math.PI*2);const s=[],a=[],o=[],l=[],c=[],u=1/t,h=new fe,f=new Et,d=new fe,g=new fe,v=new fe;let A=0,_=0;for(let y=0;y<=e.length-1;y++)switch(y){case 0:A=e[y+1].x-e[y].x,_=e[y+1].y-e[y].y,d.x=_*1,d.y=-A,d.z=_*0,v.copy(d),d.normalize(),l.push(d.x,d.y,d.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:A=e[y+1].x-e[y].x,_=e[y+1].y-e[y].y,d.x=_*1,d.y=-A,d.z=_*0,g.copy(d),d.x+=v.x,d.y+=v.y,d.z+=v.z,d.normalize(),l.push(d.x,d.y,d.z),v.copy(g)}for(let y=0;y<=t;y++){const x=n+y*u*r,C=Math.sin(x),S=Math.cos(x);for(let I=0;I<=e.length-1;I++){h.x=e[I].x*C,h.y=e[I].y,h.z=e[I].x*S,a.push(h.x,h.y,h.z),f.x=y/t,f.y=I/(e.length-1),o.push(f.x,f.y);const P=l[3*I+0]*C,B=l[3*I+1],M=l[3*I+0]*S;c.push(P,B,M)}}for(let y=0;y<t;y++)for(let x=0;x<e.length-1;x++){const C=x+y*e.length,S=C,I=C+e.length,P=C+e.length+1,B=C+1;s.push(S,I,B),s.push(P,B,I)}this.setIndex(s),this.setAttribute("position",new hn(a,3)),this.setAttribute("uv",new hn(o,2)),this.setAttribute("normal",new hn(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fA(e.points,e.segments,e.phiStart,e.phiLength)}}class B2 extends fA{constructor(e=1,t=1,n=4,r=8){const s=new C1;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new B2(e.radius,e.length,e.capSegments,e.radialSegments)}}class R2 extends ai{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],a=[],o=[],l=[],c=new fe,u=new Et;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let h=0,f=3;h<=t;h++,f+=3){const d=n+h/t*r;c.x=e*Math.cos(d),c.y=e*Math.sin(d),a.push(c.x,c.y,c.z),o.push(0,0,1),u.x=(a[f]/e+1)/2,u.y=(a[f+1]/e+1)/2,l.push(u.x,u.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new hn(a,3)),this.setAttribute("normal",new hn(o,3)),this.setAttribute("uv",new hn(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new R2(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class uv extends ai{constructor(e=1,t=1,n=1,r=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],h=[],f=[],d=[];let g=0;const v=[],A=n/2;let _=0;y(),a===!1&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(u),this.setAttribute("position",new hn(h,3)),this.setAttribute("normal",new hn(f,3)),this.setAttribute("uv",new hn(d,2));function y(){const C=new fe,S=new fe;let I=0;const P=(t-e)/n;for(let B=0;B<=s;B++){const M=[],D=B/s,F=D*(t-e)+e;for(let z=0;z<=r;z++){const U=z/r,$=U*l+o,O=Math.sin($),ie=Math.cos($);S.x=F*O,S.y=-D*n+A,S.z=F*ie,h.push(S.x,S.y,S.z),C.set(O,P,ie).normalize(),f.push(C.x,C.y,C.z),d.push(U,1-D),M.push(g++)}v.push(M)}for(let B=0;B<r;B++)for(let M=0;M<s;M++){const D=v[M][B],F=v[M+1][B],z=v[M+1][B+1],U=v[M][B+1];u.push(D,F,U),u.push(F,z,U),I+=6}c.addGroup(_,I,0),_+=I}function x(C){const S=g,I=new Et,P=new fe;let B=0;const M=C===!0?e:t,D=C===!0?1:-1;for(let z=1;z<=r;z++)h.push(0,A*D,0),f.push(0,D,0),d.push(.5,.5),g++;const F=g;for(let z=0;z<=r;z++){const $=z/r*l+o,O=Math.cos($),ie=Math.sin($);P.x=M*ie,P.y=A*D,P.z=M*O,h.push(P.x,P.y,P.z),f.push(0,D,0),I.x=O*.5+.5,I.y=ie*.5*D+.5,d.push(I.x,I.y),g++}for(let z=0;z<r;z++){const U=S+z,$=F+z;C===!0?u.push($,$+1,U):u.push($+1,$,U),B+=3}c.addGroup(_,B,C===!0?1:2),_+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class D2 extends uv{constructor(e=1,t=1,n=32,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,n,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new D2(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sp extends ai{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],a=[];o(r),c(n),u(),this.setAttribute("position",new hn(s,3)),this.setAttribute("normal",new hn(s.slice(),3)),this.setAttribute("uv",new hn(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(y){const x=new fe,C=new fe,S=new fe;for(let I=0;I<t.length;I+=3)d(t[I+0],x),d(t[I+1],C),d(t[I+2],S),l(x,C,S,y)}function l(y,x,C,S){const I=S+1,P=[];for(let B=0;B<=I;B++){P[B]=[];const M=y.clone().lerp(C,B/I),D=x.clone().lerp(C,B/I),F=I-B;for(let z=0;z<=F;z++)z===0&&B===I?P[B][z]=M:P[B][z]=M.clone().lerp(D,z/F)}for(let B=0;B<I;B++)for(let M=0;M<2*(I-B)-1;M++){const D=Math.floor(M/2);M%2===0?(f(P[B][D+1]),f(P[B+1][D]),f(P[B][D])):(f(P[B][D+1]),f(P[B+1][D+1]),f(P[B+1][D]))}}function c(y){const x=new fe;for(let C=0;C<s.length;C+=3)x.x=s[C+0],x.y=s[C+1],x.z=s[C+2],x.normalize().multiplyScalar(y),s[C+0]=x.x,s[C+1]=x.y,s[C+2]=x.z}function u(){const y=new fe;for(let x=0;x<s.length;x+=3){y.x=s[x+0],y.y=s[x+1],y.z=s[x+2];const C=A(y)/2/Math.PI+.5,S=_(y)/Math.PI+.5;a.push(C,1-S)}g(),h()}function h(){for(let y=0;y<a.length;y+=6){const x=a[y+0],C=a[y+2],S=a[y+4],I=Math.max(x,C,S),P=Math.min(x,C,S);I>.9&&P<.1&&(x<.2&&(a[y+0]+=1),C<.2&&(a[y+2]+=1),S<.2&&(a[y+4]+=1))}}function f(y){s.push(y.x,y.y,y.z)}function d(y,x){const C=y*3;x.x=e[C+0],x.y=e[C+1],x.z=e[C+2]}function g(){const y=new fe,x=new fe,C=new fe,S=new fe,I=new Et,P=new Et,B=new Et;for(let M=0,D=0;M<s.length;M+=9,D+=6){y.set(s[M+0],s[M+1],s[M+2]),x.set(s[M+3],s[M+4],s[M+5]),C.set(s[M+6],s[M+7],s[M+8]),I.set(a[D+0],a[D+1]),P.set(a[D+2],a[D+3]),B.set(a[D+4],a[D+5]),S.copy(y).add(x).add(C).divideScalar(3);const F=A(S);v(I,D+0,y,F),v(P,D+2,x,F),v(B,D+4,C,F)}}function v(y,x,C,S){S<0&&y.x===1&&(a[x]=y.x-1),C.x===0&&C.z===0&&(a[x]=S/2/Math.PI+.5)}function A(y){return Math.atan2(y.z,-y.x)}function _(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sp(e.vertices,e.indices,e.radius,e.details)}}class L2 extends sp{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new L2(e.radius,e.detail)}}const Fy=new fe,zy=new fe,rS=new fe,Uy=new al;class TO extends ai{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(A0*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,c=[0,0,0],u=["a","b","c"],h=new Array(3),f={},d=[];for(let g=0;g<l;g+=3){a?(c[0]=a.getX(g),c[1]=a.getX(g+1),c[2]=a.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:v,b:A,c:_}=Uy;if(v.fromBufferAttribute(o,c[0]),A.fromBufferAttribute(o,c[1]),_.fromBufferAttribute(o,c[2]),Uy.getNormal(rS),h[0]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,h[1]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,h[2]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let y=0;y<3;y++){const x=(y+1)%3,C=h[y],S=h[x],I=Uy[u[y]],P=Uy[u[x]],B=`${C}_${S}`,M=`${S}_${C}`;M in f&&f[M]?(rS.dot(f[M].normal)<=s&&(d.push(I.x,I.y,I.z),d.push(P.x,P.y,P.z)),f[M]=null):B in f||(f[B]={index0:c[y],index1:c[x],normal:rS.clone()})}}for(const g in f)if(f[g]){const{index0:v,index1:A}=f[g];Fy.fromBufferAttribute(o,v),zy.fromBufferAttribute(o,A),d.push(Fy.x,Fy.y,Fy.z),d.push(zy.x,zy.y,zy.z)}this.setAttribute("position",new hn(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class y0 extends C1{constructor(e){super(e),this.uuid=Jl(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new C1().fromJSON(r))}return this}}const jte={triangulate:function(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=IO(i,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,h,f,d;if(n&&(s=Jte(i,e,s,t)),i.length>80*t){o=c=i[0],l=u=i[1];for(let g=t;g<r;g+=t)h=i[g],f=i[g+1],h<o&&(o=h),f<l&&(l=f),h>c&&(c=h),f>u&&(u=f);d=Math.max(c-o,u-l),d=d!==0?32767/d:0}return E1(s,a,t,o,l,d,0),a}};function IO(i,e,t,n,r){let s,a;if(r===cne(i,e,t,n)>0)for(s=e;s<t;s+=n)a=_8(s,i[s],i[s+1],a);else for(s=t-n;s>=e;s-=n)a=_8(s,i[s],i[s+1],a);return a&&O2(a,a.next)&&(M1(a),a=a.next),a}function k0(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(O2(t,t.next)||gs(t.prev,t,t.next)===0)){if(M1(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function E1(i,e,t,n,r,s,a){if(!i)return;!a&&s&&ine(i,n,r,s);let o=i,l,c;for(;i.prev!==i.next;){if(l=i.prev,c=i.next,s?Yte(i,n,r,s):Wte(i)){e.push(l.i/t|0),e.push(i.i/t|0),e.push(c.i/t|0),M1(i),i=c.next,o=c.next;continue}if(i=c,i===o){a?a===1?(i=Xte(k0(i),e,t),E1(i,e,t,n,r,s,2)):a===2&&Kte(i,e,t,n,r,s):E1(k0(i),e,t,n,r,s,1);break}}}function Wte(i){const e=i.prev,t=i,n=i.next;if(gs(e,t,n)>=0)return!1;const r=e.x,s=t.x,a=n.x,o=e.y,l=t.y,c=n.y,u=r<s?r<a?r:a:s<a?s:a,h=o<l?o<c?o:c:l<c?l:c,f=r>s?r>a?r:a:s>a?s:a,d=o>l?o>c?o:c:l>c?l:c;let g=n.next;for(;g!==e;){if(g.x>=u&&g.x<=f&&g.y>=h&&g.y<=d&&pg(r,o,s,l,a,c,g.x,g.y)&&gs(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Yte(i,e,t,n){const r=i.prev,s=i,a=i.next;if(gs(r,s,a)>=0)return!1;const o=r.x,l=s.x,c=a.x,u=r.y,h=s.y,f=a.y,d=o<l?o<c?o:c:l<c?l:c,g=u<h?u<f?u:f:h<f?h:f,v=o>l?o>c?o:c:l>c?l:c,A=u>h?u>f?u:f:h>f?h:f,_=wM(d,g,e,t,n),y=wM(v,A,e,t,n);let x=i.prevZ,C=i.nextZ;for(;x&&x.z>=_&&C&&C.z<=y;){if(x.x>=d&&x.x<=v&&x.y>=g&&x.y<=A&&x!==r&&x!==a&&pg(o,u,l,h,c,f,x.x,x.y)&&gs(x.prev,x,x.next)>=0||(x=x.prevZ,C.x>=d&&C.x<=v&&C.y>=g&&C.y<=A&&C!==r&&C!==a&&pg(o,u,l,h,c,f,C.x,C.y)&&gs(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;x&&x.z>=_;){if(x.x>=d&&x.x<=v&&x.y>=g&&x.y<=A&&x!==r&&x!==a&&pg(o,u,l,h,c,f,x.x,x.y)&&gs(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;C&&C.z<=y;){if(C.x>=d&&C.x<=v&&C.y>=g&&C.y<=A&&C!==r&&C!==a&&pg(o,u,l,h,c,f,C.x,C.y)&&gs(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function Xte(i,e,t){let n=i;do{const r=n.prev,s=n.next.next;!O2(r,s)&&PO(r,n,n.next,s)&&S1(r,s)&&S1(s,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),M1(n),M1(n.next),n=i=s),n=n.next}while(n!==i);return k0(n)}function Kte(i,e,t,n,r,s){let a=i;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&ane(a,o)){let l=kO(a,o);a=k0(a,a.next),l=k0(l,l.next),E1(a,e,t,n,r,s,0),E1(l,e,t,n,r,s,0);return}o=o.next}a=a.next}while(a!==i)}function Jte(i,e,t,n){const r=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;s++)o=e[s]*n,l=s<a-1?e[s+1]*n:i.length,c=IO(i,o,l,n,!1),c===c.next&&(c.steiner=!0),r.push(sne(c));for(r.sort(Zte),s=0;s<r.length;s++)t=ene(r[s],t);return t}function Zte(i,e){return i.x-e.x}function ene(i,e){const t=tne(i,e);if(!t)return e;const n=kO(t,i);return k0(n,n.next),k0(t,t.next)}function tne(i,e){let t=e,n=-1/0,r;const s=i.x,a=i.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const f=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=s&&f>n&&(n=f,r=t.x<t.next.x?t:t.next,f===s))return r}t=t.next}while(t!==e);if(!r)return null;const o=r,l=r.x,c=r.y;let u=1/0,h;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&pg(a<c?s:n,a,l,c,a<c?n:s,a,t.x,t.y)&&(h=Math.abs(a-t.y)/(s-t.x),S1(t,i)&&(h<u||h===u&&(t.x>r.x||t.x===r.x&&nne(r,t)))&&(r=t,u=h)),t=t.next;while(t!==o);return r}function nne(i,e){return gs(i.prev,i,e.prev)<0&&gs(e.next,i,i.next)<0}function ine(i,e,t,n){let r=i;do r.z===0&&(r.z=wM(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,rne(r)}function rne(i){let e,t,n,r,s,a,o,l,c=1;do{for(t=i,i=null,s=null,a=0;t;){for(a++,n=t,o=0,e=0;e<c&&(o++,n=n.nextZ,!!n);e++);for(l=c;o>0||l>0&&n;)o!==0&&(l===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,o--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,c*=2}while(a>1);return i}function wM(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function sne(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function pg(i,e,t,n,r,s,a,o){return(r-a)*(e-o)>=(i-a)*(s-o)&&(i-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(n-o)}function ane(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!one(i,e)&&(S1(i,e)&&S1(e,i)&&lne(i,e)&&(gs(i.prev,i,e.prev)||gs(i,e.prev,e))||O2(i,e)&&gs(i.prev,i,i.next)>0&&gs(e.prev,e,e.next)>0)}function gs(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function O2(i,e){return i.x===e.x&&i.y===e.y}function PO(i,e,t,n){const r=Hy(gs(i,e,t)),s=Hy(gs(i,e,n)),a=Hy(gs(t,n,i)),o=Hy(gs(t,n,e));return!!(r!==s&&a!==o||r===0&&Vy(i,t,e)||s===0&&Vy(i,n,e)||a===0&&Vy(t,i,n)||o===0&&Vy(t,e,n))}function Vy(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Hy(i){return i>0?1:i<0?-1:0}function one(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&PO(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function S1(i,e){return gs(i.prev,i,i.next)<0?gs(i,e,i.next)>=0&&gs(i,i.prev,e)>=0:gs(i,e,i.prev)<0||gs(i,i.next,e)<0}function lne(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function kO(i,e){const t=new xM(i.i,i.x,i.y),n=new xM(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function _8(i,e,t,n){const r=new xM(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function M1(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function xM(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function cne(i,e,t,n){let r=0;for(let s=e,a=t-n;s<t;s+=n)r+=(i[a]-i[s])*(i[s+1]+i[a+1]),a=s;return r}class uh{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return uh.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];A8(e),b8(n,e);let a=e.length;t.forEach(A8);for(let l=0;l<t.length;l++)r.push(a),a+=t[l].length,b8(n,t[l]);const o=jte.triangulate(n,r);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function A8(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function b8(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class N2 extends ai{constructor(e=new y0([new Et(.5,.5),new Et(-.5,.5),new Et(-.5,-.5),new Et(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];a(c)}this.setAttribute("position",new hn(r,3)),this.setAttribute("uv",new hn(s,2)),this.computeVertexNormals();function a(o){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,d=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:d-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,A=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,y=t.UVGenerator!==void 0?t.UVGenerator:une;let x,C=!1,S,I,P,B;_&&(x=_.getSpacedPoints(u),C=!0,f=!1,S=_.computeFrenetFrames(u,!1),I=new fe,P=new fe,B=new fe),f||(A=0,d=0,g=0,v=0);const M=o.extractPoints(c);let D=M.shape;const F=M.holes;if(!uh.isClockWise(D)){D=D.reverse();for(let lt=0,ue=F.length;lt<ue;lt++){const dt=F[lt];uh.isClockWise(dt)&&(F[lt]=dt.reverse())}}const U=uh.triangulateShape(D,F),$=D;for(let lt=0,ue=F.length;lt<ue;lt++){const dt=F[lt];D=D.concat(dt)}function O(lt,ue,dt){return ue||console.error("THREE.ExtrudeGeometry: vec does not exist"),lt.clone().addScaledVector(ue,dt)}const ie=D.length,W=U.length;function J(lt,ue,dt){let le,he,xe;const pt=lt.x-ue.x,Ze=lt.y-ue.y,me=dt.x-lt.x,te=dt.y-lt.y,Se=pt*pt+Ze*Ze,j=pt*te-Ze*me;if(Math.abs(j)>Number.EPSILON){const q=Math.sqrt(Se),Ve=Math.sqrt(me*me+te*te),ct=ue.x-Ze/q,ne=ue.y+pt/q,Je=dt.x-te/Ve,Lt=dt.y+me/Ve,we=((Je-ct)*te-(Lt-ne)*me)/(pt*te-Ze*me);le=ct+pt*we-lt.x,he=ne+Ze*we-lt.y;const Ie=le*le+he*he;if(Ie<=2)return new Et(le,he);xe=Math.sqrt(Ie/2)}else{let q=!1;pt>Number.EPSILON?me>Number.EPSILON&&(q=!0):pt<-Number.EPSILON?me<-Number.EPSILON&&(q=!0):Math.sign(Ze)===Math.sign(te)&&(q=!0),q?(le=-Ze,he=pt,xe=Math.sqrt(Se)):(le=pt,he=Ze,xe=Math.sqrt(Se/2))}return new Et(le/xe,he/xe)}const Ce=[];for(let lt=0,ue=$.length,dt=ue-1,le=lt+1;lt<ue;lt++,dt++,le++)dt===ue&&(dt=0),le===ue&&(le=0),Ce[lt]=J($[lt],$[dt],$[le]);const Me=[];let ge,ve=Ce.concat();for(let lt=0,ue=F.length;lt<ue;lt++){const dt=F[lt];ge=[];for(let le=0,he=dt.length,xe=he-1,pt=le+1;le<he;le++,xe++,pt++)xe===he&&(xe=0),pt===he&&(pt=0),ge[le]=J(dt[le],dt[xe],dt[pt]);Me.push(ge),ve=ve.concat(ge)}for(let lt=0;lt<A;lt++){const ue=lt/A,dt=d*Math.cos(ue*Math.PI/2),le=g*Math.sin(ue*Math.PI/2)+v;for(let he=0,xe=$.length;he<xe;he++){const pt=O($[he],Ce[he],le);mt(pt.x,pt.y,-dt)}for(let he=0,xe=F.length;he<xe;he++){const pt=F[he];ge=Me[he];for(let Ze=0,me=pt.length;Ze<me;Ze++){const te=O(pt[Ze],ge[Ze],le);mt(te.x,te.y,-dt)}}}const nt=g+v;for(let lt=0;lt<ie;lt++){const ue=f?O(D[lt],ve[lt],nt):D[lt];C?(P.copy(S.normals[0]).multiplyScalar(ue.x),I.copy(S.binormals[0]).multiplyScalar(ue.y),B.copy(x[0]).add(P).add(I),mt(B.x,B.y,B.z)):mt(ue.x,ue.y,0)}for(let lt=1;lt<=u;lt++)for(let ue=0;ue<ie;ue++){const dt=f?O(D[ue],ve[ue],nt):D[ue];C?(P.copy(S.normals[lt]).multiplyScalar(dt.x),I.copy(S.binormals[lt]).multiplyScalar(dt.y),B.copy(x[lt]).add(P).add(I),mt(B.x,B.y,B.z)):mt(dt.x,dt.y,h/u*lt)}for(let lt=A-1;lt>=0;lt--){const ue=lt/A,dt=d*Math.cos(ue*Math.PI/2),le=g*Math.sin(ue*Math.PI/2)+v;for(let he=0,xe=$.length;he<xe;he++){const pt=O($[he],Ce[he],le);mt(pt.x,pt.y,h+dt)}for(let he=0,xe=F.length;he<xe;he++){const pt=F[he];ge=Me[he];for(let Ze=0,me=pt.length;Ze<me;Ze++){const te=O(pt[Ze],ge[Ze],le);C?mt(te.x,te.y+x[u-1].y,x[u-1].x+dt):mt(te.x,te.y,h+dt)}}}$e(),X();function $e(){const lt=r.length/3;if(f){let ue=0,dt=ie*ue;for(let le=0;le<W;le++){const he=U[le];Ue(he[2]+dt,he[1]+dt,he[0]+dt)}ue=u+A*2,dt=ie*ue;for(let le=0;le<W;le++){const he=U[le];Ue(he[0]+dt,he[1]+dt,he[2]+dt)}}else{for(let ue=0;ue<W;ue++){const dt=U[ue];Ue(dt[2],dt[1],dt[0])}for(let ue=0;ue<W;ue++){const dt=U[ue];Ue(dt[0]+ie*u,dt[1]+ie*u,dt[2]+ie*u)}}n.addGroup(lt,r.length/3-lt,0)}function X(){const lt=r.length/3;let ue=0;Be($,ue),ue+=$.length;for(let dt=0,le=F.length;dt<le;dt++){const he=F[dt];Be(he,ue),ue+=he.length}n.addGroup(lt,r.length/3-lt,1)}function Be(lt,ue){let dt=lt.length;for(;--dt>=0;){const le=dt;let he=dt-1;he<0&&(he=lt.length-1);for(let xe=0,pt=u+A*2;xe<pt;xe++){const Ze=ie*xe,me=ie*(xe+1),te=ue+le+Ze,Se=ue+he+Ze,j=ue+he+me,q=ue+le+me;Tt(te,Se,j,q)}}}function mt(lt,ue,dt){l.push(lt),l.push(ue),l.push(dt)}function Ue(lt,ue,dt){yt(lt),yt(ue),yt(dt);const le=r.length/3,he=y.generateTopUV(n,r,le-3,le-2,le-1);Ye(he[0]),Ye(he[1]),Ye(he[2])}function Tt(lt,ue,dt,le){yt(lt),yt(ue),yt(le),yt(ue),yt(dt),yt(le);const he=r.length/3,xe=y.generateSideWallUV(n,r,he-6,he-3,he-2,he-1);Ye(xe[0]),Ye(xe[1]),Ye(xe[3]),Ye(xe[1]),Ye(xe[2]),Ye(xe[3])}function yt(lt){r.push(l[lt*3+0]),r.push(l[lt*3+1]),r.push(l[lt*3+2])}function Ye(lt){s.push(lt.x),s.push(lt.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return hne(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];n.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new O5[r.type]().fromJSON(r)),new N2(n,e.options)}}const une={generateTopUV:function(i,e,t,n,r){const s=e[t*3],a=e[t*3+1],o=e[n*3],l=e[n*3+1],c=e[r*3],u=e[r*3+1];return[new Et(s,a),new Et(o,l),new Et(c,u)]},generateSideWallUV:function(i,e,t,n,r,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],c=e[n*3],u=e[n*3+1],h=e[n*3+2],f=e[r*3],d=e[r*3+1],g=e[r*3+2],v=e[s*3],A=e[s*3+1],_=e[s*3+2];return Math.abs(o-u)<Math.abs(a-c)?[new Et(a,1-l),new Et(c,1-h),new Et(f,1-g),new Et(v,1-_)]:[new Et(o,1-l),new Et(u,1-h),new Et(d,1-g),new Et(A,1-_)]}};function hne(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class F2 extends sp{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new F2(e.radius,e.detail)}}class dA extends sp{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new dA(e.radius,e.detail)}}class z2 extends ai{constructor(e=.5,t=1,n=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:a},n=Math.max(3,n),r=Math.max(1,r);const o=[],l=[],c=[],u=[];let h=e;const f=(t-e)/r,d=new fe,g=new Et;for(let v=0;v<=r;v++){for(let A=0;A<=n;A++){const _=s+A/n*a;d.x=h*Math.cos(_),d.y=h*Math.sin(_),l.push(d.x,d.y,d.z),c.push(0,0,1),g.x=(d.x/t+1)/2,g.y=(d.y/t+1)/2,u.push(g.x,g.y)}h+=f}for(let v=0;v<r;v++){const A=v*(n+1);for(let _=0;_<n;_++){const y=_+A,x=y,C=y+n+1,S=y+n+2,I=y+1;o.push(x,C,I),o.push(C,S,I)}}this.setIndex(o),this.setAttribute("position",new hn(l,3)),this.setAttribute("normal",new hn(c,3)),this.setAttribute("uv",new hn(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new z2(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class U2 extends ai{constructor(e=new y0([new Et(0,.5),new Et(-.5,-.5),new Et(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(o,l,u),o+=l,l=0;this.setIndex(n),this.setAttribute("position",new hn(r,3)),this.setAttribute("normal",new hn(s,3)),this.setAttribute("uv",new hn(a,2));function c(u){const h=r.length/3,f=u.extractPoints(t);let d=f.shape;const g=f.holes;uh.isClockWise(d)===!1&&(d=d.reverse());for(let A=0,_=g.length;A<_;A++){const y=g[A];uh.isClockWise(y)===!0&&(g[A]=y.reverse())}const v=uh.triangulateShape(d,g);for(let A=0,_=g.length;A<_;A++){const y=g[A];d=d.concat(y)}for(let A=0,_=d.length;A<_;A++){const y=d[A];r.push(y.x,y.y,0),s.push(0,0,1),a.push(y.x,y.y)}for(let A=0,_=v.length;A<_;A++){const y=v[A],x=y[0]+h,C=y[1]+h,S=y[2]+h;n.push(x,C,S),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return fne(t,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];n.push(a)}return new U2(n,e.curveSegments)}}function fne(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}class pA extends ai{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(a+o,Math.PI);let c=0;const u=[],h=new fe,f=new fe,d=[],g=[],v=[],A=[];for(let _=0;_<=n;_++){const y=[],x=_/n;let C=0;_===0&&a===0?C=.5/t:_===n&&l===Math.PI&&(C=-.5/t);for(let S=0;S<=t;S++){const I=S/t;h.x=-e*Math.cos(r+I*s)*Math.sin(a+x*o),h.y=e*Math.cos(a+x*o),h.z=e*Math.sin(r+I*s)*Math.sin(a+x*o),g.push(h.x,h.y,h.z),f.copy(h).normalize(),v.push(f.x,f.y,f.z),A.push(I+C,1-x),y.push(c++)}u.push(y)}for(let _=0;_<n;_++)for(let y=0;y<t;y++){const x=u[_][y+1],C=u[_][y],S=u[_+1][y],I=u[_+1][y+1];(_!==0||a>0)&&d.push(x,C,I),(_!==n-1||l<Math.PI)&&d.push(C,S,I)}this.setIndex(d),this.setAttribute("position",new hn(g,3)),this.setAttribute("normal",new hn(v,3)),this.setAttribute("uv",new hn(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pA(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class V2 extends sp{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new V2(e.radius,e.detail)}}class H2 extends ai{constructor(e=1,t=.4,n=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const a=[],o=[],l=[],c=[],u=new fe,h=new fe,f=new fe;for(let d=0;d<=n;d++)for(let g=0;g<=r;g++){const v=g/r*s,A=d/n*Math.PI*2;h.x=(e+t*Math.cos(A))*Math.cos(v),h.y=(e+t*Math.cos(A))*Math.sin(v),h.z=t*Math.sin(A),o.push(h.x,h.y,h.z),u.x=e*Math.cos(v),u.y=e*Math.sin(v),f.subVectors(h,u).normalize(),l.push(f.x,f.y,f.z),c.push(g/r),c.push(d/n)}for(let d=1;d<=n;d++)for(let g=1;g<=r;g++){const v=(r+1)*d+g-1,A=(r+1)*(d-1)+g-1,_=(r+1)*(d-1)+g,y=(r+1)*d+g;a.push(v,A,y),a.push(A,_,y)}this.setIndex(a),this.setAttribute("position",new hn(o,3)),this.setAttribute("normal",new hn(l,3)),this.setAttribute("uv",new hn(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new H2(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class $2 extends ai{constructor(e=1,t=.4,n=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:a},n=Math.floor(n),r=Math.floor(r);const o=[],l=[],c=[],u=[],h=new fe,f=new fe,d=new fe,g=new fe,v=new fe,A=new fe,_=new fe;for(let x=0;x<=n;++x){const C=x/n*s*Math.PI*2;y(C,s,a,e,d),y(C+.01,s,a,e,g),A.subVectors(g,d),_.addVectors(g,d),v.crossVectors(A,_),_.crossVectors(v,A),v.normalize(),_.normalize();for(let S=0;S<=r;++S){const I=S/r*Math.PI*2,P=-t*Math.cos(I),B=t*Math.sin(I);h.x=d.x+(P*_.x+B*v.x),h.y=d.y+(P*_.y+B*v.y),h.z=d.z+(P*_.z+B*v.z),l.push(h.x,h.y,h.z),f.subVectors(h,d).normalize(),c.push(f.x,f.y,f.z),u.push(x/n),u.push(S/r)}}for(let x=1;x<=n;x++)for(let C=1;C<=r;C++){const S=(r+1)*(x-1)+(C-1),I=(r+1)*x+(C-1),P=(r+1)*x+C,B=(r+1)*(x-1)+C;o.push(S,I,B),o.push(I,P,B)}this.setIndex(o),this.setAttribute("position",new hn(l,3)),this.setAttribute("normal",new hn(c,3)),this.setAttribute("uv",new hn(u,2));function y(x,C,S,I,P){const B=Math.cos(x),M=Math.sin(x),D=S/C*x,F=Math.cos(D);P.x=I*(2+F)*.5*B,P.y=I*(2+F)*M*.5,P.z=I*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $2(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class G2 extends ai{constructor(e=new D5(new fe(-1,-1,0),new fe(-1,1,0),new fe(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new fe,l=new fe,c=new Et;let u=new fe;const h=[],f=[],d=[],g=[];v(),this.setIndex(g),this.setAttribute("position",new hn(h,3)),this.setAttribute("normal",new hn(f,3)),this.setAttribute("uv",new hn(d,2));function v(){for(let x=0;x<t;x++)A(x);A(s===!1?t:0),y(),_()}function A(x){u=e.getPointAt(x/t,u);const C=a.normals[x],S=a.binormals[x];for(let I=0;I<=r;I++){const P=I/r*Math.PI*2,B=Math.sin(P),M=-Math.cos(P);l.x=M*C.x+B*S.x,l.y=M*C.y+B*S.y,l.z=M*C.z+B*S.z,l.normalize(),f.push(l.x,l.y,l.z),o.x=u.x+n*l.x,o.y=u.y+n*l.y,o.z=u.z+n*l.z,h.push(o.x,o.y,o.z)}}function _(){for(let x=1;x<=t;x++)for(let C=1;C<=r;C++){const S=(r+1)*(x-1)+(C-1),I=(r+1)*x+(C-1),P=(r+1)*x+C,B=(r+1)*(x-1)+C;g.push(S,I,B),g.push(I,P,B)}}function y(){for(let x=0;x<=t;x++)for(let C=0;C<=r;C++)c.x=x/t,c.y=C/r,d.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new G2(new O5[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class BO extends ai{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new fe,s=new fe;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const h=l[c],f=h.start,d=h.count;for(let g=f,v=f+d;g<v;g+=3)for(let A=0;A<3;A++){const _=o.getX(g+A),y=o.getX(g+(A+1)%3);r.fromBufferAttribute(a,_),s.fromBufferAttribute(a,y),y8(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let c=0;c<3;c++){const u=3*o+c,h=3*o+(c+1)%3;r.fromBufferAttribute(a,u),s.fromBufferAttribute(a,h),y8(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new hn(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function y8(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var w8=Object.freeze({__proto__:null,BoxGeometry:$0,CapsuleGeometry:B2,CircleGeometry:R2,ConeGeometry:D2,CylinderGeometry:uv,DodecahedronGeometry:L2,EdgesGeometry:TO,ExtrudeGeometry:N2,IcosahedronGeometry:F2,LatheGeometry:fA,OctahedronGeometry:dA,PlaneGeometry:ov,PolyhedronGeometry:sp,RingGeometry:z2,ShapeGeometry:U2,SphereGeometry:pA,TetrahedronGeometry:V2,TorusGeometry:H2,TorusKnotGeometry:$2,TubeGeometry:G2,WireframeGeometry:BO});class RO extends xa{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new qt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class N5 extends _l{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class mA extends xa{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new qt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rp,this.normalScale=new Et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wh extends mA{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Et(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ps(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new qt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new qt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new qt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class DO extends xa{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new qt(16777215),this.specular=new qt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rp,this.normalScale=new Et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=iA,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class LO extends xa{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new qt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rp,this.normalScale=new Et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class OO extends xa{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rp,this.normalScale=new Et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class NO extends xa{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new qt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rp,this.normalScale=new Et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=iA,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class FO extends xa{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new qt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rp,this.normalScale=new Et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zO extends mo{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Cc(i,e,t){return F5(i)?new i.constructor(i.subarray(e,t!==void 0?t:i.length)):i.slice(e,t)}function g0(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function F5(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function UO(i){function e(r,s){return i[r]-i[s]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function CM(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,a=0;a!==n;++s){const o=t[s]*e;for(let l=0;l!==e;++l)r[a++]=i[o+l]}return r}function z5(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let a=s[n];if(a!==void 0)if(Array.isArray(a))do a=s[n],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=i[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[n],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do a=s[n],a!==void 0&&(e.push(s.time),t.push(a)),s=i[r++];while(s!==void 0)}function dne(i,e,t,n,r=30){const s=i.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),h=[],f=[];for(let d=0;d<c.times.length;++d){const g=c.times[d]*r;if(!(g<t||g>=n)){h.push(c.times[d]);for(let v=0;v<u;++v)f.push(c.values[d*u+v])}}h.length!==0&&(c.times=g0(h,c.times.constructor),c.values=g0(f,c.values.constructor),a.push(c))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s}function pne(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,s=e/n;for(let a=0;a<r;++a){const o=t.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const c=i.tracks.find(function(_){return _.name===o.name&&_.ValueTypeName===l});if(c===void 0)continue;let u=0;const h=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let f=0;const d=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);const g=o.times.length-1;let v;if(s<=o.times[0]){const _=u,y=h-u;v=Cc(o.values,_,y)}else if(s>=o.times[g]){const _=g*h+u,y=_+h-u;v=Cc(o.values,_,y)}else{const _=o.createInterpolant(),y=u,x=h-u;_.evaluate(s),v=Cc(_.resultBuffer,y,x)}l==="quaternion"&&new ca().fromArray(v).normalize().conjugate().toArray(v);const A=c.times.length;for(let _=0;_<A;++_){const y=_*d+f;if(l==="quaternion")ca.multiplyQuaternionsFlat(c.values,y,v,0,c.values,y);else{const x=d-f*2;for(let C=0;C<x;++C)c.values[y+C]-=v[C]}}}return i.blendMode=d5,i}const mne={arraySlice:Cc,convertArray:g0,isTypedArray:F5,getKeyframeOrder:UO,sortedArray:CM,flattenJSON:z5,subclip:dne,makeClipAdditive:pne};class hv{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=n+2;;){if(r===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(s=r,r=t[++n],e<r)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(n=2,s=o);for(let l=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break t}a=n,n=0;break n}break e}for(;n<a;){const o=n+a>>>1;e<t[o]?a=o:n=o+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=n[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class VO extends hv{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:d0,endingEnd:d0}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,a=e+1,o=r[s],l=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case p0:s=e,o=2*t-n;break;case A1:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=n}if(l===void 0)switch(this.getSettings_().endingEnd){case p0:a=e,l=2*n-t;break;case A1:a=1,l=n+r[1]-r[0];break;default:a=e-1,l=t}const c=(n-t)*.5,u=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(l-n),this._offsetPrev=s*u,this._offsetNext=a*u}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,d=this._weightNext,g=(n-t)/(r-t),v=g*g,A=v*g,_=-f*A+2*f*v-f*g,y=(1+f)*A+(-1.5-2*f)*v+(-.5+f)*g+1,x=(-1-d)*A+(1.5+d)*v+.5*g,C=d*A-d*v;for(let S=0;S!==o;++S)s[S]=_*a[u+S]+y*a[c+S]+x*a[l+S]+C*a[h+S];return s}}class U5 extends hv{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=(n-t)/(r-t),h=1-u;for(let f=0;f!==o;++f)s[f]=a[c+f]*h+a[l+f]*u;return s}}class HO extends hv{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class xu{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=g0(t,this.TimeBufferType),this.values=g0(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:g0(e.times,Array),values:g0(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new HO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new U5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new VO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case kg:t=this.InterpolantFactoryMethodDiscrete;break;case P0:t=this.InterpolantFactoryMethodLinear;break;case qw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return kg;case this.InterpolantFactoryMethodLinear:return P0;case this.InterpolantFactoryMethodSmooth:return qw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,a=r-1;for(;s!==r&&n[s]<e;)++s;for(;a!==-1&&n[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=Cc(n,s,a),this.values=Cc(this.values,s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=n[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(r!==void 0&&F5(r))for(let o=0,l=r.length;o!==l;++o){const c=r[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=Cc(this.times),t=Cc(this.values),n=this.getValueSize(),r=this.getInterpolation()===qw,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const c=e[o],u=e[o+1];if(c!==u&&(o!==1||c!==e[0]))if(r)l=!0;else{const h=o*n,f=h-n,d=h+n;for(let g=0;g!==n;++g){const v=t[h+g];if(v!==t[f+g]||v!==t[d+g]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const h=o*n,f=a*n;for(let d=0;d!==n;++d)t[f+d]=t[h+d]}++a}}if(s>0){e[a]=e[s];for(let o=s*n,l=a*n,c=0;c!==n;++c)t[l+c]=t[o+c];++a}return a!==e.length?(this.times=Cc(e,0,a),this.values=Cc(t,0,a*n)):(this.times=e,this.values=t),this}clone(){const e=Cc(this.times,0),t=Cc(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}xu.prototype.TimeBufferType=Float32Array;xu.prototype.ValueBufferType=Float32Array;xu.prototype.DefaultInterpolation=P0;class G0 extends xu{}G0.prototype.ValueTypeName="bool";G0.prototype.ValueBufferType=Array;G0.prototype.DefaultInterpolation=kg;G0.prototype.InterpolantFactoryMethodLinear=void 0;G0.prototype.InterpolantFactoryMethodSmooth=void 0;class V5 extends xu{}V5.prototype.ValueTypeName="color";class B0 extends xu{}B0.prototype.ValueTypeName="number";class $O extends hv{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(n-t)/(r-t);let c=e*o;for(let u=c+o;c!==u;c+=4)ca.slerpFlat(s,0,a,c-o,a,c,l);return s}}class qd extends xu{InterpolantFactoryMethodLinear(e){return new $O(this.times,this.values,this.getValueSize(),e)}}qd.prototype.ValueTypeName="quaternion";qd.prototype.DefaultInterpolation=P0;qd.prototype.InterpolantFactoryMethodSmooth=void 0;class Q0 extends xu{}Q0.prototype.ValueTypeName="string";Q0.prototype.ValueBufferType=Array;Q0.prototype.DefaultInterpolation=kg;Q0.prototype.InterpolantFactoryMethodLinear=void 0;Q0.prototype.InterpolantFactoryMethodSmooth=void 0;class Lg extends xu{}Lg.prototype.ValueTypeName="vector";class Og{constructor(e,t=-1,n,r=A2){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Jl(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let a=0,o=n.length;a!==o;++a)t.push(vne(n[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=n.length;s!==a;++s)t.push(xu.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],c=[];l.push((o+s-1)%s,o,(o+1)%s),c.push(0,1,0);const u=UO(l);l=CM(l,1,u),c=CM(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),a.push(new B0(".morphTargetInfluences["+t[o].name+"]",l,c).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],u=c.name.match(s);if(u&&u.length>1){const h=u[1];let f=r[h];f||(r[h]=f=[]),f.push(c)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(h,f,d,g,v){if(d.length!==0){const A=[],_=[];z5(d,A,_,g),A.length!==0&&v.push(new h(f,A,_))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const f=c[h].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const d={};let g;for(g=0;g<f.length;g++)if(f[g].morphTargets)for(let v=0;v<f[g].morphTargets.length;v++)d[f[g].morphTargets[v]]=-1;for(const v in d){const A=[],_=[];for(let y=0;y!==f[g].morphTargets.length;++y){const x=f[g];A.push(x.time),_.push(x.morphTarget===v?1:0)}r.push(new B0(".morphTargetInfluence["+v+"]",A,_))}l=d.length*a}else{const d=".bones["+t[h].name+"]";n(Lg,d+".position",f,"pos",r),n(qd,d+".quaternion",f,"rot",r),n(Lg,d+".scale",f,"scl",r)}}return r.length===0?null:new this(s,l,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function gne(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return B0;case"vector":case"vector2":case"vector3":case"vector4":return Lg;case"color":return V5;case"quaternion":return qd;case"bool":case"boolean":return G0;case"string":return Q0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function vne(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=gne(i.type);if(i.times===void 0){const t=[],n=[];z5(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const R0={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class H5{constructor(e,t,n){const r=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(u){o++,s===!1&&r.onStart!==void 0&&r.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,r.onProgress!==void 0&&r.onProgress(u,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,f=c.length;h<f;h+=2){const d=c[h],g=c[h+1];if(d.global&&(d.lastIndex=0),d.test(u))return g}return null}}}const GO=new H5;class Ya{constructor(e){this.manager=e!==void 0?e:GO,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ya.DEFAULT_MATERIAL_NAME="__DEFAULT";const tf={};class _ne extends Error{constructor(e,t){super(e),this.response=t}}class uo extends Ya{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=R0.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(tf[e]!==void 0){tf[e].push({onLoad:t,onProgress:n,onError:r});return}tf[e]=[],tf[e].push({onLoad:t,onProgress:n,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=tf[e],h=c.body.getReader(),f=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),d=f?parseInt(f):0,g=d!==0;let v=0;const A=new ReadableStream({start(_){y();function y(){h.read().then(({done:x,value:C})=>{if(x)_.close();else{v+=C.byteLength;const S=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:d});for(let I=0,P=u.length;I<P;I++){const B=u[I];B.onProgress&&B.onProgress(S)}_.enqueue(C),y()}})}}});return new Response(A)}else throw new _ne(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,o));case"json":return c.json();default:if(o===void 0)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(o),f=h&&h[1]?h[1].toLowerCase():void 0,d=new TextDecoder(f);return c.arrayBuffer().then(g=>d.decode(g))}}}).then(c=>{R0.add(e,c);const u=tf[e];delete tf[e];for(let h=0,f=u.length;h<f;h++){const d=u[h];d.onLoad&&d.onLoad(c)}}).catch(c=>{const u=tf[e];if(u===void 0)throw this.manager.itemError(e),c;delete tf[e];for(let h=0,f=u.length;h<f;h++){const d=u[h];d.onError&&d.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Ane extends Ya{constructor(e){super(e)}load(e,t,n,r){const s=this,a=new uo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=Og.parse(e[n]);t.push(r)}return t}}class bne extends Ya{constructor(e){super(e)}load(e,t,n,r){const s=this,a=[],o=new hA,l=new uo(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(h){l.load(e[h],function(f){const d=s.parse(f,!0);a[h]={width:d.width,height:d.height,format:d.format,mipmaps:d.mipmaps},c+=1,c===6&&(d.mipmapCount===1&&(o.minFilter=Dr),o.image=a,o.format=d.format,o.needsUpdate=!0,t&&t(o))},n,r)}if(Array.isArray(e))for(let h=0,f=e.length;h<f;++h)u(h);else l.load(e,function(h){const f=s.parse(h,!0);if(f.isCubemap){const d=f.mipmaps.length/f.mipmapCount;for(let g=0;g<d;g++){a[g]={mipmaps:[]};for(let v=0;v<f.mipmapCount;v++)a[g].mipmaps.push(f.mipmaps[g*f.mipmapCount+v]),a[g].format=f.format,a[g].width=f.width,a[g].height=f.height}o.image=a}else o.image.width=f.width,o.image.height=f.height,o.mipmaps=f.mipmaps;f.mipmapCount===1&&(o.minFilter=Dr),o.format=f.format,o.needsUpdate=!0,t&&t(o)},n,r);return o}}class T1 extends Ya{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=R0.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=x1("img");function l(){u(),R0.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){u(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class yne extends Ya{constructor(e){super(e)}load(e,t,n,r){const s=new lA;s.colorSpace=kn;const a=new T1(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(c){a.load(e[c],function(u){s.images[c]=u,o++,o===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class wne extends Ya{constructor(e){super(e)}load(e,t,n,r){const s=this,a=new b0,o=new uo(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:la,a.wrapT=c.wrapT!==void 0?c.wrapT:la,a.magFilter=c.magFilter!==void 0?c.magFilter:Dr,a.minFilter=c.minFilter!==void 0?c.minFilter:Dr,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?a.colorSpace=c.colorSpace:c.encoding!==void 0&&(a.encoding=c.encoding),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=vu),c.mipmapCount===1&&(a.minFilter=Dr),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,t&&t(a,c))},n,r),a}}class $5 extends Ya{constructor(e){super(e)}load(e,t,n,r){const s=new rs,a=new T1(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}class ap extends Oi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new qt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class QO extends ap{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Oi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new qt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const sS=new Wn,x8=new fe,C8=new fe;class G5{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Et(512,512),this.map=null,this.mapPass=null,this.matrix=new Wn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new C2,this._frameExtents=new Et(1,1),this._viewportCount=1,this._viewports=[new Hi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;x8.setFromMatrixPosition(e.matrixWorld),t.position.copy(x8),C8.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(C8),t.updateMatrixWorld(),sS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sS),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(sS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class xne extends G5{constructor(){super(new yr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=Bg*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Q5 extends ap{constructor(e,t,n=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Oi.DEFAULT_UP),this.updateMatrix(),this.target=new Oi,this.distance=n,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new xne}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const E8=new Wn,m_=new fe,aS=new fe;class Cne extends G5{constructor(){super(new yr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Et(4,2),this._viewportCount=6,this._viewports=[new Hi(2,1,1,1),new Hi(0,1,1,1),new Hi(3,1,1,1),new Hi(1,1,1,1),new Hi(3,0,1,1),new Hi(1,0,1,1)],this._cubeDirections=[new fe(1,0,0),new fe(-1,0,0),new fe(0,0,1),new fe(0,0,-1),new fe(0,1,0),new fe(0,-1,0)],this._cubeUps=[new fe(0,1,0),new fe(0,1,0),new fe(0,1,0),new fe(0,1,0),new fe(0,0,1),new fe(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),m_.setFromMatrixPosition(e.matrixWorld),n.position.copy(m_),aS.copy(n.position),aS.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(aS),n.updateMatrixWorld(),r.makeTranslation(-m_.x,-m_.y,-m_.z),E8.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(E8)}}class q5 extends ap{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Cne}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Ene extends G5{constructor(){super(new yh(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class j5 extends ap{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Oi.DEFAULT_UP),this.updateMatrix(),this.target=new Oi,this.shadow=new Ene}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class qO extends ap{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class jO extends ap{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class WO{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new fe)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],1.092548*(n*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(n*s)),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*n),t.addScaledVector(a[4],2*.429043*n*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*n*s),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class Q2 extends ap{constructor(e=new WO,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class q2 extends Ya{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,a=new uo(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=q2.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new qt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=n(a.value);break;case"c":r.uniforms[s].value=new qt().setHex(a.value);break;case"v2":r.uniforms[s].value=new Et().fromArray(a.value);break;case"v3":r.uniforms[s].value=new fe().fromArray(a.value);break;case"v4":r.uniforms[s].value=new Hi().fromArray(a.value);break;case"m3":r.uniforms[s].value=new Ei().fromArray(a.value);break;case"m4":r.uniforms[s].value=new Wn().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Et().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Et().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:RO,SpriteMaterial:S5,RawShaderMaterial:N5,ShaderMaterial:_l,PointsMaterial:I2,MeshPhysicalMaterial:wh,MeshStandardMaterial:mA,MeshPhongMaterial:DO,MeshToonMaterial:LO,MeshNormalMaterial:OO,MeshLambertMaterial:NO,MeshDepthMaterial:w5,MeshDistanceMaterial:x5,MeshBasicMaterial:Lo,MeshMatcapMaterial:FO,LineDashedMaterial:zO,LineBasicMaterial:mo,Material:xa};return new t[e]}}class Ng{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class YO extends ai{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class XO extends Ya{constructor(e){super(e)}load(e,t,n,r){const s=this,a=new uo(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(d,g){if(t[g]!==void 0)return t[g];const A=d.interleavedBuffers[g],_=s(d,A.buffer),y=fg(A.type,_),x=new cA(y,A.stride);return x.uuid=A.uuid,t[g]=x,x}function s(d,g){if(n[g]!==void 0)return n[g];const A=d.arrayBuffers[g],_=new Uint32Array(A).buffer;return n[g]=_,_}const a=e.isInstancedBufferGeometry?new YO:new ai,o=e.data.index;if(o!==void 0){const d=fg(o.type,o.array);a.setIndex(new Un(d,1))}const l=e.data.attributes;for(const d in l){const g=l[d];let v;if(g.isInterleavedBufferAttribute){const A=r(e.data,g.data);v=new Qd(A,g.itemSize,g.offset,g.normalized)}else{const A=fg(g.type,g.array),_=g.isInstancedBufferAttribute?Dg:Un;v=new _(A,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),g.usage!==void 0&&v.setUsage(g.usage),g.updateRange!==void 0&&(v.updateRange.offset=g.updateRange.offset,v.updateRange.count=g.updateRange.count),a.setAttribute(d,v)}const c=e.data.morphAttributes;if(c)for(const d in c){const g=c[d],v=[];for(let A=0,_=g.length;A<_;A++){const y=g[A];let x;if(y.isInterleavedBufferAttribute){const C=r(e.data,y.data);x=new Qd(C,y.itemSize,y.offset,y.normalized)}else{const C=fg(y.type,y.array);x=new Un(C,y.itemSize,y.normalized)}y.name!==void 0&&(x.name=y.name),v.push(x)}a.morphAttributes[d]=v}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let d=0,g=h.length;d!==g;++d){const v=h[d];a.addGroup(v.start,v.count,v.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const d=new fe;f.center!==void 0&&d.fromArray(f.center),a.boundingSphere=new Vc(d,f.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class Sne extends Ya{constructor(e){super(e)}load(e,t,n,r){const s=this,a=this.path===""?Ng.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new uo(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},n,r)}async loadAsync(e,t){const n=this,r=this.path===""?Ng.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new uo(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(c)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,s,l,o,n),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let h=!1;for(const f in a)if(a[f].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,o,a,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const s=new y0().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new uA().fromJSON(e[s],r);n[o.uuid]=o}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new XO;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;default:l.type in w8?o=w8[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),n[l.uuid]=o}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const s=new q2;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];n[l.uuid]===void 0&&(n[l.uuid]=s.parse(l)),r[l.uuid]=n[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],s=Og.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function a(l){return n.manager.itemStart(l),s.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:n.resourcePath+c;return a(u)}else return l.data?{data:fg(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new H5(t);s=new T1(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const h=e[c],f=h.url;if(Array.isArray(f)){const d=[];for(let g=0,v=f.length;g<v;g++){const A=f[g],_=o(A);_!==null&&(_ instanceof HTMLImageElement?d.push(_):d.push(new b0(_.data,_.width,_.height)))}r[h.uuid]=new m0(d)}else{const d=o(h.url);r[h.uuid]=new m0(d)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(l)}else return a.data?{data:fg(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new T1(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],c=l.url;if(Array.isArray(c)){const u=[];for(let h=0,f=c.length;h<f;h++){const d=c[h],g=await s(d);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new b0(g.data,g.width,g.height)))}n[l.uuid]=new m0(u)}else{const u=await s(l.url);n[l.uuid]=new m0(u)}}}return n}parseTextures(e,t){function n(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],c=l.data;let u;Array.isArray(c)?(u=new lA,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new b0:u=new rs,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=o.uuid,o.name!==void 0&&(u.name=o.name),o.mapping!==void 0&&(u.mapping=n(o.mapping,Mne)),o.channel!==void 0&&(u.channel=o.channel),o.offset!==void 0&&u.offset.fromArray(o.offset),o.repeat!==void 0&&u.repeat.fromArray(o.repeat),o.center!==void 0&&u.center.fromArray(o.center),o.rotation!==void 0&&(u.rotation=o.rotation),o.wrap!==void 0&&(u.wrapS=n(o.wrap[0],S8),u.wrapT=n(o.wrap[1],S8)),o.format!==void 0&&(u.format=o.format),o.internalFormat!==void 0&&(u.internalFormat=o.internalFormat),o.type!==void 0&&(u.type=o.type),o.colorSpace!==void 0&&(u.colorSpace=o.colorSpace),o.encoding!==void 0&&(u.encoding=o.encoding),o.minFilter!==void 0&&(u.minFilter=n(o.minFilter,M8)),o.magFilter!==void 0&&(u.magFilter=n(o.magFilter,M8)),o.anisotropy!==void 0&&(u.anisotropy=o.anisotropy),o.flipY!==void 0&&(u.flipY=o.flipY),o.generateMipmaps!==void 0&&(u.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(u.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(u.compareFunction=o.compareFunction),o.userData!==void 0&&(u.userData=o.userData),r[o.uuid]=u}return r}parseObject(e,t,n,r,s){let a;function o(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const d=[];for(let g=0,v=f.length;g<v;g++){const A=f[g];n[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),d.push(n[A])}return d}return n[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),n[f]}}function c(f){return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),r[f]}let u,h;switch(e.type){case"Scene":a=new cv,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new qt(e.background):a.background=c(e.background)),e.environment!==void 0&&(a.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new M2(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new S2(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new yr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new yh(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new qO(e.color,e.intensity);break;case"DirectionalLight":a=new j5(e.color,e.intensity);break;case"PointLight":a=new q5(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new jO(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new Q5(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new QO(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new Q2().fromJSON(e);break;case"SkinnedMesh":u=o(e.geometry),h=l(e.material),a=new M5(u,h),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":u=o(e.geometry),h=l(e.material),a=new cr(u,h);break;case"InstancedMesh":u=o(e.geometry),h=l(e.material);const f=e.count,d=e.instanceMatrix,g=e.instanceColor;a=new T5(u,h,f),a.instanceMatrix=new Dg(new Float32Array(d.array),16),g!==void 0&&(a.instanceColor=new Dg(new Float32Array(g.array),g.itemSize));break;case"LOD":a=new bO;break;case"Line":a=new Sf(o(e.geometry),l(e.material));break;case"LineLoop":a=new I5(o(e.geometry),l(e.material));break;case"LineSegments":a=new yu(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new P5(o(e.geometry),l(e.material));break;case"Sprite":a=new AO(l(e.material));break;case"Group":a=new Zu;break;case"Bone":a=new T2;break;default:a=new Oi}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let d=0;d<f.length;d++)a.add(this.parseObject(f[d],t,n,r,s))}if(e.animations!==void 0){const f=e.animations;for(let d=0;d<f.length;d++){const g=f[d];a.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const f=e.levels;for(let d=0;d<f.length;d++){const g=f[d],v=a.getObjectByProperty("uuid",g.object);v!==void 0&&a.addLevel(v,g.distance,g.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}}const Mne={UVMapping:rA,CubeReflectionMapping:Cf,CubeRefractionMapping:Gd,EquirectangularReflectionMapping:g1,EquirectangularRefractionMapping:v1,CubeUVReflectionMapping:rv},S8={RepeatWrapping:Ef,ClampToEdgeWrapping:la,MirroredRepeatWrapping:T0},M8={NearestFilter:ji,NearestMipmapNearestFilter:_1,NearestMipmapLinearFilter:xg,LinearFilter:Dr,LinearMipmapNearestFilter:p2,LinearMipmapLinearFilter:vu};class KO extends Ya{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=R0.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){R0.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let $y;class W5{static getContext(){return $y===void 0&&($y=new(window.AudioContext||window.webkitAudioContext)),$y}static setContext(e){$y=e}}class Tne extends Ya{constructor(e){super(e)}load(e,t,n,r){const s=this,a=new uo(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const c=l.slice(0);W5.getContext().decodeAudioData(c,function(h){t(h)},o)}catch(c){o(c)}},n,r);function o(l){r?r(l):console.error(l),s.manager.itemError(e)}}}class Ine extends Q2{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const r=new qt().set(e),s=new qt().set(t),a=new fe(r.r,r.g,r.b),o=new fe(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(l),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(c)}}class Pne extends Q2{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const n=new qt().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const T8=new Wn,I8=new Wn,zp=new Wn;class kne{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new yr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new yr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,zp.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,a=t.near*Math.tan(A0*t.fov*.5)/t.zoom;let o,l;I8.elements[12]=-r,T8.elements[12]=r,o=-a*t.aspect+s,l=a*t.aspect+s,zp.elements[0]=2*t.near/(l-o),zp.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(zp),o=-a*t.aspect-s,l=a*t.aspect-s,zp.elements[0]=2*t.near/(l-o),zp.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(zp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(I8),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(T8)}}let j2=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=P8(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=P8();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function P8(){return(typeof performance>"u"?Date:performance).now()}const Up=new fe,k8=new ca,Bne=new fe,Vp=new fe;class Rne extends Oi{constructor(){super(),this.type="AudioListener",this.context=W5.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new j2}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Up,k8,Bne),Vp.set(0,0,-1).applyQuaternion(k8),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Up.x,r),t.positionY.linearRampToValueAtTime(Up.y,r),t.positionZ.linearRampToValueAtTime(Up.z,r),t.forwardX.linearRampToValueAtTime(Vp.x,r),t.forwardY.linearRampToValueAtTime(Vp.y,r),t.forwardZ.linearRampToValueAtTime(Vp.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(Up.x,Up.y,Up.z),t.setOrientation(Vp.x,Vp.y,Vp.z,n.x,n.y,n.z)}}class JO extends Oi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Hp=new fe,B8=new ca,Dne=new fe,$p=new fe;class Lne extends JO{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Hp,B8,Dne),$p.set(0,0,1).applyQuaternion(B8);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Hp.x,n),t.positionY.linearRampToValueAtTime(Hp.y,n),t.positionZ.linearRampToValueAtTime(Hp.z,n),t.orientationX.linearRampToValueAtTime($p.x,n),t.orientationY.linearRampToValueAtTime($p.y,n),t.orientationZ.linearRampToValueAtTime($p.z,n)}else t.setPosition(Hp.x,Hp.y,Hp.z),t.setOrientation($p.x,$p.y,$p.z)}}class One{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class ZO{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==r;++o)n[s+o]=n[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(n,s,0,o,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(n,r,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){o.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,a=r;s!==a;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[n+a]}_slerp(e,t,n,r){ca.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const a=this._workIndex*s;ca.multiplyQuaternionsFlat(e,a,e,t,e,n),ca.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,s){const a=1-r;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[n+o]*r}}_lerpAdditive(e,t,n,r,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[n+a]*r}}}const Y5="\\[\\]\\.:\\/",Nne=new RegExp("["+Y5+"]","g"),X5="[^"+Y5+"]",Fne="[^"+Y5.replace("\\.","")+"]",zne=/((?:WC+[\/:])*)/.source.replace("WC",X5),Une=/(WCOD+)?/.source.replace("WCOD",Fne),Vne=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",X5),Hne=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",X5),$ne=new RegExp("^"+zne+Une+Vne+Hne+"$"),Gne=["material","materials","bones","map"];class Qne{constructor(e,t,n){const r=n||qi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class qi{constructor(e,t,n){this.path=t,this.parsedPath=n||qi.parseTrackName(t),this.node=qi.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new qi.Composite(e,t,n):new qi(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Nne,"")}static parseTrackName(e){const t=$ne.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=n.nodeName.substring(r+1);Gne.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=n(o.children);if(l)return l}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=qi.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let c=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[r];if(a===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}qi.Composite=Qne;qi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};qi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};qi.prototype.GetterByBindingType=[qi.prototype._getValue_direct,qi.prototype._getValue_array,qi.prototype._getValue_arrayElement,qi.prototype._getValue_toArray];qi.prototype.SetterByBindingTypeAndVersioning=[[qi.prototype._setValue_direct,qi.prototype._setValue_direct_setNeedsUpdate,qi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[qi.prototype._setValue_array,qi.prototype._setValue_array_setNeedsUpdate,qi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[qi.prototype._setValue_arrayElement,qi.prototype._setValue_arrayElement_setNeedsUpdate,qi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[qi.prototype._setValue_fromArray,qi.prototype._setValue_fromArray_setNeedsUpdate,qi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class qne{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Jl(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let o,l=e.length,c=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const f=arguments[u],d=f.uuid;let g=t[d];if(g===void 0){g=l++,t[d]=g,e.push(f);for(let v=0,A=a;v!==A;++v)s[v].push(new qi(f,n[v],r[v]))}else if(g<c){o=e[g];const v=--c,A=e[v];t[A.uuid]=g,e[g]=A,t[d]=v,e[v]=f;for(let _=0,y=a;_!==y;++_){const x=s[_],C=x[v];let S=x[g];x[g]=C,S===void 0&&(S=new qi(f,n[_],r[_])),x[v]=S}}else e[g]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const h=s++,f=e[h];t[f.uuid]=u,e[u]=f,t[c]=h,e[h]=l;for(let d=0,g=r;d!==g;++d){const v=n[d],A=v[h],_=v[u];v[u]=A,v[h]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],u=c.uuid,h=t[u];if(h!==void 0)if(delete t[u],h<s){const f=--s,d=e[f],g=--a,v=e[g];t[d.uuid]=h,e[h]=d,t[v.uuid]=f,e[f]=v,e.pop();for(let A=0,_=r;A!==_;++A){const y=n[A],x=y[f],C=y[g];y[h]=x,y[f]=C,y.pop()}}else{const f=--a,d=e[f];f>0&&(t[d.uuid]=h),e[h]=d,e.pop();for(let g=0,v=r;g!==v;++g){const A=n[g];A[h]=A[f],A.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,o=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,h=new Array(c);r=s.length,n[e]=r,a.push(e),o.push(t),s.push(h);for(let f=u,d=l.length;f!==d;++f){const g=l[f];h[f]=new qi(g,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],c=e[o];t[c]=n,a[n]=l,a.pop(),s[n]=s[o],s.pop(),r[n]=r[o],r.pop()}}}class eN{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:d0,endingEnd:d0};for(let c=0;c!==a;++c){const u=s[c].createInterpolant(null);o[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=zL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,l[1]=s+n,c[0]=e/a,c[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case d5:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(a),c[u].accumulateAdditive(o);break;case A2:default:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(a),c[u].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const a=n===UL;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(n===FL){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=p0,r.endingEnd=p0):(e?r.endingStart=this.zeroSlopeAtStart?p0:d0:r.endingStart=A1,t?r.endingEnd=this.zeroSlopeAtEnd?p0:d0:r.endingEnd=A1)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=n,this}}const jne=new Float32Array(1);class Wne extends Oc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,o=e._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let h=0;h!==s;++h){const f=r[h],d=f.name;let g=u[d];if(g!==void 0)++g.referenceCount,a[h]=g;else{if(g=a[h],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,d));continue}const v=t&&t._propertyBindings[h].binding.parsedPath;g=new ZO(qi.create(n,d,v),f.ValueTypeName,f.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,d),a[h]=g}o[h].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const h=o.actionByRoot,f=(e._localRoot||this._root).uuid;delete h[f],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,a=this._bindingsByRootAndName,o=a[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new U5(new Float32Array(2),new Float32Array(2),1,jne),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?Og.findByName(r,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let c=null;if(n===void 0&&(a!==null?n=a.blendMode:n=A2),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===n)return h;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const u=new eN(this,a,t,n);return this._bindAction(u,c),this._addInactiveAction(u,o,s),u}existingAction(e,t){const n=t||this._root,r=n.uuid,s=typeof e=="string"?Og.findByName(n,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==n;++c)t[c]._update(r,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const c=a[o];this._deactivateAction(c);const u=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=u,t[u]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const a in n){const o=n[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class K5{constructor(e){this.value=e}clone(){return new K5(this.value.clone===void 0?this.value:this.value.clone())}}let Yne=0;class Xne extends Oc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Yne++}),this.name="",this.usage=y1,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++)this.uniforms.push(t[n].clone());return this}clone(){return new this.constructor().copy(this)}}class Kne extends cA{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Jne{constructor(e,t,n,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class tN{constructor(e,t,n=0,r=1/0){this.ray=new av(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new w2,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return EM(e,this,n,t),n.sort(R8),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)EM(e[r],this,n,t);return n.sort(R8),n}}function R8(i,e){return i.distance-e.distance}function EM(i,e,t,n){if(i.layers.test(e.layers)&&i.raycast(e,t),n===!0){const r=i.children;for(let s=0,a=r.length;s<a;s++)EM(r[s],e,t,!0)}}let Zne=class{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Ps(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};class eie{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}const D8=new Et;class tie{constructor(e=new Et(1/0,1/0),t=new Et(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=D8.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,D8).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const L8=new fe,Gy=new fe;class nie{constructor(e=new fe,t=new fe){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){L8.subVectors(e,this.start),Gy.subVectors(this.end,this.start);const n=Gy.dot(Gy);let s=Gy.dot(L8)/n;return t&&(s=Ps(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const O8=new fe;class iie extends Oi{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new ai,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const c=a/l*Math.PI*2,u=o/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}n.setAttribute("position",new hn(r,3));const s=new mo({fog:!1,toneMapped:!1});this.cone=new yu(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),O8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(O8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const cd=new fe,Qy=new Wn,oS=new Wn;class rie extends yu{constructor(e){const t=nN(e),n=new ai,r=[],s=[],a=new qt(0,0,1),o=new qt(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}n.setAttribute("position",new hn(r,3)),n.setAttribute("color",new hn(s,3));const l=new mo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");oS.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const o=t[s];o.parent&&o.parent.isBone&&(Qy.multiplyMatrices(oS,o.matrixWorld),cd.setFromMatrixPosition(Qy),r.setXYZ(a,cd.x,cd.y,cd.z),Qy.multiplyMatrices(oS,o.parent.matrixWorld),cd.setFromMatrixPosition(Qy),r.setXYZ(a+1,cd.x,cd.y,cd.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function nN(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,nN(i.children[t]));return e}class sie extends cr{constructor(e,t,n){const r=new pA(t,4,2),s=new Lo({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const aie=new fe,N8=new qt,F8=new qt;class oie extends Oi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new dA(t);r.rotateY(Math.PI*.5),this.material=new Lo({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new Un(a,3)),this.add(new cr(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");N8.copy(this.light.color),F8.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const s=n<r/2?N8:F8;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(aie.setFromMatrixPosition(this.light.matrixWorld).negate())}}class lie extends yu{constructor(e=10,t=10,n=4473924,r=8947848){n=new qt(n),r=new qt(r);const s=t/2,a=e/t,o=e/2,l=[],c=[];for(let f=0,d=0,g=-o;f<=t;f++,g+=a){l.push(-o,0,g,o,0,g),l.push(g,0,-o,g,0,o);const v=f===s?n:r;v.toArray(c,d),d+=3,v.toArray(c,d),d+=3,v.toArray(c,d),d+=3,v.toArray(c,d),d+=3}const u=new ai;u.setAttribute("position",new hn(l,3)),u.setAttribute("color",new hn(c,3));const h=new mo({vertexColors:!0,toneMapped:!1});super(u,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class cie extends yu{constructor(e=10,t=16,n=8,r=64,s=4473924,a=8947848){s=new qt(s),a=new qt(a);const o=[],l=[];if(t>1)for(let h=0;h<t;h++){const f=h/t*(Math.PI*2),d=Math.sin(f)*e,g=Math.cos(f)*e;o.push(0,0,0),o.push(d,0,g);const v=h&1?s:a;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let h=0;h<n;h++){const f=h&1?s:a,d=e-e/n*h;for(let g=0;g<r;g++){let v=g/r*(Math.PI*2),A=Math.sin(v)*d,_=Math.cos(v)*d;o.push(A,0,_),l.push(f.r,f.g,f.b),v=(g+1)/r*(Math.PI*2),A=Math.sin(v)*d,_=Math.cos(v)*d,o.push(A,0,_),l.push(f.r,f.g,f.b)}}const c=new ai;c.setAttribute("position",new hn(o,3)),c.setAttribute("color",new hn(l,3));const u=new mo({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const z8=new fe,qy=new fe,U8=new fe;class uie extends Oi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new ai;r.setAttribute("position",new hn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new mo({fog:!1,toneMapped:!1});this.lightPlane=new Sf(r,s),this.add(this.lightPlane),r=new ai,r.setAttribute("position",new hn([0,0,0,0,0,1],3)),this.targetLine=new Sf(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),z8.setFromMatrixPosition(this.light.matrixWorld),qy.setFromMatrixPosition(this.light.target.matrixWorld),U8.subVectors(qy,z8),this.lightPlane.lookAt(qy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(qy),this.targetLine.scale.z=U8.length()}}const jy=new fe,Ss=new oA;class hie extends yu{constructor(e){const t=new ai,n=new mo({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(g,v){l(g),l(v)}function l(g){r.push(0,0,0),s.push(0,0,0),a[g]===void 0&&(a[g]=[]),a[g].push(r.length/3-1)}t.setAttribute("position",new hn(r,3)),t.setAttribute("color",new hn(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const c=new qt(16755200),u=new qt(16711680),h=new qt(43775),f=new qt(16777215),d=new qt(3355443);this.setColors(c,u,h,f,d)}setColors(e,t,n,r,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;Ss.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),$s("c",t,e,Ss,0,0,-1),$s("t",t,e,Ss,0,0,1),$s("n1",t,e,Ss,-n,-r,-1),$s("n2",t,e,Ss,n,-r,-1),$s("n3",t,e,Ss,-n,r,-1),$s("n4",t,e,Ss,n,r,-1),$s("f1",t,e,Ss,-n,-r,1),$s("f2",t,e,Ss,n,-r,1),$s("f3",t,e,Ss,-n,r,1),$s("f4",t,e,Ss,n,r,1),$s("u1",t,e,Ss,n*.7,r*1.1,-1),$s("u2",t,e,Ss,-n*.7,r*1.1,-1),$s("u3",t,e,Ss,0,r*2,-1),$s("cf1",t,e,Ss,-n,0,1),$s("cf2",t,e,Ss,n,0,1),$s("cf3",t,e,Ss,0,-r,1),$s("cf4",t,e,Ss,0,r,1),$s("cn1",t,e,Ss,-n,0,-1),$s("cn2",t,e,Ss,n,0,-1),$s("cn3",t,e,Ss,0,-r,-1),$s("cn4",t,e,Ss,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function $s(i,e,t,n,r,s,a){jy.set(r,s,a).unproject(n);const o=e[i];if(o!==void 0){const l=t.getAttribute("position");for(let c=0,u=o.length;c<u;c++)l.setXYZ(o[c],jy.x,jy.y,jy.z)}}const Wy=new bu;class fie extends yu{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new ai;s.setIndex(new Un(n,1)),s.setAttribute("position",new Un(r,3)),super(s,new mo({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Wy.setFromObject(this.object),Wy.isEmpty())return;const t=Wy.min,n=Wy.max,r=this.geometry.attributes.position,s=r.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class die extends yu{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new ai;s.setIndex(new Un(n,1)),s.setAttribute("position",new hn(r,3)),super(s,new mo({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class pie extends Sf{constructor(e,t=1,n=16776960){const r=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new ai;a.setAttribute("position",new hn(s,3)),a.computeBoundingSphere(),super(a,new mo({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new ai;l.setAttribute("position",new hn(o,3)),l.computeBoundingSphere(),this.add(new cr(l,new Lo({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const V8=new fe;let Yy,lS;class mie extends Oi{constructor(e=new fe(0,0,1),t=new fe(0,0,0),n=1,r=16776960,s=n*.2,a=s*.2){super(),this.type="ArrowHelper",Yy===void 0&&(Yy=new ai,Yy.setAttribute("position",new hn([0,0,0,0,1,0],3)),lS=new uv(0,.5,1,5,1),lS.translate(0,-.5,0)),this.position.copy(t),this.line=new Sf(Yy,new mo({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new cr(lS,new Lo({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{V8.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(V8,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class gie extends yu{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new ai;r.setAttribute("position",new hn(t,3)),r.setAttribute("color",new hn(n,3));const s=new mo({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,n){const r=new qt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class vie{constructor(){this.type="ShapePath",this.color=new qt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new C1,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,a){return this.currentPath.bezierCurveTo(e,t,n,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const y=[];for(let x=0,C=_.length;x<C;x++){const S=_[x],I=new y0;I.curves=S.curves,y.push(I)}return y}function n(_,y){const x=y.length;let C=!1;for(let S=x-1,I=0;I<x;S=I++){let P=y[S],B=y[I],M=B.x-P.x,D=B.y-P.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(P=y[I],M=-M,B=y[S],D=-D),_.y<P.y||_.y>B.y)continue;if(_.y===P.y){if(_.x===P.x)return!0}else{const F=D*(_.x-P.x)-M*(_.y-P.y);if(F===0)return!0;if(F<0)continue;C=!C}}else{if(_.y!==P.y)continue;if(B.x<=_.x&&_.x<=P.x||P.x<=_.x&&_.x<=B.x)return!0}}return C}const r=uh.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,l;const c=[];if(s.length===1)return o=s[0],l=new y0,l.curves=o.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const h=[],f=[];let d=[],g=0,v;f[g]=void 0,d[g]=[];for(let _=0,y=s.length;_<y;_++)o=s[_],v=o.getPoints(),a=r(v),a=e?!a:a,a?(!u&&f[g]&&g++,f[g]={s:new y0,p:v},f[g].s.curves=o.curves,u&&g++,d[g]=[]):d[g].push({h:o,p:v[0]});if(!f[0])return t(s);if(f.length>1){let _=!1,y=0;for(let x=0,C=f.length;x<C;x++)h[x]=[];for(let x=0,C=f.length;x<C;x++){const S=d[x];for(let I=0;I<S.length;I++){const P=S[I];let B=!0;for(let M=0;M<f.length;M++)n(P.p,f[M].p)&&(x!==M&&y++,B?(B=!1,h[M].push(P)):_=!0);B&&h[x].push(P)}}y>0&&_===!1&&(d=h)}let A;for(let _=0,y=f.length;_<y;_++){l=f[_].s,c.push(l),A=d[_];for(let x=0,C=A.length;x<C;x++)l.holes.push(A[x].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:u2}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=u2);const iN=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:i5,AddEquation:Cd,AddOperation:BL,AdditiveAnimationBlendMode:d5,AdditiveBlending:j3,AlphaFormat:l5,AlwaysCompare:ZL,AlwaysDepth:EL,AlwaysStencilFunc:QL,AmbientLight:qO,AmbientLightProbe:Pne,AnimationAction:eN,AnimationClip:Og,AnimationLoader:Ane,AnimationMixer:Wne,AnimationObjectGroup:qne,AnimationUtils:mne,ArcCurve:xO,ArrayCamera:gO,ArrowHelper:mie,Audio:JO,AudioAnalyser:One,AudioContext:W5,AudioListener:Rne,AudioLoader:Tne,AxesHelper:gie,BackSide:Fo,BasicDepthPacking:HL,BasicShadowMap:VY,Bone:T2,BooleanKeyframeTrack:G0,Box2:tie,Box3:bu,Box3Helper:die,BoxGeometry:$0,BoxHelper:fie,BufferAttribute:Un,BufferGeometry:ai,BufferGeometryLoader:XO,ByteType:sA,Cache:R0,Camera:oA,CameraHelper:hie,CanvasTexture:zte,CapsuleGeometry:B2,CatmullRomCurve3:CO,CineonToneMapping:LL,CircleGeometry:R2,ClampToEdgeWrapping:la,Clock:j2,Color:qt,ColorKeyframeTrack:V5,ColorManagement:Ul,CompressedArrayTexture:yO,CompressedCubeTexture:wO,CompressedTexture:hA,CompressedTextureLoader:bne,ConeGeometry:D2,CubeCamera:lO,CubeReflectionMapping:Cf,CubeRefractionMapping:Gd,CubeTexture:lA,CubeTextureLoader:yne,CubeUVReflectionMapping:rv,CubicBezierCurve:B5,CubicBezierCurve3:EO,CubicInterpolant:VO,CullFaceBack:q3,CullFaceFront:wL,CullFaceFrontBack:UY,CullFaceNone:yL,Curve:wu,CurvePath:MO,CustomBlending:xL,CustomToneMapping:OL,CylinderGeometry:uv,Cylindrical:eie,Data3DTexture:y2,DataArrayTexture:b2,DataTexture:b0,DataTextureLoader:wne,DataUtils:qX,DecrementStencilOp:qY,DecrementWrapStencilOp:WY,DefaultLoadingManager:GO,DepthFormat:Od,DepthStencilFormat:I0,DepthTexture:vO,DirectionalLight:j5,DirectionalLightHelper:uie,DiscreteInterpolant:HO,DisplayP3ColorSpace:m5,DodecahedronGeometry:L2,DoubleSide:ms,DstAlphaFactor:JT,DstColorFactor:e5,DynamicCopyUsage:cX,DynamicDrawUsage:iX,DynamicReadUsage:aX,EdgesGeometry:TO,EllipseCurve:P2,EqualCompare:WL,EqualDepth:ML,EqualStencilFunc:JY,EquirectangularReflectionMapping:g1,EquirectangularRefractionMapping:v1,Euler:H0,EventDispatcher:Oc,ExtrudeGeometry:N2,FileLoader:uo,Float16BufferAttribute:JX,Float32BufferAttribute:hn,Float64BufferAttribute:ZX,FloatType:is,Fog:M2,FogExp2:S2,FramebufferTexture:Fte,FrontSide:mh,Frustum:C2,GLBufferAttribute:Jne,GLSL1:hX,GLSL3:gM,GreaterCompare:XL,GreaterDepth:IL,GreaterEqualCompare:JL,GreaterEqualDepth:TL,GreaterEqualStencilFunc:nX,GreaterStencilFunc:eX,GridHelper:lie,Group:Zu,HalfFloatType:Kl,HemisphereLight:QO,HemisphereLightHelper:oie,HemisphereLightProbe:Ine,IcosahedronGeometry:F2,ImageBitmapLoader:KO,ImageLoader:T1,ImageUtils:_5,IncrementStencilOp:QY,IncrementWrapStencilOp:jY,InstancedBufferAttribute:Dg,InstancedBufferGeometry:YO,InstancedInterleavedBuffer:Kne,InstancedMesh:T5,Int16BufferAttribute:XX,Int32BufferAttribute:KX,Int8BufferAttribute:jX,IntType:sv,InterleavedBuffer:cA,InterleavedBufferAttribute:Qd,Interpolant:hv,InterpolateDiscrete:kg,InterpolateLinear:P0,InterpolateSmooth:qw,InvertStencilOp:YY,KeepStencilOp:jw,KeyframeTrack:xu,LOD:bO,LatheGeometry:fA,Layers:w2,LessCompare:jL,LessDepth:SL,LessEqualCompare:YL,LessEqualDepth:fx,LessEqualStencilFunc:ZY,LessStencilFunc:KY,Light:ap,LightProbe:Q2,Line:Sf,Line3:nie,LineBasicMaterial:mo,LineCurve:k2,LineCurve3:SO,LineDashedMaterial:zO,LineLoop:I5,LineSegments:yu,LinearEncoding:b1,LinearFilter:Dr,LinearInterpolant:U5,LinearMipMapLinearFilter:o5,LinearMipMapNearestFilter:a5,LinearMipmapLinearFilter:vu,LinearMipmapNearestFilter:p2,LinearSRGBColorSpace:Nc,LinearToneMapping:RL,Loader:Ya,LoaderUtils:Ng,LoadingManager:H5,LoopOnce:FL,LoopPingPong:UL,LoopRepeat:zL,LuminanceAlphaFormat:_2,LuminanceFormat:v2,MOUSE:FY,Material:xa,MaterialLoader:q2,MathUtils:v5,Matrix3:Ei,Matrix4:Wn,MaxEquation:K3,Mesh:cr,MeshBasicMaterial:Lo,MeshDepthMaterial:w5,MeshDistanceMaterial:x5,MeshLambertMaterial:NO,MeshMatcapMaterial:FO,MeshNormalMaterial:OO,MeshPhongMaterial:DO,MeshPhysicalMaterial:wh,MeshStandardMaterial:mA,MeshToonMaterial:LO,MinEquation:X3,MirroredRepeatWrapping:T0,MixOperation:kL,MultiplyBlending:Y3,MultiplyOperation:iA,NearestFilter:ji,NearestMipMapLinearFilter:s5,NearestMipMapNearestFilter:r5,NearestMipmapLinearFilter:xg,NearestMipmapNearestFilter:_1,NeverCompare:qL,NeverDepth:CL,NeverStencilFunc:XY,NoBlending:oh,NoColorSpace:ch,NoToneMapping:bf,NormalAnimationBlendMode:A2,NormalBlending:Dd,NotEqualCompare:KL,NotEqualDepth:PL,NotEqualStencilFunc:tX,NumberKeyframeTrack:B0,Object3D:Oi,ObjectLoader:Sne,ObjectSpaceNormalMap:GL,OctahedronGeometry:dA,OneFactor:YT,OneMinusDstAlphaFactor:ZT,OneMinusDstColorFactor:t5,OneMinusSrcAlphaFactor:d2,OneMinusSrcColorFactor:KT,OrthographicCamera:yh,PCFShadowMap:QT,PCFSoftShadowMap:h2,PMREMGenerator:AM,Path:C1,PerspectiveCamera:yr,Plane:wd,PlaneGeometry:ov,PlaneHelper:pie,PointLight:q5,PointLightHelper:sie,Points:P5,PointsMaterial:I2,PolarGridHelper:cie,PolyhedronGeometry:sp,PositionalAudio:Lne,PropertyBinding:qi,PropertyMixer:ZO,QuadraticBezierCurve:R5,QuadraticBezierCurve3:D5,Quaternion:ca,QuaternionKeyframeTrack:qd,QuaternionLinearInterpolant:$O,RED_GREEN_RGTC2_Format:pM,RED_RGTC1_Format:NL,REVISION:u2,RGBADepthPacking:$L,RGBAFormat:Bs,RGBAIntegerFormat:h5,RGBA_ASTC_10x10_Format:uM,RGBA_ASTC_10x5_Format:oM,RGBA_ASTC_10x6_Format:lM,RGBA_ASTC_10x8_Format:cM,RGBA_ASTC_12x10_Format:hM,RGBA_ASTC_12x12_Format:fM,RGBA_ASTC_4x4_Format:vx,RGBA_ASTC_5x4_Format:eM,RGBA_ASTC_5x5_Format:tM,RGBA_ASTC_6x5_Format:nM,RGBA_ASTC_6x6_Format:iM,RGBA_ASTC_8x5_Format:rM,RGBA_ASTC_8x6_Format:sM,RGBA_ASTC_8x8_Format:aM,RGBA_BPTC_Format:t1,RGBA_ETC2_EAC_Format:gx,RGBA_PVRTC_2BPPV1_Format:Z3,RGBA_PVRTC_4BPPV1_Format:px,RGBA_S3TC_DXT1_Format:Gw,RGBA_S3TC_DXT3_Format:Qw,RGBA_S3TC_DXT5_Format:e1,RGB_ETC1_Format:f5,RGB_ETC2_Format:mx,RGB_PVRTC_2BPPV1_Format:J3,RGB_PVRTC_4BPPV1_Format:dx,RGB_S3TC_DXT1_Format:Z_,RGFormat:hg,RGIntegerFormat:u5,RawShaderMaterial:N5,Ray:av,Raycaster:tN,RectAreaLight:jO,RedFormat:ug,RedIntegerFormat:c5,ReinhardToneMapping:DL,RepeatWrapping:Ef,ReplaceStencilOp:GY,ReverseSubtractEquation:jT,RingGeometry:z2,SIGNED_RED_GREEN_RGTC2_Format:mM,SIGNED_RED_RGTC1_Format:dM,SRGBColorSpace:kn,Scene:cv,ShaderChunk:gi,ShaderLib:hu,ShaderMaterial:_l,ShadowMaterial:RO,Shape:y0,ShapeGeometry:U2,ShapePath:vie,ShapeUtils:uh,ShortType:aA,Skeleton:uA,SkeletonHelper:rie,SkinnedMesh:M5,Source:m0,Sphere:Vc,SphereGeometry:pA,Spherical:Zne,SphericalHarmonics3:WO,SplineCurve:L5,SpotLight:Q5,SpotLightHelper:iie,Sprite:AO,SpriteMaterial:S5,SrcAlphaFactor:f2,SrcAlphaSaturateFactor:n5,SrcColorFactor:XT,StaticCopyUsage:lX,StaticDrawUsage:y1,StaticReadUsage:sX,StereoCamera:kne,StreamCopyUsage:uX,StreamDrawUsage:rX,StreamReadUsage:oX,StringKeyframeTrack:Q0,SubtractEquation:qT,SubtractiveBlending:W3,TOUCH:zY,TangentSpaceNormalMap:rp,TetrahedronGeometry:V2,Texture:rs,TextureLoader:$5,TorusGeometry:H2,TorusKnotGeometry:$2,Triangle:al,TriangleFanDrawMode:_x,TriangleStripDrawMode:p5,TrianglesDrawMode:VL,TubeGeometry:G2,TwoPassDoubleSide:HY,UVMapping:rA,Uint16BufferAttribute:A5,Uint32BufferAttribute:b5,Uint8BufferAttribute:WX,Uint8ClampedBufferAttribute:YX,Uniform:K5,UniformsGroup:Xne,UniformsLib:Jt,UniformsUtils:x2,UnsignedByteType:ns,UnsignedInt248Type:Ld,UnsignedIntType:Ic,UnsignedShort4444Type:m2,UnsignedShort5551Type:g2,UnsignedShortType:V0,VSMShadowMap:ju,Vector2:Et,Vector3:fe,Vector4:Hi,VectorKeyframeTrack:Lg,VideoTexture:Nte,WebGL1Renderer:E5,WebGL3DRenderTarget:LX,WebGLArrayRenderTarget:DX,WebGLCoordinateSystem:Ju,WebGLCubeRenderTarget:cO,WebGLMultipleRenderTargets:OX,WebGLRenderTarget:po,WebGLRenderer:C5,WebGLUtils:mO,WebGPUCoordinateSystem:w1,WireframeGeometry:BO,WrapAroundEnding:A1,ZeroCurvatureEnding:d0,ZeroFactor:WT,ZeroSlopeEnding:p0,ZeroStencilOp:$Y,_SRGBAFormat:Ax,sRGBEncoding:lh},Symbol.toStringTag,{value:"Module"})),_ie=()=>gu("threlte-internal-context");function Aie(i){let e;const t=i[9].default,n=ni(t,i,i[8],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,[s]){n&&n.p&&(!e||s&256)&&ii(n,t,r,r[8],e?si(t,r[8],s,null):ri(r[8]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}const H8="threlte-disposable-object-context";function bie(i,e,t){let n,r,{$$slots:s={},$$scope:a}=e;const{collectDisposableObjects:o,addDisposableObjects:l,removeDisposableObjects:c}=_ie();let{object:u=void 0}=e,h=u,{dispose:f=void 0}=e;const d=gu(H8);Xt(i,d,A=>t(7,r=A));const g=Is(f??r??!0);Xt(i,g,A=>t(6,n=A)),_f(H8,g);let v=n?o(u):[];return l(v),Ha(()=>{c(v)}),i.$$set=A=>{"object"in A&&t(2,u=A.object),"dispose"in A&&t(3,f=A.dispose),"$$scope"in A&&t(8,a=A.$$scope)},i.$$.update=()=>{i.$$.dirty&136&&g.set(f??r??!0),i.$$.dirty&116&&u!==h&&(c(v),t(5,v=n?o(u):[]),l(v),t(4,h=u))},[d,g,u,f,h,v,n,r,a,s]}class yie extends ln{constructor(e){super(),cn(this,e,bie,Aie,an,{object:2,dispose:3})}}function wie(i,e){const t=Is(i);let n=i;const r=t.subscribe(o=>n=o);return Ha(r),{...t,set:o=>{if((o==null?void 0:o.uuid)===(n==null?void 0:n.uuid))return;const l=n;t.set(o),e==null||e(o,l)},update:o=>{const l=o(n);if((l==null?void 0:l.uuid)===(n==null?void 0:n.uuid))return;const c=n;t.set(l),e==null||e(l,c)}}}const Df=()=>gu("threlte"),xie=()=>gu("threlte-hierarchical-parent-context");function Cie(i){let e;const t=i[8].default,n=ni(t,i,i[7],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,[s]){n&&n.p&&(!e||s&128)&&ii(n,t,r,r[7],e?si(t,r[7],s,null):ri(r[7]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}const Eie=()=>({onChildMount:gu("threlte-hierarchical-object-on-mount"),onChildDestroy:gu("threlte-hierarchical-object-on-destroy")});function Sie(i,e,t){var _;let n,{$$slots:r={},$$scope:s}=e,{object:a=void 0}=e,{children:o=[]}=e,{onChildMount:l=void 0}=e;const c=y=>{o.push(y),t(1,o),l==null||l(y)};let{onChildDestroy:u=void 0}=e;const h=y=>{const x=o.findIndex(C=>C.uuid===y.uuid);x!==-1&&o.splice(x,1),t(1,o),u==null||u(y)},{invalidate:f}=Df(),d=xie();Xt(i,d,y=>t(6,n=y));let{parent:g=n}=e;const v=Eie();a&&((_=v.onChildMount)==null||_.call(v,a),f("HierarchicalObject: object added"));const A=wie(a,(y,x)=>{var C,S;x&&((C=v.onChildDestroy)==null||C.call(v,x),f("HierarchicalObject: object added")),y&&((S=v.onChildMount)==null||S.call(v,y),f("HierarchicalObject: object removed"))});return Ha(()=>{var y;a&&((y=v.onChildDestroy)==null||y.call(v,a),f("HierarchicalObject: object removed"))}),_f("threlte-hierarchical-object-on-mount",c),_f("threlte-hierarchical-object-on-destroy",h),_f("threlte-hierarchical-parent-context",A),i.$$set=y=>{"object"in y&&t(3,a=y.object),"children"in y&&t(1,o=y.children),"onChildMount"in y&&t(4,l=y.onChildMount),"onChildDestroy"in y&&t(5,u=y.onChildDestroy),"parent"in y&&t(2,g=y.parent),"$$scope"in y&&t(7,s=y.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&t(2,g=n),i.$$.dirty&8&&A.set(a)},[d,o,g,a,l,u,n,s,r]}class Mie extends ln{constructor(e){super(),cn(this,e,Sie,Cie,an,{object:3,children:1,onChildMount:4,onChildDestroy:5,parent:2})}}function Tie(i){let e;const t=i[1].default,n=ni(t,i,i[4],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&16)&&ii(n,t,r,r[4],e?si(t,r[4],s,null):ri(r[4]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function Iie(i){let e,t;return e=new Mie({props:{object:i[0],onChildMount:i[2],onChildDestroy:i[3],$$slots:{default:[Tie]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},p(n,[r]){const s={};r&1&&(s.object=n[0]),r&1&&(s.onChildMount=n[2]),r&1&&(s.onChildDestroy=n[3]),r&16&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function Pie(i,e,t){let{$$slots:n={},$$scope:r}=e,{object:s}=e;const a=l=>s.add(l),o=l=>s.remove(l);return i.$$set=l=>{"object"in l&&t(0,s=l.object),"$$scope"in l&&t(4,r=l.$$scope)},[s,n,a,o,r]}class kie extends ln{constructor(e){super(),cn(this,e,Pie,Iie,an,{object:0})}}const rN=(i,e)=>{if(e.includes(".")){const t=e.split("."),n=t.pop();for(let r=0;r<t.length;r+=1)i=i[t[r]];return{target:i,key:n}}else return{target:i,key:e}},cS=Symbol("initialValueBeforeAttach"),Bie=()=>{const{invalidate:i}=Df();let e=!1,t=cS,n,r,s;const a=(l,c,u)=>{if(o(),!u){const h=l;((h==null?void 0:h.isMaterial)||!1)&&(u="material"),((h==null?void 0:h.isBufferGeometry)||(h==null?void 0:h.isGeometry)||!1)&&(u="geometry")}if(u){if(typeof u=="function")n=u(c,l);else{const{target:h,key:f}=rN(c,u);t=h[f],h[f]=l,r=h,s=f}e=!0,i()}},o=()=>{e&&(n?(n(),n=void 0):r&&s&&t!==cS&&(r[s]=t,t=cS,r=void 0,s=void 0),e=!1,i())};return Ha(()=>{o()}),{update:a}},Rie=i=>i&&i.isCamera,sN=i=>i&&i.isOrthographicCamera,aN=i=>i&&i.isPerspectiveCamera,Die=i=>aN(i)||sN(i),Lie=()=>{const{invalidate:i,size:e,camera:t}=Df();let n,r;Ha(()=>{r==null||r()});const s=l=>{n&&(sN(n)?(n.left=l.width/-2,n.right=l.width/2,n.top=l.height/2,n.bottom=l.height/-2,n.updateProjectionMatrix(),n.updateMatrixWorld(),i()):aN(n)&&(n.aspect=l.width/l.height,n.updateProjectionMatrix(),n.updateMatrixWorld(),i()))};return{update:(l,c)=>{if(r==null||r(),c||!Die(l)){n=void 0;return}n=l,r=e.subscribe(s)},makeDefaultCamera:(l,c)=>{!Rie(l)||!c||(t.set(l),i())}}},J5=()=>{const i=J1(),e=(n,r)=>{const s=i.$$.callbacks[n];s&&s.forEach(a=>{a(r)})};return Object.defineProperty(e,"hasEventListener",{value:n=>!!i.$$.callbacks[n],enumerable:!0}),e},Oie=()=>{const i=J5(),e=[];let t,n=!1;const r=()=>{e.forEach(o=>o()),e.length=0,i("create",{ref:t,cleanup:o=>{e.push(o)}})},s=a=>{t=a,n&&r()};return Au(()=>{r(),n=!0}),Ha(()=>{e.forEach(a=>a())}),{updateRef:s}},$8=i=>!!(i!=null&&i.addEventListener),Nie=()=>{const i=J5(),e=J1(),t=f=>{f!=null&&f.type&&i(f.type,f)},n=(f,d)=>{$8(f)&&d.forEach(g=>{f.removeEventListener(g,t)})},r=(f,d)=>{$8(f)&&d.forEach(g=>{f.addEventListener(g,t)})};let s=[],a;const o=Is([]),l=o.subscribe(f=>{n(a,s),r(a,f),s=f});Ha(l);const c=Is(),u=c.subscribe(f=>{n(a,s),r(f,s),a=f});return Ha(u),Ha(()=>{n(a,s)}),Au(()=>{o.set(Object.keys(e.$$.callbacks))}),{updateRef:f=>{c.set(f)}}},Fie=i=>{const t=gu("threlte-plugin-context");if(!t)return;const n=Object.values(t).map(c=>c(i)).filter(Boolean),r=n.flatMap(c=>c.pluginProps??[]);let s=[];return Ha(()=>{s.forEach(c=>c())}),{updateRef:c=>{s.forEach(u=>u()),s=[],n.forEach(u=>{var f;const h=(f=u.onRefChange)==null?void 0:f.call(u,c);h&&s.push(h)})},updateProps:c=>{n.forEach(u=>{var h;(h=u.onPropsChange)==null||h.call(u,c)})},updateRestProps:c=>{n.forEach(u=>{var h;(h=u.onRestPropsChange)==null||h.call(u,c)})},pluginsProps:r}},zie=new Set(["$$scope","$$slots","type","args","attach","instance"]),Uie=new Set(["fov","aspect","near","far","left","right","top","bottom","zoom"]),Vie=i=>typeof i=="string"||typeof i=="number"||typeof i=="boolean"||typeof i>"u"||i===null,Hie=()=>{const{invalidate:i}=Df(),e=new Map,t=(r,s,a,o)=>{var u,h;if(Vie(a)){const f=e.get(s);if(f&&f.instance===r&&f.value===a)return;e.set(s,{instance:r,value:a})}const{key:l,target:c}=rN(r,s);if(!Array.isArray(a)&&typeof a=="number"&&typeof((u=c[l])==null?void 0:u.setScalar)=="function")c[l].setScalar(a);else if(typeof((h=c[l])==null?void 0:h.set)=="function")Array.isArray(a)?c[l].set(...a):c[l].set(a);else{if(c[l]=a,o.manualCamera)return;Uie.has(l)&&(c.isPerspectiveCamera||c.isOrthographicCamera)&&c.updateProjectionMatrix()}};return{updateProps:(r,s,a)=>{var o;for(const l in s)!zie.has(l)&&!((o=a.pluginsProps)!=null&&o.includes(l))&&t(r,l,s[l],a),i()}}},$ie=i=>({ref:i&2}),G8=i=>({ref:i[1]}),Gie=i=>({ref:i&2}),Q8=i=>({ref:i[1]});function q8(i){let e,t;return e=new yie({props:{object:i[1],dispose:i[0]}}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},p(n,r){const s={};r&2&&(s.object=n[1]),r&1&&(s.dispose=n[0]),e.$set(s)},i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function Qie(i){let e;const t=i[12].default,n=ni(t,i,i[13],G8);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8194)&&ii(n,t,r,r[13],e?si(t,r[13],s,$ie):ri(r[13]),G8)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function qie(i){let e,t;return e=new kie({props:{object:i[1],$$slots:{default:[jie]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},p(n,r){const s={};r&2&&(s.object=n[1]),r&8194&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function jie(i){let e;const t=i[12].default,n=ni(t,i,i[13],Q8);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8194)&&ii(n,t,r,r[13],e?si(t,r[13],s,Gie):ri(r[13]),Q8)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function Wie(i){let e=i[4](i[1]),t,n,r,s,a,o,l=e&&q8(i);const c=[qie,Qie],u=[];function h(f,d){return d&2&&(n=null),n==null&&(n=!!f[3](f[1])),n?0:1}return r=h(i,-1),s=u[r]=c[r](i),{c(){l&&l.c(),t=_t(),s.c(),a=ua()},l(f){l&&l.l(f),t=At(f),s.l(f),a=ua()},m(f,d){l&&l.m(f,d),Pe(f,t,d),u[r].m(f,d),Pe(f,a,d),o=!0},p(f,[d]){d&2&&(e=f[4](f[1])),e?l?(l.p(f,d),d&2&&oe(l,1)):(l=q8(f),l.c(),oe(l,1),l.m(t.parentNode,t)):l&&(Rs(),pe(l,1,1,()=>{l=null}),Ds());let g=r;r=h(f,d),r===g?u[r].p(f,d):(Rs(),pe(u[g],1,1,()=>{u[g]=null}),Ds(),s=u[r],s?s.p(f,d):(s=u[r]=c[r](f),s.c()),oe(s,1),s.m(a.parentNode,a))},i(f){o||(oe(l),oe(s),o=!0)},o(f){pe(l),pe(s),o=!1},d(f){f&&(Z(t),Z(a)),l&&l.d(f),u[r].d(f)}}}function Yie(i,e,t){const n=["is","args","attach","manual","makeDefault","dispose","ref"];let r=$d(e,n),s,{$$slots:a={},$$scope:o}=e,{is:l}=e,{args:c=void 0}=e,{attach:u=void 0}=e,{manual:h=void 0}=e,{makeDefault:f=void 0}=e,{dispose:d=void 0}=e;const g=gu("threlte-hierarchical-parent-context");Xt(i,g,O=>t(11,s=O));const v=O=>typeof O=="function"&&/^\s*class\s+/.test(O.toString()),A=O=>Array.isArray(O),_=Oie();let y=v(l)&&A(c)?new l(...c):v(l)?new l:l;_.updateRef(y);let x=!1;const C=()=>{if(!x){x=!0;return}t(1,y=v(l)&&A(c)?new l(...c):v(l)?new l:l),_.updateRef(y)};let{ref:S=y}=e;const I=Is(y);_f("threlte-hierarchical-parent-context",I);const P=Fie({ref:y,props:e}),B=(P==null?void 0:P.pluginsProps)??[],M=Hie(),D=Lie(),F=Bie(),z=Nie(),U=O=>!!O.isObject3D,$=O=>O.dispose!==void 0;return i.$$set=O=>{t(27,e=Bt(Bt({},e),Mn(O))),t(26,r=$d(e,n)),"is"in O&&t(6,l=O.is),"args"in O&&t(7,c=O.args),"attach"in O&&t(8,u=O.attach),"manual"in O&&t(9,h=O.manual),"makeDefault"in O&&t(10,f=O.makeDefault),"dispose"in O&&t(0,d=O.dispose),"ref"in O&&t(5,S=O.ref),"$$scope"in O&&t(13,o=O.$$scope)},i.$$.update=()=>{i.$$.dirty&192&&C(),i.$$.dirty&2&&t(5,S=y),i.$$.dirty&2&&I.set(y),M.updateProps(y,r,{manualCamera:h,pluginsProps:B}),i.$$.dirty&514&&D.update(y,h),i.$$.dirty&1026&&D.makeDefaultCamera(y,f),i.$$.dirty&2306&&F.update(y,s,u),i.$$.dirty&2&&z.updateRef(y),i.$$.dirty&2&&(P==null||P.updateRef(y)),P==null||P.updateProps(e),P==null||P.updateRestProps(r)},e=Mn(e),[d,y,g,U,$,S,l,c,u,h,f,s,a,o]}let Z5=class extends ln{constructor(e){super(),cn(this,e,Yie,Wie,an,{is:6,args:7,attach:8,manual:9,makeDefault:10,dispose:0,ref:5})}};const W2=typeof window<"u",Xie=()=>{const i=Is({width:0,height:0});let e={width:0,height:0};const t=i.subscribe(a=>e=a);Ha(t);let n;const r=()=>{const a=e;if(!n||!n.parentElement)return;const{clientWidth:o,clientHeight:l}=n.parentElement;(o!==a.width||l!==a.height)&&i.set({width:o,height:l})},s=a=>{n=a,r(),window.addEventListener("resize",r)};return W2?(Ha(()=>{window.removeEventListener("resize",r)}),{parentSizeAction:s,parentSize:i}):{parentSize:i,parentSizeAction:s}},j8=(i,e)=>{if(i===e)return!0;if(!i||!e)return!1;const t=i.length;if(e.length!==t)return!1;for(let n=0;n<t;n++)if(i[n]!==e[n])return!1;return!0},Kie=()=>{_f("threlte-cache",[])},Jie=()=>{const i=gu("threlte-cache");if(!i)throw new Error("No cache found. The cache can only be used in a child component to <Canvas>.");return{remember:(n,r)=>{for(const a of i)if(j8(r,a.keys)){if(a.error)throw a.error;if(a.promise)return a.promise}const s={promise:n(),keys:r,value:void 0};return i.push(s),s.promise.catch(a=>{s.error=a}),s.promise},clear:n=>{const r=i.findIndex(s=>j8(n,s.keys));r!==-1&&i.splice(r,1)}}},oN=i=>i.userData,Zie=()=>{const i=new yr(75,0,.1,1e3);return oN(i).threlteDefaultCamera=!0,i.position.z=5,i.lookAt(0,0,0),i},ere=i=>{eI(i.size,e=>{oN(lx(i.camera)).threlteDefaultCamera&&i.camera.update(t=>{const n=t;return n.aspect=e.width/e.height,n.updateProjectionMatrix(),i.invalidate("Default camera: aspect ratio changed"),n})})},eI=(i,e)=>{const t=cu(i,s=>s);let n;const r=t.subscribe(async s=>{n&&n();const a=await e(s);a&&(n=a)});Ha(()=>{r(),n&&n()})},nf=i=>{const e=Is(i),t={set:n=>{t.current=n,e.set(n)},subscribe:e.subscribe,update:n=>{const r=n(t.current);t.current=r,e.set(r)},current:i};return t},tre=i=>{const e={debugFrameloop:i.debugFrameloop,frame:0,frameInvalidated:!0,invalidations:{},manualFrameHandlers:new Set,autoFrameHandlers:new Set,allFrameHandlers:new Set,allFrameHandlersNeedSortCheck:!1,renderHandlers:new Set,renderHandlersNeedSortCheck:!1,advance:!1,dispose:async(a=!1)=>{await z3(),!(!e.shouldDispose&&!a)&&(e.disposableObjects.forEach((o,l)=>{var c;(o===0||a)&&((c=l==null?void 0:l.dispose)==null||c.call(l),e.disposableObjects.delete(l))}),e.shouldDispose=!1)},collectDisposableObjects:(a,o)=>{const l=o??[];return a&&(a!=null&&a.dispose&&typeof a.dispose=="function"&&a.type!=="Scene"&&l.push(a),Object.entries(a).forEach(([c,u])=>{if(c==="parent"||c==="children"||typeof u!="object")return;const h=u;h!=null&&h.dispose&&e.collectDisposableObjects(h,l)})),l},addDisposableObjects:a=>{a.forEach(o=>{const l=e.disposableObjects.get(o);l?e.disposableObjects.set(o,l+1):e.disposableObjects.set(o,1)})},removeDisposableObjects:a=>{a.length!==0&&(a.forEach(o=>{const l=e.disposableObjects.get(o);l&&l>0&&e.disposableObjects.set(o,l-1)}),e.shouldDispose=!0)},disposableObjects:new Map,shouldDispose:!1},t={size:cu([i.userSize,i.parentSize],([a,o])=>a||o),clock:new j2,camera:nf(Zie()),scene:new cv,renderer:void 0,invalidate:a=>{e.frameInvalidated=!0,e.debugFrameloop&&a&&(e.invalidations[a]=e.invalidations[a]?e.invalidations[a]+1:1)},advance:()=>{e.advance=!0},colorSpace:nf(i.colorSpace),toneMapping:nf(i.toneMapping),dpr:nf(i.dpr),useLegacyLights:nf(i.useLegacyLights),shadows:nf(i.shadows),colorManagementEnabled:nf(i.colorManagementEnabled),frameloop:nf(i.frameloop)},n=nf({});return _f("threlte",t),_f("threlte-internal-context",e),_f("threlte-user-context",n),{ctx:t,internalCtx:e,getCtx:()=>t,getInternalCtx:()=>e}},nre=(i,e,t)=>{if(e.allFrameHandlers.size!==0){if(e.allFrameHandlersNeedSortCheck){const n=Array.from(e.allFrameHandlers);if(n.some(s=>s.order)){const s=n.sort((a,o)=>(a.order??0)>(o.order??0)?1:-1);e.allFrameHandlers.clear(),s.forEach(a=>e.allFrameHandlers.add(a))}e.allFrameHandlersNeedSortCheck=!1}if(e.debugFrameloop){let n=0;e.autoFrameHandlers.forEach(r=>{r.debugFrameloopMessage?e.invalidations[r.debugFrameloopMessage]=r.debugFrameloopMessage in e.invalidations?e.invalidations[r.debugFrameloopMessage]+1:1:++n}),n>0&&(e.invalidations.useFrame=e.autoFrameHandlers.size)}e.allFrameHandlers.forEach(n=>n.fn(i,t))}},ire=(i,e,t)=>{if(e.renderHandlers.size!==0){if(e.renderHandlersNeedSortCheck){const n=Array.from(e.renderHandlers);if(n.some(s=>s.order)){const s=n.sort((a,o)=>(a.order??0)>(o.order??0)?1:-1);e.renderHandlers.clear(),s.forEach(a=>e.renderHandlers.add(a))}e.renderHandlersNeedSortCheck=!1}e.renderHandlers.forEach(n=>n.fn(i,t))}},rre=i=>{i.debugFrameloop&&(i.frame+=1,console.log(`frame: ${i.frame}${Object.keys(i.invalidations).length>0?", requested by ↴":""}`),Object.keys(i.invalidations).length>0&&console.table(i.invalidations),i.invalidations={})},sre=(i,e)=>i.frameloop.current==="always"||i.frameloop.current==="demand"&&(e.frameInvalidated||e.autoFrameHandlers.size>0)||i.frameloop.current==="never"&&e.advance,are=(i,e)=>{var t;(t=i.renderer)==null||t.setAnimationLoop(()=>{e.dispose();const n=i.clock.getDelta();nre(i,e,n),sre(i,e)&&(e.renderHandlers.size>0?ire(i,e,n):i.renderer&&i.camera.current&&i.renderer.render(i.scene,i.camera.current),rre(e),e.frameInvalidated=!1,e.advance=!1)})},ore={srgb:lh,"srgb-linear":b1,"":b1},lre=i=>i.outputColorSpace!==void 0,cre=i=>{const e=Is(void 0),t=(n,r)=>{i.renderer=new C5({powerPreference:"high-performance",canvas:n,antialias:!0,alpha:!0,...r}),e.set(i.renderer)};return eI([e,i.size,i.toneMapping,i.colorSpace,i.dpr,i.shadows,i.colorManagementEnabled,i.useLegacyLights],([n,r,s,a,o,l,c,u])=>{if(!n)return;if(n.setSize(r.width,r.height),n.setPixelRatio(o),lre(n))n.outputColorSpace=a;else{const d=ore[a];d?n.outputEncoding=d:console.warn("No encoding found for colorSpace",a)}n.toneMapping=s,n.shadowMap.enabled=!!l,l&&l!==!0?n.shadowMap.type=l:l===!0&&(n.shadowMap.type=h2);const h=Ul;h.enabled!==void 0?h.enabled=c:h.legacyMode!==void 0&&(h.legacyMode=!c);const f=n;u&&f.useLegacyLights!==void 0?f.useLegacyLights=u:f.physicallyCorrectLights!==void 0&&(f.physicallyCorrectLights=!u)}),Ha(()=>{var n;(n=i.renderer)==null||n.dispose()}),{createRenderer:t}};function W8(i){let e,t;return e=new Z5({props:{is:i[3].ctx.scene,$$slots:{default:[ure]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},p(n,r){const s={};r&131072&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function ure(i){let e;const t=i[15].default,n=ni(t,i,i[17],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&131072)&&ii(n,t,r,r[17],e?si(t,r[17],s,null):ri(r[17]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function hre(i){let e,t,n,r,s=i[1]&&W8(i);return{c(){e=ht("canvas"),s&&s.c(),this.h()},l(a){e=ft(a,"CANVAS",{class:!0});var o=Pt(e);s&&s.l(o),o.forEach(Z),this.h()},h(){it(e,"class","svelte-15bl8wt")},m(a,o){Pe(a,e,o),s&&s.m(e,null),i[16](e),t=!0,n||(r=sa(i[2].call(null,e)),n=!0)},p(a,[o]){a[1]?s?(s.p(a,o),o&2&&oe(s,1)):(s=W8(a),s.c(),oe(s,1),s.m(e,null)):s&&(Rs(),pe(s,1,1,()=>{s=null}),Ds())},i(a){t||(oe(s),t=!0)},o(a){pe(s),t=!1},d(a){a&&Z(e),s&&s.d(),i[16](null),n=!1,r()}}}const Y8=new Set;function fre(i,e,t){let{$$slots:n={},$$scope:r}=e,{dpr:s=W2?window.devicePixelRatio:1}=e,{toneMapping:a=i5}=e,{colorSpace:o="srgb"}=e,{frameloop:l="demand"}=e,{debugFrameloop:c=!1}=e,{shadows:u=h2}=e,{size:h=void 0}=e,{rendererParameters:f=void 0}=e,{colorManagementEnabled:d=!0}=e,{useLegacyLights:g=!0}=e,v,A=!1;const _=Is(h),{parentSize:y,parentSizeAction:x}=Xie(),C=tre({colorSpace:o,toneMapping:a,dpr:s,userSize:_,parentSize:y,debugFrameloop:c,frameloop:l,shadows:u,colorManagementEnabled:d,useLegacyLights:g});Kie();const S=C.ctx;ere(S),Y8.add(S.invalidate),Ha(()=>{Y8.delete(S.invalidate)});const{createRenderer:I}=cre(S);Au(()=>{v&&(I(v,f),are(C.ctx,C.internalCtx),t(1,A=!0))}),Ha(()=>{var B;C.internalCtx.dispose(!0),(B=C.ctx.renderer)==null||B.setAnimationLoop(null)});function P(B){Wa[B?"unshift":"push"](()=>{v=B,t(0,v)})}return i.$$set=B=>{"dpr"in B&&t(4,s=B.dpr),"toneMapping"in B&&t(5,a=B.toneMapping),"colorSpace"in B&&t(6,o=B.colorSpace),"frameloop"in B&&t(7,l=B.frameloop),"debugFrameloop"in B&&t(8,c=B.debugFrameloop),"shadows"in B&&t(9,u=B.shadows),"size"in B&&t(10,h=B.size),"rendererParameters"in B&&t(11,f=B.rendererParameters),"colorManagementEnabled"in B&&t(12,d=B.colorManagementEnabled),"useLegacyLights"in B&&t(13,g=B.useLegacyLights),"$$scope"in B&&t(17,r=B.$$scope)},i.$$.update=()=>{i.$$.dirty&1024&&_.set(h)},[v,A,x,C,s,a,o,l,c,u,h,f,d,g,S,n,P,r]}class dre extends ln{constructor(e){super(),cn(this,e,fre,hre,an,{dpr:4,toneMapping:5,colorSpace:6,frameloop:7,debugFrameloop:8,shadows:9,size:10,rendererParameters:11,colorManagementEnabled:12,useLegacyLights:13,ctx:14})}get ctx(){return this.$$.ctx[14]}}const lN={},pre=i=>{Object.assign(lN,i)},mre=(i,e)=>{const t=lN[e]||iN[e];if(!t)throw new Error(`No Three.js module found for ${e}. Did you forget to extend the catalogue?`);return{...i,props:{...i.props,is:t}}},gre=i=>new Proxy(class{},{construct(e,[t]){const n=t;return new Z5(mre(n,i))}}),Oo=new Proxy(class{},{construct(i,[e]){const t=e;return new Z5(t)},get(i,e){return gre(e)}}),cN=(i,e)=>{if(!W2)return{start:()=>{},stop:()=>{},started:s2(!1)};const t=(e==null?void 0:e.invalidate)??!0,n=gu("threlte-internal-context"),r={fn:i,order:e==null?void 0:e.order,debugFrameloopMessage:e==null?void 0:e.debugFrameloopMessage,invalidate:t},s=Is(!1),a=()=>{t?n.autoFrameHandlers.delete(r):n.manualFrameHandlers.delete(r),n.allFrameHandlers.delete(r),s.set(!1)},o=()=>{t?n.autoFrameHandlers.add(r):n.manualFrameHandlers.add(r),n.allFrameHandlers.add(r),n.allFrameHandlersNeedSortCheck=!0,s.set(!0)};return((e==null?void 0:e.autostart)??!0)&&o(),Ha(()=>{a()}),{start:o,stop:a,started:{subscribe:s.subscribe}}},vre=(i,e)=>{if(!W2)return;const t=gu("threlte-internal-context"),n={fn:i,order:e==null?void 0:e.order};t.renderHandlers.add(n),t.renderHandlersNeedSortCheck=!0,Ha(()=>{t.renderHandlers.delete(n)})},uS=i=>{const e=Is(void 0),t=Is(void 0);return i.then(n=>{e.set(n)}).catch(n=>{console.error("Error in asyncWritable:",n.message),t.set(n)}),Object.assign(Object.assign(i,e),{error:t,promise:i})},uN=(i,e={})=>{var o;const{remember:t,clear:n}=Jie(),r=new i;return(o=e.extend)==null||o.call(e,r),{load:(l,c)=>{if(Array.isArray(l)){const u=l.map(f=>t(async()=>{var g;const d=await r.loadAsync(f,c==null?void 0:c.onProgress);return((g=c==null?void 0:c.transform)==null?void 0:g.call(c,d))??d},[i,f]));return uS(Promise.all(u))}else if(typeof l=="string"){const u=t(async()=>{var d;const f=await r.loadAsync(l,c==null?void 0:c.onProgress);return((d=c==null?void 0:c.transform)==null?void 0:d.call(c,f))??f},[i,l]);return uS(u)}else{const u=Object.values(l).map(f=>t(async()=>{var g;const d=await r.loadAsync(f,c==null?void 0:c.onProgress);return((g=c==null?void 0:c.transform)==null?void 0:g.call(c,d))??d},[i,f]));return uS(Promise.all(u).then(f=>Object.fromEntries(Object.entries(l).map(([d],g)=>[d,f[g]]))))}},clear:l=>{Array.isArray(l)?l.forEach(c=>{n([i,c])}):typeof l=="string"?n([i,l]):Object.entries(l).forEach(([c,u])=>{n([i,c,u])})},loader:r}},hN=()=>{const i=J1(),e=Is(void 0);return eI(e,t=>{t&&Object.entries(i.$$.callbacks).forEach(n=>{const[r,s]=n;r in t.$$.callbacks&&Array.isArray(t.$$.callbacks[r])?t.$$.callbacks[r].push(...s):t.$$.callbacks[r]=s})}),e};class _re{static apply(e){e.set=function(t){const n=this.options||{},r=Object.entries(t).reduce(function(s,[a,o]){return n[a]!==o&&(s[a]=o),s},{});this.options=Object.assign(n,r),this.trigger({type:"change",options:t,changes:r})},e.get=function(){return this.options},e.api=function(t,n){return t||(t={}),n&&Object.entries(t).forEach(function([r,s]){typeof s=="function"&&(t[r]=(...a)=>s(...a,n))}),t.set=this.set.bind(this),t.get=this.get.bind(this),t}}}class pu{static bind(e,t){return function(n,r){r.__binds||(r.__binds=[]);let s=e;Array.isArray(n)&&(s=n[0],n=n[1]);const a=/^([^.:]*(?:\.[^.:]+)*)?(?::(.*))?$/.exec(n),o=a[1].split(/\./g),l=o.pop(),c=a[2]||l,u=o.shift();let h={this:r}[u]||t[u]||e[u]||s;for(;h&&(n=o.shift());)h=h[n];if(h&&(h.on||h.addEventListener)){const f=function(g){r[c]&&r[c](g,e)};pu._polyfill(h,["addEventListener","on"],function(g){h[g](l,f)});const d={target:h,name:l,callback:f};return r.__binds.push(d),f}else throw"Cannot bind '"+n+"' in "+this.__name}}static unbind(){return function(e){e.__binds&&(e.__binds.forEach((function(t){pu._polyfill(t.target,["removeEventListener","off"],function(n){t.target[n](t.name,t.callback)})}).bind(this)),e.__binds=[])}}static apply(e){e.trigger=pu._trigger,e.triggerOnce=pu._triggerOnce,e.hasEventListener=Oc.prototype.hasEventListener,e.addEventListener=Oc.prototype.addEventListener,e.removeEventListener=Oc.prototype.removeEventListener,e.on=e.addEventListener,e.off=e.removeEventListener,e.dispatchEvent=e.trigger}static _triggerOnce(e){this.trigger(e),this._listeners&&delete this._listeners[e.type]}static _trigger(e){if(this._listeners===void 0)return;const t=e.type;let n=this._listeners[t];if(n!==void 0){n=n.slice();const r=n.length;e.target=this;for(let s=0;s<r;s++)n[s].call(this,e,this)}}static _polyfill(e,t,n){t.map(function(r){return e.method}),t.length&&n(t[0])}}function X8(i){return i&&typeof i.valueOf()=="string"}const Are=(i,e)=>{let t=0;for(const n of i){if(e(n,t,i)===!1)break;t++}};class Ji{static initClass(){this.Plugins={},this.Aliases={}}static registerPlugin(e,t){const n=function(r){Ji.Plugin.call(this,r),this.__name=e};n.prototype=Object.assign(new Ji.Plugin,t),this.Plugins[e]=n}static unregisterPlugin(e){delete this.Plugins[e]}static registerAlias(e,t){this.Aliases[e]=t}static unregisterAlias(e){delete this.Aliases[e]}constructor(e){if(e){let r=[].slice.apply(arguments);if(e={},r[0]instanceof Node){const s=r[0];r=r.slice(1),e.element=s}X8(r[0])?e.plugins=r:Array.isArray(r[0])?e.plugins=r[0]:r[0]&&(e=Object.assign({},r[0],e))}const t={init:!0,element:document.body,plugins:["core"],aliases:{},plugindb:Ji.Plugins||{},aliasdb:Ji.Aliases||{}};this.__options=Object.assign({},t,e||{}),this.__inited=!1,this.__destroyed=!1,this.__installed=[];let n=this.__options.element;n===""+n&&(n=document.querySelector(n)),this.plugins={},this.element=n,this.trigger=this.trigger.bind(this),this.frame=this.frame.bind(this),this.events=["pre","update","render","post"].map(function(r){return{type:r}}),this.__options.init&&this.init()}init(){this.__inited||(this.__inited=!0,this.install(this.__options.plugins))}destroy(){this.__inited&&(this.__destroyed||(this.__destroyed=!0,this.trigger({type:"destroy"}),this.uninstall()))}frame(){this.events.map(this.trigger)}resolve(e){e=Array.isArray(e)?e:[e];const t=this.__options,n=Object.assign({},t.aliasdb,t.aliases),r=function(a){const o=a.split(":");return o[1]?(n[o[0]]=[o[1]],!1):!0};e=e.filter(r),Object.entries(n).forEach(function([a,o]){n[a]=Array.isArray(o)?o:[o]});function s(a,o,l){if(l>=256)throw"Plug-in alias recursion detected.";return a=a.filter(r),a.forEach(function(c){const u=n[c];u?o=o.concat(s(u,[],l+1)):o.push(c)}),o}return s(e,[],0)}install(e){e=Array.isArray(e)?e:[e],e=this.resolve(e),Are(e,t=>this.__install(t)),this.__ready()}uninstall(e){e&&(e=Array.isArray(e)?e:[e],e=this.resolve(e)),(e||this.__installed).reverse().forEach(t=>this.__uninstall(t))}__install(e){const t=this.__options.plugindb[e];if(!t)throw"[three.install] Cannot install. '"+e+"' is not registered.";if(this.plugins[e])return console.warn("[three.install] "+e+" is already installed.");const n=t,r=new n(this.__options[e]||{},e);this.plugins[e]=r;const s=r.install(this);return this.__installed.push(r),this.trigger({type:"install",plugin:r}),s}__uninstall(e){const t=X8(e)?this.plugins[e]:e;if(!t){console.warn("[three.uninstall] "+e+"' is not installed.");return}e=t.__name,t.uninstall(this),this.__installed=this.__installed.filter(n=>n!==t),delete this.plugins[e],this.trigger({type:"uninstall",plugin:t})}__ready(){this.triggerOnce({type:"ready"})}}Ji.initClass();Ji.Plugin=function(i){this.options=Object.assign({},this.defaults,i||{})};Ji.Plugin.prototype={listen:[],defaults:{},install:function(i){},uninstall:function(i){}};pu.apply(Ji.prototype);pu.apply(Ji.Plugin.prototype);_re.apply(Ji.Plugin.prototype);Ji.registerPlugin("splash",{defaults:{color:"mono",fancy:!0},listen:["ready","mathbox/init:init","mathbox/progress:progress","mathbox/destroy:destroy"],uninstall(){return this.destroy()},ready(i,e){if(e.MathBox&&!this.div)return this.init(i,e)},init(i,e){let t;this.destroy();const{color:n}=this.options,r=`<div class="mathbox-loader mathbox-splash-${n}">
  <div class="mathbox-logo">
    <div> <div></div><div></div><div></div> </div>
    <div> <div></div><div></div><div></div> </div>
  </div>
  <div class="mathbox-progress"><div></div></div>
</div>`;this.div=t=document.createElement("div"),t.innerHTML=r,e.element.appendChild(t);const s=Math.random()*2-1,a=Math.random()*2-1,o=Math.random()*2-1,l=1/Math.sqrt(s*s+a*a+o*o);return this.loader=t.querySelector(".mathbox-loader"),this.bar=t.querySelector(".mathbox-progress > div"),this.gyro=t.querySelectorAll(".mathbox-logo > div"),this.transforms=["rotateZ(22deg) rotateX(24deg) rotateY(30deg)","rotateZ(11deg) rotateX(12deg) rotateY(15deg) scale3d(.6, .6, .6)"],this.random=[s*l,a*l,o*l],this.start=e.Time.now,this.timer=null},progress(i,e){if(!this.div)return;const{current:t,total:n}=i,r=t<n;clearTimeout(this.timer),r?(this.loader.classList.remove("mathbox-exit"),this.loader.style.display="block"):(this.loader.classList.add("mathbox-exit"),this.timer=setTimeout(()=>this.loader.style.display="none",150));const s=t<n?Math.round(1e3*t/n)*.1+"%":"100%";if(this.bar.style.width=s,this.options.fancy){const a=this.random,o=Math.max(0,Math.min(1,e.Time.now-this.start)),l=function(c,u){return u==null&&(u=0),c.replace(/(-?[0-9.e]+)deg/g,(h,f)=>+f+a[u++]*o*e.Time.step*60+"deg")};return(()=>{const c=[];for(let u=0;u<this.gyro.length;u++){let h;const f=this.gyro[u];this.transforms[u]=h=l(this.transforms[u]),c.push(f.style.transform=f.style.WebkitTransform=h)}return c})()}},destroy(){return this.div!=null&&this.div.remove(),this.div=null}});Ji.registerAlias("empty",["fallback","bind","renderer","size","fill","loop","time"]);Ji.registerAlias("core",["empty","scene","camera","render","warmup"]);Ji.registerAlias("VR",["core","cursor","fullscreen","render:vr"]);Ji.registerPlugin("bind",{install:function(i){const e={three:i,window};i.bind=pu.bind(i,e),i.unbind=pu.unbind(i),i.bind("install:bind",this),i.bind("uninstall:unbind",this)},uninstall:function(i){i.unbind(this),delete i.bind,delete i.unbind},bind:function(i,e){const t=i.plugin,n=t.listen;n&&n.forEach(function(r){e.bind(r,t)})},unbind:function(i,e){e.unbind(i.plugin)}});Ji.registerPlugin("camera",{defaults:{near:.01,far:1e4,type:"perspective",fov:60,aspect:null,left:-1,right:1,bottom:-1,top:1,klass:null,parameters:null},listen:["resize","this.change"],install:function(i){i.Camera=this.api(),i.camera=null,this.aspect=1,this.change({},i)},uninstall:function(i){delete i.Camera,delete i.camera},change:function(i,e){const t=this.options,n=e.camera;if(!e.camera||i.changes.type||i.changes.klass){const r=t.klass||{perspective:yr,orthographic:yh}[t.type]||oA;e.camera=t.parameters?new r(t.parameters):new r}Object.entries(t).forEach((function([r]){Object.prototype.hasOwnProperty.call(e.camera,r)&&(e.camera[r]=t[r])}).bind(this)),this.update(e),n===e.camera||e.trigger({type:"camera",camera:e.camera})},resize:function(i,e){this.aspect=i.viewWidth/Math.max(1,i.viewHeight),this.update(e)},update:function(i){i.camera.aspect=this.options.aspect||this.aspect,i.camera.updateProjectionMatrix()}});Ji.registerPlugin("fallback",{defaults:{force:!1,fill:!0,begin:'<div class="threestrap-fallback" style="display: table; width: 100%; height: 100%;box-sizing: border-box; border: 1px dashed rgba(0, 0, 0, .25);"><div style="display: table-cell; padding: 10px; vertical-align: middle; text-align: center;">',end:"</div></div>",message:'<big><strong>This example requires WebGL</strong></big><br>Visit <a target="_blank" href="http://get.webgl.org/">get.webgl.org</a> for more info</a>'},install:function(i){let e,t;try{if(e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl"),!t||this.options.force)throw"WebGL unavailable.";i.fallback=!1}catch{const r=this.options.message,s=this.options.begin,a=this.options.end,o=this.options.fill,l=document.createElement("div");for(l.innerHTML=s+r+a,this.children=[];l.childNodes.length>0;)this.children.push(l.firstChild),i.element.appendChild(l.firstChild);return o&&i.install("fill"),this.div=l,i.fallback=!0,!1}},uninstall:function(i){this.children&&(this.children.forEach(function(e){e.parentNode.removeChild(e)}),this.children=null),delete i.fallback}});Ji.registerPlugin("fill",{defaults:{block:!0,body:!0,layout:!0},install:function(i){function e(n){const r=n.style.height;return r=="auto"||r==""}function t(n){return n.style.height="100%",n.style.margin=0,n.style.padding=0,n}this.options.body&&i.element==document.body&&(this.applied=[i.element,document.documentElement].filter(e).map(t)),this.options.block&&i.canvas&&(i.canvas.style.display="block",this.block=!0),this.options.layout&&i.element&&window.getComputedStyle(i.element).position=="static"&&(i.element.style.position="relative",this.layout=!0)},uninstall:function(i){if(this.applied){const e=function(t){return t.style.height="",t.style.margin="",t.style.padding="",t};this.applied.map(e),delete this.applied}this.block&&i.canvas&&(i.canvas.style.display="",delete this.block),this.layout&&i.element&&(i.element.style.position="",delete this.layout)},change:function(i){this.uninstall(i),this.install(i)}});Ji.registerPlugin("loop",{defaults:{start:!0,each:1},listen:["ready"],install:function(i){this.running=!1,this.lastRequestId=null,i.Loop=this.api({start:this.start.bind(this),stop:this.stop.bind(this),running:!1,window},i),this.events=["pre","update","render","post"].map(function(e){return{type:e}})},uninstall:function(i){this.stop(i)},ready:function(i,e){this.options.start&&this.start(e)},start:function(i){if(this.running)return;i.Loop.running=this.running=!0;const e=i.trigger.bind(i),t=(function(){this.running&&(this.lastRequestId=i.Loop.window.requestAnimationFrame(t),this.events.map(e))}).bind(this);this.lastRequestId=i.Loop.window.requestAnimationFrame(t),i.trigger({type:"start"})},stop:function(i){this.running&&(i.Loop.running=this.running=!1,i.Loop.window.cancelAnimationFrame(this.lastRequestId),this.lastRequestId=null,i.trigger({type:"stop"}))}});Ji.registerPlugin("render",{listen:["render"],render:function(i,e){e.scene&&e.camera&&e.renderer.render(e.scene,e.camera)}});Ji.registerPlugin("renderer",{defaults:{klass:E5,parameters:{depth:!0,stencil:!0,preserveDrawingBuffer:!0,antialias:!0}},listen:["resize"],install:function(i){const e=i.renderer=new this.options.klass(this.options.parameters);i.canvas=e.domElement,i.element.appendChild(e.domElement)},uninstall:function(i){i.element.removeChild(i.renderer.domElement),delete i.renderer,delete i.canvas},resize:function(i,e){const t=e.renderer,n=t.domElement;n&&n.tagName=="CANVAS"?t.setSize(i.renderWidth,i.renderHeight,!1):(t.setRenderSize&&t.setRenderSize(i.renderWidth,i.renderHeight),t.setSize(i.viewWidth,i.viewHeight,!1))}});Ji.registerPlugin("scene",{install:function(i){i.scene=new cv},uninstall:function(i){delete i.scene}});Ji.registerPlugin("size",{defaults:{width:null,height:null,aspect:null,scale:1,maxRenderWidth:1/0,maxRenderHeight:1/0,devicePixelRatio:!0},listen:["window.resize:queue","element.resize:queue","this.change:queue","ready:resize","pre:pre"],install:function(i){i.Size=this.api({renderWidth:0,renderHeight:0,viewWidth:0,viewHeight:0}),this.resized=!1},uninstall:function(i){delete i.Size},queue:function(i,e){this.resized=!0},pre:function(i,e){this.resized&&(this.resized=!1,this.resize(i,e))},resize:function(i,e){const t=this.options,n=e.element,r=e.renderer;let s,a,o,l,c,u,h,f,d=0,g=0;s=o=t.width===void 0||t.width==null?n.offsetWidth||n.innerWidth||0:t.width,a=l=t.height===void 0||t.height==null?n.offsetHeight||n.innerHeight||0:t.height,h=s/a,t.aspect&&(t.aspect>h?(a=Math.round(s/t.aspect),g=Math.floor((l-a)/2)):(s=Math.round(a*t.aspect),d=Math.floor((o-s)/2)),h=s/a),f=1,t.devicePixelRatio&&typeof window<"u"&&(f=window.devicePixelRatio||1),c=Math.round(Math.min(s*f*t.scale,t.maxRenderWidth)),u=Math.round(Math.min(a*f*t.scale,t.maxRenderHeight)),c/u>h?c=Math.round(u*h):u=Math.round(c/h),f=u/a;const A=r.domElement.style;A.width=s+"px",A.height=a+"px",A.marginLeft=d+"px",A.marginTop=g+"px",Object.assign(e.Size,{renderWidth:c,renderHeight:u,viewWidth:s,viewHeight:a,aspect:h,pixelRatio:f}),e.trigger({type:"resize",renderWidth:c,renderHeight:u,viewWidth:s,viewHeight:a,aspect:h,pixelRatio:f})}});Ji.registerPlugin("time",{defaults:{speed:1,warmup:0,timeout:1},listen:["pre:tick","this.change"],now:function(){return+new Date/1e3},install:function(i){i.Time=this.api({now:this.now(),clock:0,step:1/60,frames:0,time:0,delta:1/60,average:0,fps:0}),this.last=0,this.time=0,this.clock=0,this.wait=this.options.warmup,this.clockStart=0,this.timeStart=0},tick:function(i,e){const t=this.options.speed,n=this.options.timeout,r=e.Time,s=r.now=this.now(),a=this.last;let o=this.time,l=this.clock;if(a){let c=r.delta=s-a;const u=r.average||c;c>n&&(c=0);const h=c*t;o+=c,l+=h,r.frames>0&&(r.average=u+(c-u)*.1,r.fps=1/u),r.step=h,r.clock=l-this.clockStart,r.time=o-this.timeStart,r.frames++,this.wait-- >0&&(this.clockStart=l,this.timeStart=o,r.clock=0,r.step=1e-100)}this.last=s,this.clock=l,this.time=o},uninstall:function(i){delete i.Time}});Ji.registerPlugin("warmup",{defaults:{delay:2},listen:["ready","post"],ready:function(i,e){e.renderer.domElement.style.visibility="hidden",this.frame=0,this.hidden=!0},post:function(i,e){this.hidden&&this.frame>=this.options.delay&&(e.renderer.domElement.style.visibility="visible",this.hidden=!1),this.frame++}});Ji.registerPlugin("controls",{listen:["update","resize","camera","this.change"],defaults:{klass:null,parameters:{}},install:function(i){if(!this.options.klass)throw"Must provide class for `controls.klass`";i.controls=null,this._camera=i.camera||new yr,this.change(null,i)},uninstall:function(i){delete i.controls},change:function(i,e){this.options.klass?((!i||i.changes.klass)&&(e.controls=new this.options.klass(this._camera,e.renderer.domElement)),Object.assign(e.controls,this.options.parameters)):e.controls=null},update:function(i,e){const t=e.Time&&e.Time.delta||.016666666666666666,n=e.VR&&e.VR.state;e.controls.vr&&e.controls.vr(n),e.controls.update(t)},camera:function(i,e){e.controls.object=this._camera=i.camera},resize:function(i,e){e.controls.handleResize&&e.controls.handleResize()}});Ji.registerPlugin("cursor",{listen:["update","this.change","install:change","uninstall:change","element.mousemove","vr"],defaults:{cursor:null,hide:!1,timeout:3},install:function(i){this.timeout=this.options.timeout,this.element=i.element,this.change(null,i)},uninstall:function(i){delete i.controls},change:function(i,e){this.applyCursor(e)},mousemove:function(i,e){this.options.hide&&(this.applyCursor(e),this.timeout=+this.options.timeout||0)},update:function(i,e){const t=e.Time&&e.Time.delta||.016666666666666666;this.options.hide&&(this.timeout-=t,this.timeout<0&&this.applyCursor(e,"none"))},vr:function(i,e){this.hide=i.active&&!i.hmd.fake,this.applyCursor(e)},applyCursor:function(i,e){const t=i.controls?"move":"";e=e||this.options.cursor||t,this.hide&&(e="none"),this.cursor!=e&&(this.element.style.cursor=e)}});Ji.registerPlugin("fullscreen",{defaults:{key:"f"},listen:["ready","update"],install:function(i){i.Fullscreen=this.api({active:!1,toggle:this.toggle.bind(this)},i)},uninstall:function(i){delete i.Fullscreen},ready:function(i,e){document.body.addEventListener("keypress",(function(n){this.options.key&&n.charCode==this.options.key.charCodeAt(0)&&this.toggle(e)}).bind(this));const t=(function(){const n=!!document.fullscreenElement||!!document.mozFullScreenElement||!!document.webkitFullscreenElement||!!document.msFullscreenElement;e.Fullscreen.active=this.active=n,e.trigger({type:"fullscreen",active:n})}).bind(this);document.addEventListener("fullscreenchange",t,!1),document.addEventListener("webkitfullscreenchange",t,!1),document.addEventListener("mozfullscreenchange",t,!1)},toggle:function(i){const e=i.canvas,t=i.VR&&i.VR.active?{vrDisplay:i.VR.hmd}:{};this.active?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen&&document.mozCancelFullScreen():e.requestFullScreen?e.requestFullScreen(t):e.msRequestFullScreen?e.msRequestFullscreen(t):e.webkitRequestFullscreen?e.webkitRequestFullscreen(t):e.mozRequestFullScreen&&e.mozRequestFullScreen(t)}});var fN={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(bt,function(){var t=function(){function n(d){return a.appendChild(d.dom),d}function r(d){for(var g=0;g<a.children.length;g++)a.children[g].style.display=g===d?"block":"none";s=d}var s=0,a=document.createElement("div");a.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",a.addEventListener("click",function(d){d.preventDefault(),r(++s%a.children.length)},!1);var o=(performance||Date).now(),l=o,c=0,u=n(new t.Panel("FPS","#0ff","#002")),h=n(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var f=n(new t.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:a,addPanel:n,showPanel:r,begin:function(){o=(performance||Date).now()},end:function(){c++;var d=(performance||Date).now();if(h.update(d-o,200),d>l+1e3&&(u.update(1e3*c/(d-l),100),l=d,c=0,f)){var g=performance.memory;f.update(g.usedJSHeapSize/1048576,g.jsHeapSizeLimit/1048576)}return d},update:function(){o=this.end()},domElement:a,setMode:r}};return t.Panel=function(n,r,s){var a=1/0,o=0,l=Math.round,c=l(window.devicePixelRatio||1),u=80*c,h=48*c,f=3*c,d=2*c,g=3*c,v=15*c,A=74*c,_=30*c,y=document.createElement("canvas");y.width=u,y.height=h,y.style.cssText="width:80px;height:48px";var x=y.getContext("2d");return x.font="bold "+9*c+"px Helvetica,Arial,sans-serif",x.textBaseline="top",x.fillStyle=s,x.fillRect(0,0,u,h),x.fillStyle=r,x.fillText(n,f,d),x.fillRect(g,v,A,_),x.fillStyle=s,x.globalAlpha=.9,x.fillRect(g,v,A,_),{dom:y,update:function(C,S){a=Math.min(a,C),o=Math.max(o,C),x.fillStyle=s,x.globalAlpha=1,x.fillRect(0,0,u,v),x.fillStyle=r,x.fillText(l(C)+" "+n+" ("+l(a)+"-"+l(o)+")",f,d),x.drawImage(y,g+c,v,A-c,_,g,v,A-c,_),x.fillRect(g+A-c,v,c,_),x.fillStyle=s,x.globalAlpha=.9,x.fillRect(g+A-c,v,c,l((1-C/S)*_))}}},t})})(fN);var bre=fN.exports;const yre=U0(bre);Ji.registerPlugin("stats",{listen:["pre","post"],install:function(i){const e=this.stats=new yre,t=e.domElement.style;t.position="absolute",t.top=t.left=0,i.element.appendChild(e.domElement),i.stats=e},uninstall:function(i){this.stats.domElement.remove(),delete i.stats},pre:function(i,e){this.stats.begin()},post:function(i,e){this.stats.end()}});Ji.registerPlugin("ui",{defaults:{theme:"white",style:".threestrap-ui { position: absolute; bottom: 5px; right: 5px; float: left; }.threestrap-ui button { border: 0; background: none;  vertical-align: middle; font-weight: bold; } .threestrap-ui .glyphicon { top: 2px; font-weight: bold; } @media (max-width: 640px) { .threestrap-ui button { font-size: 120% } }.threestrap-white button { color: #fff; text-shadow: 0 1px 1px rgba(0, 0, 0, 1), 0 1px 3px rgba(0, 0, 0, 1); }.threestrap-black button { color: #000; text-shadow: 0 0px 1px rgba(255, 255, 255, 1), 0 0px 2px rgba(255, 255, 255, 1), 0 0px 2px rgba(255, 255, 255, 1) }"},listen:["fullscreen"],markup:function(i,e,t){let n="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css";location.href.match(/^file:\/\//)&&(n="http://"+n);const r=[];return i.Fullscreen&&r.push('<button class="fullscreen" title="Full Screen"><span class="glyphicon glyphicon-fullscreen"></span></button>'),i.VR&&r.push('<button class="vr" title="VR Headset">VR</button>'),'<style type="text/css">@import url("'+n+'"); '+t+'</style><div class="threestrap-ui threestrap-'+e+'">'+r.join(`
`)+"</div>"},install:function(i){const e=this.ui=document.createElement("div");e.innerHTML=this.markup(i,this.options.theme,this.options.style),document.body.appendChild(e);const t=this.ui.fullscreen=e.querySelector("button.fullscreen");t&&i.bind([t,"click:goFullscreen"],this);const n=this.ui.vr=e.querySelector("button.vr");n&&i.VR&&(i.VR.set({mode:"2d"}),i.bind([n,"click:goVR"],this))},fullscreen:function(i,e){this.ui.style.display=i.active?"none":"block",i.active||e.VR&&e.VR.set({mode:"2d"})},goFullscreen:function(i,e){e.Fullscreen&&e.Fullscreen.toggle()},goVR:function(i,e){e.VR&&(e.VR.set({mode:"auto"}),e.Fullscreen.toggle())},uninstall:function(i){document.body.removeChild(this.ui)}});class K8{constructor(e,t){this.renderer=e,this.right=new fe,this.cameraLeft=new yr,this.cameraRight=new yr;const n=t.getEyeTranslation("left");this.halfIPD=new fe(n.x,n.y,n.z).length(),this.fovLeft=t.getRecommendedEyeFieldOfView("left"),this.fovRight=t.getRecommendedEyeFieldOfView("right")}FovToNDCScaleOffset(e){const t=2/(e.leftTan+e.rightTan),n=(e.leftTan-e.rightTan)*t*.5,r=2/(e.upTan+e.downTan),s=(e.upTan-e.downTan)*r*.5;return{scale:[t,r],offset:[n,s]}}FovPortToProjection(e,t,n,r,s){n=n===void 0?!0:n,r=r===void 0?.01:r,s=s===void 0?1e4:s;const a=n?-1:1,o=e.elements,l=this.FovToNDCScaleOffset(t);o[0*4+0]=l.scale[0],o[0*4+1]=0,o[0*4+2]=l.offset[0]*a,o[0*4+3]=0,o[1*4+0]=0,o[1*4+1]=l.scale[1],o[1*4+2]=-l.offset[1]*a,o[1*4+3]=0,o[2*4+0]=0,o[2*4+1]=0,o[2*4+2]=s/(r-s)*-a,o[2*4+3]=s*r/(r-s),o[3*4+0]=0,o[3*4+1]=0,o[3*4+2]=a,o[3*4+3]=0,e.transpose()}FovToProjection(e,t,n,r,s){const a={upTan:Math.tan(t.upDegrees*Math.PI/180),downTan:Math.tan(t.downDegrees*Math.PI/180),leftTan:Math.tan(t.leftDegrees*Math.PI/180),rightTan:Math.tan(t.rightDegrees*Math.PI/180)};return this.FovPortToProjection(e,a,n,r,s)}render(e,t){this.FovToProjection(this.cameraLeft.projectionMatrix,this.fovLeft,!0,t.near,t.far),this.FovToProjection(this.cameraRight.projectionMatrix,this.fovRight,!0,t.near,t.far),this.right.set(this.halfIPD,0,0),this.right.applyQuaternion(t.quaternion),this.cameraLeft.position.copy(t.position).sub(this.right),this.cameraRight.position.copy(t.position).add(this.right),this.cameraLeft.quaternion.copy(t.quaternion),this.cameraRight.quaternion.copy(t.quaternion);const n=this.renderer.devicePixelRatio||1,r=this.renderer.domElement.width/2/n,s=this.renderer.domElement.height/n;this.renderer.enableScissorTest(!0),this.renderer.setViewport(0,0,r,s),this.renderer.setScissor(0,0,r,s),this.renderer.render(e,this.cameraLeft),this.renderer.setViewport(r,0,r,s),this.renderer.setScissor(r,0,r,s),this.renderer.render(e,this.cameraRight)}}Ji.registerPlugin("vr",{defaults:{mode:"auto",device:null,fov:80},listen:["window.load","pre","render","resize","this.change"],install:function(i){i.VR=this.api({active:!1,devices:[],hmd:null,sensor:null,renderer:null,state:null},i)},uninstall:function(i){delete i.VR},mocks:function(i,e,t){return[{fake:!0,force:1,deviceId:"emu",deviceName:"Emulated",getEyeTranslation:function(o){return{left:{x:-.03,y:0,z:0},right:{x:.03,y:0,z:0}}[o]},getRecommendedEyeFieldOfView:function(o){const l=i.camera,c=l&&l.aspect||16/9,u=(e||l&&l.fov||t)/2,h=Math.atan(Math.tan(u*Math.PI/180)*c/2)*180/Math.PI,f=u;return{left:{rightDegrees:h,leftDegrees:h,downDegrees:f,upDegrees:f},right:{rightDegrees:h,leftDegrees:h,downDegrees:f,upDegrees:f}}[o]}},{force:2,getState:function(){return{}}}]},load:function(i,e){const t=(function(n){this.callback(n,e)}).bind(this);navigator.getVRDevices?navigator.getVRDevices().then(t):navigator.mozGetVRDevices?navigator.mozGetVRDevices(t):(console.warn("No native VR support detected."),t(this.mocks(e,this.options.fov,this.defaults.fov),e))},callback:function(i,e){let t,n;const r=window.HMDVRDevice||function(){},s=window.PositionSensorVRDevice||function(){};i=e.VR.devices=i||e.VR.devices;const a=this.options.device;let o;for(let l=0;l<i.length;++l)if(o=i[l],o.force==1||o instanceof r){if(a&&a!=o.deviceId)continue;t=o;break}if(t){let l;for(let c=0;c<i.length;++c)if(l=i[c],l.force==2||l instanceof s&&l.hardwareUnitId==t.hardwareUnitId){n=l;break}this.hookup(t,n,e)}},hookup:function(i,e,t){K8||console.log("VRRenderer not found");const n=K8||function(){};this.renderer=new n(t.renderer,i),this.hmd=i,this.sensor=e,t.VR.renderer=this.renderer,t.VR.hmd=i,t.VR.sensor=e,console.log("VRRenderer",i.deviceName)},change:function(i,e){i.changes.device&&this.callback(null,e),this.pre(i,e)},pre:function(i,e){const t=this.active,n=this.active=this.renderer&&this.options.mode!="2d";if(e.VR.active=n,n&&this.sensor){const r=this.sensor.getState();e.VR.state=r}else e.VR.state=null;t!=this.active&&e.trigger({type:"vr",active:n,hmd:this.hmd,sensor:this.sensor})},resize:function(i,e){this.active&&this.renderer.initialize()},render:function(i,e){if(e.scene&&e.camera){const t=this.active?this.renderer:e.renderer;if(this.last!=t&&t==e.renderer){const n=t.getPixelRatio(),r=t.domElement.width/n,s=t.domElement.height/n;t.setScissorTest(!1),t.setViewport(0,0,r,s)}this.last=t,t.render(e.scene,e.camera)}}});class dN{constructor(e,t){this.context=t,this.traits=e.Traits,this.types=e.Types,this.pending=[],this.bound=[],this.last=null}make(e){return{enum:typeof e.enum=="function"?e.enum():void 0,type:typeof e.uniform=="function"?e.uniform():void 0,value:e.make()}}apply(e,t){return new wre(e,t,this)}bind(e){return this.bound.push(e)}unbind(e){return this.bound=Array.from(this.bound).filter(t=>t!==e)}queue(e,t,n,r){return this.lastObject=t,this.lastKey=n,this.lastValue=r,this.pending.push(e)}invoke(e){return e(this.context.time.clock,this.context.time.step)}compute(){if(this.bound.length)for(const e of Array.from(this.bound))this.invoke(e)}digest(){let e;if(!this.pending.length)return!1;[e,this.pending]=Array.from([this.pending,[]]);for(const t of Array.from(e))t();return!0}getTrait(e){return this.traits[e]}getLastTrigger(){return`${this.lastObject.toString()} - ${this.lastKey}=\`${this.lastValue}\``}}const Xy=function(i){const e={};for(const t in i){const n=i[t];e[t]=n}return e};let wre=class{constructor(e,t,n){let r,s,a,o,l,c,u,{props:h}=t;const{traits:f,finals:d,freeform:g}=t,v=this;e.props!=null&&e.expr!=null&&e.orig!=null&&e.computed!=null&&e.attributes!=null&&(c=Xy(e.props),o=Xy(e.expr),l=e.orig(),a=e.computed(),e.attributes!=null&&e.attributes.dispose());const A={},_={},y={},x=le=>y[le]!=null?y[le]:le,C=function(le,he){if(y[he])throw new Error(`${e.toString()} - Duplicate property \`${he}\``);return y[he]=le},S=le=>(v[le]!=null?v[le].value:void 0)!=null?v[le]!=null?v[le].value:void 0:xre(v[x(le)],he=>he.value),I=function(le,he,xe,pt){let Ze;if(le=x(le),(Ze=v[le])==null){if(!g)throw new Error(`${e.toString()} - Setting unknown property \`${le}={${he}}\``);Ze=v[le]={short:le,type:null,last:null,value:null},J[le]=Se=>Se}if(!xe){if(F[le])throw new Error(`${e.toString()} - Can't set bound property \`${le}={${he}}\``);if(z[le])throw new Error(`${e.toString()} - Can't set computed property \`${le}={${he}}\``);if(U[le])throw new Error(`${e.toString()} - Can't set final property \`${le}={${he}}\``)}let me=!0;const te=ge(le,he,Ze.last,function(){return me=!1,null});if(me){[Ze.value,Ze.last]=Array.from([te,Ze.value]);const{short:Se}=Ze;A[Se]=te,xe||(_[Se]=he),!pt&&!Me(le,Ze.value,Ze.last)&&Ue(le,he)}return me},P=function(le,he,xe){return le=x(le),I(le,he,!0,xe),U[le]=!0},B={},M={},D={},F={},z={},U={},$=function(le,he,xe){if(xe==null&&(xe=!1),le=x(le),typeof he!="function")throw new Error(`${e.toString()} - Expression \`${le}=>{${B}}\` is not a function`);if(F[le])throw new Error(`${e.toString()} - Property \`${le}=>{${B}}\` is already bound`);if(z[le])throw new Error(`${e.toString()} - Property \`${le}\` is computed`);if(U[le])throw new Error(`${e.toString()} - Property \`${le}\` is final`);const pt=xe?z:F;pt[le]=he;const Ze=v[le]!=null?v[le].short:le;return xe||(B[Ze]=he),D[le]=he,he=he.bind(e),M[le]=function(me,te){let Se;return(Se=e.clock!=null?e.clock.getTime():void 0)&&(me=Se.clock,te=Se.step),e.set(le,he(me,te),!0)},n.bind(M[le])},O=function(le,he){he==null&&(he=!1),le=x(le);const xe=he?z:F;if(xe[le])return n.unbind(M[le]),delete M[le],delete xe[le],v[le]!=null&&(le=v[le].short),delete B[le]},ie=function(le,he){let xe;return le=x(le),(xe=typeof D[le]=="function"?D[le](he,0):void 0)!=null?xe:v[le].value};e.expr=B,e.props=A,e.evaluate=function(le,he){if(le!=null)return ie(le,he);{const xe={};for(le in h)xe[le]=ie(le,he);return xe}},e.get=function(le){return le!=null?S(le):A},e.set=function(le,he,xe,pt){if(typeof le=="string")I(le,he,xe,pt);else{pt=xe,xe=he;const Ze=le;for(le in Ze)he=Ze[le],I(le,he,xe,pt)}},e.bind=function(le,he,xe){if(typeof le=="string")$(le,he,xe);else{xe=he;const pt=le;for(le in pt)he=pt[le],$(le,he,xe)}},e.unbind=function(le,he){if(typeof le=="string")O(le,he);else{he=B;const xe=le;for(le in xe)O(le,he)}},e.attribute=function(le){return le!=null?v[x(le)]:v},e.orig=function(le){return le!=null?_[x(le)]:Xy(_)},e.computed=function(le){return le!=null?z[x(le)]:Xy(z)};const W={},J={},Ce={},Me=(le,he,xe)=>Ce[le](he,xe),ge=(le,he,xe,pt)=>J[le](he,xe,pt);e.validate=function(le,he){let xe;le=x(le);const pt=W[le];return pt!=null&&(xe=pt()),xe=ge(le,he,xe,function(){throw new Error(`${e.toString()} - Invalid value \`${le}={${he}}\``)})};let ve=!1,nt={},$e={},X={},Be={};const mt=le=>le.split(".")[0],Ue=function(le,he){ve||(ve=!0,n.queue(yt,e,le,he));const xe=mt(le);return nt[le]=!0,$e[xe]=!0},Tt={type:"change",changed:null,touched:null},yt=function(){let le;Tt.changed=nt,Tt.touched=$e,nt=X,$e=Be,{changed:X}=Tt,{touched:Be}=Tt,ve=!1;for(le in nt)nt[le]=!1;for(le in $e)$e[le]=!1;return Tt.type="change",e.trigger(Tt),(()=>{const he=[];for(const xe in Tt.touched)Tt.type=`change:${xe}`,he.push(e.trigger(Tt));return he})()},Ye=function(le){const he=le.split(/\./g),xe=he.pop();return he.pop(),he.unshift(xe),he.reduce((pt,Ze)=>pt+Ze.charAt(0).toUpperCase()+Ze.substring(1))},lt=(le,he)=>(()=>{const xe=[];for(let pt in he){let Ze;const me=he[pt];pt=[le,pt].join(".");const te=Ye(pt);v[pt]={T:me,ns:le,short:te,enum:typeof me.enum=="function"?me.enum():void 0,type:typeof me.uniform=="function"?me.uniform():void 0,last:me.make(),value:Ze=me.make()},C(pt,te),A[te]=Ze,W[pt]=me.make,J[pt]=me.validate!=null?me.validate:Se=>Se,xe.push(Ce[pt]=me.equals!=null?me.equals:(Se,j)=>Se===j)}return xe})(),ue=[];for(let le of Array.from(f)){[le,s]=Array.from(le.split(":"));const he=s?[s,le].join("."):le;u=n.getTrait(le),ue.push(le),u!=null&&lt(he,u)}if(h!=null)for(s in h)u=h[s],lt(s,u);const dt=ue.filter((le,he)=>ue.indexOf(le)===he);if(e.traits=dt,c!=null&&e.set(c,!0,!0),d!=null)for(r in d){const le=d[r];P(r,le,!0)}l!=null&&e.set(l,!1,!0),a!=null&&e.bind(a,!0),o!=null&&e.bind(o,!1),this.dispose=function(){for(r in z)O(r,!0);for(r in F)O(r,!1);return h={},delete e.attributes,delete e.get,delete e.set}}};function xre(i,e){return typeof i<"u"&&i!==null?e(i):void 0}const J8=5,Cre=1e-4,Ere=(i,e)=>Math.abs(i/e-Math.round(i/e))<Cre,Ky=i=>Ere(i,1),Sre=function(i,e,t,n){const r=Math.round(i/e);return r===1?`${t}`:r===-1?`-${t}`:t==="1"?`${r}`:n?`${r}${t}`:`${r}*${t}`},Mre=function(i,e,t,n){let r=Math.round(i*e);return Math.abs(r)===1?(r=r<0?"-":"",r+=t):t!=="1"&&(r+=n?`${t}`:`*${t}`),`${r}/${e}`},Z8=[{1:1},{1:1,τ:Math.PI*2},{1:1,π:Math.PI},{1:1,τ:Math.PI*2,π:Math.PI},{1:1,e:Math.E},{1:1,τ:Math.PI*2,e:Math.E},{1:1,π:Math.PI,e:Math.E},{1:1,τ:Math.PI*2,π:Math.PI,e:Math.E}],Tre=[[2*2*3*5*7,[2,3,5,7]],[2*2*2*3*3*5*5*7*7,[2,3,5,7]],[2*2*3*5*7*11*13,[2,3,5,7,11,13]],[2*2*17*19*23*29,[2,17,19,23,29]],[256*256,[2]],[1e6,[2,5]]],pN=function(i){let e,t,n,r,s;i&&({cache:e,compact:t,tau:s,pi:r,e:n}=i),t=+!!(t??!0),s=+!!(s??!0),r=+!!(r??!0),n=+!!(n??!0),e=+!!(e??!0);const a=s+r*2+n*4,o=e?{}:null;return function(l){if(o!=null){let f;if((f=o[l])!=null)return f;if(l===Math.round(l))return o[l]=`${l}`}let c=`${l}`,u=c.length+c.indexOf(".")+2;const h=function(f){const d=f.length;if(d<=u)return c=`${f}`,u=d};for(const f in Z8[a]){const d=Z8[a][f];if(Ky(l/d))h(`${Sre(l/d,1,f,t)}`);else for(let[g,v]of Array.from(Tre)){let A=l/d*g;if(Ky(A)){for(const _ of Array.from(v)){let y,x;for(;Ky(x=A/_)&&Ky(y=g/_);)A=x,g=y}h(`${Mre(l/d,g,f,t)}`);break}}}return`${l}`.length>J8&&h(`${l.toPrecision(J8)}`),o!=null&&(o[l]=c),c}},tI=function(i,e){return e==null&&(e="info"),i=mN(i),console[e].apply(console,i)},mN=function(i){const e="color:rgb(128,0,128)",t="color:rgb(144,64,0)",n="color:rgb(0,0,192)",r="color:rgb(0,70,156)",s="color:inherit";let a=!1,o=0;const l=[];return i=i.replace(/(\\[<={}> "'])|(=>|[<={}> "'])/g,function(c,u,h){return u!=null&&u.length?u:a&&!['"',"'"].includes(h)||o&&!['"',"'","{","}"].includes(h)?h:(()=>{switch(h){case"<":return l.push(e),"%c<";case">":return l.push(e),l.push(s),"%c>%c";case" ":return l.push(t)," %c";case"=":case"=>":return l.push(e),`%c${h}`;case'"':case"'":return a=!a,a?(l.push(o?t:n),`${h}%c`):(l.push(o?r:e),`%c${h}`);case"{":return o++===0?(l.push(r),`%c${h}`):h;case"}":return--o===0?(l.push(e),`${h}%c`):h;default:return h}})()}),[i].concat(l)},Ire=(i,e)=>gN(i,e,"="),Pre=(i,e)=>gN(i,e,"=>"),gN=function(){const i=pN({compact:!1});return function(e,t,n){const r=function(o){return o===""+ +o||o.match(/^[A-Za-z_][A-Za-z0-9]*$/)?o:JSON.stringify(o)},s=function(o){return o.match(`
*"`)?o:`{${o}}`},a=function(o){if(o instanceof Array)return`[${o.map(a).join(", ")}]`;switch(typeof o){case"string":return o.match(`
`)?`"
${o}"
`:`"${o}"`;case"function":return o=`${o}`,o.match(`
`),o=o.replace(/^function (\([^)]*\))/,"$1 =>"),o=o.replace(/^(\([^)]*\)) =>\s*{\s*return\s*([^}]+)\s*;\s*}/,"$1 => $2");case"number":return i(o);default:return o!=null&&o!==!!o?o._up!=null?a(o.map(l=>l)):o.toMarkup?o.toString():"{"+(()=>{const l=[];for(const c in o){const u=o[c];Object.prototype.hasOwnProperty.call(o,c)&&l.push(`${r(c)}: ${a(u)}`)}return l})().join(", ")+"}":`${JSON.stringify(o)}`}};return[e,n,s(a(t))].join("")}}(),hS=function(i){return i=i.replace(/&/g,"&amp;"),i=i.replace(/</g,"&lt;"),i=i.replace(/"/g,"&quot;")},kre=function(i){const e=[].slice.call(arguments);e.shift();let t="<span>";i=hS(i);for(const n of Array.from(e))i=i.replace(/%([a-z])/,function(r,s){const a=e.shift();switch(s){case"c":return`</span><span style="${hS(a)}">`;default:return hS(a)}});return t+=i,t+="</span>"},SM={prop:Ire,bind:Pre},Bre=Object.freeze(Object.defineProperty({__proto__:null,JSX:SM,format:kre,markup:mN,number:pN,print:tI},Symbol.toStringTag,{value:"Module"}));let Rre=0,I1=class{constructor(e,t,n,r,s,a){this.type=e,this._id=(++Rre).toString(),this.configure(s,a),this.parent=this.root=this.path=this.index=null,this.set(t,!0,!0),this.set(n,!1,!0),this.bind(r,!1)}configure(e,t){let{traits:n,props:r,finals:s,freeform:a}=e;return n==null&&(n=(this._config!=null?this._config.traits:void 0)!=null?this._config!=null?this._config.traits:void 0:[]),r==null&&(r=(this._config!=null?this._config.props:void 0)!=null?this._config!=null?this._config.props:void 0:{}),s==null&&(s=(this._config!=null?this._config.finals:void 0)!=null?this._config!=null?this._config.finals:void 0:{}),a==null&&(a=(this._config!=null?this._config.freeform:void 0)!=null?this._config!=null?this._config.freeform:void 0:!1),this._config={traits:n,props:r,finals:s,freeform:a},this.attributes=t.apply(this,this._config)}dispose(){return this.attributes.dispose(),this.attributes=null}_added(e){this.parent=e,this.root=e.root;const t={type:"add",node:this,parent:this.parent};return this.root&&this.root.trigger(t),t.type="added",this.trigger(t)}_removed(){const e={type:"remove",node:this};return this.root&&this.root.trigger(e),e.type="removed",this.trigger(e),this.root=this.parent=null}_index(e,t){let n;if(t==null&&({parent:t}=this),this.index=e,this.path=n=e!=null?((t!=null?t.path:void 0)!=null?t!=null?t.path:void 0:[]).concat([e]):null,this.order=n!=null?this._encode(n):1/0,this.root!=null)return this.trigger({type:"reindex"})}_encode(e){const n=o=>3/(o+3),r=o=>a+(s-a)*o;let s=1.3333333333333333,a=0;for(const o of Array.from(e)){const l=n(o+1),c=n(o+2);[s,a]=Array.from([r(l),r(c)])}return s}toString(){const e=this.id!=null?this.id:this._id,t=this.type!=null?this.type:"node";let n=t;if(n+=`#${e}`,this.classes!=null&&this.classes.length&&(n+=`.${this.classes.join(".")}`),this.children!=null){let r;return(r=this.children.length)?`<${n}>…(${r})…</${t}>`:`<${n}></${t}>`}else return`<${n} />`}toMarkup(e=null,t){let n,r;if(t==null&&(t=""),e&&typeof e!="function"){let d;e=(d=this.root!=null?this.root.model._matcher(e):void 0)!=null?d:()=>!0}const s=this.type!=null?this.type:"node";let{expr:a}=this;const o={id:this._id},l=typeof this.orig=="function"?this.orig():void 0;for(n in l)r=l[n],o[n]=r;const c=(()=>{const d=[];for(n in o)r=o[n],this.expr[n]||d.push(SM.prop(n,r));return d})();a=(()=>{const d=[];for(n in a)r=a[n],d.push(SM.bind(n,r));return d})();let u=[""];c.length&&(u=u.concat(c)),a.length&&(u=u.concat(a)),u=u.join(" ");let h=t;const f=()=>this.children!=null&&this.children.length?this.children.map(d=>d.toMarkup(e,h)).filter(d=>d!=null&&d.length).join(`
`):"";if(e&&!e(this))return f();if(this.children!=null){const d=`<${s}${u}>`,g=`</${s}>`;h=t+"  ";let v=f();return v.length&&(v=`
`+v+`
`+t),v==null&&(v=""),t+d+v+g}else return`${t}<${s}${u} />`}print(e,t){return tI(this.toMarkup(e),t)}};pu.apply(I1.prototype);let vN=class extends I1{constructor(e,t,n,r,s,a){super(e,t,n,r,s,a),this.children=[],this.on("reindex",o=>Array.from(this.children).map(l=>l.trigger(o)))}add(e){return e.parent!=null&&e.parent.remove(e),e._index(this.children.length,this),this.children.push(e),e._added(this)}remove(e){e.children!=null&&e.children.length&&e.empty();const t=this.children.indexOf(e);if(t!==-1){this.children.splice(t,1),e._index(null),e._removed(this);for(let n=0;n<this.children.length;n++)e=this.children[n],n>=t&&e._index(n)}}empty(){const e=this.children.slice().reverse();for(const t of Array.from(e))this.remove(t)}};class _N{constructor(e){e==null&&(e=10),this.limit=e}iterate(e){const{step:t,last:n}=e;let{limit:r}=this;for(;t();)if(!--r)throw console.warn("Last iteration",typeof n=="function"?n():void 0),new Error("Exceeded iteration limit.");return null}}var yx={},AN={},Ql={},q0={},gA={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Doctype=i.CDATA=i.Tag=i.Style=i.Script=i.Comment=i.Directive=i.Text=i.Root=i.isTag=i.ElementType=void 0;var e;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(e=i.ElementType||(i.ElementType={}));function t(n){return n.type===e.Tag||n.type===e.Script||n.type===e.Style}i.isTag=t,i.Root=e.Root,i.Text=e.Text,i.Directive=e.Directive,i.Comment=e.Comment,i.Script=e.Script,i.Style=e.Style,i.Tag=e.Tag,i.CDATA=e.CDATA,i.Doctype=e.Doctype})(gA);var zi={},j0=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),a1=bt&&bt.__assign||function(){return a1=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},a1.apply(this,arguments)};Object.defineProperty(zi,"__esModule",{value:!0});zi.cloneNode=zi.hasChildren=zi.isDocument=zi.isDirective=zi.isComment=zi.isText=zi.isCDATA=zi.isTag=zi.Element=zi.Document=zi.NodeWithChildren=zi.ProcessingInstruction=zi.Comment=zi.Text=zi.DataNode=zi.Node=void 0;var Ms=gA,Dre=new Map([[Ms.ElementType.Tag,1],[Ms.ElementType.Script,1],[Ms.ElementType.Style,1],[Ms.ElementType.Directive,1],[Ms.ElementType.Text,3],[Ms.ElementType.CDATA,4],[Ms.ElementType.Comment,8],[Ms.ElementType.Root,9]]),nI=function(){function i(e){this.type=e,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(i.prototype,"nodeType",{get:function(){var e;return(e=Dre.get(this.type))!==null&&e!==void 0?e:1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),i.prototype.cloneNode=function(e){return e===void 0&&(e=!1),iI(this,e)},i}();zi.Node=nI;var Y2=function(i){j0(e,i);function e(t,n){var r=i.call(this,t)||this;return r.data=n,r}return Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.data},set:function(t){this.data=t},enumerable:!1,configurable:!0}),e}(nI);zi.DataNode=Y2;var bN=function(i){j0(e,i);function e(t){return i.call(this,Ms.ElementType.Text,t)||this}return e}(Y2);zi.Text=bN;var yN=function(i){j0(e,i);function e(t){return i.call(this,Ms.ElementType.Comment,t)||this}return e}(Y2);zi.Comment=yN;var wN=function(i){j0(e,i);function e(t,n){var r=i.call(this,Ms.ElementType.Directive,n)||this;return r.name=t,r}return e}(Y2);zi.ProcessingInstruction=wN;var X2=function(i){j0(e,i);function e(t,n){var r=i.call(this,t)||this;return r.children=n,r}return Object.defineProperty(e.prototype,"firstChild",{get:function(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.children},set:function(t){this.children=t},enumerable:!1,configurable:!0}),e}(nI);zi.NodeWithChildren=X2;var xN=function(i){j0(e,i);function e(t){return i.call(this,Ms.ElementType.Root,t)||this}return e}(X2);zi.Document=xN;var CN=function(i){j0(e,i);function e(t,n,r,s){r===void 0&&(r=[]),s===void 0&&(s=t==="script"?Ms.ElementType.Script:t==="style"?Ms.ElementType.Style:Ms.ElementType.Tag);var a=i.call(this,s,r)||this;return a.name=t,a.attribs=n,a}return Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name},set:function(t){this.name=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var t=this;return Object.keys(this.attribs).map(function(n){var r,s;return{name:n,value:t.attribs[n],namespace:(r=t["x-attribsNamespace"])===null||r===void 0?void 0:r[n],prefix:(s=t["x-attribsPrefix"])===null||s===void 0?void 0:s[n]}})},enumerable:!1,configurable:!0}),e}(X2);zi.Element=CN;function EN(i){return(0,Ms.isTag)(i)}zi.isTag=EN;function SN(i){return i.type===Ms.ElementType.CDATA}zi.isCDATA=SN;function MN(i){return i.type===Ms.ElementType.Text}zi.isText=MN;function TN(i){return i.type===Ms.ElementType.Comment}zi.isComment=TN;function IN(i){return i.type===Ms.ElementType.Directive}zi.isDirective=IN;function PN(i){return i.type===Ms.ElementType.Root}zi.isDocument=PN;function Lre(i){return Object.prototype.hasOwnProperty.call(i,"children")}zi.hasChildren=Lre;function iI(i,e){e===void 0&&(e=!1);var t;if(MN(i))t=new bN(i.data);else if(TN(i))t=new yN(i.data);else if(EN(i)){var n=e?fS(i.children):[],r=new CN(i.name,a1({},i.attribs),n);n.forEach(function(l){return l.parent=r}),i.namespace!=null&&(r.namespace=i.namespace),i["x-attribsNamespace"]&&(r["x-attribsNamespace"]=a1({},i["x-attribsNamespace"])),i["x-attribsPrefix"]&&(r["x-attribsPrefix"]=a1({},i["x-attribsPrefix"])),t=r}else if(SN(i)){var n=e?fS(i.children):[],s=new X2(Ms.ElementType.CDATA,n);n.forEach(function(c){return c.parent=s}),t=s}else if(PN(i)){var n=e?fS(i.children):[],a=new xN(n);n.forEach(function(c){return c.parent=a}),i["x-mode"]&&(a["x-mode"]=i["x-mode"]),t=a}else if(IN(i)){var o=new wN(i.name,i.data);i["x-name"]!=null&&(o["x-name"]=i["x-name"],o["x-publicId"]=i["x-publicId"],o["x-systemId"]=i["x-systemId"]),t=o}else throw new Error("Not implemented yet: ".concat(i.type));return t.startIndex=i.startIndex,t.endIndex=i.endIndex,i.sourceCodeLocation!=null&&(t.sourceCodeLocation=i.sourceCodeLocation),t}zi.cloneNode=iI;function fS(i){for(var e=i.map(function(n){return iI(n,!0)}),t=1;t<e.length;t++)e[t].prev=e[t-1],e[t-1].next=e[t];return e}(function(i){var e=bt&&bt.__createBinding||(Object.create?function(l,c,u,h){h===void 0&&(h=u);var f=Object.getOwnPropertyDescriptor(c,u);(!f||("get"in f?!c.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(l,h,f)}:function(l,c,u,h){h===void 0&&(h=u),l[h]=c[u]}),t=bt&&bt.__exportStar||function(l,c){for(var u in l)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&e(c,l,u)};Object.defineProperty(i,"__esModule",{value:!0}),i.DomHandler=void 0;var n=gA,r=zi;t(zi,i);var s=/\s+/g,a={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1,xmlMode:!1},o=function(){function l(c,u,h){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(h=u,u=a),typeof c=="object"&&(u=c,c=void 0),this.callback=c??null,this.options=u??a,this.elementCB=h??null}return l.prototype.onparserinit=function(c){this.parser=c},l.prototype.onreset=function(){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(c){this.handleCallback(c)},l.prototype.onclosetag=function(){this.lastNode=null;var c=this.tagStack.pop();this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(c)},l.prototype.onopentag=function(c,u){var h=this.options.xmlMode?n.ElementType.Tag:void 0,f=new r.Element(c,u,void 0,h);this.addNode(f),this.tagStack.push(f)},l.prototype.ontext=function(c){var u=this.options.normalizeWhitespace,h=this.lastNode;if(h&&h.type===n.ElementType.Text)u?h.data=(h.data+c).replace(s," "):h.data+=c,this.options.withEndIndices&&(h.endIndex=this.parser.endIndex);else{u&&(c=c.replace(s," "));var f=new r.Text(c);this.addNode(f),this.lastNode=f}},l.prototype.oncomment=function(c){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=c;return}var u=new r.Comment(c);this.addNode(u),this.lastNode=u},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var c=new r.Text(""),u=new r.NodeWithChildren(n.ElementType.CDATA,[c]);this.addNode(u),c.parent=u,this.lastNode=c},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(c,u){var h=new r.ProcessingInstruction(c,u);this.addNode(h)},l.prototype.handleCallback=function(c){if(typeof this.callback=="function")this.callback(c,this.dom);else if(c)throw c},l.prototype.addNode=function(c){var u=this.tagStack[this.tagStack.length-1],h=u.children[u.children.length-1];this.options.withStartIndices&&(c.startIndex=this.parser.startIndex),this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),u.children.push(c),h&&(c.prev=h,h.next=c),c.parent=u,this.lastNode=null},l}();i.DomHandler=o,i.default=o})(q0);var rI={},kN={},yf={};const Ore="Á",Nre="á",Fre="Ă",zre="ă",Ure="∾",Vre="∿",Hre="∾̳",$re="Â",Gre="â",Qre="´",qre="А",jre="а",Wre="Æ",Yre="æ",Xre="⁡",Kre="𝔄",Jre="𝔞",Zre="À",ese="à",tse="ℵ",nse="ℵ",ise="Α",rse="α",sse="Ā",ase="ā",ose="⨿",lse="&",cse="&",use="⩕",hse="⩓",fse="∧",dse="⩜",pse="⩘",mse="⩚",gse="∠",vse="⦤",_se="∠",Ase="⦨",bse="⦩",yse="⦪",wse="⦫",xse="⦬",Cse="⦭",Ese="⦮",Sse="⦯",Mse="∡",Tse="∟",Ise="⊾",Pse="⦝",kse="∢",Bse="Å",Rse="⍼",Dse="Ą",Lse="ą",Ose="𝔸",Nse="𝕒",Fse="⩯",zse="≈",Use="⩰",Vse="≊",Hse="≋",$se="'",Gse="⁡",Qse="≈",qse="≊",jse="Å",Wse="å",Yse="𝒜",Xse="𝒶",Kse="≔",Jse="*",Zse="≈",eae="≍",tae="Ã",nae="ã",iae="Ä",rae="ä",sae="∳",aae="⨑",oae="≌",lae="϶",cae="‵",uae="∽",hae="⋍",fae="∖",dae="⫧",pae="⊽",mae="⌅",gae="⌆",vae="⌅",_ae="⎵",Aae="⎶",bae="≌",yae="Б",wae="б",xae="„",Cae="∵",Eae="∵",Sae="∵",Mae="⦰",Tae="϶",Iae="ℬ",Pae="ℬ",kae="Β",Bae="β",Rae="ℶ",Dae="≬",Lae="𝔅",Oae="𝔟",Nae="⋂",Fae="◯",zae="⋃",Uae="⨀",Vae="⨁",Hae="⨂",$ae="⨆",Gae="★",Qae="▽",qae="△",jae="⨄",Wae="⋁",Yae="⋀",Xae="⤍",Kae="⧫",Jae="▪",Zae="▴",eoe="▾",toe="◂",noe="▸",ioe="␣",roe="▒",soe="░",aoe="▓",ooe="█",loe="=⃥",coe="≡⃥",uoe="⫭",hoe="⌐",foe="𝔹",doe="𝕓",poe="⊥",moe="⊥",goe="⋈",voe="⧉",_oe="┐",Aoe="╕",boe="╖",yoe="╗",woe="┌",xoe="╒",Coe="╓",Eoe="╔",Soe="─",Moe="═",Toe="┬",Ioe="╤",Poe="╥",koe="╦",Boe="┴",Roe="╧",Doe="╨",Loe="╩",Ooe="⊟",Noe="⊞",Foe="⊠",zoe="┘",Uoe="╛",Voe="╜",Hoe="╝",$oe="└",Goe="╘",Qoe="╙",qoe="╚",joe="│",Woe="║",Yoe="┼",Xoe="╪",Koe="╫",Joe="╬",Zoe="┤",ele="╡",tle="╢",nle="╣",ile="├",rle="╞",sle="╟",ale="╠",ole="‵",lle="˘",cle="˘",ule="¦",hle="𝒷",fle="ℬ",dle="⁏",ple="∽",mle="⋍",gle="⧅",vle="\\",_le="⟈",Ale="•",ble="•",yle="≎",wle="⪮",xle="≏",Cle="≎",Ele="≏",Sle="Ć",Mle="ć",Tle="⩄",Ile="⩉",Ple="⩋",kle="∩",Ble="⋒",Rle="⩇",Dle="⩀",Lle="ⅅ",Ole="∩︀",Nle="⁁",Fle="ˇ",zle="ℭ",Ule="⩍",Vle="Č",Hle="č",$le="Ç",Gle="ç",Qle="Ĉ",qle="ĉ",jle="∰",Wle="⩌",Yle="⩐",Xle="Ċ",Kle="ċ",Jle="¸",Zle="¸",ece="⦲",tce="¢",nce="·",ice="·",rce="𝔠",sce="ℭ",ace="Ч",oce="ч",lce="✓",cce="✓",uce="Χ",hce="χ",fce="ˆ",dce="≗",pce="↺",mce="↻",gce="⊛",vce="⊚",_ce="⊝",Ace="⊙",bce="®",yce="Ⓢ",wce="⊖",xce="⊕",Cce="⊗",Ece="○",Sce="⧃",Mce="≗",Tce="⨐",Ice="⫯",Pce="⧂",kce="∲",Bce="”",Rce="’",Dce="♣",Lce="♣",Oce=":",Nce="∷",Fce="⩴",zce="≔",Uce="≔",Vce=",",Hce="@",$ce="∁",Gce="∘",Qce="∁",qce="ℂ",jce="≅",Wce="⩭",Yce="≡",Xce="∮",Kce="∯",Jce="∮",Zce="𝕔",eue="ℂ",tue="∐",nue="∐",iue="©",rue="©",sue="℗",aue="∳",oue="↵",lue="✗",cue="⨯",uue="𝒞",hue="𝒸",fue="⫏",due="⫑",pue="⫐",mue="⫒",gue="⋯",vue="⤸",_ue="⤵",Aue="⋞",bue="⋟",yue="↶",wue="⤽",xue="⩈",Cue="⩆",Eue="≍",Sue="∪",Mue="⋓",Tue="⩊",Iue="⊍",Pue="⩅",kue="∪︀",Bue="↷",Rue="⤼",Due="⋞",Lue="⋟",Oue="⋎",Nue="⋏",Fue="¤",zue="↶",Uue="↷",Vue="⋎",Hue="⋏",$ue="∲",Gue="∱",Que="⌭",que="†",jue="‡",Wue="ℸ",Yue="↓",Xue="↡",Kue="⇓",Jue="‐",Zue="⫤",ehe="⊣",the="⤏",nhe="˝",ihe="Ď",rhe="ď",she="Д",ahe="д",ohe="‡",lhe="⇊",che="ⅅ",uhe="ⅆ",hhe="⤑",fhe="⩷",dhe="°",phe="∇",mhe="Δ",ghe="δ",vhe="⦱",_he="⥿",Ahe="𝔇",bhe="𝔡",yhe="⥥",whe="⇃",xhe="⇂",Che="´",Ehe="˙",She="˝",Mhe="`",The="˜",Ihe="⋄",Phe="⋄",khe="⋄",Bhe="♦",Rhe="♦",Dhe="¨",Lhe="ⅆ",Ohe="ϝ",Nhe="⋲",Fhe="÷",zhe="÷",Uhe="⋇",Vhe="⋇",Hhe="Ђ",$he="ђ",Ghe="⌞",Qhe="⌍",qhe="$",jhe="𝔻",Whe="𝕕",Yhe="¨",Xhe="˙",Khe="⃜",Jhe="≐",Zhe="≑",efe="≐",tfe="∸",nfe="∔",ife="⊡",rfe="⌆",sfe="∯",afe="¨",ofe="⇓",lfe="⇐",cfe="⇔",ufe="⫤",hfe="⟸",ffe="⟺",dfe="⟹",pfe="⇒",mfe="⊨",gfe="⇑",vfe="⇕",_fe="∥",Afe="⤓",bfe="↓",yfe="↓",wfe="⇓",xfe="⇵",Cfe="̑",Efe="⇊",Sfe="⇃",Mfe="⇂",Tfe="⥐",Ife="⥞",Pfe="⥖",kfe="↽",Bfe="⥟",Rfe="⥗",Dfe="⇁",Lfe="↧",Ofe="⊤",Nfe="⤐",Ffe="⌟",zfe="⌌",Ufe="𝒟",Vfe="𝒹",Hfe="Ѕ",$fe="ѕ",Gfe="⧶",Qfe="Đ",qfe="đ",jfe="⋱",Wfe="▿",Yfe="▾",Xfe="⇵",Kfe="⥯",Jfe="⦦",Zfe="Џ",ede="џ",tde="⟿",nde="É",ide="é",rde="⩮",sde="Ě",ade="ě",ode="Ê",lde="ê",cde="≖",ude="≕",hde="Э",fde="э",dde="⩷",pde="Ė",mde="ė",gde="≑",vde="ⅇ",_de="≒",Ade="𝔈",bde="𝔢",yde="⪚",wde="È",xde="è",Cde="⪖",Ede="⪘",Sde="⪙",Mde="∈",Tde="⏧",Ide="ℓ",Pde="⪕",kde="⪗",Bde="Ē",Rde="ē",Dde="∅",Lde="∅",Ode="◻",Nde="∅",Fde="▫",zde=" ",Ude=" ",Vde=" ",Hde="Ŋ",$de="ŋ",Gde=" ",Qde="Ę",qde="ę",jde="𝔼",Wde="𝕖",Yde="⋕",Xde="⧣",Kde="⩱",Jde="ε",Zde="Ε",epe="ε",tpe="ϵ",npe="≖",ipe="≕",rpe="≂",spe="⪖",ape="⪕",ope="⩵",lpe="=",cpe="≂",upe="≟",hpe="⇌",fpe="≡",dpe="⩸",ppe="⧥",mpe="⥱",gpe="≓",vpe="ℯ",_pe="ℰ",Ape="≐",bpe="⩳",ype="≂",wpe="Η",xpe="η",Cpe="Ð",Epe="ð",Spe="Ë",Mpe="ë",Tpe="€",Ipe="!",Ppe="∃",kpe="∃",Bpe="ℰ",Rpe="ⅇ",Dpe="ⅇ",Lpe="≒",Ope="Ф",Npe="ф",Fpe="♀",zpe="ﬃ",Upe="ﬀ",Vpe="ﬄ",Hpe="𝔉",$pe="𝔣",Gpe="ﬁ",Qpe="◼",qpe="▪",jpe="fj",Wpe="♭",Ype="ﬂ",Xpe="▱",Kpe="ƒ",Jpe="𝔽",Zpe="𝕗",e0e="∀",t0e="∀",n0e="⋔",i0e="⫙",r0e="ℱ",s0e="⨍",a0e="½",o0e="⅓",l0e="¼",c0e="⅕",u0e="⅙",h0e="⅛",f0e="⅔",d0e="⅖",p0e="¾",m0e="⅗",g0e="⅜",v0e="⅘",_0e="⅚",A0e="⅝",b0e="⅞",y0e="⁄",w0e="⌢",x0e="𝒻",C0e="ℱ",E0e="ǵ",S0e="Γ",M0e="γ",T0e="Ϝ",I0e="ϝ",P0e="⪆",k0e="Ğ",B0e="ğ",R0e="Ģ",D0e="Ĝ",L0e="ĝ",O0e="Г",N0e="г",F0e="Ġ",z0e="ġ",U0e="≥",V0e="≧",H0e="⪌",$0e="⋛",G0e="≥",Q0e="≧",q0e="⩾",j0e="⪩",W0e="⩾",Y0e="⪀",X0e="⪂",K0e="⪄",J0e="⋛︀",Z0e="⪔",eme="𝔊",tme="𝔤",nme="≫",ime="⋙",rme="⋙",sme="ℷ",ame="Ѓ",ome="ѓ",lme="⪥",cme="≷",ume="⪒",hme="⪤",fme="⪊",dme="⪊",pme="⪈",mme="≩",gme="⪈",vme="≩",_me="⋧",Ame="𝔾",bme="𝕘",yme="`",wme="≥",xme="⋛",Cme="≧",Eme="⪢",Sme="≷",Mme="⩾",Tme="≳",Ime="𝒢",Pme="ℊ",kme="≳",Bme="⪎",Rme="⪐",Dme="⪧",Lme="⩺",Ome=">",Nme=">",Fme="≫",zme="⋗",Ume="⦕",Vme="⩼",Hme="⪆",$me="⥸",Gme="⋗",Qme="⋛",qme="⪌",jme="≷",Wme="≳",Yme="≩︀",Xme="≩︀",Kme="ˇ",Jme=" ",Zme="½",ege="ℋ",tge="Ъ",nge="ъ",ige="⥈",rge="↔",sge="⇔",age="↭",oge="^",lge="ℏ",cge="Ĥ",uge="ĥ",hge="♥",fge="♥",dge="…",pge="⊹",mge="𝔥",gge="ℌ",vge="ℋ",_ge="⤥",Age="⤦",bge="⇿",yge="∻",wge="↩",xge="↪",Cge="𝕙",Ege="ℍ",Sge="―",Mge="─",Tge="𝒽",Ige="ℋ",Pge="ℏ",kge="Ħ",Bge="ħ",Rge="≎",Dge="≏",Lge="⁃",Oge="‐",Nge="Í",Fge="í",zge="⁣",Uge="Î",Vge="î",Hge="И",$ge="и",Gge="İ",Qge="Е",qge="е",jge="¡",Wge="⇔",Yge="𝔦",Xge="ℑ",Kge="Ì",Jge="ì",Zge="ⅈ",eve="⨌",tve="∭",nve="⧜",ive="℩",rve="Ĳ",sve="ĳ",ave="Ī",ove="ī",lve="ℑ",cve="ⅈ",uve="ℐ",hve="ℑ",fve="ı",dve="ℑ",pve="⊷",mve="Ƶ",gve="⇒",vve="℅",_ve="∞",Ave="⧝",bve="ı",yve="⊺",wve="∫",xve="∬",Cve="ℤ",Eve="∫",Sve="⊺",Mve="⋂",Tve="⨗",Ive="⨼",Pve="⁣",kve="⁢",Bve="Ё",Rve="ё",Dve="Į",Lve="į",Ove="𝕀",Nve="𝕚",Fve="Ι",zve="ι",Uve="⨼",Vve="¿",Hve="𝒾",$ve="ℐ",Gve="∈",Qve="⋵",qve="⋹",jve="⋴",Wve="⋳",Yve="∈",Xve="⁢",Kve="Ĩ",Jve="ĩ",Zve="І",e_e="і",t_e="Ï",n_e="ï",i_e="Ĵ",r_e="ĵ",s_e="Й",a_e="й",o_e="𝔍",l_e="𝔧",c_e="ȷ",u_e="𝕁",h_e="𝕛",f_e="𝒥",d_e="𝒿",p_e="Ј",m_e="ј",g_e="Є",v_e="є",__e="Κ",A_e="κ",b_e="ϰ",y_e="Ķ",w_e="ķ",x_e="К",C_e="к",E_e="𝔎",S_e="𝔨",M_e="ĸ",T_e="Х",I_e="х",P_e="Ќ",k_e="ќ",B_e="𝕂",R_e="𝕜",D_e="𝒦",L_e="𝓀",O_e="⇚",N_e="Ĺ",F_e="ĺ",z_e="⦴",U_e="ℒ",V_e="Λ",H_e="λ",$_e="⟨",G_e="⟪",Q_e="⦑",q_e="⟨",j_e="⪅",W_e="ℒ",Y_e="«",X_e="⇤",K_e="⤟",J_e="←",Z_e="↞",e1e="⇐",t1e="⤝",n1e="↩",i1e="↫",r1e="⤹",s1e="⥳",a1e="↢",o1e="⤙",l1e="⤛",c1e="⪫",u1e="⪭",h1e="⪭︀",f1e="⤌",d1e="⤎",p1e="❲",m1e="{",g1e="[",v1e="⦋",_1e="⦏",A1e="⦍",b1e="Ľ",y1e="ľ",w1e="Ļ",x1e="ļ",C1e="⌈",E1e="{",S1e="Л",M1e="л",T1e="⤶",I1e="“",P1e="„",k1e="⥧",B1e="⥋",R1e="↲",D1e="≤",L1e="≦",O1e="⟨",N1e="⇤",F1e="←",z1e="←",U1e="⇐",V1e="⇆",H1e="↢",$1e="⌈",G1e="⟦",Q1e="⥡",q1e="⥙",j1e="⇃",W1e="⌊",Y1e="↽",X1e="↼",K1e="⇇",J1e="↔",Z1e="↔",eAe="⇔",tAe="⇆",nAe="⇋",iAe="↭",rAe="⥎",sAe="↤",aAe="⊣",oAe="⥚",lAe="⋋",cAe="⧏",uAe="⊲",hAe="⊴",fAe="⥑",dAe="⥠",pAe="⥘",mAe="↿",gAe="⥒",vAe="↼",_Ae="⪋",AAe="⋚",bAe="≤",yAe="≦",wAe="⩽",xAe="⪨",CAe="⩽",EAe="⩿",SAe="⪁",MAe="⪃",TAe="⋚︀",IAe="⪓",PAe="⪅",kAe="⋖",BAe="⋚",RAe="⪋",DAe="⋚",LAe="≦",OAe="≶",NAe="≶",FAe="⪡",zAe="≲",UAe="⩽",VAe="≲",HAe="⥼",$Ae="⌊",GAe="𝔏",QAe="𝔩",qAe="≶",jAe="⪑",WAe="⥢",YAe="↽",XAe="↼",KAe="⥪",JAe="▄",ZAe="Љ",ebe="љ",tbe="⇇",nbe="≪",ibe="⋘",rbe="⌞",sbe="⇚",abe="⥫",obe="◺",lbe="Ŀ",cbe="ŀ",ube="⎰",hbe="⎰",fbe="⪉",dbe="⪉",pbe="⪇",mbe="≨",gbe="⪇",vbe="≨",_be="⋦",Abe="⟬",bbe="⇽",ybe="⟦",wbe="⟵",xbe="⟵",Cbe="⟸",Ebe="⟷",Sbe="⟷",Mbe="⟺",Tbe="⟼",Ibe="⟶",Pbe="⟶",kbe="⟹",Bbe="↫",Rbe="↬",Dbe="⦅",Lbe="𝕃",Obe="𝕝",Nbe="⨭",Fbe="⨴",zbe="∗",Ube="_",Vbe="↙",Hbe="↘",$be="◊",Gbe="◊",Qbe="⧫",qbe="(",jbe="⦓",Wbe="⇆",Ybe="⌟",Xbe="⇋",Kbe="⥭",Jbe="‎",Zbe="⊿",eye="‹",tye="𝓁",nye="ℒ",iye="↰",rye="↰",sye="≲",aye="⪍",oye="⪏",lye="[",cye="‘",uye="‚",hye="Ł",fye="ł",dye="⪦",pye="⩹",mye="<",gye="<",vye="≪",_ye="⋖",Aye="⋋",bye="⋉",yye="⥶",wye="⩻",xye="◃",Cye="⊴",Eye="◂",Sye="⦖",Mye="⥊",Tye="⥦",Iye="≨︀",Pye="≨︀",kye="¯",Bye="♂",Rye="✠",Dye="✠",Lye="↦",Oye="↦",Nye="↧",Fye="↤",zye="↥",Uye="▮",Vye="⨩",Hye="М",$ye="м",Gye="—",Qye="∺",qye="∡",jye=" ",Wye="ℳ",Yye="𝔐",Xye="𝔪",Kye="℧",Jye="µ",Zye="*",ewe="⫰",twe="∣",nwe="·",iwe="⊟",rwe="−",swe="∸",awe="⨪",owe="∓",lwe="⫛",cwe="…",uwe="∓",hwe="⊧",fwe="𝕄",dwe="𝕞",pwe="∓",mwe="𝓂",gwe="ℳ",vwe="∾",_we="Μ",Awe="μ",bwe="⊸",ywe="⊸",wwe="∇",xwe="Ń",Cwe="ń",Ewe="∠⃒",Swe="≉",Mwe="⩰̸",Twe="≋̸",Iwe="ŉ",Pwe="≉",kwe="♮",Bwe="ℕ",Rwe="♮",Dwe=" ",Lwe="≎̸",Owe="≏̸",Nwe="⩃",Fwe="Ň",zwe="ň",Uwe="Ņ",Vwe="ņ",Hwe="≇",$we="⩭̸",Gwe="⩂",Qwe="Н",qwe="н",jwe="–",Wwe="⤤",Ywe="↗",Xwe="⇗",Kwe="↗",Jwe="≠",Zwe="≐̸",exe="​",txe="​",nxe="​",ixe="​",rxe="≢",sxe="⤨",axe="≂̸",oxe="≫",lxe="≪",cxe=`
`,uxe="∄",hxe="∄",fxe="𝔑",dxe="𝔫",pxe="≧̸",mxe="≱",gxe="≱",vxe="≧̸",_xe="⩾̸",Axe="⩾̸",bxe="⋙̸",yxe="≵",wxe="≫⃒",xxe="≯",Cxe="≯",Exe="≫̸",Sxe="↮",Mxe="⇎",Txe="⫲",Ixe="∋",Pxe="⋼",kxe="⋺",Bxe="∋",Rxe="Њ",Dxe="њ",Lxe="↚",Oxe="⇍",Nxe="‥",Fxe="≦̸",zxe="≰",Uxe="↚",Vxe="⇍",Hxe="↮",$xe="⇎",Gxe="≰",Qxe="≦̸",qxe="⩽̸",jxe="⩽̸",Wxe="≮",Yxe="⋘̸",Xxe="≴",Kxe="≪⃒",Jxe="≮",Zxe="⋪",e2e="⋬",t2e="≪̸",n2e="∤",i2e="⁠",r2e=" ",s2e="𝕟",a2e="ℕ",o2e="⫬",l2e="¬",c2e="≢",u2e="≭",h2e="∦",f2e="∉",d2e="≠",p2e="≂̸",m2e="∄",g2e="≯",v2e="≱",_2e="≧̸",A2e="≫̸",b2e="≹",y2e="⩾̸",w2e="≵",x2e="≎̸",C2e="≏̸",E2e="∉",S2e="⋵̸",M2e="⋹̸",T2e="∉",I2e="⋷",P2e="⋶",k2e="⧏̸",B2e="⋪",R2e="⋬",D2e="≮",L2e="≰",O2e="≸",N2e="≪̸",F2e="⩽̸",z2e="≴",U2e="⪢̸",V2e="⪡̸",H2e="∌",$2e="∌",G2e="⋾",Q2e="⋽",q2e="⊀",j2e="⪯̸",W2e="⋠",Y2e="∌",X2e="⧐̸",K2e="⋫",J2e="⋭",Z2e="⊏̸",eCe="⋢",tCe="⊐̸",nCe="⋣",iCe="⊂⃒",rCe="⊈",sCe="⊁",aCe="⪰̸",oCe="⋡",lCe="≿̸",cCe="⊃⃒",uCe="⊉",hCe="≁",fCe="≄",dCe="≇",pCe="≉",mCe="∤",gCe="∦",vCe="∦",_Ce="⫽⃥",ACe="∂̸",bCe="⨔",yCe="⊀",wCe="⋠",xCe="⊀",CCe="⪯̸",ECe="⪯̸",SCe="⤳̸",MCe="↛",TCe="⇏",ICe="↝̸",PCe="↛",kCe="⇏",BCe="⋫",RCe="⋭",DCe="⊁",LCe="⋡",OCe="⪰̸",NCe="𝒩",FCe="𝓃",zCe="∤",UCe="∦",VCe="≁",HCe="≄",$Ce="≄",GCe="∤",QCe="∦",qCe="⋢",jCe="⋣",WCe="⊄",YCe="⫅̸",XCe="⊈",KCe="⊂⃒",JCe="⊈",ZCe="⫅̸",eEe="⊁",tEe="⪰̸",nEe="⊅",iEe="⫆̸",rEe="⊉",sEe="⊃⃒",aEe="⊉",oEe="⫆̸",lEe="≹",cEe="Ñ",uEe="ñ",hEe="≸",fEe="⋪",dEe="⋬",pEe="⋫",mEe="⋭",gEe="Ν",vEe="ν",_Ee="#",AEe="№",bEe=" ",yEe="≍⃒",wEe="⊬",xEe="⊭",CEe="⊮",EEe="⊯",SEe="≥⃒",MEe=">⃒",TEe="⤄",IEe="⧞",PEe="⤂",kEe="≤⃒",BEe="<⃒",REe="⊴⃒",DEe="⤃",LEe="⊵⃒",OEe="∼⃒",NEe="⤣",FEe="↖",zEe="⇖",UEe="↖",VEe="⤧",HEe="Ó",$Ee="ó",GEe="⊛",QEe="Ô",qEe="ô",jEe="⊚",WEe="О",YEe="о",XEe="⊝",KEe="Ő",JEe="ő",ZEe="⨸",e4e="⊙",t4e="⦼",n4e="Œ",i4e="œ",r4e="⦿",s4e="𝔒",a4e="𝔬",o4e="˛",l4e="Ò",c4e="ò",u4e="⧁",h4e="⦵",f4e="Ω",d4e="∮",p4e="↺",m4e="⦾",g4e="⦻",v4e="‾",_4e="⧀",A4e="Ō",b4e="ō",y4e="Ω",w4e="ω",x4e="Ο",C4e="ο",E4e="⦶",S4e="⊖",M4e="𝕆",T4e="𝕠",I4e="⦷",P4e="“",k4e="‘",B4e="⦹",R4e="⊕",D4e="↻",L4e="⩔",O4e="∨",N4e="⩝",F4e="ℴ",z4e="ℴ",U4e="ª",V4e="º",H4e="⊶",$4e="⩖",G4e="⩗",Q4e="⩛",q4e="Ⓢ",j4e="𝒪",W4e="ℴ",Y4e="Ø",X4e="ø",K4e="⊘",J4e="Õ",Z4e="õ",eSe="⨶",tSe="⨷",nSe="⊗",iSe="Ö",rSe="ö",sSe="⌽",aSe="‾",oSe="⏞",lSe="⎴",cSe="⏜",uSe="¶",hSe="∥",fSe="∥",dSe="⫳",pSe="⫽",mSe="∂",gSe="∂",vSe="П",_Se="п",ASe="%",bSe=".",ySe="‰",wSe="⊥",xSe="‱",CSe="𝔓",ESe="𝔭",SSe="Φ",MSe="φ",TSe="ϕ",ISe="ℳ",PSe="☎",kSe="Π",BSe="π",RSe="⋔",DSe="ϖ",LSe="ℏ",OSe="ℎ",NSe="ℏ",FSe="⨣",zSe="⊞",USe="⨢",VSe="+",HSe="∔",$Se="⨥",GSe="⩲",QSe="±",qSe="±",jSe="⨦",WSe="⨧",YSe="±",XSe="ℌ",KSe="⨕",JSe="𝕡",ZSe="ℙ",e3e="£",t3e="⪷",n3e="⪻",i3e="≺",r3e="≼",s3e="⪷",a3e="≺",o3e="≼",l3e="≺",c3e="⪯",u3e="≼",h3e="≾",f3e="⪯",d3e="⪹",p3e="⪵",m3e="⋨",g3e="⪯",v3e="⪳",_3e="≾",A3e="′",b3e="″",y3e="ℙ",w3e="⪹",x3e="⪵",C3e="⋨",E3e="∏",S3e="∏",M3e="⌮",T3e="⌒",I3e="⌓",P3e="∝",k3e="∝",B3e="∷",R3e="∝",D3e="≾",L3e="⊰",O3e="𝒫",N3e="𝓅",F3e="Ψ",z3e="ψ",U3e=" ",V3e="𝔔",H3e="𝔮",$3e="⨌",G3e="𝕢",Q3e="ℚ",q3e="⁗",j3e="𝒬",W3e="𝓆",Y3e="ℍ",X3e="⨖",K3e="?",J3e="≟",Z3e='"',eMe='"',tMe="⇛",nMe="∽̱",iMe="Ŕ",rMe="ŕ",sMe="√",aMe="⦳",oMe="⟩",lMe="⟫",cMe="⦒",uMe="⦥",hMe="⟩",fMe="»",dMe="⥵",pMe="⇥",mMe="⤠",gMe="⤳",vMe="→",_Me="↠",AMe="⇒",bMe="⤞",yMe="↪",wMe="↬",xMe="⥅",CMe="⥴",EMe="⤖",SMe="↣",MMe="↝",TMe="⤚",IMe="⤜",PMe="∶",kMe="ℚ",BMe="⤍",RMe="⤏",DMe="⤐",LMe="❳",OMe="}",NMe="]",FMe="⦌",zMe="⦎",UMe="⦐",VMe="Ř",HMe="ř",$Me="Ŗ",GMe="ŗ",QMe="⌉",qMe="}",jMe="Р",WMe="р",YMe="⤷",XMe="⥩",KMe="”",JMe="”",ZMe="↳",eTe="ℜ",tTe="ℛ",nTe="ℜ",iTe="ℝ",rTe="ℜ",sTe="▭",aTe="®",oTe="®",lTe="∋",cTe="⇋",uTe="⥯",hTe="⥽",fTe="⌋",dTe="𝔯",pTe="ℜ",mTe="⥤",gTe="⇁",vTe="⇀",_Te="⥬",ATe="Ρ",bTe="ρ",yTe="ϱ",wTe="⟩",xTe="⇥",CTe="→",ETe="→",STe="⇒",MTe="⇄",TTe="↣",ITe="⌉",PTe="⟧",kTe="⥝",BTe="⥕",RTe="⇂",DTe="⌋",LTe="⇁",OTe="⇀",NTe="⇄",FTe="⇌",zTe="⇉",UTe="↝",VTe="↦",HTe="⊢",$Te="⥛",GTe="⋌",QTe="⧐",qTe="⊳",jTe="⊵",WTe="⥏",YTe="⥜",XTe="⥔",KTe="↾",JTe="⥓",ZTe="⇀",e5e="˚",t5e="≓",n5e="⇄",i5e="⇌",r5e="‏",s5e="⎱",a5e="⎱",o5e="⫮",l5e="⟭",c5e="⇾",u5e="⟧",h5e="⦆",f5e="𝕣",d5e="ℝ",p5e="⨮",m5e="⨵",g5e="⥰",v5e=")",_5e="⦔",A5e="⨒",b5e="⇉",y5e="⇛",w5e="›",x5e="𝓇",C5e="ℛ",E5e="↱",S5e="↱",M5e="]",T5e="’",I5e="’",P5e="⋌",k5e="⋊",B5e="▹",R5e="⊵",D5e="▸",L5e="⧎",O5e="⧴",N5e="⥨",F5e="℞",z5e="Ś",U5e="ś",V5e="‚",H5e="⪸",$5e="Š",G5e="š",Q5e="⪼",q5e="≻",j5e="≽",W5e="⪰",Y5e="⪴",X5e="Ş",K5e="ş",J5e="Ŝ",Z5e="ŝ",eIe="⪺",tIe="⪶",nIe="⋩",iIe="⨓",rIe="≿",sIe="С",aIe="с",oIe="⊡",lIe="⋅",cIe="⩦",uIe="⤥",hIe="↘",fIe="⇘",dIe="↘",pIe="§",mIe=";",gIe="⤩",vIe="∖",_Ie="∖",AIe="✶",bIe="𝔖",yIe="𝔰",wIe="⌢",xIe="♯",CIe="Щ",EIe="щ",SIe="Ш",MIe="ш",TIe="↓",IIe="←",PIe="∣",kIe="∥",BIe="→",RIe="↑",DIe="­",LIe="Σ",OIe="σ",NIe="ς",FIe="ς",zIe="∼",UIe="⩪",VIe="≃",HIe="≃",$Ie="⪞",GIe="⪠",QIe="⪝",qIe="⪟",jIe="≆",WIe="⨤",YIe="⥲",XIe="←",KIe="∘",JIe="∖",ZIe="⨳",ePe="⧤",tPe="∣",nPe="⌣",iPe="⪪",rPe="⪬",sPe="⪬︀",aPe="Ь",oPe="ь",lPe="⌿",cPe="⧄",uPe="/",hPe="𝕊",fPe="𝕤",dPe="♠",pPe="♠",mPe="∥",gPe="⊓",vPe="⊓︀",_Pe="⊔",APe="⊔︀",bPe="√",yPe="⊏",wPe="⊑",xPe="⊏",CPe="⊑",EPe="⊐",SPe="⊒",MPe="⊐",TPe="⊒",IPe="□",PPe="□",kPe="⊓",BPe="⊏",RPe="⊑",DPe="⊐",LPe="⊒",OPe="⊔",NPe="▪",FPe="□",zPe="▪",UPe="→",VPe="𝒮",HPe="𝓈",$Pe="∖",GPe="⌣",QPe="⋆",qPe="⋆",jPe="☆",WPe="★",YPe="ϵ",XPe="ϕ",KPe="¯",JPe="⊂",ZPe="⋐",e6e="⪽",t6e="⫅",n6e="⊆",i6e="⫃",r6e="⫁",s6e="⫋",a6e="⊊",o6e="⪿",l6e="⥹",c6e="⊂",u6e="⋐",h6e="⊆",f6e="⫅",d6e="⊆",p6e="⊊",m6e="⫋",g6e="⫇",v6e="⫕",_6e="⫓",A6e="⪸",b6e="≻",y6e="≽",w6e="≻",x6e="⪰",C6e="≽",E6e="≿",S6e="⪰",M6e="⪺",T6e="⪶",I6e="⋩",P6e="≿",k6e="∋",B6e="∑",R6e="∑",D6e="♪",L6e="¹",O6e="²",N6e="³",F6e="⊃",z6e="⋑",U6e="⪾",V6e="⫘",H6e="⫆",$6e="⊇",G6e="⫄",Q6e="⊃",q6e="⊇",j6e="⟉",W6e="⫗",Y6e="⥻",X6e="⫂",K6e="⫌",J6e="⊋",Z6e="⫀",eke="⊃",tke="⋑",nke="⊇",ike="⫆",rke="⊋",ske="⫌",ake="⫈",oke="⫔",lke="⫖",cke="⤦",uke="↙",hke="⇙",fke="↙",dke="⤪",pke="ß",mke="	",gke="⌖",vke="Τ",_ke="τ",Ake="⎴",bke="Ť",yke="ť",wke="Ţ",xke="ţ",Cke="Т",Eke="т",Ske="⃛",Mke="⌕",Tke="𝔗",Ike="𝔱",Pke="∴",kke="∴",Bke="∴",Rke="Θ",Dke="θ",Lke="ϑ",Oke="ϑ",Nke="≈",Fke="∼",zke="  ",Uke=" ",Vke=" ",Hke="≈",$ke="∼",Gke="Þ",Qke="þ",qke="˜",jke="∼",Wke="≃",Yke="≅",Xke="≈",Kke="⨱",Jke="⊠",Zke="×",e8e="⨰",t8e="∭",n8e="⤨",i8e="⌶",r8e="⫱",s8e="⊤",a8e="𝕋",o8e="𝕥",l8e="⫚",c8e="⤩",u8e="‴",h8e="™",f8e="™",d8e="▵",p8e="▿",m8e="◃",g8e="⊴",v8e="≜",_8e="▹",A8e="⊵",b8e="◬",y8e="≜",w8e="⨺",x8e="⃛",C8e="⨹",E8e="⧍",S8e="⨻",M8e="⏢",T8e="𝒯",I8e="𝓉",P8e="Ц",k8e="ц",B8e="Ћ",R8e="ћ",D8e="Ŧ",L8e="ŧ",O8e="≬",N8e="↞",F8e="↠",z8e="Ú",U8e="ú",V8e="↑",H8e="↟",$8e="⇑",G8e="⥉",Q8e="Ў",q8e="ў",j8e="Ŭ",W8e="ŭ",Y8e="Û",X8e="û",K8e="У",J8e="у",Z8e="⇅",eBe="Ű",tBe="ű",nBe="⥮",iBe="⥾",rBe="𝔘",sBe="𝔲",aBe="Ù",oBe="ù",lBe="⥣",cBe="↿",uBe="↾",hBe="▀",fBe="⌜",dBe="⌜",pBe="⌏",mBe="◸",gBe="Ū",vBe="ū",_Be="¨",ABe="_",bBe="⏟",yBe="⎵",wBe="⏝",xBe="⋃",CBe="⊎",EBe="Ų",SBe="ų",MBe="𝕌",TBe="𝕦",IBe="⤒",PBe="↑",kBe="↑",BBe="⇑",RBe="⇅",DBe="↕",LBe="↕",OBe="⇕",NBe="⥮",FBe="↿",zBe="↾",UBe="⊎",VBe="↖",HBe="↗",$Be="υ",GBe="ϒ",QBe="ϒ",qBe="Υ",jBe="υ",WBe="↥",YBe="⊥",XBe="⇈",KBe="⌝",JBe="⌝",ZBe="⌎",eRe="Ů",tRe="ů",nRe="◹",iRe="𝒰",rRe="𝓊",sRe="⋰",aRe="Ũ",oRe="ũ",lRe="▵",cRe="▴",uRe="⇈",hRe="Ü",fRe="ü",dRe="⦧",pRe="⦜",mRe="ϵ",gRe="ϰ",vRe="∅",_Re="ϕ",ARe="ϖ",bRe="∝",yRe="↕",wRe="⇕",xRe="ϱ",CRe="ς",ERe="⊊︀",SRe="⫋︀",MRe="⊋︀",TRe="⫌︀",IRe="ϑ",PRe="⊲",kRe="⊳",BRe="⫨",RRe="⫫",DRe="⫩",LRe="В",ORe="в",NRe="⊢",FRe="⊨",zRe="⊩",URe="⊫",VRe="⫦",HRe="⊻",$Re="∨",GRe="⋁",QRe="≚",qRe="⋮",jRe="|",WRe="‖",YRe="|",XRe="‖",KRe="∣",JRe="|",ZRe="❘",e7e="≀",t7e=" ",n7e="𝔙",i7e="𝔳",r7e="⊲",s7e="⊂⃒",a7e="⊃⃒",o7e="𝕍",l7e="𝕧",c7e="∝",u7e="⊳",h7e="𝒱",f7e="𝓋",d7e="⫋︀",p7e="⊊︀",m7e="⫌︀",g7e="⊋︀",v7e="⊪",_7e="⦚",A7e="Ŵ",b7e="ŵ",y7e="⩟",w7e="∧",x7e="⋀",C7e="≙",E7e="℘",S7e="𝔚",M7e="𝔴",T7e="𝕎",I7e="𝕨",P7e="℘",k7e="≀",B7e="≀",R7e="𝒲",D7e="𝓌",L7e="⋂",O7e="◯",N7e="⋃",F7e="▽",z7e="𝔛",U7e="𝔵",V7e="⟷",H7e="⟺",$7e="Ξ",G7e="ξ",Q7e="⟵",q7e="⟸",j7e="⟼",W7e="⋻",Y7e="⨀",X7e="𝕏",K7e="𝕩",J7e="⨁",Z7e="⨂",eDe="⟶",tDe="⟹",nDe="𝒳",iDe="𝓍",rDe="⨆",sDe="⨄",aDe="△",oDe="⋁",lDe="⋀",cDe="Ý",uDe="ý",hDe="Я",fDe="я",dDe="Ŷ",pDe="ŷ",mDe="Ы",gDe="ы",vDe="¥",_De="𝔜",ADe="𝔶",bDe="Ї",yDe="ї",wDe="𝕐",xDe="𝕪",CDe="𝒴",EDe="𝓎",SDe="Ю",MDe="ю",TDe="ÿ",IDe="Ÿ",PDe="Ź",kDe="ź",BDe="Ž",RDe="ž",DDe="З",LDe="з",ODe="Ż",NDe="ż",FDe="ℨ",zDe="​",UDe="Ζ",VDe="ζ",HDe="𝔷",$De="ℨ",GDe="Ж",QDe="ж",qDe="⇝",jDe="𝕫",WDe="ℤ",YDe="𝒵",XDe="𝓏",KDe="‍",JDe="‌",BN={Aacute:Ore,aacute:Nre,Abreve:Fre,abreve:zre,ac:Ure,acd:Vre,acE:Hre,Acirc:$re,acirc:Gre,acute:Qre,Acy:qre,acy:jre,AElig:Wre,aelig:Yre,af:Xre,Afr:Kre,afr:Jre,Agrave:Zre,agrave:ese,alefsym:tse,aleph:nse,Alpha:ise,alpha:rse,Amacr:sse,amacr:ase,amalg:ose,amp:lse,AMP:cse,andand:use,And:hse,and:fse,andd:dse,andslope:pse,andv:mse,ang:gse,ange:vse,angle:_se,angmsdaa:Ase,angmsdab:bse,angmsdac:yse,angmsdad:wse,angmsdae:xse,angmsdaf:Cse,angmsdag:Ese,angmsdah:Sse,angmsd:Mse,angrt:Tse,angrtvb:Ise,angrtvbd:Pse,angsph:kse,angst:Bse,angzarr:Rse,Aogon:Dse,aogon:Lse,Aopf:Ose,aopf:Nse,apacir:Fse,ap:zse,apE:Use,ape:Vse,apid:Hse,apos:$se,ApplyFunction:Gse,approx:Qse,approxeq:qse,Aring:jse,aring:Wse,Ascr:Yse,ascr:Xse,Assign:Kse,ast:Jse,asymp:Zse,asympeq:eae,Atilde:tae,atilde:nae,Auml:iae,auml:rae,awconint:sae,awint:aae,backcong:oae,backepsilon:lae,backprime:cae,backsim:uae,backsimeq:hae,Backslash:fae,Barv:dae,barvee:pae,barwed:mae,Barwed:gae,barwedge:vae,bbrk:_ae,bbrktbrk:Aae,bcong:bae,Bcy:yae,bcy:wae,bdquo:xae,becaus:Cae,because:Eae,Because:Sae,bemptyv:Mae,bepsi:Tae,bernou:Iae,Bernoullis:Pae,Beta:kae,beta:Bae,beth:Rae,between:Dae,Bfr:Lae,bfr:Oae,bigcap:Nae,bigcirc:Fae,bigcup:zae,bigodot:Uae,bigoplus:Vae,bigotimes:Hae,bigsqcup:$ae,bigstar:Gae,bigtriangledown:Qae,bigtriangleup:qae,biguplus:jae,bigvee:Wae,bigwedge:Yae,bkarow:Xae,blacklozenge:Kae,blacksquare:Jae,blacktriangle:Zae,blacktriangledown:eoe,blacktriangleleft:toe,blacktriangleright:noe,blank:ioe,blk12:roe,blk14:soe,blk34:aoe,block:ooe,bne:loe,bnequiv:coe,bNot:uoe,bnot:hoe,Bopf:foe,bopf:doe,bot:poe,bottom:moe,bowtie:goe,boxbox:voe,boxdl:_oe,boxdL:Aoe,boxDl:boe,boxDL:yoe,boxdr:woe,boxdR:xoe,boxDr:Coe,boxDR:Eoe,boxh:Soe,boxH:Moe,boxhd:Toe,boxHd:Ioe,boxhD:Poe,boxHD:koe,boxhu:Boe,boxHu:Roe,boxhU:Doe,boxHU:Loe,boxminus:Ooe,boxplus:Noe,boxtimes:Foe,boxul:zoe,boxuL:Uoe,boxUl:Voe,boxUL:Hoe,boxur:$oe,boxuR:Goe,boxUr:Qoe,boxUR:qoe,boxv:joe,boxV:Woe,boxvh:Yoe,boxvH:Xoe,boxVh:Koe,boxVH:Joe,boxvl:Zoe,boxvL:ele,boxVl:tle,boxVL:nle,boxvr:ile,boxvR:rle,boxVr:sle,boxVR:ale,bprime:ole,breve:lle,Breve:cle,brvbar:ule,bscr:hle,Bscr:fle,bsemi:dle,bsim:ple,bsime:mle,bsolb:gle,bsol:vle,bsolhsub:_le,bull:Ale,bullet:ble,bump:yle,bumpE:wle,bumpe:xle,Bumpeq:Cle,bumpeq:Ele,Cacute:Sle,cacute:Mle,capand:Tle,capbrcup:Ile,capcap:Ple,cap:kle,Cap:Ble,capcup:Rle,capdot:Dle,CapitalDifferentialD:Lle,caps:Ole,caret:Nle,caron:Fle,Cayleys:zle,ccaps:Ule,Ccaron:Vle,ccaron:Hle,Ccedil:$le,ccedil:Gle,Ccirc:Qle,ccirc:qle,Cconint:jle,ccups:Wle,ccupssm:Yle,Cdot:Xle,cdot:Kle,cedil:Jle,Cedilla:Zle,cemptyv:ece,cent:tce,centerdot:nce,CenterDot:ice,cfr:rce,Cfr:sce,CHcy:ace,chcy:oce,check:lce,checkmark:cce,Chi:uce,chi:hce,circ:fce,circeq:dce,circlearrowleft:pce,circlearrowright:mce,circledast:gce,circledcirc:vce,circleddash:_ce,CircleDot:Ace,circledR:bce,circledS:yce,CircleMinus:wce,CirclePlus:xce,CircleTimes:Cce,cir:Ece,cirE:Sce,cire:Mce,cirfnint:Tce,cirmid:Ice,cirscir:Pce,ClockwiseContourIntegral:kce,CloseCurlyDoubleQuote:Bce,CloseCurlyQuote:Rce,clubs:Dce,clubsuit:Lce,colon:Oce,Colon:Nce,Colone:Fce,colone:zce,coloneq:Uce,comma:Vce,commat:Hce,comp:$ce,compfn:Gce,complement:Qce,complexes:qce,cong:jce,congdot:Wce,Congruent:Yce,conint:Xce,Conint:Kce,ContourIntegral:Jce,copf:Zce,Copf:eue,coprod:tue,Coproduct:nue,copy:iue,COPY:rue,copysr:sue,CounterClockwiseContourIntegral:aue,crarr:oue,cross:lue,Cross:cue,Cscr:uue,cscr:hue,csub:fue,csube:due,csup:pue,csupe:mue,ctdot:gue,cudarrl:vue,cudarrr:_ue,cuepr:Aue,cuesc:bue,cularr:yue,cularrp:wue,cupbrcap:xue,cupcap:Cue,CupCap:Eue,cup:Sue,Cup:Mue,cupcup:Tue,cupdot:Iue,cupor:Pue,cups:kue,curarr:Bue,curarrm:Rue,curlyeqprec:Due,curlyeqsucc:Lue,curlyvee:Oue,curlywedge:Nue,curren:Fue,curvearrowleft:zue,curvearrowright:Uue,cuvee:Vue,cuwed:Hue,cwconint:$ue,cwint:Gue,cylcty:Que,dagger:que,Dagger:jue,daleth:Wue,darr:Yue,Darr:Xue,dArr:Kue,dash:Jue,Dashv:Zue,dashv:ehe,dbkarow:the,dblac:nhe,Dcaron:ihe,dcaron:rhe,Dcy:she,dcy:ahe,ddagger:ohe,ddarr:lhe,DD:che,dd:uhe,DDotrahd:hhe,ddotseq:fhe,deg:dhe,Del:phe,Delta:mhe,delta:ghe,demptyv:vhe,dfisht:_he,Dfr:Ahe,dfr:bhe,dHar:yhe,dharl:whe,dharr:xhe,DiacriticalAcute:Che,DiacriticalDot:Ehe,DiacriticalDoubleAcute:She,DiacriticalGrave:Mhe,DiacriticalTilde:The,diam:Ihe,diamond:Phe,Diamond:khe,diamondsuit:Bhe,diams:Rhe,die:Dhe,DifferentialD:Lhe,digamma:Ohe,disin:Nhe,div:Fhe,divide:zhe,divideontimes:Uhe,divonx:Vhe,DJcy:Hhe,djcy:$he,dlcorn:Ghe,dlcrop:Qhe,dollar:qhe,Dopf:jhe,dopf:Whe,Dot:Yhe,dot:Xhe,DotDot:Khe,doteq:Jhe,doteqdot:Zhe,DotEqual:efe,dotminus:tfe,dotplus:nfe,dotsquare:ife,doublebarwedge:rfe,DoubleContourIntegral:sfe,DoubleDot:afe,DoubleDownArrow:ofe,DoubleLeftArrow:lfe,DoubleLeftRightArrow:cfe,DoubleLeftTee:ufe,DoubleLongLeftArrow:hfe,DoubleLongLeftRightArrow:ffe,DoubleLongRightArrow:dfe,DoubleRightArrow:pfe,DoubleRightTee:mfe,DoubleUpArrow:gfe,DoubleUpDownArrow:vfe,DoubleVerticalBar:_fe,DownArrowBar:Afe,downarrow:bfe,DownArrow:yfe,Downarrow:wfe,DownArrowUpArrow:xfe,DownBreve:Cfe,downdownarrows:Efe,downharpoonleft:Sfe,downharpoonright:Mfe,DownLeftRightVector:Tfe,DownLeftTeeVector:Ife,DownLeftVectorBar:Pfe,DownLeftVector:kfe,DownRightTeeVector:Bfe,DownRightVectorBar:Rfe,DownRightVector:Dfe,DownTeeArrow:Lfe,DownTee:Ofe,drbkarow:Nfe,drcorn:Ffe,drcrop:zfe,Dscr:Ufe,dscr:Vfe,DScy:Hfe,dscy:$fe,dsol:Gfe,Dstrok:Qfe,dstrok:qfe,dtdot:jfe,dtri:Wfe,dtrif:Yfe,duarr:Xfe,duhar:Kfe,dwangle:Jfe,DZcy:Zfe,dzcy:ede,dzigrarr:tde,Eacute:nde,eacute:ide,easter:rde,Ecaron:sde,ecaron:ade,Ecirc:ode,ecirc:lde,ecir:cde,ecolon:ude,Ecy:hde,ecy:fde,eDDot:dde,Edot:pde,edot:mde,eDot:gde,ee:vde,efDot:_de,Efr:Ade,efr:bde,eg:yde,Egrave:wde,egrave:xde,egs:Cde,egsdot:Ede,el:Sde,Element:Mde,elinters:Tde,ell:Ide,els:Pde,elsdot:kde,Emacr:Bde,emacr:Rde,empty:Dde,emptyset:Lde,EmptySmallSquare:Ode,emptyv:Nde,EmptyVerySmallSquare:Fde,emsp13:zde,emsp14:Ude,emsp:Vde,ENG:Hde,eng:$de,ensp:Gde,Eogon:Qde,eogon:qde,Eopf:jde,eopf:Wde,epar:Yde,eparsl:Xde,eplus:Kde,epsi:Jde,Epsilon:Zde,epsilon:epe,epsiv:tpe,eqcirc:npe,eqcolon:ipe,eqsim:rpe,eqslantgtr:spe,eqslantless:ape,Equal:ope,equals:lpe,EqualTilde:cpe,equest:upe,Equilibrium:hpe,equiv:fpe,equivDD:dpe,eqvparsl:ppe,erarr:mpe,erDot:gpe,escr:vpe,Escr:_pe,esdot:Ape,Esim:bpe,esim:ype,Eta:wpe,eta:xpe,ETH:Cpe,eth:Epe,Euml:Spe,euml:Mpe,euro:Tpe,excl:Ipe,exist:Ppe,Exists:kpe,expectation:Bpe,exponentiale:Rpe,ExponentialE:Dpe,fallingdotseq:Lpe,Fcy:Ope,fcy:Npe,female:Fpe,ffilig:zpe,fflig:Upe,ffllig:Vpe,Ffr:Hpe,ffr:$pe,filig:Gpe,FilledSmallSquare:Qpe,FilledVerySmallSquare:qpe,fjlig:jpe,flat:Wpe,fllig:Ype,fltns:Xpe,fnof:Kpe,Fopf:Jpe,fopf:Zpe,forall:e0e,ForAll:t0e,fork:n0e,forkv:i0e,Fouriertrf:r0e,fpartint:s0e,frac12:a0e,frac13:o0e,frac14:l0e,frac15:c0e,frac16:u0e,frac18:h0e,frac23:f0e,frac25:d0e,frac34:p0e,frac35:m0e,frac38:g0e,frac45:v0e,frac56:_0e,frac58:A0e,frac78:b0e,frasl:y0e,frown:w0e,fscr:x0e,Fscr:C0e,gacute:E0e,Gamma:S0e,gamma:M0e,Gammad:T0e,gammad:I0e,gap:P0e,Gbreve:k0e,gbreve:B0e,Gcedil:R0e,Gcirc:D0e,gcirc:L0e,Gcy:O0e,gcy:N0e,Gdot:F0e,gdot:z0e,ge:U0e,gE:V0e,gEl:H0e,gel:$0e,geq:G0e,geqq:Q0e,geqslant:q0e,gescc:j0e,ges:W0e,gesdot:Y0e,gesdoto:X0e,gesdotol:K0e,gesl:J0e,gesles:Z0e,Gfr:eme,gfr:tme,gg:nme,Gg:ime,ggg:rme,gimel:sme,GJcy:ame,gjcy:ome,gla:lme,gl:cme,glE:ume,glj:hme,gnap:fme,gnapprox:dme,gne:pme,gnE:mme,gneq:gme,gneqq:vme,gnsim:_me,Gopf:Ame,gopf:bme,grave:yme,GreaterEqual:wme,GreaterEqualLess:xme,GreaterFullEqual:Cme,GreaterGreater:Eme,GreaterLess:Sme,GreaterSlantEqual:Mme,GreaterTilde:Tme,Gscr:Ime,gscr:Pme,gsim:kme,gsime:Bme,gsiml:Rme,gtcc:Dme,gtcir:Lme,gt:Ome,GT:Nme,Gt:Fme,gtdot:zme,gtlPar:Ume,gtquest:Vme,gtrapprox:Hme,gtrarr:$me,gtrdot:Gme,gtreqless:Qme,gtreqqless:qme,gtrless:jme,gtrsim:Wme,gvertneqq:Yme,gvnE:Xme,Hacek:Kme,hairsp:Jme,half:Zme,hamilt:ege,HARDcy:tge,hardcy:nge,harrcir:ige,harr:rge,hArr:sge,harrw:age,Hat:oge,hbar:lge,Hcirc:cge,hcirc:uge,hearts:hge,heartsuit:fge,hellip:dge,hercon:pge,hfr:mge,Hfr:gge,HilbertSpace:vge,hksearow:_ge,hkswarow:Age,hoarr:bge,homtht:yge,hookleftarrow:wge,hookrightarrow:xge,hopf:Cge,Hopf:Ege,horbar:Sge,HorizontalLine:Mge,hscr:Tge,Hscr:Ige,hslash:Pge,Hstrok:kge,hstrok:Bge,HumpDownHump:Rge,HumpEqual:Dge,hybull:Lge,hyphen:Oge,Iacute:Nge,iacute:Fge,ic:zge,Icirc:Uge,icirc:Vge,Icy:Hge,icy:$ge,Idot:Gge,IEcy:Qge,iecy:qge,iexcl:jge,iff:Wge,ifr:Yge,Ifr:Xge,Igrave:Kge,igrave:Jge,ii:Zge,iiiint:eve,iiint:tve,iinfin:nve,iiota:ive,IJlig:rve,ijlig:sve,Imacr:ave,imacr:ove,image:lve,ImaginaryI:cve,imagline:uve,imagpart:hve,imath:fve,Im:dve,imof:pve,imped:mve,Implies:gve,incare:vve,in:"∈",infin:_ve,infintie:Ave,inodot:bve,intcal:yve,int:wve,Int:xve,integers:Cve,Integral:Eve,intercal:Sve,Intersection:Mve,intlarhk:Tve,intprod:Ive,InvisibleComma:Pve,InvisibleTimes:kve,IOcy:Bve,iocy:Rve,Iogon:Dve,iogon:Lve,Iopf:Ove,iopf:Nve,Iota:Fve,iota:zve,iprod:Uve,iquest:Vve,iscr:Hve,Iscr:$ve,isin:Gve,isindot:Qve,isinE:qve,isins:jve,isinsv:Wve,isinv:Yve,it:Xve,Itilde:Kve,itilde:Jve,Iukcy:Zve,iukcy:e_e,Iuml:t_e,iuml:n_e,Jcirc:i_e,jcirc:r_e,Jcy:s_e,jcy:a_e,Jfr:o_e,jfr:l_e,jmath:c_e,Jopf:u_e,jopf:h_e,Jscr:f_e,jscr:d_e,Jsercy:p_e,jsercy:m_e,Jukcy:g_e,jukcy:v_e,Kappa:__e,kappa:A_e,kappav:b_e,Kcedil:y_e,kcedil:w_e,Kcy:x_e,kcy:C_e,Kfr:E_e,kfr:S_e,kgreen:M_e,KHcy:T_e,khcy:I_e,KJcy:P_e,kjcy:k_e,Kopf:B_e,kopf:R_e,Kscr:D_e,kscr:L_e,lAarr:O_e,Lacute:N_e,lacute:F_e,laemptyv:z_e,lagran:U_e,Lambda:V_e,lambda:H_e,lang:$_e,Lang:G_e,langd:Q_e,langle:q_e,lap:j_e,Laplacetrf:W_e,laquo:Y_e,larrb:X_e,larrbfs:K_e,larr:J_e,Larr:Z_e,lArr:e1e,larrfs:t1e,larrhk:n1e,larrlp:i1e,larrpl:r1e,larrsim:s1e,larrtl:a1e,latail:o1e,lAtail:l1e,lat:c1e,late:u1e,lates:h1e,lbarr:f1e,lBarr:d1e,lbbrk:p1e,lbrace:m1e,lbrack:g1e,lbrke:v1e,lbrksld:_1e,lbrkslu:A1e,Lcaron:b1e,lcaron:y1e,Lcedil:w1e,lcedil:x1e,lceil:C1e,lcub:E1e,Lcy:S1e,lcy:M1e,ldca:T1e,ldquo:I1e,ldquor:P1e,ldrdhar:k1e,ldrushar:B1e,ldsh:R1e,le:D1e,lE:L1e,LeftAngleBracket:O1e,LeftArrowBar:N1e,leftarrow:F1e,LeftArrow:z1e,Leftarrow:U1e,LeftArrowRightArrow:V1e,leftarrowtail:H1e,LeftCeiling:$1e,LeftDoubleBracket:G1e,LeftDownTeeVector:Q1e,LeftDownVectorBar:q1e,LeftDownVector:j1e,LeftFloor:W1e,leftharpoondown:Y1e,leftharpoonup:X1e,leftleftarrows:K1e,leftrightarrow:J1e,LeftRightArrow:Z1e,Leftrightarrow:eAe,leftrightarrows:tAe,leftrightharpoons:nAe,leftrightsquigarrow:iAe,LeftRightVector:rAe,LeftTeeArrow:sAe,LeftTee:aAe,LeftTeeVector:oAe,leftthreetimes:lAe,LeftTriangleBar:cAe,LeftTriangle:uAe,LeftTriangleEqual:hAe,LeftUpDownVector:fAe,LeftUpTeeVector:dAe,LeftUpVectorBar:pAe,LeftUpVector:mAe,LeftVectorBar:gAe,LeftVector:vAe,lEg:_Ae,leg:AAe,leq:bAe,leqq:yAe,leqslant:wAe,lescc:xAe,les:CAe,lesdot:EAe,lesdoto:SAe,lesdotor:MAe,lesg:TAe,lesges:IAe,lessapprox:PAe,lessdot:kAe,lesseqgtr:BAe,lesseqqgtr:RAe,LessEqualGreater:DAe,LessFullEqual:LAe,LessGreater:OAe,lessgtr:NAe,LessLess:FAe,lesssim:zAe,LessSlantEqual:UAe,LessTilde:VAe,lfisht:HAe,lfloor:$Ae,Lfr:GAe,lfr:QAe,lg:qAe,lgE:jAe,lHar:WAe,lhard:YAe,lharu:XAe,lharul:KAe,lhblk:JAe,LJcy:ZAe,ljcy:ebe,llarr:tbe,ll:nbe,Ll:ibe,llcorner:rbe,Lleftarrow:sbe,llhard:abe,lltri:obe,Lmidot:lbe,lmidot:cbe,lmoustache:ube,lmoust:hbe,lnap:fbe,lnapprox:dbe,lne:pbe,lnE:mbe,lneq:gbe,lneqq:vbe,lnsim:_be,loang:Abe,loarr:bbe,lobrk:ybe,longleftarrow:wbe,LongLeftArrow:xbe,Longleftarrow:Cbe,longleftrightarrow:Ebe,LongLeftRightArrow:Sbe,Longleftrightarrow:Mbe,longmapsto:Tbe,longrightarrow:Ibe,LongRightArrow:Pbe,Longrightarrow:kbe,looparrowleft:Bbe,looparrowright:Rbe,lopar:Dbe,Lopf:Lbe,lopf:Obe,loplus:Nbe,lotimes:Fbe,lowast:zbe,lowbar:Ube,LowerLeftArrow:Vbe,LowerRightArrow:Hbe,loz:$be,lozenge:Gbe,lozf:Qbe,lpar:qbe,lparlt:jbe,lrarr:Wbe,lrcorner:Ybe,lrhar:Xbe,lrhard:Kbe,lrm:Jbe,lrtri:Zbe,lsaquo:eye,lscr:tye,Lscr:nye,lsh:iye,Lsh:rye,lsim:sye,lsime:aye,lsimg:oye,lsqb:lye,lsquo:cye,lsquor:uye,Lstrok:hye,lstrok:fye,ltcc:dye,ltcir:pye,lt:mye,LT:gye,Lt:vye,ltdot:_ye,lthree:Aye,ltimes:bye,ltlarr:yye,ltquest:wye,ltri:xye,ltrie:Cye,ltrif:Eye,ltrPar:Sye,lurdshar:Mye,luruhar:Tye,lvertneqq:Iye,lvnE:Pye,macr:kye,male:Bye,malt:Rye,maltese:Dye,Map:"⤅",map:Lye,mapsto:Oye,mapstodown:Nye,mapstoleft:Fye,mapstoup:zye,marker:Uye,mcomma:Vye,Mcy:Hye,mcy:$ye,mdash:Gye,mDDot:Qye,measuredangle:qye,MediumSpace:jye,Mellintrf:Wye,Mfr:Yye,mfr:Xye,mho:Kye,micro:Jye,midast:Zye,midcir:ewe,mid:twe,middot:nwe,minusb:iwe,minus:rwe,minusd:swe,minusdu:awe,MinusPlus:owe,mlcp:lwe,mldr:cwe,mnplus:uwe,models:hwe,Mopf:fwe,mopf:dwe,mp:pwe,mscr:mwe,Mscr:gwe,mstpos:vwe,Mu:_we,mu:Awe,multimap:bwe,mumap:ywe,nabla:wwe,Nacute:xwe,nacute:Cwe,nang:Ewe,nap:Swe,napE:Mwe,napid:Twe,napos:Iwe,napprox:Pwe,natural:kwe,naturals:Bwe,natur:Rwe,nbsp:Dwe,nbump:Lwe,nbumpe:Owe,ncap:Nwe,Ncaron:Fwe,ncaron:zwe,Ncedil:Uwe,ncedil:Vwe,ncong:Hwe,ncongdot:$we,ncup:Gwe,Ncy:Qwe,ncy:qwe,ndash:jwe,nearhk:Wwe,nearr:Ywe,neArr:Xwe,nearrow:Kwe,ne:Jwe,nedot:Zwe,NegativeMediumSpace:exe,NegativeThickSpace:txe,NegativeThinSpace:nxe,NegativeVeryThinSpace:ixe,nequiv:rxe,nesear:sxe,nesim:axe,NestedGreaterGreater:oxe,NestedLessLess:lxe,NewLine:cxe,nexist:uxe,nexists:hxe,Nfr:fxe,nfr:dxe,ngE:pxe,nge:mxe,ngeq:gxe,ngeqq:vxe,ngeqslant:_xe,nges:Axe,nGg:bxe,ngsim:yxe,nGt:wxe,ngt:xxe,ngtr:Cxe,nGtv:Exe,nharr:Sxe,nhArr:Mxe,nhpar:Txe,ni:Ixe,nis:Pxe,nisd:kxe,niv:Bxe,NJcy:Rxe,njcy:Dxe,nlarr:Lxe,nlArr:Oxe,nldr:Nxe,nlE:Fxe,nle:zxe,nleftarrow:Uxe,nLeftarrow:Vxe,nleftrightarrow:Hxe,nLeftrightarrow:$xe,nleq:Gxe,nleqq:Qxe,nleqslant:qxe,nles:jxe,nless:Wxe,nLl:Yxe,nlsim:Xxe,nLt:Kxe,nlt:Jxe,nltri:Zxe,nltrie:e2e,nLtv:t2e,nmid:n2e,NoBreak:i2e,NonBreakingSpace:r2e,nopf:s2e,Nopf:a2e,Not:o2e,not:l2e,NotCongruent:c2e,NotCupCap:u2e,NotDoubleVerticalBar:h2e,NotElement:f2e,NotEqual:d2e,NotEqualTilde:p2e,NotExists:m2e,NotGreater:g2e,NotGreaterEqual:v2e,NotGreaterFullEqual:_2e,NotGreaterGreater:A2e,NotGreaterLess:b2e,NotGreaterSlantEqual:y2e,NotGreaterTilde:w2e,NotHumpDownHump:x2e,NotHumpEqual:C2e,notin:E2e,notindot:S2e,notinE:M2e,notinva:T2e,notinvb:I2e,notinvc:P2e,NotLeftTriangleBar:k2e,NotLeftTriangle:B2e,NotLeftTriangleEqual:R2e,NotLess:D2e,NotLessEqual:L2e,NotLessGreater:O2e,NotLessLess:N2e,NotLessSlantEqual:F2e,NotLessTilde:z2e,NotNestedGreaterGreater:U2e,NotNestedLessLess:V2e,notni:H2e,notniva:$2e,notnivb:G2e,notnivc:Q2e,NotPrecedes:q2e,NotPrecedesEqual:j2e,NotPrecedesSlantEqual:W2e,NotReverseElement:Y2e,NotRightTriangleBar:X2e,NotRightTriangle:K2e,NotRightTriangleEqual:J2e,NotSquareSubset:Z2e,NotSquareSubsetEqual:eCe,NotSquareSuperset:tCe,NotSquareSupersetEqual:nCe,NotSubset:iCe,NotSubsetEqual:rCe,NotSucceeds:sCe,NotSucceedsEqual:aCe,NotSucceedsSlantEqual:oCe,NotSucceedsTilde:lCe,NotSuperset:cCe,NotSupersetEqual:uCe,NotTilde:hCe,NotTildeEqual:fCe,NotTildeFullEqual:dCe,NotTildeTilde:pCe,NotVerticalBar:mCe,nparallel:gCe,npar:vCe,nparsl:_Ce,npart:ACe,npolint:bCe,npr:yCe,nprcue:wCe,nprec:xCe,npreceq:CCe,npre:ECe,nrarrc:SCe,nrarr:MCe,nrArr:TCe,nrarrw:ICe,nrightarrow:PCe,nRightarrow:kCe,nrtri:BCe,nrtrie:RCe,nsc:DCe,nsccue:LCe,nsce:OCe,Nscr:NCe,nscr:FCe,nshortmid:zCe,nshortparallel:UCe,nsim:VCe,nsime:HCe,nsimeq:$Ce,nsmid:GCe,nspar:QCe,nsqsube:qCe,nsqsupe:jCe,nsub:WCe,nsubE:YCe,nsube:XCe,nsubset:KCe,nsubseteq:JCe,nsubseteqq:ZCe,nsucc:eEe,nsucceq:tEe,nsup:nEe,nsupE:iEe,nsupe:rEe,nsupset:sEe,nsupseteq:aEe,nsupseteqq:oEe,ntgl:lEe,Ntilde:cEe,ntilde:uEe,ntlg:hEe,ntriangleleft:fEe,ntrianglelefteq:dEe,ntriangleright:pEe,ntrianglerighteq:mEe,Nu:gEe,nu:vEe,num:_Ee,numero:AEe,numsp:bEe,nvap:yEe,nvdash:wEe,nvDash:xEe,nVdash:CEe,nVDash:EEe,nvge:SEe,nvgt:MEe,nvHarr:TEe,nvinfin:IEe,nvlArr:PEe,nvle:kEe,nvlt:BEe,nvltrie:REe,nvrArr:DEe,nvrtrie:LEe,nvsim:OEe,nwarhk:NEe,nwarr:FEe,nwArr:zEe,nwarrow:UEe,nwnear:VEe,Oacute:HEe,oacute:$Ee,oast:GEe,Ocirc:QEe,ocirc:qEe,ocir:jEe,Ocy:WEe,ocy:YEe,odash:XEe,Odblac:KEe,odblac:JEe,odiv:ZEe,odot:e4e,odsold:t4e,OElig:n4e,oelig:i4e,ofcir:r4e,Ofr:s4e,ofr:a4e,ogon:o4e,Ograve:l4e,ograve:c4e,ogt:u4e,ohbar:h4e,ohm:f4e,oint:d4e,olarr:p4e,olcir:m4e,olcross:g4e,oline:v4e,olt:_4e,Omacr:A4e,omacr:b4e,Omega:y4e,omega:w4e,Omicron:x4e,omicron:C4e,omid:E4e,ominus:S4e,Oopf:M4e,oopf:T4e,opar:I4e,OpenCurlyDoubleQuote:P4e,OpenCurlyQuote:k4e,operp:B4e,oplus:R4e,orarr:D4e,Or:L4e,or:O4e,ord:N4e,order:F4e,orderof:z4e,ordf:U4e,ordm:V4e,origof:H4e,oror:$4e,orslope:G4e,orv:Q4e,oS:q4e,Oscr:j4e,oscr:W4e,Oslash:Y4e,oslash:X4e,osol:K4e,Otilde:J4e,otilde:Z4e,otimesas:eSe,Otimes:tSe,otimes:nSe,Ouml:iSe,ouml:rSe,ovbar:sSe,OverBar:aSe,OverBrace:oSe,OverBracket:lSe,OverParenthesis:cSe,para:uSe,parallel:hSe,par:fSe,parsim:dSe,parsl:pSe,part:mSe,PartialD:gSe,Pcy:vSe,pcy:_Se,percnt:ASe,period:bSe,permil:ySe,perp:wSe,pertenk:xSe,Pfr:CSe,pfr:ESe,Phi:SSe,phi:MSe,phiv:TSe,phmmat:ISe,phone:PSe,Pi:kSe,pi:BSe,pitchfork:RSe,piv:DSe,planck:LSe,planckh:OSe,plankv:NSe,plusacir:FSe,plusb:zSe,pluscir:USe,plus:VSe,plusdo:HSe,plusdu:$Se,pluse:GSe,PlusMinus:QSe,plusmn:qSe,plussim:jSe,plustwo:WSe,pm:YSe,Poincareplane:XSe,pointint:KSe,popf:JSe,Popf:ZSe,pound:e3e,prap:t3e,Pr:n3e,pr:i3e,prcue:r3e,precapprox:s3e,prec:a3e,preccurlyeq:o3e,Precedes:l3e,PrecedesEqual:c3e,PrecedesSlantEqual:u3e,PrecedesTilde:h3e,preceq:f3e,precnapprox:d3e,precneqq:p3e,precnsim:m3e,pre:g3e,prE:v3e,precsim:_3e,prime:A3e,Prime:b3e,primes:y3e,prnap:w3e,prnE:x3e,prnsim:C3e,prod:E3e,Product:S3e,profalar:M3e,profline:T3e,profsurf:I3e,prop:P3e,Proportional:k3e,Proportion:B3e,propto:R3e,prsim:D3e,prurel:L3e,Pscr:O3e,pscr:N3e,Psi:F3e,psi:z3e,puncsp:U3e,Qfr:V3e,qfr:H3e,qint:$3e,qopf:G3e,Qopf:Q3e,qprime:q3e,Qscr:j3e,qscr:W3e,quaternions:Y3e,quatint:X3e,quest:K3e,questeq:J3e,quot:Z3e,QUOT:eMe,rAarr:tMe,race:nMe,Racute:iMe,racute:rMe,radic:sMe,raemptyv:aMe,rang:oMe,Rang:lMe,rangd:cMe,range:uMe,rangle:hMe,raquo:fMe,rarrap:dMe,rarrb:pMe,rarrbfs:mMe,rarrc:gMe,rarr:vMe,Rarr:_Me,rArr:AMe,rarrfs:bMe,rarrhk:yMe,rarrlp:wMe,rarrpl:xMe,rarrsim:CMe,Rarrtl:EMe,rarrtl:SMe,rarrw:MMe,ratail:TMe,rAtail:IMe,ratio:PMe,rationals:kMe,rbarr:BMe,rBarr:RMe,RBarr:DMe,rbbrk:LMe,rbrace:OMe,rbrack:NMe,rbrke:FMe,rbrksld:zMe,rbrkslu:UMe,Rcaron:VMe,rcaron:HMe,Rcedil:$Me,rcedil:GMe,rceil:QMe,rcub:qMe,Rcy:jMe,rcy:WMe,rdca:YMe,rdldhar:XMe,rdquo:KMe,rdquor:JMe,rdsh:ZMe,real:eTe,realine:tTe,realpart:nTe,reals:iTe,Re:rTe,rect:sTe,reg:aTe,REG:oTe,ReverseElement:lTe,ReverseEquilibrium:cTe,ReverseUpEquilibrium:uTe,rfisht:hTe,rfloor:fTe,rfr:dTe,Rfr:pTe,rHar:mTe,rhard:gTe,rharu:vTe,rharul:_Te,Rho:ATe,rho:bTe,rhov:yTe,RightAngleBracket:wTe,RightArrowBar:xTe,rightarrow:CTe,RightArrow:ETe,Rightarrow:STe,RightArrowLeftArrow:MTe,rightarrowtail:TTe,RightCeiling:ITe,RightDoubleBracket:PTe,RightDownTeeVector:kTe,RightDownVectorBar:BTe,RightDownVector:RTe,RightFloor:DTe,rightharpoondown:LTe,rightharpoonup:OTe,rightleftarrows:NTe,rightleftharpoons:FTe,rightrightarrows:zTe,rightsquigarrow:UTe,RightTeeArrow:VTe,RightTee:HTe,RightTeeVector:$Te,rightthreetimes:GTe,RightTriangleBar:QTe,RightTriangle:qTe,RightTriangleEqual:jTe,RightUpDownVector:WTe,RightUpTeeVector:YTe,RightUpVectorBar:XTe,RightUpVector:KTe,RightVectorBar:JTe,RightVector:ZTe,ring:e5e,risingdotseq:t5e,rlarr:n5e,rlhar:i5e,rlm:r5e,rmoustache:s5e,rmoust:a5e,rnmid:o5e,roang:l5e,roarr:c5e,robrk:u5e,ropar:h5e,ropf:f5e,Ropf:d5e,roplus:p5e,rotimes:m5e,RoundImplies:g5e,rpar:v5e,rpargt:_5e,rppolint:A5e,rrarr:b5e,Rrightarrow:y5e,rsaquo:w5e,rscr:x5e,Rscr:C5e,rsh:E5e,Rsh:S5e,rsqb:M5e,rsquo:T5e,rsquor:I5e,rthree:P5e,rtimes:k5e,rtri:B5e,rtrie:R5e,rtrif:D5e,rtriltri:L5e,RuleDelayed:O5e,ruluhar:N5e,rx:F5e,Sacute:z5e,sacute:U5e,sbquo:V5e,scap:H5e,Scaron:$5e,scaron:G5e,Sc:Q5e,sc:q5e,sccue:j5e,sce:W5e,scE:Y5e,Scedil:X5e,scedil:K5e,Scirc:J5e,scirc:Z5e,scnap:eIe,scnE:tIe,scnsim:nIe,scpolint:iIe,scsim:rIe,Scy:sIe,scy:aIe,sdotb:oIe,sdot:lIe,sdote:cIe,searhk:uIe,searr:hIe,seArr:fIe,searrow:dIe,sect:pIe,semi:mIe,seswar:gIe,setminus:vIe,setmn:_Ie,sext:AIe,Sfr:bIe,sfr:yIe,sfrown:wIe,sharp:xIe,SHCHcy:CIe,shchcy:EIe,SHcy:SIe,shcy:MIe,ShortDownArrow:TIe,ShortLeftArrow:IIe,shortmid:PIe,shortparallel:kIe,ShortRightArrow:BIe,ShortUpArrow:RIe,shy:DIe,Sigma:LIe,sigma:OIe,sigmaf:NIe,sigmav:FIe,sim:zIe,simdot:UIe,sime:VIe,simeq:HIe,simg:$Ie,simgE:GIe,siml:QIe,simlE:qIe,simne:jIe,simplus:WIe,simrarr:YIe,slarr:XIe,SmallCircle:KIe,smallsetminus:JIe,smashp:ZIe,smeparsl:ePe,smid:tPe,smile:nPe,smt:iPe,smte:rPe,smtes:sPe,SOFTcy:aPe,softcy:oPe,solbar:lPe,solb:cPe,sol:uPe,Sopf:hPe,sopf:fPe,spades:dPe,spadesuit:pPe,spar:mPe,sqcap:gPe,sqcaps:vPe,sqcup:_Pe,sqcups:APe,Sqrt:bPe,sqsub:yPe,sqsube:wPe,sqsubset:xPe,sqsubseteq:CPe,sqsup:EPe,sqsupe:SPe,sqsupset:MPe,sqsupseteq:TPe,square:IPe,Square:PPe,SquareIntersection:kPe,SquareSubset:BPe,SquareSubsetEqual:RPe,SquareSuperset:DPe,SquareSupersetEqual:LPe,SquareUnion:OPe,squarf:NPe,squ:FPe,squf:zPe,srarr:UPe,Sscr:VPe,sscr:HPe,ssetmn:$Pe,ssmile:GPe,sstarf:QPe,Star:qPe,star:jPe,starf:WPe,straightepsilon:YPe,straightphi:XPe,strns:KPe,sub:JPe,Sub:ZPe,subdot:e6e,subE:t6e,sube:n6e,subedot:i6e,submult:r6e,subnE:s6e,subne:a6e,subplus:o6e,subrarr:l6e,subset:c6e,Subset:u6e,subseteq:h6e,subseteqq:f6e,SubsetEqual:d6e,subsetneq:p6e,subsetneqq:m6e,subsim:g6e,subsub:v6e,subsup:_6e,succapprox:A6e,succ:b6e,succcurlyeq:y6e,Succeeds:w6e,SucceedsEqual:x6e,SucceedsSlantEqual:C6e,SucceedsTilde:E6e,succeq:S6e,succnapprox:M6e,succneqq:T6e,succnsim:I6e,succsim:P6e,SuchThat:k6e,sum:B6e,Sum:R6e,sung:D6e,sup1:L6e,sup2:O6e,sup3:N6e,sup:F6e,Sup:z6e,supdot:U6e,supdsub:V6e,supE:H6e,supe:$6e,supedot:G6e,Superset:Q6e,SupersetEqual:q6e,suphsol:j6e,suphsub:W6e,suplarr:Y6e,supmult:X6e,supnE:K6e,supne:J6e,supplus:Z6e,supset:eke,Supset:tke,supseteq:nke,supseteqq:ike,supsetneq:rke,supsetneqq:ske,supsim:ake,supsub:oke,supsup:lke,swarhk:cke,swarr:uke,swArr:hke,swarrow:fke,swnwar:dke,szlig:pke,Tab:mke,target:gke,Tau:vke,tau:_ke,tbrk:Ake,Tcaron:bke,tcaron:yke,Tcedil:wke,tcedil:xke,Tcy:Cke,tcy:Eke,tdot:Ske,telrec:Mke,Tfr:Tke,tfr:Ike,there4:Pke,therefore:kke,Therefore:Bke,Theta:Rke,theta:Dke,thetasym:Lke,thetav:Oke,thickapprox:Nke,thicksim:Fke,ThickSpace:zke,ThinSpace:Uke,thinsp:Vke,thkap:Hke,thksim:$ke,THORN:Gke,thorn:Qke,tilde:qke,Tilde:jke,TildeEqual:Wke,TildeFullEqual:Yke,TildeTilde:Xke,timesbar:Kke,timesb:Jke,times:Zke,timesd:e8e,tint:t8e,toea:n8e,topbot:i8e,topcir:r8e,top:s8e,Topf:a8e,topf:o8e,topfork:l8e,tosa:c8e,tprime:u8e,trade:h8e,TRADE:f8e,triangle:d8e,triangledown:p8e,triangleleft:m8e,trianglelefteq:g8e,triangleq:v8e,triangleright:_8e,trianglerighteq:A8e,tridot:b8e,trie:y8e,triminus:w8e,TripleDot:x8e,triplus:C8e,trisb:E8e,tritime:S8e,trpezium:M8e,Tscr:T8e,tscr:I8e,TScy:P8e,tscy:k8e,TSHcy:B8e,tshcy:R8e,Tstrok:D8e,tstrok:L8e,twixt:O8e,twoheadleftarrow:N8e,twoheadrightarrow:F8e,Uacute:z8e,uacute:U8e,uarr:V8e,Uarr:H8e,uArr:$8e,Uarrocir:G8e,Ubrcy:Q8e,ubrcy:q8e,Ubreve:j8e,ubreve:W8e,Ucirc:Y8e,ucirc:X8e,Ucy:K8e,ucy:J8e,udarr:Z8e,Udblac:eBe,udblac:tBe,udhar:nBe,ufisht:iBe,Ufr:rBe,ufr:sBe,Ugrave:aBe,ugrave:oBe,uHar:lBe,uharl:cBe,uharr:uBe,uhblk:hBe,ulcorn:fBe,ulcorner:dBe,ulcrop:pBe,ultri:mBe,Umacr:gBe,umacr:vBe,uml:_Be,UnderBar:ABe,UnderBrace:bBe,UnderBracket:yBe,UnderParenthesis:wBe,Union:xBe,UnionPlus:CBe,Uogon:EBe,uogon:SBe,Uopf:MBe,uopf:TBe,UpArrowBar:IBe,uparrow:PBe,UpArrow:kBe,Uparrow:BBe,UpArrowDownArrow:RBe,updownarrow:DBe,UpDownArrow:LBe,Updownarrow:OBe,UpEquilibrium:NBe,upharpoonleft:FBe,upharpoonright:zBe,uplus:UBe,UpperLeftArrow:VBe,UpperRightArrow:HBe,upsi:$Be,Upsi:GBe,upsih:QBe,Upsilon:qBe,upsilon:jBe,UpTeeArrow:WBe,UpTee:YBe,upuparrows:XBe,urcorn:KBe,urcorner:JBe,urcrop:ZBe,Uring:eRe,uring:tRe,urtri:nRe,Uscr:iRe,uscr:rRe,utdot:sRe,Utilde:aRe,utilde:oRe,utri:lRe,utrif:cRe,uuarr:uRe,Uuml:hRe,uuml:fRe,uwangle:dRe,vangrt:pRe,varepsilon:mRe,varkappa:gRe,varnothing:vRe,varphi:_Re,varpi:ARe,varpropto:bRe,varr:yRe,vArr:wRe,varrho:xRe,varsigma:CRe,varsubsetneq:ERe,varsubsetneqq:SRe,varsupsetneq:MRe,varsupsetneqq:TRe,vartheta:IRe,vartriangleleft:PRe,vartriangleright:kRe,vBar:BRe,Vbar:RRe,vBarv:DRe,Vcy:LRe,vcy:ORe,vdash:NRe,vDash:FRe,Vdash:zRe,VDash:URe,Vdashl:VRe,veebar:HRe,vee:$Re,Vee:GRe,veeeq:QRe,vellip:qRe,verbar:jRe,Verbar:WRe,vert:YRe,Vert:XRe,VerticalBar:KRe,VerticalLine:JRe,VerticalSeparator:ZRe,VerticalTilde:e7e,VeryThinSpace:t7e,Vfr:n7e,vfr:i7e,vltri:r7e,vnsub:s7e,vnsup:a7e,Vopf:o7e,vopf:l7e,vprop:c7e,vrtri:u7e,Vscr:h7e,vscr:f7e,vsubnE:d7e,vsubne:p7e,vsupnE:m7e,vsupne:g7e,Vvdash:v7e,vzigzag:_7e,Wcirc:A7e,wcirc:b7e,wedbar:y7e,wedge:w7e,Wedge:x7e,wedgeq:C7e,weierp:E7e,Wfr:S7e,wfr:M7e,Wopf:T7e,wopf:I7e,wp:P7e,wr:k7e,wreath:B7e,Wscr:R7e,wscr:D7e,xcap:L7e,xcirc:O7e,xcup:N7e,xdtri:F7e,Xfr:z7e,xfr:U7e,xharr:V7e,xhArr:H7e,Xi:$7e,xi:G7e,xlarr:Q7e,xlArr:q7e,xmap:j7e,xnis:W7e,xodot:Y7e,Xopf:X7e,xopf:K7e,xoplus:J7e,xotime:Z7e,xrarr:eDe,xrArr:tDe,Xscr:nDe,xscr:iDe,xsqcup:rDe,xuplus:sDe,xutri:aDe,xvee:oDe,xwedge:lDe,Yacute:cDe,yacute:uDe,YAcy:hDe,yacy:fDe,Ycirc:dDe,ycirc:pDe,Ycy:mDe,ycy:gDe,yen:vDe,Yfr:_De,yfr:ADe,YIcy:bDe,yicy:yDe,Yopf:wDe,yopf:xDe,Yscr:CDe,yscr:EDe,YUcy:SDe,yucy:MDe,yuml:TDe,Yuml:IDe,Zacute:PDe,zacute:kDe,Zcaron:BDe,zcaron:RDe,Zcy:DDe,zcy:LDe,Zdot:ODe,zdot:NDe,zeetrf:FDe,ZeroWidthSpace:zDe,Zeta:UDe,zeta:VDe,zfr:HDe,Zfr:$De,ZHcy:GDe,zhcy:QDe,zigrarr:qDe,zopf:jDe,Zopf:WDe,Zscr:YDe,zscr:XDe,zwj:KDe,zwnj:JDe},ZDe="Á",e9e="á",t9e="Â",n9e="â",i9e="´",r9e="Æ",s9e="æ",a9e="À",o9e="à",l9e="&",c9e="&",u9e="Å",h9e="å",f9e="Ã",d9e="ã",p9e="Ä",m9e="ä",g9e="¦",v9e="Ç",_9e="ç",A9e="¸",b9e="¢",y9e="©",w9e="©",x9e="¤",C9e="°",E9e="÷",S9e="É",M9e="é",T9e="Ê",I9e="ê",P9e="È",k9e="è",B9e="Ð",R9e="ð",D9e="Ë",L9e="ë",O9e="½",N9e="¼",F9e="¾",z9e=">",U9e=">",V9e="Í",H9e="í",$9e="Î",G9e="î",Q9e="¡",q9e="Ì",j9e="ì",W9e="¿",Y9e="Ï",X9e="ï",K9e="«",J9e="<",Z9e="<",eLe="¯",tLe="µ",nLe="·",iLe=" ",rLe="¬",sLe="Ñ",aLe="ñ",oLe="Ó",lLe="ó",cLe="Ô",uLe="ô",hLe="Ò",fLe="ò",dLe="ª",pLe="º",mLe="Ø",gLe="ø",vLe="Õ",_Le="õ",ALe="Ö",bLe="ö",yLe="¶",wLe="±",xLe="£",CLe='"',ELe='"',SLe="»",MLe="®",TLe="®",ILe="§",PLe="­",kLe="¹",BLe="²",RLe="³",DLe="ß",LLe="Þ",OLe="þ",NLe="×",FLe="Ú",zLe="ú",ULe="Û",VLe="û",HLe="Ù",$Le="ù",GLe="¨",QLe="Ü",qLe="ü",jLe="Ý",WLe="ý",YLe="¥",XLe="ÿ",KLe={Aacute:ZDe,aacute:e9e,Acirc:t9e,acirc:n9e,acute:i9e,AElig:r9e,aelig:s9e,Agrave:a9e,agrave:o9e,amp:l9e,AMP:c9e,Aring:u9e,aring:h9e,Atilde:f9e,atilde:d9e,Auml:p9e,auml:m9e,brvbar:g9e,Ccedil:v9e,ccedil:_9e,cedil:A9e,cent:b9e,copy:y9e,COPY:w9e,curren:x9e,deg:C9e,divide:E9e,Eacute:S9e,eacute:M9e,Ecirc:T9e,ecirc:I9e,Egrave:P9e,egrave:k9e,ETH:B9e,eth:R9e,Euml:D9e,euml:L9e,frac12:O9e,frac14:N9e,frac34:F9e,gt:z9e,GT:U9e,Iacute:V9e,iacute:H9e,Icirc:$9e,icirc:G9e,iexcl:Q9e,Igrave:q9e,igrave:j9e,iquest:W9e,Iuml:Y9e,iuml:X9e,laquo:K9e,lt:J9e,LT:Z9e,macr:eLe,micro:tLe,middot:nLe,nbsp:iLe,not:rLe,Ntilde:sLe,ntilde:aLe,Oacute:oLe,oacute:lLe,Ocirc:cLe,ocirc:uLe,Ograve:hLe,ograve:fLe,ordf:dLe,ordm:pLe,Oslash:mLe,oslash:gLe,Otilde:vLe,otilde:_Le,Ouml:ALe,ouml:bLe,para:yLe,plusmn:wLe,pound:xLe,quot:CLe,QUOT:ELe,raquo:SLe,reg:MLe,REG:TLe,sect:ILe,shy:PLe,sup1:kLe,sup2:BLe,sup3:RLe,szlig:DLe,THORN:LLe,thorn:OLe,times:NLe,Uacute:FLe,uacute:zLe,Ucirc:ULe,ucirc:VLe,Ugrave:HLe,ugrave:$Le,uml:GLe,Uuml:QLe,uuml:qLe,Yacute:jLe,yacute:WLe,yen:YLe,yuml:XLe},JLe="&",ZLe="'",eOe=">",tOe="<",nOe='"',RN={amp:JLe,apos:ZLe,gt:eOe,lt:tOe,quot:nOe};var sI={};const iOe={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376};var rOe=bt&&bt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(sI,"__esModule",{value:!0});var eB=rOe(iOe),sOe=String.fromCodePoint||function(i){var e="";return i>65535&&(i-=65536,e+=String.fromCharCode(i>>>10&1023|55296),i=56320|i&1023),e+=String.fromCharCode(i),e};function aOe(i){return i>=55296&&i<=57343||i>1114111?"�":(i in eB.default&&(i=eB.default[i]),sOe(i))}sI.default=aOe;var K2=bt&&bt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(yf,"__esModule",{value:!0});yf.decodeHTML=yf.decodeHTMLStrict=yf.decodeXML=void 0;var MM=K2(BN),oOe=K2(KLe),lOe=K2(RN),tB=K2(sI),cOe=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;yf.decodeXML=DN(lOe.default);yf.decodeHTMLStrict=DN(MM.default);function DN(i){var e=LN(i);return function(t){return String(t).replace(cOe,e)}}var nB=function(i,e){return i<e?1:-1};yf.decodeHTML=function(){for(var i=Object.keys(oOe.default).sort(nB),e=Object.keys(MM.default).sort(nB),t=0,n=0;t<e.length;t++)i[n]===e[t]?(e[t]+=";?",n++):e[t]+=";";var r=new RegExp("&(?:"+e.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),s=LN(MM.default);function a(o){return o.substr(-1)!==";"&&(o+=";"),s(o)}return function(o){return String(o).replace(r,a)}}();function LN(i){return function(t){if(t.charAt(1)==="#"){var n=t.charAt(2);return n==="X"||n==="x"?tB.default(parseInt(t.substr(3),16)):tB.default(parseInt(t.substr(2),10))}return i[t.slice(1,-1)]||t}}var ql={},ON=bt&&bt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ql,"__esModule",{value:!0});ql.escapeUTF8=ql.escape=ql.encodeNonAsciiHTML=ql.encodeHTML=ql.encodeXML=void 0;var uOe=ON(RN),NN=zN(uOe.default),FN=UN(NN);ql.encodeXML=$N(NN);var hOe=ON(BN),aI=zN(hOe.default),fOe=UN(aI);ql.encodeHTML=pOe(aI,fOe);ql.encodeNonAsciiHTML=$N(aI);function zN(i){return Object.keys(i).sort().reduce(function(e,t){return e[i[t]]="&"+t+";",e},{})}function UN(i){for(var e=[],t=[],n=0,r=Object.keys(i);n<r.length;n++){var s=r[n];s.length===1?e.push("\\"+s):t.push(s)}e.sort();for(var a=0;a<e.length-1;a++){for(var o=a;o<e.length-1&&e[o].charCodeAt(1)+1===e[o+1].charCodeAt(1);)o+=1;var l=1+o-a;l<3||e.splice(a,l,e[a]+"-"+e[o])}return t.unshift("["+e.join("")+"]"),new RegExp(t.join("|"),"g")}var VN=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,dOe=String.prototype.codePointAt!=null?function(i){return i.codePointAt(0)}:function(i){return(i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536};function J2(i){return"&#x"+(i.length>1?dOe(i):i.charCodeAt(0)).toString(16).toUpperCase()+";"}function pOe(i,e){return function(t){return t.replace(e,function(n){return i[n]}).replace(VN,J2)}}var HN=new RegExp(FN.source+"|"+VN.source,"g");function mOe(i){return i.replace(HN,J2)}ql.escape=mOe;function gOe(i){return i.replace(FN,J2)}ql.escapeUTF8=gOe;function $N(i){return function(e){return e.replace(HN,function(t){return i[t]||J2(t)})}}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.decodeXMLStrict=i.decodeHTML5Strict=i.decodeHTML4Strict=i.decodeHTML5=i.decodeHTML4=i.decodeHTMLStrict=i.decodeHTML=i.decodeXML=i.encodeHTML5=i.encodeHTML4=i.escapeUTF8=i.escape=i.encodeNonAsciiHTML=i.encodeHTML=i.encodeXML=i.encode=i.decodeStrict=i.decode=void 0;var e=yf,t=ql;function n(l,c){return(!c||c<=0?e.decodeXML:e.decodeHTML)(l)}i.decode=n;function r(l,c){return(!c||c<=0?e.decodeXML:e.decodeHTMLStrict)(l)}i.decodeStrict=r;function s(l,c){return(!c||c<=0?t.encodeXML:t.encodeHTML)(l)}i.encode=s;var a=ql;Object.defineProperty(i,"encodeXML",{enumerable:!0,get:function(){return a.encodeXML}}),Object.defineProperty(i,"encodeHTML",{enumerable:!0,get:function(){return a.encodeHTML}}),Object.defineProperty(i,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return a.encodeNonAsciiHTML}}),Object.defineProperty(i,"escape",{enumerable:!0,get:function(){return a.escape}}),Object.defineProperty(i,"escapeUTF8",{enumerable:!0,get:function(){return a.escapeUTF8}}),Object.defineProperty(i,"encodeHTML4",{enumerable:!0,get:function(){return a.encodeHTML}}),Object.defineProperty(i,"encodeHTML5",{enumerable:!0,get:function(){return a.encodeHTML}});var o=yf;Object.defineProperty(i,"decodeXML",{enumerable:!0,get:function(){return o.decodeXML}}),Object.defineProperty(i,"decodeHTML",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(i,"decodeHTMLStrict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(i,"decodeHTML4",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(i,"decodeHTML5",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(i,"decodeHTML4Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(i,"decodeHTML5Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(i,"decodeXMLStrict",{enumerable:!0,get:function(){return o.decodeXML}})})(kN);var Fg={};Object.defineProperty(Fg,"__esModule",{value:!0});Fg.attributeNames=Fg.elementNames=void 0;Fg.elementNames=new Map([["altglyph","altGlyph"],["altglyphdef","altGlyphDef"],["altglyphitem","altGlyphItem"],["animatecolor","animateColor"],["animatemotion","animateMotion"],["animatetransform","animateTransform"],["clippath","clipPath"],["feblend","feBlend"],["fecolormatrix","feColorMatrix"],["fecomponenttransfer","feComponentTransfer"],["fecomposite","feComposite"],["feconvolvematrix","feConvolveMatrix"],["fediffuselighting","feDiffuseLighting"],["fedisplacementmap","feDisplacementMap"],["fedistantlight","feDistantLight"],["fedropshadow","feDropShadow"],["feflood","feFlood"],["fefunca","feFuncA"],["fefuncb","feFuncB"],["fefuncg","feFuncG"],["fefuncr","feFuncR"],["fegaussianblur","feGaussianBlur"],["feimage","feImage"],["femerge","feMerge"],["femergenode","feMergeNode"],["femorphology","feMorphology"],["feoffset","feOffset"],["fepointlight","fePointLight"],["fespecularlighting","feSpecularLighting"],["fespotlight","feSpotLight"],["fetile","feTile"],["feturbulence","feTurbulence"],["foreignobject","foreignObject"],["glyphref","glyphRef"],["lineargradient","linearGradient"],["radialgradient","radialGradient"],["textpath","textPath"]]);Fg.attributeNames=new Map([["definitionurl","definitionURL"],["attributename","attributeName"],["attributetype","attributeType"],["basefrequency","baseFrequency"],["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur","repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget","viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]]);var mg=bt&&bt.__assign||function(){return mg=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},mg.apply(this,arguments)},vOe=bt&&bt.__createBinding||(Object.create?function(i,e,t,n){n===void 0&&(n=t),Object.defineProperty(i,n,{enumerable:!0,get:function(){return e[t]}})}:function(i,e,t,n){n===void 0&&(n=t),i[n]=e[t]}),_Oe=bt&&bt.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),AOe=bt&&bt.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&vOe(e,i,t);return _Oe(e,i),e};Object.defineProperty(rI,"__esModule",{value:!0});var rf=AOe(gA),GN=kN,QN=Fg,bOe=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function yOe(i,e){if(i)return Object.keys(i).map(function(t){var n,r,s=(n=i[t])!==null&&n!==void 0?n:"";return e.xmlMode==="foreign"&&(t=(r=QN.attributeNames.get(t))!==null&&r!==void 0?r:t),!e.emptyAttrs&&!e.xmlMode&&s===""?t:t+'="'+(e.decodeEntities!==!1?GN.encodeXML(s):s.replace(/"/g,"&quot;"))+'"'}).join(" ")}var iB=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function oI(i,e){e===void 0&&(e={});for(var t=("length"in i)?i:[i],n="",r=0;r<t.length;r++)n+=wOe(t[r],e);return n}rI.default=oI;function wOe(i,e){switch(i.type){case rf.Root:return oI(i.children,e);case rf.Directive:case rf.Doctype:return SOe(i);case rf.Comment:return IOe(i);case rf.CDATA:return TOe(i);case rf.Script:case rf.Style:case rf.Tag:return EOe(i,e);case rf.Text:return MOe(i,e)}}var xOe=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),COe=new Set(["svg","math"]);function EOe(i,e){var t;e.xmlMode==="foreign"&&(i.name=(t=QN.elementNames.get(i.name))!==null&&t!==void 0?t:i.name,i.parent&&xOe.has(i.parent.name)&&(e=mg(mg({},e),{xmlMode:!1}))),!e.xmlMode&&COe.has(i.name)&&(e=mg(mg({},e),{xmlMode:"foreign"}));var n="<"+i.name,r=yOe(i.attribs,e);return r&&(n+=" "+r),i.children.length===0&&(e.xmlMode?e.selfClosingTags!==!1:e.selfClosingTags&&iB.has(i.name))?(e.xmlMode||(n+=" "),n+="/>"):(n+=">",i.children.length>0&&(n+=oI(i.children,e)),(e.xmlMode||!iB.has(i.name))&&(n+="</"+i.name+">")),n}function SOe(i){return"<"+i.data+">"}function MOe(i,e){var t=i.data||"";return e.decodeEntities!==!1&&!(!e.xmlMode&&i.parent&&bOe.has(i.parent.name))&&(t=GN.encodeXML(t)),t}function TOe(i){return"<![CDATA["+i.children[0].data+"]]>"}function IOe(i){return"<!--"+i.data+"-->"}var POe=bt&&bt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ql,"__esModule",{value:!0});Ql.innerText=Ql.textContent=Ql.getText=Ql.getInnerHTML=Ql.getOuterHTML=void 0;var hh=q0,kOe=POe(rI),BOe=gA;function qN(i,e){return(0,kOe.default)(i,e)}Ql.getOuterHTML=qN;function ROe(i,e){return(0,hh.hasChildren)(i)?i.children.map(function(t){return qN(t,e)}).join(""):""}Ql.getInnerHTML=ROe;function Yw(i){return Array.isArray(i)?i.map(Yw).join(""):(0,hh.isTag)(i)?i.name==="br"?`
`:Yw(i.children):(0,hh.isCDATA)(i)?Yw(i.children):(0,hh.isText)(i)?i.data:""}Ql.getText=Yw;function TM(i){return Array.isArray(i)?i.map(TM).join(""):(0,hh.hasChildren)(i)&&!(0,hh.isComment)(i)?TM(i.children):(0,hh.isText)(i)?i.data:""}Ql.textContent=TM;function IM(i){return Array.isArray(i)?i.map(IM).join(""):(0,hh.hasChildren)(i)&&(i.type===BOe.ElementType.Tag||(0,hh.isCDATA)(i))?IM(i.children):(0,hh.isText)(i)?i.data:""}Ql.innerText=IM;var za={};Object.defineProperty(za,"__esModule",{value:!0});za.prevElementSibling=za.nextElementSibling=za.getName=za.hasAttrib=za.getAttributeValue=za.getSiblings=za.getParent=za.getChildren=void 0;var jN=q0,DOe=[];function WN(i){var e;return(e=i.children)!==null&&e!==void 0?e:DOe}za.getChildren=WN;function YN(i){return i.parent||null}za.getParent=YN;function LOe(i){var e,t,n=YN(i);if(n!=null)return WN(n);for(var r=[i],s=i.prev,a=i.next;s!=null;)r.unshift(s),e=s,s=e.prev;for(;a!=null;)r.push(a),t=a,a=t.next;return r}za.getSiblings=LOe;function OOe(i,e){var t;return(t=i.attribs)===null||t===void 0?void 0:t[e]}za.getAttributeValue=OOe;function NOe(i,e){return i.attribs!=null&&Object.prototype.hasOwnProperty.call(i.attribs,e)&&i.attribs[e]!=null}za.hasAttrib=NOe;function FOe(i){return i.name}za.getName=FOe;function zOe(i){for(var e,t=i.next;t!==null&&!(0,jN.isTag)(t);)e=t,t=e.next;return t}za.nextElementSibling=zOe;function UOe(i){for(var e,t=i.prev;t!==null&&!(0,jN.isTag)(t);)e=t,t=e.prev;return t}za.prevElementSibling=UOe;var ol={};Object.defineProperty(ol,"__esModule",{value:!0});ol.prepend=ol.prependChild=ol.append=ol.appendChild=ol.replaceElement=ol.removeElement=void 0;function vA(i){if(i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),i.parent){var e=i.parent.children;e.splice(e.lastIndexOf(i),1)}}ol.removeElement=vA;function VOe(i,e){var t=e.prev=i.prev;t&&(t.next=e);var n=e.next=i.next;n&&(n.prev=e);var r=e.parent=i.parent;if(r){var s=r.children;s[s.lastIndexOf(i)]=e}}ol.replaceElement=VOe;function HOe(i,e){if(vA(e),e.next=null,e.parent=i,i.children.push(e)>1){var t=i.children[i.children.length-2];t.next=e,e.prev=t}else e.prev=null}ol.appendChild=HOe;function $Oe(i,e){vA(e);var t=i.parent,n=i.next;if(e.next=n,e.prev=i,i.next=e,e.parent=t,n){if(n.prev=e,t){var r=t.children;r.splice(r.lastIndexOf(n),0,e)}}else t&&t.children.push(e)}ol.append=$Oe;function GOe(i,e){if(vA(e),e.parent=i,e.prev=null,i.children.unshift(e)!==1){var t=i.children[1];t.prev=e,e.next=t}else e.next=null}ol.prependChild=GOe;function QOe(i,e){vA(e);var t=i.parent;if(t){var n=t.children;n.splice(n.indexOf(i),0,e)}i.prev&&(i.prev.next=e),e.parent=t,e.prev=i.prev,e.next=i,i.prev=e}ol.prepend=QOe;var Ro={};Object.defineProperty(Ro,"__esModule",{value:!0});Ro.findAll=Ro.existsOne=Ro.findOne=Ro.findOneChild=Ro.find=Ro.filter=void 0;var P1=q0;function qOe(i,e,t,n){return t===void 0&&(t=!0),n===void 0&&(n=1/0),Array.isArray(e)||(e=[e]),lI(i,e,t,n)}Ro.filter=qOe;function lI(i,e,t,n){for(var r=[],s=0,a=e;s<a.length;s++){var o=a[s];if(i(o)&&(r.push(o),--n<=0))break;if(t&&(0,P1.hasChildren)(o)&&o.children.length>0){var l=lI(i,o.children,t,n);if(r.push.apply(r,l),n-=l.length,n<=0)break}}return r}Ro.find=lI;function jOe(i,e){return e.find(i)}Ro.findOneChild=jOe;function XN(i,e,t){t===void 0&&(t=!0);for(var n=null,r=0;r<e.length&&!n;r++){var s=e[r];if((0,P1.isTag)(s))i(s)?n=s:t&&s.children.length>0&&(n=XN(i,s.children));else continue}return n}Ro.findOne=XN;function KN(i,e){return e.some(function(t){return(0,P1.isTag)(t)&&(i(t)||t.children.length>0&&KN(i,t.children))})}Ro.existsOne=KN;function WOe(i,e){for(var t,n=[],r=e.filter(P1.isTag),s;s=r.shift();){var a=(t=s.children)===null||t===void 0?void 0:t.filter(P1.isTag);a&&a.length>0&&r.unshift.apply(r,a),i(s)&&n.push(s)}return n}Ro.findAll=WOe;var jl={};Object.defineProperty(jl,"__esModule",{value:!0});jl.getElementsByTagType=jl.getElementsByTagName=jl.getElementById=jl.getElements=jl.testElement=void 0;var l0=q0,Z2=Ro,wx={tag_name:function(i){return typeof i=="function"?function(e){return(0,l0.isTag)(e)&&i(e.name)}:i==="*"?l0.isTag:function(e){return(0,l0.isTag)(e)&&e.name===i}},tag_type:function(i){return typeof i=="function"?function(e){return i(e.type)}:function(e){return e.type===i}},tag_contains:function(i){return typeof i=="function"?function(e){return(0,l0.isText)(e)&&i(e.data)}:function(e){return(0,l0.isText)(e)&&e.data===i}}};function JN(i,e){return typeof e=="function"?function(t){return(0,l0.isTag)(t)&&e(t.attribs[i])}:function(t){return(0,l0.isTag)(t)&&t.attribs[i]===e}}function YOe(i,e){return function(t){return i(t)||e(t)}}function ZN(i){var e=Object.keys(i).map(function(t){var n=i[t];return Object.prototype.hasOwnProperty.call(wx,t)?wx[t](n):JN(t,n)});return e.length===0?null:e.reduce(YOe)}function XOe(i,e){var t=ZN(i);return t?t(e):!0}jl.testElement=XOe;function KOe(i,e,t,n){n===void 0&&(n=1/0);var r=ZN(i);return r?(0,Z2.filter)(r,e,t,n):[]}jl.getElements=KOe;function JOe(i,e,t){return t===void 0&&(t=!0),Array.isArray(e)||(e=[e]),(0,Z2.findOne)(JN("id",i),e,t)}jl.getElementById=JOe;function ZOe(i,e,t,n){return t===void 0&&(t=!0),n===void 0&&(n=1/0),(0,Z2.filter)(wx.tag_name(i),e,t,n)}jl.getElementsByTagName=ZOe;function eNe(i,e,t,n){return t===void 0&&(t=!0),n===void 0&&(n=1/0),(0,Z2.filter)(wx.tag_type(i),e,t,n)}jl.getElementsByTagType=eNe;var Nd={};Object.defineProperty(Nd,"__esModule",{value:!0});Nd.uniqueSort=Nd.compareDocumentPosition=Nd.removeSubsets=void 0;var rB=q0;function tNe(i){for(var e=i.length;--e>=0;){var t=i[e];if(e>0&&i.lastIndexOf(t,e-1)>=0){i.splice(e,1);continue}for(var n=t.parent;n;n=n.parent)if(i.includes(n)){i.splice(e,1);break}}return i}Nd.removeSubsets=tNe;function eF(i,e){var t=[],n=[];if(i===e)return 0;for(var r=(0,rB.hasChildren)(i)?i:i.parent;r;)t.unshift(r),r=r.parent;for(r=(0,rB.hasChildren)(e)?e:e.parent;r;)n.unshift(r),r=r.parent;for(var s=Math.min(t.length,n.length),a=0;a<s&&t[a]===n[a];)a++;if(a===0)return 1;var o=t[a-1],l=o.children,c=t[a],u=n[a];return l.indexOf(c)>l.indexOf(u)?o===e?20:4:o===i?10:2}Nd.compareDocumentPosition=eF;function nNe(i){return i=i.filter(function(e,t,n){return!n.includes(e,t+1)}),i.sort(function(e,t){var n=eF(e,t);return n&2?-1:n&4?1:0}),i}Nd.uniqueSort=nNe;var eC={};Object.defineProperty(eC,"__esModule",{value:!0});eC.getFeed=void 0;var iNe=Ql,_A=jl;function rNe(i){var e=xx(cNe,i);return e?e.name==="feed"?sNe(e):aNe(e):null}eC.getFeed=rNe;function sNe(i){var e,t=i.children,n={type:"atom",items:(0,_A.getElementsByTagName)("entry",t).map(function(a){var o,l=a.children,c={media:tF(l)};sl(c,"id","id",l),sl(c,"title","title",l);var u=(o=xx("link",l))===null||o===void 0?void 0:o.attribs.href;u&&(c.link=u);var h=v0("summary",l)||v0("content",l);h&&(c.description=h);var f=v0("updated",l);return f&&(c.pubDate=new Date(f)),c})};sl(n,"id","id",t),sl(n,"title","title",t);var r=(e=xx("link",t))===null||e===void 0?void 0:e.attribs.href;r&&(n.link=r),sl(n,"description","subtitle",t);var s=v0("updated",t);return s&&(n.updated=new Date(s)),sl(n,"author","email",t,!0),n}function aNe(i){var e,t,n=(t=(e=xx("channel",i.children))===null||e===void 0?void 0:e.children)!==null&&t!==void 0?t:[],r={type:i.name.substr(0,3),id:"",items:(0,_A.getElementsByTagName)("item",i.children).map(function(a){var o=a.children,l={media:tF(o)};sl(l,"id","guid",o),sl(l,"title","title",o),sl(l,"link","link",o),sl(l,"description","description",o);var c=v0("pubDate",o);return c&&(l.pubDate=new Date(c)),l})};sl(r,"title","title",n),sl(r,"link","link",n),sl(r,"description","description",n);var s=v0("lastBuildDate",n);return s&&(r.updated=new Date(s)),sl(r,"author","managingEditor",n,!0),r}var oNe=["url","type","lang"],lNe=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function tF(i){return(0,_A.getElementsByTagName)("media:content",i).map(function(e){for(var t=e.attribs,n={medium:t.medium,isDefault:!!t.isDefault},r=0,s=oNe;r<s.length;r++){var a=s[r];t[a]&&(n[a]=t[a])}for(var o=0,l=lNe;o<l.length;o++){var a=l[o];t[a]&&(n[a]=parseInt(t[a],10))}return t.expression&&(n.expression=t.expression),n})}function xx(i,e){return(0,_A.getElementsByTagName)(i,e,!0,1)[0]}function v0(i,e,t){return t===void 0&&(t=!1),(0,iNe.textContent)((0,_A.getElementsByTagName)(i,e,t,1)).trim()}function sl(i,e,t,n,r){r===void 0&&(r=!1);var s=v0(t,n,r);s&&(i[e]=s)}function cNe(i){return i==="rss"||i==="feed"||i==="rdf:RDF"}(function(i){var e=bt&&bt.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=bt&&bt.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,r,a)};Object.defineProperty(i,"__esModule",{value:!0}),i.hasChildren=i.isDocument=i.isComment=i.isText=i.isCDATA=i.isTag=void 0,t(Ql,i),t(za,i),t(ol,i),t(Ro,i),t(jl,i),t(Nd,i),t(eC,i);var n=q0;Object.defineProperty(i,"isTag",{enumerable:!0,get:function(){return n.isTag}}),Object.defineProperty(i,"isCDATA",{enumerable:!0,get:function(){return n.isCDATA}}),Object.defineProperty(i,"isText",{enumerable:!0,get:function(){return n.isText}}),Object.defineProperty(i,"isComment",{enumerable:!0,get:function(){return n.isComment}}),Object.defineProperty(i,"isDocument",{enumerable:!0,get:function(){return n.isDocument}}),Object.defineProperty(i,"hasChildren",{enumerable:!0,get:function(){return n.hasChildren}})})(AN);var W0={trueFunc:function(){return!0},falseFunc:function(){return!1}},Fd={},Ui;(function(i){i.Attribute="attribute",i.Pseudo="pseudo",i.PseudoElement="pseudo-element",i.Tag="tag",i.Universal="universal",i.Adjacent="adjacent",i.Child="child",i.Descendant="descendant",i.Parent="parent",i.Sibling="sibling",i.ColumnCombinator="column-combinator"})(Ui||(Ui={}));const uNe={Unknown:null,QuirksMode:"quirks",IgnoreCase:!0,CaseSensitive:!1};var ts;(function(i){i.Any="any",i.Element="element",i.End="end",i.Equals="equals",i.Exists="exists",i.Hyphen="hyphen",i.Not="not",i.Start="start"})(ts||(ts={}));const sB=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,hNe=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,fNe=new Map([[126,ts.Element],[94,ts.Start],[36,ts.End],[42,ts.Any],[33,ts.Not],[124,ts.Hyphen]]),dNe=new Set(["has","not","matches","is","where","host","host-context"]);function nF(i){switch(i.type){case Ui.Adjacent:case Ui.Child:case Ui.Descendant:case Ui.Parent:case Ui.Sibling:case Ui.ColumnCombinator:return!0;default:return!1}}const pNe=new Set(["contains","icontains"]);function mNe(i,e,t){const n=parseInt(e,16)-65536;return n!==n||t?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)}function g_(i){return i.replace(hNe,mNe)}function dS(i){return i===39||i===34}function aB(i){return i===32||i===9||i===10||i===12||i===13}function gNe(i){const e=[],t=iF(e,`${i}`,0);if(t<i.length)throw new Error(`Unmatched selector: ${i.slice(t)}`);return e}function iF(i,e,t){let n=[];function r(f){const d=e.slice(t+f).match(sB);if(!d)throw new Error(`Expected name, found ${e.slice(t)}`);const[g]=d;return t+=f+g.length,g_(g)}function s(f){for(t+=f;t<e.length&&aB(e.charCodeAt(t));)t++}function a(){t+=1;const f=t;let d=1;for(;d>0&&t<e.length;t++)e.charCodeAt(t)===40&&!o(t)?d++:e.charCodeAt(t)===41&&!o(t)&&d--;if(d)throw new Error("Parenthesis not matched");return g_(e.slice(f,t-1))}function o(f){let d=0;for(;e.charCodeAt(--f)===92;)d++;return(d&1)===1}function l(){if(n.length>0&&nF(n[n.length-1]))throw new Error("Did not expect successive traversals.")}function c(f){if(n.length>0&&n[n.length-1].type===Ui.Descendant){n[n.length-1].type=f;return}l(),n.push({type:f})}function u(f,d){n.push({type:Ui.Attribute,name:f,action:d,value:r(1),namespace:null,ignoreCase:"quirks"})}function h(){if(n.length&&n[n.length-1].type===Ui.Descendant&&n.pop(),n.length===0)throw new Error("Empty sub-selector");i.push(n)}if(s(0),e.length===t)return t;e:for(;t<e.length;){const f=e.charCodeAt(t);switch(f){case 32:case 9:case 10:case 12:case 13:{(n.length===0||n[0].type!==Ui.Descendant)&&(l(),n.push({type:Ui.Descendant})),s(1);break}case 62:{c(Ui.Child),s(1);break}case 60:{c(Ui.Parent),s(1);break}case 126:{c(Ui.Sibling),s(1);break}case 43:{c(Ui.Adjacent),s(1);break}case 46:{u("class",ts.Element);break}case 35:{u("id",ts.Equals);break}case 91:{s(1);let d,g=null;e.charCodeAt(t)===124?d=r(1):e.startsWith("*|",t)?(g="*",d=r(2)):(d=r(0),e.charCodeAt(t)===124&&e.charCodeAt(t+1)!==61&&(g=d,d=r(1))),s(0);let v=ts.Exists;const A=fNe.get(e.charCodeAt(t));if(A){if(v=A,e.charCodeAt(t+1)!==61)throw new Error("Expected `=`");s(2)}else e.charCodeAt(t)===61&&(v=ts.Equals,s(1));let _="",y=null;if(v!=="exists"){if(dS(e.charCodeAt(t))){const S=e.charCodeAt(t);let I=t+1;for(;I<e.length&&(e.charCodeAt(I)!==S||o(I));)I+=1;if(e.charCodeAt(I)!==S)throw new Error("Attribute value didn't end");_=g_(e.slice(t+1,I)),t=I+1}else{const S=t;for(;t<e.length&&(!aB(e.charCodeAt(t))&&e.charCodeAt(t)!==93||o(t));)t+=1;_=g_(e.slice(S,t))}s(0);const C=e.charCodeAt(t)|32;C===115?(y=!1,s(1)):C===105&&(y=!0,s(1))}if(e.charCodeAt(t)!==93)throw new Error("Attribute selector didn't terminate");t+=1;const x={type:Ui.Attribute,name:d,action:v,value:_,namespace:g,ignoreCase:y};n.push(x);break}case 58:{if(e.charCodeAt(t+1)===58){n.push({type:Ui.PseudoElement,name:r(2).toLowerCase(),data:e.charCodeAt(t)===40?a():null});continue}const d=r(1).toLowerCase();let g=null;if(e.charCodeAt(t)===40)if(dNe.has(d)){if(dS(e.charCodeAt(t+1)))throw new Error(`Pseudo-selector ${d} cannot be quoted`);if(g=[],t=iF(g,e,t+1),e.charCodeAt(t)!==41)throw new Error(`Missing closing parenthesis in :${d} (${e})`);t+=1}else{if(g=a(),pNe.has(d)){const v=g.charCodeAt(0);v===g.charCodeAt(g.length-1)&&dS(v)&&(g=g.slice(1,-1))}g=g_(g)}n.push({type:Ui.Pseudo,name:d,data:g});break}case 44:{h(),n=[],s(1);break}default:{if(e.startsWith("/*",t)){const v=e.indexOf("*/",t+2);if(v<0)throw new Error("Comment was not terminated");t=v+2,n.length===0&&s(0);break}let d=null,g;if(f===42)t+=1,g="*";else if(f===124){if(g="",e.charCodeAt(t+1)===124){c(Ui.ColumnCombinator),s(2);break}}else if(sB.test(e.slice(t)))g=r(0);else break e;e.charCodeAt(t)===124&&e.charCodeAt(t+1)!==124&&(d=g,e.charCodeAt(t+1)===42?(g="*",t+=2):g=r(1)),n.push(g==="*"?{type:Ui.Universal,namespace:d}:{type:Ui.Tag,name:g,namespace:d})}}}return h(),t}const rF=["\\",'"'],sF=[...rF,"(",")"],vNe=new Set(rF.map(i=>i.charCodeAt(0))),oB=new Set(sF.map(i=>i.charCodeAt(0))),gg=new Set([...sF,"~","^","$","*","+","!","|",":","[","]"," ","."].map(i=>i.charCodeAt(0)));function aF(i){return i.map(e=>e.map(_Ne).join("")).join(", ")}function _Ne(i,e,t){switch(i.type){case Ui.Child:return e===0?"> ":" > ";case Ui.Parent:return e===0?"< ":" < ";case Ui.Sibling:return e===0?"~ ":" ~ ";case Ui.Adjacent:return e===0?"+ ":" + ";case Ui.Descendant:return" ";case Ui.ColumnCombinator:return e===0?"|| ":" || ";case Ui.Universal:return i.namespace==="*"&&e+1<t.length&&"name"in t[e+1]?"":`${oF(i.namespace)}*`;case Ui.Tag:return lB(i);case Ui.PseudoElement:return`::${ff(i.name,gg)}${i.data===null?"":`(${ff(i.data,oB)})`}`;case Ui.Pseudo:return`:${ff(i.name,gg)}${i.data===null?"":`(${typeof i.data=="string"?ff(i.data,oB):aF(i.data)})`}`;case Ui.Attribute:{if(i.name==="id"&&i.action===ts.Equals&&i.ignoreCase==="quirks"&&!i.namespace)return`#${ff(i.value,gg)}`;if(i.name==="class"&&i.action===ts.Element&&i.ignoreCase==="quirks"&&!i.namespace)return`.${ff(i.value,gg)}`;const n=lB(i);return i.action===ts.Exists?`[${n}]`:`[${n}${ANe(i.action)}="${ff(i.value,vNe)}"${i.ignoreCase===null?"":i.ignoreCase?" i":" s"}]`}}}function ANe(i){switch(i){case ts.Equals:return"";case ts.Element:return"~";case ts.Start:return"^";case ts.End:return"$";case ts.Any:return"*";case ts.Not:return"!";case ts.Hyphen:return"|";case ts.Exists:throw new Error("Shouldn't be here")}}function lB(i){return`${oF(i.namespace)}${ff(i.name,gg)}`}function oF(i){return i!==null?`${i==="*"?"*":ff(i,gg)}|`:""}function ff(i,e){let t=0,n="";for(let r=0;r<i.length;r++)e.has(i.charCodeAt(r))&&(n+=`${i.slice(t,r)}\\${i.charAt(r)}`,t=r+1);return n.length>0?n+i.slice(t):i}const bNe=Object.freeze(Object.defineProperty({__proto__:null,get AttributeAction(){return ts},IgnoreCaseMode:uNe,get SelectorType(){return Ui},isTraversal:nF,parse:gNe,stringify:aF},Symbol.toStringTag,{value:"Module"})),tC=MY(bNe);var cI={},nC={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.isTraversal=i.procedure=void 0,i.procedure={universal:50,tag:30,attribute:1,pseudo:0,"pseudo-element":0,"column-combinator":-1,descendant:-1,child:-1,parent:-1,sibling:-1,adjacent:-1,_flexibleDescendant:-1};function e(t){return i.procedure[t.type]<0}i.isTraversal=e})(nC);Object.defineProperty(cI,"__esModule",{value:!0});var cB=tC,yNe=nC,uB={exists:10,equals:8,not:7,start:6,end:6,any:5,hyphen:4,element:4};function wNe(i){for(var e=i.map(lF),t=1;t<i.length;t++){var n=e[t];if(!(n<0))for(var r=t-1;r>=0&&n<e[r];r--){var s=i[r+1];i[r+1]=i[r],i[r]=s,e[r+1]=e[r],e[r]=n}}}cI.default=wNe;function lF(i){var e=yNe.procedure[i.type];if(i.type===cB.SelectorType.Attribute)e=uB[i.action],e===uB.equals&&i.name==="id"&&(e=9),i.ignoreCase&&(e>>=1);else if(i.type===cB.SelectorType.Pseudo)if(!i.data)e=3;else if(i.name==="has"||i.name==="contains")e=0;else if(Array.isArray(i.data)){e=0;for(var t=0;t<i.data.length;t++)if(i.data[t].length===1){var n=lF(i.data[t][0]);if(n===0){e=0;break}n>e&&(e=n)}i.data.length>1&&e>0&&(e-=1)}else e=1;return e}var iC={},rC={};Object.defineProperty(rC,"__esModule",{value:!0});rC.attributeRules=void 0;var Jy=W0,xNe=/[-[\]{}()*+?.,\\^$|#\s]/g;function hB(i){return i.replace(xNe,"\\$&")}var CNe=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function Gp(i,e){return typeof i.ignoreCase=="boolean"?i.ignoreCase:i.ignoreCase==="quirks"?!!e.quirksMode:!e.xmlMode&&CNe.has(i.name)}rC.attributeRules={equals:function(i,e,t){var n=t.adapter,r=e.name,s=e.value;return Gp(e,t)?(s=s.toLowerCase(),function(a){var o=n.getAttributeValue(a,r);return o!=null&&o.length===s.length&&o.toLowerCase()===s&&i(a)}):function(a){return n.getAttributeValue(a,r)===s&&i(a)}},hyphen:function(i,e,t){var n=t.adapter,r=e.name,s=e.value,a=s.length;return Gp(e,t)?(s=s.toLowerCase(),function(l){var c=n.getAttributeValue(l,r);return c!=null&&(c.length===a||c.charAt(a)==="-")&&c.substr(0,a).toLowerCase()===s&&i(l)}):function(l){var c=n.getAttributeValue(l,r);return c!=null&&(c.length===a||c.charAt(a)==="-")&&c.substr(0,a)===s&&i(l)}},element:function(i,e,t){var n=t.adapter,r=e.name,s=e.value;if(/\s/.test(s))return Jy.falseFunc;var a=new RegExp("(?:^|\\s)".concat(hB(s),"(?:$|\\s)"),Gp(e,t)?"i":"");return function(l){var c=n.getAttributeValue(l,r);return c!=null&&c.length>=s.length&&a.test(c)&&i(l)}},exists:function(i,e,t){var n=e.name,r=t.adapter;return function(s){return r.hasAttrib(s,n)&&i(s)}},start:function(i,e,t){var n=t.adapter,r=e.name,s=e.value,a=s.length;return a===0?Jy.falseFunc:Gp(e,t)?(s=s.toLowerCase(),function(o){var l=n.getAttributeValue(o,r);return l!=null&&l.length>=a&&l.substr(0,a).toLowerCase()===s&&i(o)}):function(o){var l;return!!(!((l=n.getAttributeValue(o,r))===null||l===void 0)&&l.startsWith(s))&&i(o)}},end:function(i,e,t){var n=t.adapter,r=e.name,s=e.value,a=-s.length;return a===0?Jy.falseFunc:Gp(e,t)?(s=s.toLowerCase(),function(o){var l;return((l=n.getAttributeValue(o,r))===null||l===void 0?void 0:l.substr(a).toLowerCase())===s&&i(o)}):function(o){var l;return!!(!((l=n.getAttributeValue(o,r))===null||l===void 0)&&l.endsWith(s))&&i(o)}},any:function(i,e,t){var n=t.adapter,r=e.name,s=e.value;if(s==="")return Jy.falseFunc;if(Gp(e,t)){var a=new RegExp(hB(s),"i");return function(l){var c=n.getAttributeValue(l,r);return c!=null&&c.length>=s.length&&a.test(c)&&i(l)}}return function(o){var l;return!!(!((l=n.getAttributeValue(o,r))===null||l===void 0)&&l.includes(s))&&i(o)}},not:function(i,e,t){var n=t.adapter,r=e.name,s=e.value;return s===""?function(a){return!!n.getAttributeValue(a,r)&&i(a)}:Gp(e,t)?(s=s.toLowerCase(),function(a){var o=n.getAttributeValue(a,r);return(o==null||o.length!==s.length||o.toLowerCase()!==s)&&i(a)}):function(a){return n.getAttributeValue(a,r)!==s&&i(a)}}};var uI={},cF={},uF={},sC={};Object.defineProperty(sC,"__esModule",{value:!0});sC.parse=void 0;var ENe=new Set([9,10,12,13,32]),fB="0".charCodeAt(0),SNe="9".charCodeAt(0);function MNe(i){if(i=i.trim().toLowerCase(),i==="even")return[2,0];if(i==="odd")return[2,1];var e=0,t=0,n=s(),r=a();if(e<i.length&&i.charAt(e)==="n"&&(e++,t=n*(r??1),o(),e<i.length?(n=s(),o(),r=a()):n=r=0),r===null||e<i.length)throw new Error("n-th rule couldn't be parsed ('".concat(i,"')"));return[t,n*r];function s(){return i.charAt(e)==="-"?(e++,-1):(i.charAt(e)==="+"&&e++,1)}function a(){for(var l=e,c=0;e<i.length&&i.charCodeAt(e)>=fB&&i.charCodeAt(e)<=SNe;)c=c*10+(i.charCodeAt(e)-fB),e++;return e===l?null:c}function o(){for(;e<i.length&&ENe.has(i.charCodeAt(e));)e++}}sC.parse=MNe;var zg={},TNe=bt&&bt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(zg,"__esModule",{value:!0});zg.generate=zg.compile=void 0;var dB=TNe(W0);function INe(i){var e=i[0],t=i[1]-1;if(t<0&&e<=0)return dB.default.falseFunc;if(e===-1)return function(s){return s<=t};if(e===0)return function(s){return s===t};if(e===1)return t<0?dB.default.trueFunc:function(s){return s>=t};var n=Math.abs(e),r=(t%n+n)%n;return e>1?function(s){return s>=t&&s%n===r}:function(s){return s<=t&&s%n===r}}zg.compile=INe;function PNe(i){var e=i[0],t=i[1]-1,n=0;if(e<0){var r=-e,s=(t%r+r)%r;return function(){var a=s+r*n++;return a>t?null:a}}return e===0?t<0?function(){return null}:function(){return n++===0?t:null}:(t<0&&(t+=e*Math.ceil(-t/e)),function(){return e*n+++t})}zg.generate=PNe;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.sequence=i.generate=i.compile=i.parse=void 0;var e=sC;Object.defineProperty(i,"parse",{enumerable:!0,get:function(){return e.parse}});var t=zg;Object.defineProperty(i,"compile",{enumerable:!0,get:function(){return t.compile}}),Object.defineProperty(i,"generate",{enumerable:!0,get:function(){return t.generate}});function n(s){return(0,t.compile)((0,e.parse)(s))}i.default=n;function r(s){return(0,t.generate)((0,e.parse)(s))}i.sequence=r})(uF);(function(i){var e=bt&&bt.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(i,"__esModule",{value:!0}),i.filters=void 0;var t=e(uF),n=W0;function r(a,o){return function(l){var c=o.getParent(l);return c!=null&&o.isTag(c)&&a(l)}}i.filters={contains:function(a,o,l){var c=l.adapter;return function(h){return a(h)&&c.getText(h).includes(o)}},icontains:function(a,o,l){var c=l.adapter,u=o.toLowerCase();return function(f){return a(f)&&c.getText(f).toLowerCase().includes(u)}},"nth-child":function(a,o,l){var c=l.adapter,u=l.equals,h=(0,t.default)(o);return h===n.falseFunc?n.falseFunc:h===n.trueFunc?r(a,c):function(d){for(var g=c.getSiblings(d),v=0,A=0;A<g.length&&!u(d,g[A]);A++)c.isTag(g[A])&&v++;return h(v)&&a(d)}},"nth-last-child":function(a,o,l){var c=l.adapter,u=l.equals,h=(0,t.default)(o);return h===n.falseFunc?n.falseFunc:h===n.trueFunc?r(a,c):function(d){for(var g=c.getSiblings(d),v=0,A=g.length-1;A>=0&&!u(d,g[A]);A--)c.isTag(g[A])&&v++;return h(v)&&a(d)}},"nth-of-type":function(a,o,l){var c=l.adapter,u=l.equals,h=(0,t.default)(o);return h===n.falseFunc?n.falseFunc:h===n.trueFunc?r(a,c):function(d){for(var g=c.getSiblings(d),v=0,A=0;A<g.length;A++){var _=g[A];if(u(d,_))break;c.isTag(_)&&c.getName(_)===c.getName(d)&&v++}return h(v)&&a(d)}},"nth-last-of-type":function(a,o,l){var c=l.adapter,u=l.equals,h=(0,t.default)(o);return h===n.falseFunc?n.falseFunc:h===n.trueFunc?r(a,c):function(d){for(var g=c.getSiblings(d),v=0,A=g.length-1;A>=0;A--){var _=g[A];if(u(d,_))break;c.isTag(_)&&c.getName(_)===c.getName(d)&&v++}return h(v)&&a(d)}},root:function(a,o,l){var c=l.adapter;return function(u){var h=c.getParent(u);return(h==null||!c.isTag(h))&&a(u)}},scope:function(a,o,l,c){var u=l.equals;return!c||c.length===0?i.filters.root(a,o,l):c.length===1?function(h){return u(c[0],h)&&a(h)}:function(h){return c.includes(h)&&a(h)}},hover:s("isHovered"),visited:s("isVisited"),active:s("isActive")};function s(a){return function(l,c,u){var h=u.adapter,f=h[a];return typeof f!="function"?n.falseFunc:function(g){return f(g)&&l(g)}}}})(cF);var Ug={};Object.defineProperty(Ug,"__esModule",{value:!0});Ug.verifyPseudoArgs=Ug.pseudos=void 0;Ug.pseudos={empty:function(i,e){var t=e.adapter;return!t.getChildren(i).some(function(n){return t.isTag(n)||t.getText(n)!==""})},"first-child":function(i,e){var t=e.adapter,n=e.equals,r=t.getSiblings(i).find(function(s){return t.isTag(s)});return r!=null&&n(i,r)},"last-child":function(i,e){for(var t=e.adapter,n=e.equals,r=t.getSiblings(i),s=r.length-1;s>=0;s--){if(n(i,r[s]))return!0;if(t.isTag(r[s]))break}return!1},"first-of-type":function(i,e){for(var t=e.adapter,n=e.equals,r=t.getSiblings(i),s=t.getName(i),a=0;a<r.length;a++){var o=r[a];if(n(i,o))return!0;if(t.isTag(o)&&t.getName(o)===s)break}return!1},"last-of-type":function(i,e){for(var t=e.adapter,n=e.equals,r=t.getSiblings(i),s=t.getName(i),a=r.length-1;a>=0;a--){var o=r[a];if(n(i,o))return!0;if(t.isTag(o)&&t.getName(o)===s)break}return!1},"only-of-type":function(i,e){var t=e.adapter,n=e.equals,r=t.getName(i);return t.getSiblings(i).every(function(s){return n(i,s)||!t.isTag(s)||t.getName(s)!==r})},"only-child":function(i,e){var t=e.adapter,n=e.equals;return t.getSiblings(i).every(function(r){return n(i,r)||!t.isTag(r)})}};function kNe(i,e,t){if(t===null){if(i.length>2)throw new Error("pseudo-selector :".concat(e," requires an argument"))}else if(i.length===2)throw new Error("pseudo-selector :".concat(e," doesn't have any arguments"))}Ug.verifyPseudoArgs=kNe;var aC={};Object.defineProperty(aC,"__esModule",{value:!0});aC.aliases=void 0;aC.aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"};var oC={};(function(i){var e=bt&&bt.__spreadArray||function(o,l,c){if(c||arguments.length===2)for(var u=0,h=l.length,f;u<h;u++)(f||!(u in l))&&(f||(f=Array.prototype.slice.call(l,0,u)),f[u]=l[u]);return o.concat(f||Array.prototype.slice.call(l))};Object.defineProperty(i,"__esModule",{value:!0}),i.subselects=i.getNextSiblings=i.ensureIsTag=i.PLACEHOLDER_ELEMENT=void 0;var t=W0,n=nC;i.PLACEHOLDER_ELEMENT={};function r(o,l){return o===t.falseFunc?t.falseFunc:function(c){return l.isTag(c)&&o(c)}}i.ensureIsTag=r;function s(o,l){var c=l.getSiblings(o);if(c.length<=1)return[];var u=c.indexOf(o);return u<0||u===c.length-1?[]:c.slice(u+1).filter(l.isTag)}i.getNextSiblings=s;var a=function(o,l,c,u,h){var f={xmlMode:!!c.xmlMode,adapter:c.adapter,equals:c.equals},d=h(l,f,u);return function(g){return d(g)&&o(g)}};i.subselects={is:a,matches:a,where:a,not:function(o,l,c,u,h){var f={xmlMode:!!c.xmlMode,adapter:c.adapter,equals:c.equals},d=h(l,f,u);return d===t.falseFunc?o:d===t.trueFunc?t.falseFunc:function(v){return!d(v)&&o(v)}},has:function(o,l,c,u,h){var f=c.adapter,d={xmlMode:!!c.xmlMode,adapter:f,equals:c.equals},g=l.some(function(x){return x.some(n.isTraversal)})?[i.PLACEHOLDER_ELEMENT]:void 0,v=h(l,d,g);if(v===t.falseFunc)return t.falseFunc;if(v===t.trueFunc)return function(x){return f.getChildren(x).some(f.isTag)&&o(x)};var A=r(v,f),_=v.shouldTestNextSiblings,y=_===void 0?!1:_;return g?function(x){g[0]=x;var C=f.getChildren(x),S=y?e(e([],C,!0),s(x,f),!0):C;return o(x)&&f.existsOne(A,S)}:function(x){return o(x)&&f.existsOne(A,f.getChildren(x))}}}})(oC);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.compilePseudoSelector=i.aliases=i.pseudos=i.filters=void 0;var e=W0,t=tC,n=cF;Object.defineProperty(i,"filters",{enumerable:!0,get:function(){return n.filters}});var r=Ug;Object.defineProperty(i,"pseudos",{enumerable:!0,get:function(){return r.pseudos}});var s=aC;Object.defineProperty(i,"aliases",{enumerable:!0,get:function(){return s.aliases}});var a=oC;function o(l,c,u,h,f){var d=c.name,g=c.data;if(Array.isArray(g))return a.subselects[d](l,g,u,h,f);if(d in s.aliases){if(g!=null)throw new Error("Pseudo ".concat(d," doesn't have any arguments"));var v=(0,t.parse)(s.aliases[d]);return a.subselects.is(l,v,u,h,f)}if(d in n.filters)return n.filters[d](l,g,u,h);if(d in r.pseudos){var A=r.pseudos[d];return(0,r.verifyPseudoArgs)(A,d,g),A===e.falseFunc?e.falseFunc:l===e.trueFunc?function(_){return A(_,u,g)}:function(_){return A(_,u,g)&&l(_)}}throw new Error("unmatched pseudo-class :".concat(d))}i.compilePseudoSelector=o})(uI);Object.defineProperty(iC,"__esModule",{value:!0});iC.compileGeneralSelector=void 0;var BNe=rC,RNe=uI,su=tC;function DNe(i,e,t,n,r){var s=t.adapter,a=t.equals;switch(e.type){case su.SelectorType.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case su.SelectorType.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case su.SelectorType.Attribute:{if(e.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!t.xmlMode||t.lowerCaseAttributeNames)&&(e.name=e.name.toLowerCase()),BNe.attributeRules[e.action](i,e,t)}case su.SelectorType.Pseudo:return(0,RNe.compilePseudoSelector)(i,e,t,n,r);case su.SelectorType.Tag:{if(e.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");var o=e.name;return(!t.xmlMode||t.lowerCaseTags)&&(o=o.toLowerCase()),function(u){return s.getName(u)===o&&i(u)}}case su.SelectorType.Descendant:{if(t.cacheResults===!1||typeof WeakSet>"u")return function(u){for(var h=u;h=s.getParent(h);)if(s.isTag(h)&&i(h))return!0;return!1};var l=new WeakSet;return function(u){for(var h=u;h=s.getParent(h);)if(!l.has(h)){if(s.isTag(h)&&i(h))return!0;l.add(h)}return!1}}case"_flexibleDescendant":return function(u){var h=u;do if(s.isTag(h)&&i(h))return!0;while(h=s.getParent(h));return!1};case su.SelectorType.Parent:return function(u){return s.getChildren(u).some(function(h){return s.isTag(h)&&i(h)})};case su.SelectorType.Child:return function(u){var h=s.getParent(u);return h!=null&&s.isTag(h)&&i(h)};case su.SelectorType.Sibling:return function(u){for(var h=s.getSiblings(u),f=0;f<h.length;f++){var d=h[f];if(a(u,d))break;if(s.isTag(d)&&i(d))return!0}return!1};case su.SelectorType.Adjacent:return s.prevElementSibling?function(u){var h=s.prevElementSibling(u);return h!=null&&i(h)}:function(u){for(var h=s.getSiblings(u),f,d=0;d<h.length;d++){var g=h[d];if(a(u,g))break;s.isTag(g)&&(f=g)}return!!f&&i(f)};case su.SelectorType.Universal:{if(e.namespace!=null&&e.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return i}}}iC.compileGeneralSelector=DNe;var LNe=bt&&bt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Fd,"__esModule",{value:!0});Fd.compileToken=Fd.compileUnsafe=Fd.compile=void 0;var hI=tC,Id=W0,ONe=LNe(cI),NNe=nC,FNe=iC,hF=oC;function zNe(i,e,t){var n=fF(i,e,t);return(0,hF.ensureIsTag)(n,e.adapter)}Fd.compile=zNe;function fF(i,e,t){var n=typeof i=="string"?(0,hI.parse)(i):i;return fI(n,e,t)}Fd.compileUnsafe=fF;function dF(i){return i.type==="pseudo"&&(i.name==="scope"||Array.isArray(i.data)&&i.data.some(function(e){return e.some(dF)}))}var UNe={type:hI.SelectorType.Descendant},VNe={type:"_flexibleDescendant"},HNe={type:hI.SelectorType.Pseudo,name:"scope",data:null};function $Ne(i,e,t){for(var n=e.adapter,r=!!(t!=null&&t.every(function(l){var c=n.isTag(l)&&n.getParent(l);return l===hF.PLACEHOLDER_ELEMENT||c&&n.isTag(c)})),s=0,a=i;s<a.length;s++){var o=a[s];if(!(o.length>0&&(0,NNe.isTraversal)(o[0])&&o[0].type!=="descendant"))if(r&&!o.some(dF))o.unshift(UNe);else continue;o.unshift(HNe)}}function fI(i,e,t){var n;i=i.filter(function(l){return l.length>0}),i.forEach(ONe.default),t=(n=e.context)!==null&&n!==void 0?n:t;var r=Array.isArray(t),s=t&&(Array.isArray(t)?t:[t]);$Ne(i,e,s);var a=!1,o=i.map(function(l){if(l.length>=2){var c=l[0],u=l[1];c.type!=="pseudo"||c.name!=="scope"||(r&&u.type==="descendant"?l[1]=VNe:(u.type==="adjacent"||u.type==="sibling")&&(a=!0))}return GNe(l,e,s)}).reduce(QNe,Id.falseFunc);return o.shouldTestNextSiblings=a,o}Fd.compileToken=fI;function GNe(i,e,t){var n;return i.reduce(function(r,s){return r===Id.falseFunc?Id.falseFunc:(0,FNe.compileGeneralSelector)(r,s,e,t,fI)},(n=e.rootFunc)!==null&&n!==void 0?n:Id.trueFunc)}function QNe(i,e){return e===Id.falseFunc||i===Id.trueFunc?i:i===Id.falseFunc||e===Id.trueFunc?e:function(n){return i(n)||e(n)}}(function(i){var e=bt&&bt.__createBinding||(Object.create?function(_,y,x,C){C===void 0&&(C=x);var S=Object.getOwnPropertyDescriptor(y,x);(!S||("get"in S?!y.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return y[x]}}),Object.defineProperty(_,C,S)}:function(_,y,x,C){C===void 0&&(C=x),_[C]=y[x]}),t=bt&&bt.__setModuleDefault||(Object.create?function(_,y){Object.defineProperty(_,"default",{enumerable:!0,value:y})}:function(_,y){_.default=y}),n=bt&&bt.__importStar||function(_){if(_&&_.__esModule)return _;var y={};if(_!=null)for(var x in _)x!=="default"&&Object.prototype.hasOwnProperty.call(_,x)&&e(y,_,x);return t(y,_),y};Object.defineProperty(i,"__esModule",{value:!0}),i.aliases=i.pseudos=i.filters=i.is=i.selectOne=i.selectAll=i.prepareContext=i._compileToken=i._compileUnsafe=i.compile=void 0;var r=n(AN),s=W0,a=Fd,o=oC,l=function(_,y){return _===y},c={adapter:r,equals:l};function u(_){var y,x,C,S,I=_??c;return(y=I.adapter)!==null&&y!==void 0||(I.adapter=r),(x=I.equals)!==null&&x!==void 0||(I.equals=(S=(C=I.adapter)===null||C===void 0?void 0:C.equals)!==null&&S!==void 0?S:l),I}function h(_){return function(x,C,S){var I=u(C);return _(x,I,S)}}i.compile=h(a.compile),i._compileUnsafe=h(a.compileUnsafe),i._compileToken=h(a.compileToken);function f(_){return function(x,C,S){var I=u(S);typeof x!="function"&&(x=(0,a.compileUnsafe)(x,I,C));var P=d(C,I.adapter,x.shouldTestNextSiblings);return _(x,P,I)}}function d(_,y,x){return x===void 0&&(x=!1),x&&(_=g(_,y)),Array.isArray(_)?y.removeSubsets(_):y.getChildren(_)}i.prepareContext=d;function g(_,y){for(var x=Array.isArray(_)?_.slice(0):[_],C=x.length,S=0;S<C;S++){var I=(0,o.getNextSiblings)(x[S],y);x.push.apply(x,I)}return x}i.selectAll=f(function(_,y,x){return _===s.falseFunc||!y||y.length===0?[]:x.adapter.findAll(_,y)}),i.selectOne=f(function(_,y,x){return _===s.falseFunc||!y||y.length===0?null:x.adapter.findOne(_,y)});function v(_,y,x){var C=u(x);return(typeof y=="function"?y:(0,a.compile)(y,C))(_)}i.is=v,i.default=i.selectAll;var A=uI;Object.defineProperty(i,"filters",{enumerable:!0,get:function(){return A.filters}}),Object.defineProperty(i,"pseudos",{enumerable:!0,get:function(){return A.pseudos}}),Object.defineProperty(i,"aliases",{enumerable:!0,get:function(){return A.aliases}})})(yx);function qNe(i){return!0}function v_(i){return i.children||[]}function pB(i){return i.parent}function jNe(i){const e=new Set(i);return e.forEach(t=>{let n=t.parent;for(;n;){if(e.has(n)){e.delete(t);return}n=n.parent}}),Array.from(e)}const Vg={isTag:qNe,existsOne(i,e){return e.some(t=>i(t)||Vg.existsOne(i,v_(t)))},getSiblings(i){const e=pB(i);return e?v_(e):[i]},getChildren:v_,getParent:pB,getAttributeValue(i,e){return e==="class"?i.props.classes.join(" "):e==="id"?i.id:""},hasAttrib(i,e){return e==="id"?!!i.id:e==="class"?i.props.classes.length>0:i.traits.hash?Object.prototype.hasOwnProperty.call(i.traits.hash,e):!1},removeSubsets:jNe,getName(i){var e;return(e=i.type)!==null&&e!==void 0?e:""},findOne:function i(e,t){for(const n of t){if(e(n))return n;{const r=i(e,v_(n));if(r)return r}}return null},findAll:function i(e,t){const n=[];for(const r of t)e(r)&&n.push(r),n.push(...i(e,v_(r)));return n},getText:function(e){return""}},WNe=(i,e)=>{const t=[],n=Array.isArray(e)?e:[e],r=new Set(n);for(const s of Array.from(i)){let a=s;for(;a!=null;){if(r.has(a)){t.push(s);break}a=Vg.getParent(a)}}return t},YNe=i=>{let e=i;for(;Vg.getParent(e)!==null;)e=Vg.getParent(e);return e},XNe=(i,e)=>{try{yx.compile(i)}catch{return[]}const t=Array.isArray(e);if(t&&e.length===0)return[];const n=YNe(t?e[0]:e),r=yx.selectAll(i,n,{adapter:Vg});return e?WNe(r,e):r},KNe=i=>{try{return yx.compile(i,{adapter:Vg})}catch{return()=>!1}},JNe=/^<([0-9]+|<*)$/;class pF{constructor(e){this.root=e,this.root.model=this,this.root.root=this.root,this.ids={},this.classes={},this.traits={},this.types={},this.nodes=[],this.watchers=[],this.fire=!1,this.lastNode=null,this.event={type:"update"};const t=B=>r(B.node),n=B=>s(B.node);this.root.on("add",t),this.root.on("remove",n);const r=B=>(y(B),C(B),I(B),B.on("change:node",c),c(null,B,!0),l(B)),s=B=>(x(B),S(B),P(B),v(B.id,B),_(B.classes,B),B.off("change:node",c),l(B)),a=B=>{for(const M of Array.from(this.watchers))M.match=M.matcher(B);return null},o=B=>{for(const M of Array.from(this.watchers)){const D=M.fire||(M.fire=M.match!==M.matcher(B));D&&(this.lastNode=B),this.fire||(this.fire=D)}return null},l=B=>{for(const M of Array.from(this.watchers)){const D=M.fire||(M.fire=M.matcher(B));D&&(this.lastNode=B),this.fire||(this.fire=D)}return null};this.digest=()=>{if(!this.fire)return!1;for(const B of Array.from(this.watchers.slice()))B.fire&&(B.fire=!1,B.handler());return this.fire=!1,!0};const c=(B,M,D)=>{const F=D||B.changed["node.id"],z=D||B.changed["node.classes"];let U=!1;if(F){const $=M.get("node.id");$!==M.id&&(D||a(M),U=!0,M.id!=null&&v(M.id,M),g($,M))}if(z){let $,O=($=M.get("node.classes"))!=null?$:[];const ie=O.join(",");ie!==(M.classes!=null?M.classes.klass:void 0)&&(O=O.slice(),!D&&!U&&a(M),U=!0,M.classes!=null&&_(M.classes,M),A(O,M),M.classes=O,M.classes.klass=ie)}return!D&&U&&o(M),null},u=function(B,M,D){if(M!=null){for(const F of Array.from(M)){const z=B[F]!=null?B[F]:[];z.push(D),B[F]=z}return null}},h=function(B,M,D){if(M!=null){for(const F of Array.from(M)){const z=B[F],U=z.indexOf(D);U>=0&&z.splice(U,1),z.length===0&&delete B[F]}return null}},f=function(B){if(!(B.length>0))return;const M=B.hash={};return Array.from(B).map(D=>M[D]=!0)},d=B=>delete B.hash,g=(B,M)=>{if(this.ids[B])throw new Error(`Duplicate node id \`${B}\``);return B!=null&&(this.ids[B]=[M]),M.id=B??M._id},v=(B,M)=>(B!=null&&delete this.ids[B],M.id=M._id),A=(B,M)=>{if(u(this.classes,B,M),B!=null)return f(B)},_=(B,M)=>{if(h(this.classes,B,M),B!=null)return d(B)},y=B=>this.nodes.push(B),x=B=>this.nodes.splice(this.nodes.indexOf(B),1),C=B=>u(this.types,[B.type],B),S=B=>h(this.types,[B.type],B),I=B=>(u(this.traits,B.traits,B),f(B.traits)),P=B=>(h(this.traits,B.traits,B),d(B.traits));r(this.root),this.root.trigger({type:"added"})}select(e,t){return XNe(e,t||this.getRoot())}watch(e,t){let n;return t.unwatch=()=>this.unwatch(t),t.watcher=n={selector:e,handler:t,matcher:this._matcher(e),match:!1,fire:!1},this.watchers.push(n),this.select(e)}unwatch(e){const{watcher:t}=e;if(t!=null)return this.watchers.splice(this.watchers.indexOf(t),1),delete e.unwatch,delete e.watcher}_matcher(e){if(JNe.test(e))throw new Error("Auto-link matcher unsupported");return KNe(e)}getRoot(){return this.root}getLastTrigger(){return this.lastNode.toString()}}const ZNe=Object.freeze(Object.defineProperty({__proto__:null,Attributes:dN,Group:vN,Guard:_N,Model:pF,Node:I1},Symbol.toStringTag,{value:"Module"}));class mF{constructor(e,t){this.classes=e,this.canvas=t;const n=document.createElement("div");n.classList.add("mathbox-overlays"),this.div=n}inject(){const e=this.canvas.parentNode;if(!e)throw new Error("Canvas not inserted into document.");return e.insertBefore(this.div,this.canvas)}unject(){return this.div.parentNode.removeChild(this.div)}getTypes(){return Object.keys(this.classes)}make(e,t){return new this.classes[e](this.div,t)}}const k1=[];let eFe=0;const Cx={},gF=()=>({id:eFe++,type:null,props:null,children:null,rendered:null,instance:null}),vF=function(i){return i*=2,i=Math.max(0,k1.length-i),rFe(0,i,!1).map(e=>k1.push(gF()))},B1=function(i,e,t){const n=k1.length?k1.pop():gF();return n.type=i??"div",n.props=e??null,n.children=t??null,n},dI=function(i){if(!i.type)return;const{children:e}=i;if(i.type=i.props=i.children=i.instance=null,k1.push(i),e!=null)for(const t of Array.from(e))dI(t)},vg=function(i,e,t,n,r){if(i!=null){if(e==null)return _g(i,n,r);{let s;if(i instanceof Node){if(s=i===e,s)return}else s=typeof i==typeof e&&e!==null&&i!==null&&i.type===e.type;if(s){let a,o,l;i.instance=e.instance;const c=i.type!=null&&i.type.isComponentClass?i.type:Cx[i.type],u=e!=null?e.props:void 0,h=i.props,f=(e!=null?e.children:void 0)!=null?e!=null?e.children:void 0:null,d=i.children;if(h!=null&&(h.children=d),c!=null){let g=t._COMPONENT_DIRTY;if(u!=null!=(h!=null)&&(g=!0),f!==d&&(g=!0),u!=null&&h!=null){if(!g)for(a in u)Object.prototype.hasOwnProperty.call(h,a)||(g=!0);if(!g)for(a in h)l=h[a],(o=u[a])!==l&&(g=!0)}if(g){let v;const A=e.instance;i.props==null&&(i.props={});for(const C in A.defaultProps){const S=A.defaultProps[C];i.props[C]==null&&(i.props[C]=S)}i.props.children=i.children,typeof A.willReceiveProps=="function"&&A.willReceiveProps(i.props);const _=t._COMPONENT_FORCE||((v=typeof A.shouldUpdate=="function"?A.shouldUpdate(i.props):void 0)!=null?v:!0);if(_){const C=A.getNextState();typeof A.willUpdate=="function"&&A.willUpdate(i.props,C)}const y=A.props,x=A.applyNextState();A.props=i.props,A.children=i.children,_&&(i=i.rendered=typeof A.render=="function"?A.render(B1,i.props,i.children):void 0,vg(i,e.rendered,t,n,r),typeof A.didUpdate=="function"&&A.didUpdate(y,x))}return}else{if(u!=null)for(a in u)Object.prototype.hasOwnProperty.call(h,a)||nFe(t,a,u[a]);if(h!=null)for(a in h)l=h[a],(o=u[a])!==l&&a!=="children"&&_F(t,a,l,o);if(d!=null)if(["string","number"].includes(typeof d))d!==f&&(t.textContent=d);else if(d.type!=null)vg(d,f,t.childNodes[0],t,0);else{let g,v;const{childNodes:A}=t;if(f!=null)for(v=0;v<d.length;v++)g=d[v],vg(g,f[v],A[v],t,v);else for(v=0;v<d.length;v++)g=d[v],vg(g,null,A[v],t,v)}else f!=null&&(Xw(null,t),t.innerHTML="")}return}else return Xw(e.instance,t),t.remove(),_g(i,n,r)}}if(e!=null)return Xw(e.instance,t),e.node.remove()},_g=function(i,e,t){let n;t==null&&(t=0);const r=i.type!=null&&i.type.isComponentClass?i.type:Cx[i.type];if(i instanceof Node)n=i;else{if(r!=null){let a;const o=i.type!=null&&i.type.isComponentClass?i.type:Cx[i.type];if(!o)return i=i.rendered=B1("noscript"),n=_g(i,e,t),n;i.instance=a=new o(e),i.props==null&&(i.props={});for(const l in a.defaultProps){const c=a.defaultProps[l];i.props[l]==null&&(i.props[l]=c)}return i.props.children=i.children,a.props=i.props,a.children=i.children,a.setState(typeof a.getInitialState=="function"?a.getInitialState():void 0),typeof a.willMount=="function"&&a.willMount(),i=i.rendered=typeof a.render=="function"?a.render(B1,i.props,i.children):void 0,n=_g(i,e,t),typeof a.didMount=="function"&&a.didMount(i),n._COMPONENT=a,n}else if(["string","number"].includes(typeof i))n=document.createTextNode(i);else{n=document.createElement(i.type);for(const a in i.props){const o=i.props[a];_F(n,a,o)}}const{children:s}=i;if(s!=null)if(["string","number"].includes(typeof s))n.textContent=s;else if(s.type!=null)_g(s,n,0);else for(let a=0;a<s.length;a++){const o=s[a];_g(o,n,a)}}return e.insertBefore(n,e.childNodes[t]),n},Xw=function(i,e){if(i){typeof i.willUnmount=="function"&&i.willUnmount();for(const t in i)delete i[t]}return(()=>{const t=[];for(const n of Array.from(e.childNodes))Xw(n._COMPONENT,n),t.push(delete n._COMPONENT);return t})()},tFe=function(i){if(typeof document>"u")return!0;if(document.documentElement.style[i]!=null)return i;i=i[0].toUpperCase()+i.slice(1);const e=["webkit","moz","ms","o"];for(const t of Array.from(e))if(document.documentElement.style[t+i]!=null)return t+i},R1={};for(const i of["transform"])R1[i]=tFe(i);const _F=function(i,e,t,n){if(e==="style"){for(const r in t){const s=t[r];(n!=null?n[r]:void 0)!==s&&(i.style[R1[r]!=null?R1[r]:r]=s)}return}if(i[e]!=null){try{i[e]=t}catch{console.log("failed setting "+e)}return}if(i instanceof Node){i.setAttribute(e,t);return}},nFe=function(i,e,t){if(e==="style"){for(const n in t)i.style[R1[n]!=null?R1[n]:n]="";return}if(i[e]!=null&&(i[e]=void 0),i instanceof Node){i.removeAttribute(e);return}},iFe=function(i){let e;const t={willMount:"componentWillMount",didMount:"componentDidMount",willReceiveProps:"componentWillReceiveProps",shouldUpdate:"shouldComponentUpdate",willUpdate:"componentWillUpdate",didUpdate:"componentDidUpdate",willUnmount:"componentWillUnmount"};for(const r in t){const s=t[r];i[r]==null&&(i[r]=i[s])}class n{constructor(s,a,o=null,l=null){let c,u;a==null&&(a={}),this.props=a,this.state=o,this.children=l;const h=function(d,g){return typeof d=="function"?d.bind(g):d};for(c in i)u=i[c],this[c]=h(u,this);let f=null;this.setState=function(d){f==null&&(f=d?f??{}:null);for(c in d)u=d[c],f[c]=u;s._COMPONENT_DIRTY=!0},this.forceUpdate=function(){s._COMPONENT_FORCE=s._COMPONENT_DIRTY=!0;let d=s;return(()=>{const g=[];for(;d=d.parentNode;)d._COMPONENT?g.push(d._COMPONENT_FORCE=!0):g.push(void 0);return g})()},this.getNextState=()=>f,this.applyNextState=function(){s._COMPONENT_FORCE=s._COMPONENT_DIRTY=!1;const d=this.state;return[f,this.state]=Array.from([null,f]),d}}}return n.isComponentClass=!0,n.prototype.defaultProps=(e=typeof i.getDefaultProps=="function"?i.getDefaultProps():void 0)!=null?e:{},n};function rFe(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let a=i;r?a<s:a>s;r?a++:a--)n.push(a);return n}const sFe=Object.freeze(Object.defineProperty({__proto__:null,Types:Cx,apply:vg,createClass:iFe,element:B1,hint:vF,recycle:dI},Symbol.toStringTag,{value:"Module"}));class AF{constructor(e,t){this.element=e,typeof this.init=="function"&&this.init(t)}dispose(){}}let bF=class extends AF{static initClass(){this.prototype.el=B1,this.prototype.hint=vF,this.prototype.apply=vg,this.prototype.recycle=dI}init(e){return this.last=null}dispose(){return this.unmount(),super.dispose()}mount(){const e=document.createElement("div");return e.classList.add("mathbox-overlay"),this.element.appendChild(e),this.overlay=e}unmount(e){return this.overlay&&this.overlay.parentNode&&this.element.removeChild(this.overlay),this.overlay=null}render(e){this.overlay||this.mount(),["string","number"].includes(typeof e)&&(e=this.el("div",null,e)),e instanceof Array&&(e=this.el("div",null,e)),e==null&&(e=this.el("div"));const t=e.type==="div";let{last:n}=this;const{overlay:r}=this,s=t?r:r.childNodes[0],a=t?r.parentNode:r;!n&&s&&(n=this.el("div")),this.apply(e,n,s,a,0),this.last=e,n!=null&&this.recycle(n)}};bF.initClass();const yF={dom:bF},aFe=Object.freeze(Object.defineProperty({__proto__:null,Classes:yF,Factory:mF,Overlay:AF},Symbol.toStringTag,{value:"Module"}));class Os{static initClass(){this.Node=I1,this.Group=vN,this.model=this.Node,this.defaults=null,this.traits=null,this.props=null,this.finals=null,this.freeform=!1}constructor(e,t,n){this.node=e,this._context=t,this._renderables=this._context.renderables,this._attributes=this._context.attributes,this._shaders=this._context.shaders,this._overlays=this._context.overlays,this._animator=this._context.animator,this._types=this._attributes.types,this.node.controller=this,this.node.on("added",r=>this._added()),this.node.on("removed",r=>this._removed()),this.node.on("change",r=>{if(this._root)return this.change(r.changed,r.touched)}),this.reconfigure(),this._get=this.node.get.bind(this.node),this._helpers=n(this,this.node.traits),this._handlers={inherit:{},listen:[],watch:[],compute:[]},this._root=this._parent=null,this.init()}is(e){return this.traits.hash[e]}init(){}make(){}made(){}unmake(e){}unmade(){}change(e,t,n){}refresh(){return this.change({},{},!0)}rebuild(){if(this._root)return this._removed(!0),this._added()}reconfigure(e){return e!=null&&this.node.configure(e,this._attributes),this.traits=this.node.traits,this.props=this.node.props}_added(){let e,t;this._parent=this.node.parent!=null?this.node.parent.controller:void 0,this._root=this.node.root!=null?this.node.root.controller:void 0,this.node.clock=(t=this._inherit("clock"))!=null?t:this._root;try{try{return this.make(),this.refresh(),this.made()}catch(n){throw e=n,this.node.print("warn"),console.error(e),e}}catch(n){e=n;try{return this._removed()}catch{}}}_removed(e){return e==null&&(e=!1),this.unmake(e),this._unlisten(),this._unattach(),this._uncompute(),this._root=null,this._parent=null,this.unmade(e)}_listen(e,t,n,r){if(r==null&&(r=this),e instanceof Array)for(const s of Array.from(e))return this.__listen(s,t,n,r);return this.__listen(e,t,n,r)}__listen(e,t,n,r){if(r==null&&(r=this),typeof e=="string"&&(e=this._inherit(e)),e!=null){const s=n.bind(r);s.node=this.node,e.on(t,s),this._handlers.listen.push([e,t,s])}return e}_unlisten(){if(this._handlers.listen.length){for(const[e,t,n]of Array.from(this._handlers.listen))e.off(t,n);return this._handlers.listen=[]}}_inherit(e){const t=this._handlers.inherit[e];return t!==void 0?t:this._handlers.inherit[e]=this._parent!=null?this._parent._find(e??null):void 0}_find(e){return this.is(e)?this:this._parent!=null?this._parent._find(e):void 0}_uninherit(){return this._handlers.inherit={}}_attach(e,t,n,r,s,a,o){r==null&&(r=this),s==null&&(s=this),a==null&&(a=!1),o==null&&(o=!1);const l=function(d){if(d!=null&&Array.from(d.traits).includes(t))return d},c=d=>d!=null?d.controller:void 0,u=function(d){if(d==null)return d;let g=[];for(const v of Array.from(d))v instanceof Array?g=g.concat(v):g.push(v);return g},h=d=>{let g,v;if(typeof d=="object"){if(g=d,g!=null&&g._up)return d=o?g._targets:[g[0]],d;if(g instanceof Array)return d=o?u(g.map(h)):h(g[0]),d;if(g instanceof I1)return[g]}else if(typeof d=="string"&&d[0]==="<"){let A,_=0;(A=d.match(/^<([0-9])+$/))&&(_=+A[1]-1),d.match(/^<+$/)&&(_=+d.length-1),v=[];let y=s.node;for(;y;){const{parent:x}=y;if(!x)break;if(y=x.children[y.index-1],!y&&!v.length&&(y=x),g=null,l(y)&&(g=y),g!=null&&_--<=0&&v.push(g),!o&&v.length)return v}if(o&&v.length)return v}else if(typeof d=="string"){const A=n.bind(r);this._handlers.watch.push(A);const _=this._root.watch(d,A);if(o){if(v=_.filter(l),v.length)return v}else if(l(_[0])&&(g=_[0]),g!=null)return[g]}if(!a)throw console.warn(this.node.toMarkup()),new Error(`${this.node.toString()} - Could not find ${t} \`${d}\``);return o?[]:null},f=u(h(e));return o?f!=null?f.map(c):null:f!=null?c(f[0]):null}_unattach(){if(this._handlers.watch.length){for(const e of Array.from(this._handlers.watch))e!=null&&e.unwatch();return this._handlers.watch=[]}}_compute(e,t){return this._handlers.compute.push(e),this.node.bind(e,t,!0)}_uncompute(){if(this._handlers.compute.length){for(const e of Array.from(this._handlers.compute))this.node.unbind(e,!0);return this._handlers.compute=[]}}}Os.initClass();pu.apply(Os.prototype);class wl extends Os{static initClass(){this.model=Os.Group,this.traits=["node"]}}wl.initClass();class wF extends wl{static initClass(){this.traits=["node","object","entity","visible","active"]}make(){return this._helpers.visible.make(),this._helpers.active.make()}unmake(){return this._helpers.visible.unmake(),this._helpers.active.unmake()}}wF.initClass();class xF extends wl{static initClass(){this.traits=["node","bind"]}make(){return this._helpers.bind.make([{to:"inherit.source",trait:"node"}])}unmake(){return this._helpers.bind.unmake()}_find(e){return this.bind.source&&Array.from(this.props.traits).includes(e)?this.bind.source._inherit(e):super._find()}}xF.initClass();class CF extends wl{static initClass(){this.traits=["node","root","clock","scene","vertex","unit"]}init(){return this.size=null,this.cameraEvent={type:"root.camera"},this.preEvent={type:"root.pre"},this.updateEvent={type:"root.update"},this.renderEvent={type:"root.render"},this.postEvent={type:"root.post"},this.clockEvent={type:"clock.tick"},this.camera=null}make(){return this._helpers.unit.make()}unmake(){return this._helpers.unit.unmake()}change(e,t,n){if(e["root.camera"]||n)return this._unattach(),this._attach(this.props.camera,"camera",this.setCamera,this,this,!0),this.setCamera()}adopt(e){return Array.from(e.renders).map(t=>this._context.scene.add(t))}unadopt(e){return Array.from(e.renders).map(t=>this._context.scene.remove(t))}select(e){return this.node.model.select(e)}watch(e,t){return this.node.model.watch(e,t)}unwatch(e){return this.node.model.unwatch(e)}resize(e){return this.size=e,this.trigger({type:"root.resize",size:e})}getSize(){return this.size}getSpeed(){return this.props.speed}getUnit(){return this._helpers.unit.get()}getUnitUniforms(){return this._helpers.unit.uniforms()}pre(){return this.getCamera().updateProjectionMatrix(),this.trigger(this.clockEvent),this.trigger(this.preEvent)}update(){return this.trigger(this.updateEvent)}render(){return this.trigger(this.renderEvent)}post(){return this.trigger(this.postEvent)}setCamera(){const e=oFe(this.select(this.props.camera)[0],t=>t.controller);if(this.camera!==e)return this.camera=e,this.trigger({type:"root.camera"})}getCamera(){let e;return(e=this.camera!=null?this.camera.getCamera():void 0)!=null?e:this._context.defaultCamera}getTime(){return this._context.time}vertex(e,t){return t===2?e.pipe("view.position"):t===3?e.pipe("root.position"):e}}CF.initClass();function oFe(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class EF extends wl{static initClass(){this.traits=["node","unit"]}make(){return this._helpers.unit.make()}unmake(){return this._helpers.unit.unmake()}getUnit(){return this._helpers.unit.get()}getUnitUniforms(){return this._helpers.unit.uniforms()}}EF.initClass();const Kw=function(i,e){return e===Ef?i.REPEAT:e===la?i.CLAMP_TO_EDGE:e===T0?i.MIRRORED_REPEAT:e===ji?i.NEAREST:e===r5?i.NEAREST_MIPMAP_NEAREST:e===s5?i.NEAREST_MIPMAP_LINEAR:e===Dr?i.LINEAR:e===a5?i.LINEAR_MIPMAP_NEAREST:e===o5?i.LINEAR_MIPMAP_LINEAR:e===ns?i.UNSIGNED_BYTE:e===m2?i.UNSIGNED_SHORT_4_4_4_4:e===g2?i.UNSIGNED_SHORT_5_5_5_1:e===sA?i.BYTE:e===aA?i.SHORT:e===V0?i.UNSIGNED_SHORT:e===sv?i.INT:e===Ic?i.UNSIGNED_INT:e===is?i.FLOAT:e===l5?i.ALPHA:e===Bs?i.RGBA:e===v2?i.LUMINANCE:e===_2?i.LUMINANCE_ALPHA:e===Cd?i.FUNC_ADD:e===qT?i.FUNC_SUBTRACT:e===jT?i.FUNC_REVERSE_SUBTRACT:e===WT?i.ZERO:e===YT?i.ONE:e===XT?i.SRC_COLOR:e===KT?i.ONE_MINUS_SRC_COLOR:e===f2?i.SRC_ALPHA:e===d2?i.ONE_MINUS_SRC_ALPHA:e===JT?i.DST_ALPHA:e===ZT?i.ONE_MINUS_DST_ALPHA:e===e5?i.DST_COLOR:e===t5?i.ONE_MINUS_DST_COLOR:e===n5?i.SRC_ALPHA_SATURATE:0},SF=function(i){switch(i){case ns:return Uint8Array;case sA:return Int8Array;case aA:return Int16Array;case V0:return Uint16Array;case sv:return Int32Array;case Ic:return Uint32Array;case is:return Float32Array}},pI=i=>i.map(e=>["","X","Y","Z"][e]).join(""),fv=function(){const i=new H0,e=new ca,t=new fe,n=new fe,r=new Wn;return function(s,a,o,l,c,u){return u==null&&(u="XYZ"),a!=null?(u instanceof Array&&(u=pI(u)),i.setFromVector3(a,u),e.setFromEuler(i)):e.set(0,0,0,1),o!=null&&e.multiply(o),s!=null?t.copy(s):t.set(0,0,0),l!=null?n.copy(l):n.set(1,1,1),r.compose(t,e,n),c!=null&&r.multiplyMatrices(r,c),r}},lFe=Object.freeze(Object.defineProperty({__proto__:null,paramToArrayStorage:SF,paramToGL:Kw,swizzleToEulerOrder:pI,transformComposer:fv},Symbol.toStringTag,{value:"Module"}));class MF extends Os{static initClass(){this.traits=["node","camera"]}init(){}make(){const e=this._context.defaultCamera;return this.camera=this.props.proxy?e:e.clone(),this.euler=new H0,this.quat=new ca}unmake(){}getCamera(){return this.camera}change(e,t,n){if(e["camera.position"]||e["camera.quaternion"]||e["camera.rotation"]||e["camera.lookAt"]||e["camera.up"]||e["camera.fov"]||n){const{position:r,quaternion:s,rotation:a,lookAt:o,up:l,fov:c}=this.props;return r!=null&&this.camera.position.copy(r),(s!=null||a!=null||o!=null)&&(o!=null?this.camera.lookAt(o):this.camera.quaternion.set(0,0,0,1),a!=null&&(this.euler.setFromVector3(a,pI(this.props.eulerOrder)),this.quat.setFromEuler(this.euler),this.camera.quaternion.multiply(this.quat)),s!=null&&this.camera.quaternion.multiply(s)),c!=null&&this.camera.fov!=null&&(this.camera.fov=c),l!=null&&this.camera.up.copy(l),this.camera.updateMatrix()}}}MF.initClass();const D0=function(i){const e=[];let t=i;for(;typeof t!="string"&&(t!=null?t.length:void 0)!=null;)e.push(t.length),t=t[0];return e},jd=function(i,e){let t;e==null&&(e={});const{items:n,channels:r,width:s,height:a,depth:o}=e,l={};if(!i||!i.length)return{items:n,channels:r,width:s??0,height:a??0,depth:o??0};const c=D0(i),u=c.length;l.channels=r!==1&&c.length>1?c.pop():r,l.items=n!==1&&c.length>1?c.pop():n,l.width=s!==1&&c.length>1?c.pop():s,l.height=a!==1&&c.length>1?c.pop():a,l.depth=o!==1&&c.length>1?c.pop():o;let h=u;r===1&&h++,n===1&&h>1&&h++,s===1&&h>2&&h++,a===1&&h>3&&h++;let f=(t=c.pop())!=null?t:1;return h<=1&&(f/=l.channels!=null?l.channels:1),h<=2&&(f/=l.items!=null?l.items:1),h<=3&&(f/=l.width!=null?l.width:1),h<=4&&(f/=l.height!=null?l.height:1),f=Math.floor(f),l.width==null&&(l.width=f,f=1),l.height==null&&(l.height=f,f=1),l.depth==null&&(l.depth=f,f=1),l},AA=function(i,e){switch(e){case 0:return()=>!0;case 1:return()=>i();case 2:return function(){return i(),i()};case 3:return function(){return i(),i(),i(),i()};case 4:return function(){return i(),i(),i(),i()};case 6:return function(){return i(),i(),i(),i(),i(),i()};case 8:return function(){return i(),i(),i(),i(),i(),i()}}},TF=function(i,e,t){let n;const r=(()=>{switch(t){case 0:return()=>!0;case 1:return a=>a(i());case 2:return a=>a(i(),i());case 3:return a=>a(i(),i(),i());case 4:return a=>a(i(),i(),i(),i());case 6:return a=>a(i(),i(),i(),i(),i(),i());case 8:return a=>a(i(),i(),i(),i(),i(),i(),i(),i())}})();let s=null;for(;e>0;){const a=Math.min(e,8);n=(()=>{switch(a){case 1:return o=>r(o);case 2:return function(o){return r(o),r(o)};case 3:return function(o){return r(o),r(o),r(o)};case 4:return function(o){return r(o),r(o),r(o),r(o)};case 5:return function(o){return r(o),r(o),r(o),r(o),r(o)};case 6:return function(o){return r(o),r(o),r(o),r(o),r(o),r(o)};case 7:return function(o){return r(o),r(o),r(o),r(o),r(o),r(o),r(o)};case 8:return function(o){return r(o),r(o),r(o),r(o),r(o),r(o),r(o),r(o)}}})(),s!=null?s=((o,l)=>function(c){return o(c),l(c)})(n,s):s=n,e-=a}return n=s??(()=>!0),n.reset=i.reset,n.rebind=i.rebind,n},Ex=function(i){let e,t,n,r,s,a=D0(i);const o=a.length;let l=a.pop(),c=a.pop(),u=a.pop();const h=a.pop();let f,d,g,v,A;switch(o){case 0:e=()=>0,e.reset=function(){};break;case 1:f=0,e=()=>i[f++],e.reset=()=>f=0;break;case 2:f=t=0,d=i[t]!=null?i[t]:[],e=function(){const _=d[f++];return f===l&&(f=0,t++,d=i[t]!=null?i[t]:[]),_},e.reset=function(){f=t=0,d=i[t]!=null?i[t]:[]};break;case 3:f=t=n=0,g=i[n]!=null?i[n]:[],d=g[t]!=null?g[t]:[],e=function(){const _=d[f++];return f===l&&(f=0,t++,t===c&&(t=0,n++,g=i[n]!=null?i[n]:[]),d=g[t]!=null?g[t]:[]),_},e.reset=function(){f=t=n=0,g=i[n]!=null?i[n]:[],d=g[t]!=null?g[t]:[]};break;case 4:f=t=n=r=0,v=i[r]!=null?i[r]:[],g=v[n]!=null?v[n]:[],d=g[t]!=null?g[t]:[],e=function(){const _=d[f++];return f===l&&(f=0,t++,t===c&&(t=0,n++,n===u&&(n=0,r++,v=i[r]!=null?i[r]:[]),g=v[n]!=null?v[n]:[]),d=g[t]!=null?g[t]:[]),_},e.reset=function(){f=t=n=r=0,v=i[r]!=null?i[r]:[],g=v[n]!=null?v[n]:[],d=g[t]!=null?g[t]:[]};break;case 5:f=t=n=r=s=0,A=i[s]!=null?i[s]:[],v=A[r]!=null?A[r]:[],g=v[n]!=null?v[n]:[],d=g[t]!=null?g[t]:[],e=function(){const _=d[f++];return f===l&&(f=0,t++,t===c&&(t=0,n++,n===u&&(n=0,r++,r===h&&(r=0,s++,A=i[s]!=null?i[s]:[]),v=A[r]!=null?A[r]:[]),g=v[n]!=null?v[n]:[]),d=g[t]!=null?g[t]:[]),_},e.reset=function(){f=t=n=r=s=0,A=i[s]!=null?i[s]:[],v=A[r]!=null?A[r]:[],g=v[n]!=null?v[n]:[],d=g[t]!=null?g[t]:[]};break}return e.rebind=function(_){if(i=_,a=D0(i),a.length&&(l=a.pop()),a.length&&(c=a.pop()),a.length&&(u=a.pop()),a.length)return _=a.pop()},e},mI=function(i,e,t,n){let r,s,a=r=s=0;const o=function(){return a=e*t*n,r=s=0},l=()=>s,c=()=>a-r<=0,u=(()=>{switch(t){case 1:return function(d){r+=d,s+=d};case 2:return function(d){r+=d*2,s+=d};case 3:return function(d){r+=d*3,s+=d};case 4:return function(d){r+=d*4,s+=d}}})(),h=(()=>{switch(t){case 1:return function(d){d(i[r++]),++s};case 2:return function(d){d(i[r++],i[r++]),++s};case 3:return function(d){d(i[r++],i[r++],i[r++]),++s};case 4:return function(d){d(i[r++],i[r++],i[r++],i[r++]),++s}}})(),f=(()=>{switch(t){case 1:return function(d){i[r++]=d,++s};case 2:return function(d,g){i[r++]=d,i[r++]=g,++s};case 3:return function(d,g,v){i[r++]=d,i[r++]=g,i[r++]=v,++s};case 4:return function(d,g,v,A){i[r++]=d,i[r++]=g,i[r++]=v,i[r++]=A,++s}}})();return h.reset=o,f.reset=o,o(),{emit:f,consume:h,skip:u,count:l,done:c,reset:o}},IF=function(i,e){let t,n,r,s,a;const o=new Float32Array(4096);let l=n=.5,c=r=s=a=0;const u=function(d,g,v,A){return s++,o[c++]=d*l,o[c++]=g*l,o[c++]=v*l,o[c++]=A*l},h=function(d,g,v,A){return a++,o[r++]+=d*n,o[r++]+=g*n,o[r++]+=v*n,o[r++]+=A*n},f=Math.max(i.length,e.length);return f<=3?t=function(d,g,v){c=r=s=a=0,i(u,g,v),e(h,g,v);const A=Math.min(s,a);let _=0;return mB(0,A,!1).map(y=>d(o[_++],o[_++],o[_++],o[_++]))}:f<=5?t=function(d,g,v,A,_){c=r=s=a=0,i(u,g,v,A,_),e(h,g,v,A,_);const y=Math.min(s,a);let x=0;return mB(0,y,!1).map(C=>d(o[x++],o[x++],o[x++],o[x++]))}:f<=7?t=function(d,g,v,A,_,y,x){c=r=s=a=0,i(u,g,v,A,_,y,x),e(h,g,v,A,_,y,x);const C=Math.min(s,a);let S=0;return(()=>{let I,P;const B=[];for(x=0,P=C,I=0<=P;I?x<P:x>P;I?x++:x--)B.push(d(o[S++],o[S++],o[S++],o[S++]));return B})()}:f<=9?t=function(d,g,v,A,_,y,x,C,S){c=r=s=a=0,i(u,g,v,A,_,y,x,C,S),e(h,g,v,A,_,y,x,C,S);const I=Math.min(s,a);return S=0,(()=>{let P,B;const M=[];for(C=0,B=I,P=0<=B;P?C<B:C>B;P?C++:C--)M.push(d(o[S++],o[S++],o[S++],o[S++]));return M})()}:t=function(d,g,v,A,_,y,x,C,S,I,P){c=r=0,i(u,g,v,A,_,y,x,C,S,I,P),e(h,g,v,A,_,y,x,C,S,I,P);const B=Math.min(s,a);return S=0,(()=>{let M,D;const F=[];for(C=0,D=B,M=0<=D;M?C<D:C>D;M?C++:C--)F.push(d(o[S++],o[S++],o[S++],o[S++]));return F})()},t.lerp=function(d){let g;return[l,n]=Array.from(g=[1-d,d]),g},t},PF=function(i,e){const t=D0(i).reduce((l,c)=>l*c),n=D0(e).reduce((l,c)=>l*c),r=Math.min(t,n),s=Ex(i),a=Ex(e),o=new Float32Array(r);return o.lerp=function(l){s.reset(),a.reset();let c=0;return(()=>{const u=[];for(;c<r;){const h=s(),f=a();u.push(o[c++]=h+(f-h)*l)}return u})()},o};function mB(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let a=i;r?a<s:a>s;r?a++:a--)n.push(a);return n}const cFe=Object.freeze(Object.defineProperty({__proto__:null,getDimensions:jd,getLerpEmitter:IF,getLerpThunk:PF,getSizes:D0,getStreamer:mI,getThunk:Ex,makeEmitter:TF,repeatCall:AA},Symbol.toStringTag,{value:"Module"})),gB="xyzw".split(""),gI={0:-1,x:0,y:1,z:2,w:3},vI=function(i){return i===""+i&&(i=i.split("")),i===+i&&(i=[i]),i},Hg=function(i){return i===+i&&(i="vec"+i),i==="vec1"&&(i="float"),i},kF=function(i){if(i=""+i,i.indexOf(".")<0)return i+=".0"},BF=function(i){i==null&&(i=4);const e=kF(i);return`vec4 float2ByteIndex(vec4 xyzw, out float channelIndex) {
  float relative = xyzw.w / ${e};
  float w = floor(relative);
  channelIndex = (relative - w) * ${e};
  return vec4(xyzw.xyz, w);
}`},RF=function(i){const e=function(n,r){let s;if(n===r)s=`return texture2D(dataTextures[${n}], uv);`;else{const a=Math.ceil(n+(r-n)/2);s=`if (z < ${a-.5}) {
  ${e(n,a-1)}
}
else {
  ${e(a,r)}
}`}return s=s.replace(/\n/g,`
  `)},t=e(0,i-1);return`uniform sampler2D dataTextures[${i}];

vec4 sample2DArray(vec2 uv, float z) {
  ${t}
}`},Wl=function(i,e,t){return i=Hg(i),t!=null?`${i} binaryOperator(${i} a) {
  return a ${e} ${t};
}`:`${i} binaryOperator(${i} a, ${i} b) {
  return a ${e} b;
}`},L0=function(i,e,t){if(t==null&&(t=0),i>e)return Wd(i,e);const n=e-i;i=Hg(i),e=Hg(e),t=kF(t);const s=uFe(0,n,!0).map(function(a){return a?t:"v"}).join(",");return`${e} extendVec(${i} v) { return ${e}(${s}); }`},Wd=function(i,e){if(i<e)return L0(i,e);const t="."+"xyzw".substr(0,e);return i=Hg(i),e=Hg(e),`${e} truncateVec(${i} v) { return v${t}; }`},_I=function(i){const e=["0.0","0.0","0.0","0.0"];i=vI(i),i=i.map(function(r){return r===""+r?gI[r]:r});for(let r=0;r<i.length;r++){const s=i[r];e[s]=["a","b","c","d"][r]}const t=e.slice(0,4).join(", ");return`vec4 inject(${["float a","float b","float c","float d"].slice(0,i.length)}) {
  return vec4(${t});
}`},fl=function(i,e=null){const t=["0.0","xyzw.x","xyzw.y","xyzw.z","xyzw.w"];for(e==null&&(e=i.length),i=vI(i),i=i.map(function(r){return Array.from([0,1,2,3,4]).includes(+r)&&(r=+r),r===""+r&&(r=gI[r]+1),t[r]});i.length<e;)i.push("0.0");const n=i.join(", ");return`vec${e} swizzle(vec4 xyzw) {
  return vec${e}(${n});
}`.replace(/vec1/g,"float")},lC=function(i){const e=["0.0","0.0","0.0","0.0"];i=vI(i),i=i.map(function(n){return n===+n?gB[n-1]:n});for(let n=0;n<i.length;n++){const r=i[n],s=gB[n],a=gI[r];e[a]=`xyzw.${s}`}return`vec4 invertSwizzle(vec4 xyzw) {
  return vec4(${e.join(", ")});
}`},gh=function(i){let e=[].slice.call(arguments);return e.length>1?(e=e.map((t,n)=>["inout",t,String.fromCharCode(97+n)].join(" ")),e=e.join(", "),`void identity(${e}) { }`):`${i} identity(${i} x) {
  return x;
}`},PM=(i,e)=>`${i} constant() {
return ${e};
}`;function uFe(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let a=i;r?a<s:a>s;r?a++:a--)n.push(a);return n}const hFe=Object.freeze(Object.defineProperty({__proto__:null,binaryOperator:Wl,constant:PM,extendVec:L0,identity:gh,injectVec4:_I,invertSwizzleVec4:lC,mapByte2FloatOffset:BF,sample2DArray:RF,swizzleVec4:fl,toType:Hg,truncateVec:Wd},Symbol.toStringTag,{value:"Module"}));class cC extends Os{static initClass(){this.traits=["node","source","index"]}made(){return this.trigger({type:"source.rebuild"})}indexShader(e){return e.pipe(gh("vec4"))}sourceShader(e){return e.pipe(gh("vec4"))}getDimensions(){return{items:1,width:1,height:1,depth:1}}getActiveDimensions(){return this.getDimensions()}getIndexDimensions(){return this.getActiveDimensions()}getFutureDimensions(){return this.getActiveDimensions()}}cC.initClass();let DF=class extends cC{static initClass(){this.traits=["node","data","source","index","entity","active"]}init(){return this.dataEmitter=null,this.dataSizes=null}emitter(e,t){let n;const{data:r,bind:s,expr:a}=this.props;if(r!=null){const o=this.dataSizes,l=D0(r);if(!o||o.length!==l.length){const c=Ex(r);this.dataEmitter=this.callback(TF(c,t,e)),this.dataSizes=l}n=this.dataEmitter}else a!=null?n=this.callback(a):n=this.callback(this.passthrough);return n}callback(e){return e??function(){}}update(){}make(){return this._helpers.active.make(),this.first=!0,this._listen("root","root.update",()=>((this.isActive||this.first)&&this.update(),this.first=!1))}unmake(){return this._helpers.active.unmake(),this.dataEmitter=null,this.dataSizes=null}};DF.initClass();let bA=class extends DF{static initClass(){this.traits=["node","buffer","active","data","source","index","texture"]}init(){this.bufferSlack=0,this.bufferFrames=0,this.bufferTime=0,this.bufferDelta=0,this.bufferClock=0,this.bufferStep=0,super.init()}make(){super.make(),this.clockParent=this._inherit("clock"),this.latchParent=this._inherit("latch")}unmake(){return super.unmake()}rawBuffer(){return this.buffer}emitter(){const{channels:e,items:t}=this.props;return super.emitter(e,t)}change(e,t,n){if(e["buffer.fps"]||n){const{fps:r}=this.props;return this.bufferSlack=r?.5/r:0}}syncBuffer(e){let t,n;if(!this.buffer)return;const{live:r,fps:s,hurry:a,limit:o,realtime:l,observe:c}=this.props,u=this.buffer.getFilled();if(u&&!r||this.latchParent&&!this.latchParent.isDirty)return;const h=this.clockParent.getTime();if(s!=null){const f=this.bufferSlack,d=h.step/h.delta;t=l?h.delta:h.step;const g=1/s;n=l&&c?d*g:g,Math.abs(h.time-this.bufferTime)>h.step*o&&(this.bufferTime=h.time,this.bufferClock=h.clock),this.bufferSlack=Math.min(o/s,f+t),this.bufferDelta=t,this.bufferStep=n;let v=Math.min(a,Math.floor(f*s));u||(v=Math.max(1,v));let A=!1;const _=()=>A=!0;return(()=>{const y=[];for(let x=0,C=v,S=0<=C;(S?x<C:x>C)&&(this.bufferTime+=t,this.bufferClock+=n,!A);S?x++:x--)e(_,this.bufferFrames++,x,v),y.push(this.bufferSlack-=g);return y})()}else return this.bufferTime=h.time,this.bufferDelta=h.delta,this.bufferClock=h.clock,this.bufferStep=h.step,e(function(){},this.bufferFrames++,0,1)}alignShader(e,t){const{minFilter:n,magFilter:r,aligned:s}=this.props,a=e.items>1&&e.width>1||e.height>1&&e.depth>1;return s||!a?void 0:(n===this.node.attributes["texture.minFilter"].enum.nearest&&r===this.node.attributes["texture.magFilter"].enum.nearest||console.warn(`${this.node.toString()} - Cannot use linear min/magFilter with 3D/4D sampling`),t.pipe("map.xyzw.align"))}};bA.initClass();class AI extends bA{static initClass(){this.traits=["node","buffer","active","data","source","index","array","texture","raw"]}init(){return this.buffer=this.spec=null,this.space={width:0,history:0},this.used={width:0},this.storage="arrayBuffer",this.passthrough=(e,t)=>e(t,0,0,0),super.init()}sourceShader(e){const t=this.getDimensions();return this.alignShader(t,e),this.buffer.shader(e)}getDimensions(){return{items:this.items,width:this.space.width,height:this.space.history,depth:1}}getActiveDimensions(){return{items:this.items,width:this.used.width,height:this.buffer.getFilled(),depth:1}}getFutureDimensions(){return{items:this.items,width:this.used.width,height:this.space.history,depth:1}}getRawDimensions(){return{items:this.items,width:this.space.width,height:1,depth:1}}make(){super.make();const e=this.minFilter!=null?this.minFilter:this.props.minFilter,t=this.magFilter!=null?this.magFilter:this.props.magFilter,n=this.type!=null?this.type:this.props.type,{width:r}=this.props,{history:s}=this.props,a=this.props.bufferWidth,{channels:o}=this.props,{items:l}=this.props;let c=this.spec={channels:o,items:l,width:r};this.items=c.items,this.channels=c.channels;const{data:u}=this.props;c=jd(u,c);const{space:h}=this;return h.width=Math.max(a,c.width||1),h.history=s,this.buffer=this._renderables.make(this.storage,{width:h.width,history:h.history,channels:o,items:l,minFilter:e,magFilter:t,type:n})}unmake(){if(super.unmake(),this.buffer)return this.buffer.dispose(),this.buffer=this.spec=null}change(e,t,n){if(t.texture||e["history.history"]||e["buffer.channels"]||e["buffer.items"]||e["array.bufferWidth"])return this.rebuild();if(this.buffer){if(e["array.width"]){const{width:r,bufferWidth:s}=this.props;if(this.spec.width=r,r>s)return this.rebuild()}if(e["data.map"]||e["data.data"]||e["data.resolve"]||e["data.expr"]||n)return this.buffer.setCallback(this.emitter())}}callback(e){return e.length<=2?e:(t,n)=>e(t,n,this.bufferClock,this.bufferStep)}update(){if(!this.buffer)return;const{data:e}=this.props;let{width:t}=this.props;const{space:n,used:r}=this,s=r.width,a=this.buffer.getFilled();if(this.syncBuffer(o=>{if(e!=null){const l=jd(e,this.spec);return l.width>n.width?(o(),this.rebuild()):(r.width=l.width,this.buffer.setActive(r.width),typeof this.buffer.callback.rebind=="function"&&this.buffer.callback.rebind(e),this.buffer.update())}else return t=this.spec.width||1,this.buffer.setActive(t),t=this.buffer.update(),r.width=t}),r.width!==s||a!==this.buffer.getFilled())return this.trigger({type:"source.resize"})}}AI.initClass();class LF extends AI{static initClass(){this.traits=["node","buffer","active","data","source","index","texture","array","span","interval","sampler","raw"]}updateSpan(){let e;const t=this.props.axis;let{width:n}=this.props;const{centered:r}=this.props,s=this.props.padding,a=this._helpers.span.get("",t);n+=s*2,this.a=a.x;const o=a.y-a.x;return r?(e=1/Math.max(1,n),this.a+=o*e/2):e=1/Math.max(1,n-1),this.b=o*e,this.a+=s*this.b}callback(e){return this.updateSpan(),this.last===e?this._callback:(this.last=e,e.length<=3?this._callback=(t,n)=>{const r=this.a+this.b*n;return e(t,r,n)}:this._callback=(t,n)=>{const r=this.a+this.b*n;return e(t,r,n,this.bufferClock,this.bufferStep)})}make(){return super.make(),this._helpers.span.make(),this._listen(this,"span.range",this.updateSpan)}unmake(){return super.unmake(),this._helpers.span.unmake()}change(e,t,n){super.change(e,t,n),t.span&&this.updateSpan()}}LF.initClass();function fFe(){this.__data__=[],this.size=0}var dFe=fFe;function pFe(i,e){return i===e||i!==i&&e!==e}var bI=pFe,mFe=bI;function gFe(i,e){for(var t=i.length;t--;)if(mFe(i[t][0],e))return t;return-1}var uC=gFe,vFe=uC,_Fe=Array.prototype,AFe=_Fe.splice;function bFe(i){var e=this.__data__,t=vFe(e,i);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():AFe.call(e,t,1),--this.size,!0}var yFe=bFe,wFe=uC;function xFe(i){var e=this.__data__,t=wFe(e,i);return t<0?void 0:e[t][1]}var CFe=xFe,EFe=uC;function SFe(i){return EFe(this.__data__,i)>-1}var MFe=SFe,TFe=uC;function IFe(i,e){var t=this.__data__,n=TFe(t,i);return n<0?(++this.size,t.push([i,e])):t[n][1]=e,this}var PFe=IFe,kFe=dFe,BFe=yFe,RFe=CFe,DFe=MFe,LFe=PFe;function dv(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}dv.prototype.clear=kFe;dv.prototype.delete=BFe;dv.prototype.get=RFe;dv.prototype.has=DFe;dv.prototype.set=LFe;var hC=dv,OFe=hC;function NFe(){this.__data__=new OFe,this.size=0}var FFe=NFe;function zFe(i){var e=this.__data__,t=e.delete(i);return this.size=e.size,t}var UFe=zFe;function VFe(i){return this.__data__.get(i)}var HFe=VFe;function $Fe(i){return this.__data__.has(i)}var GFe=$Fe,QFe=typeof bt=="object"&&bt&&bt.Object===Object&&bt,OF=QFe,qFe=OF,jFe=typeof self=="object"&&self&&self.Object===Object&&self,WFe=qFe||jFe||Function("return this")(),xh=WFe,YFe=xh,XFe=YFe.Symbol,fC=XFe,vB=fC,NF=Object.prototype,KFe=NF.hasOwnProperty,JFe=NF.toString,__=vB?vB.toStringTag:void 0;function ZFe(i){var e=KFe.call(i,__),t=i[__];try{i[__]=void 0;var n=!0}catch{}var r=JFe.call(i);return n&&(e?i[__]=t:delete i[__]),r}var eze=ZFe,tze=Object.prototype,nze=tze.toString;function ize(i){return nze.call(i)}var rze=ize,_B=fC,sze=eze,aze=rze,oze="[object Null]",lze="[object Undefined]",AB=_B?_B.toStringTag:void 0;function cze(i){return i==null?i===void 0?lze:oze:AB&&AB in Object(i)?sze(i):aze(i)}var dC=cze;function uze(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var yA=uze,hze=dC,fze=yA,dze="[object AsyncFunction]",pze="[object Function]",mze="[object GeneratorFunction]",gze="[object Proxy]";function vze(i){if(!fze(i))return!1;var e=hze(i);return e==pze||e==mze||e==dze||e==gze}var FF=vze,_ze=xh,Aze=_ze["__core-js_shared__"],bze=Aze,pS=bze,bB=function(){var i=/[^.]+$/.exec(pS&&pS.keys&&pS.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function yze(i){return!!bB&&bB in i}var wze=yze,xze=Function.prototype,Cze=xze.toString;function Eze(i){if(i!=null){try{return Cze.call(i)}catch{}try{return i+""}catch{}}return""}var zF=Eze,Sze=FF,Mze=wze,Tze=yA,Ize=zF,Pze=/[\\^$.*+?()[\]{}|]/g,kze=/^\[object .+?Constructor\]$/,Bze=Function.prototype,Rze=Object.prototype,Dze=Bze.toString,Lze=Rze.hasOwnProperty,Oze=RegExp("^"+Dze.call(Lze).replace(Pze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Nze(i){if(!Tze(i)||Mze(i))return!1;var e=Sze(i)?Oze:kze;return e.test(Ize(i))}var Fze=Nze;function zze(i,e){return i==null?void 0:i[e]}var Uze=zze,Vze=Fze,Hze=Uze;function $ze(i,e){var t=Hze(i,e);return Vze(t)?t:void 0}var Y0=$ze,Gze=Y0,Qze=xh,qze=Gze(Qze,"Map"),yI=qze,jze=Y0,Wze=jze(Object,"create"),pC=Wze,yB=pC;function Yze(){this.__data__=yB?yB(null):{},this.size=0}var Xze=Yze;function Kze(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e}var Jze=Kze,Zze=pC,eUe="__lodash_hash_undefined__",tUe=Object.prototype,nUe=tUe.hasOwnProperty;function iUe(i){var e=this.__data__;if(Zze){var t=e[i];return t===eUe?void 0:t}return nUe.call(e,i)?e[i]:void 0}var rUe=iUe,sUe=pC,aUe=Object.prototype,oUe=aUe.hasOwnProperty;function lUe(i){var e=this.__data__;return sUe?e[i]!==void 0:oUe.call(e,i)}var cUe=lUe,uUe=pC,hUe="__lodash_hash_undefined__";function fUe(i,e){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=uUe&&e===void 0?hUe:e,this}var dUe=fUe,pUe=Xze,mUe=Jze,gUe=rUe,vUe=cUe,_Ue=dUe;function pv(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}pv.prototype.clear=pUe;pv.prototype.delete=mUe;pv.prototype.get=gUe;pv.prototype.has=vUe;pv.prototype.set=_Ue;var AUe=pv,wB=AUe,bUe=hC,yUe=yI;function wUe(){this.size=0,this.__data__={hash:new wB,map:new(yUe||bUe),string:new wB}}var xUe=wUe;function CUe(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}var EUe=CUe,SUe=EUe;function MUe(i,e){var t=i.__data__;return SUe(e)?t[typeof e=="string"?"string":"hash"]:t.map}var mC=MUe,TUe=mC;function IUe(i){var e=TUe(this,i).delete(i);return this.size-=e?1:0,e}var PUe=IUe,kUe=mC;function BUe(i){return kUe(this,i).get(i)}var RUe=BUe,DUe=mC;function LUe(i){return DUe(this,i).has(i)}var OUe=LUe,NUe=mC;function FUe(i,e){var t=NUe(this,i),n=t.size;return t.set(i,e),this.size+=t.size==n?0:1,this}var zUe=FUe,UUe=xUe,VUe=PUe,HUe=RUe,$Ue=OUe,GUe=zUe;function mv(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}mv.prototype.clear=UUe;mv.prototype.delete=VUe;mv.prototype.get=HUe;mv.prototype.has=$Ue;mv.prototype.set=GUe;var UF=mv,QUe=hC,qUe=yI,jUe=UF,WUe=200;function YUe(i,e){var t=this.__data__;if(t instanceof QUe){var n=t.__data__;if(!qUe||n.length<WUe-1)return n.push([i,e]),this.size=++t.size,this;t=this.__data__=new jUe(n)}return t.set(i,e),this.size=t.size,this}var XUe=YUe,KUe=hC,JUe=FFe,ZUe=UFe,eVe=HFe,tVe=GFe,nVe=XUe;function gv(i){var e=this.__data__=new KUe(i);this.size=e.size}gv.prototype.clear=JUe;gv.prototype.delete=ZUe;gv.prototype.get=eVe;gv.prototype.has=tVe;gv.prototype.set=nVe;var VF=gv;function iVe(i,e){for(var t=-1,n=i==null?0:i.length;++t<n&&e(i[t],t,i)!==!1;);return i}var rVe=iVe,sVe=Y0,aVe=function(){try{var i=sVe(Object,"defineProperty");return i({},"",{}),i}catch{}}(),oVe=aVe,xB=oVe;function lVe(i,e,t){e=="__proto__"&&xB?xB(i,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):i[e]=t}var HF=lVe,cVe=HF,uVe=bI,hVe=Object.prototype,fVe=hVe.hasOwnProperty;function dVe(i,e,t){var n=i[e];(!(fVe.call(i,e)&&uVe(n,t))||t===void 0&&!(e in i))&&cVe(i,e,t)}var $F=dVe,pVe=$F,mVe=HF;function gVe(i,e,t,n){var r=!t;t||(t={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=n?n(t[o],i[o],o,t,i):void 0;l===void 0&&(l=i[o]),r?mVe(t,o,l):pVe(t,o,l)}return t}var gC=gVe;function vVe(i,e){for(var t=-1,n=Array(i);++t<i;)n[t]=e(t);return n}var _Ve=vVe;function AVe(i){return i!=null&&typeof i=="object"}var vv=AVe,bVe=dC,yVe=vv,wVe="[object Arguments]";function xVe(i){return yVe(i)&&bVe(i)==wVe}var CVe=xVe,CB=CVe,EVe=vv,GF=Object.prototype,SVe=GF.hasOwnProperty,MVe=GF.propertyIsEnumerable,TVe=CB(function(){return arguments}())?CB:function(i){return EVe(i)&&SVe.call(i,"callee")&&!MVe.call(i,"callee")},IVe=TVe,PVe=Array.isArray,vC=PVe,Sx={exports:{}};function kVe(){return!1}var BVe=kVe;Sx.exports;(function(i,e){var t=xh,n=BVe,r=e&&!e.nodeType&&e,s=r&&!0&&i&&!i.nodeType&&i,a=s&&s.exports===r,o=a?t.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||n;i.exports=c})(Sx,Sx.exports);var wI=Sx.exports,RVe=9007199254740991,DVe=/^(?:0|[1-9]\d*)$/;function LVe(i,e){var t=typeof i;return e=e??RVe,!!e&&(t=="number"||t!="symbol"&&DVe.test(i))&&i>-1&&i%1==0&&i<e}var OVe=LVe,NVe=9007199254740991;function FVe(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=NVe}var QF=FVe,zVe=dC,UVe=QF,VVe=vv,HVe="[object Arguments]",$Ve="[object Array]",GVe="[object Boolean]",QVe="[object Date]",qVe="[object Error]",jVe="[object Function]",WVe="[object Map]",YVe="[object Number]",XVe="[object Object]",KVe="[object RegExp]",JVe="[object Set]",ZVe="[object String]",eHe="[object WeakMap]",tHe="[object ArrayBuffer]",nHe="[object DataView]",iHe="[object Float32Array]",rHe="[object Float64Array]",sHe="[object Int8Array]",aHe="[object Int16Array]",oHe="[object Int32Array]",lHe="[object Uint8Array]",cHe="[object Uint8ClampedArray]",uHe="[object Uint16Array]",hHe="[object Uint32Array]",qr={};qr[iHe]=qr[rHe]=qr[sHe]=qr[aHe]=qr[oHe]=qr[lHe]=qr[cHe]=qr[uHe]=qr[hHe]=!0;qr[HVe]=qr[$Ve]=qr[tHe]=qr[GVe]=qr[nHe]=qr[QVe]=qr[qVe]=qr[jVe]=qr[WVe]=qr[YVe]=qr[XVe]=qr[KVe]=qr[JVe]=qr[ZVe]=qr[eHe]=!1;function fHe(i){return VVe(i)&&UVe(i.length)&&!!qr[zVe(i)]}var dHe=fHe;function pHe(i){return function(e){return i(e)}}var xI=pHe,Mx={exports:{}};Mx.exports;(function(i,e){var t=OF,n=e&&!e.nodeType&&e,r=n&&!0&&i&&!i.nodeType&&i,s=r&&r.exports===n,a=s&&t.process,o=function(){try{var l=r&&r.require&&r.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();i.exports=o})(Mx,Mx.exports);var CI=Mx.exports,mHe=dHe,gHe=xI,EB=CI,SB=EB&&EB.isTypedArray,vHe=SB?gHe(SB):mHe,qF=vHe,_He=_Ve,AHe=IVe,bHe=vC,yHe=wI,wHe=OVe,xHe=qF,CHe=Object.prototype,EHe=CHe.hasOwnProperty;function SHe(i,e){var t=bHe(i),n=!t&&AHe(i),r=!t&&!n&&yHe(i),s=!t&&!n&&!r&&xHe(i),a=t||n||r||s,o=a?_He(i.length,String):[],l=o.length;for(var c in i)(e||EHe.call(i,c))&&!(a&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||wHe(c,l)))&&o.push(c);return o}var jF=SHe,MHe=Object.prototype;function THe(i){var e=i&&i.constructor,t=typeof e=="function"&&e.prototype||MHe;return i===t}var EI=THe;function IHe(i,e){return function(t){return i(e(t))}}var WF=IHe,PHe=WF,kHe=PHe(Object.keys,Object),BHe=kHe,RHe=EI,DHe=BHe,LHe=Object.prototype,OHe=LHe.hasOwnProperty;function NHe(i){if(!RHe(i))return DHe(i);var e=[];for(var t in Object(i))OHe.call(i,t)&&t!="constructor"&&e.push(t);return e}var FHe=NHe,zHe=FF,UHe=QF;function VHe(i){return i!=null&&UHe(i.length)&&!zHe(i)}var YF=VHe,HHe=jF,$He=FHe,GHe=YF;function QHe(i){return GHe(i)?HHe(i):$He(i)}var SI=QHe,qHe=gC,jHe=SI;function WHe(i,e){return i&&qHe(e,jHe(e),i)}var YHe=WHe;function XHe(i){var e=[];if(i!=null)for(var t in Object(i))e.push(t);return e}var KHe=XHe,JHe=yA,ZHe=EI,e$e=KHe,t$e=Object.prototype,n$e=t$e.hasOwnProperty;function i$e(i){if(!JHe(i))return e$e(i);var e=ZHe(i),t=[];for(var n in i)n=="constructor"&&(e||!n$e.call(i,n))||t.push(n);return t}var r$e=i$e,s$e=jF,a$e=r$e,o$e=YF;function l$e(i){return o$e(i)?s$e(i,!0):a$e(i)}var MI=l$e,c$e=gC,u$e=MI;function h$e(i,e){return i&&c$e(e,u$e(e),i)}var f$e=h$e,Tx={exports:{}};Tx.exports;(function(i,e){var t=xh,n=e&&!e.nodeType&&e,r=n&&!0&&i&&!i.nodeType&&i,s=r&&r.exports===n,a=s?t.Buffer:void 0,o=a?a.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var h=c.length,f=o?o(h):new c.constructor(h);return c.copy(f),f}i.exports=l})(Tx,Tx.exports);var d$e=Tx.exports;function p$e(i,e){var t=-1,n=i.length;for(e||(e=Array(n));++t<n;)e[t]=i[t];return e}var m$e=p$e;function g$e(i,e){for(var t=-1,n=i==null?0:i.length,r=0,s=[];++t<n;){var a=i[t];e(a,t,i)&&(s[r++]=a)}return s}var v$e=g$e;function _$e(){return[]}var XF=_$e,A$e=v$e,b$e=XF,y$e=Object.prototype,w$e=y$e.propertyIsEnumerable,MB=Object.getOwnPropertySymbols,x$e=MB?function(i){return i==null?[]:(i=Object(i),A$e(MB(i),function(e){return w$e.call(i,e)}))}:b$e,TI=x$e,C$e=gC,E$e=TI;function S$e(i,e){return C$e(i,E$e(i),e)}var M$e=S$e;function T$e(i,e){for(var t=-1,n=e.length,r=i.length;++t<n;)i[r+t]=e[t];return i}var KF=T$e,I$e=WF,P$e=I$e(Object.getPrototypeOf,Object),JF=P$e,k$e=KF,B$e=JF,R$e=TI,D$e=XF,L$e=Object.getOwnPropertySymbols,O$e=L$e?function(i){for(var e=[];i;)k$e(e,R$e(i)),i=B$e(i);return e}:D$e,ZF=O$e,N$e=gC,F$e=ZF;function z$e(i,e){return N$e(i,F$e(i),e)}var U$e=z$e,V$e=KF,H$e=vC;function $$e(i,e,t){var n=e(i);return H$e(i)?n:V$e(n,t(i))}var ez=$$e,G$e=ez,Q$e=TI,q$e=SI;function j$e(i){return G$e(i,q$e,Q$e)}var tz=j$e,W$e=ez,Y$e=ZF,X$e=MI;function K$e(i){return W$e(i,X$e,Y$e)}var J$e=K$e,Z$e=Y0,eGe=xh,tGe=Z$e(eGe,"DataView"),nGe=tGe,iGe=Y0,rGe=xh,sGe=iGe(rGe,"Promise"),aGe=sGe,oGe=Y0,lGe=xh,cGe=oGe(lGe,"Set"),uGe=cGe,hGe=Y0,fGe=xh,dGe=hGe(fGe,"WeakMap"),pGe=dGe,kM=nGe,BM=yI,RM=aGe,DM=uGe,LM=pGe,nz=dC,_v=zF,TB="[object Map]",mGe="[object Object]",IB="[object Promise]",PB="[object Set]",kB="[object WeakMap]",BB="[object DataView]",gGe=_v(kM),vGe=_v(BM),_Ge=_v(RM),AGe=_v(DM),bGe=_v(LM),t0=nz;(kM&&t0(new kM(new ArrayBuffer(1)))!=BB||BM&&t0(new BM)!=TB||RM&&t0(RM.resolve())!=IB||DM&&t0(new DM)!=PB||LM&&t0(new LM)!=kB)&&(t0=function(i){var e=nz(i),t=e==mGe?i.constructor:void 0,n=t?_v(t):"";if(n)switch(n){case gGe:return BB;case vGe:return TB;case _Ge:return IB;case AGe:return PB;case bGe:return kB}return e});var _C=t0,yGe=Object.prototype,wGe=yGe.hasOwnProperty;function xGe(i){var e=i.length,t=new i.constructor(e);return e&&typeof i[0]=="string"&&wGe.call(i,"index")&&(t.index=i.index,t.input=i.input),t}var CGe=xGe,EGe=xh,SGe=EGe.Uint8Array,iz=SGe,RB=iz;function MGe(i){var e=new i.constructor(i.byteLength);return new RB(e).set(new RB(i)),e}var II=MGe,TGe=II;function IGe(i,e){var t=e?TGe(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.byteLength)}var PGe=IGe,kGe=/\w*$/;function BGe(i){var e=new i.constructor(i.source,kGe.exec(i));return e.lastIndex=i.lastIndex,e}var RGe=BGe,DB=fC,LB=DB?DB.prototype:void 0,OB=LB?LB.valueOf:void 0;function DGe(i){return OB?Object(OB.call(i)):{}}var LGe=DGe,OGe=II;function NGe(i,e){var t=e?OGe(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.length)}var FGe=NGe,zGe=II,UGe=PGe,VGe=RGe,HGe=LGe,$Ge=FGe,GGe="[object Boolean]",QGe="[object Date]",qGe="[object Map]",jGe="[object Number]",WGe="[object RegExp]",YGe="[object Set]",XGe="[object String]",KGe="[object Symbol]",JGe="[object ArrayBuffer]",ZGe="[object DataView]",eQe="[object Float32Array]",tQe="[object Float64Array]",nQe="[object Int8Array]",iQe="[object Int16Array]",rQe="[object Int32Array]",sQe="[object Uint8Array]",aQe="[object Uint8ClampedArray]",oQe="[object Uint16Array]",lQe="[object Uint32Array]";function cQe(i,e,t){var n=i.constructor;switch(e){case JGe:return zGe(i);case GGe:case QGe:return new n(+i);case ZGe:return UGe(i,t);case eQe:case tQe:case nQe:case iQe:case rQe:case sQe:case aQe:case oQe:case lQe:return $Ge(i,t);case qGe:return new n;case jGe:case XGe:return new n(i);case WGe:return VGe(i);case YGe:return new n;case KGe:return HGe(i)}}var uQe=cQe,hQe=yA,NB=Object.create,fQe=function(){function i(){}return function(e){if(!hQe(e))return{};if(NB)return NB(e);i.prototype=e;var t=new i;return i.prototype=void 0,t}}(),dQe=fQe,pQe=dQe,mQe=JF,gQe=EI;function vQe(i){return typeof i.constructor=="function"&&!gQe(i)?pQe(mQe(i)):{}}var _Qe=vQe,AQe=_C,bQe=vv,yQe="[object Map]";function wQe(i){return bQe(i)&&AQe(i)==yQe}var xQe=wQe,CQe=xQe,EQe=xI,FB=CI,zB=FB&&FB.isMap,SQe=zB?EQe(zB):CQe,MQe=SQe,TQe=_C,IQe=vv,PQe="[object Set]";function kQe(i){return IQe(i)&&TQe(i)==PQe}var BQe=kQe,RQe=BQe,DQe=xI,UB=CI,VB=UB&&UB.isSet,LQe=VB?DQe(VB):RQe,OQe=LQe,NQe=VF,FQe=rVe,zQe=$F,UQe=YHe,VQe=f$e,HQe=d$e,$Qe=m$e,GQe=M$e,QQe=U$e,qQe=tz,jQe=J$e,WQe=_C,YQe=CGe,XQe=uQe,KQe=_Qe,JQe=vC,ZQe=wI,eqe=MQe,tqe=yA,nqe=OQe,iqe=SI,rqe=MI,sqe=1,aqe=2,oqe=4,rz="[object Arguments]",lqe="[object Array]",cqe="[object Boolean]",uqe="[object Date]",hqe="[object Error]",sz="[object Function]",fqe="[object GeneratorFunction]",dqe="[object Map]",pqe="[object Number]",az="[object Object]",mqe="[object RegExp]",gqe="[object Set]",vqe="[object String]",_qe="[object Symbol]",Aqe="[object WeakMap]",bqe="[object ArrayBuffer]",yqe="[object DataView]",wqe="[object Float32Array]",xqe="[object Float64Array]",Cqe="[object Int8Array]",Eqe="[object Int16Array]",Sqe="[object Int32Array]",Mqe="[object Uint8Array]",Tqe="[object Uint8ClampedArray]",Iqe="[object Uint16Array]",Pqe="[object Uint32Array]",Nr={};Nr[rz]=Nr[lqe]=Nr[bqe]=Nr[yqe]=Nr[cqe]=Nr[uqe]=Nr[wqe]=Nr[xqe]=Nr[Cqe]=Nr[Eqe]=Nr[Sqe]=Nr[dqe]=Nr[pqe]=Nr[az]=Nr[mqe]=Nr[gqe]=Nr[vqe]=Nr[_qe]=Nr[Mqe]=Nr[Tqe]=Nr[Iqe]=Nr[Pqe]=!0;Nr[hqe]=Nr[sz]=Nr[Aqe]=!1;function Jw(i,e,t,n,r,s){var a,o=e&sqe,l=e&aqe,c=e&oqe;if(t&&(a=r?t(i,n,r,s):t(i)),a!==void 0)return a;if(!tqe(i))return i;var u=JQe(i);if(u){if(a=YQe(i),!o)return $Qe(i,a)}else{var h=WQe(i),f=h==sz||h==fqe;if(ZQe(i))return HQe(i,o);if(h==az||h==rz||f&&!r){if(a=l||f?{}:KQe(i),!o)return l?QQe(i,VQe(a,i)):GQe(i,UQe(a,i))}else{if(!Nr[h])return r?i:{};a=XQe(i,h,o)}}s||(s=new NQe);var d=s.get(i);if(d)return d;s.set(i,a),nqe(i)?i.forEach(function(A){a.add(Jw(A,e,t,A,i,s))}):eqe(i)&&i.forEach(function(A,_){a.set(_,Jw(A,e,t,_,i,s))});var g=c?l?jQe:qQe:l?rqe:iqe,v=u?void 0:g(i);return FQe(v||i,function(A,_){v&&(_=A,A=i[_]),zQe(a,_,Jw(A,e,t,_,i,s))}),a}var kqe=Jw,Bqe=kqe,Rqe=1,Dqe=4;function Lqe(i){return Bqe(i,Rqe|Dqe)}var Oqe=Lqe;const Nqe=U0(Oqe);var Fqe="__lodash_hash_undefined__";function zqe(i){return this.__data__.set(i,Fqe),this}var Uqe=zqe;function Vqe(i){return this.__data__.has(i)}var Hqe=Vqe,$qe=UF,Gqe=Uqe,Qqe=Hqe;function Ix(i){var e=-1,t=i==null?0:i.length;for(this.__data__=new $qe;++e<t;)this.add(i[e])}Ix.prototype.add=Ix.prototype.push=Gqe;Ix.prototype.has=Qqe;var qqe=Ix;function jqe(i,e){for(var t=-1,n=i==null?0:i.length;++t<n;)if(e(i[t],t,i))return!0;return!1}var Wqe=jqe;function Yqe(i,e){return i.has(e)}var Xqe=Yqe,Kqe=qqe,Jqe=Wqe,Zqe=Xqe,eje=1,tje=2;function nje(i,e,t,n,r,s){var a=t&eje,o=i.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(i),u=s.get(e);if(c&&u)return c==e&&u==i;var h=-1,f=!0,d=t&tje?new Kqe:void 0;for(s.set(i,e),s.set(e,i);++h<o;){var g=i[h],v=e[h];if(n)var A=a?n(v,g,h,e,i,s):n(g,v,h,i,e,s);if(A!==void 0){if(A)continue;f=!1;break}if(d){if(!Jqe(e,function(_,y){if(!Zqe(d,y)&&(g===_||r(g,_,t,n,s)))return d.push(y)})){f=!1;break}}else if(!(g===v||r(g,v,t,n,s))){f=!1;break}}return s.delete(i),s.delete(e),f}var oz=nje;function ije(i){var e=-1,t=Array(i.size);return i.forEach(function(n,r){t[++e]=[r,n]}),t}var rje=ije;function sje(i){var e=-1,t=Array(i.size);return i.forEach(function(n){t[++e]=n}),t}var aje=sje,HB=fC,$B=iz,oje=bI,lje=oz,cje=rje,uje=aje,hje=1,fje=2,dje="[object Boolean]",pje="[object Date]",mje="[object Error]",gje="[object Map]",vje="[object Number]",_je="[object RegExp]",Aje="[object Set]",bje="[object String]",yje="[object Symbol]",wje="[object ArrayBuffer]",xje="[object DataView]",GB=HB?HB.prototype:void 0,mS=GB?GB.valueOf:void 0;function Cje(i,e,t,n,r,s,a){switch(t){case xje:if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)return!1;i=i.buffer,e=e.buffer;case wje:return!(i.byteLength!=e.byteLength||!s(new $B(i),new $B(e)));case dje:case pje:case vje:return oje(+i,+e);case mje:return i.name==e.name&&i.message==e.message;case _je:case bje:return i==e+"";case gje:var o=cje;case Aje:var l=n&hje;if(o||(o=uje),i.size!=e.size&&!l)return!1;var c=a.get(i);if(c)return c==e;n|=fje,a.set(i,e);var u=lje(o(i),o(e),n,r,s,a);return a.delete(i),u;case yje:if(mS)return mS.call(i)==mS.call(e)}return!1}var Eje=Cje,QB=tz,Sje=1,Mje=Object.prototype,Tje=Mje.hasOwnProperty;function Ije(i,e,t,n,r,s){var a=t&Sje,o=QB(i),l=o.length,c=QB(e),u=c.length;if(l!=u&&!a)return!1;for(var h=l;h--;){var f=o[h];if(!(a?f in e:Tje.call(e,f)))return!1}var d=s.get(i),g=s.get(e);if(d&&g)return d==e&&g==i;var v=!0;s.set(i,e),s.set(e,i);for(var A=a;++h<l;){f=o[h];var _=i[f],y=e[f];if(n)var x=a?n(y,_,f,e,i,s):n(_,y,f,i,e,s);if(!(x===void 0?_===y||r(_,y,t,n,s):x)){v=!1;break}A||(A=f=="constructor")}if(v&&!A){var C=i.constructor,S=e.constructor;C!=S&&"constructor"in i&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof S=="function"&&S instanceof S)&&(v=!1)}return s.delete(i),s.delete(e),v}var Pje=Ije,gS=VF,kje=oz,Bje=Eje,Rje=Pje,qB=_C,jB=vC,WB=wI,Dje=qF,Lje=1,YB="[object Arguments]",XB="[object Array]",Zy="[object Object]",Oje=Object.prototype,KB=Oje.hasOwnProperty;function Nje(i,e,t,n,r,s){var a=jB(i),o=jB(e),l=a?XB:qB(i),c=o?XB:qB(e);l=l==YB?Zy:l,c=c==YB?Zy:c;var u=l==Zy,h=c==Zy,f=l==c;if(f&&WB(i)){if(!WB(e))return!1;a=!0,u=!1}if(f&&!u)return s||(s=new gS),a||Dje(i)?kje(i,e,t,n,r,s):Bje(i,e,l,t,n,r,s);if(!(t&Lje)){var d=u&&KB.call(i,"__wrapped__"),g=h&&KB.call(e,"__wrapped__");if(d||g){var v=d?i.value():i,A=g?e.value():e;return s||(s=new gS),r(v,A,t,n,s)}}return f?(s||(s=new gS),Rje(i,e,t,n,r,s)):!1}var Fje=Nje,zje=Fje,JB=vv;function lz(i,e,t,n,r){return i===e?!0:i==null||e==null||!JB(i)&&!JB(e)?i!==i&&e!==e:zje(i,e,t,n,lz,r)}var Uje=lz,Vje=Uje;function Hje(i,e){return Vje(i,e)}var $je=Hje;const Gje=U0($je);class cz extends wl{static initClass(){this.traits=["node","entity","active","latch"]}init(){this.data=void 0,this.isDirty=!0}make(){this._helpers.active.make(),this._listen("root","root.update",function(){this.isActive&&this.update()})}unmake(){this._helpers.active.unmake(),this.data=void 0}swap(){const{deep:e,data:t}=this.props;(e?!Gje(t,this.data):t!=this.data)&&(this.data=e?Nqe(t):t)}update(){this.isDirty=this.swap()}}cz.initClass();class PI extends bA{static initClass(){this.traits=["node","buffer","active","data","source","index","texture","matrix","raw"]}init(){return this.buffer=this.spec=null,this.space={width:0,height:0,history:0},this.used={width:0,height:0},this.storage="matrixBuffer",this.passthrough=(e,t,n)=>e(t,n,0,0),super.init()}sourceShader(e){const t=this.getDimensions();return this.alignShader(t,e),this.buffer.shader(e)}getDimensions(){return{items:this.items,width:this.space.width,height:this.space.height,depth:this.space.history}}getActiveDimensions(){return{items:this.items,width:this.used.width,height:this.used.height,depth:this.buffer.getFilled()}}getFutureDimensions(){return{items:this.items,width:this.used.width,height:this.used.height,depth:this.space.history}}getRawDimensions(){return{items:this.items,width:this.space.width,height:this.space.height,depth:1}}make(){super.make();const e=this.minFilter!=null?this.minFilter:this.props.minFilter,t=this.magFilter!=null?this.magFilter:this.props.magFilter,n=this.type!=null?this.type:this.props.type,{width:r}=this.props,{height:s}=this.props,{history:a}=this.props,o=this.props.bufferWidth,l=this.props.bufferHeight,{channels:c}=this.props,{items:u}=this.props;let h=this.spec={channels:c,items:u,width:r,height:s};this.items=h.items,this.channels=h.channels;const{data:f}=this.props;h=jd(f,h);const{space:d}=this;return d.width=Math.max(o,h.width||1),d.height=Math.max(l,h.height||1),d.history=a,this.buffer=this._renderables.make(this.storage,{width:d.width,height:d.height,history:d.history,channels:c,items:u,minFilter:e,magFilter:t,type:n})}unmake(){if(super.unmake(),this.buffer)return this.buffer.dispose(),this.buffer=this.spec=null}change(e,t,n){if(t.texture||e["matrix.history"]||e["buffer.channels"]||e["buffer.items"]||e["matrix.bufferWidth"]||e["matrix.bufferHeight"])return this.rebuild();if(this.buffer){if(e["matrix.width"]){const{width:r,bufferWidth:s}=this.props;if(this.spec.width=r,r>s)return this.rebuild()}if(e["matrix.height"]){const{height:r,bufferHeight:s}=this.props;if(this.spec.height=r,r>s)return this.rebuild()}if(e["data.map"]||e["data.data"]||e["data.resolve"]||e["data.expr"]||n)return this.buffer.setCallback(this.emitter())}}callback(e){return e.length<=3?e:(t,n,r)=>e(t,n,r,this.bufferClock,this.bufferStep)}update(){if(!this.buffer)return;const{data:e}=this.props,{space:t,used:n}=this,r=n.width,s=n.height,a=this.buffer.getFilled();if(this.syncBuffer(o=>{if(e!=null){const l=jd(e,this.spec);return l.width>t.width||l.height>t.height?(o(),this.rebuild()):(n.width=l.width,n.height=l.height,this.buffer.setActive(n.width,n.height),typeof this.buffer.callback.rebind=="function"&&this.buffer.callback.rebind(e),this.buffer.update())}else{let l;const c=this.spec.width||1,u=this.spec.height||1;this.buffer.setActive(c,u);const h=this.buffer.update();n.width=l=c,n.height=Math.min(u,Math.ceil(h/l)),n.height===1&&(n.width=Math.min(c,h))}}),n.width!==r||n.height!==s||a!==this.buffer.getFilled())return this.trigger({type:"source.resize"})}}PI.initClass();class uz extends PI{static initClass(){this.traits=["node","buffer","active","data","source","index","matrix","texture","raw","span:x","span:y","area","sampler:x","sampler:y"]}updateSpan(){let e,t;const n=this.props.axes;let{width:r}=this.props,{height:s}=this.props;const{centeredX:a}=this.props,{centeredY:o}=this.props,l=this.props.paddingX,c=this.props.paddingY,u=this._helpers.span.get("x.",n[0]),h=this._helpers.span.get("y.",n[1]);this.aX=u.x,this.aY=h.x;const f=u.y-u.x,d=h.y-h.x;return r+=l*2,s+=c*2,a?(e=1/Math.max(1,r),this.aX+=f*e/2):e=1/Math.max(1,r-1),o?(t=1/Math.max(1,s),this.aY+=d*t/2):t=1/Math.max(1,s-1),this.bX=f*e,this.bY=d*t,this.aX+=l*this.bX,this.aY+=c*this.bY}callback(e){return this.updateSpan(),this.last===e?this._callback:(this.last=e,e.length<=5?this._callback=(t,n,r)=>{const s=this.aX+this.bX*n,a=this.aY+this.bY*r;return e(t,s,a,n,r)}:this._callback=(t,n,r)=>{const s=this.aX+this.bX*n,a=this.aY+this.bY*r;return e(t,s,a,n,r,this.bufferClock,this.bufferStep)})}make(){return super.make(),this._helpers.span.make(),this._listen(this,"span.range",this.updateSpan)}unmake(){return super.unmake(),this._helpers.span.unmake()}change(e,t,n){super.change(e,t,n),(t.x||t.y)&&this.updateSpan()}}uz.initClass();class wA extends bA{constructor(...e){super(...e),this.update=this.update.bind(this)}static initClass(){this.traits=["node","buffer","active","data","source","index","texture","voxel","raw"]}init(){this.buffer=this.spec=null,this.space={width:0,height:0,depth:0},this.used={width:0,height:0,depth:0},this.storage="voxelBuffer",this.passthrough=(e,t,n,r)=>e(t,n,r,0),super.init()}sourceShader(e){const t=this.getDimensions();return this.alignShader(t,e),this.buffer.shader(e)}getDimensions(){return{items:this.items,width:this.space.width,height:this.space.height,depth:this.space.depth}}getActiveDimensions(){return{items:this.items,width:this.used.width,height:this.used.height,depth:this.used.depth*this.buffer.getFilled()}}getRawDimensions(){return this.getDimensions()}make(){super.make();const e=this.minFilter!=null?this.minFilter:this.props.minFilter,t=this.magFilter!=null?this.magFilter:this.props.magFilter,n=this.type!=null?this.type:this.props.type,{width:r}=this.props,{height:s}=this.props,{depth:a}=this.props,o=this.props.bufferWidth,l=this.props.bufferHeight,c=this.props.bufferDepth,{channels:u}=this.props,{items:h}=this.props;let f=this.spec={channels:u,items:h,width:r,height:s,depth:a};this.items=f.items,this.channels=f.channels;const{data:d}=this.props;f=jd(d,f);const{space:g}=this;return g.width=Math.max(o,f.width||1),g.height=Math.max(l,f.height||1),g.depth=Math.max(c,f.depth||1),this.buffer=this._renderables.make(this.storage,{width:g.width,height:g.height,depth:g.depth,channels:u,items:h,minFilter:e,magFilter:t,type:n})}unmake(){if(super.unmake(),this.buffer)return this.buffer.dispose(),this.buffer=this.spec=null}change(e,t,n){if(t.texture||e["buffer.channels"]||e["buffer.items"]||e["voxel.bufferWidth"]||e["voxel.bufferHeight"]||e["voxel.bufferDepth"])return this.rebuild();if(this.buffer){if(e["voxel.width"]){const{width:r,bufferWidth:s}=this.props;if(this.spec.width=r,r>s)return this.rebuild()}if(e["voxel.height"]){const{height:r,bufferHeight:s}=this.props;if(this.spec.height=r,r>s)return this.rebuild()}if(e["voxel.depth"]){const{depth:r,bufferDepth:s}=this.props;if(this.spec.depth=r,r>s)return this.rebuild()}if(e["data.map"]||e["data.data"]||e["data.resolve"]||e["data.expr"]||n)return this.buffer.setCallback(this.emitter())}}callback(e){return e.length<=4?e:(t,n,r,s)=>e(t,n,r,s,this.bufferClock,this.bufferStep)}update(){if(!this.buffer)return;const{data:e}=this.props,{space:t,used:n}=this,r=n.width,s=n.height,a=n.depth,o=this.buffer.getFilled();if(this.syncBuffer(l=>{if(e!=null){const c=jd(e,this.spec);return c.width>t.width||c.height>t.height||c.depth>t.depth?(l(),this.rebuild()):(n.width=c.width,n.height=c.height,n.depth=c.depth,this.buffer.setActive(n.width,n.height,n.depth),typeof this.buffer.callback.rebind=="function"&&this.buffer.callback.rebind(e),this.buffer.update())}else{let c,u;const h=this.spec.width||1,f=this.spec.height||1,d=this.spec.depth||1;this.buffer.setActive(h,f,d);const g=this.buffer.update();n.width=u=h,n.height=c=f,n.depth=Math.min(d,Math.ceil(g/u/c)),n.depth===1&&(n.height=Math.min(f,Math.ceil(g/u)),n.height===1&&(n.width=Math.min(h,g)))}}),n.width!==r||n.height!==s||n.depth!==a||o!==this.buffer.getFilled())return this.trigger({type:"source.resize"})}}wA.initClass();class hz extends wA{static initClass(){this.traits=["node","buffer","active","data","source","index","texture","voxel","span:x","span:y","span:z","volume","sampler:x","sampler:y","sampler:z","raw"]}updateSpan(){let e,t,n;const r=this.props.axes;let{width:s}=this.props,{height:a}=this.props,{depth:o}=this.props;const{centeredX:l}=this.props,{centeredY:c}=this.props,{centeredZ:u}=this.props,h=this.props.paddingX,f=this.props.paddingY,d=this.props.paddingZ,g=this._helpers.span.get("x.",r[0]),v=this._helpers.span.get("y.",r[1]),A=this._helpers.span.get("z.",r[2]);this.aX=g.x,this.aY=v.x,this.aZ=A.x;const _=g.y-g.x,y=v.y-v.x,x=A.y-A.x;return s+=h*2,a+=f*2,o+=d*2,l?(e=1/Math.max(1,s),this.aX+=_*e/2):e=1/Math.max(1,s-1),c?(t=1/Math.max(1,a),this.aY+=y*t/2):t=1/Math.max(1,a-1),u?(n=1/Math.max(1,o),this.aZ+=x*n/2):n=1/Math.max(1,o-1),this.bX=_*e,this.bY=y*t,this.bZ=x*n,this.aX+=this.bX*h,this.aY+=this.bY*f,this.aZ+=this.bZ*f}callback(e){return this.updateSpan(),this.last===e?this._callback:(this.last=e,e.length<=7?this._callback=(t,n,r,s)=>{const a=this.aX+this.bX*n,o=this.aY+this.bY*r,l=this.aZ+this.bZ*s;return e(t,a,o,l,n,r,s)}:this._callback=(t,n,r,s)=>{const a=this.aX+this.bX*n,o=this.aY+this.bY*r,l=this.aZ+this.bZ*s;return e(t,a,o,l,n,r,s,this.bufferClock,this.bufferStep)})}make(){return super.make(),this._helpers.span.make(),this._listen(this,"span.range",this.updateSpan)}unmake(){return super.unmake(),this._helpers.span.unmake()}change(e,t,n){super.change(e,t,n),(t.x||t.y||t.z)&&this.updateSpan()}}hz.initClass();const kI=function(i,e,t){+e===e&&(e=[e]);const n=Array.from(e).includes(1)?0:t.x,r=Array.from(e).includes(2)?0:t.y,s=Array.from(e).includes(3)?0:t.z,a=Array.from(e).includes(4)?0:t.w;return i.set(n,r,s,a)},BI=function(){const i=new Hi;return function(e,t,n){return kI(i,t,n),e.add(i)}}(),w0=function(i,e){const t=e===1?1:0,n=e===2?1:0,r=e===3?1:0,s=e===4?1:0;return i.set(t,n,r,s)},Qje=function(i,e){const t=e===1?1:0,n=e===2?1:0,r=e===3?1:0,s=e===4?1:0;return i.set(n,r+t,s,0)},$g=function(){const i=[0,0];return function(e,t,n,r){if(r==null&&(r=0),n>0){const s=e,a=e+t,o=Math.max(Math.abs(s),Math.abs(a)),l=o*r,c=Math.min(s,a),u=Math.max(s,a);e=c+(-o+l-c)*n,t=u+(o+l-u)*n-e}return i[0]=e,i[1]=t,i}}(),qje=Object.freeze(Object.defineProperty({__proto__:null,addOrigin:BI,recenterAxis:$g,setDimension:w0,setDimensionNormal:Qje,setOrigin:kI},Symbol.toStringTag,{value:"Module"}));class fz extends cC{static initClass(){this.traits=["node","source","index","interval","span","scale","raw","origin"]}init(){return this.used=this.space=this.scaleAxis=this.sampler=null}rawBuffer(){return this.buffer}sourceShader(e){return e.pipe(this.sampler)}getDimensions(){return{items:1,width:this.space,height:1,depth:1}}getActiveDimensions(){return{items:1,width:this.used,height:this.buffer.getFilled(),depth:1}}getRawDimensions(){return this.getDimensions()}make(){let e;this.space=e=this._helpers.scale.divide(""),this.buffer=this._renderables.make("dataBuffer",{width:e,channels:1,items:1});const t={scaleAxis:this._attributes.make(this._types.vec4()),scaleOffset:this._attributes.make(this._types.vec4())};this.scaleAxis=t.scaleAxis.value,this.scaleOffset=t.scaleOffset.value;const n=this.sampler=this._shaders.shader();return n.require(this.buffer.shader(this._shaders.shader(),1)),n.pipe("scale.position",t),this._helpers.span.make(),this._listen(this,"span.range",this.updateRanges)}unmake(){return this.scaleAxis=null,this._helpers.span.unmake()}change(e,t,n){if(e["scale.divide"])return this.rebuild();if(t.view||t.interval||t.span||t.scale||t.origin||n)return this.updateRanges()}updateRanges(){const{used:e}=this,{axis:t,origin:n}=this.props,r=this._helpers.span.get("",t),s=r.x,a=r.y,o=this._helpers.scale.generate("",this.buffer,s,a);if(w0(this.scaleAxis,t),kI(this.scaleOffset,t,n),this.used=o.length,this.used!==e)return this.trigger({type:"source.resize"})}}fz.initClass();const Al=function(){const i={};for(const e of Array.from(arguments))for(const t in e){const n=e[t];i[t]=n}return i},jje=i=>JSON.parse(JSON.serialize(i)),dz=function(i){let e="";const t=a=>a=a.replace(/\\/g,""),n=function(a){return e.length&&s.push(t(e)),e=a??""};i=i.split(/(?=(?:\\.|["' ,]))/g);let r=!1;const s=[];for(const a of Array.from(i)){const o=a[0],l=a.slice(1);switch(o){case'"':case"'":if(r)r===o?(r=!1,n(l)):e+=a;else{if(e!=="")throw new Error(`ParseError: String \`${i}\` does not contain comma-separated quoted tokens.`);r=o,e+=l}break;case" ":case",":r?e+=a:n(l);break;default:e+=a}}return n(),s},Wje=Object.freeze(Object.defineProperty({__proto__:null,clone:jje,merge:Al,parseQuoted:dz},Symbol.toStringTag,{value:"Module"}));let pz=class extends Os{static initClass(){this.traits=["node","object","visible","style","line","axis","span","interval","arrow","position","origin","shade"],this.defaults={end:!0,zBias:-1}}constructor(e,t,n){super(e,t,n),this.axisPosition=this.axisStep=this.resolution=this.line=this.arrows=null}make(){const e={axisPosition:this._attributes.make(this._types.vec4()),axisStep:this._attributes.make(this._types.vec4())};this.axisPosition=e.axisPosition.value,this.axisStep=e.axisStep.value;let t=this._shaders.shader();t.pipe("axis.position",e),t=this._helpers.position.pipeline(t);const n=this._helpers.style.uniforms(),r=this._helpers.line.uniforms(),s=this._helpers.arrow.uniforms(),a=this._inherit("unit").getUnitUniforms(),{detail:o}=this.props,l=o+1;this.resolution=1/o;const{start:c,end:u}=this.props,{stroke:h,join:f}=this.props;let d=this._helpers.object.mask();const g=this._helpers.shade.pipeline()||!1,{crossed:v,axis:A}=this.props;if(!v&&d!=null&&A>1){const y=["x000","y000","z000","w000"][A];d=this._helpers.position.swizzle(d,y)}const _=Al(s,r,n,a);return this.line=this._renderables.make("line",{uniforms:_,samples:l,position:t,clip:c||u,stroke:h,join:f,mask:d,material:g}),this.arrows=[],c&&this.arrows.push(this._renderables.make("arrow",{uniforms:_,flip:!0,samples:l,position:t,mask:d,material:g})),u&&this.arrows.push(this._renderables.make("arrow",{uniforms:_,samples:l,position:t,mask:d,material:g})),this._helpers.visible.make(),this._helpers.object.make(this.arrows.concat([this.line])),this._helpers.span.make(),this._listen(this,"span.range",this.updateRanges)}unmake(){return this._helpers.visible.unmake(),this._helpers.object.unmake(),this._helpers.span.unmake()}change(e,t,n){if(e["axis.detail"]||e["line.stroke"]||e["line.join"]||e["axis.crossed"]||e["interval.axis"]&&this.props.crossed)return this.rebuild();if(t.interval||t.span||t.view||t.origin||n)return this.updateRanges()}updateRanges(){const{axis:e,origin:t}=this.props,n=this._helpers.span.get("",e),r=n.x,s=n.y;return w0(this.axisPosition,e).multiplyScalar(r),w0(this.axisStep,e).multiplyScalar((s-r)*this.resolution),BI(this.axisPosition,e,t)}};pz.initClass();let mz=class extends Os{static initClass(){this.traits=["node","object","visible","style","line","mesh","face","geometry","position","bind","shade"]}constructor(e,t,n){super(e,t,n),this.face=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),{items:t,width:n,height:r,depth:s}=e;if(this.face&&this.face.geometry.clip(n,r,s,t),this.line&&this.line.geometry.clip(t,n,r,s),this.bind.map!=null){const a=this.bind.map.getActiveDimensions();if(this.face)return this.face.geometry.map(a.width,a.height,a.depth,a.items)}}make(){let e,t;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"mesh.map",trait:"source"}]),this.bind.points==null)return;let n=this.bind.points.sourceShader(this._shaders.shader());n=this._helpers.position.pipeline(n);const r=this._helpers.style.uniforms(),s=this._helpers.line.uniforms(),a=this._inherit("unit").getUnitUniforms(),o={};o.styleZBias=this._attributes.make(this._types.number()),this.wireZBias=o.styleZBias;const l=this.bind.points.getDimensions(),{items:c,width:u,height:h,depth:f}=l,{line:d,shaded:g,fill:v,stroke:A,join:_}=this.props;this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));const y=this._helpers.object.mask(),x=this._helpers.shade.map(this.bind.map!=null?this.bind.map.sourceShader(this._shaders.shader()):void 0),C=this._helpers.shade.pipeline(),S=C||g,I=C||!1,P=[];if(d){const B=this._shaders.shader();B.pipe(fl("yzwx")),B.pipe(n),t=Al(a,s,r,o),this.line=this._renderables.make("line",{uniforms:t,samples:c,strips:u,ribbons:h,layers:f,position:B,color:e,stroke:A,join:_,material:I,mask:y,closed:!0}),P.push(this.line)}return v&&(t=Al(a,r,{}),this.face=this._renderables.make("face",{uniforms:t,width:u,height:h,depth:f,items:c,position:n,color:e,material:S,mask:y,map:x}),P.push(this.face)),this._helpers.visible.make(),this._helpers.object.make(P)}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.face=this.line=null}change(e,t,n){if(e["geometry.points"]||t.mesh)return this.rebuild();if(e["style.zBias"]||e["mesh.lineBias"]||n){const{fill:r,zBias:s,lineBias:a}=this.props;return this.wireZBias.value=s+(r?a:0)}}};mz.initClass();let gz=class extends Os{static initClass(){this.traits=["node","object","visible","style","line","grid","area","position","origin","shade","axis:x","axis:y","scale:x","scale:y","span:x","span:y"],this.defaults={width:1,zBias:-2}}constructor(e,t,n){super(e,t,n),this.axes=null}make(){let e,t=this._helpers.object.mask();const n=this._helpers.shade.pipeline()||!1;e=(f,d,g)=>{let v;const A=this._get(f+"axis.detail"),_=A+1,y=1/A,x=this._helpers.scale.divide(d),C=this._renderables.make("dataBuffer",{width:x,channels:1}),S={gridPosition:this._attributes.make(this._types.vec4()),gridStep:this._attributes.make(this._types.vec4()),gridAxis:this._attributes.make(this._types.vec4())},I={gridPosition:S.gridPosition.value,gridStep:S.gridStep.value,gridAxis:S.gridAxis.value},P=v=this._shaders.shader();g!=null&&t!=null&&(t=this._helpers.position.swizzle(t,g)),P.require(C.shader(this._shaders.shader(),2)),P.pipe("grid.position",S),v=this._helpers.position.pipeline(P);const B=this._helpers.style.uniforms(),M=this._helpers.line.uniforms(),D=this._inherit("unit").getUnitUniforms(),F=Al(M,B,D),z=this._renderables.make("line",{uniforms:F,samples:_,strips:x,position:v,stroke:c,join:u,mask:t,material:n});return{first:f,second:d,resolution:y,samples:_,line:z,buffer:C,values:I}};const{lineX:r,lineY:s,crossed:a,axes:o}=this.props,l=["0000","x000","y000","z000","w000"][o[1]],{stroke:c,join:u}=this.props;this.axes=[],r&&this.axes.push(e("x.","y.",null)),s&&this.axes.push(e("y.","x.",a?null:l));const h=(()=>{const f=[];for(e of this.axes)f.push(e.line);return f})();return this._helpers.visible.make(),this._helpers.object.make(h),this._helpers.span.make(),this._listen(this,"span.range",this.updateRanges)}unmake(){this._helpers.visible.unmake(),this._helpers.object.unmake(),this._helpers.span.unmake();for(const e of this.axes)e.buffer.dispose();this.axes=null}change(e,t,n){if(e["x.axis.detail"]||e["y.axis.detail"]||e["x.axis.factor"]||e["y.axis.factor"]||e["grid.lineX"]||e["grid.lineY"]||e["line.stroke"]||e["line.join"]||e["grid.crossed"]||e["grid.axes"]&&this.props.crossed)return this.rebuild();if(t.x||t.y||t.area||t.grid||t.view||t.origin||n)return this.updateRanges()}updateRanges(){const e=(l,c,u,h,f)=>{const{second:d,resolution:g,samples:v,line:A,buffer:_,values:y}=f;let x=u.x,C=u.y;w0(y.gridPosition,l).multiplyScalar(x),w0(y.gridStep,l).multiplyScalar((C-x)*g),BI(y.gridPosition,t,n),x=h.x,C=h.y;const S=this._helpers.scale.generate(d,_,x,C);w0(y.gridAxis,c);const I=S.length;return A.geometry.clip(v,I,1,1)},{axes:t,origin:n}=this.props,r=this._helpers.span.get("x.",t[0]),s=this._helpers.span.get("y.",t[1]),{lineX:a,lineY:o}=this.props;a&&e(t[0],t[1],r,s,this.axes[0]),o&&e(t[1],t[0],s,r,this.axes[+a]),window.cake1=this.axes[0].buffer,window.cake2=this.axes[1].buffer,window.cake3=this.axes[0]}};gz.initClass();let vz=class extends Os{static initClass(){this.traits=["node","object","visible","style","line","arrow","geometry","position","bind","shade"]}constructor(e,t,n){super(e,t,n),this.line=this.arrows=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),t=e.width,n=e.height,r=e.depth,s=e.items;return this.line.geometry.clip(t,n,r,s),Array.from(this.arrows).map(a=>a.geometry.clip(t,n,r,s))}make(){let e;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]),this.bind.points==null)return;let t=this._shaders.shader();t=this.bind.points.sourceShader(t),t=this._helpers.position.pipeline(t);const n=this._helpers.style.uniforms(),r=this._helpers.line.uniforms(),s=this._helpers.arrow.uniforms(),a=this._inherit("unit").getUnitUniforms(),{start:o,end:l}=this.props,{stroke:c,join:u,proximity:h,closed:f}=this.props;this.proximity=h;const d=this.bind.points.getDimensions(),g=d.width,v=d.height,A=d.depth,_=d.items;this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));const y=this._helpers.object.mask(),x=this._helpers.shade.pipeline()||!1,C=Al(s,r,n,a);return this.line=this._renderables.make("line",{uniforms:C,samples:g,strips:v,ribbons:A,layers:_,position:t,color:e,clip:o||l,stroke:c,join:u,proximity:h,closed:f,mask:y,material:x}),this.arrows=[],o&&this.arrows.push(this._renderables.make("arrow",{uniforms:C,flip:!0,samples:g,strips:v,ribbons:A,layers:_,position:t,color:e,closed:f,mask:y,material:x})),l&&this.arrows.push(this._renderables.make("arrow",{uniforms:C,samples:g,strips:v,ribbons:A,layers:_,position:t,color:e,closed:f,mask:y,material:x})),this._helpers.visible.make(),this._helpers.object.make(this.arrows.concat([this.line]))}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.line=this.arrows=null}change(e,t,n){if(e["geometry.points"]||e["line.stroke"]||e["line.join"]||e["arrow.start"]||e["arrow.end"])return this.rebuild();if(e["line.proximity"]&&this.proximity!=null!=(this.props.proximity!=null))return this.rebuild()}};vz.initClass();let _z=class extends Os{static initClass(){this.traits=["node","object","visible","style","point","geometry","position","bind","shade"]}constructor(e,t,n){super(e,t,n),this.point=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),{items:t,width:n,height:r,depth:s}=e;return this.point.geometry.clip(n,r,s,t)}make(){let e,t;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"point.sizes",trait:"source"}]),this.bind.points==null)return;let n=this._shaders.shader();n=this.bind.points.sourceShader(n),n=this._helpers.position.pipeline(n);const r=this.bind.points.getDimensions(),{items:s,width:a,height:o,depth:l}=r,c=this._helpers.style.uniforms(),u=this._helpers.point.uniforms(),h=this._inherit("unit").getUnitUniforms();this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e)),this.bind.sizes&&(t=this._shaders.shader(),this.bind.sizes.sourceShader(t));const f=this._helpers.object.mask(),d=this._helpers.shade.pipeline()||!1,{shape:g}=this.props,{fill:v}=this.props,{optical:A}=this.props,_=Al(h,u,c);this.point=this._renderables.make("point",{uniforms:_,width:a,height:o,depth:l,items:s,position:n,color:e,size:t,shape:g,optical:A,fill:v,mask:f,material:d}),this._helpers.visible.make(),this._helpers.object.make([this.point])}made(){return this.resize()}unmake(){this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.point=null}change(e,t,n){if(e["geometry.points"]||e["point.shape"]||e["point.fill"])return this.rebuild()}};_z.initClass();let Az=class extends Os{static initClass(){this.traits=["node","object","visible","style","line","mesh","strip","geometry","position","bind","shade"]}constructor(e,t,n){super(e,t,n),this.strip=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),{items:t,width:n,height:r,depth:s}=e;if(this.strip&&this.strip.geometry.clip(n,r,s,t),this.line&&this.line.geometry.clip(t,n,r,s),this.bind.map!=null){const a=this.bind.map.getActiveDimensions();if(this.strip)return this.strip.geometry.map(a.width,a.height,a.depth,a.items)}}make(){let e,t;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"mesh.map",trait:"source"}]),this.bind.points==null)return;let n=this._shaders.shader();n=this.bind.points.sourceShader(n),n=this._helpers.position.pipeline(n);const r=this._helpers.style.uniforms(),s=this._helpers.line.uniforms(),a=this._inherit("unit").getUnitUniforms(),{line:o,shaded:l,fill:c,stroke:u,join:h}=this.props,f={};f.styleZBias=this._attributes.make(this._types.number()),this.wireZBias=f.styleZBias;const d=this.bind.points.getDimensions(),{items:g,width:v,height:A,depth:_}=d;this.bind.colors&&(e=this._shaders.shader(),e=this.bind.colors.sourceShader(e));const y=this._helpers.object.mask();this._helpers.shade.map(this.bind.map!=null?this.bind.map.sourceShader(this._shaders.shader()):void 0);const x=this._helpers.shade.pipeline(),C=x||l,S=x||!1,I=[];if(o){const P=this._shaders.shader();P.pipe(fl("yzwx")),P.pipe(n),t=Al(a,s,r,f),this.line=this._renderables.make("line",{uniforms:t,samples:g,strips:v,ribbons:A,layers:_,position:P,color:e,stroke:u,join:h,mask:y,material:S}),I.push(this.line)}return c&&(t=Al(r,{}),this.strip=this._renderables.make("strip",{uniforms:t,width:v,height:A,depth:_,items:g,position:n,color:e,material:C}),I.push(this.strip)),this._helpers.visible.make(),this._helpers.object.make(I)}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.strip=null}change(e,t,n){if(e["geometry.points"]||t.mesh)return this.rebuild();if(e["style.zBias"]||e["mesh.lineBias"]||n){const{fill:r,zBias:s,lineBias:a}=this.props;return this.wireZBias.value=s+(r?a:0)}}};Az.initClass();let bz=class extends Os{static initClass(){this.traits=["node","object","visible","style","line","mesh","geometry","surface","position","grid","bind","shade"],this.defaults={lineX:!1,lineY:!1}}constructor(e,t,n){super(e,t,n),this.lineX=this.lineY=this.surface=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),{width:t,height:n,depth:r,items:s}=e;if(this.surface&&this.surface.geometry.clip(t,n,r,s),this.lineX&&this.lineX.geometry.clip(t,n,r,s),this.lineY&&this.lineY.geometry.clip(n,t,r,s),this.bind.map!=null){const a=this.bind.map.getActiveDimensions();if(this.surface)return this.surface.geometry.map(a.width,a.height,a.depth,a.items)}}make(){let e,t;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"mesh.normals",trait:"source"},{to:"mesh.map",trait:"source"}]),this.bind.points==null)return;let n=this._shaders.shader();n=this.bind.points.sourceShader(n),n=this._helpers.position.pipeline(n);const r=this._helpers.style.uniforms(),s=this._helpers.style.uniforms(),a=this._helpers.line.uniforms(),o=this._helpers.surface.uniforms(),l=this._inherit("unit").getUnitUniforms();s.styleColor=this._attributes.make(this._types.color()),s.styleZBias=this._attributes.make(this._types.number()),this.wireColor=s.styleColor.value,this.wireZBias=s.styleZBias,this.wireScratch=new qt;const c=this.bind.points.getDimensions(),{width:u,height:h,depth:f,items:d}=c,{shaded:g,fill:v,lineX:A,lineY:_,closedX:y,closedY:x,stroke:C,join:S,proximity:I,crossed:P}=this.props,B=[];this.proximity=I,this.bind.normals!=null&&(t=this._shaders.shader(),this.bind.normals.sourceShader(t),this._helpers.shade.normal(t)),this.bind.colors!=null&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));const M=this._helpers.object.mask(),D=this._helpers.shade.map(this.bind.map!=null?this.bind.map.sourceShader(this._shaders.shader()):void 0),F=this._helpers.shade.pipeline(),z=F||g,U=F||!1,{swizzle:$,swizzle2:O}=this._helpers.position;let ie=Al(l,a,r,s);const W=A||_?-50:0;return A&&(this.lineX=this._renderables.make("line",{uniforms:ie,samples:u,strips:h,ribbons:f,layers:d,position:n,color:e,normal:t,zUnits:-W,stroke:C,join:S,mask:M,material:U,proximity:I,closed:y||closed}),B.push(this.lineX)),_&&(this.lineY=this._renderables.make("line",{uniforms:ie,samples:h,strips:u,ribbons:f,layers:d,position:O(n,"yxzw","yxzw"),color:$(e,"yxzw"),zUnits:-W,stroke:C,join:S,mask:$(M,P?"xyzw":"yxzw"),material:U,proximity:I,closed:x||closed}),B.push(this.lineY)),v&&(ie=Al(l,o,r),this.surface=this._renderables.make("surface",{uniforms:ie,width:u,height:h,surfaces:f,layers:d,position:n,color:e,zUnits:W,stroke:C,material:z,mask:M,map:D,intUV:!0,closedX:y||closed,closedY:x||closed}),B.push(this.surface)),this._helpers.visible.make(),this._helpers.object.make(B)}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.lineX=this.lineY=this.surface=null}_convertGammaToLinear(e,t=2){return e.r=Math.pow(e.r,t),e.g=Math.pow(e.g,t),e.b=Math.pow(e.b,t),e}_convertLinearToGamma(e,t=2){const n=t>0?1/t:1;return e.r=Math.pow(e.r,n),e.g=Math.pow(e.g,n),e.b=Math.pow(e.b,n),e}change(e,t,n){if(e["geometry.points"]||e["mesh.shaded"]||e["mesh.fill"]||e["line.stroke"]||e["line.join"]||t.grid)return this.rebuild();if(e["style.color"]||e["style.zBias"]||e["mesh.fill"]||e["mesh.lineBias"]||n){const{fill:r,color:s,zBias:a,lineBias:o}=this.props;if(this.wireZBias.value=a+(r?o:0),this.wireColor.copy(s),r){const l=this.wireScratch;l.setRGB(s.r,s.g,s.b),this._convertLinearToGamma(this._convertGammaToLinear(l).multiplyScalar(.75)),this.wireColor.r=l.r,this.wireColor.g=l.g,this.wireColor.b=l.b}}if(e["line.proximity"]&&this.proximity!=null!=(this.props.proximity!=null))return this.rebuild()}};bz.initClass();let yz=class extends Os{static initClass(){this.traits=["node","object","visible","style","line","ticks","geometry","position","bind","shade"]}init(){return this.tickStrip=this.line=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),t=+(e.items>0),n=e.width*t,r=e.height*t,s=e.depth*t;return this.line.geometry.clip(2,n,r,s),this.tickStrip.set(0,n-1)}make(){let e,t;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]),this.bind.points==null)return;const n=this._helpers.style.uniforms(),r=this._helpers.line.uniforms(),s=this._inherit("unit").getUnitUniforms(),a=Al(r,n,s),o={tickEpsilon:this.node.attributes["ticks.epsilon"],tickSize:this.node.attributes["ticks.size"],tickNormal:this.node.attributes["ticks.normal"],tickStrip:this._attributes.make(this._types.vec2(0,0)),worldUnit:a.worldUnit,focusDepth:a.focusDepth};this.tickStrip=o.tickStrip.value;const l=t=this._shaders.shader();l.require(this.bind.points.sourceShader(this._shaders.shader())),l.require(this._helpers.position.pipeline(this._shaders.shader())),l.pipe("ticks.position",o);const{stroke:c,join:u}=this.props,h=this.bind.points.getDimensions(),f=h.width,d=h.height,g=h.depth;this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));const v=this._helpers.object.mask(),A=this._helpers.shade.pipeline()||!1,{swizzle:_}=this._helpers.position;return this.line=this._renderables.make("line",{uniforms:a,samples:2,strips:f,ribbons:d,layers:g,position:t,color:e,stroke:c,join:u,mask:_(v,"yzwx"),material:A}),this._helpers.visible.make(),this._helpers.object.make([this.line])}made(){return this.resize()}unmake(){return this.line=null,this._helpers.visible.unmake(),this._helpers.object.unmake()}change(e,t,n){if(e["geometry.points"]||e["line.stroke"]||e["line.join"])return this.rebuild()}};yz.initClass();let wz=class extends Os{static initClass(){this.traits=["node","object","visible","style","line","arrow","geometry","position","bind","shade"]}constructor(e,t,n){super(e,t,n),this.line=this.arrows=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),t=e.items,n=e.width,r=e.height,s=e.depth;return this.line.geometry.clip(t,n,r,s),Array.from(this.arrows).map(a=>a.geometry.clip(t,n,r,s))}make(){let e;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]),this.bind.points==null)return;let t=this._shaders.shader();this.bind.points.sourceShader(t),this._helpers.position.pipeline(t);const n=this._helpers.style.uniforms(),r=this._helpers.line.uniforms(),s=this._helpers.arrow.uniforms(),a=this._inherit("unit").getUnitUniforms(),{start:o,end:l}=this.props,{stroke:c,join:u,proximity:h,closed:f}=this.props;this.proximity=h;const d=this.bind.points.getDimensions(),g=d.items,v=d.width,A=d.height,_=d.depth;this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));let y=this._helpers.object.mask(),x=this._helpers.shade.pipeline()||!1;const{swizzle:C,swizzle2:S}=this._helpers.position;t=S(t,"yzwx","yzwx"),e=C(e,"yzwx"),y=C(y,"yzwx"),x=C(x,"yzwx");const I=Al(s,r,n,a);return this.line=this._renderables.make("line",{uniforms:I,samples:g,ribbons:A,strips:v,layers:_,position:t,color:e,clip:o||l,stroke:c,join:u,proximity:h,closed:f,mask:y,material:x}),this.arrows=[],o&&this.arrows.push(this._renderables.make("arrow",{uniforms:I,flip:!0,samples:g,ribbons:A,strips:v,layers:_,position:t,color:e,closed:f,mask:y,material:x})),l&&this.arrows.push(this._renderables.make("arrow",{uniforms:I,samples:g,ribbons:A,strips:v,layers:_,position:t,color:e,closed:f,mask:y,material:x})),this._helpers.visible.make(),this._helpers.object.make(this.arrows.concat([this.line]))}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.line=this.arrows=null}change(e,t,n){if(e["geometry.points"]||e["line.stroke"]||e["line.join"]||e["arrow.start"]||e["arrow.end"])return this.rebuild();if(e["line.proximity"]&&this.proximity!=null!=(this.props.proximity!=null))return this.rebuild()}};wz.initClass();let xz=class extends wA{static initClass(){this.traits=["node","buffer","active","data","voxel","html"],this.finals={channels:1}}init(){super.init(),this.storage="pushBuffer"}make(){super.make();const{items:e,width:t,height:n,depth:r}=this.getDimensions();return this.dom=this._overlays.make("dom"),this.dom.hint(e*t*n*r)}unmake(){if(super.unmake(),this.dom!=null)return this.dom.dispose(),this.dom=null}update(){return super.update()}change(e,t,n){return t.html?this.rebuild():super.change(e,t,n)}nodes(){return this.buffer.read()}callback(e){const{el:t}=this.dom;return e.length<=6?(n,r,s,a,o)=>e(n,t,r,s,a,o):(n,r,s,a,o)=>e(n,t,r,s,a,o,this.bufferClock,this.bufferStep)}};xz.initClass();class Cz extends Os{static initClass(){this.traits=["node","bind","object","visible","overlay","dom","attach","position"]}init(){this.emitter=this.root=null,this.active={}}make(){if(super.make(),this._helpers.bind.make([{to:"dom.html",trait:"html"},{to:"dom.points",trait:"source"}]),this.bind.points==null||this.bind.html==null)return;this.root=this._inherit("root"),this._listen("root","root.update",this.update),this._listen("root","root.post",this.post);const e=this.bind.points.getDimensions(),t=this.bind.html.getDimensions(),n=Math.min(e.items,t.items),r=Math.min(e.width,t.width),s=Math.min(e.height,t.height),a=Math.min(e.depth,t.depth);let o=this.bind.points.sourceShader(this._shaders.shader());o=this._helpers.position.pipeline(o);const l=this._shaders.shader({globals:["projectionMatrix"]});l.pipe("project.readback"),o.pipe(l);const c=this._shaders.shader();this.readback=this._renderables.make("readback",{map:o,indexer:c,items:n,width:r,height:s,depth:a,channels:4,stpq:!0}),this.dom=this._overlays.make("dom"),this.dom.hint(n*r*s*a*2),this.emitter=this.callback(this.bind.html.nodes()),this.readback.setCallback(this.emitter),this._helpers.visible.make()}unmake(){this.readback!=null&&(this.readback.dispose(),this.dom.dispose(),this.readback=this.dom=null,this.root=null,this.emitter=null,this.active={}),this._helpers.bind.unmake(),this._helpers.visible.unmake()}update(){this.readback!=null&&this.props.visible&&(this.readback.update(this.root!=null?this.root.getCamera():void 0),this.readback.post(),this.readback.iterate())}post(){this.readback!=null&&this.dom.render(this.isVisible?this.emitter.nodes():null)}callback(e){let t,n;const r=this._inherit("unit").getUnitUniforms(),s=r.viewWidth,a=r.viewHeight,o=this.node.attributes["dom.attributes"],l=this.node.attributes["dom.size"],c=this.node.attributes["dom.zoom"],u=this.node.attributes["dom.color"],h=this.node.attributes["dom.outline"],f=this.node.attributes["dom.pointerEvents"],d=this.node.attributes["overlay.opacity"],g=this.node.attributes["overlay.zIndex"],v=this.node.attributes["attach.offset"],A=this.node.attributes["attach.depth"],_=this.node.attributes["attach.snap"],{el:y}=this.dom;let x=[],C=null,S=null,I=t=n=0,P="";const B=function(M,D,F,z,U,$,O,ie){let W;const J=ie+I*U+t*$+n*O,Ce=e[J],Me=z<0,ve=1+(1/z-1)*A.value,nt=Me?0:ve,$e=+v.value.x*nt,X=+v.value.y*nt;let Be=(M+1)*s.value*.5+$e,mt=(D-1)*a.value*.5+X;Be/=c.value,mt/=c.value,_.value&&(Be=Math.round(Be),mt=Math.round(mt));const Ue=Math.min(.999,Me?0:d.value),Tt={className:S,style:{transform:`translate3d(${Be}px, ${-mt}px, ${1-z}px) translate(-50%, -50%) scale(${nt},${nt})`,opacity:Ue}};for(O in C)W=C[O],Tt.style[O]=W;const yt=o.value;if(yt!=null){const Ye=yt.style;for(O in yt)W=yt[O],["style","className"].includes(O)||(Tt[O]=W);if(Ye!=null)for(O in Ye)W=Ye[O],Tt.style[O]=W}return Tt.className+=" "+((yt!=null?yt.className:void 0)!=null?yt!=null?yt.className:void 0:"mathbox-label"),x.push(y("div",Tt,Ce))};return B.reset=()=>{x=[],[I,t,n]=Array.from([this.strideI,this.strideJ,this.strideK]);const M=u.value,D=F=>Math.floor(F*255);if(P=M?`rgb(${[D(M.x),D(M.y),D(M.z)]})`:"",S=`mathbox-outline-${Math.round(h.value)}`,C={},M&&(C.color=P),C.fontSize=`${l.value}px`,c.value!==1&&(C.zoom=c.value),g.value>0&&(C.zIndex=g.value),f.value)return C.pointerEvents="auto"},B.nodes=()=>x,B}resize(){let e,t;if(this.readback==null)return;const n=this.bind.points.getActiveDimensions(),r=this.bind.html.getActiveDimensions(),s=Math.min(n.items,r.items),a=Math.min(n.width,r.width),o=Math.min(n.height,r.height),l=Math.min(n.depth,r.depth);this.readback.setActive(s,a,o,l),this.strideI=e=r.items,this.strideJ=t=e*r.width,this.strideK=t*r.height}change(e,t,n){if(e["dom.html"]||e["dom.points"])return this.rebuild()}}Cz.initClass();class Ez extends wA{static initClass(){this.traits=["node","buffer","active","data","texture","voxel","text","font"],this.defaults={minFilter:"linear",magFilter:"linear"},this.finals={channels:1}}init(){return super.init(),this.atlas=null}textShader(e){return this.atlas.shader(e)}textIsSDF(){return this.props.sdf>0}textHeight(){return this.props.detail}make(){let{minFilter:e,magFilter:t,type:n}=this.props;const{font:r,style:s,variant:a,weight:o,detail:l,sdf:c}=this.props;this.atlas=this._renderables.make("textAtlas",{font:r,size:l,style:s,variant:a,weight:o,outline:c,minFilter:e,magFilter:t,type:n}),this.minFilter=ji,this.magFilter=ji,this.type=is,bA.prototype.make.call(this),e=this.minFilter!=null?this.minFilter:this.props.minFilter,t=this.magFilter!=null?this.magFilter:this.props.magFilter,n=this.type!=null?this.type:this.props.type;const{width:u}=this.props,{height:h}=this.props,{depth:f}=this.props,d=this.props.bufferWidth,g=this.props.bufferHeight,v=this.props.bufferDepth,{channels:A}=this.props,{items:_}=this.props;let y=this.spec={channels:A,items:_,width:u,height:h,depth:f};this.items=y.items,this.channels=y.channels;const{data:x}=this.props;y=jd(x,y);const{space:C}=this;C.width=Math.max(d,y.width||1),C.height=Math.max(g,y.height||1),C.depth=Math.max(v,y.depth||1),this.buffer=this._renderables.make(this.storage,{width:C.width,height:C.height,depth:C.depth,channels:4,items:_,minFilter:e,magFilter:t,type:n});const{atlas:S}=this,{emit:I}=this.buffer.streamer;return this.buffer.streamer.emit=P=>S.map(P,I)}unmake(){if(super.unmake(),this.atlas)return this.atlas.dispose(),this.atlas=null}update(){return this.atlas.begin(),super.update(),this.atlas.end()}change(e,t,n){return t.font?this.rebuild():super.change(e,t,n)}}Ez.initClass();class go extends cC{static initClass(){this.traits=["node","bind","operator","source","index"]}indexShader(e){return ZB(this.bind.source,"indexShader",t=>t.indexShader(e))}sourceShader(e){return ZB(this.bind.source,"sourceShader",t=>t.sourceShader(e))}getDimensions(){return this.bind.source.getDimensions()}getFutureDimensions(){return this.bind.source.getFutureDimensions()}getActiveDimensions(){return this.bind.source.getActiveDimensions()}getIndexDimensions(){return this.bind.source.getIndexDimensions()}init(){return this.sourceSpec=[{to:"operator.source",trait:"source",optional:!0}]}make(){return super.make(),this._helpers.bind.make(this.sourceSpec)}made(){return this.resize(),super.made()}unmake(){return this._helpers.bind.unmake()}resize(e){return this.trigger({type:"source.resize"})}}go.initClass();function ZB(i,e,t){if(typeof i<"u"&&i!==null&&typeof i[e]=="function")return t(i,e)}class Sz extends go{static initClass(){this.traits=["node","bind","operator","texture","text","format","font"],this.defaults={minFilter:"linear",magFilter:"linear"}}init(){return super.init(),this.atlas=this.buffer=this.used=this.time=null,this.filled=!1}sourceShader(e){return this.buffer.shader(e)}textShader(e){return this.atlas.shader(e)}textIsSDF(){return this.props.sdf>0}textHeight(){return this.props.detail}make(){this._helpers.bind.make([{to:"operator.source",trait:"raw"}]);let{minFilter:e,magFilter:t,type:n}=this.props;const{font:r,style:s,variant:a,weight:o,detail:l,sdf:c}=this.props;this.atlas=this._renderables.make("textAtlas",{font:r,size:l,style:s,variant:a,weight:o,outline:c,minFilter:e,magFilter:t,type:n}),e=ji,t=ji,n=is;const u=this.bind.source.getDimensions(),{items:h,width:f,height:d,depth:g}=u;this.buffer=this._renderables.make("voxelBuffer",{width:f,height:d,depth:g,channels:4,items:h,minFilter:e,magFilter:t,type:n});const{atlas:v}=this,{emit:A}=this.buffer.streamer;return this.buffer.streamer.emit=_=>v.map(_,A),this.clockParent=this._inherit("clock"),this._listen("root","root.update",this.update)}made(){return super.made(),this.resize()}unmake(){if(super.unmake(),this.buffer&&(this.buffer.dispose(),this.buffer=null),this.atlas)return this.atlas.dispose(),this.atlas=null}update(){if(this.filled&&!this.props.live||!this.through)return;this.time=this.clockParent.getTime();const{used:e}=this;if(this.atlas.begin(),this.used=this.through(),this.buffer.write(this.used),this.atlas.end(),this.filled=!0,e!==this.used)return this.trigger({type:"source.resize"})}change(e,t,n){if(t.font)return this.rebuild();if(e["format.expr"]||e["format.digits"]||e["format.data"]||n){let r,{expr:s}=this.props;const{digits:a,data:o}=this.props;s==null&&(o!=null?s=(c,u,h,f,d)=>o[d]:s=c=>c);const{length:l}=s;return a!=null&&(s=(c=>(u,h,f,d,g,v,A,_,y,x)=>+c(u,h,f,d,g,v,A,_,y,x).toPrecision(a))(s)),l>8?r=(c,u,h,f,d,g,v,A,_,y,x)=>c(s(u,h,f,d,g,v,A,_,this.time.clock,this.time.step)):r=(c,u,h,f,d,g,v,A,_)=>c(s(u,h,f,d,g,v,A,_)),this.through=this.bind.source.rawBuffer().through(r,this.buffer)}}}Sz.initClass();class Mz extends Os{static initClass(){this.traits=["node","bind","object","visible","style","label","attach","geometry","position"]}make(){let e;if(super.make(),this._helpers.bind.make([{to:"label.text",trait:"text"},{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]),this.bind.points==null||this.bind.text==null)return;const t=this.bind.points.getDimensions(),n=this.bind.text.getDimensions(),r=this.bind.text.textIsSDF(),s=Math.min(t.items,n.items),a=Math.min(t.width,n.width),o=Math.min(t.height,n.height),l=Math.min(t.depth,n.depth);let c=this.bind.points.sourceShader(this._shaders.shader());c=this._helpers.position.pipeline(c);const u=this.bind.text.sourceShader(this._shaders.shader()),h=this._shaders.shader().pipe("label.map");h.pipe(this.bind.text.textShader(this._shaders.shader()));const f={spriteDepth:this.node.attributes["attach.depth"],spriteOffset:this.node.attributes["attach.offset"],spriteSnap:this.node.attributes["attach.snap"],spriteScale:this._attributes.make(this._types.number()),outlineStep:this._attributes.make(this._types.number()),outlineExpand:this._attributes.make(this._types.number()),outlineColor:this.node.attributes["label.background"]};this.spriteScale=f.spriteScale,this.outlineStep=f.outlineStep,this.outlineExpand=f.outlineExpand;const d=r?"label.outline":"label.alpha",g=this._shaders.shader().pipe(d,f);this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));const v=this._helpers.object.mask(),A=this._helpers.style.uniforms(),_=this._inherit("unit").getUnitUniforms(),y=Al(_,A,f);return this.sprite=this._renderables.make("sprite",{uniforms:y,width:a,height:o,depth:l,items:s,position:c,sprite:u,map:h,combine:g,color:e,mask:v,linear:!0}),this._helpers.visible.make(),this._helpers.object.make([this.sprite])}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.sprite=null}resize(){const e=this.bind.points.getActiveDimensions(),t=this.bind.text.getActiveDimensions(),n=Math.min(e.items,t.items),r=Math.min(e.width,t.width),s=Math.min(e.height,t.height),a=Math.min(e.depth,t.depth);return this.sprite.geometry.clip(r,s,a,n)}change(e,t,n){if(t.geometry||e["label.text"])return this.rebuild();if(this.bind.points==null)return;const{size:r}=this.props,{outline:s}=this.props,{expand:a}=this.props,o=this.bind.text.textHeight(),l=r/o;return this.outlineExpand.value=a/l*16/255,this.outlineStep.value=s/l*16/255,this.spriteScale.value=l}}Mz.initClass();class RI extends go{static initClass(){this.traits=["node","bind","operator","source","index","resample","sampler:x","sampler:y","sampler:z","sampler:w","include"]}indexShader(e){return e.pipe(this.indexer),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){const t=this.resampled,n=this.centered,r=this.padding;return this.relativeSize?(n.items||e.items--,n.width||e.width--,n.height||e.height--,n.depth||e.depth--,t.items!=null&&(e.items*=t.items),t.width!=null&&(e.width*=t.width),t.height!=null&&(e.height*=t.height),t.depth!=null&&(e.depth*=t.depth),n.items||e.items++,n.width||e.width++,n.height||e.height++,n.depth||e.depth++,e.items-=r.items*2,e.width-=r.width*2,e.height-=r.height*2,e.depth-=r.depth*2):(t.items!=null&&(e.items=t.items),t.width!=null&&(e.width=t.width),t.height!=null&&(e.height=t.height),t.depth!=null&&(e.depth=t.depth)),e.items=Math.max(0,Math.floor(e.items)),e.width=Math.max(0,Math.floor(e.width)),e.height=Math.max(0,Math.floor(e.height)),e.depth=Math.max(0,Math.floor(e.depth)),e}make(){if(super.make(),this.bind.source==null)return;this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}]);const{indices:e,channels:t}=this.props,{shader:n}=this.bind,{sample:r,size:s,items:a,width:o,height:l,depth:c}=this.props,u=r===this.node.attributes["resample.sample"].enum.relative,h=s===this.node.attributes["resample.size"].enum.relative;this.resampled={},a!=null&&(this.resampled.items=a),o!=null&&(this.resampled.width=o),l!=null&&(this.resampled.height=l),c!=null&&(this.resampled.depth=c),this.centered={},this.centered.items=this.props.centeredW,this.centered.width=this.props.centeredX,this.centered.height=this.props.centeredY,this.centered.depth=this.props.centeredZ,this.padding={},this.padding.items=this.props.paddingW,this.padding.width=this.props.paddingX,this.padding.height=this.props.paddingY,this.padding.depth=this.props.paddingZ;const f=this._shaders.shader(),d=this._shaders.shader(),g=[null,this._types.number,this._types.vec2,this._types.vec3,this._types.vec4][e],v={dataSize:this._attributes.make(g(0,0,0,0)),dataResolution:this._attributes.make(g(0,0,0,0)),targetSize:this._attributes.make(g(0,0,0,0)),targetResolution:this._attributes.make(g(0,0,0,0)),resampleFactor:this._attributes.make(this._types.vec4(0,0,0,0)),resampleBias:this._attributes.make(this._types.vec4(0,0,0,0))};this.dataResolution=v.dataResolution,this.dataSize=v.dataSize,this.targetResolution=v.targetResolution,this.targetSize=v.targetSize,this.resampleFactor=v.resampleFactor,this.resampleBias=v.resampleBias;const A=a!=null||o!=null||l!=null||c!=null;f.pipe("resample.padding",v);let _=[],y=!1;const x=["width","height","depth","items"];for(let C=0;C<x.length;C++){const S=x[C],I=this.centered[S];y||(y=I),_[C]=I?"0.5":"0.0"}return y&&(_=`vec4(${_})`,f.pipe(Wl(4,"+",_)),A&&d.pipe(Wl(4,"+",_))),u&&(A?(f.pipe("resample.relative",v),d.pipe("resample.relative",v)):d.pipe(gh("vec4"))),n!=null?(e!==4&&f.pipe(Wd(4,e)),f.callback(),e!==4&&f.pipe(L0(e,4)),y&&f.pipe(Wl(4,"-",_)),f.pipe(this.bind.source.sourceShader(this._shaders.shader())),t!==4&&f.pipe(Wd(4,t)),f.join(),this.bind.shader!=null&&f.pipe(this.bind.shader.shaderBind(v)),t!==4&&f.pipe(L0(t,4))):(y&&f.pipe(Wl(4,"-",_)),f.pipe(this.bind.source.sourceShader(this._shaders.shader()))),y&&A&&d.pipe(Wl(4,"-",_)),this.operator=f,this.indexer=d,this.indices=e,this.relativeSample=u,this.relativeSize=h}unmake(){return super.unmake(),this.operator=null}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions(),t=this.getActiveDimensions(),n=f=>{const d=this.centered[f],g=this.padding[f];return t[f]+=g*2,[d?e[f]/Math.max(1,t[f]):Math.max(1,e[f]-1)/Math.max(1,t[f]-1),g]},[r,s]=Array.from(n("width")),[a,o]=Array.from(n("height")),[l,c]=Array.from(n("depth")),[u,h]=Array.from(n("items"));return this.indices===1?(this.dataResolution.value=1/e.width,this.targetResolution.value=1/t.width,this.dataSize.value=e.width,this.targetSize.value=t.width):(this.dataResolution.value.set(1/e.width,1/e.height,1/e.depth,1/e.items),this.targetResolution.value.set(1/t.width,1/t.height,1/t.depth,1/t.items),this.dataSize.value.set(e.width,e.height,e.depth,e.items),this.targetSize.value.set(t.width,t.height,t.depth,t.items)),this.resampleFactor.value.set(r,a,l,u),this.resampleBias.value.set(s,o,c,h),super.resize()}change(e,t,n){if(t.operator||t.resample||t.sampler||t.include)return this.rebuild()}}RI.initClass();class Tz extends RI{static initClass(){this.traits=["node","bind","operator","resample","sampler:x","sampler:y","sampler:z","sampler:w","include","text"]}init(){return this.sourceSpec=[{to:"operator.source",trait:"text"}]}textShader(e){return this.bind.source.textShader(e)}textIsSDF(){return(this.bind.source!=null?this.bind.source.props.sdf:void 0)>0}textHeight(){return this.bind.source!=null?this.bind.source.props.detail:void 0}}Tz.initClass();class Iz extends wl{static initClass(){this.traits=["node","clock","seek","play"]}init(){return this.skew=0,this.last=0,this.time={now:+new Date/1e3,time:0,delta:0,clock:0,step:0}}make(){return this._listen("clock","clock.tick",this.tick)}reset(){return this.skew=0}tick(e){const{from:t,to:n,speed:r,seek:s,pace:a,delay:o,realtime:l}=this.props,c=this._inherit("clock").getTime(),u=l?c.time:c.clock,h=l?c.delta:c.step,f=r/a;this.skew+=h*(f-1),this.last>u&&(this.skew=0),this.time.now=c.now+this.skew,this.time.time=c.time,this.time.delta=c.delta;const d=s??c.clock+this.skew;return this.time.clock=Math.min(n,t+Math.max(0,d-o*f)),this.time.step=h*f,this.last=u,this.trigger(e)}getTime(){return this.time}}Iz.initClass();class Pz extends wl{static initClass(){this.traits=["node","clock","now"]}init(){let e;return this.now=e=+new Date/1e3,this.skew=0,this.time={now:e,time:0,delta:0,clock:0,step:0}}make(){return this.clockParent=this._inherit("clock"),this._listen("clock","clock.tick",this.tick)}unmake(){return this.clockParent=null}change(e,t,n){if(e["date.now"])return this.skew=0}tick(e){const{seek:t,pace:n,speed:r}=this.props,s=this.clockParent.getTime();return this.skew+=s.step*n/r,t!=null&&(this.skew=t),this.time.now=this.time.time=this.time.clock=(this.props.now!=null?this.props.now:this.now)+this.skew,this.time.delta=this.time.step=s.delta,this.trigger(e)}getTime(){return this.time}}Pz.initClass();class X0 extends wl{static initClass(){this.traits=["node","vertex","fragment"]}vertex(e,t){let n;return(n=eR(this._inherit("vertex"),r=>r.vertex(e,t)))!=null?n:e}fragment(e,t){let n;return(n=eR(this._inherit("fragment"),r=>r.fragment(e,t)))!=null?n:e}}X0.initClass();function eR(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class kz extends X0{static initClass(){this.traits=["node","vertex","transform3"]}make(){return this.uniforms={transformMatrix:this._attributes.make(this._types.mat4())},this.composer=fv()}unmake(){return delete this.uniforms}change(e,t,n){if(e["transform3.pass"])return this.rebuild();if(!t.transform3&&!n)return;const r=this.props.position,s=this.props.quaternion,a=this.props.rotation,o=this.props.scale,l=this.props.matrix,c=this.props.eulerOrder;return this.uniforms.transformMatrix.value=this.composer(r,a,s,o,l,c)}vertex(e,t){return t===this.props.pass&&e.pipe("transform3.position",this.uniforms),super.vertex(e,t)}}kz.initClass();class Bz extends X0{static initClass(){this.traits=["node","vertex","transform4"]}make(){return this.uniforms={transformMatrix:this._attributes.make(this._types.mat4()),transformOffset:this.node.attributes["transform4.position"]},this.transformMatrix=this.uniforms.transformMatrix.value}unmake(){return delete this.uniforms}change(e,t,n){if(e["transform4.pass"])return this.rebuild();if(!t.transform4&&!n)return;const r=this.props.scale,s=this.props.matrix,a=this.transformMatrix;return a.copy(s),a.scale(r)}vertex(e,t){return t===this.props.pass&&e.pipe("transform4.position",this.uniforms),super.vertex(e,t)}}Bz.initClass();class Rz extends X0{static initClass(){this.traits=["node","include","vertex","bind"]}make(){return this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}])}unmake(){return this._helpers.bind.unmake()}change(e,t,n){if(t.include)return this.rebuild()}vertex(e,t){return this.bind.shader!=null&&t===this.props.pass&&e.pipe(this.bind.shader.shaderBind()),super.vertex(e,t)}}Rz.initClass();class Dz extends X0{static initClass(){this.traits=["node","include","fragment","bind"]}make(){return this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}])}unmake(){return this._helpers.bind.unmake()}change(e,t,n){if(t.include||e["fragment.gamma"])return this.rebuild()}fragment(e,t){return this.bind.shader!=null&&t===this.props.pass&&(this.props.gamma&&e.pipe("mesh.gamma.out"),e.pipe(this.bind.shader.shaderBind()),e.split(),this.props.gamma&&e.pipe("mesh.gamma.in"),e.pass()),super.fragment(e,t)}}Dz.initClass();class Lz extends X0{static initClass(){this.traits=["node","vertex","layer"]}make(){return this._listen("root","root.resize",this.update),this.uniforms={layerScale:this._attributes.make(this._types.vec4()),layerBias:this._attributes.make(this._types.vec4())}}update(){const e=this._inherit("root").getCamera(),t=e.aspect!=null?e.aspect:1,n=e.fov!=null?e.fov:1,r=Math.tan(n*Math.PI/360),s=this.node.attributes["layer.fit"].enum;let{fit:a}=this.props;const{depth:o}=this.props;switch(a){case s.contain:a=t>1?s.y:s.x;break;case s.cover:a=t>1?s.x:s.y;break}switch(a){case s.x:this.uniforms.layerScale.value.set(r*t,r*t,1,1);break;case s.y:this.uniforms.layerScale.value.set(r,r,1,1);break}return this.uniforms.layerBias.value.set(0,0,-o,0)}change(e,t,n){if(e["layer.fit"]||e["layer.depth"]||n)return this.update()}vertex(e,t){return t===2?e.pipe("layer.position",this.uniforms):t===3?e.pipe("root.position"):e}}Lz.initClass();class Oz extends wl{static initClass(){this.traits=["node","include","mask","bind"]}make(){return this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}])}unmake(){return this._helpers.bind.unmake()}change(e,t,n){if(t.include)return this.rebuild()}mask(e){let t,n;return this.bind.shader!=null?e?(n=this._shaders.shader(),n.pipe(gh("vec4")),n.fan(),n.pipe(e),n.next(),n.pipe(this.bind.shader.shaderBind()),n.end(),n.pipe("float combine(float a, float b) { return min(a, b); }")):(n=this._shaders.shader(),n.pipe(this.bind.shader.shaderBind())):n=e,(t=Yje(this._inherit("mask"),r=>r.mask(n)))!=null?t:n}}Oz.initClass();function Yje(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class Nz extends go{static initClass(){this.traits=["node","bind","operator","source","index","clamp"]}indexShader(e){return e.pipe(this.operator),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator),super.sourceShader(e)}make(){if(super.make(),this.bind.source==null)return;const e={clampLimit:this._attributes.make(this._types.vec4())};this.clampLimit=e.clampLimit;const t=this._shaders.shader();return t.pipe("clamp.position",e),this.operator=t}unmake(){return super.unmake()}resize(){if(this.bind.source!=null){const e=this.bind.source.getActiveDimensions();this.clampLimit.value.set(e.width-1,e.height-1,e.depth-1,e.items-1)}return super.resize()}change(e,t,n){if(t.operator||t.clamp)return this.rebuild()}}Nz.initClass();class Fz extends go{static initClass(){this.traits=["node","bind","operator","source","index","grow"]}sourceShader(e){return e.pipe(this.operator)}make(){if(super.make(),this.bind.source==null)return;const e={growScale:this.node.attributes["grow.scale"],growMask:this._attributes.make(this._types.vec4()),growAnchor:this._attributes.make(this._types.vec4())};this.growMask=e.growMask.value,this.growAnchor=e.growAnchor.value;const t=this._shaders.shader();return t.require(this.bind.source.sourceShader(this._shaders.shader())),t.pipe("grow.position",e),this.operator=t}unmake(){return super.unmake()}resize(){return this.update(),super.resize()}update(){const e=this.bind.source.getFutureDimensions(),t=["width","height","depth","items"],n=(r,s)=>((r||1)-1)*(.5-s*.5);return(()=>{const r=[];for(let s=0;s<t.length;s++){const a=t[s],o=this.props[a];this.growMask.setComponent(s,+(o==null)),r.push(this.growAnchor.setComponent(s,o!=null?n(e[a],o):0))}return r})()}change(e,t,n){if(t.operator)return this.rebuild();if(t.grow)return this.update()}}Fz.initClass();let zz=class extends go{static initClass(){this.traits=["node","bind","operator","source","index","join"]}indexShader(e){return e.pipe(this.operator),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator),super.sourceShader(e)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){let t,n;const{order:r,axis:s,stride:a}=this,o=["width","height","depth","items"],l=r.map(d=>o[d-1]),c=r.indexOf(s);let u=(()=>{const d=[];for(n of Array.from(l))d.push(e[n]);return d})();const h=((t=u[c+1])!=null?t:1)*a;u.splice(c,2,h),u=u.slice(0,3),u.push(1);const f={};for(let d=0;d<l.length;d++)n=l[d],f[n]=u[d];return f}make(){if(super.make(),this.bind.source==null)return;const{order:e}=this.props;let{axis:t}=this.props,{overlap:n}=this.props;const r=e.join("");t==null&&(t=e[0]);const s=r.indexOf(t),a=r.replace(t,"00").substring(0,4),l=[null,"width","height","depth","items"][t],u=this.bind.source.getDimensions()[l];n=Math.min(u-1,n);const h=u-n,f={joinStride:this._attributes.make(this._types.number(h)),joinStrideInv:this._attributes.make(this._types.number(1/h))},d=this._shaders.shader();return d.require(fl(t,1)),d.require(fl(a,4)),d.require(_I([s,s+1])),d.pipe("join.position",f),d.pipe(lC(e)),this.operator=d,this.order=e,this.axis=t,this.overlap=n,this.length=u,this.stride=h}unmake(){return super.unmake()}change(e,t,n){if(t.join||t.operator)return this.rebuild()}};zz.initClass();class Uz extends go{static initClass(){this.traits=["node","bind","operator","source","index","lerp","sampler:x","sampler:y","sampler:z","sampler:w"]}indexShader(e){return e.pipe(this.indexer),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){const t=this.resampled,n=this.centered,r=this.padding;return this.relativeSize?(n.items||e.items--,n.width||e.width--,n.height||e.height--,n.depth||e.depth--,t.items!=null&&(e.items*=t.items),t.width!=null&&(e.width*=t.width),t.height!=null&&(e.height*=t.height),t.depth!=null&&(e.depth*=t.depth),n.items||e.items++,n.width||e.width++,n.height||e.height++,n.depth||e.depth++,e.items-=r.items*2,e.width-=r.width*2,e.height-=r.height*2,e.depth-=r.depth*2):(t.items!=null&&(e.items=t.items),t.width!=null&&(e.width=t.width),t.height!=null&&(e.height=t.height),t.depth!=null&&(e.depth=t.depth)),e.items=Math.max(0,Math.floor(e.items)),e.width=Math.max(0,Math.floor(e.width)),e.height=Math.max(0,Math.floor(e.height)),e.depth=Math.max(0,Math.floor(e.depth)),e}make(){let e,t;if(super.make(),this.bind.source==null)return;const{size:n,items:r,width:s,height:a,depth:o}=this.props,l=n===this.node.attributes["lerp.size"].enum.relative;this.resampled={},r!=null&&(this.resampled.items=r),s!=null&&(this.resampled.width=s),a!=null&&(this.resampled.height=a),o!=null&&(this.resampled.depth=o),this.centered={},this.centered.items=this.props.centeredW,this.centered.width=this.props.centeredX,this.centered.height=this.props.centeredY,this.centered.depth=this.props.centeredZ,this.padding={},this.padding.items=this.props.paddingW,this.padding.width=this.props.paddingX,this.padding.height=this.props.paddingY,this.padding.depth=this.props.paddingZ;const c=this._shaders.shader(),u=this._shaders.shader(),h={resampleFactor:this._attributes.make(this._types.vec4(0,0,0,0)),resampleBias:this._attributes.make(this._types.vec4(0,0,0,0))};this.resampleFactor=h.resampleFactor,this.resampleBias=h.resampleBias;const f=r!=null||s!=null||a!=null||o!=null;c.pipe("resample.padding",h);const d=[];let g=!1;const v=["width","height","depth","items"];for(e=0;e<v.length;e++){t=v[e];const x=this.centered[t];g||(g=x),d[e]=x?"0.5":"0.0"}let A;g&&f&&(A=`vec4(${d})`,c.pipe(Wl(4,"+",A)),u.pipe(Wl(4,"+",A))),f?(c.pipe("resample.relative",h),u.pipe("resample.relative",h)):(c.pipe(gh("vec4")),u.pipe(gh("vec4"))),g&&f&&(c.pipe(Wl(4,"-",A)),u.pipe(Wl(4,"-",A)));let _=this.bind.source.sourceShader(this._shaders.shader());const y=["width","height","depth","items"];for(e=0;e<y.length;e++){t=y[e];const x=`lerp.${t}`;this.props[t]!=null&&(_=this._shaders.shader().require(_),_.pipe(x,h))}return c.pipe(_),this.operator=c,this.indexer=u,this.relativeSize=l}unmake(){return super.unmake(),this.operator=null}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions(),t=this.getActiveDimensions(),n=f=>{const d=this.centered[f],g=this.padding[f];return t[f]+=g*2,[d?e[f]/Math.max(1,t[f]):Math.max(1,e[f]-1)/Math.max(1,t[f]-1),g]},[r,s]=Array.from(n("width")),[a,o]=Array.from(n("height")),[l,c]=Array.from(n("depth")),[u,h]=Array.from(n("items"));return this.resampleFactor.value.set(r,a,l,u),this.resampleBias.value.set(s,o,c,h),super.resize()}change(e,t,n){if(t.operator||t.lerp||t.sampler)return this.rebuild()}}Uz.initClass();let Vz=class extends go{static initClass(){this.traits=["node","bind","active","operator","source","index","texture","memo"]}sourceShader(e){return this.memo.shaderAbsolute(e,1)}make(){if(super.make(),this.bind.source==null)return;this._helpers.active.make(),this._listen("root","root.update",()=>{if(this.isActive)return this.update()});const{minFilter:e,magFilter:t,type:n}=this.props,r=this.bind.source.getDimensions(),{items:s,width:a,height:o,depth:l}=r;this.memo=this._renderables.make("memo",{items:s,width:a,height:o,depth:l,minFilter:e,magFilter:t,type:n});const c=this._shaders.shader();return this.bind.source.sourceShader(c),this.compose=this._renderables.make("memoScreen",{map:c,items:s,width:a,height:o,depth:l}),this.memo.adopt(this.compose),this.objects=[this.compose],this.renders=this.compose.renders}unmake(){this._helpers.active.unmake(),this.bind.source!=null&&(this.memo.unadopt(this.compose),this.memo.dispose(),this.memo=this.compose=null,super.unmake())}update(){return this.memo!=null?this.memo.render():void 0}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions(),{width:t,height:n,depth:r}=e;return this.compose.cover(t,n,r),super.resize()}change(e,t,n){if(t.texture||t.operator)return this.rebuild()}};Vz.initClass();let Hz=class extends Os{static initClass(){this.traits=["node","bind","operator","readback","entity","active"],this.finals={channels:4}}init(){return this.emitter=this.root=null,this.active={}}make(){if(super.make(),this._compute("readback.data",()=>this.readback!=null?this.readback.data:void 0),this._compute("readback.items",()=>this.readback!=null?this.readback.items:void 0),this._compute("readback.width",()=>this.readback!=null?this.readback.width:void 0),this._compute("readback.height",()=>this.readback!=null?this.readback.height:void 0),this._compute("readback.depth",()=>this.readback!=null?this.readback.depth:void 0),this._helpers.bind.make([{to:"operator.source",trait:"source"}]),this.bind.source==null)return;const{type:e,channels:t,expr:n}=this.props;this.root=this._inherit("root"),this._listen("root","root.update",this.update);const{items:r,width:s,height:a,depth:o}=this.bind.source.getDimensions(),l=this.bind.source.sourceShader(this._shaders.shader());this.readback=this._renderables.make("readback",{map:l,items:r,width:s,height:a,depth:o,channels:t,type:e}),n!=null&&this.readback.setCallback(n),this._helpers.active.make()}unmake(){return this.readback!=null&&(this.readback.dispose(),this.readback=null,this.root=null,this.emitter=null,this.active={}),this._helpers.active.unmake(),this._helpers.bind.unmake()}update(){this.readback!=null&&this.isActive&&(this.readback.update(this.root!=null?this.root.getCamera():void 0),this.readback.post(),this.props.expr!=null&&this.readback.iterate())}resize(){let e,t;if(this.readback==null)return;const{items:n,width:r,height:s,depth:a}=this.bind.source.getActiveDimensions();return this.readback.setActive(n,r,s,a),this.strideI=e=n,this.strideJ=t=e*r,this.strideK=t*s}change(e,t,n){if(e["readback.type"])return this.rebuild();if(e["readback.expr"]&&this.readback)return this.readback.setCallback(this.props.expr)}};Hz.initClass();class $z extends go{static initClass(){this.traits=["node","bind","operator","source","index","repeat"]}indexShader(e){return e.pipe(this.operator),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator),super.sourceShader(e)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){const t=this.resample;return{items:t.items*e.items,width:t.width*e.width,height:t.height*e.height,depth:t.depth*e.depth}}make(){if(super.make(),this.bind.source==null)return;this.resample={};const e={repeatModulus:this._attributes.make(this._types.vec4())};this.repeatModulus=e.repeatModulus;const t=this._shaders.shader();return t.pipe("repeat.position",e),this.operator=t}unmake(){return super.unmake()}resize(){if(this.bind.source!=null){const e=this.bind.source.getActiveDimensions();this.repeatModulus.value.set(e.width,e.height,e.depth,e.items)}return super.resize()}change(e,t,n){if(t.operator||t.repeat)return this.rebuild();if(n)return["items","width","height","depth"].map(r=>this.resample[r]=this.props[r])}}$z.initClass();class Gz extends go{static initClass(){this.traits=["node","bind","operator","source","index","reverse"]}getDimensions(){return this.bind.source.getDimensions()}getActiveDimensions(){return this.bind.source.getActiveDimensions()}getFutureDimensions(){return this.bind.source.getFutureDimensions()}getIndexDimensions(){return this.bind.source.getIndexDimensions()}sourceShader(e){return e.pipe("reverse.position",this.uniforms),this.bind.source.sourceShader(e)}_resolveScale(e,t){return this.props[e]?-1:1}_resolveOffset(e,t){const n=this.props[e],r=t[e];return n?r-1:0}make(){if(super.make(),this.bind.source!=null)return this.uniforms={reverseScale:this._attributes.make(this._types.vec4()),reverseOffset:this._attributes.make(this._types.vec4())}}unmake(){return super.unmake()}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions();return this.uniforms.reverseScale.value.set(this._resolveScale("width",e),this._resolveScale("height",e),this._resolveScale("depth",e),this._resolveScale("items",e)),this.uniforms.reverseOffset.value.set(this._resolveOffset("width",e),this._resolveOffset("height",e),this._resolveOffset("depth",e),this._resolveOffset("items",e)),super.resize()}change(e,t,n){if(t.operator)return this.rebuild();if(t.reverse)return this.resize()}}Gz.initClass();class Qz extends go{static initClass(){this.traits=["node","bind","operator","source","index","swizzle"]}sourceShader(e){return e=super.sourceShader(e),this.swizzler&&e.pipe(this.swizzler),e}make(){if(super.make(),this.bind.source==null)return;const{order:e}=this.props;if(e.join()!=="1234")return this.swizzler=fl(e,4)}unmake(){return super.unmake(),this.swizzler=null}change(e,t,n){if(t.swizzle||t.operator)return this.rebuild()}}Qz.initClass();class qz extends go{static initClass(){this.traits=["node","bind","operator","source","index","spread"]}sourceShader(e){return e.pipe(this.operator)}make(){if(super.make(),this.bind.source==null)return;const e={spreadMatrix:this._attributes.make(this._types.mat4()),spreadOffset:this._attributes.make(this._types.vec4())};this.spreadMatrix=e.spreadMatrix,this.spreadOffset=e.spreadOffset;const t=this._shaders.shader();return t.require(this.bind.source.sourceShader(this._shaders.shader())),t.pipe("spread.position",e),this.operator=t}unmake(){return super.unmake()}resize(){return this.update(),super.resize()}update(){let e,t,n,r;const s=this.bind.source.getFutureDimensions(),o=this.spreadMatrix.value.elements,l=["width","height","depth","items"],c=["alignWidth","alignHeight","alignDepth","alignItems"],{unit:u}=this.props,h=this.node.attributes["spread.unit"].enum,f=(()=>{switch(u){case h.relative:return(d,g,v,A)=>o[g*4+v]=A/Math.max(1,s[d]-1);case h.absolute:return(d,g,v,A)=>o[g*4+v]=A}})();return(()=>{const d=[];for(t=0;t<l.length;t++){let g;e=l[t];const v=this.props[e],A=this.props[c[t]];v!=null?g=-((s[e]!=null?s[e]:1)-1)*(.5-A*.5):g=0,this.spreadOffset.value.setComponent(t,g),d.push((()=>{const _=[];for(n=0;n<=3;n++){let y;r=(y=v!=null?v.getComponent(n):void 0)!=null?y:0,_.push(o[t*4+n]=f(e,t,n,r))}return _})())}return d})()}change(e,t,n){if(t.operator)return this.rebuild();if(t.spread)return this.update()}}qz.initClass();class jz extends go{static initClass(){this.traits=["node","bind","operator","source","index","split"]}indexShader(e){return e.pipe(this.operator),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator),super.sourceShader(e)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){let t;const{order:n}=this,{axis:r}=this,{overlap:s}=this,{length:a}=this,{stride:o}=this,l=["width","height","depth","items"],c=n.map(g=>l[g-1]),u=n.indexOf(r);let h=(()=>{const g=[];for(t of Array.from(c))g.push(e[t]);return g})();const f=Math.floor((h[u]-s)/o);h.splice(u,1,a,f),h=h.slice(0,4);const d={};for(let g=0;g<c.length;g++)t=c[g],d[t]=h[g];return d}make(){let e;if(super.make(),this.bind.source==null)return;const{order:t}=this.props;let{axis:n}=this.props,{overlap:r}=this.props;const{length:s}=this.props,a=t.join("");n==null&&(n=t[0]);const o=a.indexOf(n),l=a[o]+((e=a[o+1])!=null?e:0),c=a.replace(l[1],"").replace(l[0],"0")+"0";r=Math.min(s-1,r);const u=s-r,h={splitStride:this._attributes.make(this._types.number(u))},f=this._shaders.shader();return f.require(fl(l,2)),f.require(fl(c,4)),f.require(_I(o)),f.pipe("split.position",h),f.pipe(lC(t)),this.operator=f,this.order=t,this.axis=n,this.overlap=r,this.length=s,this.stride=u}unmake(){return super.unmake()}change(e,t,n){if(e["split.axis"]||e["split.order"]||t.operator)return this.rebuild()}}jz.initClass();class Wz extends go{static initClass(){this.traits=["node","bind","operator","source","index","slice"]}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}sourceShader(e){return e.pipe("slice.position",this.uniforms),this.bind.source.sourceShader(e)}_resolve(e,t){const n=this.props[e],r=t[e];if(n==null)return[0,r];const s=function(l,c){return l<0?c+l:l},a=s(Math.round(n.x),r);let o=s(Math.round(n.y),r);return o=Math.max(a,o),[a,o-a]}_resample(e){return e.width=this._resolve("width",e)[1],e.height=this._resolve("height",e)[1],e.depth=this._resolve("depth",e)[1],e.items=this._resolve("items",e)[1],e}make(){if(super.make(),this.bind.source!=null)return this.uniforms={sliceOffset:this._attributes.make(this._types.vec4())}}unmake(){return super.unmake()}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions();return this.uniforms.sliceOffset.value.set(this._resolve("width",e)[0],this._resolve("height",e)[0],this._resolve("depth",e)[0],this._resolve("items",e)[0]),super.resize()}change(e,t,n){if(t.operator)return this.rebuild();if(t.slice)return this.resize()}}Wz.initClass();class Yz extends go{static initClass(){this.traits=["node","bind","operator","source","index","subdivide"]}indexShader(e){return e.pipe(this.indexer),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){const t=this.resampled;return e.items--,e.width--,e.height--,e.depth--,t.items!=null&&(e.items*=t.items),t.width!=null&&(e.width*=t.width),t.height!=null&&(e.height*=t.height),t.depth!=null&&(e.depth*=t.depth),e.items++,e.width++,e.height++,e.depth++,e}make(){if(super.make(),this.bind.source==null)return;let{lerp:e}=this.props;const{items:t,width:n,height:r,depth:s}=this.props;this.resampled={},t!=null&&(this.resampled.items=t),n!=null&&(this.resampled.width=n),r!=null&&(this.resampled.height=r),s!=null&&(this.resampled.depth=s);const a=this._shaders.shader(),o=this._shaders.shader(),l={resampleFactor:this._attributes.make(this._types.vec4(0,0,0,0)),subdivideBevel:this.node.attributes["subdivide.bevel"]};this.resampleFactor=l.resampleFactor,this.resampleBias=l.resampleBias,t!=null||n!=null||r!=null||s!=null?(a.pipe("resample.relative",l),o.pipe("resample.relative",l)):(a.pipe(gh("vec4")),o.pipe(gh("vec4")));let u=this.bind.source.sourceShader(this._shaders.shader());e=e?".lerp":"";const h=["width","height","depth","items"];for(let f=0;f<h.length;f++){const d=h[f],g=`subdivide.${d}${e}`;this.props[d]!=null&&(u=this._shaders.shader().require(u),u.pipe(g,l))}return a.pipe(u),this.operator=a,this.indexer=o}unmake(){return super.unmake(),this.operator=null}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions(),t=this.getActiveDimensions(),n=l=>Math.max(1,e[l]-1)/Math.max(1,t[l]-1),r=n("width"),s=n("height"),a=n("depth"),o=n("items");return this.resampleFactor.value.set(r,s,a,o),super.resize()}change(e,t,n){if(t.operator||t.subdivide)return this.rebuild()}}Yz.initClass();const tR={1:"width",2:"height",3:"depth",4:"items"};class Xz extends go{static initClass(){this.traits=["node","bind","operator","source","index","transpose"]}indexShader(e){return this.swizzler&&e.pipe(this.swizzler),super.indexShader(e)}sourceShader(e){return this.swizzler&&e.pipe(this.swizzler),super.sourceShader(e)}getDimensions(){return this._remap(this.transpose,this.bind.source.getDimensions())}getActiveDimensions(){return this._remap(this.transpose,this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._remap(this.transpose,this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._remap(this.transpose,this.bind.source.getIndexDimensions())}_remap(e,t){const n={};for(let r=0;r<=3;r++){const s=tR[r+1],a=tR[e[r]];n[s]=t[a]!=null?t[a]:1}return n}make(){if(super.make(),this.bind.source==null)return;const{order:e}=this.props;return e.join()!=="1234"&&(this.swizzler=lC(e)),this.transpose=e,this.trigger({type:"source.rebuild"})}unmake(){return super.unmake(),this.swizzler=null}change(e,t,n){if(t.transpose||t.operator)return this.rebuild()}}Xz.initClass();class DI extends wl{static initClass(){this.traits=["node","transition","transform","mask","visible","active"]}init(){return this.animate=null,this.uniforms=null,this.state={isVisible:!0,isActive:!0,enter:1,exit:1},this.latched=null,this.locked=null}make(){this.uniforms={transitionFrom:this._attributes.make(this._types.vec4()),transitionTo:this._attributes.make(this._types.vec4()),transitionActive:this._attributes.make(this._types.bool()),transitionScale:this._attributes.make(this._types.vec4()),transitionBias:this._attributes.make(this._types.vec4()),transitionEnter:this._attributes.make(this._types.number()),transitionExit:this._attributes.make(this._types.number()),transitionSkew:this._attributes.make(this._types.number())};const e=this._inherit("slide"),t=this._inherit("visible"),n=this._inherit("active");return this._listen(e,"transition.latch",r=>this.latch(r.step)),this._listen(e,"transition.release",()=>this.release()),this._listen(t,"visible.change",()=>this.update(this.state.isVisible=t.isVisible)),this._listen(n,"active.change",()=>this.update(this.state.isActive=n.isActive)),this.animate=this._animator.make(this._types.vec2(1,1),{step:r=>(this.state.enter=r.x,this.state.exit=r.y,this.update()),complete:r=>this.complete(r)}),this.move=this.props.from!=null||this.props.to!=null}unmake(){return this.animate.dispose()}latch(e){let t;if(this.locked=null,this.latched=t={isVisible:this.state.isVisible,isActive:this.state.isActive,step:e},!this.isVisible){const r=t.step>=0,[s,a]=Array.from(r?[0,1]:[1,0]);return this.animate.set(s,a)}}release(){const{latched:e}=this,{state:t}=this;if(this.latched=null,e.isVisible!==t.isVisible){const n=e.step>=0,r=t.isVisible,[s,a]=Array.from(r?[1,1]:n?[1,0]:[0,1]);let{duration:o,durationEnter:l,durationExit:c}=this.props;l==null&&(l=o),c==null&&(c=o),o=r*l+!r*c;let{delay:u,delayEnter:h,delayExit:f}=this.props;h==null&&(h=u),f==null&&(f=u),u=r*h+!r*f,this.animate.immediate({x:s,y:a},{duration:o,delay:u,ease:"linear"}),this.locked={isVisible:!0,isActive:e.isActive||t.isActive}}return this.update()}complete(e){if(e)return this.locked=null,this.update()}update(){if(this.latched!=null)return;let{enter:e,exit:t}=this.props;e==null&&({enter:e}=this.state),t==null&&({exit:t}=this.state);const n=e*t;let r=n>0;const s=n<1;this.uniforms.transitionEnter.value=e,this.uniforms.transitionExit.value=t,this.uniforms.transitionActive.value=s,r&&(r=!!this.state.isVisible),this.locked!=null&&(r=this.locked.isVisible),this.isVisible!==r&&(this.isVisible=r,this.trigger({type:"visible.change"}));const a=!!(this.state.isActive||this.locked!=null&&this.locked.isActive);if(this.isActive!==a)return this.isActive=a,this.trigger({type:"active.change"})}change(e,t,n){if((e["transition.enter"]||e["transition.exit"]||n)&&this.update(),e["transition.stagger"]||n){const{stagger:r}=this.props,s=r.x<0,a=r.y<0,o=r.z<0,l=r.w<0,c=Math.abs(r.x),u=Math.abs(r.y),h=Math.abs(r.z),f=Math.abs(r.w);return this.uniforms.transitionSkew.value=c+u+h+f,this.uniforms.transitionScale.value.set((1-s*2)*c,(1-a*2)*u,(1-o*2)*h,(1-l*2)*f),this.uniforms.transitionBias.value.set(s*c,a*u,o*h,l*f)}}}DI.initClass();let Kz=class extends DI{static initClass(){this.traits=["node","transition","vertex","move","visible","active"]}make(){super.make();const e={moveFrom:this.node.attributes["move.from"],moveTo:this.node.attributes["move.to"]};for(const t in e){const n=e[t];this.uniforms[t]=n}}vertex(e,t){let n;return t===this.props.pass&&e.pipe("move.position",this.uniforms),(n=Xje(this._inherit("vertex"),r=>r.vertex(e,t)))!=null?n:e}};Kz.initClass();function Xje(i,e){return typeof i<"u"&&i!==null?e(i):void 0}function AC(i,e,t){return Math.max(e,Math.min(t,i))}function D1(i){return .5-.5*Math.cos(AC(i,0,1)*Math.PI)}function LI(i){return+(i>=.5)}function OI(i){return+(i>=1)}const Kje=Object.freeze(Object.defineProperty({__proto__:null,binary:LI,clamp:AC,cosine:D1,hold:OI},Symbol.toStringTag,{value:"Module"})),q_=function(i){const e={};for(const t in i){const n=i[t];n instanceof Array?e[t]=n.slice():n!=null&&typeof n=="object"?e[t]=q_(n):e[t]=n}return e};class NI extends Os{static initClass(){this.traits=["node","track","seek","bind"]}init(){return this.handlers={},this.script=null,this.values=null,this.playhead=0,this.velocity=null,this.section=null,this.expr=null}make(){let e;this._helpers.bind.make([{to:"track.target",trait:"node",callback:null}]);const{script:t}=this.props,{node:n}=this.bind.target;return this.targetNode=n,[this.script,this.values,this.start,this.end]=Array.from(e=this._process(n,t)),e}unmake(){return this.unbindExpr(),this._helpers.bind.unmake(),this.script=this.values=this.start=this.end=this.section=this.expr=null,this.playhead=0}bindExpr(e){this.unbindExpr(),this.expr=e,this.targetNode.bind(e,!0);const{clock:t}=this.targetNode,n=this;return this._attributes.bind(this.measure=function(){let r=null;return()=>{const{step:s}=t.getTime();return r!=null&&(n.velocity=(n.playhead-r)/s),r=n.playhead}}())}unbindExpr(){return this.expr!=null&&this.targetNode.unbind(this.expr,!0),this.measure!=null&&this._attributes.unbind(this.measure),this.expr=this.measure=null}_process(e,t){let n,r,s,a,o,l,c;if(t instanceof Array){o={};for(let v=0;v<t.length;v++)l=t[v],o[v]=l;t=o}o=[];for(r in t)l=t[r],l==null&&(l=[]),l instanceof Array?l={key:+r,props:l[0]!=null?q_(l[0]):{},bind:l[1]!=null?q_(l[1]):{}}:(l.key==null&&!l.props&&!l.bind?l={props:q_(l)}:l=q_(l),l.key=l.key!=null?+l.key:+r,l.props==null&&(l.props={}),l.bind==null&&(l.bind={})),o.push(l);if(t=o,!t.length)return[[],{},0,0];t.sort((v,A)=>v.key-A.key);const u=t[0].key,h=t[t.length-1].key;for(r in t)l=t[r],s!=null&&(s.next=l),s=l;s.next=s,t=o;const f={},d={};for(r in t){l=t[r];for(n in l.props)c=l.props[n],f[n]=!0}for(r in t){l=t[r];for(n in l.bind)c=l.bind[n],f[n]=!0}for(n in f)f[n]=e.get(n);try{for(n in f)d[n]=[e.attribute(n).T.make(),e.attribute(n).T.make(),e.attribute(n).T.make()]}catch{throw console.warn(this.node.toMarkup()),a=`${this.node.toString()} - Target ${e} has no \`${n}\` property`,new Error(a)}const g=[];for(l of Array.from(t)){for(n in f)if(c=f[n],c=e.validate(n,l.props[n]!=null?l.props[n]:c),f[n]=l.props[n]=c,l.bind[n]!=null&&typeof l.bind[n]!="function")throw console.warn(this.node.toMarkup()),a=`${this.node.toString()} - Bind expression \`${l.bind[n]}\` on property \`${n}\` is not a function`,new Error(a);g.push(l)}return[g,d,u,h]}update(){let{playhead:e}=this;const{script:t}=this,{ease:n,seek:r}=this.props,s=this.targetNode;if(r!=null&&(e=r),t.length){let a;const o=function(){let x=t[0];for(let C=0;C<t.length;C++){const S=t[C];if(S.key>e)break;x=S}return x};let{section:l}=this;if((!l||e<l.key||e>l.next.key)&&(l=o()),l===this.section)return;this.section=l;const c=l,u=l.next,h=c.key,f=u.key,d=(()=>{switch(n){case"linear":case 0:return AC;case"cosine":case 1:return D1;case"binary":case 2:return LI;case"hold":case 3:return OI;default:return D1}})(),{clock:g}=s,v=x=>{if(this.velocity==null)return this.playhead;const C=g.getTime();return this.playhead+this.velocity*(x-C.time)},A=function(){const x=1/Math.max(1e-4,f-h);return C=>d((v(C)-h)*x,0,1)}(),_=x=>{const C=c.bind[x],S=u.bind[x],I=c.props[x],P=u.props[x],B=function(){throw console.warn(s.toMarkup()),new Error(`${this.node.toString()} - Invalid expression result on track \`${x}\``)},M=s.attribute(x),D=this.values[x],F=this._animator;return C&&S?((z,U,$)=>function(O,ie){let W,J;return z[0]=W=M.T.validate(C(O,ie),z[0],B),z[1]=J=M.T.validate(S(O,ie),z[1],B),z[2]=F.lerp(M.T,W,J,A(O),z[2])})(D):C?((z,U,$)=>function(O,ie){let W;return z[0]=W=M.T.validate(C(O,ie),z[0],B),z[1]=F.lerp(M.T,W,P,A(O),z[1])})(D):S?((z,U,$)=>function(O,ie){let W;return z[0]=W=M.T.validate(S(O,ie),z[0],B),z[1]=F.lerp(M.T,I,W,A(O),z[1])})(D):((z,U,$)=>(O,ie)=>z[0]=F.lerp(M.T,I,P,A(O),z[0]))(D)},y={};for(a in c.bind)y[a]==null&&(y[a]=_(a));for(a in u.bind)y[a]==null&&(y[a]=_(a));for(a in c.props)y[a]==null&&(y[a]=_(a));for(a in u.props)y[a]==null&&(y[a]=_(a));return this.bindExpr(y)}}change(e,t,n){if(e["track.target"]||e["track.script"]||e["track.mode"])return this.rebuild();if(e["seek.seek"]||n)return this.update()}}NI.initClass();let Jz=class extends NI{static initClass(){this.traits=["node","track","trigger","play","bind"]}init(){return super.init(),this.skew=null,this.start=null}reset(e){return e==null&&(e=!0),this.skew=e?0:null,this.start=null}make(){super.make(),this._listen("slide","slide.step",t=>{const{trigger:n}=this.props;if(n!=null&&t.index===n)return this.reset();if(n!=null&&t.index===0)return this.reset(!1)}),(!this.props.trigger||this._inherit("slide")==null)&&this.reset();const e=this._inherit("clock");return this._listen(e,"clock.tick",()=>{const{from:t,to:n,speed:r,pace:s,delay:a,realtime:o}=this.props,l=e.getTime();if(this.skew!=null){const c=o?l.time:l.clock,u=o?l.delta:l.step,h=r/s;this.start==null&&(this.start=c),this.skew+=u*(h-1);let f=Math.max(0,c-this.start+this.skew-a*h);this.props.loop&&(f=f%(n-t)),this.playhead=Math.min(n,t+f)}else this.playhead=0;return this.update()})}update(){return super.update()}change(e,t,n){return e["trigger.trigger"]||e["play.realtime"]?this.rebuild():super.change(e,t,n)}};Jz.initClass();class Zz extends wl{static initClass(){this.traits=["node","present"]}init(){}make(){return this.nodes=[],this.steps=[],this.length=0,this.last=[],this.index=0,this.dirty=[],this._listen("root","root.update",this.update),this._compute("present.length",()=>this.length)}adopt(e){const{node:t}=e;return this.nodes.indexOf(e)<0&&this.nodes.push(t),this.dirty.push(e)}unadopt(e){return this.nodes=this.nodes.filter(t=>t!==e),this.dirty.push(e)}update(){if(this.dirty.length){for(const e of Array.from(this.dirty))this.slideReset(e);return[this.steps,this.indices]=Array.from(this.process(this.nodes)),this.length=this.steps.length,this.index=null,this.go(this.props.index),this.dirty=[]}}slideLatch(e,t,n){return e.slideLatch(t,n)}slideStep(e,t,n){return e.slideStep(this.mapIndex(e,t),n)}slideRelease(e,t){return e.slideRelease()}slideReset(e){return e.slideReset()}mapIndex(e,t){return t-this.indices[e.node._id]}process(e){const t=d=>Array.from(d).map(g=>r(g).filter(s)),r=(d=>g=>(()=>{let v,A;const _=[];for(;g&&([g,v]=Array.from(A=[d(g),g]),A);)_.push(v);return _})())(function(d){return d.parent.traits.hash.present?null:d.parent}),s=d=>e.indexOf(d)>=0,a=d=>d.sort(function(g,v){const A=g.length,_=v.length;let y=Math.min(A,_);for(let x=1,C=y,S=1<=C;S?x<=C:x>=C;S?x++:x--){const I=g[A-x],P=v[_-x],B=I.props.order,M=P.props.order;if(B!=null||M!=null){if(B!=null&&M!=null&&(y=B-M)!==0)return y;if(B!=null)return-1;if(M!=null)return 1}if(P.order!==I.order)return P.order-I.order}return y=A-_,y!==0?y:0}),o=function(d){const g=[],v=[];for(const A of Array.from(d))(A[0].props.steps!=null?g:v).push(A);return[g,v]},l=function(d){let g;const[v,A]=Array.from(d),_=100,y={};let x=[];const C=function(I,P){let B;const{props:M}=B=I[0],D=I[1],F=D!=null?y[D._id]:0,z=P;let U=M.from!=null?F+M.from:z-M.early,$=M.to!=null?F+M.to:z+M.steps+M.late;U=Math.max(0,U),$=Math.min(_,$),y[B._id]==null&&(y[B._id]=U);for(let O=U,ie=$,W=U<=ie;W?O<ie:O>ie;W?O++:O--)x[O]=(x[O]!=null?x[O]:x[O]=[]).concat(I);return M.steps};let S=0;for(g of Array.from(v))S+=C(g,S);for(g of Array.from(A))C(g,0);return x=(()=>{const I=[];for(g of Array.from(x))I.push(u(c(g)));return I})(),[x,y]},c=function(d){return d?(()=>{const g=[];for(let v=0;v<d.length;v++){const A=d[v];d.indexOf(A)===v&&g.push(A)}return g})():[]},u=d=>d.sort((g,v)=>g.order-v.order),h=t(e),f=a(h);return l(o(f))}go(e){let t,n;e=Math.max(0,Math.min(this.length+1,+e||0));const r=(t=this.steps[e-1])!=null?t:[],s=this.props.directed?e-this.index:1;this.index=e;const a=(()=>{const h=[];for(n of Array.from(r))this.last.indexOf(n)<0&&h.push(n);return h})(),o=(()=>{const h=[];for(n of Array.from(this.last))r.indexOf(n)<0&&h.push(n);return h})(),l=(()=>{const h=[];for(n of Array.from(r))a.indexOf(n)<0&&o.indexOf(n)<0&&h.push(n);return h})(),c=h=>h.sort((f,d)=>f.order-d.order),u=h=>h.sort((f,d)=>d.order-f.order);for(n of Array.from(c(a)))this.slideLatch(n.controller,!0,s);for(n of Array.from(c(l)))this.slideLatch(n.controller,null,s);for(n of Array.from(c(o)))this.slideLatch(n.controller,!1,s);for(n of Array.from(a))this.slideStep(n.controller,e,s);for(n of Array.from(l))this.slideStep(n.controller,e,s);for(n of Array.from(o))this.slideStep(n.controller,e,s);for(n of Array.from(u(a)))this.slideRelease(n.controller);for(n of Array.from(u(l)))this.slideRelease(n.controller);for(n of Array.from(u(o)))this.slideRelease(n.controller);this.last=r}change(e,t,n){if(e["present.index"]||n)return this.go(this.props.index)}}Zz.initClass();class eU extends DI{static initClass(){this.traits=["node","transition","mask","visible","active"]}mask(e){let t,n;return e?(n=this._shaders.shader(),n.pipe(gh("vec4")),n.fan(),n.pipe(e,this.uniforms),n.next(),n.pipe("reveal.mask",this.uniforms),n.end(),n.pipe("float combine(float a, float b) { return min(a, b); }")):(n=this._shaders.shader(),n.pipe("reveal.mask",this.uniforms)),(t=Jje(this._inherit("mask"),r=>r.mask(n)))!=null?t:n}}eU.initClass();function Jje(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class tU extends wl{static initClass(){this.traits=["node","slide","visible","active"]}make(){if(this._helpers.visible.make(),this._helpers.active.make(),!this._inherit("present"))throw new Error(`${this.node.toString()} must be placed inside <present></present>`);return this._inherit("present").adopt(this)}unmake(){return this._helpers.visible.unmake(),this._helpers.active.unmake(),this._inherit("present").unadopt(this)}change(e,t,n){if(e["slide.early"]||e["slide.late"]||e["slide.steps"]||e["slide.from"]||e["slide.to"])return this.rebuild()}slideLatch(e,t){if(this.trigger({type:"transition.latch",step:t}),e!=null)return this._instant(e)}slideStep(e,t){return this.trigger({type:"slide.step",index:e,step:t})}slideRelease(){return this.trigger({type:"transition.release"})}slideReset(){return this._instant(!1),this.trigger({type:"slide.reset"})}_instant(e){return this.setVisible(e),this.setActive(e)}}tU.initClass();class nU extends NI{static initClass(){this.traits=["node","track","step","trigger","bind"]}make(){super.make();const e=this._inherit("clock");return this.actualIndex==null&&(this.actualIndex=null),this.animateIndex=this._animator.make(this._types.number(0),{clock:e,realtime:this.props.realtime,step:t=>this.actualIndex=t}),this.lastIndex==null&&(this.lastIndex=null),this.animateStep=this._animator.make(this._types.number(0),{clock:e,realtime:this.props.realtime,step:t=>(this.playhead=t,this.update())}),this.stops=this.props.stops!=null?this.props.stops:Zje(0,this.script.length,!1),this._listen("slide","slide.reset",t=>this.lastIndex=null),this._listen("slide","slide.step",t=>{let n,{duration:r}=this.props;const{delay:s,pace:a,speed:o,playback:l,rewind:c,skip:u,trigger:h}=this.props,f=Math.max(0,Math.min(this.stops.length-1,t.index-h)),d=this.playhead,g=this.stops[f];if(this.lastIndex==null&&h){this.lastIndex=f,this.animateStep.set(g),this.animateIndex.set(f);return}let v=(n=this.actualIndex!=null?this.actualIndex:this.lastIndex)!=null?n:0;const A=f-v,_=this.stops.slice(Math.min(v,f),Math.max(v,f));let y=0;v=_.shift();for(const C of Array.from(_))v===C&&y++,v=C;this.lastIndex=f;let x=o*(t.step>=0?1:c);if(x*=u?Math.max(1,Math.abs(A)-y):1,r+=Math.abs(g-d)*a/x,d!==g)return this.animateIndex.immediate(f,{delay:s,duration:r,ease:l}),this.animateStep.immediate(g,{delay:s,duration:r,ease:l})})}made(){return this.update()}unmake(){return this.animateIndex.dispose(),this.animateStep.dispose(),this.animateIndex=this.animateStep=null,super.unmake()}change(e,t,n){return e["step.stops"]||e["step.realtime"]?this.rebuild():super.change(e,t,n)}}nU.initClass();function Zje(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let a=i;r?a<s:a>s;r?a++:a--)n.push(a);return n}class iU extends wl{static initClass(){this.traits=["node","root","scene","vertex","texture","rtt","source","index","image"],this.defaults={minFilter:"linear",magFilter:"linear",type:"unsignedByte"}}init(){return this.rtt=this.scene=this.camera=this.width=this.height=this.history=this.rootSize=this.size=null}indexShader(e){return e}imageShader(e){return this.rtt.shaderRelative(e)}sourceShader(e){return this.rtt.shaderAbsolute(e,this.history)}getDimensions(){return{items:1,width:this.width,height:this.height,depth:this.history}}getActiveDimensions(){return this.getDimensions()}make(){let e;if(this.parentRoot=this._inherit("root"),this.rootSize=this.parentRoot.getSize(),this._listen(this.parentRoot,"root.pre",this.pre),this._listen(this.parentRoot,"root.update",this.update),this._listen(this.parentRoot,"root.render",this.render),this._listen(this.parentRoot,"root.post",this.post),this._listen(this.parentRoot,"root.camera",this.setCamera),this._listen(this.parentRoot,"root.resize",function(g){return this.resize(g.size)}),this.rootSize==null)return;const{minFilter:t,magFilter:n,type:r}=this.props,{width:s,height:a,history:o,size:l}=this.props,c=l===this.node.attributes["rtt.size"].enum.relative,u=c?this.rootSize.renderWidth:1,h=c?this.rootSize.renderHeight:1;this.width=Math.round(s!=null?s*u:this.rootSize.renderWidth),this.height=Math.round(a!=null?a*h:this.rootSize.renderHeight),this.history=o,this.aspect=e=this.width/this.height,this.scene==null&&(this.scene=this._renderables.make("scene")),this.rtt=this._renderables.make("renderToTexture",{scene:this.scene,camera:this._context.defaultCamera,width:this.width,height:this.height,frames:this.history,minFilter:t,magFilter:n,type:r}),e=s||a?e:this.rootSize.aspect;const f=s??this.rootSize.viewWidth,d=a??this.rootSize.viewHeight;return this.size={renderWidth:this.width,renderHeight:this.height,aspect:e,viewWidth:f,viewHeight:d,pixelRatio:this.height/d}}made(){if(this.trigger({type:"source.rebuild"}),this.size)return this.trigger({type:"root.resize",size:this.size})}unmake(e){if(this.rtt!=null)return this.rtt.dispose(),e||this.scene.dispose(),this.rtt=this.width=this.height=this.history=null}change(e,t,n){if(t.texture||e["rtt.width"]||e["rtt.height"])return this.rebuild();if(e["root.camera"]||n)return this._unattach(),this._attach(this.props.camera,"camera",this.setCamera,this,this,!0),this.setCamera()}adopt(e){return Array.from(e.renders).map(t=>this.scene.add(t))}unadopt(e){return Array.from(e.renders).map(t=>this.scene.remove(t))}resize(e){let t,n;this.rootSize=e,{width:n,height:t,size:e}=this.props;const r=e===this.node.attributes["rtt.size"].enum.relative;if(!this.rtt||n==null||t==null||r)return this.rebuild()}select(e){return this._root.node.model.select(e,[this.node])}watch(e,t){return this._root.node.model.watch(e,t)}unwatch(e){return this._root.node.model.unwatch(e)}pre(e){return this.trigger(e)}update(e){let t;return(t=this.getOwnCamera())!=null&&(t.aspect=this.aspect||1,t.updateProjectionMatrix()),this.trigger(e)}render(e){return this.trigger(e),this.rtt!=null?this.rtt.render(this.getCamera()):void 0}post(e){return this.trigger(e)}setCamera(){const e=eWe(this.select(this.props.camera)[0],t=>t.controller);if(this.camera!==e)return this.camera=e,this.rtt.camera=this.getCamera(),this.trigger({type:"root.camera"});if(!this.camera)return this.trigger({type:"root.camera"})}getOwnCamera(){return this.camera!=null?this.camera.getCamera():void 0}getCamera(){let e;return(e=this.getOwnCamera())!=null?e:this._inherit("root").getCamera()}vertex(e,t){return t===2?e.pipe("view.position"):t===3?e.pipe("root.position"):e}}iU.initClass();function eWe(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class rU extends Os{static initClass(){this.traits=["node","bind","object","visible","operator","style","compose"],this.defaults={zWrite:!1,zTest:!1,color:"#ffffff"}}init(){return this.compose=null}resize(){if(!this.compose||!this.bind.source)return;const e=this.bind.source.getActiveDimensions(),{width:t}=e,{height:n}=e;return this.remapUVScale.set(t,n)}make(){if(this._helpers.bind.make([{to:"operator.source",trait:"source"}]),this.bind.source==null)return;const e={remapUVScale:this._attributes.make(this._types.vec2())};this.remapUVScale=e.remapUVScale.value;let t=this._shaders.shader();const{alpha:n}=this.props;this.bind.source.is("image")?(t.pipe("screen.pass.uv",e),t=this.bind.source.imageShader(t)):(t.pipe("screen.map.xy",e),t=this.bind.source.sourceShader(t)),n||t.pipe("color.opaque");const r=this._helpers.style.uniforms();return this.compose=this._renderables.make("screen",{map:t,uniforms:r,linear:!0}),this._helpers.visible.make(),this._helpers.object.make([this.compose])}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake()}change(e,t,n){if(e["operator.source"]||e["compose.alpha"])return this.rebuild()}}rU.initClass();class op extends X0{static initClass(){this.traits=["node","object","visible","view","vertex"]}make(){return this._helpers.visible.make()}unmake(){return this._helpers.visible.unmake()}axis(e){return this.props.range[e-1]}}op.initClass();class sU extends op{static initClass(){this.traits=["node","object","visible","view","view3","vertex"]}make(){super.make(),this.uniforms={viewMatrix:this._attributes.make(this._types.mat4())},this.viewMatrix=this.uniforms.viewMatrix.value,this.composer=fv()}unmake(){super.unmake(),delete this.viewMatrix,delete this.objectMatrix,delete this.uniforms}change(e,t,n){if(!t.view&&!t.view3&&!n)return;const r=this.props.position,s=this.props.scale,a=this.props.quaternion,o=this.props.rotation,l=this.props.range,c=this.props.eulerOrder,{x:u}=l[0],h=l[1].x,f=l[2].x,d=l[0].y-u||1,g=l[1].y-h||1,v=l[2].y-f||1;this.viewMatrix.set(2/d,0,0,-(2*u+d)/d,0,2/g,0,-(2*h+g)/g,0,0,2/v,-(2*f+v)/v,0,0,0,1);const A=this.composer(r,o,a,s,null,c);this.viewMatrix.multiplyMatrices(A,this.viewMatrix),e["view.range"]&&this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("cartesian.position",this.uniforms),super.vertex(e,t)}}sU.initClass();class aU extends op{static initClass(){this.traits=["node","object","visible","view","view4","vertex"]}make(){return super.make(),this.uniforms={basisOffset:this._attributes.make(this._types.vec4()),basisScale:this._attributes.make(this._types.vec4())},this.basisScale=this.uniforms.basisScale.value,this.basisOffset=this.uniforms.basisOffset.value}unmake(){return super.unmake(),delete this.basisScale,delete this.basisOffset,delete this.uniforms}change(e,t,n){if(!t.view&&!t.view4&&!n)return;const r=this.props.position,s=this.props.scale,a=this.props.range,{x:o}=a[0],l=a[1].x,c=a[2].x,u=a[3].x,h=a[0].y-o||1,f=a[1].y-l||1,d=a[2].y-c||1,g=a[3].y-u||1,v=function(A,_){return A.x*=_.x,A.y*=_.y,A.z*=_.z,A.w*=_.w};if(this.basisScale.set(2/h,2/f,2/d,2/g),this.basisOffset.set(-(2*o+h)/h,-(2*l+f)/f,-(2*c+d)/d,-(2*u+g)/g),v(this.basisScale,s),v(this.basisOffset,s),this.basisOffset.add(r),e["view.range"])return this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("cartesian4.position",this.uniforms),super.vertex(e,t)}}aU.initClass();class oU extends op{static initClass(){this.traits=["node","object","visible","view","view3","polar","vertex"]}make(){super.make();const{types:e}=this._attributes;return this.uniforms={polarBend:this.node.attributes["polar.bend"],polarHelix:this.node.attributes["polar.helix"],polarFocus:this._attributes.make(e.number()),polarAspect:this._attributes.make(e.number()),viewMatrix:this._attributes.make(e.mat4())},this.viewMatrix=this.uniforms.viewMatrix.value,this.composer=fv(),this.aspect=1}unmake(){return super.unmake(),delete this.viewMatrix,delete this.objectMatrix,delete this.aspect,delete this.uniforms}change(e,t,n){let r,s,a;if(!t.view&&!t.view3&&!t.polar&&!n)return;this.helix=this.props.helix,this.bend=s=this.props.bend,this.focus=a=s>0?1/s-1:0;const o=this.props.position,l=this.props.scale,c=this.props.quaternion,u=this.props.rotation,h=this.props.range,f=this.props.eulerOrder,{x:d}=h[0];let g=h[1].x;const v=h[2].x,A=h[0].y-d||1;let _=h[1].y-g||1;const y=h[2].y-v||1,x=l.x,C=l.y,S=A>0?1:-1;[g,_]=Array.from($g(g,_,s));const I=Math.abs(_),P=A+(I*S-A)*s,B=P/x,M=_/C;this.aspect=r=Math.abs(B/M),this.uniforms.polarFocus.value=a,this.uniforms.polarAspect.value=r,this.viewMatrix.set(2/P,0,0,-(2*d+A)/A,0,2/_,0,-(2*g+_)/_,0,0,2/y,-(2*v+y)/y,0,0,0,1);const D=this.composer(o,u,c,l,null,f);this.viewMatrix.multiplyMatrices(D,this.viewMatrix),(e["view.range"]||t.polar)&&this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("polar.position",this.uniforms),super.vertex(e,t)}axis(e){const t=this.props.range[e-1];let n=t.x,r=t.y;return e===2&&this.bend>0&&(r=Math.max(Math.abs(r),Math.abs(n)),n=Math.max(-this.focus/this.aspect,n)),new Et(n,r)}}oU.initClass();class lU extends op{static initClass(){this.traits=["node","object","visible","view","view3","spherical","vertex"]}make(){return super.make(),this.uniforms={sphericalBend:this.node.attributes["spherical.bend"],sphericalFocus:this._attributes.make(this._types.number()),sphericalAspectX:this._attributes.make(this._types.number()),sphericalAspectY:this._attributes.make(this._types.number()),sphericalScaleY:this._attributes.make(this._types.number()),viewMatrix:this._attributes.make(this._types.mat4())},this.viewMatrix=this.uniforms.viewMatrix.value,this.composer=fv(),this.aspectX=1,this.aspectY=1}unmake(){return super.unmake(),delete this.viewMatrix,delete this.objectMatrix,delete this.aspectX,delete this.aspectY,delete this.uniforms}change(e,t,n){let r,s,a,o,l;if(!t.view&&!t.view3&&!t.spherical&&!n)return;this.bend=a=this.props.bend,this.focus=o=a>0?1/a-1:0;const c=this.props.position,u=this.props.scale,h=this.props.quaternion,f=this.props.rotation,d=this.props.range,g=this.props.eulerOrder,{x:v}=d[0];let A=d[1].x,_=d[2].x;const y=d[0].y-v||1;let x=d[1].y-A||1,C=d[2].y-_||1;const S=u.x,I=u.y,P=u.z;[A,x]=Array.from($g(A,x,a)),[_,C]=Array.from($g(_,C,a));const B=y>0?1:-1,M=x>0?1:-1,D=Math.abs(C),F=y+(D*B-y)*a,z=x+(D*M-x)*a,U=F/S,$=z/I,O=C/P;this.aspectX=r=Math.abs(U/O),this.aspectY=s=Math.abs($/O/r);const ie=x/y*S/I*2;this.scaleY=l=Math.min(s/a,1+(ie-1)*a),this.uniforms.sphericalBend.value=a,this.uniforms.sphericalFocus.value=o,this.uniforms.sphericalAspectX.value=r,this.uniforms.sphericalAspectY.value=s,this.uniforms.sphericalScaleY.value=l,this.viewMatrix.set(2/F,0,0,-(2*v+y)/y,0,2/z,0,-(2*A+x)/x,0,0,2/C,-(2*_+C)/C,0,0,0,1);const W=this.composer(c,f,h,u,null,g);if(this.viewMatrix.multiplyMatrices(W,this.viewMatrix),e["view.range"]||t.spherical)return this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("spherical.position",this.uniforms),super.vertex(e,t)}axis(e){const t=this.props.range[e-1];let n=t.x,r=t.y;return e===3&&this.bend>0&&(r=Math.max(Math.abs(r),Math.abs(n)),n=Math.max(-this.focus/this.aspectX+.001,n)),new Et(n,r)}}lU.initClass();class cU extends op{static initClass(){this.traits=["node","object","visible","view","view3","stereographic","vertex"]}make(){return super.make(),this.uniforms={stereoBend:this.node.attributes["stereographic.bend"],viewMatrix:this._attributes.make(this._types.mat4())},this.viewMatrix=this.uniforms.viewMatrix.value,this.composer=fv()}unmake(){return super.unmake(),delete this.viewMatrix,delete this.rotationMatrix,delete this.uniforms}change(e,t,n){let r;if(!t.view&&!t.view3&&!t.stereographic&&!n)return;this.bend=r=this.props.bend;const s=this.props.position,a=this.props.scale,o=this.props.quaternion,l=this.props.rotation,c=this.props.range,u=this.props.eulerOrder,{x:h}=c[0],f=c[1].x;let d=c[2].x;const g=c[0].y-h||1,v=c[1].y-f||1;let A=c[2].y-d||1;[d,A]=Array.from($g(d,A,r,1)),this.uniforms.stereoBend.value=r,this.viewMatrix.set(2/g,0,0,-(2*h+g)/g,0,2/v,0,-(2*f+v)/v,0,0,2/A,-(2*d+A)/A,0,0,0,1);const _=this.composer(s,l,o,a,null,u);if(this.viewMatrix.multiplyMatrices(_,this.viewMatrix),e["view.range"]||t.stereographic)return this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("stereographic.position",this.uniforms),super.vertex(e,t)}}cU.initClass();class uU extends op{static initClass(){this.traits=["node","object","visible","view","view4","stereographic","vertex"]}make(){super.make(),this.uniforms={basisOffset:this._attributes.make(this._types.vec4()),basisScale:this._attributes.make(this._types.vec4()),stereoBend:this.node.attributes["stereographic.bend"]},this.basisScale=this.uniforms.basisScale.value,this.basisOffset=this.uniforms.basisOffset.value}unmake(){super.unmake(),delete this.basisScale,delete this.basisOffset,delete this.uniforms}change(e,t,n){let r;if(!t.view&&!t.view4&&!t.stereographic&&!n)return;this.bend=r=this.props.bend;const s=this.props.position,a=this.props.scale,o=this.props.range,{x:l}=o[0],c=o[1].x,u=o[2].x;let h=o[3].x;const f=o[0].y-l||1,d=o[1].y-c||1,g=o[2].y-u||1;let v=o[3].y-h||1;const A=function(_,y){_.x*=y.x,_.y*=y.y,_.z*=y.z,_.w*=y.w};[h,v]=Array.from($g(h,v,r,1)),this.basisScale.set(2/f,2/d,2/g,2/v),this.basisOffset.set(-(2*l+f)/f,-(2*c+d)/d,-(2*u+g)/g,-(2*h+v)/v),A(this.basisScale,a),A(this.basisOffset,a),this.basisOffset.add(s),(e["view.range"]||t.stereographic)&&this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("stereographic4.position",this.uniforms),super.vertex(e,t)}}uU.initClass();class hU extends Os{static initClass(){this.traits=["node","bind","shader"],this.freeform=!0}init(){return this.shader=null}make(){const{language:e,code:t}=this.props;if(e!=="glsl")throw new Error("GLSL required");this._helpers.bind.make([{to:"shader.sources",trait:"source",multiple:!0}]);const n=this._shaders.fetch(t),r=this._types,s={},a=o=>{let l;switch(o){case"i":return r.int();case"f":return r.number();case"v2":return r.vec2();case"v3":return r.vec3();case"v4":return r.vec4();case"m3":return r.mat3();case"m4":return r.mat4();case"t":return r.object();default:return l=o.split(""),l.pop()==="v"?r.array(a(l.join(""))):null}};for(const o of Array.from(n._signatures.uniform)){let l;(l=a(o.type))&&(s[o.name]=l)}return this.reconfigure({props:{uniform:s}})}made(){return this.trigger({type:"source.rebuild"})}unmake(){return this.shader=null}change(e,t,n){if(e["shader.uniforms"]||e["shader.code"]||e["shader.language"])return this.rebuild()}shaderBind(e){let t,n,r;e==null&&(e={});const{code:s,indices:a,channels:o}=this.props;for(t in this.node.attributes)r=this.node.attributes[t],r.type!=null&&r.short!=null&&r.ns==="uniform"&&e[r.short]==null&&(e[r.short]=r);if((n=this.props.uniforms)!=null)for(t in n)r=n[t],e[t]=r;const l=this._shaders.shader();if(this.bind.sources!=null)for(const c of Array.from(this.bind.sources))l.callback(),a!=4&&l.pipe(L0(a,4)),l.pipe(c.sourceShader(this._shaders.shader())),o!=4&&l.pipe(Wd(4,o)),l.join();return l.pipe(s,e)}}hU.initClass();const tWe={axis:pz,face:mz,grid:gz,line:vz,point:_z,strip:Az,surface:bz,ticks:yz,vector:wz,view:op,cartesian:sU,cartesian4:aU,polar:oU,spherical:lU,stereographic:cU,stereographic4:uU,transform:kz,transform4:Bz,vertex:Rz,fragment:Dz,layer:Lz,mask:Oz,array:AI,interval:LF,matrix:PI,area:uz,voxel:wA,volume:hz,scale:fz,latch:cz,html:xz,dom:Cz,text:Ez,format:Sz,label:Mz,retext:Tz,clamp:Nz,grow:Fz,join:zz,lerp:Uz,memo:Vz,readback:Hz,resample:RI,repeat:$z,reverse:Gz,swizzle:Qz,spread:qz,split:jz,slice:Wz,subdivide:Yz,transpose:Xz,group:wF,inherit:xF,root:CF,unit:EF,shader:hU,camera:MF,rtt:iU,compose:rU,clock:Iz,now:Pz,move:Kz,play:Jz,present:Zz,reveal:eU,slide:tU,step:nU},nWe={array(i,e,t=null){const n=i.lerp?function(s,a,o,l){const c=Math.min(s.length,a.length);for(let u=0,h=c,f=0<=h;f?u<h:u>h;f?u++:u--)o[u]=i.lerp(s[u],a[u],o[u],l);return o}:void 0,r=i.op?function(s,a,o,l){const c=Math.min(s.length,a.length);for(let u=0,h=c,f=0<=h;f?u<h:u>h;f?u++:u--)o[u]=i.op(s[u],a[u],o[u],l);return o}:void 0;return t!=null&&!(t instanceof Array)&&(t=[t]),{uniform(){if(i.uniform)return i.uniform()+"v"},make(){return t!=null?t.slice():e?rWe(0,e,!1).map(s=>i.make()):[]},validate(s,a,o){s instanceof Array||(s=[s]);const l=a.length=e||s.length;for(let c=0,u=l,h=0<=u;h?c<u:c>u;h?c++:c--){const f=s[c]!=null?s[c]:i.make();a[c]=i.validate(f,a[c],o)}return a},equals(s,a){const o=s.length,l=a.length;if(o!==l)return!1;const c=Math.min(o,l);for(let u=0,h=c,f=0<=h;f?u<h:u>h;f?u++:u--)if(!(typeof i.equals=="function"&&i.equals(s[u],a[u])))return!1;return!0},lerp:n,op:r,clone(s){return Array.from(s).map(a=>i.clone(a))}}},letters(i,e,t=null){if(t!=null){t===""+t&&(t=t.split(""));for(let r=0;r<t.length;r++){const s=t[r];t[r]=i.validate(s,s)}}const n=Qi.array(i,e,t);return{uniform(){return n.uniform()},make(){return n.make()},validate(r,s,a){return r===""+r&&(r=r.split("")),n.validate(r,s,a)},equals(r,s){return n.equals(r,s)},clone:n.clone}},nullable(i,e){e==null&&(e=!1);let t=e?i.make():null;const n=i.emitter?function(a,o){return o==null?a:a==null?o:i.emitter(a,o)}:void 0,r=i.lerp?function(a,o,l,c){return a===null||o===null?c<.5?a:o:(l==null&&(l=i.make()),t=i.lerp(a,o,l,c),l)}:void 0,s=i.op?function(a,o,l,c){return a===null||o===null?null:(l==null&&(l=i.make()),t=i.op(a,o,l,c),t)}:void 0;return{make(){return t},validate(a,o,l){return a===null?a:(o===null&&(o=i.make()),i.validate(a,o,l))},uniform(){return typeof i.uniform=="function"?i.uniform():void 0},equals(a,o){let l;const c=a===null,u=o===null;return c&&u?!0:c^u?!1:(l=typeof i.equals=="function"?i.equals(a,o):void 0)!=null?l:a===o},lerp:r,op:s,emitter:n}},enum(i,e,t){let n;e==null&&(e=[]),t==null&&(t={});let r=0;const s={};for(n of Array.from(e))n!==+n&&t[n]==null&&(t[n]=r++);for(n of Array.from(e))n===+n&&(s[n]=n);for(n in t)r=t[n],s[r]=!0;return s[i]==null&&(i=t[i]),{enum(){return t},make(){return i},validate(a,o,l){const c=s[a]?a:t[a];return c??l()}}},enumber(i,e,t){t==null&&(t={});const n=Qi.enum(i,e,t);return{enum:n.enum,uniform(){return"f"},make(){let r;return(r=n.make())!=null?r:+i},validate(r,s,a){return r===+r?r:n.validate(r,s,a)},op(r,s,a,o){return o(r,s)}}},select(i){return i==null&&(i="<"),{make(){return i},validate(e,t,n){return typeof e=="string"||typeof e=="object"?e:n()}}},bool(i){return i=!!i,{uniform(){return"f"},make(){return i},validate(e,t,n){return!!e}}},int(i){return i==null&&(i=0),i=+Math.round(i),{uniform(){return"i"},make(){return i},validate(e,t,n){let r;return e!==(r=+e)?n():Math.round(r)||0},op(e,t,n,r){return r(e,t)}}},round(i){return i==null&&(i=0),i=+Math.round(i),{uniform(){return"f"},make(){return i},validate(e,t,n){let r;return e!==(r=+e)?n():Math.round(r)||0},op(e,t,n,r){return r(e,t)}}},number(i){return i==null&&(i=0),{uniform(){return"f"},make(){return+i},validate(e,t,n){let r;return e!==(r=+e)?n():r||0},op(e,t,n,r){return r(e,t)}}},positive(i,e){return e==null&&(e=!1),{uniform:i.uniform,make:i.make,validate(t,n,r){return t=i.validate(t,n,r),t<0||e&&t<=0?r():t},op(t,n,r,s){return s(t,n)}}},string(i){return i==null&&(i=""),{make(){return""+i},validate(e,t,n){let r;return e!==(r=""+e)?n():r}}},func(){return{make(){return function(){}},validate(i,e,t){return typeof i=="function"?i:t()}}},emitter(){return{make(){return i=>i(1,1,1,1)},validate(i,e,t){return typeof i=="function"?i:t()},emitter(i,e){return IF(i,e)}}},object(i){return{make(){return i??{}},validate(e,t,n){return typeof e=="object"?e:n()},clone(e){return JSON.parse(JSON.stringify(e))}}},timestamp(i=null){return typeof i=="string"&&(i=Date.parse(i)),{uniform(){return"f"},make(){return i??+new Date},validate(e,t,n){return e=Date.parse(e),e!==+e?n():e},op(e,t,n,r){return r(e,t)}}},vec2(i,e){i==null&&(i=0),e==null&&(e=0);const t=[i,e];return{uniform(){return"v2"},make(){return new Et(i,e)},validate(n,r,s){if(n===+n&&(n=[n]),n!=null&&n.isVector2)r.copy(n);else if(n instanceof Array)n=n.concat(t.slice(n.length)),r.set.apply(r,n);else if(n!=null){const a=n.x!=null?n.x:i,o=n.y!=null?n.y:e;r.set(a,o)}else return s();return r},equals(n,r){return n.x===r.x&&n.y===r.y},op(n,r,s,a){return s.x=a(n.x,r.x),s.y=a(n.y,r.y),s}}},ivec2(i,e){i==null&&(i=0),e==null&&(e=0);const t=Qi.vec2(i,e),{validate:n}=t;return t.validate=function(r,s,a){return n(r,s,a),s.x=Math.round(s.x),s.y=Math.round(s.y),s},t},vec3(i,e,t){i==null&&(i=0),e==null&&(e=0),t==null&&(t=0);const n=[i,e,t];return{uniform(){return"v3"},make(){return new fe(i,e,t)},validate(r,s,a){if(r===+r&&(r=[r]),r!=null&&r.isVector3)s.copy(r);else if(r instanceof Array)r=r.concat(n.slice(r.length)),s.set.apply(s,r);else if(r!=null){const o=r.x!=null?r.x:i,l=r.y!=null?r.y:e,c=r.z!=null?r.z:t;s.set(o,l,c)}else return a();return s},equals(r,s){return r.x===s.x&&r.y===s.y&&r.z===s.z},op(r,s,a,o){return a.x=o(r.x,s.x),a.y=o(r.y,s.y),a.z=o(r.z,s.z),a}}},ivec3(i,e,t){i==null&&(i=0),e==null&&(e=0),t==null&&(t=0);const n=Qi.vec3(i,e,t),{validate:r}=n;return n.validate=function(s,a,o){return r(s,a,o),a.x=Math.round(a.x),a.y=Math.round(a.y),a.z=Math.round(a.z),a},n},vec4(i,e,t,n){i==null&&(i=0),e==null&&(e=0),t==null&&(t=0),n==null&&(n=0);const r=[i,e,t,n];return{uniform(){return"v4"},make(){return new Hi(i,e,t,n)},validate(s,a,o){if(s===+s&&(s=[s]),s!=null&&s.isVector4)a.copy(s);else if(s instanceof Array)s=s.concat(r.slice(s.length)),a.set.apply(a,s);else if(s!=null){const l=s.x!=null?s.x:i,c=s.y!=null?s.y:e,u=s.z!=null?s.z:t,h=s.w!=null?s.w:n;a.set(l,c,u,h)}else return o();return a},equals(s,a){return s.x===a.x&&s.y===a.y&&s.z===a.z&&s.w===a.w},op(s,a,o,l){return o.x=l(s.x,a.x),o.y=l(s.y,a.y),o.z=l(s.z,a.z),o.w=l(s.w,a.w),o}}},ivec4(i,e,t,n){i==null&&(i=0),e==null&&(e=0),t==null&&(t=0),n==null&&(n=0);const r=Qi.vec4(i,e,t,n),{validate:s}=r;return r.validate=function(a,o,l){return s(a,o,l),o.x=Math.round(o.x),o.y=Math.round(o.y),o.z=Math.round(o.z),o.w=Math.round(o.w),o},r},mat3(i,e,t,n,r,s,a,o,l){i==null&&(i=1),e==null&&(e=0),t==null&&(t=0),n==null&&(n=0),r==null&&(r=1),s==null&&(s=0),a==null&&(a=0),o==null&&(o=0),l==null&&(l=1);const c=[i,e,t,n,r,s,a,o,l];return{uniform(){return"m4"},make(){const u=new Ei;return u.set(i,e,t,n,r,s,a,o,l),u},validate(u,h,f){if(u!=null&&u.isMatrix3)h.copy(u);else if(u instanceof Array)u=u.concat(c.slice(u.length)),h.set.apply(h,u);else return f();return h}}},mat4(i,e,t,n,r,s,a,o,l,c,u,h,f,d,g,v){i==null&&(i=1),e==null&&(e=0),t==null&&(t=0),n==null&&(n=0),r==null&&(r=0),s==null&&(s=1),a==null&&(a=0),o==null&&(o=0),l==null&&(l=0),c==null&&(c=0),u==null&&(u=1),h==null&&(h=0),f==null&&(f=0),d==null&&(d=0),g==null&&(g=0),v==null&&(v=1);const A=[i,e,t,n,r,s,a,o,l,c,u,h,f,d,g,v];return{uniform(){return"m4"},make(){const _=new Wn;return _.set(i,e,t,n,r,s,a,o,l,c,u,h,f,d,g,v),_},validate(_,y,x){if(_!=null&&_.isMatrix4)y.copy(_);else if(_ instanceof Array)_=_.concat(A.slice(_.length)),y.set.apply(y,_);else return x();return y}}},quat(i,e,t,n){i==null&&(i=0),e==null&&(e=0),t==null&&(t=0),n==null&&(n=1);const r=Qi.vec4(i,e,t,n);return{uniform(){return"v4"},make(){return new ca},validate(s,a,o){return s!=null&&s.isQuaternion?a.copy(s):a=r.validate(s,a,o),a.normalize(),a},equals(s,a){return s.x===a.x&&s.y===a.y&&s.z===a.z&&s.w===a.w},op(s,a,o,l){return o.x=l(s.x,a.x),o.y=l(s.y,a.y),o.z=l(s.z,a.z),o.w=l(s.w,a.w),o.normalize(),o},lerp(s,a,o,l){return o.slerpQuaternions?o.slerpQuaternions(s,a,l):ca.slerp(s,a,o,l),o}}},color(i,e,t){i==null&&(i=.5),e==null&&(e=.5),t==null&&(t=.5);const n=[i,e,t];return{uniform(){return"c"},make(){return new qt(i,e,t)},validate(r,s,a){if(r===""+r?r=new qt().setStyle(r):r===+r&&(r=new qt(r)),r!=null&&r.isColor)s.copy(r);else if(r instanceof Array)r=r.concat(n.slice(r.length)),s.setRGB.apply(s,r);else if(r!=null){const o=r.r!=null?r.r:i,l=r.g!=null?r.g:e,c=r.b!=null?r.b:t;s.set(o,l,c)}else return a();return s},equals(r,s){return r.r===s.r&&r.g===s.g&&r.b===s.b},op(r,s,a,o){return a.r=o(r.r,s.r),a.g=o(r.g,s.g),a.b=o(r.b,s.b),a}}},axis(i,e){let t;i==null&&(i=1),e==null&&(e=!1);const n={x:1,y:2,z:3,w:4,W:1,H:2,D:3,I:4,zero:0,null:0,width:1,height:2,depth:3,items:4},r=e?[0,1,2,3,4]:[1,2,3,4];return(t=n[i])!=null&&(i=t),{make(){return i},validate(s,a,o){let l;return(t=n[s])!=null&&(s=t),s=(l=Math.round(s))!=null?l:0,Array.from(r).includes(s)?s:o()}}},transpose(i){i==null&&(i=[1,2,3,4]);const e=Qi.letters(Qi.axis(null,!1),0,i),t=Qi.letters(Qi.axis(null,!1),4,i);return{make(){return t.make()},validate(n,r,s){let a=[1,2,3,4];if(e.validate(n,a,s),a.length<4){const l=[1,2,3,4].filter(c=>a.indexOf(c)===-1);a=a.concat(l)}return Array.from(a).map((l,c)=>a.indexOf(l)===c).indexOf(!1)<0?t.validate(a,r,s):s()},equals:t.equals,clone:t.clone}},swizzle(i,e=null){i==null&&(i=[1,2,3,4]),e==null&&(e=i.length),i=i.slice(0,e);const t=Qi.letters(Qi.axis(null,!1),0,i),n=Qi.letters(Qi.axis(null,!0),e,i);return{make(){return n.make()},validate(r,s,a){let o=i.slice();return t.validate(r,o,a),o.length<e&&(o=o.concat([0,0,0,0]).slice(0,e)),n.validate(o,s,a)},equals:n.equals,clone:n.clone}},classes(){const i=Qi.array(Qi.string());return{make(){return i.make()},validate(e,t,n){return e===""+e&&(e=e.split(" ")),e=e.filter(r=>!!r.length),i.validate(e,t,n)},equals:i.equals,clone:i.clone}},blending(i){i==null&&(i="normal");const e=["no","normal","add","subtract","multiply","custom"];return Qi.enum(i,e)},filter(i){i==null&&(i="nearest");const e={nearest:ji,nearestMipMapNearest:r5,nearestMipMapLinear:s5,linear:Dr,linearMipMapNearest:a5,linearMipmapLinear:o5};return Qi.enum(i,[],e)},type(i){i==null&&(i="unsignedByte");const e={unsignedByte:ns,byte:sA,short:aA,unsignedShort:V0,int:sv,unsignedInt:Ic,float:is};return Qi.enum(i,[],e)},scale(i){i==null&&(i="linear");const e=["linear","log"];return Qi.enum(i,e)},mapping(i){i==null&&(i="relative");const e=["relative","absolute"];return Qi.enum(i,e)},indexing(i){i==null&&(i="original");const e=["original","final"];return Qi.enum(i,e)},shape(i){i==null&&(i="circle");const e=["circle","square","diamond","up","down","left","right"];return Qi.enum(i,e)},join(i){i==null&&(i="miter");const e=["miter","round","bevel"];return Qi.enum(i,e)},stroke(i){i==null&&(i="solid");const e=["solid","dotted","dashed"];return Qi.enum(i,e)},vertexPass(i){i==null&&(i="view");const e=["data","view","world","eye"];return Qi.enum(i,e)},fragmentPass(i){i==null&&(i="light");const e=["color","light","rgba"];return Qi.enum(i,e)},ease(i){i==null&&(i="linear");const e=["linear","cosine","binary","hold"];return Qi.enum(i,e)},fit(i){i==null&&(i="contain");const e=["x","y","contain","cover"];return Qi.enum(i,e)},anchor(i){i==null&&(i="middle");const e={first:1,middle:0,last:-1};return Qi.enumber(i,[],e)},transitionState(i){i==null&&(i="enter");const e={enter:-1,visible:0,exit:1};return Qi.enumber(i,[],e)},font(i){i==null&&(i="sans-serif");const e=dz;i instanceof Array||(i=e(i));const t=Qi.array(Qi.string(),0,i);return{make(){return t.make()},validate(n,r,s){try{n instanceof Array||(n=e(n))}catch{return s()}return n=n.filter(a=>!!a.length),t.validate(n,r,s)},equals:t.equals,clone:t.clone}},data(i){return{make(){return[]},validate(e,t,n){return e instanceof Array||(e!=null?e.length:void 0)!=null?e:n()},emitter(e,t){return PF(e,t)}}}},iWe=function(i){for(const e in i){const t=i[e];i[e]=(n=>function(){const r=n.apply(n,arguments);return r.validate==null&&(r.validate=s=>s!=null),r.equals==null&&(r.equals=(s,a)=>s===a),r.clone==null&&(r.clone=function(s){let a;return(a=sWe(s,"clone",o=>o.clone()))!=null?a:s}),r})(t)}return i},Qi=iWe(nWe);function rWe(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let a=i;r?a<s:a>s;r?a++:a--)n.push(a);return n}function sWe(i,e,t){if(typeof i<"u"&&i!==null&&typeof i[e]=="function")return t(i,e)}const Q=Qi,aWe={node:{id:Q.nullable(Q.string()),classes:Q.classes()},entity:{active:Q.bool(!0)},object:{visible:Q.bool(!0)},latch:{data:Q.nullable(Q.object()),deep:Q.nullable(Q.bool(!0))},unit:{scale:Q.nullable(Q.number()),fov:Q.nullable(Q.number()),focus:Q.nullable(Q.number(1),!0)},span:{range:Q.nullable(Q.vec2(-1,1))},view:{range:Q.array(Q.vec2(-1,1),4)},view3:{position:Q.vec3(),quaternion:Q.quat(),rotation:Q.vec3(),scale:Q.vec3(1,1,1),eulerOrder:Q.swizzle("xyz")},view4:{position:Q.vec4(),scale:Q.vec4(1,1,1,1)},layer:{depth:Q.number(1),fit:Q.fit("y")},vertex:{pass:Q.vertexPass()},fragment:{pass:Q.fragmentPass(),gamma:Q.bool(!1)},transform3:{position:Q.vec3(),quaternion:Q.quat(),rotation:Q.vec3(),eulerOrder:Q.swizzle("xyz"),scale:Q.vec3(1,1,1),matrix:Q.mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transform4:{position:Q.vec4(),scale:Q.vec4(1,1,1,1),matrix:Q.mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},camera:{proxy:Q.bool(!1),position:Q.nullable(Q.vec3()),quaternion:Q.nullable(Q.quat()),rotation:Q.nullable(Q.vec3()),lookAt:Q.nullable(Q.vec3()),up:Q.nullable(Q.vec3()),eulerOrder:Q.swizzle("xyz"),fov:Q.nullable(Q.number(1))},polar:{bend:Q.number(1),helix:Q.number(0)},spherical:{bend:Q.number(1)},stereographic:{bend:Q.number(1)},interval:{axis:Q.axis()},area:{axes:Q.swizzle([1,2],2)},volume:{axes:Q.swizzle([1,2,3],3)},origin:{origin:Q.vec4()},scale:{divide:Q.number(10),unit:Q.number(1),base:Q.number(10),mode:Q.scale(),start:Q.bool(!0),end:Q.bool(!0),zero:Q.bool(!0),factor:Q.positive(Q.number(1)),nice:Q.bool(!0)},grid:{lineX:Q.bool(!0),lineY:Q.bool(!0),crossed:Q.bool(!1),closedX:Q.bool(!1),closedY:Q.bool(!1)},axis:{detail:Q.int(1),crossed:Q.bool(!1)},data:{data:Q.nullable(Q.data()),expr:Q.nullable(Q.emitter()),bind:Q.nullable(Q.func()),live:Q.bool(!0)},buffer:{channels:Q.enum(4,[1,2,3,4]),items:Q.int(1),fps:Q.nullable(Q.int(60)),hurry:Q.int(5),limit:Q.int(60),realtime:Q.bool(!1),observe:Q.bool(!1),aligned:Q.bool(!1)},sampler:{centered:Q.bool(!1),padding:Q.number(0)},array:{width:Q.nullable(Q.positive(Q.int(1),!0)),bufferWidth:Q.int(1),history:Q.int(1)},matrix:{width:Q.nullable(Q.positive(Q.int(1),!0)),height:Q.nullable(Q.positive(Q.int(1),!0)),history:Q.int(1),bufferWidth:Q.int(1),bufferHeight:Q.int(1)},voxel:{width:Q.nullable(Q.positive(Q.int(1),!0)),height:Q.nullable(Q.positive(Q.int(1),!0)),depth:Q.nullable(Q.positive(Q.int(1),!0)),bufferWidth:Q.int(1),bufferHeight:Q.int(1),bufferDepth:Q.int(1)},resolve:{expr:Q.nullable(Q.func()),items:Q.int(1)},style:{opacity:Q.positive(Q.number(1)),color:Q.color(),blending:Q.blending(),zWrite:Q.bool(!0),zTest:Q.bool(!0),zIndex:Q.positive(Q.round()),zBias:Q.number(0),zOrder:Q.nullable(Q.int())},geometry:{points:Q.select(),colors:Q.nullable(Q.select())},point:{size:Q.positive(Q.number(4)),sizes:Q.nullable(Q.select()),shape:Q.shape(),optical:Q.bool(!0),fill:Q.bool(!0),depth:Q.number(1)},line:{width:Q.positive(Q.number(2)),depth:Q.positive(Q.number(1)),join:Q.join(),stroke:Q.stroke(),proximity:Q.nullable(Q.number(1/0)),closed:Q.bool(!1)},mesh:{fill:Q.bool(!0),shaded:Q.bool(!1),normals:Q.nullable(Q.select()),map:Q.nullable(Q.select()),lineBias:Q.number(5)},strip:{line:Q.bool(!1)},face:{line:Q.bool(!1)},arrow:{size:Q.number(3),start:Q.bool(!1),end:Q.bool(!1)},ticks:{normal:Q.vec3(0,0,1),size:Q.positive(Q.number(10)),epsilon:Q.positive(Q.number(.001))},attach:{offset:Q.vec2(0,-20),snap:Q.bool(!1),depth:Q.number(0)},format:{digits:Q.nullable(Q.positive(Q.number(3))),data:Q.nullable(Q.data()),expr:Q.nullable(Q.func()),live:Q.bool(!0)},font:{font:Q.font("sans-serif"),style:Q.string(),variant:Q.string(),weight:Q.string(),detail:Q.number(24),sdf:Q.number(5)},label:{text:Q.select(),size:Q.number(16),outline:Q.number(2),expand:Q.number(0),background:Q.color(1,1,1)},overlay:{opacity:Q.number(1),zIndex:Q.positive(Q.round(0))},dom:{points:Q.select(),html:Q.select(),size:Q.number(16),outline:Q.number(2),zoom:Q.number(1),color:Q.nullable(Q.color()),attributes:Q.nullable(Q.object()),pointerEvents:Q.bool(!1)},texture:{minFilter:Q.filter("nearest"),magFilter:Q.filter("nearest"),type:Q.type("float")},shader:{sources:Q.nullable(Q.select()),indices:Q.number(4),channels:Q.number(4),language:Q.string("glsl"),code:Q.string(),uniforms:Q.nullable(Q.object())},include:{shader:Q.select()},operator:{source:Q.select()},spread:{unit:Q.mapping(),items:Q.nullable(Q.vec4()),width:Q.nullable(Q.vec4()),height:Q.nullable(Q.vec4()),depth:Q.nullable(Q.vec4()),alignItems:Q.anchor(),alignWidth:Q.anchor(),alignHeight:Q.anchor(),alignDepth:Q.anchor()},grow:{scale:Q.number(1),items:Q.nullable(Q.anchor()),width:Q.nullable(Q.anchor()),height:Q.nullable(Q.anchor()),depth:Q.nullable(Q.anchor())},split:{order:Q.transpose("wxyz"),axis:Q.nullable(Q.axis()),length:Q.int(1),overlap:Q.int(0)},join:{order:Q.transpose("wxyz"),axis:Q.nullable(Q.axis()),overlap:Q.int(0)},swizzle:{order:Q.swizzle()},transpose:{order:Q.transpose()},repeat:{items:Q.number(1),width:Q.number(1),height:Q.number(1),depth:Q.number(1)},slice:{items:Q.nullable(Q.vec2()),width:Q.nullable(Q.vec2()),height:Q.nullable(Q.vec2()),depth:Q.nullable(Q.vec2())},reverse:{items:Q.bool(!1),width:Q.bool(!1),height:Q.bool(!1),depth:Q.bool(!1)},lerp:{size:Q.mapping("absolute"),items:Q.nullable(Q.number()),width:Q.nullable(Q.number()),height:Q.nullable(Q.number()),depth:Q.nullable(Q.number())},subdivide:{items:Q.nullable(Q.positive(Q.int(),!0)),width:Q.nullable(Q.positive(Q.int(),!0)),height:Q.nullable(Q.positive(Q.int(),!0)),depth:Q.nullable(Q.positive(Q.int(),!0)),bevel:Q.number(1),lerp:Q.bool(!0)},resample:{indices:Q.number(4),channels:Q.number(4),sample:Q.mapping(),size:Q.mapping("absolute"),items:Q.nullable(Q.number()),width:Q.nullable(Q.number()),height:Q.nullable(Q.number()),depth:Q.nullable(Q.number())},readback:{type:Q.type("float"),expr:Q.nullable(Q.func()),data:Q.data(),channels:Q.enum(4,[1,2,3,4]),items:Q.nullable(Q.int()),width:Q.nullable(Q.int()),height:Q.nullable(Q.int()),depth:Q.nullable(Q.int())},root:{speed:Q.number(1),camera:Q.select("[camera]")},inherit:{source:Q.select(),traits:Q.array(Q.string())},rtt:{size:Q.mapping("absolute"),width:Q.nullable(Q.number()),height:Q.nullable(Q.number()),history:Q.int(1)},compose:{alpha:Q.bool(!1)},present:{index:Q.int(1),directed:Q.bool(!0),length:Q.number(0)},slide:{order:Q.nullable(Q.int(0)),steps:Q.number(1),early:Q.int(0),late:Q.int(0),from:Q.nullable(Q.int(0)),to:Q.nullable(Q.int(1))},transition:{stagger:Q.vec4(),enter:Q.nullable(Q.number(1)),exit:Q.nullable(Q.number(1)),delay:Q.number(0),delayEnter:Q.nullable(Q.number(0)),delayExit:Q.nullable(Q.number(0)),duration:Q.number(.3),durationEnter:Q.nullable(Q.number(0)),durationExit:Q.nullable(Q.number(0))},move:{from:Q.vec4(),to:Q.vec4()},seek:{seek:Q.nullable(Q.number(0))},track:{target:Q.select(),script:Q.object({}),ease:Q.ease("cosine")},trigger:{trigger:Q.nullable(Q.int(1),!0)},step:{playback:Q.ease("linear"),stops:Q.nullable(Q.array(Q.number())),delay:Q.number(0),duration:Q.number(.3),pace:Q.number(0),speed:Q.number(1),rewind:Q.number(2),skip:Q.bool(!0),realtime:Q.bool(!1)},play:{delay:Q.number(0),pace:Q.number(1),speed:Q.number(1),from:Q.number(0),to:Q.number(1/0),realtime:Q.bool(!1),loop:Q.bool(!1)},now:{now:Q.nullable(Q.timestamp()),seek:Q.nullable(Q.number(0)),pace:Q.number(1),speed:Q.number(1)}},fU=function(i,e,t,n,r,s,a,o,l,c){let u,h,f;c==null&&(c=!0),t||(t=10),n||(n=1),r||(r=10),s||(s=1);const g=(e-i)/t;if(!c)return u=(()=>{let C,S;const I=[];for(h=0,S=t,C=0<=S;C?h<=S:h>=S;C?h++:h--)I.push(i+h*g);return I})(),a||u.shift(),o||u.pop(),l||(u=u.filter(C=>C!==0)),u;n||(n=1),r||(r=10);const v=n*Math.pow(r,Math.floor(Math.log(g/n)/Math.log(r))),A=r%2===0?[r/2,1,1/2]:r%3===0?[r/3,1,1/3]:[1],_=(()=>{const C=[];for(f of Array.from(A))C.push(v*f);return C})();let y=1/0,x=_.reduce(function(C,S){f=S/g;const I=Math.max(f,1/f);return I<y?(y=I,S):C},v);return x*=s,i=Math.ceil(i/x+ +!a)*x,e=(Math.floor(e/x)-+!o)*x,t=Math.ceil((e-i)/x),u=(()=>{let C,S;const I=[];for(h=0,S=t,C=0<=S;C?h<=S:h>=S;C?h++:h--)I.push(i+h*x);return I})(),l||(u=u.filter(C=>C!==0)),u},dU=function(i,e,t,n,r,s,a,o,l,c){throw new Error("Log ticks not yet implemented.")},oWe=0,lWe=1,pU=function(i,e,t,n,r,s,a,o,l,c,u){switch(i){case oWe:return fU(e,t,n,r,s,a,o,l,c,u);case lWe:return dU()}},cWe=Object.freeze(Object.defineProperty({__proto__:null,linear:fU,log:dU,make:pU},Symbol.toStringTag,{value:"Module"})),uWe={bind:{make(i){this.bind==null&&(this.bind={}),this.bound==null&&(this.bound=[]);for(const e of Array.from(i)){let{callback:t}=e;const{to:n,trait:r,optional:s,unique:a,multiple:o}=e;t==null&&(t=this.rebuild);const l=n.split(/\./g).pop(),c=this._get(n);let u=null;if(c!=null){let h=this,f=!1;for(;!f;){h=u=this._attach(c,r,t,this,h,s,o);const d=a&&(u==null||this.bound.indexOf(u)<0);f=o||s||!a||d}}if(u!=null)if(this.resize!=null&&this._listen(u,"source.resize",this.resize),t&&this._listen(u,"source.rebuild",t),o)for(const h of Array.from(u))this.bound.push(h);else this.bound.push(u);this.bind[l]=u}return null},unmake(){if(this.bind)return delete this.bind,delete this.bound}},span:{make(){return this.spanView=this._inherit("view"),this._listen("view","view.range",()=>this.trigger({type:"span.range"}))},unmake(){return delete this.spanView},get:function(){const i=new Et(-1,1);return function(e,t){let n;const r=this._get(e+"span.range");return r??((n=this.spanView!=null?this.spanView.axis(t):void 0)!=null?n:i)}}()},scale:{divide(i){const e=this._get(i+"scale.divide"),t=this._get(i+"scale.factor");return Math.round(e*2.5/t)},generate(i,e,t,n){const r=this._get(i+"scale.mode"),s=this._get(i+"scale.divide"),a=this._get(i+"scale.unit"),o=this._get(i+"scale.base"),l=this._get(i+"scale.factor"),c=this._get(i+"scale.start"),u=this._get(i+"scale.end"),h=this._get(i+"scale.zero"),f=this._get(i+"scale.nice"),d=pU(r,t,n,s,a,o,l,c,u,h,f);return e.copy(d),d}},style:{uniforms(){return{styleColor:this.node.attributes["style.color"],styleOpacity:this.node.attributes["style.opacity"],styleZBias:this.node.attributes["style.zBias"],styleZIndex:this.node.attributes["style.zIndex"]}}},arrow:{uniforms(){const{start:i}=this.props,{end:e}=this.props,t=this._attributes.make(this._types.number(1.25/(i+e))),n=this._attributes.make(this._types.vec2(+i,+e)),r=this.node.attributes["arrow.size"];return{clipStyle:n,clipRange:r,clipSpace:t,arrowSpace:t,arrowSize:r}}},point:{uniforms(){return{pointSize:this.node.attributes["point.size"],pointDepth:this.node.attributes["point.depth"]}}},line:{uniforms(){return{lineWidth:this.node.attributes["line.width"],lineDepth:this.node.attributes["line.depth"],lineProximity:this.node.attributes["line.proximity"]}}},surface:{uniforms(){return{}}},shade:{pipeline(i){if(!this._inherit("fragment"))return i;i==null&&(i=this._shaders.shader());for(let e=0;e<=2;e++)i=nR(this._inherit("fragment"),t=>t.fragment(i,e));return i.pipe("fragment.map.rgba"),i},normal(i){return i.pipe(fl("xyz")),i},map(i){return i&&(i=this._shaders.shader().pipe("mesh.map.uvwo").pipe(i))}},position:{pipeline(i){if(!this._inherit("vertex"))return i;i==null&&(i=this._shaders.shader());for(let e=0;e<=3;e++)i=nR(this._inherit("vertex"),t=>t.vertex(i,e));return i},swizzle(i,e){if(i)return this._shaders.shader().pipe(fl(e)).pipe(i)},swizzle2(i,e,t){if(i)return this._shaders.shader().split().pipe(fl(e)).next().pipe(fl(t)).join().pipe(i)}},visible:{make(){const i={type:"visible.change"};let e=null;this.setVisible=function(r){return r!=null&&(e=r),t()};const t=()=>{let r;const s=this.isVisible;let a=(r=e??this._get("object.visible"))!=null?r:!0;if(n!=null&&a&&(a=n.isVisible),this.isVisible=a,s!==this.isVisible)return this.trigger(i)},n=this._inherit("visible");return n&&this._listen(n,"visible.change",t),this.is("object")&&this._listen(this.node,"change:object",t),t()},unmake(){return delete this.isVisible}},active:{make(){const i={type:"active.change"};let e=null;this.setActive=function(r){return r!=null&&(e=r),t()};const t=()=>{let r;const s=this.isActive;let a=(r=e??this._get("entity.active"))!=null?r:!0;if(n!=null&&a&&(a=n.isActive),this.isActive=a,s!==this.isActive)return this.trigger(i)},n=this._inherit("active");return n&&this._listen(n,"active.change",t),this.is("entity")&&this._listen(this.node,"change:entity",t),t()},unmake(){return delete this.isActive}},object:{make(i){let e,t;i==null&&(i=[]),this.objects=i,this.renders=this.objects.reduce((u,h)=>u.concat(h.renders),[]);const n=this._inherit("scene");let r=e=t=null;const s=Array.from(this.traits).includes("style");r=1,e=Dd;let a=!0,o=!0;s&&({opacity:r}=this.props,{blending:e}=this.props,{zOrder:t}=this.props,{zWrite:a}=this.props,{zTest:o}=this.props);const l=u=>{const{changed:h}=u;let f=null;if(h["style.opacity"]&&(f=r=this.props.opacity),h["style.blending"]&&(f=e=this.props.blending),h["style.zOrder"]&&(f=t=this.props.zOrder),h["style.zWrite"]&&(f=a=this.props.zWrite),h["style.zTest"]&&(f=o=this.props.zTest),f!=null)return c()},c=()=>{const u=t!=null?-t:this.node.order;return(this.isVisible!=null?this.isVisible:!0)&&r>0?s?(()=>{const f=[];for(const d of Array.from(this.objects))d.show(r<1,e,u),f.push(d.depth(a,o));return f})():(()=>{const f=[];for(const d of Array.from(this.objects))f.push(d.show(!0,e,u));return f})():(()=>{const f=[];for(const d of Array.from(this.objects))f.push(d.hide());return f})()};this._listen(this.node,"change:style",l),this._listen(this.node,"reindex",c),this._listen(this,"visible.change",c);for(const u of Array.from(this.objects))n.adopt(u);return c()},unmake(i){let e;if(i==null&&(i=!0),!this.objects)return;const t=this._inherit("scene");for(e of Array.from(this.objects))t.unadopt(e);if(i)return(()=>{const n=[];for(e of Array.from(this.objects))n.push(e.dispose());return n})()},mask(){let i,e;if(i=this._inherit("mask"))return e=i.mask(e)}},unit:{make(){let i,e,t,n,r,s,a,o,l,c,u,h,f=Math.PI;this.unitUniforms={renderScaleInv:o=this._attributes.make(this._types.number(1)),renderScale:a=this._attributes.make(this._types.number(1)),renderAspect:n=this._attributes.make(this._types.number(1)),renderWidth:l=this._attributes.make(this._types.number(0)),renderHeight:r=this._attributes.make(this._types.number(0)),viewWidth:u=this._attributes.make(this._types.number(0)),viewHeight:c=this._attributes.make(this._types.number(0)),pixelRatio:e=this._attributes.make(this._types.number(1)),pixelUnit:t=this._attributes.make(this._types.number(1)),worldUnit:h=this._attributes.make(this._types.number(1)),focusDepth:i=this._attributes.make(this._types.number(1)),renderOdd:s=this._attributes.make(this._types.vec2())};const d=new fe,g=new fe,v=()=>{let _,y;if((y=A!=null?A.getSize():void 0)==null)return;f=Math.PI;const{scale:x}=this.props,{fov:C}=this.props,S=this.props.focus!=null?this.props.focus:this.inherit("unit").props.focus,I=x===null;let P=1;if(_=A!=null?A.getCamera():void 0){const U=_.projectionMatrix;d.set(0,-.5,1).applyMatrix4(U),g.set(0,.5,1).applyMatrix4(U),d.sub(g),P=d.y}const B=y.renderHeight/y.viewHeight,M=C!=null?P*Math.tan(C*f/360):1,D=I?B:y.renderHeight/x*M,F=y.renderHeight*P/2,z=D/F;return u.value=y.viewWidth,c.value=y.viewHeight,l.value=y.renderWidth,r.value=y.renderHeight,n.value=y.aspect,a.value=F,o.value=1/F,e.value=B,t.value=D,h.value=z,i.value=S,s.value.set(y.renderWidth%2,y.renderHeight%2).multiplyScalar(.5)},A=this.is("root")?this:this._inherit("root");return this._listen(A,"root.update",v),v()},unmake(){return delete this.unitUniforms},get(){const i={};for(const e in this.unitUniforms){const t=this.unitUniforms[e];i[e]=t.value}return i},uniforms(){return this.unitUniforms}}},hWe=function(i,e){const t={};for(const n of Array.from(e)){let r;if(r=uWe[n]){t[n]={};for(const s in r){const a=r[s];t[n][s]=a.bind(i)}}}return t};function nR(i,e){return typeof i<"u"&&i!==null?e(i):void 0}const fWe=Object.freeze(Object.defineProperty({__proto__:null,Classes:tWe,Helpers:hWe,Traits:aWe,Types:Q},Symbol.toStringTag,{value:"Module"}));class mU{constructor(e,t){this.context=t,this.classes=e.Classes,this.helpers=e.Helpers}getTypes(){return Object.keys(this.classes)}make(e,t,n=null){t==null&&(t={});const r=this.classes[e];if(r==null)throw new Error(`Unknown primitive class \`${e}\``);const s=new r.model(e,r.defaults,t,n,r,this.context.attributes);return new r(s,this.context,this.helpers),s}}const OM=fWe,dWe=Object.freeze(Object.defineProperty({__proto__:null,Factory:mU,Primitive:Os,Types:OM},Symbol.toStringTag,{value:"Module"}));class Av{constructor(e,t){this.renderer=e,this.shaders=t,this.gl=this.renderer.getContext(),this.uniforms==null&&(this.uniforms={})}dispose(){this.uniforms=null}_adopt(e){for(const t in e){const n=e[t];this.uniforms[t]=n}}_set(e){for(const t in e){const n=e[t];this.uniforms[t]!=null&&(this.uniforms[t].value=n)}}}class pWe extends Oi{constructor(){super(),this.rotationAutoUpdate=!1,this.frustumCulled=!1,this.matrixAutoUpdate=!1}}let gU=class extends Av{constructor(e,t,n){super(e,t,n),this.root=new pWe,(n!=null?n.scene:void 0)!=null&&(this.scene=n.scene),this.scene==null&&(this.scene=new cv),this.pending=[],this.async=0,this.scratch=new po(1,1),this.camera=new yr}inject(e){return e!=null&&(this.scene=e),this.scene.add(this.root)}unject(){return this.scene!=null?this.scene.remove(this.root):void 0}add(e){return this.async?this.pending.push(e):this._add(e)}remove(e){if(this.pending=this.pending.filter(t=>t!==e),e.parent!=null)return this._remove(e)}_add(e){return this.root.add(e)}_remove(e){return this.root.remove(e)}dispose(){if(this.root.parent!=null)return this.unject()}warmup(e){return this.async=+e||0}render(){if(!this.pending.length)return;const{children:e}=this.root,t=[];for(let s=0,a=this.async,o=0<=a;o?s<a:s>a;o?s++:s--){const l=this.pending.shift();if(!l)break;this._add(l),t.push(t)}const n=e.map(function(s){return s.visible});e.map(s=>s.visible=!Array.from(t).includes(s));const r=this.renderer.getRenderTarget();return this.renderer.setRenderTarget(this.scratch),this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(r),e.map((s,a)=>s.visible=n[a])}toJSON(){return this.root.toJSON()}};class vU{constructor(e,t,n){this.classes=e,this.renderer=t,this.shaders=n}getTypes(){return Object.keys(this.classes)}make(e,t){return new this.classes[e](this.renderer,this.shaders,t)}}let _U=class extends Av{constructor(e,t,n){super(e,t),this.items==null&&(this.items=n.items||1),this.samples==null&&(this.samples=n.samples||1),this.channels==null&&(this.channels=n.channels||4),this.callback==null&&(this.callback=n.callback||function(){})}dispose(){return super.dispose()}update(){const e=this.fill();return this.write(e),e}setActive(e,t,n,r){}setCallback(e){this.callback=e}write(){}fill(){}generate(e){return mI(e,this.samples,this.channels,this.items)}};class FI{constructor(e,t,n,r,s){this.renderer=e,this.width=t,this.height=n,this.channels=r,this.n=this.width*this.height*this.channels;const a=this.renderer.getContext();this.gl=a;const o=(s!=null?s.minFilter:void 0)!=null?s!=null?s.minFilter:void 0:ji,l=(s!=null?s.magFilter:void 0)!=null?s!=null?s.magFilter:void 0:ji,c=(s!=null?s.type:void 0)!=null?s!=null?s.type:void 0:is;this.minFilter=Kw(a,o),this.magFilter=Kw(a,l),this.type=Kw(a,c),this.ctor=SF(c),this.build(s)}build(e){const{gl:t}=this,n=this.renderer.state;this.texture=t.createTexture(),this.format=[null,t.LUMINANCE,t.LUMINANCE_ALPHA,t.RGB,t.RGBA][this.channels],this.format3=[null,v2,_2,void 0,Bs][this.channels],n.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.minFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.magFilter),this.data=new this.ctor(this.n),t.pixelStorei(t.UNPACK_ALIGNMENT,1),t.texImage2D(t.TEXTURE_2D,0,this.format,this.width,this.height,0,this.format,this.type,this.data),this.textureObject=new rs(new Image,rA,la,la,e!=null?e.minFilter:void 0,e!=null?e.magFilter:void 0),this.textureProperties=this.renderer.properties.get(this.textureObject),this.textureProperties.__webglInit=!0,this.textureProperties.__webglTexture=this.texture,this.textureObject.format=this.format3,this.textureObject.type=is,this.textureObject.unpackAlignment=1,this.textureObject.flipY=!1,this.textureObject.generateMipmaps=!1,this.uniforms={dataResolution:{type:"v2",value:new Et(1/this.width,1/this.height)},dataTexture:{type:"t",value:this.textureObject}}}write(e,t,n,r,s){const{gl:a}=this;return this.renderer.state.bindTexture(a.TEXTURE_2D,this.texture),a.pixelStorei(a.UNPACK_ALIGNMENT,1),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),a.texSubImage2D(a.TEXTURE_2D,0,t,n,r,s,this.format,this.type,e)}dispose(){return this.gl.deleteTexture(this.texture),this.textureProperties.__webglInit=!1,this.textureProperties.__webglTexture=null,this.textureProperties=null,this.textureObject=this.texture=null}}class bC extends _U{constructor(e,t,n,r){r==null&&(r=!0);const s=n.width||1,a=n.height||1,o=n.depth||1,l=s*a*o;n.samples||(n.samples=l),super(e,t,n),this.width=s,this.height=a,this.depth=o,this.samples==null&&(this.samples=l),r&&this.build(n)}shader(e,t){t==null&&(t=4),this.items>1||this.depth>1?(t!==4&&e.pipe(L0(t,4)),e.pipe("map.xyzw.texture",this.uniforms)):t!==2&&e.pipe(Wd(t,2));const n=this.wrap?".wrap":"";return e.pipe(`map.2d.data${n}`,this.uniforms),e.pipe("sample.2d",this.uniforms),this.channels<4&&e.pipe(fl(["0000","x000","xw00","xyz0"][this.channels])),e}build(e){this.data=new Float32Array(this.samples*this.channels*this.items),this.texture=new FI(this.renderer,this.items*this.width,this.height*this.depth,this.channels,e),this.filled=0,this.used=0,this._adopt(this.texture.uniforms),this._adopt({dataPointer:{type:"v2",value:new Et},textureItems:{type:"f",value:this.items},textureHeight:{type:"f",value:this.height}}),this.dataPointer=this.uniforms.dataPointer.value,this.streamer=this.generate(this.data)}dispose(){return this.data=null,this.texture.dispose(),super.dispose()}getFilled(){return this.filled}setCallback(e){return this.callback=e,this.filled=0}copy(e){const t=Math.min(e.length,this.samples*this.channels*this.items),n=this.data;for(let r=0,s=t,a=0<=s;a?r<s:r>s;a?r++:r--)n[r]=e[r];this.write(Math.ceil(t/this.channels/this.items))}write(e){e==null&&(e=this.samples);let t=e/this.width;e*=this.items;const n=t<1?e:this.items*this.width;t=Math.ceil(t),this.texture.write(this.data,0,0,n,t),this.dataPointer.set(.5,.5),this.filled=1,this.used=e}through(e,t){let n,r;const{consume:s,done:a}=r=this.streamer,{emit:o}=n=t.streamer;let l=0,c=()=>s((u,h,f,d)=>e(o,u,h,f,d,l));return c=AA(c,this.items),()=>{r.reset(),n.reset();const u=this.used;for(l=0;!a()&&l<u;)c(),l++;return r.count()}}}class mWe extends bC{constructor(e,t,n){const r=n.width||1,s=n.history||1;n.width=r,n.height=s,n.depth=1,super(e,t,n,!1),this.width=r,this.history=s,this.samples=r,this.wrap=s>1,this.build(n)}build(e){return super.build(),this.index=0,this.pad=0,this.streamer=this.generate(this.data)}setActive(e){return this.pad=Math.max(0,this.width-e)}fill(){const{callback:e}=this;typeof e.reset=="function"&&e.reset();const{emit:t,count:n,done:r,reset:s}=this.streamer;s();const a=this.samples-this.pad;let o=0;for(;!r()&&o<a&&e(t,o++)!==!1;);return Math.floor(n()/this.items)}write(e){return e==null&&(e=this.samples),e*=this.items,this.texture.write(this.data,0,this.index,e,1),this.dataPointer.set(.5,this.index+.5),this.index=(this.index+this.history-1)%this.history,this.filled=Math.min(this.history,this.filled+1)}through(e,t){let n,r;const{consume:s,done:a}=r=this.streamer,{emit:o}=n=t.streamer;let l=0,c=()=>s((u,h,f,d)=>e(o,u,h,f,d,l));return c=AA(c,this.items),()=>{r.reset(),n.reset();const u=this.samples-this.pad;for(l=0;!a()&&l<u;)c(),l++;return r.count()}}}class gWe extends ai{constructor(){super(),new ai(this),this.uniforms==null&&(this.uniforms={}),this.groups==null&&(this.groups=[])}_reduce(e,t){let n=!1;for(let r=0;r<e.length;r++){const s=e[r],a=t[r];n&&(e[r]=a),s>1&&(n=!0)}return e.reduce((r,s)=>r*s)}_emitter(e){const t=e=="index"?this.getIndex():this.getAttribute(e),n=t.itemSize,{array:r}=t;let s=0;return[null,function(u){r[s++]=u},function(u,h){r[s++]=u,r[s++]=h},function(u,h,f){r[s++]=u,r[s++]=h,r[s++]=f},function(u,h,f,d){r[s++]=u,r[s++]=h,r[s++]=f,r[s++]=d}][n]}_finalize(){}_offsets(e){this.groups=e}}class bv extends gWe{_clipUniforms(){return this.geometryClip=new Hi(1e10,1e10,1e10,1e10),this.geometryResolution=new Hi,this.mapSize=new Hi,this.uniforms==null&&(this.uniforms={}),this.uniforms.geometryClip={type:"v4",value:this.geometryClip},this.uniforms.geometryResolution={type:"v4",value:this.geometryResolution},this.uniforms.mapSize={type:"v4",value:this.mapSize}}_clipGeometry(e,t,n,r){const s=o=>Math.max(0,o-1),a=o=>1/Math.max(1,o-1);return this.geometryClip.set(s(e),s(t),s(n),s(r)),this.geometryResolution.set(a(e),a(t),a(n),a(r))}_clipMap(e,t,n,r){return this.mapSize.set(e,t,n,r)}_clipOffsets(e,t,n,r,s,a,o,l,c){const u=[r,n,t,s],h=[l,o,a,c],f=this._reduce(u,h);return this._offsets([{start:0,count:f*e,materialIndex:0}])}}class vWe extends bv{constructor(e){let t,n,r,s,a,o,l,c,u,h,f;super(e),this._clipUniforms(),this.sides=c=+e.sides||12,this.samples=l=+e.samples||2,this.strips=u=+e.strips||1,this.ribbons=o=+e.ribbons||1,this.layers=a=+e.layers||1,this.flip=n=e.flip!=null?e.flip:!1,this.closed=r=e.closed!=null?e.closed:!1,this.anchor=t=e.anchor!=null?e.anchor:n||r?0:l-1;const d=u*o*a,g=(c+2)*d,v=c*2*d;this.setIndex(new Un(new Uint32Array(v*3),1)),this.setAttribute("position4",new Un(new Float32Array(g*4),4)),this.setAttribute("arrow",new Un(new Float32Array(g*3),3)),this.setAttribute("attach",new Un(new Float32Array(g*2),2));const A=this._emitter("index"),_=this._emitter("position4"),y=this._emitter("arrow"),x=this._emitter("attach"),C=[];for(s=0,f=c,h=0<=f;h?s<f:s>f;h?s++:s--){const M=s/c*2*Math.PI;C.push([Math.cos(M),Math.sin(M),1])}let S=0;for(let M=0,D=d,F=0<=D;F?M<D:M>D;F?M++:M--){let z,U;const $=S++,O=$+c+1;for(s=0,U=c,z=0<=U;z?s<U:s>U;z?s++:s--){const ie=S+s%c,W=S+(s+1)%c;A($),A(ie),A(W),A(W),A(ie),A(O)}S+=c+1}const I=n?1:r?l-1:-1,P=n&&!r?l-1:0,B=t;for(let M=0,D=a,F=0<=D;F?M<D:M>D;F?M++:M--)for(let z=0,U=o,$=0<=U;$?z<U:z>U;$?z++:z--)for(let O=0,ie=u,W=0<=ie;W?O<ie:O>ie;W?O++:O--){let J,Ce;for(_(B,O,z,M),y(0,0,0),x(I,P),s=0,Ce=c,J=0<=Ce;J?s<Ce:s>Ce;J?s++:s--){_(B,O,z,M);const Me=C[s];y(Me[0],Me[1],Me[2]),x(I,P)}_(B,O,z,M),y(0,0,1),x(I,P)}this._finalize(),this.clip()}clip(e,t,n,r){let s;if(e==null&&({samples:e}=this),t==null&&({strips:t}=this),n==null&&({ribbons:n}=this),r==null&&({layers:r}=this),this._clipGeometry(e,t,n,r),e>0){const a=[r,n,t],o=[this.layers,this.ribbons,this.strips];s=this.sides*this._reduce(a,o)}else s=0;return this._offsets([{start:0,count:s*6,materialIndex:0}])}}class Lf extends Av{constructor(e,t,n){super(e,t,n),this.zUnits=n.zUnits!=null?n.zUnits:0}raw(){for(const e of Array.from(this.renders))this._raw(e);return null}depth(e,t){for(const n of Array.from(this.renders))this._depth(n,e,t);return null}polygonOffset(e,t){for(const n of Array.from(this.renders))this._polygonOffset(n,e,t);return null}show(e,t,n){return Array.from(this.renders).map(r=>this._show(r,e,t,n))}hide(){for(const e of Array.from(this.renders))this._hide(e);return null}_injectPreamble(e,t){const n=e+`
`+t;return t.match(/#extension/)?this._hoist(n):n}_hoist(e){const t=e.split(`
`),n=[];for(const r of Array.from(t))r.match(/^\s*#extension/)?n.unshift(r):n.push(r);return n.join(`
`)}_material(e){const t=this.renderer.capabilities.precision,n=`    precision ${t} float;
    precision ${t} int;
uniform mat4 modelMatrix;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 cameraPosition;`,r=`    precision ${t} float;
    precision ${t} int;
uniform mat4 viewMatrix;
uniform vec3 cameraPosition;`,s={};Object.assign(s,e),delete s.attributes,delete s.varyings,delete s.inspect,delete s.vertexGraph,delete s.fragmentGraph;const a=new N5(s);return["vertexGraph","fragmentGraph","inspect"].forEach(o=>a[o]=e[o]),a.vertexShader=this._injectPreamble(n,a.vertexShader),a.fragmentShader=this._injectPreamble(r,a.fragmentShader),a}_raw(e){e.rotationAutoUpdate=!1,e.frustumCulled=!1,e.matrixAutoUpdate=!1,e.material.defaultAttributeValues=void 0}_depth(e,t,n){const r=e.material;return r.depthWrite=t,r.depthTest=n}_polygonOffset(e,t,n){n-=this.zUnits;const r=n!==0,s=e.material;if(s.polygonOffset=r,r)return s.polygonOffsetFactor=t,s.polygonOffsetUnits=n}_show(e,t,n,r){t=!0;const s=e.material;return e.renderOrder=-r,e.visible=!0,s.transparent=t,s.blending=n,null}_hide(e){return e.visible=!1}_vertexColor(e,t){if(!e&&!t)return;const n=this.shaders.shader();return e&&(n.require(e),n.pipe("mesh.vertex.color",this.uniforms)),t&&(n.require(t),n.pipe("mesh.vertex.mask",this.uniforms)),n}_vertexPosition(e,t,n,r,s){let a;const o=this.shaders.shader();return(n||t&&t!==!0)&&(a={},(r>0||s)&&(a.POSITION_MAP=""),r>0&&(a[["POSITION_U","POSITION_UV","POSITION_UVW","POSITION_UVWO"][r-1]]=""),s&&(a.POSITION_STPQ="")),o.require(e),o.pipe("mesh.vertex.position",this.uniforms,a)}_fragmentColor(e,t,n,r,s,a,o,l,c){const u=this.shaders.shader();let h=!1,f=!1;const d={};return a>0&&(d[["POSITION_U","POSITION_UV","POSITION_UVW","POSITION_UVWO"][a-1]]=""),o&&(d.POSITION_STPQ=""),e&&(u.pipe("style.color",this.uniforms),h=!0,(n||s||t)&&((!c||n)&&u.pipe("mesh.gamma.in"),f=!0)),n&&(u.isolate(),u.pipe("mesh.fragment.color",this.uniforms),(!c||h)&&u.pipe("mesh.gamma.in"),u.end(),h&&u.pipe(Wl("vec4","*")),c&&h&&u.pipe("mesh.gamma.out"),h=!0,f=!0),s&&(!h&&l&&u.pipe(PM("vec4","vec4(1.0)")),u.isolate(),u.require(s),u.pipe("mesh.fragment.map",this.uniforms,d),c||u.pipe("mesh.gamma.in"),u.end(),l?u.pipe(l):h&&u.pipe(Wl("vec4","*")),h=!0,f=!0),t&&(h||u.pipe(PM("vec4","vec4(1.0)")),t===!0?u.pipe("mesh.fragment.shaded",this.uniforms):(u.require(t),u.pipe("mesh.fragment.material",this.uniforms,d)),f=!0),f&&!c&&u.pipe("mesh.gamma.out"),r&&(u.pipe("mesh.fragment.mask",this.uniforms),h&&u.pipe(Wl("vec4","*"))),u}}class _We extends Lf{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s}=n;const{material:a,position:o,color:l,mask:c,map:u,combine:h,stpq:f,linear:d}=n;s==null&&(s={});const g=s.styleColor!=null;this.geometry=new vWe({sides:n.sides,samples:n.samples,strips:n.strips,ribbons:n.ribbons,layers:n.layers,anchor:n.anchor,flip:n.flip,closed:n.closed}),this._adopt(s),this._adopt(this.geometry.uniforms);const v={};closed&&(v.ARROW_CLOSED="");const A=t.material(),_=A.vertex;_.pipe(this._vertexColor(l,c)),_.require(this._vertexPosition(o,a,u,1,f)),_.pipe("arrow.position",this.uniforms,v),_.pipe("project.position",this.uniforms),A.fragment=r=this._fragmentColor(g,a,l,c,u,1,f,h,d),r.pipe("fragment.color",this.uniforms);const y=A.link({side:ms});this.material=this._material(y);const x=new cr(this.geometry,this.material);x.frustumCulled=!1,x.matrixAutoUpdate=!1,x.userData=y,this._raw(x),this.renders=[x]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}class AWe extends FI{constructor(e,t,n,r,s){super(e,t,n,r,s),this.data=new this.ctor(this.n)}resize(e,t){const n=this.data,r=this.width,s=this.height;this.width=e,this.height=t,this.n=e*t*this.channels,this.data=new this.ctor(this.n);const{gl:a}=this;return this.renderer.state.bindTexture(a.TEXTURE_2D,this.texture),a.pixelStorei(a.UNPACK_ALIGNMENT,1),a.texImage2D(a.TEXTURE_2D,0,this.format,e,t,0,this.format,this.type,this.data),this.uniforms.dataResolution.value.set(1/e,1/t),this.write(n,0,0,r,s)}write(e,t,n,r,s){let a;const{width:o}=this,l=this.data,{channels:c}=this;let u=0;if(o===r&&t===0){a=n*r*c;const h=r*s*c;for(;u<h;)l[a++]=e[u++]}else{const h=o*c,f=r*c,d=t*c;let g=n;const v=n+s;for(;g<v;){let A=0;for(a=d+g*h;A++<f;)l[a++]=e[u++];g++}}return super.write(e,t,n,r,s)}dispose(){return this.data=null,super.dispose()}}class AU extends Av{constructor(e,t,n,r){r==null&&(r=!0),super(e,t),this.width==null&&(this.width=n.width||512),this.height==null&&(this.height=n.height||512),this.channels==null&&(this.channels=n.channels||4),this.backed==null&&(this.backed=n.backed||!1),this.samples=this.width*this.height,r&&this.build(n)}shader(e){return e.pipe("map.2d.data",this.uniforms),e.pipe("sample.2d",this.uniforms),this.channels<4&&e.pipe(fl(["0000","x000","xw00","xyz0"][this.channels])),e}build(e){let t;return this.klass=t=this.backed?AWe:FI,this.texture=new t(this.renderer,this.width,this.height,this.channels,e),this.uniforms={dataPointer:{type:"v2",value:new Et(0,0)}},this._adopt(this.texture.uniforms),this.reset()}reset(){return this.rows=[],this.bottom=0}resize(e,t){if(!this.backed)throw new Error("Cannot resize unbacked texture atlas");return e>2048&&t>2048?console.warn(`Giant text atlas ${e}x${t}.`):console.info(`Resizing text atlas ${e}x${t}.`),this.texture.resize(e,t),this.width=e,this.height=t,this.samples=e*t}collapse(e){let t;const{rows:n}=this;if(n.splice(n.indexOf(e),1),this.bottom=(t=bWe(n[n.length-1],r=>r.bottom))!=null?t:0,this.last===e)return this.last=null}allocate(e,t,n,r){const s=this.width,a=this.height,o=n*2;if(t>s)return this.resize(s*2,a*2),this.last=null,this.allocate(e,t,n,r);let l=this.last;if(l!=null&&l.height>=n&&l.height<o&&l.width+t<=s){l.append(e,t,n,r);return}let c=0,u=-1,h=0;for(let f=0;f<this.rows.length;f++)if(l=this.rows[f],l.top-c>=n&&u<0&&(u=f,h=c),{bottom:c}=l,l.height>=n&&l.height<o&&l.width+t<=s){l.append(e,t,n,r),this.last=l;return}if(u>=0)l=new iR(h,n),this.rows.splice(u,0,l);else{if(h=c,c+=n,c>=a)return this.resize(s*2,a*2),this.last=null,this.allocate(e,t,n,r);l=new iR(h,n),this.rows.push(l),this.bottom=c}l.append(e,t,n,r),this.last=l}read(){return this.texture.textureObject}write(e,t,n,r,s){return this.texture.write(e,t,n,r,s)}dispose(){return this.texture.dispose(),this.data=null,super.dispose()}}class iR{constructor(e,t){this.top=e,this.bottom=e+t,this.width=0,this.height=t,this.alive=0,this.keys=[]}append(e,t,n,r){const s=this.width,a=this.top;return this.alive++,this.width+=t,this.keys.push(e),r(this,s,a)}}function bWe(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class yWe extends Lf{constructor(e,t,n){super(e,t,n),this.geometry=new ov(1,1),this.material=new Lo({map:n.map}),this.material.side=ms;const r=new cr(this.geometry,this.material);r.position.x+=n.x||0,r.position.y+=n.y||0,r.frustumCulled=!1,r.scale.set(2,2,2),r.__debug=!0,this.objects=[r]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.objects=this.geometry=this.material=null,super.dispose()}}class wWe extends bv{constructor(e){let t,n,r,s,a;super(e),this._clipUniforms(),this.items=r=+e.items||2,this.width=a=+e.width||1,this.height=n=+e.height||1,this.depth=t=+e.depth||1,this.sides=s=Math.max(0,r-2);const o=a*n*t,l=r*o,c=s*o;this.setIndex(new Un(new Uint32Array(c*3),1)),this.setAttribute("position4",new Un(new Float32Array(l*4),4));const u=this._emitter("index"),h=this._emitter("position4");let f=0;for(let d=0,g=o,v=0<=g;v?d<g:d>g;v?d++:d--){for(let A=0,_=s,y=0<=_;y?A<_:A>_;y?A++:A--)u(f),u(f+A+1),u(f+A+2);f+=r}for(let d=0,g=t,v=0<=g;v?d<g:d>g;v?d++:d--)for(let A=0,_=n,y=0<=_;y?A<_:A>_;y?A++:A--)for(let x=0,C=a,S=0<=C;S?x<C:x>C;S?x++:x--)for(let I=0,P=r,B=0<=P;B?I<P:I>P;B?I++:I--)h(x,A,d,I);this._finalize(),this.clip()}clip(e,t,n,r){e==null&&({width:e}=this),t==null&&({height:t}=this),n==null&&({depth:n}=this),r==null&&({items:r}=this);const s=Math.max(0,r-2);return this._clipGeometry(e,t,n,r),this._clipOffsets(3,e,t,n,s,this.width,this.height,this.depth,this.sides)}}class xWe extends Lf{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s,material:a}=n;const{position:o,color:l,mask:c,map:u,combine:h,stpq:f,linear:d}=n;s==null&&(s={}),a==null&&(a=!0);const g=s.styleColor!=null;this.geometry=new wWe({items:n.items,width:n.width,height:n.height,depth:n.depth}),this._adopt(s),this._adopt(this.geometry.uniforms);const v=t.material(),A=v.vertex;A.pipe(this._vertexColor(l,c)),A.require(this._vertexPosition(o,a,u,2,f)),a||A.pipe("face.position",this.uniforms),a&&A.pipe("face.position.normal",this.uniforms),A.pipe("project.position",this.uniforms),v.fragment=r=this._fragmentColor(g,a,l,c,u,2,f,h,d),r.pipe("fragment.color",this.uniforms);const _=v.link({side:ms});this.material=this._material(_);const y=new cr(this.geometry,this.material);y.userData=_,this._raw(y),this.renders=[y]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}class CWe extends bv{constructor(e){let t,n,r,s,a,o,l,c,u,h,f,d,g,v,A;super(e),this._clipUniforms(),this.closed=t=e.closed||!1,this.samples=u=(+e.samples||2)+(t?1:0),this.strips=f=+e.strips||1,this.ribbons=c=+e.ribbons||1,this.layers=l=+e.layers||1,this.detail=n=+e.detail||1;const _=u-1;this.joints=a=n-1,this.vertices=d=(_-(t?0:1))*a+u,this.segments=h=(_-(t?0:1))*a+_;const y=d*f*c*l*2,C=h*f*c*l*2;this.setIndex(new Un(new Uint32Array(C*3),1)),this.setAttribute("position4",new Un(new Float32Array(y*4),4)),this.setAttribute("line",new Un(new Float32Array(y*1),1)),n>1&&this.setAttribute("joint",new Un(new Float32Array(y),1));const S=this._emitter("index"),I=this._emitter("position4"),P=this._emitter("line");n>1&&(s=this._emitter("joint"));let B=0;for(let D=0,F=c*l,z=0<=F;z?D<F:D>F;z?D++:D--)for(let U=0,$=f,O=0<=$;O?U<$:U>$;O?U++:U--){for(let ie=0,W=h,J=0<=W;J?ie<W:ie>W;J?ie++:ie--)S(B),S(B+1),S(B+2),S(B+2),S(B+1),S(B+3),B+=2;B+=2}const M=t?()=>0:function(D){return D===0?-1:D===u-1?1:0};if(n>1){let D,F;for(o=0,F=l,D=0<=F;D?o<F:o>F;D?o++:o--){let z,U;for(A=0,U=c,z=0<=U;z?A<U:A>U;z?A++:A--){let $,O;for(v=0,O=f,$=0<=O;$?v<O:v>O;$?v++:v--){let ie,W,J;for(J=0,g=J,W=u,ie=0<=W;ie?J<W:J>W;ie?J++:J--,g=J)if(r=M(g),r!==0)I(g,v,A,o),I(g,v,A,o),P(1),P(-1),s(.5),s(.5);else for(let Ce=0,Me=n,ge=0<=Me;ge?Ce<Me:Ce>Me;ge?Ce++:Ce--)I(g,v,A,o),I(g,v,A,o),P(1),P(-1),s(Ce/a),s(Ce/a)}}}}else{let D,F;for(o=0,F=l,D=0<=F;D?o<F:o>F;D?o++:o--){let z,U;for(A=0,U=c,z=0<=U;z?A<U:A>U;z?A++:A--){let $,O;for(v=0,O=f,$=0<=O;$?v<O:v>O;$?v++:v--){let ie,W,J;for(J=0,g=J,W=u,ie=0<=W;ie?J<W:J>W;ie?J++:J--,g=J)I(g,v,A,o),I(g,v,A,o),P(1),P(-1)}}}}this._finalize(),this.clip()}clip(e,t,n,r){e==null&&(e=this.samples-this.closed),t==null&&({strips:t}=this),n==null&&({ribbons:n}=this),r==null&&({layers:r}=this);const a=e+(e-(this.closed?0:2))*this.joints-(this.closed?0:1);return e+=this.closed,this._clipGeometry(e,t,n,r),this._clipOffsets(6,a,t,n,r,this.segments,this.strips,this.ribbons,this.layers)}}class EWe extends Lf{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s,stroke:a,join:o}=n;const{material:l,position:c,color:u,mask:h,map:f,combine:d,stpq:g,linear:v,clip:A,proximity:_,closed:y}=n;s==null&&(s={}),a=[null,"dotted","dashed"][a];const x=s.styleColor!=null;o=(r=["miter","round","bevel"][o])!=null?r:"miter";const C={miter:1,round:4,bevel:2}[o];this.geometry=new CWe({samples:n.samples,strips:n.strips,ribbons:n.ribbons,layers:n.layers,anchor:n.anchor,closed:n.closed,detail:C}),this._adopt(s),this._adopt(this.geometry.uniforms);const S=t.material(),I={};a&&(I.LINE_STROKE=""),A&&(I.LINE_CLIP=""),_!=null&&(I.LINE_PROXIMITY=""),I["LINE_JOIN_"+o.toUpperCase()]="",C>1&&(I.LINE_JOIN_DETAIL=C),y&&(I.LINE_CLOSED="");const P=S.vertex;P.pipe(this._vertexColor(u,h)),P.require(this._vertexPosition(c,l,f,2,g)),P.pipe("line.position",this.uniforms,I),P.pipe("project.position",this.uniforms);const B=S.fragment;a&&B.pipe(`fragment.clip.${a}`,this.uniforms),A&&B.pipe("fragment.clip.ends",this.uniforms),_!=null&&B.pipe("fragment.clip.proximity",this.uniforms),B.pipe(this._fragmentColor(x,l,u,h,f,2,g,d,v)),B.pipe("fragment.color",this.uniforms);const M=S.link({side:ms});this.material=this._material(M);const D=new cr(this.geometry,this.material);D.userData=M,this._raw(D),this.renders=[D]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}class SWe extends bC{constructor(e,t,n){const r=n.width||1,s=n.height||1,a=n.history||1;n.depth=a,super(e,t,n,!1),this.width=r,this.height=s,this.history=a,this.samples=r*s,this.wrap=a>1,this.build(n)}build(e){return super.build(),this.index=0,this.pad={x:0,y:0},this.streamer=this.generate(this.data)}getFilled(){return this.filled}setActive(e,t){let n;return[this.pad.x,this.pad.y]=Array.from(n=[Math.max(0,this.width-e),Math.max(0,this.height-t)]),n}fill(){let e,t,n;const{callback:r}=this;typeof r.reset=="function"&&r.reset();const{emit:s,skip:a,count:o,done:l,reset:c}=this.streamer;c();const u=this.width,h=this.pad.x,f=this.samples-this.pad.y*u;let d=e=t=0;if(h)for(;!l()&&t<f&&(t++,n=r(s,d,e),++d===u-h&&(a(h),t+=h,d=0,e++),n!==!1););else for(;!l()&&t<f&&(t++,n=r(s,d,e),++d===u&&(d=0,e++),n!==!1););return Math.floor(o()/this.items)}write(e){e==null&&(e=this.samples),e*=this.items;const t=this.width*this.items,n=Math.ceil(e/t);return this.texture.write(this.data,0,this.index*this.height,t,n),this.dataPointer.set(.5,this.index*this.height+.5),this.index=(this.index+this.history-1)%this.history,this.filled=Math.min(this.history,this.filled+1)}through(e,t){let n,r,s;const{consume:a,skip:o,done:l}=s=this.streamer,{emit:c}=n=t.streamer;let u=r=0,h=()=>a((f,d,g,v)=>e(c,f,d,g,v,u,r));return h=AA(h,this.items),()=>{let f;s.reset(),n.reset();const d=this.width,g=this.pad.x,v=this.samples-this.pad.y*d;if(u=r=f=0,g)for(;!l()&&f<v;)f++,h(),++u===d-g&&(o(g),u=0,r++);else for(;!l()&&f<v;)f++,h(),++u===d&&(u=0,r++);return s.count()}}}class MWe{constructor(e,t,n,r,s){this.gl=e,s==null&&(s={}),s.minFilter==null&&(s.minFilter=ji),s.magFilter==null&&(s.magFilter=ji),s.format==null&&(s.format=Bs),s.type==null&&(s.type=ns),this.options=s,this.width=t||1,this.height=n||1,this.frames=r||1,this.buffers=this.frames+1,this.build()}build(){let e;const t=()=>new po(this.width,this.height,this.options);this.targets=(()=>{let r,s;const a=[];for(e=0,s=this.buffers,r=0<=s;r?e<s:e>s;r?e++:e--)a.push(t());return a})();const n=[];this.targets.forEach(r=>n.push(r.texture)),this.reads=n,this.write=this.targets[this.buffers-1],this.uniforms={dataResolution:{type:"v2",value:new Et(1/this.width,1/this.height)},dataTexture:{type:"t",value:this.reads[0]},dataTextures:{type:"tv",value:this.reads}}}cycle(){this.targets.unshift(this.targets.pop()),this.write=this.targets[this.buffers-1],this.reads.unshift(this.reads.pop()),this.uniforms.dataTexture.value=this.reads[0]}warmup(e){return(()=>{const t=[];for(let n=0,r=this.buffers,s=0<=r;s?n<r:n>r;s?n++:n--)e(this.write),t.push(this.cycle());return t})()}dispose(){for(const e of Array.from(this.targets))e.dispose();return this.targets=this.reads=this.write=null}}class bU extends Av{constructor(e,t,n){super(e,t),this.scene=n.scene!=null?n.scene:new cv,this.camera=n.camera,this.build(n)}shaderRelative(e){return e==null&&(e=this.shaders.shader()),e.pipe("sample.2d",this.uniforms)}shaderAbsolute(e,t,n){if(t==null&&(t=1),n==null&&(n=4),e==null&&(e=this.shaders.shader()),t<=1)return n>2&&e.pipe(Wd(n,2)),e.pipe("map.2d.data",this.uniforms),e.pipe("sample.2d",this.uniforms);{const r=RF(Math.min(t,this.target.frames));return n<4&&e.pipe(L0(n,4)),e.pipe("map.xyzw.2dv"),e.split(),e.pipe("map.2d.data",this.uniforms),e.pass(),e.pipe(r,this.uniforms)}}build(e){return this.camera||(this.camera=new yr,this.camera.position.set(0,0,3),this.camera.lookAt(new fe)),typeof this.scene.inject=="function"&&this.scene.inject(),this.target=new MWe(this.gl,e.width,e.height,e.frames,e),this.target.warmup(t=>this.renderer.setRenderTarget(t)),this.renderer.setRenderTarget(null),this._adopt(this.target.uniforms),this._adopt({dataPointer:{type:"v2",value:new Et(.5,.5)}}),this.filled=0}adopt(e){return Array.from(e.renders).map(t=>this.scene.add(t))}unadopt(e){return Array.from(e.renders).map(t=>this.scene.remove(t))}render(e){e==null&&({camera:e}=this);const t=this.renderer.getRenderTarget();if(this.renderer.setRenderTarget(this.target.write),this.renderer.render(this.scene.scene!=null?this.scene.scene:this.scene,e),this.renderer.setRenderTarget(t),this.target.cycle(),this.filled<this.target.frames)return this.filled++}read(e){return e==null&&(e=0),this.target.reads[Math.abs(e)]}getFrames(){return this.target.frames}getFilled(){return this.filled}dispose(){return typeof this.scene.unject=="function"&&this.scene.unject(),this.scene=this.camera=null,this.target.dispose(),super.dispose()}}class NM extends bU{constructor(e,t,n){let r,s;const a=n.items||1,o=n.channels||4,l=n.width||1,c=n.height||1,u=n.depth||1;n.format=Bs,n.width=s=a*l,n.height=r=c*u,n.frames=1,delete n.items,delete n.depth,delete n.channels,super(e,t,n),this.items==null&&(this.items=a),this.channels==null&&(this.channels=o),this.width==null&&(this.width=l),this._width=s,this.height==null&&(this.height=c),this._height=r,this.depth==null&&(this.depth=u),this._adopt({textureItems:{type:"f",value:this.items},textureHeight:{type:"f",value:this.height}})}shaderAbsolute(e){return e==null&&(e=this.shaders.shader()),e.pipe("map.xyzw.texture",this.uniforms),super.shaderAbsolute(e,1,2)}}class yU extends bv{constructor(e,t){t==null&&(t=!0),super(),t&&this.construct(e)}construct(e){let t,n,r,s,a,o,l,c;this._clipUniforms(),this.closedX=t=e.closedX||!1,this.closedY=n=e.closedY||!1,this.width=c=(+e.width||2)+(t?1:0),this.height=r=(+e.height||2)+(n?1:0),this.surfaces=l=+e.surfaces||1,this.layers=s=+e.layers||1,this.segmentsX=a=Math.max(0,c-1),this.segmentsY=o=Math.max(0,r-1);const u=c*r*l*s,f=a*o*l*s*2;this.setIndex(new Un(new Uint32Array(f*3),1)),this.setAttribute("position4",new Un(new Float32Array(u*4),4)),this.setAttribute("surface",new Un(new Float32Array(u*2),2));const d=this._emitter("index"),g=this._emitter("position4");let v=0;for(let A=0,_=l*s,y=0<=_;y?A<_:A>_;y?A++:A--){for(let x=0,C=o,S=0<=C;S?x<C:x>C;S?x++:x--){for(let I=0,P=a,B=0<=P;B?I<P:I>P;B?I++:I--)d(v),d(v+1),d(v+c),d(v+c),d(v+1),d(v+c+1),v++;v++}v+=c}for(let A=0,_=s,y=0<=_;y?A<_:A>_;y?A++:A--)for(let x=0,C=l,S=0<=C;S?x<C:x>C;S?x++:x--)for(let I=0,P=I,B=r,M=0<=B;M?I<B:I>B;M?I++:I--,P=I)for(let D=0,F=D,z=c,U=0<=z;U?D<z:D>z;U?D++:D--,F=D)g(F,P,x,A);this._finalize(),this.clip()}clip(e,t,n,r){e==null&&(e=this.width-this.closedX),t==null&&(t=this.height-this.closedY),n==null&&({surfaces:n}=this),r==null&&({layers:r}=this),e+=this.closedX,t+=this.closedY;const s=Math.max(0,e-1),a=Math.max(0,t-1);return this._clipGeometry(e,t,n,r),this._clipOffsets(6,s,a,n,r,this.segmentsX,this.segmentsY,this.surfaces,this.layers)}map(e,t,n,r){return e==null&&({width:e}=this),t==null&&({height:t}=this),n==null&&({surfaces:n}=this),r==null&&({layers:r}=this),this._clipMap(e,t,n,r)}}class TWe extends yU{constructor(e){e.width=Math.max(2,+e.width!=null?+e.width:2),e.height=Math.max(2,+e.height!=null?+e.height:2),super(e,!1),this.uniforms==null&&(this.uniforms={}),this.uniforms.geometryScale={type:"v4",value:new Hi},this.cover(),this.construct(e)}cover(e,t,n,r){e==null&&(e=1),this.scaleX=e,t==null&&(t=1),this.scaleY=t,n==null&&(n=1),this.scaleZ=n,r==null&&(r=1),this.scaleW=r}clip(e,t,n,r){e==null&&({width:e}=this),t==null&&({height:t}=this),n==null&&({surfaces:n}=this),r==null&&({layers:r}=this),super.clip(e,t,n,r);const s=a=>1/Math.max(1,a-1);return this.uniforms.geometryScale.value.set(s(e)*this.scaleX,s(t)*this.scaleY,s(n)*this.scaleZ,s(r)*this.scaleW)}}class wU extends Lf{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s}=n;const{map:a,combine:o,stpq:l,linear:c}=n;s==null&&(s={});const u=s.styleColor!=null;this.geometry=new TWe({width:n.width,height:n.height}),this._adopt(s),this._adopt(this.geometry.uniforms);const h=t.material(),f=h.vertex;f.pipe("raw.position.scale",this.uniforms),f.fan(),f.pipe("stpq.xyzw.2d",this.uniforms),f.next(),f.pipe("screen.position",this.uniforms),f.join(),h.fragment=r=this._fragmentColor(u,!1,null,null,a,2,l,o,c),r.pipe("fragment.color",this.uniforms);const d=h.link({side:ms});this.material=this._material(d);const g=new cr(this.geometry,this.material);g.frustumCulled=!1,g.userData=d,this._raw(g),this.renders=[g]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}class FM extends wU{constructor(e,t,n){const{items:r,width:s,height:a,depth:o,stpq:l}=n,c=d=>1/Math.max(1,d),u=d=>1/Math.max(1,d-1),h={remapUVScale:{type:"v2",value:new Et(r*s,a*o)},remapModulus:{type:"v2",value:new Et(r,a)},remapModulusInv:{type:"v2",value:new Et(c(r),c(a))},remapSTPQScale:{type:"v4",value:new Hi(u(s),u(a),u(o),u(r))}},f=t.shader();f.pipe("screen.map.xyzw",h),n.map!=null&&(l&&f.pipe("screen.map.stpq",h),f.pipe(n.map)),super(e,t,{map:f,linear:!0}),this.memo=n,this.uniforms=h;for(const d of Array.from(this.renders))d.transparent=!1}cover(e,t,n,r){e==null&&({width:e}=this.memo),t==null&&({height:t}=this.memo),n==null&&({depth:n}=this.memo),r==null&&({items:r}=this.memo);const s=l=>1/Math.max(1,l-1);this.uniforms.remapSTPQScale.value.set(s(e),s(t),s(n),s(r));const a=e/this.memo.width;let o=n/this.memo.depth;return this.memo.depth===1&&(o=t/this.memo.height),this.geometry.cover(a,o)}}class xU extends bv{constructor(e){let t,n,r,s;super(e),this._clipUniforms(),this.items=r=+e.items||2,this.width=s=+e.width||1,this.height=n=+e.height||1,this.depth=t=+e.depth||1;const a=r*s*n*t,o=a*4,l=a*2;this.setIndex(new Un(new Uint32Array(l*3),1)),this.setAttribute("position4",new Un(new Float32Array(o*4),4)),this.setAttribute("sprite",new Un(new Float32Array(o*2),2));const c=this._emitter("index"),u=this._emitter("position4"),h=this._emitter("sprite"),f=[[-1,-1],[-1,1],[1,-1],[1,1]];let d=0;for(let g=0,v=a,A=0<=v;A?g<v:g>v;A?g++:g--)c(d),c(d+1),c(d+2),c(d+1),c(d+2),c(d+3),d+=4;for(let g=0,v=t,A=0<=v;A?g<v:g>v;A?g++:g--)for(let _=0,y=n,x=0<=y;x?_<y:_>y;x?_++:_--)for(let C=0,S=s,I=0<=S;I?C<S:C>S;I?C++:C--)for(let P=0,B=r,M=0<=B;M?P<B:P>B;M?P++:P--)for(const D of Array.from(f))u(C,_,g,P),h(D[0],D[1]);this._finalize(),this.clip()}clip(e,t,n,r){return e==null&&({width:e}=this),t==null&&({height:t}=this),n==null&&({depth:n}=this),r==null&&({items:r}=this),this._clipGeometry(e,t,n,r),this._clipOffsets(6,e,t,n,r,this.width,this.height,this.depth,this.items)}}class IWe extends Lf{constructor(e,t,n){let r,s;super(e,t,n);let{uniforms:a,shape:o,fill:l}=n;const{material:c,position:u,color:h,size:f,mask:d,map:g,combine:v,linear:A,optical:_,stpq:y}=n;a==null&&(a={}),o=+o!=null?+o:0,l==null&&(l=!0);const x=a.styleColor!=null,C=["circle","square","diamond","up","down","left","right"],S=["circle","generic","generic","generic","generic","generic","generic"],I=[1.2,1,1.414,1.16,1.16,1.16,1.16],P=S[o]!=null?S[o]:S[0],B=C[o]!=null?C[o]:C[0],M=(s=_&&I[o])!=null?s:1,D=l?P:`${P}.hollow`;this.geometry=new xU({items:n.items,width:n.width,height:n.height,depth:n.depth}),this._adopt(a),this._adopt(this.geometry.uniforms);const F={POINT_SHAPE_SCALE:+(M+1e-5)},z=t.material(),U=z.vertex;U.pipe(this._vertexColor(h,d)),f?(U.isolate(),U.require(f),U.require("point.size.varying",this.uniforms),U.end()):U.require("point.size.uniform",this.uniforms),U.require(this._vertexPosition(u,c,g,2,y)),U.pipe("point.position",this.uniforms,F),U.pipe("project.position",this.uniforms),z.fragment=r=this._fragmentColor(x,c,h,d,g,2,y,v,A);const $=t.material();$.vertex.pipe(U),r=$.fragment.pipe(z.fragment),r.require(`point.mask.${B}`,this.uniforms),r.require(`point.alpha.${D}`,this.uniforms),r.pipe("point.edge",this.uniforms);const O=t.material();O.vertex.pipe(U),r=O.fragment.pipe(z.fragment),r.require(`point.mask.${B}`,this.uniforms),r.require(`point.alpha.${D}`,this.uniforms),r.pipe("point.fill",this.uniforms);const ie=O.link({side:ms});this.fillMaterial=this._material(ie);const W=$.link({side:ms});this.edgeMaterial=this._material(W),this.fillObject=new cr(this.geometry,this.fillMaterial),this.edgeObject=new cr(this.geometry,this.edgeMaterial),this._raw(this.fillObject),this.fillObject.userData=ie,this._raw(this.edgeObject),this.edgeObject.userData=W,this.renders=[this.fillObject,this.edgeObject]}show(e,t,n,r){return this._show(this.edgeObject,!0,t,n,r),this._show(this.fillObject,e,t,n,r)}dispose(){return this.geometry.dispose(),this.edgeMaterial.dispose(),this.fillMaterial.dispose(),this.renders=this.edgeObject=this.fillObject=this.geometry=this.edgeMaterial=this.fillMaterial=null,super.dispose()}}class PWe extends _U{constructor(e,t,n){const r=n.width||1,s=n.height||1,a=n.depth||1,o=r*s*a;n.samples||(n.samples=o),super(e,t,n),this.width=r,this.height=s,this.depth=a,this.samples==null&&(this.samples=o),this.build(n)}build(e){return this.data=[],this.data.length=this.samples,this.filled=0,this.pad={x:0,y:0,z:0},this.streamer=this.generate(this.data)}dispose(){return this.data=null,super.dispose()}getFilled(){return this.filled}setActive(e,t,n){let r;return[this.pad.x,this.pad.y,this.pad.z]=Array.from(r=[this.width-e,this.height-t,this.depth-n]),r}read(){return this.data}copy(e){const t=Math.min(e.length,this.samples),n=this.data;return kWe(0,t,!1).map(r=>n[r]=e[r])}fill(){let e,t,n,r;const{callback:s}=this;typeof s.reset=="function"&&s.reset();const{emit:a,skip:o,count:l,done:c,reset:u}=this.streamer;u();const h=this.width,f=this.height,d=this.pad.x,g=this.pad.y,v=this.samples-this.pad.z*h*f;let A=e=t=n=0;if(d>0||g>0)for(;!c()&&n<v&&(n++,r=s(a,A,e,t),++A===h-d&&(o(d),A=0,++e===f-g&&(o(h*g),e=0,t++)),r!==!1););else for(;!c()&&n<v&&(n++,r=s(a,A,e,t),++A===h&&(A=0,++e===f&&(e=0,t++)),r!==!1););return this.filled=1,l()}}function kWe(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let a=i;r?a<s:a>s;r?a++:a--)n.push(a);return n}class BWe extends Av{constructor(e,t,n){super(e,t),this.items==null&&(this.items=n.items||1),this.channels==null&&(this.channels=n.channels||4),this.width==null&&(this.width=n.width||1),this.height==null&&(this.height=n.height||1),this.depth==null&&(this.depth=n.depth||1),this.type==null&&(this.type=n.type||is),this.stpq==null&&(this.stpq=n.stpq||!1),this.isFloat=this.type===is,this.active=this.sampled=this.rect=this.pad=null,this.build(n)}build(e){let t,n,r;const{map:s}=e,{indexer:a}=e,o=a!=null&&!a.empty();let{stpq:l}=this;const{items:c,width:u,height:h,depth:f}=this;let d=s;o&&(this._adopt({indexModulus:{type:"v4",value:new Hi(c,c*u,c*u*h,1)}}),d=this.shaders.shader(),d.require(s),d.require(a),d.pipe("float.index.pack",this.uniforms)),this.isFloat&&this.channels>1&&(this.floatMemo=new NM(this.renderer,this.shaders,{items:c,channels:4,width:u,height:h,depth:f,history:0,type:is}),this.floatCompose=new FM(this.renderer,this.shaders,{map:d,items:c,width:u,height:h,depth:f,stpq:l}),this.floatMemo.adopt(this.floatCompose),l=!1,d=this.shaders.shader(),this.floatMemo.shaderAbsolute(d)),this.isFloat?(r=this.channels,t=4):(r=1,t=this.channels),r>1?(n=this.shaders.shader(),n.pipe(BF(r)),n.require(d),n.pipe("float.stretch"),n.pipe("float.encode"),d=n):this.isFloat&&(n=this.shaders.shader(),n.pipe(d),n.pipe(Wd(4,1)),n.pipe("float.encode"),d=n),this.byteMemo=new NM(this.renderer,this.shaders,{items:c*r,channels:t,width:u,height:h,depth:f,history:0,type:ns}),this.byteCompose=new FM(this.renderer,this.shaders,{map:d,items:c*r,width:u,height:h,depth:f,stpq:l}),this.byteMemo.adopt(this.byteCompose);const g=c*u*r,v=h*f;return this.samples=this.width*this.height*this.depth,this.bytes=new Uint8Array(g*v*4),this.isFloat&&(this.floats=new Float32Array(this.bytes.buffer)),this.data=this.isFloat?this.floats:this.bytes,this.streamer=this.generate(this.data),this.active={items:0,width:0,height:0,depth:0},this.sampled={items:0,width:0,height:0,depth:0},this.rect={w:0,h:0},this.pad={x:0,y:0,z:0,w:0},this.stretch=r,this.isIndexed=o,this.setActive(c,u,h,f)}generate(e){return mI(e,this.samples,4,this.items)}setActive(e,t,n,r){let s;if(e===this.active.items&&t===this.active.width&&n===this.active.height&&r===this.active.depth)return;[this.active.items,this.active.width,this.active.height,this.active.depth]=Array.from([e,t,n,r]),this.floatCompose!=null&&this.floatCompose.cover(t,n,r),this.byteCompose!=null&&this.byteCompose.cover(t*this.stretch,n,r),{items:e}=this,{width:t}=this.active,n=this.depth===1?this.active.height:this.height,{depth:r}=this.active;const a=e*t*this.stretch,o=n*r;return[this.sampled.items,this.sampled.width,this.sampled.height,this.sampled.depth]=Array.from([e,t,n,r]),[this.rect.w,this.rect.h]=Array.from([a,o]),[this.pad.x,this.pad.y,this.pad.z,this.pad.w]=Array.from(s=[this.sampled.width-this.active.width,this.sampled.height-this.active.height,this.sampled.depth-this.active.depth,this.sampled.items-this.active.items]),s}update(e){return this.floatMemo!=null&&this.floatMemo.render(e),this.byteMemo!=null?this.byteMemo.render(e):void 0}post(){const e=this.renderer.getRenderTarget();this.renderer.setRenderTarget(this.byteMemo.target.targets[0]),this.gl.readPixels(0,0,this.rect.w,this.rect.h,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.bytes),this.renderer.setRenderTarget(e)}readFloat(e){return this.floatMemo!=null?this.floatMemo.read(e):void 0}readByte(e){return this.byteMemo!=null?this.byteMemo.read(e):void 0}setCallback(e){this.emitter=this.callback(e)}callback(e){if(!this.isIndexed)return e;const t=this.width,n=this.height,r=this.items,s=function(a,o,l,c){let u=c;const h=u%r;u=(u-h)/r;const f=u%t;u=(u-f)/t;const d=u%n;return u=(u-d)/n,e(a,o,l,c,f,d,u,h)};return s.reset=()=>typeof e.reset=="function"?e.reset():void 0,s}iterate(){let e,t,n,r=this.emitter;typeof r.reset=="function"&&r.reset();const{consume:s,skip:a,count:o,done:l,reset:c}=this.streamer;c();const u=this.sampled.width|0;let h=this.sampled.height|0;const f=this.sampled.depth|0,d=this.sampled.items|0,g=this.pad.x|0,v=this.pad.y|0,A=this.pad.z|0,_=this.pad.w|0,y=u*h*d*(f-A);if(!this.isIndexed){const C=r;r=(S,I,P,B)=>C(S,I,P,B,x,e,t,n)}let x=e=t=n=h=0;for(;!l()&&h<y;){h++;const C=s(r);if(++n===d-_&&(a(g),n=0,++x===u-g&&(a(d*g),x=0,++e===h-v&&(a(d*u*v),e=0,t++))),C===!1)break}return Math.floor(o()/d)}dispose(){return this.floatMemo!=null&&this.floatMemo.unadopt(this.floatCompose),this.floatMemo!=null&&this.floatMemo.dispose(),this.floatCompose!=null&&this.floatCompose.dispose(),this.byteMemo!=null&&this.byteMemo.unadopt(this.byteCompose),this.byteMemo!=null&&this.byteMemo.dispose(),this.byteCompose!=null&&this.byteCompose.dispose(),this.floatMemo=this.byteMemo=this.floatCompose=this.byteCompose=null}}class RWe extends Lf{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s}=n;const{material:a,position:o,sprite:l,map:c,combine:u,linear:h,color:f,mask:d,stpq:g}=n;s==null&&(s={});const v=s.styleColor!=null;this.geometry=new xU({items:n.items,width:n.width,height:n.height,depth:n.depth}),this._adopt(s),this._adopt(this.geometry.uniforms);const A=t.material(),_=A.vertex;_.pipe(this._vertexColor(f,d)),_.require(this._vertexPosition(o,a,c,2,g)),_.require(l),_.pipe("sprite.position",this.uniforms),_.pipe("project.position",this.uniforms),A.fragment=r=this._fragmentColor(v,a,f,d,c,2,g,u,h);const y=t.material();y.vertex.pipe(_),y.fragment.pipe(r),y.fragment.pipe("fragment.transparent",this.uniforms);const x=t.material();x.vertex.pipe(_),x.fragment.pipe(r),x.fragment.pipe("fragment.solid",this.uniforms);const C=x.link({side:ms});this.fillMaterial=this._material(C);const S=y.link({side:ms});this.edgeMaterial=this._material(S),this.fillObject=new cr(this.geometry,this.fillMaterial),this.edgeObject=new cr(this.geometry,this.edgeMaterial),this._raw(this.fillObject),this.fillObject.userData=C,this._raw(this.edgeObject),this.edgeObject.userData=S,this.renders=[this.fillObject,this.edgeObject]}show(e,t,n,r){return this._show(this.edgeObject,!0,t,n,r),this._show(this.fillObject,e,t,n,r)}dispose(){return this.geometry.dispose(),this.edgeMaterial.dispose(),this.fillMaterial.dispose(),this.renders=this.geometry=this.edgeMaterial=this.fillMaterial=this.edgeObject=this.fillObject=null,super.dispose()}}class DWe extends bv{constructor(e){let t,n,r,s,a;super(e),this._clipUniforms(),this.items=r=+e.items||2,this.width=a=+e.width||1,this.height=n=+e.height||1,this.depth=t=+e.depth||1,this.sides=s=Math.max(0,r-2);const o=a*n*t,l=r*o,c=s*o;this.setIndex(new Un(new Uint32Array(c*3),1)),this.setAttribute("position4",new Un(new Float32Array(l*4),4)),this.setAttribute("strip",new Un(new Float32Array(l*3),3));const u=this._emitter("index"),h=this._emitter("position4"),f=this._emitter("strip");let d=0;for(let v=0,A=o,_=0<=A;_?v<A:v>A;_?v++:v--){let y=d;for(let x=0,C=s,S=0<=C;S?x<C:x>C;S?x++:x--)x&1?(u(y+1),u(y),u(y+2)):(u(y),u(y+1),u(y+2)),y++;d+=r}const g=r-1;for(let v=0,A=t,_=0<=A;_?v<A:v>A;_?v++:v--)for(let y=0,x=n,C=0<=x;C?y<x:y>x;C?y++:y--)for(let S=0,I=a,P=0<=I;P?S<I:S>I;P?S++:S--){let B=1;h(S,y,v,0),f(1,2,B);for(let M=1,D=g,F=1<=D;F?M<D:M>D;F?M++:M--)h(S,y,v,M),f(M-1,M+1,B=-B);h(S,y,v,g),f(g-2,g-1,-B)}this._finalize(),this.clip()}clip(e,t,n,r){e==null&&({width:e}=this),t==null&&({height:t}=this),n==null&&({depth:n}=this),r==null&&({items:r}=this);const s=Math.max(0,r-2);return this._clipGeometry(e,t,n,r),this._clipOffsets(3,e,t,n,s,this.width,this.height,this.depth,this.sides)}}class LWe extends Lf{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s,material:a}=n;const{position:o,color:l,mask:c,map:u,combine:h,linear:f,stpq:d}=n;s==null&&(s={}),a==null&&(a=!0);const g=s.styleColor!=null;this.geometry=new DWe({items:n.items,width:n.width,height:n.height,depth:n.depth}),this._adopt(s),this._adopt(this.geometry.uniforms);const v=t.material(),A=v.vertex;A.pipe(this._vertexColor(l,c)),A.require(this._vertexPosition(o,a,u,2,d)),a||A.pipe("mesh.position",this.uniforms),a&&A.pipe("strip.position.normal",this.uniforms),A.pipe("project.position",this.uniforms),v.fragment=r=this._fragmentColor(g,a,l,c,u,2,d,h,f),r.pipe("fragment.color",this.uniforms);const _=v.link({side:ms});this.material=this._material(_);const y=new cr(this.geometry,this.material);y.userData=_,this._raw(y),this.renders=[y]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}class OWe extends Lf{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s,material:a}=n;const{position:o,color:l,normal:c,mask:u,map:h,combine:f,linear:d,stpq:g,intUV:v}=n;s==null&&(s={}),a==null&&(a=!0);const A=s.styleColor!=null;this.geometry=new yU({width:n.width,height:n.height,surfaces:n.surfaces,layers:n.layers,closedX:n.closedX,closedY:n.closedY}),this._adopt(s),this._adopt(this.geometry.uniforms);const _={};n.closedX&&(_.SURFACE_CLOSED_X=""),n.closedY&&(_.SURFACE_CLOSED_Y=""),v&&(_.POSITION_UV_INT="");const y=t.material(),x=y.vertex;x.pipe(this._vertexColor(l,u)),x.require(this._vertexPosition(o,a,h,2,g)),c?(x.require(c),x.pipe("surface.position.normal",this.uniforms,_)):(a||x.pipe("surface.position",this.uniforms,_),a&&x.pipe("surface.position.shaded",this.uniforms,_)),x.pipe("project.position",this.uniforms),y.fragment=r=this._fragmentColor(A,a,l,u,h,2,g,f,d),r.pipe("fragment.color",this.uniforms);const C=y.link({side:ms});this.material=this._material(C);const S=new cr(this.geometry,this.material);S.userData=C,this._raw(S),this.renders=[S]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}const NWe=512/16;class FWe extends AU{constructor(e,t,n){let r;if(n.width||(n.width=256),n.height||(n.height=256),n.type=ns,n.channels=1,n.backed=!0,super(e,t,n,!1),this.font=n.font!=null?n.font:["sans-serif"],this.size=n.size||24,this.style=n.style!=null?n.style:"normal",this.variant=n.variant!=null?n.variant:"normal",this.weight=n.weight!=null?n.weight:"normal",this.outline=(r=+(n.outline!=null?n.outline:5))!=null?r:0,this.gamma=1,typeof navigator<"u"){const s=navigator.userAgent;s.match(/Chrome/)&&s.match(/OS X/)&&(this.gamma=.5)}this.scratchW=this.scratchH=0,this.build(n)}build(e){super.build(e);let t=16;t=this.size,t+=4+2*Math.min(1,this.outline);const n=NWe*t,r=document.createElement("canvas");r.width=n,r.height=t;const s=h=>`${h.replace(/(['"\\])/g,"\\$1")}`,a=this.font.map(s).join(", "),o=r.getContext("2d",{willReadFrequently:!0});o.font=`${this.style} ${this.variant} ${this.weight} ${this.size}px ${a}`,o.fillStyle="#FF0000",o.textAlign="left",o.textBaseline="bottom",o.lineJoin="round";const l=[],c=this.outline*3;for(let h=0,f=c,d=0<=f;d?h<f:h>f;d?h++:h--){const g=("00"+Math.max(0,-h*8+128-!h*8).toString(16)).slice(-2);l.push("#"+g+g+g)}const u=new Uint8Array(n*t*2);return this.canvas=r,this.context=o,this.lineHeight=t,this.maxWidth=n,this.colors=l,this.scratch=u,this._allocate=this.allocate.bind(this),this._write=this.write.bind(this)}reset(){return super.reset(),this.mapped={}}begin(){return Array.from(this.rows).map(e=>e.alive=0)}end(){const{mapped:e}=this;for(const t of Array.from(this.rows.slice()))if(t.alive===0){for(const n of Array.from(t.keys))delete e[n];this.collapse(t)}}map(e,t){const{mapped:n}=this,r=n[e];if(r!=null)return r.row.alive++,t(r.x,r.y,r.w,r.h);this.draw(e);const s=this.scratch,a=this.scratchW,o=this.scratchH,l=this._allocate,c=this._write;return l(e,a,o,function(u,h,f){return n[e]={x:h,y:f,w:a,h:o,row:u},c(s,h,f,a,o),t(h,f,a,o)})}draw(e){let t,n,r,s=this.width;const a=this.lineHeight,o=this.outline,l=this.context,c=this.scratch,u=this.maxWidth,{colors:h}=this,f=o+1,d=Math.round(a*1.05-1),g=l.measureText(e);if(s=Math.min(u,Math.ceil(g.width+2*f+1)),l.clearRect(0,0,s,a),this.outline===0){let v,A;for(l.fillText(e,f,d),{data:t}=l.getImageData(0,0,s,a),r=3,n=0,A=t.length/4,v=0<=A;v?n<A:n>A;v?n++:n--)c[n]=t[r],r+=4;return this.scratchW=s,this.scratchH=a}else{let v,A,_,y;for(l.globalCompositeOperation="source-over",A=o+1,n=A,v=A<=1;v?n<=1:n>=1;v?n++:n--)r=n>1?n*2-2:n,l.strokeStyle=h[r-1],l.lineWidth=r,l.strokeText(e,f,d);l.globalCompositeOperation="multiply",l.fillText(e,f,d),{data:t}=l.getImageData(0,0,s,a),r=0;const{gamma:x}=this;for(n=0,y=t.length/4,_=0<=y;_?n<y:n>y;_?n++:n--){const C=t[r];let S=C?t[r+1]/C:1;x===.5&&(S=Math.sqrt(S)),S=Math.min(1,Math.max(0,S));const I=256-C,P=I+(C-I)*S;c[n]=Math.max(0,Math.min(255,P+2)),r+=4}return this.scratchW=s,this.scratchH=a}}}class zWe extends bC{build(e){return super.build(),this.pad={x:0,y:0,z:0},this.streamer=this.generate(this.data)}setActive(e,t,n){let r;return[this.pad.x,this.pad.y,this.pad.z]=Array.from(r=[Math.max(0,this.width-e),Math.max(0,this.height-t),Math.max(0,this.depth-n)]),r}fill(){let e,t,n,r;const{callback:s}=this;typeof s.reset=="function"&&s.reset();const{emit:a,skip:o,count:l,done:c,reset:u}=this.streamer;u();const h=this.width,f=this.height,d=this.pad.x,g=this.pad.y,v=this.samples-this.pad.z*h*f;let A=e=t=n=0;if(d>0||g>0)for(;!c()&&n<v&&(n++,r=s(a,A,e,t),++A===h-d&&(o(d),n+=d,A=0,++e===f-g&&(o(h*g),n+=h*g,e=0,t++)),r!==!1););else for(;!c()&&n<v&&(n++,r=s(a,A,e,t),++A===h&&(A=0,++e===f&&(e=0,t++)),r!==!1););return Math.floor(l()/this.items)}through(e,t){let n,r,s,a;const{consume:o,done:l,skip:c}=a=this.streamer,{emit:u}=n=t.streamer;let h=r=s=0,f=()=>o((d,g,v,A)=>e(u,d,g,v,A,h,r,s));return f=AA(f,this.items),()=>{let d;a.reset(),n.reset();const g=this.width,v=this.height,A=this.pad.x,_=this.pad.y,y=this.samples-this.pad.z*g*v;if(h=r=s=d=0,A>0||_>0)for(;!l()&&d<y;)d++,f(),++h===g-A&&(c(A),h=0,++r===v-_&&(c(g*_),r=0,s++));else for(;!l()&&d<y;)d++,f(),++h===g&&(h=0,++r===v&&(r=0,s++));return a.count()}}}const CU={sprite:RWe,point:IWe,line:EWe,surface:OWe,face:xWe,strip:LWe,arrow:_We,screen:wU,memoScreen:FM,debug:yWe,dataBuffer:bC,arrayBuffer:mWe,matrixBuffer:SWe,voxelBuffer:zWe,pushBuffer:PWe,renderToTexture:bU,memo:NM,readback:BWe,atlas:AU,textAtlas:FWe,scene:gU},UWe=Object.freeze(Object.defineProperty({__proto__:null,Classes:CU,Factory:vU,Scene:gU},Symbol.toStringTag,{value:"Module"})),VWe=`uniform float worldUnit;
uniform float lineDepth;
uniform float lineWidth;
uniform float focusDepth;

uniform vec4 geometryClip;
uniform float arrowSize;
uniform float arrowSpace;

attribute vec4 position4;
attribute vec3 arrow;
attribute vec2 attach;

// External
vec3 getPosition(vec4 xyzw, float canonical);

void getArrowGeometry(vec4 xyzw, float near, float mid, float far, out vec3 left, out vec3 right, out vec3 middle, out vec3 start) {
  right  = getPosition(xyzw, 1.0);
  left   = getPosition(vec4(near, xyzw.yzw), 0.0);
  middle = getPosition(vec4(mid,  xyzw.yzw), 0.0);
  start  = getPosition(vec4(far,  xyzw.yzw), 0.0);
}

mat4 getArrowMatrix(vec3 left, vec3 right, vec3 middle, vec3 start) {

  float depth = focusDepth;
  if (lineDepth < 1.0) {
    // Depth blending
    float z = max(0.00001, -right.z);
    depth = mix(z, focusDepth, lineDepth);
  }

  vec3 diff = left - right;
  float l = length(diff);
  if (l == 0.0) {
    return mat4(1.0, 0.0, 0.0, 0.0,
                0.0, 1.0, 0.0, 0.0,
                0.0, 0.0, 1.0, 0.0,
                0.0, 0.0, 0.0, 1.0);
  }

  // Construct TBN matrix around shaft
  vec3 t = normalize(diff);
  vec3 n = normalize(cross(t, t.yzx + vec3(.1, .2, .3)));
  vec3 b = cross(n, t);

  // Shrink arrows when vector gets too small
  // Approach linear scaling with cubic ease the smaller we get
  float size = arrowSize * lineWidth * worldUnit * depth * 1.25;
  l = max(length(right - middle), length(middle - start)) * 2.0 * arrowSpace;
  float mini = clamp(1.0 - l / size * .333, 0.0, 1.0);
  float scale = 1.0 - mini * mini * mini;
  float range = size * scale;

  // Size to 2.5:1 ratio
  float rangeNB = range / 2.5;

  // Anchor at end position
  return mat4(vec4(n * rangeNB,  0),
              vec4(b * rangeNB,  0),
              vec4(t * range, 0),
              vec4(right,  1.0));
}

vec3 getArrowPosition() {
  vec3 left, right, middle, start;

  // Clip arrow position and attachment anchors to data
  vec4 p = min(geometryClip, position4);
  vec3 a = vec3(min(geometryClip.x, p.x + attach.x), geometryClip.x / 2.0, min(geometryClip.x, attach.y));

  getArrowGeometry(p, a.x, a.y, a.z, left, right, middle, start);
  mat4 matrix = getArrowMatrix(left, right, middle, start);

  return (matrix * vec4(arrow.xyz, 1.0)).xyz;

}
`,HWe=`uniform vec4 axisStep;
uniform vec4 axisPosition;

vec4 getAxisPosition(vec4 xyzw, inout vec4 stpq) {
  return axisStep * xyzw.x + axisPosition;
}
`,$We=`uniform vec4 basisScale;
uniform vec4 basisOffset;
uniform vec4 viewScale;
uniform vec4 viewOffset;

vec4 getCartesian4Position(vec4 position, inout vec4 stpq) {
  return position * basisScale + basisOffset;
}
`,GWe=`uniform mat4 viewMatrix;

vec4 getCartesianPosition(vec4 position, inout vec4 stpq) {
  return viewMatrix * vec4(position.xyz, 1.0);
}
`,QWe=`uniform vec4 clampLimit;

vec4 getClampXYZW(vec4 xyzw) {
  return clamp(xyzw, vec4(0.0), clampLimit);
}
`,qWe=`vec4 opaqueColor(vec4 color) {
  return vec4(color.rgb, 1.0);
}
`,jWe=`uniform vec4 geometryClip;
attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);

vec3 getFacePosition() {
  vec4 p = min(geometryClip, position4);
  return getPosition(p, 1.0);
}
`,WWe=`attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);

varying vec3 vNormal;
varying vec3 vLight;
varying vec3 vPosition;

void getFaceGeometry(vec4 xyzw, out vec3 pos, out vec3 normal) {
  vec3 a, b, c;

  a   = getPosition(vec4(xyzw.xyz, 0.0), 0.0);
  b   = getPosition(vec4(xyzw.xyz, 1.0), 0.0);
  c   = getPosition(vec4(xyzw.xyz, 2.0), 0.0);

  pos = getPosition(xyzw, 1.0);
  normal = normalize(cross(c - a, b - a));
}

vec3 getFacePositionNormal() {
  vec3 center, normal;

  getFaceGeometry(position4, center, normal);
  vNormal   = normal;
  vLight    = normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz);
  vPosition = -center;

  return center;
}
`,YWe=`/*
Float encoding technique by
Carlos Scheidegger
https://github.com/cscheid/lux/blob/master/src/shade/bits/encode_float.js

Conversion to GLSL by:
http://concord-consortium.github.io/lab/experiments/webgl-gpgpu/script.js
*/

float shift_right(float v, float amt) { 
  v = floor(v) + 0.5; 
  return floor(v / exp2(amt)); 
}

float shift_left(float v, float amt) { 
  return floor(v * exp2(amt) + 0.5); 
}

float mask_last(float v, float bits) { 
  return mod(v, shift_left(1.0, bits)); 
}

float extract_bits(float num, float from, float to) { 
  from = floor(from + 0.5); to = floor(to + 0.5); 
  return mask_last(shift_right(num, from), to - from); 
}

vec4 encode_float(float val) { 
  if (val == 0.0) return vec4(0, 0, 0, 0); 
  float valuesign = val > 0.0 ? 0.0 : 1.0; 
  val = abs(val); 
  float exponent = floor(log2(val)); 
  float biased_exponent = exponent + 127.0; 
  float fraction = ((val / exp2(exponent)) - 1.0) * 8388608.0; 
  float t = biased_exponent / 2.0; 
  float last_bit_of_biased_exponent = fract(t) * 2.0; 
  float remaining_bits_of_biased_exponent = floor(t); 
  float byte4 = extract_bits(fraction, 0.0, 8.0) / 255.0; 
  float byte3 = extract_bits(fraction, 8.0, 16.0) / 255.0; 
  float byte2 = (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0; 
  float byte1 = (valuesign * 128.0 + remaining_bits_of_biased_exponent) / 255.0; 
  return vec4(byte4, byte3, byte2, byte1); 
}
`,XWe=`uniform vec4 indexModulus;

vec4 getSample(vec4 xyzw);
vec4 getIndex(vec4 xyzw);

vec4 floatPackIndex(vec4 xyzw) {
  vec4 value = getSample(xyzw);
  vec4 index = getIndex(xyzw);

  vec4 offset = floor(index + .5) * indexModulus;
  vec2 sum2 = offset.xy + offset.zw;
  float sum = sum2.x + sum2.y;
  return vec4(value.xyz, sum);
}`,KWe=`vec4 getSample(vec4 xyzw);

float floatStretch(vec4 xyzw, float channelIndex) {
  vec4 sample = getSample(xyzw);
  vec2 xy = channelIndex > 1.5 ? sample.zw : sample.xy;
  return mod(channelIndex, 2.0) > .5 ? xy.y : xy.x;
}`,JWe=`varying float vClipStrokeWidth;
varying float vClipStrokeIndex;
varying vec3  vClipStrokeEven;
varying vec3  vClipStrokeOdd;
varying vec3  vClipStrokePosition;

void clipStrokeFragment() {
  bool odd = mod(vClipStrokeIndex, 2.0) >= 1.0;

  vec3 tangent;
  if (odd) {
    tangent = vClipStrokeOdd;
  }
  else {
    tangent = vClipStrokeEven;
  }

  float travel = dot(vClipStrokePosition, normalize(tangent)) / vClipStrokeWidth;
  if (mod(travel, 16.0) > 8.0) {
    discard;
  }
}
`,ZWe=`varying float vClipStrokeWidth;
varying float vClipStrokeIndex;
varying vec3  vClipStrokeEven;
varying vec3  vClipStrokeOdd;
varying vec3  vClipStrokePosition;

void clipStrokeFragment() {
  bool odd = mod(vClipStrokeIndex, 2.0) >= 1.0;

  vec3 tangent;
  if (odd) {
    tangent = vClipStrokeOdd;
  }
  else {
    tangent = vClipStrokeEven;
  }

  float travel = dot(vClipStrokePosition, normalize(tangent)) / vClipStrokeWidth;
  if (mod(travel, 4.0) > 2.0) {
    discard;
  }
}
`,eYe=`varying vec2 vClipEnds;

void clipEndsFragment() {
  if (vClipEnds.x < 0.0 || vClipEnds.y < 0.0) discard;
}
`,tYe=`varying float vClipProximity;

void clipProximityFragment() {
  if (vClipProximity >= 0.5) discard;
}`,nYe=`void setFragmentColor(vec4 color) {
  gl_FragColor = color;
}`,iYe=`vec4 fragmentRGBA(vec4 rgba, vec4 stpq) {
  return rgba;
}`,rYe=`void setFragmentColor(vec4 color) {
  if (color.a < 1.0) discard;
  gl_FragColor = color;
}`,sYe=`void setFragmentColor(vec4 color) {
  if (color.a >= 1.0) discard;
  gl_FragColor = color;
}`,aYe=`uniform vec4 gridPosition;
uniform vec4 gridStep;
uniform vec4 gridAxis;

vec4 sampleData(vec2 xy);

vec4 getGridPosition(vec4 xyzw) {
  vec4 onAxis  = gridAxis * sampleData(vec2(xyzw.y, 0.0)).x;
  vec4 offAxis = gridStep * xyzw.x + gridPosition;
  return onAxis + offAxis;
}
`,oYe=`uniform float growScale;
uniform vec4  growMask;
uniform vec4  growAnchor;

vec4 getSample(vec4 xyzw);

vec4 getGrowSample(vec4 xyzw) {
  vec4 anchor = xyzw * growMask + growAnchor;

  vec4 position = getSample(xyzw);
  vec4 center = getSample(anchor);

  return mix(center, position, growScale);
}`,lYe=`uniform float joinStride;
uniform float joinStrideInv;

float getIndex(vec4 xyzw);
vec4 getRest(vec4 xyzw);
vec4 injectIndices(float a, float b);

vec4 getJoinXYZW(vec4 xyzw) {

  float a = getIndex(xyzw);
  float b = a * joinStrideInv;

  float integer  = floor(b);
  float fraction = b - integer;
  
  return injectIndices(fraction * joinStride, integer) + getRest(xyzw);
}
`,cYe=`varying float vPixelSize;

vec4 getLabelAlphaColor(vec4 color, vec4 sample) {
  float mask = clamp(sample.r * 1000.0, 0.0, 1.0);
  float alpha = (sample.r - .5) * vPixelSize + .5;
  float a = mask * alpha * color.a;
  if (a <= 0.0) discard;
  return vec4(color.xyz, a);
}
`,uYe=`vec2 mapUV(vec4 uvwo, vec4 stpq) {
  return uvwo.xy;
}
`,hYe=`uniform float outlineExpand;
uniform float outlineStep;
uniform vec3  outlineColor;

varying float vPixelSize;

const float PIXEL_STEP = 255.0 / 16.0;

vec4 getLabelOutlineColor(vec4 color, vec4 sample) {
  float ps = vPixelSize * PIXEL_STEP;
  float os = outlineStep;

  float sdf = sample.r - .5 + outlineExpand;
  vec2  sdfs = vec2(sdf, sdf + os);
  vec2  alpha = clamp(sdfs * ps + .5, 0.0, 1.0);

  if (alpha.y <= 0.0) {
    discard;
  }

  vec3 blend = color.xyz;
  if (alpha.y > alpha.x) {
    blend = sqrt(mix(outlineColor * outlineColor, blend * blend, alpha.x));
  }
  
  return vec4(blend, alpha.y * color.a);
}
`,fYe=`uniform vec4 layerScale;
uniform vec4 layerBias;

#define PROJECT_ORTHOGONAL

vec4 layerPosition(vec4 position, inout vec4 stpq) {
  return layerScale * position + layerBias;
}
`,dYe=`// External
vec4 sampleData(vec4 xyzw);

vec4 lerpDepth(vec4 xyzw) {
  float x = xyzw.z;
  float i = floor(x);
  float f = x - i;
    
  vec4 xyzw1 = vec4(xyzw.xy, i, xyzw.w);
  vec4 xyzw2 = vec4(xyzw.xy, i + 1.0, xyzw.w);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, f);
}
`,pYe=`// External
vec4 sampleData(vec4 xyzw);

vec4 lerpHeight(vec4 xyzw) {
  float x = xyzw.y;
  float i = floor(x);
  float f = x - i;
    
  vec4 xyzw1 = vec4(xyzw.x, i, xyzw.zw);
  vec4 xyzw2 = vec4(xyzw.x, i + 1.0, xyzw.zw);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, f);
}
`,mYe=`// External
vec4 sampleData(vec4 xyzw);

vec4 lerpItems(vec4 xyzw) {
  float x = xyzw.w;
  float i = floor(x);
  float f = x - i;
    
  vec4 xyzw1 = vec4(xyzw.xyz, i);
  vec4 xyzw2 = vec4(xyzw.xyz, i + 1.0);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, f);
}
`,gYe=`// External
vec4 sampleData(vec4 xyzw);

vec4 lerpWidth(vec4 xyzw) {
  float x = xyzw.x;
  float i = floor(x);
  float f = x - i;
    
  vec4 xyzw1 = vec4(i, xyzw.yzw);
  vec4 xyzw2 = vec4(i + 1.0, xyzw.yzw);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, f);
}
`,vYe=`// Units and calibration
uniform float worldUnit;
uniform float lineWidth;
uniform float lineDepth;
uniform float focusDepth;

// General data index
uniform vec4 geometryClip;
attribute vec4 position4;

// (Top/bottom -1,1)
attribute float line;

// 0...1 for round or bevel joins
#ifdef LINE_JOIN_DETAIL
attribute float joint;
#else
const float joint = 0.0;
#endif

// Knock out excessively long line segments (e.g. for asymtpotes)
#ifdef LINE_PROXIMITY
uniform float lineProximity;
varying float vClipProximity;
#endif

// Ghetto line stroking (local only, not global)
#ifdef LINE_STROKE
varying float vClipStrokeWidth;
varying float vClipStrokeIndex;
varying vec3  vClipStrokeEven;
varying vec3  vClipStrokeOdd;
varying vec3  vClipStrokePosition;
#endif

// External
vec3 getPosition(vec4 xyzw, float canonical);

// Clip line ends for arrows / decoration
#ifdef LINE_CLIP
uniform float clipRange;
uniform vec2  clipStyle;
uniform float clipSpace;

attribute vec2 strip;

varying vec2 vClipEnds;

void clipEnds(vec4 xyzw, vec3 center, vec3 pos) {

  // Sample start of line strip
  vec4 xyzwS = vec4(0.0, xyzw.yzw);
  vec3 start = getPosition(xyzwS, 0.0);

  // Sample middle of line strip
  vec4 xyzwM = vec4(geometryClip.x / 2.0, xyzw.yzw);
  vec3 middle = getPosition(xyzwM, 0.0);

#ifdef LINE_CLOSED
  vec3 end = start;
#else
  // Sample other end of line strip
  vec4 xyzwE = vec4(geometryClip.x, xyzw.yzw);
  vec3 end   = getPosition(xyzwE, 0.0);
#endif

  // Measure length
  float l = max(length(end - middle), length(middle - start)) * clipSpace * 2.0;

  // Arrow length (=2.5x radius)
  float arrowSize = 1.25 * clipRange * lineWidth * worldUnit;

#ifdef LINE_CLOSED
  // Clip around start/end
  end = start;
#endif

  vClipEnds = vec2(1.0);

  if (clipStyle.y > 0.0) {
    // Depth blend end
    float depth = focusDepth;
    if (lineDepth < 1.0) {
      float z = max(0.00001, -end.z);
      depth = mix(z, focusDepth, lineDepth);
    }

    // Absolute arrow length
    float size = arrowSize * depth;

    // Adjust clip range
    // Approach linear scaling with cubic ease the smaller we get
    float mini = clamp(1.0 - l / size * .333, 0.0, 1.0);
    float scale = 1.0 - mini * mini * mini;
    float invrange = 1.0 / (size * scale);

    // Clip end
    vec3 diff = end - center;
    if(diff == vec3(0.0))
      vClipEnds.x = -1.0;
    else {
      diff = normalize(end - center);
      float d = dot(end - pos, diff);
      vClipEnds.x = d * invrange - 1.0;
    }
  }

  if (clipStyle.x > 0.0) {
    // Depth blend start
    float depth = focusDepth;
    if (lineDepth < 1.0) {
      float z = max(0.00001, -start.z);
      depth = mix(z, focusDepth, lineDepth);
    }

    // Absolute arrow length
    float size = arrowSize * depth;

    // Adjust clip range
    // Approach linear scaling with cubic ease the smaller we get
    float mini = clamp(1.0 - l / size * .333, 0.0, 1.0);
    float scale = 1.0 - mini * mini * mini;
    float invrange = 1.0 / (size * scale);

    // Clip start
    vec3 diff = center - start;
    if(diff == vec3(0.0))
      vClipEnds.y = -1.0;
    else {
      diff = normalize(center - start);
      float d = dot(pos - start, diff);
      vClipEnds.y = d * invrange - 1.0;
    }
  }
}
#endif

// Adjust left/center/right to be inside near/far z range
const float epsilon = 1e-5;
void fixCenter(inout vec3 left, inout vec3 center, inout vec3 right) {
  if (center.z >= 0.0) {
    if (left.z < 0.0) {
      float d = (center.z + epsilon) / (center.z - left.z);
      center = mix(center, left, d);
    }
    else if (right.z < 0.0) {
      float d = (center.z + epsilon) / (center.z - right.z);
      center = mix(center, right, d);
    }
  }

  if (left.z >= 0.0) {
    if (center.z < 0.0) {
      float d = (left.z + epsilon) / (left.z - center.z);
      left = mix(left, center, d);
    }
  }

  if (right.z >= 0.0) {
    if (center.z < 0.0) {
      float d = (right.z + epsilon) / (right.z - center.z);
      right = mix(right, center, d);
    }
  }
}

vec4 wrapAround(vec4 xyzw) {
#ifdef LINE_CLOSED
  float gx = geometryClip.x;
  if (xyzw.x < 0.0) xyzw.x += gx;
  if (xyzw.x >= gx) xyzw.x -= gx;
#endif
  return xyzw;
}

// Sample the source data in an edge-aware manner
void getLineGeometry(vec4 xyzw, float edge, out vec3 left, out vec3 center, out vec3 right) {
  vec4 delta = vec4(1.0, 0.0, 0.0, 0.0);

  center = getPosition(xyzw, 1.0);
  left   = (edge > -0.5) ? getPosition(wrapAround(xyzw - delta), 0.0) : center;
  right  = (edge < 0.5)  ? getPosition(wrapAround(xyzw + delta), 0.0) : center;
}

// Calculate the position for a vertex along the line, including joins
vec3 getLineJoin(float edge, bool odd, vec3 left, vec3 center, vec3 right, float width, float offset, float joint) {
  vec2 join = vec2(1.0, 0.0);

  fixCenter(left, center, right);

  vec4 a = vec4(left.xy, right.xy);
  vec4 b = a / vec4(left.zz, right.zz);

  vec2 l = b.xy;
  vec2 r = b.zw;
  vec2 c = center.xy / center.z;

  vec4 d = vec4(l, c) - vec4(c, r);
  float l1 = dot(d.xy, d.xy);
  float l2 = dot(d.zw, d.zw);

  if (l1 + l2 > 0.0) {

    if (edge > 0.5 || l2 == 0.0) {
      vec2 nl = normalize(d.xy);
      vec2 tl = vec2(nl.y, -nl.x);

#ifdef LINE_PROXIMITY
      vClipProximity = 1.0;
#endif

#ifdef LINE_STROKE
      vClipStrokeEven = vClipStrokeOdd = normalize(left - center);
#endif
      join = tl;
    }
    else if (edge < -0.5 || l1 == 0.0) {
      vec2 nr = normalize(d.zw);
      vec2 tr = vec2(nr.y, -nr.x);

#ifdef LINE_PROXIMITY
      vClipProximity = 1.0;
#endif

#ifdef LINE_STROKE
      vClipStrokeEven = vClipStrokeOdd = normalize(center - right);
#endif
      join = tr;
    }
    else {
      // Limit join stretch for tiny segments
      float lmin2 = min(l1, l2) / (width * width);

      // Hide line segment if ratio of leg lengths exceeds promixity threshold
#ifdef LINE_PROXIMITY
      float lr     = l1 / l2;
      float rl     = l2 / l1;
      float ratio  = max(lr, rl);
      float thresh = lineProximity + 1.0;
      vClipProximity = (ratio > thresh * thresh) ? 1.0 : 0.0;
#endif

      // Calculate normals/tangents
      vec2 nl = normalize(d.xy);
      vec2 nr = normalize(d.zw);

      // Calculate tangents
      vec2 tl = vec2(nl.y, -nl.x);
      vec2 tr = vec2(nr.y, -nr.x);

#ifdef LINE_PROXIMITY
      // Mix tangents according to leg lengths
      vec2 tc = normalize(mix(tl, tr, l1/(l1+l2)));
#else
      // Average tangent
      vec2 tc = normalize(tl + tr);
#endif

      // Miter join
      float cosA   = dot(nl, tc);
      float sinA   = max(0.1, abs(dot(tl, tc)));
      float factor = cosA / sinA;
      float scale  = sqrt(1.0 + min(lmin2, factor * factor));

      // Stroke normals
#ifdef LINE_STROKE
      vec3 stroke1 = normalize(left - center);
      vec3 stroke2 = normalize(center - right);

      if (odd) {
        vClipStrokeEven = stroke1;
        vClipStrokeOdd  = stroke2;
      }
      else {
        vClipStrokeEven = stroke2;
        vClipStrokeOdd  = stroke1;
      }
#endif

#ifdef LINE_JOIN_MITER
      // Apply straight up miter
      join = tc * scale;
#endif

#ifdef LINE_JOIN_ROUND
      // Slerp bevel join into circular arc
      float dotProduct = dot(nl, nr);
      float angle = acos(dotProduct);
      float sinT  = sin(angle);
      join = (sin((1.0 - joint) * angle) * tl + sin(joint * angle) * tr) / sinT;
#endif

#ifdef LINE_JOIN_BEVEL
      // Direct bevel join between two flat ends
      float dotProduct = dot(nl, nr);
      join = mix(tl, tr, joint);
#endif

#ifdef LINE_JOIN_DETAIL
      // Check if on inside or outside of joint
      float crossProduct = nl.x * nr.y - nl.y * nr.x;
      if (offset * crossProduct < 0.0) {
        // For near-180-degree bends, correct back to a miter to avoid discontinuities
        float ratio = clamp(-dotProduct * 2.0 - 1.0, 0.0, 1.0);
        // Otherwise collapse the inside vertices into one.
        join = mix(tc * scale, join, ratio * ratio * ratio);
      }
#endif

    }
    return vec3(join, 0.0);
  }
  else {
    return vec3(0.0);
  }

}

// Calculate final line position
vec3 getLinePosition() {
  vec3 left, center, right, join;

  // Up/down along segment
  float offset = line;

  // Clip data
  vec4 p = min(geometryClip, position4);

  // Left/center/right
  float edge = 0.0;
#ifdef LINE_CLOSED
  if (p.x == geometryClip.x) p.x = 0.0;
#else
  if (p.x == geometryClip.x) edge = 1.0;
  if (p.x == 0.0) edge = -1.0;
#endif

  // Get position + adjacent neighbours
  getLineGeometry(p, edge, left, center, right);

#ifdef LINE_STROKE
  // Set parameters for line stroke fragment shader
  vClipStrokePosition = center;
  vClipStrokeIndex = p.x;
  bool odd = mod(p.x, 2.0) >= 1.0;
#else
  bool odd = true;
#endif

  // Divide line width up/down
  float width = lineWidth * 0.5;

  float depth = focusDepth;
  if (lineDepth < 1.0) {
    // Depth blending
    float z = max(0.00001, -center.z);
    depth = mix(z, focusDepth, lineDepth);
  }
  width *= depth;

  // Convert to world units
  width *= worldUnit;

  // Calculate line join
#ifdef LINE_CLOSED
  join = getLineJoin(0.0, odd, left, center, right, width, offset, joint);
#else
  join = getLineJoin(edge, odd, left, center, right, width, offset, joint);
#endif
  vec3 pos = center + join * offset * width;

#ifdef LINE_STROKE
  vClipStrokeWidth = width;
#endif

#ifdef LINE_CLIP
  clipEnds(p, center, pos);
#endif

  return pos;
}
`,_Ye=`uniform vec2 dataResolution;
uniform vec2 dataPointer;

vec2 map2DData(vec2 xy) {
  return (xy + dataPointer) * dataResolution;
}
`,AYe=`uniform vec2 dataResolution;
uniform vec2 dataPointer;

vec2 map2DData(vec2 xy) {
  return fract((xy + dataPointer) * dataResolution);
}
`,bYe=`void mapXyzw2DV(vec4 xyzw, out vec2 xy, out float z) {
  xy = xyzw.xy;
  z  = xyzw.z;
}

`,yYe=`vec4 alignXYZW(vec4 xyzw) {
  return floor(xyzw + .5);
}

`,wYe=`uniform float textureItems;
uniform float textureHeight;

vec2 mapXyzwTexture(vec4 xyzw) {
  
  float x = xyzw.x;
  float y = xyzw.y;
  float z = xyzw.z;
  float i = xyzw.w;
  
  return vec2(i, y) + vec2(x, z) * vec2(textureItems, textureHeight);
}

`,xYe=`varying vec4 vColor;

vec4 getColor() {
  if (vColor.a <= 0.0) discard;
  return vColor;
}
`,CYe=`#ifdef POSITION_STPQ
varying vec4 vSTPQ;
#endif
#ifdef POSITION_U
varying float vU;
#endif
#ifdef POSITION_UV
varying vec2 vUV;
#endif
#ifdef POSITION_UVW
varying vec3 vUVW;
#endif
#ifdef POSITION_UVWO
varying vec4 vUVWO;
#endif

vec4 getSample(vec4 uvwo, vec4 stpq);

vec4 getMapColor() {
  #ifdef POSITION_STPQ
  vec4 stpq = vSTPQ;
  #else
  vec4 stpq = vec4(0.0);
  #endif

  #ifdef POSITION_U
  vec4 uvwo = vec4(vU, 0.0, 0.0, 0.0);
  #endif
  #ifdef POSITION_UV
  vec4 uvwo = vec4(vUV, 0.0, 0.0);
  #endif
  #ifdef POSITION_UVW
  vec4 uvwo = vec4(vUVW, 0.0);
  #endif
  #ifdef POSITION_UVWO
  vec4 uvwo = vec4(vUVWO);
  #endif

  return getSample(uvwo, stpq);
}
`,EYe=`varying float vMask;

float ease(float t) {
  t = clamp(t, 0.0, 1.0);
  return t * t * (3.0 - 2.0 * t);
}

vec4 maskColor() {
  if (vMask <= 0.0) discard;
  return vec4(vec3(1.0), ease(vMask));
}
`,SYe=`#ifdef POSITION_STPQ
varying vec4 vSTPQ;
#endif
#ifdef POSITION_U
varying float vU;
#endif
#ifdef POSITION_UV
varying vec2 vUV;
#endif
#ifdef POSITION_UVW
varying vec3 vUVW;
#endif
#ifdef POSITION_UVWO
varying vec4 vUVWO;
#endif

vec4 getSample(vec4 rgba, vec4 stpq);

vec4 getMaterialColor(vec4 rgba) {
  vec4 stpq = vec4(0.0);

  #ifdef POSITION_U
  stpq.x = vU;
  #endif
  #ifdef POSITION_UV
  stpq.xy = vUV;
  #endif
  #ifdef POSITION_UVW
  stpq.xyz = vUVW;
  #endif
  #ifdef POSITION_UVWO
  stpq = vUVWO;
  #endif

  #ifdef POSITION_STPQ
  stpq = vSTPQ;
  #endif

  return getSample(rgba, stpq);
}
`,MYe=`
#extension GL_OES_standard_derivatives : enable
varying vec3 vNormal;
varying vec3 vLight;
varying vec3 vPosition;

vec3 offSpecular(vec3 color) {
  vec3 c = 1.0 - color;
  return 1.0 - c * c;
}

vec4 getShadedColor(vec4 rgba) {
  
  vec3 color = rgba.xyz;
  vec3 color2 = offSpecular(rgba.xyz);

  vec3 normal = normalize(vNormal);
  vec3 light = normalize(vLight);
  vec3 position = normalize(vPosition);
  
  // Workaround to avoid gl_FrontFacing. See https://github.com/unconed/mathbox/pull/26
  vec3 pdx = dFdx(vPosition);
  vec3 pdy = dFdy(vPosition);
  bool frontFacting = dot(vNormal, cross(pdx, pdy)) > 0.0;

  float side = frontFacting ? 1.0 : -1.0;
  float cosine  = side * dot(normal, light);
  float diffuse = mix(max(0.0, cosine), .5 + .5 * cosine, .1);
  
  vec3  halfLight = normalize(light + position);
	float cosineHalf = max(0.0, side * dot(normal, halfLight));
	float specular = pow(cosineHalf, 16.0);
	
	return vec4(color * (diffuse * .9 + .05) + .25 * color2 * specular, rgba.a);
}
`,TYe="",IYe=`vec4 getGammaInColor(vec4 rgba) {
  return vec4(rgba.rgb * rgba.rgb, rgba.a);
}
`,PYe=`vec4 getGammaOutColor(vec4 rgba) {
  return vec4(sqrt(rgba.rgb), rgba.a);
}
`,kYe=`vec4 mapUVWO(vec4 uvwo, vec4 stpq) {
  return uvwo;
}
`,BYe=`uniform vec4 geometryClip;
attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);

vec3 getMeshPosition() {
  vec4 p = min(geometryClip, position4);
  return getPosition(p, 1.0);
}
`,RYe=`attribute vec4 position4;
uniform vec4 geometryClip;
varying vec4 vColor;

// External
vec4 getSample(vec4 xyzw);

void vertexColor() {
  vec4 p = min(geometryClip, position4);
  vColor = getSample(p);
}
`,DYe=`attribute vec4 position4;
uniform vec4 geometryResolution;
uniform vec4 geometryClip;
varying float vMask;

// External
float getSample(vec4 xyzw);

void maskLevel() {
  vec4 p = min(geometryClip, position4);
  vMask = getSample(p * geometryResolution);
}
`,LYe=`uniform vec4 geometryResolution;

#ifdef POSITION_STPQ
varying vec4 vSTPQ;
#endif
#ifdef POSITION_U
varying float vU;
#endif
#ifdef POSITION_UV
varying vec2 vUV;
#endif
#ifdef POSITION_UVW
varying vec3 vUVW;
#endif
#ifdef POSITION_UVWO
varying vec4 vUVWO;
#endif

// External
vec3 getPosition(vec4 xyzw, in vec4 stpqIn, out vec4 stpqOut);

vec3 getMeshPosition(vec4 xyzw, float canonical) {
  vec4 stpqOut, stpqIn = xyzw * geometryResolution;
  vec3 xyz = getPosition(xyzw, stpqIn, stpqOut);

  #ifdef POSITION_MAP
  if (canonical > 0.5) {
    #ifdef POSITION_STPQ
    vSTPQ = stpqOut;
    #endif
    #ifdef POSITION_U
    vU = stpqOut.x;
    #endif
    #ifdef POSITION_UV
    vUV = stpqOut.xy;
    #endif
    #ifdef POSITION_UVW
    vUVW = stpqOut.xyz;
    #endif
    #ifdef POSITION_UVWO
    vUVWO = stpqOut;
    #endif
  }
  #endif
  return xyz;
}
`,OYe=`uniform float transitionEnter;
uniform float transitionExit;
uniform vec4  transitionScale;
uniform vec4  transitionBias;
uniform float transitionSkew;
uniform float transitionActive;

uniform vec4  moveFrom;
uniform vec4  moveTo;

float ease(float t) {
  t = clamp(t, 0.0, 1.0);
  return 1.0 - (2.0 - t) * t;
}

vec4 getTransitionPosition(vec4 xyzw, inout vec4 stpq) {
  if (transitionActive < 0.5) return xyzw;

  float enter   = transitionEnter;
  float exit    = transitionExit;
  float skew    = transitionSkew;
  vec4  scale   = transitionScale;
  vec4  bias    = transitionBias;

  float factor  = 1.0 + skew;
  float offset  = dot(vec4(1.0), stpq * scale + bias);

  float a1 = ease(enter * factor - offset);
  float a2 = ease(exit  * factor + offset - skew);

  return xyzw + a1 * moveFrom + a2 * moveTo;
}`,NYe=`vec4 getMask(vec4 xyzw) {
  return vec4(1.0);
}`,FYe=`varying float vPixelSize;

float getDiscAlpha(float mask) {
  // Approximation: 1 - x*x is approximately linear around x = 1 with slope 2
  return vPixelSize * (1.0 - mask);
  //  return vPixelSize * 2.0 * (1.0 - sqrt(mask));
}
`,zYe=`varying float vPixelSize;

float getDiscHollowAlpha(float mask) {
  return vPixelSize * (0.5 - 2.0 * abs(sqrt(mask) - .75));
}
`,UYe=`varying float vPixelSize;

float getGenericAlpha(float mask) {
  return vPixelSize * 2.0 * (1.0 - mask);
}
`,VYe=`varying float vPixelSize;

float getGenericHollowAlpha(float mask) {
  return vPixelSize * (0.5 - 2.0 * abs(mask - .75));
}
`,HYe=`varying vec2 vSprite;

float getSpriteMask(vec2 xy);
float getSpriteAlpha(float mask);

void setFragmentColorFill(vec4 color) {
  float mask = getSpriteMask(vSprite);
  if (mask > 1.0) {
    discard;
  }
  float alpha = getSpriteAlpha(mask);
  if (alpha >= 1.0) {
    discard;
  }
  gl_FragColor = vec4(color.rgb, alpha * color.a);
}
`,$Ye=`varying vec2 vSprite;

float getSpriteMask(vec2 xy);
float getSpriteAlpha(float mask);

void setFragmentColorFill(vec4 color) {
  float mask = getSpriteMask(vSprite);
  if (mask > 1.0) {
    discard;
  }
  float alpha = getSpriteAlpha(mask);
  if (alpha < 1.0) {
    discard;
  }
  gl_FragColor = color;
}

`,GYe=`varying float vPixelSize;

float getCircleMask(vec2 uv) {
  return dot(uv, uv);
}
`,QYe=`varying float vPixelSize;

float getDiamondMask(vec2 uv) {
  vec2 a = abs(uv);
  return a.x + a.y;
}
`,qYe=`varying float vPixelSize;

float getTriangleDownMask(vec2 uv) {
  uv.y += .25;
  return max(uv.y, abs(uv.x) * .866 - uv.y * .5 + .6);
}
`,jYe=`varying float vPixelSize;

float getTriangleLeftMask(vec2 uv) {
  uv.x += .25;
  return max(uv.x, abs(uv.y) * .866 - uv.x * .5 + .6);
}
`,WYe=`varying float vPixelSize;

float getTriangleRightMask(vec2 uv) {
  uv.x -= .25;
  return max(-uv.x, abs(uv.y) * .866 + uv.x * .5 + .6);
}
`,YYe=`varying float vPixelSize;

float getSquareMask(vec2 uv) {
  vec2 a = abs(uv);
  return max(a.x, a.y);
}
`,XYe=`varying float vPixelSize;

float getTriangleUpMask(vec2 uv) {
  uv.y -= .25;
  return max(-uv.y, abs(uv.x) * .866 + uv.y * .5 + .6);
}
`,KYe=`uniform float pointDepth;

uniform float pixelUnit;
uniform float renderScale;
uniform float renderScaleInv;
uniform float focusDepth;

uniform vec4 geometryClip;
attribute vec4 position4;
attribute vec2 sprite;

varying vec2 vSprite;
varying float vPixelSize;

const float pointScale = POINT_SHAPE_SCALE;

// External
float getPointSize(vec4 xyzw);
vec3 getPosition(vec4 xyzw, float canonical);

vec3 getPointPosition() {
  // Discard out-of-range points by generating degenerate face
  if (
    position4.x > geometryClip.x ||
    position4.y > geometryClip.y ||
    position4.z > geometryClip.z ||
    position4.w > geometryClip.w
  ) return vec3(0.0, 0.0, 0.0);
  vec4 p = position4;

  vec3 center = getPosition(p, 1.0);

  // Depth blending
  // TODO: orthographic camera
  // Workaround: set depth = 0
  float z = -center.z;
  float depth = mix(z, focusDepth, pointDepth);

  // Match device/unit mapping
  // Sprite goes from -1..1, width = 2.
  float pointSize = getPointSize(p);
  float size = pointScale * pointSize * pixelUnit * .5;
  float depthSize = depth * size;

  // Pad sprite by half a pixel to make the anti-aliasing straddle the pixel edge
  // Note: pixelsize measures radius
  float pixelSize = .5 * (pointDepth > 0.0 ? depthSize / z : size);
  float paddedSize = pixelSize + 0.5;
  float padFactor = paddedSize / pixelSize;

  vPixelSize = paddedSize;
  vSprite    = sprite;

  return center + vec3(sprite * depthSize * renderScaleInv * padFactor, 0.0);
}
`,JYe=`uniform float pointSize;

float getPointSize(vec4 xyzw) {
  return pointSize;
}`,ZYe=`uniform float pointSize;

vec4 getSample(vec4 xyzw);

float getPointSize(vec4 xyzw) {
  return pointSize * getSample(xyzw).x;
}`,eXe=`uniform float polarBend;
uniform float polarFocus;
uniform float polarAspect;
uniform float polarHelix;

uniform mat4 viewMatrix;

vec4 getPolarPosition(vec4 position, inout vec4 stpq) {
  if (polarBend > 0.0) {

    if (polarBend < 0.001) {
      // Factor out large addition/subtraction of polarFocus
      // to avoid numerical error
      // sin(x) ~ x
      // cos(x) ~ 1 - x * x / 2
      vec2 pb = position.xy * polarBend;
      float ppbbx = pb.x * pb.x;
      return viewMatrix * vec4(
        position.x * (1.0 - polarBend + (pb.y * polarAspect)),
        position.y * (1.0 - .5 * ppbbx) - (.5 * ppbbx) * polarFocus / polarAspect,
        position.z + position.x * polarHelix * polarBend,
        1.0
      );
    }
    else {
      vec2 xy = position.xy * vec2(polarBend, polarAspect);
      float radius = polarFocus + xy.y;
      return viewMatrix * vec4(
        sin(xy.x) * radius,
        (cos(xy.x) * radius - polarFocus) / polarAspect,
        position.z + position.x * polarHelix * polarBend,
        1.0
      );
    }
  }
  else {
    return viewMatrix * vec4(position.xyz, 1.0);
  }
}`,tXe=`uniform float styleZBias;
uniform float styleZIndex;

void setPosition(vec3 position) {

  #ifdef PROJECT_ORTHOGONAL
  // Orthogonal projection with depth preservation around z = 1
  vec4 pos = projectionMatrix * vec4(position, 1.0);
  pos.xy *= -position.z;
  #else
  // Normal perspective projection
  vec4 pos = projectionMatrix * vec4(position, 1.0);
  #endif

  // Apply relative Z bias
  float bias  = (1.0 - styleZBias / 32768.0);
  pos.z *= bias;

  // Apply large scale Z index changes
  if (styleZIndex > 0.0) {
    float z = pos.z / pos.w;
    pos.z = ((z + 1.0) / (styleZIndex + 1.0) - 1.0) * pos.w;
  }

  gl_Position = pos;
}`,nXe=`// This is three.js' global uniform, missing from fragment shaders.
uniform mat4 projectionMatrix;

vec4 readbackPosition(vec3 position, vec4 stpq) {
  vec4 pos = projectionMatrix * vec4(position, 1.0);
  vec3 final = pos.xyz / pos.w;
  if (final.z < -1.0) {
    return vec4(0.0, 0.0, 0.0, -1.0);
  }
  else {
    return vec4(final, -position.z);
  }
}
`,iXe=`uniform vec4 geometryScale;
attribute vec4 position4;

vec4 getRawPositionScale() {
  return geometryScale * position4;
}
`,rXe=`uniform vec4 repeatModulus;

vec4 getRepeatXYZW(vec4 xyzw) {
  return mod(xyzw + .5, repeatModulus) - .5;
}
`,sXe=`uniform vec4 resampleBias;

vec4 resamplePadding(vec4 xyzw) {
  return xyzw + resampleBias;
}`,aXe=`uniform vec4 resampleFactor;

vec4 resampleRelative(vec4 xyzw) {
  return xyzw * resampleFactor;
}`,oXe=`uniform float transitionEnter;
uniform float transitionExit;
uniform vec4  transitionScale;
uniform vec4  transitionBias;
uniform float transitionSkew;
uniform float transitionActive;

float getTransitionSDFMask(vec4 stpq) {
  if (transitionActive < 0.5) return 1.0;

  float enter   = transitionEnter;
  float exit    = transitionExit;
  float skew    = transitionSkew;
  vec4  scale   = transitionScale;
  vec4  bias    = transitionBias;

  float factor  = 1.0 + skew;
  float offset  = dot(vec4(1.0), stpq * scale + bias);

  vec2 d = vec2(enter, exit) * factor + vec2(-offset, offset - skew);
  if (exit  == 1.0) return d.x;
  if (enter == 1.0) return d.y;
  return min(d.x, d.y);
}`,lXe=`uniform vec4 reverseScale;
uniform vec4 reverseOffset;

vec4 getReverseOffset(vec4 xyzw) {
  return xyzw * reverseScale + reverseOffset;
}`,cXe=`vec3 getRootPosition(vec4 position, in vec4 stpqIn, out vec4 stpqOut) {
  stpqOut = stpqIn; // avoid inout confusion
  return position.xyz;
}`,uXe=`uniform sampler2D dataTexture;

vec4 sample2D(vec2 uv) {
  return texture2D(dataTexture, uv);
}
`,hXe=`uniform vec4 scaleAxis;
uniform vec4 scaleOffset;

vec4 sampleData(float x);

vec4 getScalePosition(vec4 xyzw) {
  return scaleAxis * sampleData(xyzw.x).x + scaleOffset;
}
`,fXe=`uniform vec4 remapSTPQScale;

vec4 screenMapSTPQ(vec4 xyzw, out vec4 stpq) {
  stpq = xyzw * remapSTPQScale;
  return xyzw;
}
`,dXe=`uniform vec2 remapUVScale;

vec4 screenMapXY(vec4 uvwo, vec4 stpq) {
  return vec4(floor(remapUVScale * uvwo.xy), 0.0, 0.0);
}
`,pXe=`uniform vec2 remapUVScale;
uniform vec2 remapModulus;
uniform vec2 remapModulusInv;

vec4 screenMapXYZW(vec4 uvwo, vec4 stpq) {
  vec2 st = floor(remapUVScale * uvwo.xy);
  vec2 xy = st * remapModulusInv;
  vec2 ixy = floor(xy);
  vec2 fxy = xy - ixy;
  vec2 zw = fxy * remapModulus;
  return vec4(ixy.x, zw.y, ixy.y, zw.x);
}
`,mXe=`vec2 screenPassUV(vec4 uvwo, vec4 stpq) {
  return uvwo.xy;
}
`,gXe=`void setScreenPosition(vec4 position) {
  gl_Position = vec4(position.xy * 2.0 - 1.0, 0.5, 1.0);
}
`,vXe=`uniform vec4 sliceOffset;

vec4 getSliceOffset(vec4 xyzw) {
  return xyzw + sliceOffset;
}
`,_Xe=`uniform float sphericalBend;
uniform float sphericalFocus;
uniform float sphericalAspectX;
uniform float sphericalAspectY;
uniform float sphericalScaleY;

uniform mat4 viewMatrix;

vec4 getSphericalPosition(vec4 position, inout vec4 stpq) {
  if (sphericalBend > 0.0001) {

    vec3 xyz = position.xyz * vec3(sphericalBend, sphericalBend / sphericalAspectY * sphericalScaleY, sphericalAspectX);
    float radius = sphericalFocus + xyz.z;
    float cosine = cos(xyz.y) * radius;

    return viewMatrix * vec4(
      sin(xyz.x) * cosine,
      sin(xyz.y) * radius * sphericalAspectY,
      (cos(xyz.x) * cosine - sphericalFocus) / sphericalAspectX,
      1.0
    );
  }
  else {
    return viewMatrix * vec4(position.xyz, 1.0);
  }
}`,AXe=`uniform float splitStride;

vec2 getIndices(vec4 xyzw);
vec4 getRest(vec4 xyzw);
vec4 injectIndex(float v);

vec4 getSplitXYZW(vec4 xyzw) {
  vec2 uv = getIndices(xyzw);
  float offset = uv.x + uv.y * splitStride;
  return injectIndex(offset) + getRest(xyzw);
}
`,bXe=`uniform vec4 spreadOffset;
uniform mat4 spreadMatrix;

// External
vec4 getSample(vec4 xyzw);

vec4 getSpreadSample(vec4 xyzw) {
  vec4 sample = getSample(xyzw);
  return sample + spreadMatrix * (spreadOffset + xyzw);
}
`,yXe=`varying vec2 vSprite;

vec4 getSample(vec2 xy);

vec4 getSpriteColor() {
  return getSample(vSprite);
}`,wXe=`uniform vec2 spriteOffset;
uniform float spriteScale;
uniform float spriteDepth;
uniform float spriteSnap;

uniform vec2 renderOdd;
uniform float renderScale;
uniform float renderScaleInv;
uniform float pixelUnit;
uniform float focusDepth;

uniform vec4 geometryClip;
attribute vec4 position4;
attribute vec2 sprite;

varying float vPixelSize;

// External
vec3 getPosition(vec4 xyzw, float canonical);
vec4 getSprite(vec4 xyzw);

vec3 getSpritePosition() {
  // Clip points
  vec4 p = min(geometryClip, position4);
  float diff = length(position4 - p);
  if (diff > 0.0) {
    return vec3(0.0, 0.0, 1000.0);
  }

  // Make sprites
  vec3 center = getPosition(p, 1.0);
  vec4 atlas = getSprite(p);

  // Sprite goes from -1..1, width = 2.
  // -1..1 -> -0.5..0.5
  vec2 halfSprite = sprite * .5;
  vec2 halfFlipSprite = vec2(halfSprite.x, -halfSprite.y);

#ifdef POSITION_UV
  // Assign UVs
  vUV = atlas.xy + atlas.zw * (halfFlipSprite + .5);
#endif

  // Depth blending
  // TODO: orthographic camera
  // Workaround: set depth = 0
  float depth = focusDepth, z;
  z = -center.z;
  if (spriteDepth < 1.0) {
    depth = mix(z, focusDepth, spriteDepth);
  }
  
  // Match device/unit mapping 
  float size = pixelUnit * spriteScale;
  float depthSize = depth * size;

  // Calculate pixelSize for anti-aliasing
  float pixelSize = (spriteDepth > 0.0 ? depthSize / z : size);
  vPixelSize = pixelSize;

  // Position sprite
  vec2 atlasOdd = fract(atlas.zw / 2.0);
  vec2 offset = (spriteOffset + halfSprite * atlas.zw) * depthSize;
  if (spriteSnap > 0.5) {
    // Snap to pixel (w/ epsilon shift to avoid jitter)
    return vec3(((floor(center.xy / center.z * renderScale + 0.001) + renderOdd + atlasOdd) * center.z + offset) * renderScaleInv, center.z);
  }
  else {
    // Place directly
    return center + vec3(offset * renderScaleInv, 0.0);
  }

}
`,xXe=`uniform float stereoBend;
uniform vec4 basisScale;
uniform vec4 basisOffset;
uniform mat4 viewMatrix;
uniform vec2 view4D;

vec4 getStereographic4Position(vec4 position, inout vec4 stpq) {
  
  vec4 transformed;
  if (stereoBend > 0.0001) {

    float r = length(position);
    float w = r + position.w;
    vec4 project = vec4(position.xyz / w, r);
    
    transformed = mix(position, project, stereoBend);
  }
  else {
    transformed = position;
  }

  vec4 pos4 = transformed * basisScale - basisOffset;
  vec3 xyz = (viewMatrix * vec4(pos4.xyz, 1.0)).xyz;
  return vec4(xyz, pos4.w * view4D.y + view4D.x);
}
`,CXe=`uniform float stereoBend;

uniform mat4 viewMatrix;

vec4 getStereoPosition(vec4 position, inout vec4 stpq) {
  if (stereoBend > 0.0001) {

    vec3 pos = position.xyz;
    float r = length(pos);
    float z = r + pos.z;
    vec3 project = vec3(pos.xy / z, r);
    
    vec3 lerped = mix(pos, project, stereoBend);

    return viewMatrix * vec4(lerped, 1.0);
  }
  else {
    return viewMatrix * vec4(position.xyz, 1.0);
  }
}`,EXe=`varying vec2 vST;

vec4 getSample(vec2 st);

vec4 getSTSample() {
  return getSample(vST);
}
`,SXe=`varying vec2 vUV;

void setRawUV(vec4 xyzw) {
  vUV = xyzw.xy;
}
`,MXe=`uniform vec4 geometryClip;
attribute vec4 position4;
attribute vec3 strip;

// External
vec3 getPosition(vec4 xyzw, float canonical);

varying vec3 vNormal;
varying vec3 vLight;
varying vec3 vPosition;

void getStripGeometry(vec4 xyzw, vec3 strip, out vec3 pos, out vec3 normal) {
  vec3 a, b, c;

  a   = getPosition(xyzw, 1.0);
  b   = getPosition(vec4(xyzw.xyz, strip.x), 0.0);
  c   = getPosition(vec4(xyzw.xyz, strip.y), 0.0);

  normal = normalize(cross(c - a, b - a)) * strip.z;
  
  pos = a;
}

vec3 getStripPositionNormal() {
  vec3 center, normal;

  vec4 p = min(geometryClip, position4);

  getStripGeometry(p, strip, center, normal);
  vNormal   = normal;
  vLight    = normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz);
  vPosition = -center;

  return center;
}
`,TXe=`uniform vec3 styleColor;
uniform float styleOpacity;

vec4 getStyleColor() {
  return vec4(styleColor, styleOpacity);
}
`,IXe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideDepth(vec4 xyzw) {
  float x = xyzw.z;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  return sampleData(vec4(xyzw.xy, i + g, xyzw.w));
}
`,PXe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideDepthLerp(vec4 xyzw) {
  float x = xyzw.z;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  vec4 xyzw1 = vec4(xyzw.xy, i, xyzw.w);
  vec4 xyzw2 = vec4(xyzw.xy, i + 1.0, xyzw.w);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, g);
}
`,kXe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideHeight(vec4 xyzw) {
  float x = xyzw.y;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  return sampleData(vec4(xyzw.x, i + g, xyzw.zw));
}
`,BXe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideHeightLerp(vec4 xyzw) {
  float x = xyzw.y;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  vec4 xyzw1 = vec4(xyzw.x, i, xyzw.zw);
  vec4 xyzw2 = vec4(xyzw.x, i + 1.0, xyzw.zw);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, g);
}
`,RXe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideItems(vec4 xyzw) {
  float x = xyzw.w;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  return sampleData(vec4(xyzw.xyz, i + g));
}
`,DXe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideItemsLerp(vec4 xyzw) {
  float x = xyzw.w;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  vec4 xyzw1 = vec4(xyzw.xyz, i);
  vec4 xyzw2 = vec4(xyzw.xyz, i + 1.0);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, g);
}
`,LXe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideWidth(vec4 xyzw) {
  float x = xyzw.x;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  return sampleData(vec4(i + g, xyzw.yzw));
}
`,OXe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideWidthLerp(vec4 xyzw) {
  float x = xyzw.x;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  vec4 xyzw1 = vec4(i, xyzw.yzw);
  vec4 xyzw2 = vec4(i + 1.0, xyzw.yzw);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, g);
}
`,NXe=`attribute vec4 position4;

float getSurfaceHollowMask(vec4 xyzw) {
  vec4 df = abs(fract(position4) - .5);
  vec2 df2 = min(df.xy, df.zw);
  float df3 = min(df2.x, df2.y);
  return df3;
}`,FXe=`uniform vec4 geometryClip;
uniform vec4 geometryResolution;
uniform vec4 mapSize;

attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);

vec3 getSurfacePosition() {
  vec4 p = min(geometryClip, position4);

#ifdef SURFACE_CLOSED_X
  if (p.x == geometryClip.x) p.x = 0.0;
#endif
#ifdef SURFACE_CLOSED_Y
  if (p.y == geometryClip.y) p.y = 0.0;
#endif

  vec3 xyz = getPosition(p, 1.0);

  // Overwrite UVs
#ifdef POSITION_UV
#ifdef POSITION_UV_INT
  vUV = -.5 + (position4.xy * geometryResolution.xy) * mapSize.xy;
#else
  vUV = position4.xy * geometryResolution.xy;
#endif
#endif

  return xyz;
}
`,zXe=`uniform vec4 mapSize;
uniform vec4 geometryResolution;
uniform vec4 geometryClip;
attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);
vec3 getNormal(vec4 xyzw);

varying vec3 vNormal;
varying vec3 vLight;
varying vec3 vPosition;

vec3 getSurfacePositionNormal() {

  vec4 p = min(geometryClip, position4);
#ifdef SURFACE_CLOSED_X
  if (p.x == geometryClip.x) p.x = 0.0;
#endif
#ifdef SURFACE_CLOSED_Y
  if (p.y == geometryClip.y) p.y = 0.0;
#endif

  vec3 center = getPosition(p, 1.0);
  vNormal     = normalMatrix * normalize(getNormal(p));
  vLight      = normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz); // hardcoded directional light
  vPosition   = -center;

#ifdef POSITION_UV
#ifdef POSITION_UV_INT
  vUV = -.5 + (position4.xy * geometryResolution.xy) * mapSize.xy;
#else
  vUV = position4.xy * geometryResolution.xy;
#endif
#endif

  return center;
}
`,UXe=`uniform vec4 mapSize;
uniform vec4 geometryResolution;
uniform vec4 geometryClip;
attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);

vec4 wrapAround(vec4 xyzw) {
#ifdef SURFACE_CLOSED_X
  float gx = geometryClip.x;
  if (xyzw.x < 0.0) xyzw.x += gx;
  if (xyzw.x >= gx) xyzw.x -= gx;
#endif
#ifdef SURFACE_CLOSED_Y
  float gy = geometryClip.y;
  if (xyzw.y < 0.0) xyzw.y += gy;
  if (xyzw.y >= gy) xyzw.y -= gy;
#endif
  return xyzw;
}

void getSurfaceGeometry(vec4 xyzw, float edgeX, float edgeY, out vec3 left, out vec3 center, out vec3 right, out vec3 up, out vec3 down) {
  vec4 deltaX = vec4(1.0, 0.0, 0.0, 0.0);
  vec4 deltaY = vec4(0.0, 1.0, 0.0, 0.0);

  center =                  getPosition(xyzw, 1.0);
  left   =                  center;
  down   =                  center;
  right  = (edgeX < 0.5)  ? getPosition(wrapAround(xyzw + deltaX), 0.0) : (2.0 * center - getPosition(xyzw - deltaX, 0.0));
  up     = (edgeY < 0.5)  ? getPosition(wrapAround(xyzw + deltaY), 0.0) : (2.0 * center - getPosition(xyzw - deltaY, 0.0));
}

vec3 getSurfaceNormal(vec3 left, vec3 center, vec3 right, vec3 up, vec3 down) {
  vec3 dx = right - left;
  vec3 dy = up    - down;
  vec3 n = cross(dy, dx);
  if (length(n) > 0.0) {
    return normalize(n);
  }
  return vec3(0.0, 1.0, 0.0);
}

varying vec3 vNormal;
varying vec3 vLight;
varying vec3 vPosition;

vec3 getSurfacePositionShaded() {
  vec3 left, center, right, up, down;

  vec4 p = min(geometryClip, position4);
  vec2 surface = vec2(0.0);
#ifdef SURFACE_CLOSED_X
  if (p.x == geometryClip.x) p.x = 0.0;
#else
  if (p.x == geometryClip.x) surface.x = 1.0;
  //if (p.x == 0.0) surface.x = -1.0;
#endif
#ifdef SURFACE_CLOSED_Y
  if (p.y == geometryClip.y) p.y = 0.0;
#else
  if (p.y == geometryClip.y) surface.y = 1.0;
  //if (p.y == 0.0) surface.y = -1.0;
#endif

  getSurfaceGeometry(p, surface.x, surface.y, left, center, right, up, down);
  vNormal   = getSurfaceNormal(left, center, right, up, down);
  vLight    = normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz); // hardcoded directional light
  vPosition = -center;

#ifdef POSITION_UV
#ifdef POSITION_UV_INT
  vUV = -.5 + (position4.xy * geometryResolution.xy) * mapSize.xy;
#else
  vUV = position4.xy * geometryResolution.xy;
#endif
#endif

  return center;
}
`,VXe=`uniform float worldUnit;
uniform float focusDepth;
uniform float tickSize;
uniform float tickEpsilon;
uniform vec3  tickNormal;
uniform vec2  tickStrip;

vec4 getSample(vec4 xyzw);

vec3 transformPosition(vec4 position, in vec4 stpqIn, out vec4 stpqOut);

vec3 getTickPosition(vec4 xyzw, in vec4 stpqIn, out vec4 stpqOut) {
  float epsilon = tickEpsilon;

  // determine tick direction
  float leftX  = max(tickStrip.x, xyzw.y - 1.0);
  float rightX = min(tickStrip.y, xyzw.y + 1.0);
  
  vec4 left    = getSample(vec4(leftX,  xyzw.zw, 0.0));
  vec4 right   = getSample(vec4(rightX, xyzw.zw, 0.0));
  vec4 diff    = right - left;

  vec3 normal  = cross(normalize(diff.xyz + vec3(diff.w)), tickNormal);
  float bias   = max(0.0, 1.0 - length(normal) * 2.0);
       normal  = mix(normal, tickNormal.yzx, bias * bias);
  
  // transform (point) and (point + delta)
  vec4 center  = getSample(vec4(xyzw.yzw, 0.0));
  vec4 delta   = vec4(normal, 0.0) * epsilon;

  vec4 a = center;
  vec4 b = center + delta;

  vec4 _;
  vec3 c = transformPosition(a, stpqIn, stpqOut);
  vec3 d = transformPosition(b, stpqIn, _);
  
  // sample on either side to create line
  float line = xyzw.x - .5;
  vec3  mid  = c;
  vec3  side = normalize(d - c);

  return mid + side * line * tickSize * worldUnit * focusDepth;
}
`,HXe=`uniform mat4 transformMatrix;

vec4 transformPosition(vec4 position, inout vec4 stpq) {
  return transformMatrix * vec4(position.xyz, 1.0);
}
`,$Xe=`uniform mat4 transformMatrix;
uniform vec4 transformOffset;

vec4 transformPosition(vec4 position, inout vec4 stpq) {
  return transformMatrix * position + transformOffset;
}
`,GXe=`// Implicit three.js uniform
// uniform mat4 viewMatrix;

vec4 getViewPosition(vec4 position, inout vec4 stpq) {
  return (viewMatrix * vec4(position.xyz, 1.0));
}
`;let lo=class zM{static initClass(){this.index=0,this.IN=0,this.OUT=1}static id(e){return++zM.index}constructor(e,t=null){this.parent=t,this.id=zM.id(),this.nodes=[],e&&this.add(e)}inputs(){const e=[];for(const t of Array.from(this.nodes))for(const n of Array.from(t.inputs))n.input===null&&e.push(n);return e}outputs(){const e=[];for(const t of Array.from(this.nodes))for(const n of Array.from(t.outputs))n.output.length===0&&e.push(n);return e}getIn(e){return Array.from(this.inputs()).filter(t=>t.name===e)[0]}getOut(e){return Array.from(this.outputs()).filter(t=>t.name===e)[0]}add(e,t){if(e.length){for(const n of Array.from(e))this.add(n);return}if(e.graph&&!t)throw new Error("Adding node to two graphs at once");e.graph=this,this.nodes.push(e)}remove(e,t){if(e.length){for(const n of Array.from(e))this.remove(n);return}if(e.graph!==this)throw new Error("Removing node from wrong graph.");t||e.disconnect(),this.nodes.splice(this.nodes.indexOf(e),1),e.graph=null}adopt(e){if(e.length){for(const t of Array.from(e))this.adopt(t);return}e.graph.remove(e,!0),this.add(e,!0)}};lo.initClass();class ll{static initClass(){this.index=0}static make(e,t){t==null&&(t={});const n=t;if(e.meta!=null)for(const r in e.meta){const s=e.meta[r];n[r]=s}return new ll(e.inout,e.name,e.hint,e.type,n)}static id(e){return`_io_${++ll.index}_${e}`}static hint(e){return e=e.replace(/^_io_[0-9]+_/,""),e=e.replace(/_i_o$/,""),e=e.replace(/(In|Out|Inout|InOut)$/,"")}constructor(e,t,n,r,s,a){this.inout=e,this.name=t,this.hint=n,this.type=r,s==null&&(s={}),this.meta=s,this.id=a,this.hint==null&&(this.hint=ll.hint(this.name)),this.node=null,this.input=null,this.output=[],this.id==null&&(this.id=ll.id(this.hint))}morph(e){return this.inout=e.inout,this.name=e.name,this.hint=e.hint,this.type=e.type,this.meta=e.meta}dupe(e){e==null&&(e=this.id);const t=ll.make(this);return t.name=e,t}connect(e){if(this.inout===lo.IN&&e.inout===lo.OUT)return e.connect(this);if(this.inout!==lo.OUT||e.inout!==lo.IN)throw new Error("Can only connect out to in.");if(e.input!==this)return e.disconnect(),e.input=this,this.output.push(e)}disconnect(e){if(this.input&&this.input.disconnect(this),this.output.length)if(e){const t=this.output.indexOf(e);if(t>=0)return this.output.splice(t,1),e.input=null}else{for(e of Array.from(this.output))e.input=null;return this.output=[]}}}ll.initClass();let zI=class UM{static initClass(){this.index=0}static id(e){return++UM.index}constructor(e,t){this.owner=e,this.graph=null,this.inputs=[],this.outputs=[],this.all=[],this.outlets=null,this.id=UM.id(),this.setOutlets(t)}getIn(e){return Array.from(this.inputs).filter(t=>t.name===e)[0]}getOut(e){return Array.from(this.outputs).filter(t=>t.name===e)[0]}get(e){return this.getIn(e)||this.getOut(e)}setOutlets(e){if(e!=null){let t;if(this.outlets==null){this.outlets={};for(t of Array.from(e))t instanceof ll||(t=ll.make(t)),this._add(t);return}const n=s=>[s.name,s.inout,s.type].join("-"),r={};for(t of Array.from(e))r[n(t)]=!0;for(let s in this.outlets)t=this.outlets[s],s=n(t),r[s]?r[s]=t:this._remove(t);for(t of Array.from(e)){const s=r[n(t)];s instanceof ll?this._morph(s,t):(t instanceof ll||(t=ll.make(t)),this._add(t))}}return this.outlets}connect(e,t,n){let r,s,a,o,l;const c={},u={},h=d=>l+"/"+d.hint;for(r of Array.from(e.inputs)){let d;!n&&r.input||({type:l}=r,a=h(r),u[a]||(u[a]=r),c[l]=d=c[l]||[],d.push(r))}let f=this.outputs;f=f.filter(d=>!(t&&d.output.length));for(o of Array.from(f.slice()))({type:l}=o),a=h(o),s=c[l],(r=u[a])&&(o.connect(r),delete u[a],s.splice(s.indexOf(r),1),f.splice(f.indexOf(o),1));if(!f.length)return this;for(o of Array.from(f.slice()))({type:l}=o),s=c[l],s&&s.length&&o.connect(s.shift());return this}disconnect(e){let t;for(t of Array.from(this.inputs))t.disconnect();for(t of Array.from(this.outputs))t.disconnect();return this}_key(e){return[e.name,e.inout].join("-")}_add(e){const t=this._key(e);if(e.node)throw new Error("Adding outlet to two nodes at once.");if(this.outlets[t])throw new Error(`Adding two identical outlets to same node. (${t})`);return e.node=this,e.inout===lo.IN&&this.inputs.push(e),e.inout===lo.OUT&&this.outputs.push(e),this.all.push(e),this.outlets[t]=e}_morph(e,t){let n=this._key(t);return delete this.outlets[n],e.morph(t),n=this._key(t),this.outlets[n]=t}_remove(e){const t=this._key(e);if(e.node!==this)throw new Error("Removing outlet from wrong node.");return e.disconnect(),e.node=null,delete this.outlets[t],e.inout===lo.IN&&this.inputs.splice(this.inputs.indexOf(e),1),e.inout===lo.OUT&&this.outputs.splice(this.outputs.indexOf(e),1),this.all.splice(this.all.indexOf(e),1),this}};zI.initClass();const{IN:L1,OUT:UI}=lo,QXe=Object.freeze(Object.defineProperty({__proto__:null,Graph:lo,IN:L1,Node:zI,OUT:UI,Outlet:ll},Symbol.toStringTag,{value:"Module"}));let xA=class j_{static initClass(){this.index=0}static namespace(){return`_sn_${++j_.index}_`}static load(e,t,n){const r=e.parse(t,n),[s,a]=Array.from(e.compile(r));return new j_(e,s,a,t,n)}constructor(e,t,n,r,s){this.language=e,this._signatures=t,this._compiler=n,this._name=r,this._original=s,this.namespace=null,this.code=null,this.main=null,this.entry=null,this.uniforms=null,this.externals=null,this.symbols=null,this.attributes=null,this.varyings=null,this.language||delete this.language,this._signatures||delete this._signatures,this._compiler||delete this._compiler,this._original||delete this._original,this._name||(this._name=this._signatures!=null?this._signatures.main.name:void 0)}clone(){return new j_(this.language,this._signatures,this._compiler,this._name,this._original)}bind(e,t,n,r){let s,a,o;t===""+t?[n,t,r]=Array.from([t,n??{},r??{}]):n!==""+n&&([r,n]=Array.from([n??{},void 0])),this.main=this._signatures.main,this.namespace=(a=n??this.namespace)!=null?a:j_.namespace(),this.entry=this.namespace+this.main.name,this.uniforms={},this.varyings={},this.attributes={},this.externals={},this.symbols=[];const l={},c={},u=function(S){return c[S]=!0,S},h=S=>this.namespace+S;if(e.globals)for(const S of Array.from(e.globals))u(S);const f=e.globalUniforms?u:h,d=e.globalVaryings?u:h,g=e.globalAttributes?u:h,v=h,A=S=>l[S.name]=!0,_=(S,I)=>this.uniforms[f(I??S.name)]=S;o=S=>this.varyings[d(S.name)]=S;const y=S=>this.attributes[g(S.name)]=S,x=S=>{const I=v(S.name);return this.externals[I]=S,this.symbols.push(I)},C=S=>({type:S.type,name:S.name,value:S.value});for(s of Array.from(this._signatures.uniform))A(s);for(s of Array.from(this._signatures.uniform))_(C(s));for(s of Array.from(this._signatures.varying))o(C(s));for(s of Array.from(this._signatures.external))x(s);for(s of Array.from(this._signatures.attribute))y(C(s));for(const S in t)s=t[S],l[S]&&_(s,S);if(this.body=this.code=this._compiler(this.namespace,c,r),r){const S=(()=>{const I=[];for(const P in r)o=r[P],I.push(`#define ${P} ${o}`);return I})().join(`
`);S.length&&(this._original=[S,"//----------------------------------------",this._original].join(`
`))}return null}};xA.initClass();var eh={};(function(i){i.make=function(e){return e==null&&(e=[]),e instanceof Array||(e=[+e!=null?+e:0]),e},i.nest=(e,t)=>e.concat(t),i.compare=function(e,t){const n=Math.min(e.length,t.length);for(let r=0,s=n,a=0<=s;a?r<s:r>s;a?r++:r--){const o=e[r],l=t[r];if(o>l)return-1;if(o<l)return 1}return e=e.length,t=t.length,e>t?-1:e<t?1:0},i.max=function(e,t){return i.compare(e,t)>0?t:e}})(eh);const EU=function(i,e,t,n){const r=i,s={},a=[],o={},l={},c={},u={},h=function(){let y,x;for(x in n){const B=n[x];v(B.node,B.module)}[y,t]=Array.from(f(t)),e!=null&&(y.entry=e);const C=r.build(y,t),I=(()=>{const B=[];for(x in u){const M=u[x];B.push(M)}return B})().sort((B,M)=>eh.compare(B.priority,M.priority)).map(B=>B.code);I.push(C.code);const P=r.lines(I);return{namespace:C.name,library:u,body:C.code,code:P,main:C,entry:C.name,symbols:a,externals:s,uniforms:o,varyings:l,attributes:c}},f=y=>{let x;y=(()=>{const I=[];for(const P in y)x=y[P],I.push(x);return I})(),y.sort((I,P)=>P.priority-I.priority);const C=(I,P,B)=>{g(I,P,B);const{main:M}=P,{entry:D}=P,F=U=>_(I,U),z=U=>A(I,U);return r.call(F,z,D,M.signature,S)},S=r.body();for(x of Array.from(y))C(x.node,x.module,x.priority);return[S,y]},d=function(y,x,C){const S=u[y];return S!=null?S.priority=eh.max(S.priority,C):u[y]={code:x,priority:C}},g=function(y,x,C){let S,I;C=eh.make(C);for(const P in x.library){const B=x.library[P];d(P,B.code,eh.nest(C,B.priority))}d(x.namespace,x.body,C);for(I in x.uniforms)S=x.uniforms[I],o[I]=S;for(I in x.varyings)S=x.varyings[I],l[I]=S;for(I in x.attributes)S=x.attributes[I],c[I]=S;return v(y,x)},v=(y,x)=>(()=>{const C=[];for(const S of Array.from(x.symbols)){const I=x.externals[S];if(A(y,I.name)){const P={};for(const B in I){const M=I[B];P[B]=M}P.name=_(y,I.name),s[S]=P,C.push(a.push(S))}else C.push(void 0)}return C})(),A=function(y,x){const C=y.get(x);if(C.inout===L1)return C.input===null;if(C.inout===UI)return C.output.length===0},_=function(y,x){let C=y.get(x);return C?(C.input&&(C=C.input),{name:x}=C,C.id):null};return h()};class zd{static initClass(){this.index=0}static entry(){return`_pg_${++zd.index}_`}constructor(e,t,n){this.language=e,this.namespace=t,this.graph=n,this.calls={},this.requires={}}call(e,t,n){let r;const s=t.namespace;return(r=this.calls[s])?r.priority=Math.max(r.priority,n):this.calls[s]={node:e,module:t,priority:n},this}require(e,t){const n=t.namespace;return this.requires[n]={node:e,module:t}}assemble(){const e=EU(this.language,this.namespace!=null?this.namespace:zd.entry,this.calls,this.requires),t=new xA;for(const n in e)t[n]=e[n];return t.graph=this.graph,t}}zd.initClass();const SU=function(i,e,t,n){const r=i;let s=[];const a=[],o={},l={},c={},u={},h={},f=function(){const A=r.links(e),_=[];A.defs!=null&&_.push(A.defs),A.bodies!=null&&_.push(A.bodies);for(const S of Array.from(t))g(S.node,S.module,S.priority);s=(()=>{const S=[];for(const I in h){const P=h[I];S.push(P)}return S})().sort((S,I)=>eh.compare(S.priority,I.priority)).map(S=>S.code);let x=r.lines(s);x=r.defuse(x),_.length&&(x=[r.lines(_),x].join(`
`)),x=r.hoist(x),x=r.dedupe(x);const C=n;return{namespace:C.main.name,code:x,main:C.main,entry:C.main.name,externals:o,uniforms:l,attributes:c,varyings:u}},d=function(A,_,y){const x=h[A];return x!=null?x.priority=eh.max(x.priority,y):h[A]={code:_,priority:y}},g=function(A,_,y){let x,C;y=eh.make(y);for(const S in _.library){const I=_.library[S];d(S,I.code,eh.nest(y,I.priority))}d(_.namespace,_.body,y);for(C in _.uniforms)x=_.uniforms[C],l[C]=x;for(C in _.varyings)x=_.varyings[C],u[C]=x;for(C in _.attributes)x=_.attributes[C],c[C]=x;return(()=>{const S=[];for(C of Array.from(_.symbols)){const I=_.externals[C];v(A,I.name)?(o[C]=I,S.push(a.push(C))):S.push(void 0)}return S})()},v=function(A,_){const y=A.get(_);if(!y){const x=(A.owner.snippet!=null?A.owner.snippet._name:void 0)!=null?A.owner.snippet!=null?A.owner.snippet._name:void 0:A.owner.namespace;throw new Error(`Unable to link program. Unlinked callback \`${_}\` on \`${x}\``)}if(y.inout===L1)return y.input===null;if(y.inout===UI)return y.output.length===0};return f()};class MU{constructor(e,t){this.language=e,this.graph=t,this.links=[],this.includes=[],this.modules={},this.visits={}}callback(e,t,n,r,s){return this.links.push({node:e,module:t,priority:n,name:r,external:s})}include(e,t,n){let r;return(r=this.modules[t.namespace])!=null?r.priority=Math.max(n,r.priority):(this.modules[t.namespace]=!0,this.includes.push({node:e,module:t,priority:n}))}visit(e){return this.visits[e]?!1:this.visits[e]=!0}link(e){const t=SU(this.language,this.links,this.includes,e),n=new xA;for(const r in t)n[r]=t[r];return n.graph=this.graph,n}}const{load:qXe}=xA,TU=vL({__proto__:null,Layout:MU,Program:zd,Snippet:xA,assemble:EU,link:SU,load:qXe},[eh]);class th{static previous(e){return e.input!=null?e.input.node.owner:void 0}constructor(e){e==null&&(e=!1),e||this.construct()}construct(){let e;return this.namespace==null&&(this.namespace=zd.entry()),this.node=new zI(this,(e=typeof this.makeOutlets=="function"?this.makeOutlets():void 0)!=null?e:{})}refresh(){let e;return this.node.setOutlets((e=typeof this.makeOutlets=="function"?this.makeOutlets():void 0)!=null?e:{})}clone(){return new th}compile(e,t){const n=new zd(e,t??zd.entry(),this.node.graph);return this.call(n,0),n.assemble()}link(e,t){const n=this.compile(e,t),r=new MU(e,this.node.graph);return this._include(n,r,0),this.export(r,0),r.link(n)}call(e,t){}callback(e,t,n,r,s){}export(e,t){}_info(e){let t=(this.node.owner.snippet!=null?this.node.owner.snippet._name:void 0)!=null?this.node.owner.snippet!=null?this.node.owner.snippet._name:void 0:this.node.owner.namespace;if(e!=null)return t+="."+e}_outlet(e,t){const n=ll.make(e,t);return n.meta.def=e,n}_call(e,t,n){return t.call(this.node,e,n)}_require(e,t){return t.require(this.node,e)}_inputs(e,t,n){return(()=>{const r=[];for(const s of Array.from(e.main.signature)){const a=this.node.get(s.name);r.push(rR(th.previous(a),o=>o.call(t,n+1)))}return r})()}_callback(e,t,n,r,s,a){return t.callback(this.node,e,n,r,s,a)}_include(e,t,n){return t.include(this.node,e,n)}_link(e,t,n){return(()=>{const r=[];for(const s of Array.from(e.symbols)){const a=e.externals[s];let o=this.node.get(a.name);if(!o)throw new VM(`External not found on ${this._info(a.name)}`);if(o.meta.child!=null)continue;let l=o,c;for(;!c&&l;)[l,o]=Array.from([o.meta.parent,l]);if(c=th.previous(o),!c)throw new VM(`Missing connection on ${this._info(a.name)}`);c.callback(t,n+1,s,a,o.input),r.push(c!=null?c.export(t,n+1):void 0)}return r})()}_trace(e,t,n){return(()=>{const r=[];for(const s of Array.from(e.main.signature)){const a=this.node.get(s.name);r.push(rR(th.previous(a),o=>o.export(t,n+1)))}return r})()}}const VM=function(i){const e=new Error(i);return e.name="OutletError",e};VM.prototype=new Error;function rR(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class yC extends th{constructor(e){super(!0),this.snippet=e,this.namespace=e.namespace,this.construct()}clone(){return new yC(this.snippet)}makeOutlets(){const e=this.snippet.main.signature,{externals:t}=this.snippet,{symbols:n}=this.snippet,r=Array.from(e).map(a=>this._outlet(a,{callback:!1})),s=Array.from(n).map(a=>this._outlet(t[a],{callback:!0}));return r.concat(s)}call(e,t){return this._call(this.snippet,e,t),this._inputs(this.snippet,e,t)}export(e,t){if(e.visit(this.namespace,t))return this._link(this.snippet,e,t),this._trace(this.snippet,e,t)}}class O1 extends th{constructor(e){super(!0),this.graph=e,this.construct()}refresh(){return super.refresh(),delete this.subroutine}clone(){return new O1(this.graph)}makeOutlets(){let e;this.make();const t=[];let n=[],r=[];const s=(o,l)=>{if(o.meta.callback){if(o.inout===lo.IN){const c=o.dupe();return c.meta.child==null&&(c.meta.child=o),o.meta.parent=c,t.push(c)}}else return l.push(o.type)};for(e of Array.from(this.graph.inputs()))s(e,n);for(e of Array.from(this.graph.outputs()))s(e,r);n=n.join(","),r=r.join(",");const a=`(${n})(${r})`;return t.push({name:"callback",type:a,inout:lo.OUT,meta:{callback:!0,def:this.subroutine.main}}),t}make(){return this.subroutine=this.graph.compile(this.namespace)}export(e,t){if(e.visit(this.namespace,t))return this._link(this.subroutine,e,t),this.graph.export(e,t)}call(e,t){return this._require(this.subroutine,e,t)}callback(e,t,n,r,s){return this._include(this.subroutine,e,t),this._callback(this.subroutine,e,t,n,r,s)}}class N1 extends th{constructor(e){super(!0),this.graph=e,this.construct()}refresh(){return super.refresh(),delete this.subroutine}clone(){return new N1(this.graph)}makeOutlets(){this.make();const e=[],t={},n={};for(const r of["inputs","outputs"])for(const s of Array.from(this.graph[r]())){let a;["return","callback"].includes(s.hint)&&s.inout===lo.OUT&&(a=s.hint),t[a]!=null&&(a=void 0);const o=s.dupe(a);o.meta.child==null&&(o.meta.child=s),s.meta.parent=o,a!=null&&(t[a]=!0),n[s.name]=o,e.push(o)}return e}make(){return this.subroutine=this.graph.compile(this.namespace)}call(e,t){return this._call(this.subroutine,e,t),this._inputs(this.subroutine,e,t)}export(e,t){if(e.visit(this.namespace,t))return this._link(this.subroutine,e,t),this._trace(this.subroutine,e,t),this.graph.export(e,t)}callback(e,t,n,r,s){return s=s.meta.child,s.node.owner.callback(e,t,n,r,s)}}class wC extends th{constructor(e){super(!0),this.nodes=e,this.construct()}clone(){return new wC(this.nodes)}makeOutlets(){return[]}call(e,t){return(()=>{const n=[];for(const r of Array.from(this.nodes)){const s=r.owner;n.push(s.call(e,t))}return n})()}export(e,t){return(()=>{const n=[];for(const r of Array.from(this.nodes)){const s=r.owner;n.push(s.export(e,t))}return n})()}}const Zw=function(i){const e=[],t=[];for(const n of Array.from(i.nodes)){let r;const s={id:n.id,name:null,type:null,depth:null,graph:null,inputs:[],outputs:[]};e.push(s);const{inputs:a}=s,{outputs:o}=s,l=n.owner;l instanceof yC?(s.name=l.snippet._name,s.type="call",s.code=l.snippet._original):l instanceof O1?(s.name="Callback",s.type="callback",s.graph=Zw(l.graph)):l instanceof N1?(s.name="Isolate",s.type="isolate",s.graph=Zw(l.graph)):l instanceof wC?(s.name="Join",s.type="join"):l!=null&&(s.name==null&&(s.name=l.name!=null?l.name:l.type),s.type==null&&(s.type=l.type),s.code==null&&(s.code=l.code),l.graph!=null&&(s.graph=Zw(l.graph)));const c=function(u){return u=u.replace(")(",")→("),u=u.replace("()","")};for(r of Array.from(n.inputs))a.push({id:r.id,name:r.name,type:c(r.type),open:r.input==null});for(r of Array.from(n.outputs)){o.push({id:r.id,name:r.name,type:c(r.type),open:!r.output.length});for(const u of Array.from(r.output))t.push({from:n.id,out:r.id,to:u.node.id,in:u.id,type:c(r.type)})}}return{nodes:e,links:t}},jXe=3432918353,WXe=461845907,YXe=3864292196,XXe=2246822507,KXe=3266489909;let og=function(i,e){const t=i>>>16&65535,n=i&65535,r=e>>>16&65535,s=e&65535;return n*s+(t*s+n*r<<16>>>0)|0};Math.imul!=null&&Math.imul(4294967295,5)===-5&&({imul:og}=Math);const VI=function(i){let e;const t=i.length;let n=Math.floor(t/2),r=e=0;const s=()=>i.charCodeAt(r++),a=function(o,l){let c=o|l<<16;return c^=c<<9,c=og(c,jXe),c=c<<15|c>>>17,c=og(c,WXe),e^=c,e=e<<13|e>>>19,e=og(e,5),e=e+YXe|0};for(;n--;)a(s(),s());return t&1&&a(s(),0),e^=t,e^=e>>>16,e=og(e,XXe),e^=e>>>13,e=og(e,KXe),e^=e>>>16},JXe=i=>(""+i).replace(/^\s+|\s+$/g,""),ZXe=(i,e,t,n)=>"rgba("+[i,e,t,n].join(", ")+")",sR=function(i,e){e==null&&(e=1);const t=VI(i)^1193046;let n=t&255,r=t>>>8&255,s=t>>>16&255;const a=Math.max(n,r,s),o=140/a,l=Math.round(a/3);return n=Math.min(255,Math.round(o*Math.max(n,l))),r=Math.min(255,Math.round(o*Math.max(r,l))),s=Math.min(255,Math.round(o*Math.max(s,l))),ZXe(n,r,s,e)},ew=function(i){return i=i??"",i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},eKe=function(i){const e=[],t=IU(i,e);return t.update=()=>rKe(t,e),tKe(t),t},tKe=function(i){const e=i.querySelectorAll(".shadergraph-code");return Array.from(e).map(t=>function(){const n=t;return n.parentNode.classList.add("shadergraph-has-code"),n.parentNode.addEventListener("click",r=>n.style.display={block:"none",none:"block"}[n.style.display||"none"])}())},nKe=function(i){let e,t;const n={},r={};for(t of Array.from(i.nodes))n[t.id]=t;for(e of Array.from(i.links))r[e.from]==null&&(r[e.from]=[]),r[e.from].push(e);const s=function(a,o){let l;if(o==null&&(o=0),a.depth=Math.max(a.depth!=null?a.depth:0,o),l=r[a.id])for(e of Array.from(l))s(n[e.to],o+1);return null};for(t of Array.from(i.nodes))t.depth==null&&s(t);return null},IU=function(i,e){let t;nKe(i);const n=document.createElement("div");n.classList.add("shadergraph-graph");const r=[],s={};for(const a of Array.from(i.nodes)){let o;const l=document.createElement("div");l.classList.add("shadergraph-node"),l.classList.add(`shadergraph-node-${a.type}`),l.innerHTML=`<div class="shadergraph-header">${ew(a.name)}</div>`;const c=function(u,h){const f=sR(u.type),d=document.createElement("div");return d.classList.add("shadergraph-outlet"),d.classList.add(`shadergraph-outlet-${h}`),d.innerHTML=`<div class="shadergraph-point" style="background: ${f}"></div>
<div class="shadergraph-type" style="color: ${f}">${ew(u.type)}</div>
<div class="shadergraph-name">${ew(u.name)}</div>`,l.appendChild(d),s[u.id]=d.querySelector(".shadergraph-point")};for(o of Array.from(a.inputs))c(o,"in");for(o of Array.from(a.outputs))c(o,"out");if(a.graph!=null)l.appendChild(IU(a.graph,e));else{const u=document.createElement("div");u.classList.add("shadergraph-clear"),l.appendChild(u)}if(a.code!=null){const u=document.createElement("div");u.classList.add("shadergraph-code"),u.innerHTML=ew(JXe(a.code)),l.appendChild(u)}t=r[a.depth],t==null&&(t=document.createElement("div"),t.classList.add("shadergraph-column"),r[a.depth]=t),t.appendChild(l)}for(t of Array.from(r))t!=null&&n.appendChild(t);for(const a of Array.from(i.links)){const o=sR(a.type);e.push({color:o,out:s[a.out],in:s[a.in]})}return n},aR=i=>i*i,iKe=function(i,e,t,n){let r;const s=t-i,a=n-e,o=Math.sqrt(aR(s)+aR(a));if(Math.abs(a)>Math.abs(s)){const c=(i+t)/2,u=(e+n)/2,h=a>0?.3:-.3;return r=Math.min(Math.abs(s)/2,20+o/8),["M",i,e,"C",i+r,e+",",c,u-o*h,c,u,"C",c,u+o*h,t-r,n+",",t,n].join(" ")}else return r=Math.min(Math.abs(s)/2.5,20+o/4),["M",i,e,"C",i+r,e+",",t-r,n+",",t,n].join(" ")},oR=function(i){return i==null&&(i="svg"),document.createElementNS("http://www.w3.org/2000/svg",i)},rKe=function(i,e){let t;if(i.parentNode==null)return;const n=i.getBoundingClientRect();for(t of Array.from(e)){const a=t.out.getBoundingClientRect(),o=t.in.getBoundingClientRect();t.coords={x1:(a.left+a.right)/2-n.left,y1:(a.top+a.bottom)/2-n.top,x2:(o.left+o.right)/2-n.left,y2:(o.top+o.bottom)/2-n.top}}let r=i.querySelector("svg");r!=null&&i.removeChild(r);let s=i;for(;s.parentNode&&s.offsetHeight===0;)s=s.parentNode;r=oR(),r.setAttribute("width",s.offsetWidth),r.setAttribute("height",s.offsetHeight);for(t of Array.from(e)){const a=t.coords,o=oR("path");o.setAttribute("d",iKe(a.x1,a.y1,a.x2,a.y2)),o.setAttribute("stroke",t.color),o.setAttribute("stroke-width",3),o.setAttribute("fill","transparent"),r.appendChild(o)}return i.appendChild(r)},sKe=function(i){const e=document.createElement("div");e.setAttribute("class","shadergraph-overlay");const t=document.createElement("div");t.setAttribute("class","shadergraph-close"),t.innerHTML="&times;";const n=document.createElement("div");n.setAttribute("class","shadergraph-view");const r=document.createElement("div");return r.setAttribute("class","shadergraph-inside"),r.appendChild(i),n.appendChild(r),e.appendChild(n),e.appendChild(t),t.addEventListener("click",()=>e.parentNode.removeChild(e)),e},lR=function(i){if(i instanceof Node)return i;const e=document.createElement("span");return e.innerText=i??"",e},aKe=function(i){if(i.length!==1){let e;const t=document.createElement("div");for(e of Array.from(i))t.appendChild(lR(e));return t.update=()=>(()=>{const n=[];for(e of Array.from(i))n.push(typeof e.update=="function"?e.update():void 0);return n})(),t}else return lR(i[0])},oKe=Object.freeze(Object.defineProperty({__proto__:null,merge:aKe,overlay:sKe,process:eKe},Symbol.toStringTag,{value:"Module"})),HI=Zw,xC=oKe,lKe=function(i){if(!i)return;if(!i.nodes)return i;const e=HI(i);return xC.process(e)},ex=function(i){return i==null?i:i instanceof Array?i.map(ex):i.vertex!=null&&i.fragment!=null?[ex(i.vertex,ex(i.fragment))]:i._graph!=null?i._graph:i.graph!=null?i.graph:i},PU=function(i){let e=[];for(const t of Array.from(i))t instanceof Array?e=e.concat(PU(t)):t!=null&&e.push(t);return e},kU=function(){const i=PU(ex([].slice.call(arguments)));return xC.merge(Array.from(i).filter(e=>e).map(e=>lKe(e)))},Ed=function(){const i=kU.apply(null,arguments),e=xC.overlay(i);for(const t of Array.from(document.querySelectorAll(".shadergraph-overlay")))t.remove();return document.body.appendChild(e),i.update(),e},BU=Object.freeze(Object.defineProperty({__proto__:null,inspect:Ed,markup:xC,serialize:HI,visualize:kU},Symbol.toStringTag,{value:"Module"}));let RU=class HM{constructor(e,t,n){this.language=e,this.fetch=t,this.config=n,this.graph()}pipe(e,t,n,r){return e instanceof HM?this._concat(e):e!=null&&this._call(e,t,n,r),this}call(e,t,n,r){return this.pipe(e,t,n,r)}require(e,t,n,r){return e instanceof HM?this._import(e):e!=null&&(this.callback(),this._call(e,t,n,r),this.end()),this}import(e,t,n,r){return this.require(e,t,n,r)}split(){return this._group("_combine",!0),this}fan(){return this._group("_combine",!1),this}isolate(){return this._group("_isolate"),this}callback(){return this._group("_callback"),this}next(){return this._next(),this}pass(){const e=this._stack[2].end;return this.end(),this._state.end=this._state.end.concat(e),this}end(){const[e,t]=Array.from(this._exit()),{op:n}=e;return this[n]&&this[n](e,t),this}join(){return this.end()}graph(){for(;(this._stack!=null?this._stack.length:void 0)>1;)this.end();this._graph&&this._tail(this._state,this._graph);const e=this._graph;return this._graph=new lo,this._state=new tw,this._stack=[this._state],e}compile(e){return e==null&&(e="main"),this.graph().compile(e)}link(e){return e==null&&(e="main"),this.graph().link(e)}serialize(){return HI(this._graph)}empty(){return this._graph.nodes.length===0}_concat(e){let t;if(e._state.nodes.length===0)return this;this._tail(e._state,e._graph);try{t=new N1(e._graph)}catch(n){throw this.config.autoInspect&&Ed(n,this._graph,e),n}return this._auto(t),this}_import(e){let t;if(e._state.nodes.length===0)throw"Can't import empty callback";this._tail(e._state,e._graph);try{t=new O1(e._graph)}catch(n){throw this.config.autoInspect&&Ed(n,this._graph,e),n}return this._auto(t),this}_combine(e,t){for(const n of Array.from(e.start))for(const r of Array.from(t.end))r.connect(n,e.multi);return t.end=e.end,t.nodes=t.nodes.concat(e.nodes)}_isolate(e,t){if(e.nodes.length){let n;const r=this._subgraph(e);this._tail(e,r);try{n=new N1(r)}catch(s){throw this.config.autoInspect&&Ed(s,this._graph,r),s}return this._auto(n)}}_callback(e,t){if(e.nodes.length){let n;const r=this._subgraph(e);this._tail(e,r);try{n=new O1(r)}catch(s){throw this.config.autoInspect&&Ed(s,this._graph,r),s}return this._auto(n)}}_call(e,t,n,r){const s=this.fetch(e);s.bind(this.config,t,n,r);const a=new yC(s);return this._auto(a)}_subgraph(e){const t=new lo(null,this._graph);return t.adopt(e.nodes),t}_tail(e,t){let n=e.end.concat(e.tail);if(n=n.filter((r,s)=>n.indexOf(r)===s),n.length>1&&(n=new wC(n),n=[n.node],this._graph.add(n)),t.tail=n[0],e.end=n,e.tail=[],!t.tail)throw new Error("Cannot finalize empty graph");return t.compile=r=>{r==null&&(r="main");try{return t.tail.owner.compile(this.language,r)}catch(s){throw this.config.autoInspect&&t.inspect(s),s}},t.link=r=>{r==null&&(r="main");try{return t.tail.owner.link(this.language,r)}catch(s){throw this.config.autoInspect&&t.inspect(s),s}},t.export=(r,s)=>t.tail.owner.export(r,s),t.inspect=(r=null)=>Ed(r,t)}_group(e,t){return this._push(e,t),this._push(),this}_next(){const e=this._pop();return this._state.start=this._state.start.concat(e.start),this._state.end=this._state.end.concat(e.end),this._state.nodes=this._state.nodes.concat(e.nodes),this._state.tail=this._state.tail.concat(e.tail),this._push()}_exit(){return this._next(),this._pop(),[this._pop(),this._state]}_push(e,t){return this._stack.unshift(new tw(e,t)),this._state=this._stack[0]}_pop(){let e;return this._state=this._stack[1],this._state==null&&(this._state=new tw),(e=this._stack.shift())!=null?e:new tw}_auto(e){return e.node.inputs.length?this._append(e):this._insert(e)}_append(e){let t;const{node:n}=e;this._graph.add(n);for(t of Array.from(this._state.end))t.connect(n);this._state.start.length||(this._state.start=[n]),this._state.end=[n],this._state.nodes.push(n),n.outputs.length||this._state.tail.push(n)}_prepend(e){let t;const{node:n}=e;this._graph.add(n);for(t of Array.from(this._state.start))n.connect(t);this._state.end.length||(this._state.end=[n]),this._state.start=[n],this._state.nodes.push(n),n.outputs.length||this._state.tail.push(n)}_insert(e){const{node:t}=e;if(this._graph.add(t),this._state.start.push(t),this._state.end.push(t),this._state.nodes.push(t),!t.outputs.length)return this._state.tail.push(t)}};class tw{constructor(e=null,t,n,r,s,a){this.op=e,t==null&&(t=!1),this.multi=t,n==null&&(n=[]),this.start=n,r==null&&(r=[]),this.end=r,s==null&&(s=[]),this.nodes=s,a==null&&(a=[]),this.tail=a}}class DU{constructor(e,t){this.vertex=e,this.fragment=t}build(e){return this.link(e)}link(e){e==null&&(e={});const t={},n={},r={},s=this.vertex.link("main"),a=this.fragment.link("main");for(const o of[s,a]){for(const l in o.uniforms){const c=o.uniforms[l];t[l]=c}for(const l in o.varyings){const c=o.varyings[l];n[l]=c}for(const l in o.attributes){const c=o.attributes[l];r[l]=c}}return e.vertexShader=s.code,e.vertexGraph=s.graph,e.fragmentShader=a.code,e.fragmentGraph=a.graph,e.attributes=r,e.uniforms=t,e.varyings=n,e.inspect=()=>Ed("Vertex Shader",s,"Fragment Shader",a.graph),e}inspect(){return Ed("Vertex Shader",this.vertex,"Fragment Shader",this.fragment.graph)}}const cKe=function(i,e,t){let n=null,r={};e!=null&&(typeof e=="function"?n=o=>t(i,o,e(o)):typeof e=="object"&&(n=function(o){if(e[o]==null)throw new Error(`Unknown snippet \`${o}\``);return t(i,o,e[o])}));const s=o=>t(i,"",o);if(n==null)return s;const a=function(o){return o.match(/[{;]/)?s(o):(r[o]=!0,n(o))};return a.used=function(o){return o==null&&(o=r),r=o},a},LU=function(i){i==null&&(i=100);const e={};let t=null,n=null,r=0;const s=function(o){if(o.prev=null,o.next=t,t!=null&&(t.prev=o),t=o,n==null)return n=o},a=function(o){const{prev:l}=o,{next:c}=o;if(l!=null&&(l.next=c),c!=null&&(c.prev=l),t===o&&(t=c),n===o)return n=l};return function(o){let l,c;return(c=e[o])&&c!==t?(a(c),s(c)):(r===i?(l=n.key,a(n),delete e[l]):r++,c={next:t,prev:null,key:o},s(c),e[o]=c),l}},uKe=function(i){const e={},t=LU(100);return function(n){const r=n.length>32?"##"+VI(n).toString(16):n,s=t(r);return s!=null&&delete e[s],e[r]==null&&(e[r]=i(n)),e[r].clone()}},OU=Object.freeze(Object.defineProperty({__proto__:null,Factory:RU,Material:DU,cache:uKe,hash:VI,library:cKe,queue:LU},Symbol.toStringTag,{value:"Module"})),hKe=function(i){const{code:e,signatures:t}=i,n=fKe(t),r=dKe(e,n);return[t,r]},fKe=function(i){const e={},t=n=>e[n.name]=!0;t(i.main);for(const n of["external","internal","varying","uniform","attribute"])for(const r of i[n])t(r);return e},dKe=function(i,e){let t;const n=new RegExp("\\b("+(()=>{const r=[];for(t in e)r.push(t);return r})().join("|")+")\\b","g");return i=i.replace(/\/\/[^\n]*/g,""),i=i.replace(/\/\*([^*]|\*[^/])*\*\//g,""),function(r,s,a){let o;r==null&&(r=""),s==null&&(s={}),a==null&&(a={});const l={};for(o in e)l[o]=s[o]!=null?o:r+o;const c=i.replace(n,h=>l[h]),u=(()=>{const h=[];for(o in a){const f=a[o];h.push(`#define ${o} ${f}`)}return h})();return u.length&&u.push(""),u.join(`
`)+c}};var NU=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"],pKe=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"],FU=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],mKe=NU,gKe=mKe.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),$M=FU;$M=$M.slice().filter(function(i){return!/^(gl\_|texture)/.test(i)});var vKe=$M.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),_Ke=TKe,AKe=NU,cR=pKe,bKe=FU,yKe=gKe,wKe=vKe,au=999,uR=9999,vS=0,_S=1,hR=2,fR=3,dR=4,A_=5,xKe=6,CKe=7,EKe=8,pR=9,SKe=10,mR=11,MKe=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function TKe(i){var e=0,t=0,n=au,r,s,a=[],o=[],l=1,c=0,u=0,h=!1,f=!1,d="",g;i=i||{};var v=bKe,A=AKe;i.version==="300 es"&&(v=wKe,A=yKe);for(var _={},y={},e=0;e<v.length;e++)_[v[e]]=!0;for(var e=0;e<A.length;e++)y[A[e]]=!0;return function(W){return o=[],W!==null?C(W):S()};function x(W){W.length&&o.push({type:MKe[n],data:W,position:u,line:l,column:c})}function C(W){e=0,W.toString&&(W=W.toString()),d+=W.replace(/\r\n/g,`
`),g=d.length;for(var J;r=d[e],e<g;){switch(J=e,n){case vS:e=D();break;case _S:e=M();break;case hR:e=B();break;case fR:e=F();break;case dR:e=$();break;case mR:e=U();break;case A_:e=O();break;case uR:e=ie();break;case pR:e=P();break;case au:e=I();break}if(J!==e)switch(d[J]){case`
`:c=0,++l;break;default:++c;break}}return t+=e,d=d.slice(e),o}function S(W){return a.length&&x(a.join("")),n=SKe,x("(eof)"),o}function I(){return a=a.length?[]:a,s==="/"&&r==="*"?(u=t+e-1,n=vS,s=r,e+1):s==="/"&&r==="/"?(u=t+e-1,n=_S,s=r,e+1):r==="#"?(n=hR,u=t+e,e):/\s/.test(r)?(n=pR,u=t+e,e):(h=/\d/.test(r),f=/[^\w_]/.test(r),u=t+e,n=h?dR:f?fR:uR,e)}function P(){return/[^\s]/g.test(r)?(x(a.join("")),n=au,e):(a.push(r),s=r,e+1)}function B(){return(r==="\r"||r===`
`)&&s!=="\\"?(x(a.join("")),n=au,e):(a.push(r),s=r,e+1)}function M(){return B()}function D(){return r==="/"&&s==="*"?(a.push(r),x(a.join("")),n=au,e+1):(a.push(r),s=r,e+1)}function F(){if(s==="."&&/\d/.test(r))return n=A_,e;if(s==="/"&&r==="*")return n=vS,e;if(s==="/"&&r==="/")return n=_S,e;if(r==="."&&a.length){for(;z(a););return n=A_,e}if(r===";"||r===")"||r==="("){if(a.length)for(;z(a););return x(r),n=au,e+1}var W=a.length===2&&r!=="=";if(/[\w_\d\s]/.test(r)||W){for(;z(a););return n=au,e}return a.push(r),s=r,e+1}function z(W){var J=0,Ce,Me;do{if(Ce=cR.indexOf(W.slice(0,W.length+J).join("")),Me=cR[Ce],Ce===-1){if(J--+W.length>0)continue;Me=W.slice(0,1).join("")}return x(Me),u+=Me.length,a=a.slice(Me.length),a.length}while(1)}function U(){return/[^a-fA-F0-9]/.test(r)?(x(a.join("")),n=au,e):(a.push(r),s=r,e+1)}function $(){return r==="."||/[eE]/.test(r)?(a.push(r),n=A_,s=r,e+1):r==="x"&&a.length===1&&a[0]==="0"?(n=mR,a.push(r),s=r,e+1):/[^\d]/.test(r)?(x(a.join("")),n=au,e):(a.push(r),s=r,e+1)}function O(){return r==="f"&&(a.push(r),s=r,e+=1),/[eE]/.test(r)||(r==="-"||r==="+")&&/[eE]/.test(s)?(a.push(r),s=r,e+1):/[^\d]/.test(r)?(x(a.join("")),n=au,e):(a.push(r),s=r,e+1)}function ie(){if(/[^\d\w_]/.test(r)){var W=a.join("");return y[W]?n=EKe:_[W]?n=CKe:n=xKe,x(a.join("")),n=au,e}return a.push(r),s=r,e+1}}var IKe=_Ke,PKe=kKe;function kKe(i,e){var t=IKe(e),n=[];return n=n.concat(t(i)),n=n.concat(t(null)),n}const BKe=U0(PKe);let du,Pc,o1,Px;const RKe={nud:function(){return this.children&&this.children.length?this:gR("unexpected")()},led:gR("missing operator")},c0={};function CA(){return this}Uo("(ident)").nud=CA;Uo("(keyword)").nud=CA;Uo("(builtin)").nud=CA;Uo("(literal)").nud=CA;Uo("(end)");Uo(":");Uo(";");Uo(",");Uo(")");Uo("]");Uo("}");$I("&&",30);$I("||",30);ha("|",43);ha("^",44);ha("&",45);ha("==",46);ha("!=",46);ha("<",47);ha("<=",47);ha(">",47);ha(">=",47);ha(">>",48);ha("<<",48);ha("+",50);ha("-",50);ha("*",60);ha("/",60);ha("%",60);ha("?",20,function(i){return this.children=[i,vh(0),(Mf(":"),vh(0))],this.type="ternary",this});ha(".",80,function(i){return Pc.type="literal",du.fake(Pc),this.children=[i,Pc],Mf(),this});ha("[",80,function(i){return this.children=[i,vh(0)],this.type="binary",Mf("]"),this});ha("(",80,function(i){if(this.children=[i],this.type="call",Pc.data!==")")for(;this.children.push(vh(0)),Pc.data===",";)Mf(",");return Mf(")"),this});lp("-");lp("+");lp("!");lp("~");lp("defined");lp("(",function(){return this.type="group",this.children=[vh(0)],Mf(")"),this});lp("++");lp("--");zU("++");zU("--");Cu("=");Cu("+=");Cu("-=");Cu("*=");Cu("/=");Cu("%=");Cu("&=");Cu("|=");Cu("^=");Cu(">>=");Cu("<<=");var DKe=function(i,e){du=i,o1=e,Px=0;let t;if(!o1.length)return;if(Mf(),t=vh(0),t.parent=du[0],n(t),Px<o1.length)throw new Error("did not use all tokens");t.parent.children=[t];function n(r){du.unshift(r,!1);for(let s=0,a=r.children.length;s<a;++s)n(r.children[s]);du.shift()}};function Uo(i,e){let t=c0[i];return e=e||0,t?e>t.lbp&&(t.lbp=e):(t=Object.create(RKe),t.id=i,t.lbp=e,c0[i]=t),t}function vh(i){let e,t=Pc;for(Mf(),e=t.nud();i<Pc.lbp;)t=Pc,Mf(),e=t.led(e);return e}function ha(i,e,t){const n=Uo(i,e);n.led=t||function(r){return this.children=[r,vh(e)],this.type="binary",this}}function $I(i,e,t){const n=Uo(i,e);return n.led=t||function(r){return this.children=[r,vh(e-1)],this.type="binary",this},n}function lp(i,e){const t=Uo(i);return t.nud=e||function(){return this.children=[vh(70)],this.type="unary",this},t}function zU(i){const e=Uo(i,150);e.led=function(t){return this.children=[t],this.type="suffix",this}}function Cu(i){return $I(i,10,function(e){return this.children=[e,vh(9)],this.assignment=!0,this.type="assign",this})}function Mf(i){let e,t,n,r;if(i&&Pc.data!==i)return du.unexpected("expected `"+i+"`, got `"+Pc.data+"`");if(Px>=o1.length){Pc=c0["(end)"];return}if(e=o1[Px++],t=e.data,n=e.type,n==="ident")r=du.scope.find(t)||du.create_node(),n=r.type;else if(n==="builtin")r=c0["(builtin)"];else if(n==="keyword")r=c0["(keyword)"];else if(n==="operator"){if(r=c0[t],!r)return du.unexpected("unknown operator `"+t+"`")}else if(n==="float"||n==="integer")n="literal",r=c0["(literal)"];else return du.unexpected("unexpected token.");return r&&(r.nud||(r.nud=CA),r.children||(r.children=[])),r=Object.create(r),r.token=e,r.type=n,r.data||(r.data=t),Pc=r}function gR(i){return function(){return du.unexpected(i)}}var LKe=kx;function kx(i){if(this.constructor!==kx)return new kx(i);this.state=i,this.scopes=[],this.current=null}const OKe=kx,CC=OKe.prototype;CC.enter=function(i){this.scopes.push(this.current=this.state[0].scope=i||{})};CC.exit=function(){this.scopes.pop(),this.current=this.scopes[this.scopes.length-1]};CC.define=function(i){this.current[i]=this.state[0]};CC.find=function(i,e){for(let t=this.scopes.length-1;t>-1;--t)if(this.scopes[t].hasOwnProperty(i))return this.scopes[t][i];return null};var NKe=JKe;const FKe=DKe,zKe=LKe,yi=new Object;let Wr=0,b_=Wr++,vR=Wr++,AS=Wr++,_R=Wr++,bS=Wr++,AR=Wr++,bR=Wr++,yR=Wr++,wR=Wr++,xR=Wr++,CR=Wr++,ER=Wr++,SR=Wr++,MR=Wr++,UKe=Wr++,yS=Wr++,VKe=Wr++,TR=Wr++,HKe=Wr++,$Ke=Wr++,GKe=Wr++,IR=Wr++,nw=Wr++,PR=Wr++;const GI=1,GM=2,QKe=4,QI=8,UU=16,VU=32,HU=64,Ag=255,qKe=Ag&~(GI|GM|VU|QI|QKe),jKe=Ag&~(GI|QI|UU|HU),WKe=!1,YKe=!1,XKe={"block-comment":MR,"line-comment":MR,preprocessor:UKe},KKe=Wr=["ident","stmt","stmtlist","struct","function","functionargs","decl","decllist","forloop","whileloop","if","expr","precision","comment","preprocessor","keyword","keyword_or_ident","return","break","continue","discard","do-while","placeholder","quantifier"];function JKe(){const i=ue(AS),e=ue(vR),t=ue(yR),n=ue(SR),r=ue(b_),s=ue(bS),a=ue(AR),o=ue(wR),l=ue(CR),c=ue(xR),u=ue(TR),h=ue(IR),f=ue(PR);let d,g,v,A,_,y,x,C,S,I,P=arguments.length?[].slice.call(arguments):[],B=!1,M=[],D=[],F=[],z=[],U=!1,$,O,ie;return M.shift=nt,M.unshift=ve,M.fake=ge,M.unexpected=Ze,M.scope=new zKe(M),M.create_node=function(){const we=Po(b_,O);return we.parent=W.program,we},Lt(),ie=i(),ie.expecting="(eof)",ie.mode=AS,ie.token={type:"(program)",data:"(program)"},$=ie,W.program=$,W.scope=function(we){return arguments.length===1&&(M.scope=we),M.scope},M.unshift(ie),W;function W(we){return we===null?(Ce(),$):(D=[],J(we),D)}function J(we){if(we.type==="whitespace"||we.type==="line-comment"||we.type==="block-comment"){z.push(we);return}for(F.push(we),O=O||F[0],O&&z.length&&(O.preceding=O.preceding||[],O.preceding=O.preceding.concat(z),z=[]);Me();)switch(M[0].mode){case vR:X();break;case AS:$e();break;case bR:mt();break;case yR:Ue();break;case ER:lt();break;case _R:d(!0,!0);break;case SR:g();break;case b_:Ye();break;case yS:yt();break;case VKe:Tt();break;case bS:S();break;case AR:I();break;case wR:A();break;case xR:x();break;case IR:C();break;case TR:y();break;case CR:_();break;case PR:v();break}}function Ce(we){if(arguments.length&&J(we),M.length>1){Ze("unexpected EOF");return}}function Me(){return U||!M.length?!1:O=F[0]}function ge(we){M.unshift(we),M.shift()}function ve(we,Ie){we.parent=M[0];const de=[].unshift.call(this,we);return Ie=Ie===void 0?!0:Ie,Ie&&ie!==we&&ie.children.push(we),ie=we,de}function nt(){let we=[].shift.call(this),Ie=P[this.length],de=!1;return P.length?typeof P[0]=="function"?de=P[0](we):Ie!==void 0&&(de=Ie.test?Ie.test(we.type):Ie===we.type):de=!0,de&&!U&&D.push(we),ie=we.parent,we}function $e(){return Se(function(){return M.scope.enter(),yi},we)();function we(){if(O.data===M[0].expecting)return M.scope.exit(),M.shift();switch(O.type){case"preprocessor":M.fake(dt()),F.shift();return;default:M.unshift(e());return}}}function X(){if(M[0].brace)return O.data!=="}"?Ze("expected `}`, got "+O.data):(M[0].brace=!1,F.shift(),M.shift());switch(O.type){case"eof":return Be();case"keyword":switch(O.data){case"for":return M.unshift(o());case"if":return M.unshift(l());case"while":return M.unshift(c());case"do":return M.unshift(h());case"break":return M.fake(Po(HKe,O)),F.shift();case"continue":return M.fake(Po($Ke,O)),F.shift();case"discard":return M.fake(Po(GKe,O)),F.shift();case"return":return M.unshift(u());case"precision":return M.unshift(n())}return M.unshift(le(Ag));case"ident":var we;if(we=M.scope.find(O.data))return we.parent.type==="struct"?M.unshift(le(Ag)):M.unshift(xe(";"));case"operator":if(O.data==="{"){M[0].brace=!0;const Ie=i();return Ie.expecting="}",F.shift(),M.unshift(Ie)}if(O.data===";")return F.shift(),M.shift();default:return M.unshift(xe(";"))}}function Be(){return B&&(U=!0),B=!0,M.shift()}function mt(){const we=M[0];return Se(Ie,de,Xe,Nt,Qt,Ft,jt,St,Re)();function Ie(){return O.data==="invariant"?we.flags&QI?(M.unshift(pt()),yi):Ze("`invariant` is not allowed here"):(M.fake(Po(nw,{data:"",position:O.position})),yi)}function de(){return ZKe(O)?we.flags&UU?(M.unshift(pt()),yi):Ze("storage is not allowed here"):(M.fake(Po(nw,{data:"",position:O.position})),yi)}function Xe(){return eJe(O)?we.flags&VU?Ze("parameter is not allowed here"):(M.unshift(pt()),yi):(M.fake(Po(nw,{data:"",position:O.position})),yi)}function Nt(){return tJe(O)?(M.unshift(pt()),yi):(M.fake(Po(nw,{data:"",position:O.position})),yi)}function Qt(){if(O.data==="struct")return we.flags&HU?(M.unshift(he()),yi):Ze("cannot nest structs");if(O.type==="keyword")return M.unshift(pt()),yi;const Rt=M.scope.find(O.data);return Rt?(M.fake(Object.create(Rt)),F.shift(),yi):Ze("expected user defined type, struct or keyword, got "+O.data)}function Ft(){if(O.data===","&&!(we.flags&GM))return M.shift();if(O.data==="["){M.unshift(f());return}return O.data===")"?M.shift():O.data===";"?we.stage+3:O.type!=="ident"&&O.type!=="builtin"?Ze("expected identifier, got "+O.data):(we.collected_name=F.shift(),yi)}function jt(){return O.data==="("?(F.unshift(we.collected_name),delete we.collected_name,M.unshift(s()),we.stage+2):yi}function St(){return F.unshift(we.collected_name),delete we.collected_name,M.unshift(t()),yi}function Re(){return M.shift()}}function Ue(){if(O.type==="ident"||O.type==="builtin"){const we=O.data;M.unshift(r()),M.scope.define(we);return}if(O.type==="operator"){if(O.data===",")return M[1].flags&GM?F.shift():M.shift();if(O.data==="="){if(!(M[1].flags&GI))return Ze("`=` is not allowed here.");F.shift(),M.unshift(xe(",",";"));return}else if(O.data==="["){M.unshift(f());return}}return M.shift()}function Tt(){if(O.type==="keyword"){M[0].type="keyword",M[0].mode=yS;return}if(O.type==="ident"){M[0].type="ident",M[0].mode=b_;return}return Ze("expected keyword or user-defined name, got "+O.data)}function yt(){return O.type!=="keyword"?Ze("expected keyword, got "+O.data):(M.shift(),F.shift())}function Ye(){return O.type!=="ident"&&O.type!=="builtin"?Ze("expected user-defined name, got "+O.data):(M[0].data=O.data,M.shift(),F.shift())}function lt(){const we=M[0].expecting;if(M[0].tokens=M[0].tokens||[],M[0].parenlevel===void 0&&(M[0].parenlevel=0,M[0].bracelevel=0),M[0].parenlevel<1&&we.indexOf(O.data)>-1)return Ie(M[0].tokens);switch(O.data==="("?++M[0].parenlevel:O.data===")"&&--M[0].parenlevel,O.data){case"{":++M[0].bracelevel;break;case"}":--M[0].bracelevel;break;case"(":++M[0].parenlevel;break;case")":--M[0].parenlevel;break}if(M[0].parenlevel<0)return Ze("unexpected `)`");if(M[0].bracelevel<0)return Ze("unexpected `}`");M[0].tokens.push(F.shift());return;function Ie(de){try{FKe(M,de)}catch(Xe){throw U=!0,Xe}return M.shift()}}function ue(we){return function(){return Po(we,O)}}function dt(){return Po(XKe[O.type],O)}function le(we){const Ie=Po(bR,O);return Ie.flags=we,Ie}function he(we,Ie){const de=Po(_R,O);return de.allow_assign=we===void 0?!0:we,de.allow_comma=Ie===void 0?!0:Ie,de}function xe(){const we=Po(ER,O);return we.expecting=[].slice.call(arguments),we}function pt(we){let Ie=O;return we&&(Ie={type:"(implied)",data:"(default)",position:Ie.position}),Po(yS,Ie)}function Ze(we){throw U=!0,new Error((we||"unexpected "+M)+" at line "+M[0].token.line)}function me(we,Ie){return te(we,O.type)&&te(Ie,O.data)}function te(we,Ie){switch(typeof we){case"string":return Ie!==we&&Ze("expected `"+we+"`, got "+Ie+`
`+O.data),!U;case"object":return we&&we.indexOf(Ie)===-1&&Ze("expected one of `"+we.join("`, `")+"`, got "+Ie),!U}return!0}function Se(){let we=[].slice.call(arguments),Ie,de;return function(){const Xe=M[0];if(Xe.stage||(Xe.stage=0),Ie=we[Xe.stage],!Ie)return Ze("parser in undefined state!");if(de=Ie(),de===yi)return++Xe.stage;de!==void 0&&(Xe.stage=de)}}function j(we,Ie){return Ie=Ie||"operator",function(){if(!me(Ie,we))return;const de=F.shift(),Xe=M[0].children,Nt=Xe[Xe.length-1];return Nt&&Nt.token&&de.preceding&&(Nt.token.succeeding=Nt.token.succeeding||[],Nt.token.succeeding=Nt.token.succeeding.concat(de.preceding)),yi}}function q(we){return function(){return M.unshift(xe(we)),yi}}function Ve(we){return we?function(){const Ie=O.data;return me("ident")&&(M.unshift(r()),M.scope.define(Ie),yi)}:function(){if(!me("ident"))return;const Ie=Object.create(M.scope.find(O.data));return Ie.token=O,F.shift(),yi}}function ct(){return function(){const we=i();return we.expecting="}",M.unshift(we),yi}}function ne(we){return function(){const Ie=M[0].stage;return O.data!=="{"?(M.unshift(e()),Ie+we):(F.shift(),yi)}}function Je(){return function(){return M.shift(),M.shift()}}function Lt(){d=Se(j("struct","keyword"),function(){return O.data==="{"?(M.fake(Po(b_,{data:"",position:O.position,type:"ident"})),yi):Ve(!0)()},function(){return M.scope.enter(),yi},j("{"),function(){if(O.type==="preprocessor"){M.fake(dt()),F.shift();return}if(O.data==="}")return M.scope.exit(),F.shift(),M.shift();if(O.data===";"){F.shift();return}M.unshift(le(jKe))}),g=Se(function(){return F.shift(),yi},function(){return me("keyword",["lowp","mediump","highp"])&&(M.unshift(pt()),yi)},function(){return M.unshift(pt()),yi},function(){return M.shift()}),v=Se(j("["),q("]"),j("]"),function(){return M.shift()}),A=Se(j("for","keyword"),j("("),function(){let we;if(O.type==="ident"){if((we=M.scope.find(O.data))||(we=M.create_node()),we.parent.type==="struct")return M.unshift(le(Ag)),yi}else if(O.type==="builtin"||O.type==="keyword")return M.unshift(le(Ag)),yi;return q(";")()},j(";"),q(";"),j(";"),q(")"),j(")"),ne(3),ct(),j("}"),Je()),_=Se(j("if","keyword"),j("("),q(")"),j(")"),ne(3),ct(),j("}"),function(){return O.data==="else"?(F.shift(),M.unshift(e()),yi):Je()()},Je()),y=Se(j("return","keyword"),function(){return O.data===";"||M.unshift(xe(";")),yi},function(){F.shift(),Je()()}),x=Se(j("while","keyword"),j("("),q(")"),j(")"),ne(3),ct(),j("}"),Je()),C=Se(j("do","keyword"),ne(3),ct(),j("}"),j("while","keyword"),j("("),q(")"),j(")"),Je()),S=Se(function(){for(let we=1,Ie=M.length;we<Ie;++we)if(M[we].mode===bS)return Ze("function definition is not allowed within another function");return yi},function(){if(!me("ident"))return;const we=O.data,Ie=M.scope.find(we);return M.unshift(r()),M.scope.define(we),M.scope.enter(Ie?Ie.scope:null),yi},j("("),function(){return M.unshift(a()),yi},j(")"),function(){return O.data===";"?(M.scope.exit(),M.shift(),M.shift()):yi},j("{"),ct(),j("}"),function(){return M.scope.exit(),yi},function(){return M.shift(),M.shift(),M.shift()}),I=Se(function(){if(O.data==="void")return M.fake(pt()),F.shift(),yi;if(O.data===")"){M.shift();return}return O.data==="struct"?(M.unshift(he(WKe,YKe)),yi):(M.unshift(le(qKe)),yi)},function(){if(O.data===",")return F.shift(),0;if(O.data===")"){M.shift();return}Ze("expected one of `,` or `)`, got "+O.data)})}}function Po(i,e){return{mode:i,token:e,children:[],type:KKe[i],id:(Math.random()*4294967295).toString(16)}}function ZKe(i){return i.data==="const"||i.data==="attribute"||i.data==="uniform"||i.data==="varying"}function eJe(i){return i.data==="in"||i.data==="inout"||i.data==="out"}function tJe(i){return i.data==="highp"||i.data==="mediump"||i.data==="lowp"}var nJe=NKe,iJe=rJe;function rJe(i){for(var e=nJe(),t=0;t<i.length;t++)e(i[t]);return e(null)}const sJe=U0(iJe);function qI(i,e,t){return Math.max(e,Math.min(t,i))}class jI{constructor(e=0,t=0){jI.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(qI(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*r+e.x,this.y=s*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class aJe{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,a,o){let l=n[r+0],c=n[r+1],u=n[r+2],h=n[r+3];const f=s[a+0],d=s[a+1],g=s[a+2],v=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(o===1){e[t+0]=f,e[t+1]=d,e[t+2]=g,e[t+3]=v;return}if(h!==v||l!==f||c!==d||u!==g){let A=1-o;const _=l*f+c*d+u*g+h*v,y=_>=0?1:-1,x=1-_*_;if(x>Number.EPSILON){const S=Math.sqrt(x),I=Math.atan2(S,_*y);A=Math.sin(A*I)/S,o=Math.sin(o*I)/S}const C=o*y;if(l=l*A+f*C,c=c*A+d*C,u=u*A+g*C,h=h*A+v*C,A===1-o){const S=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=S,c*=S,u*=S,h*=S}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,r,s,a){const o=n[r],l=n[r+1],c=n[r+2],u=n[r+3],h=s[a],f=s[a+1],d=s[a+2],g=s[a+3];return e[t]=o*g+u*h+l*d-c*f,e[t+1]=l*g+u*f+c*h-o*d,e[t+2]=c*g+u*d+o*f-l*h,e[t+3]=u*g-o*h-l*f-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(n/2),u=o(r/2),h=o(s/2),f=l(n/2),d=l(r/2),g=l(s/2);switch(a){case"XYZ":this._x=f*u*h+c*d*g,this._y=c*d*h-f*u*g,this._z=c*u*g+f*d*h,this._w=c*u*h-f*d*g;break;case"YXZ":this._x=f*u*h+c*d*g,this._y=c*d*h-f*u*g,this._z=c*u*g-f*d*h,this._w=c*u*h+f*d*g;break;case"ZXY":this._x=f*u*h-c*d*g,this._y=c*d*h+f*u*g,this._z=c*u*g+f*d*h,this._w=c*u*h-f*d*g;break;case"ZYX":this._x=f*u*h-c*d*g,this._y=c*d*h+f*u*g,this._z=c*u*g-f*d*h,this._w=c*u*h+f*d*g;break;case"YZX":this._x=f*u*h+c*d*g,this._y=c*d*h+f*u*g,this._z=c*u*g-f*d*h,this._w=c*u*h-f*d*g;break;case"XZY":this._x=f*u*h-c*d*g,this._y=c*d*h-f*u*g,this._z=c*u*g+f*d*h,this._w=c*u*h+f*d*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],h=t[10],f=n+o+h;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(u-l)*d,this._y=(s-c)*d,this._z=(a-r)*d}else if(n>o&&n>h){const d=2*Math.sqrt(1+n-o-h);this._w=(u-l)/d,this._x=.25*d,this._y=(r+a)/d,this._z=(s+c)/d}else if(o>h){const d=2*Math.sqrt(1+o-n-h);this._w=(s-c)/d,this._x=(r+a)/d,this._y=.25*d,this._z=(l+u)/d}else{const d=2*Math.sqrt(1+h-n-o);this._w=(a-r)/d,this._x=(s+c)/d,this._y=(l+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(qI(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=n*u+a*o+r*c-s*l,this._y=r*u+a*l+s*o-n*c,this._z=s*u+a*c+n*l-r*o,this._w=a*u-n*o-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+n*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const d=1-t;return this._w=d*a+t*this._w,this._x=d*n+t*this._x,this._y=d*r+t*this._y,this._z=d*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),h=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=a*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=s*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ch{constructor(e=0,t=0,n=0){Ch.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(kR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(kR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=l*t+a*r-o*n,u=l*n+o*t-s*r,h=l*r+s*n-a*t,f=-s*t-a*n-o*r;return this.x=c*l+f*-s+u*-o-h*-a,this.y=u*l+f*-a+h*-s-c*-o,this.z=h*l+f*-o+c*-a-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-n*l,this.z=n*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return wS.copy(this).projectOnVector(e),this.sub(wS)}reflect(e){return this.sub(wS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(qI(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const wS=new Ch,kR=new aJe;class WI{constructor(e=0,t=0,n=0,r=1){WI.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,c=l[0],u=l[4],h=l[8],f=l[1],d=l[5],g=l[9],v=l[2],A=l[6],_=l[10];if(Math.abs(u-f)<.01&&Math.abs(h-v)<.01&&Math.abs(g-A)<.01){if(Math.abs(u+f)<.1&&Math.abs(h+v)<.1&&Math.abs(g+A)<.1&&Math.abs(c+d+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const x=(c+1)/2,C=(d+1)/2,S=(_+1)/2,I=(u+f)/4,P=(h+v)/4,B=(g+A)/4;return x>C&&x>S?x<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(x),r=I/n,s=P/n):C>S?C<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),n=I/r,s=B/r):S<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(S),n=P/s,r=B/s),this.set(n,r,s,t),this}let y=Math.sqrt((A-g)*(A-g)+(h-v)*(h-v)+(f-u)*(f-u));return Math.abs(y)<.001&&(y=1),this.x=(A-g)/y,this.y=(h-v)/y,this.z=(f-u)/y,this.w=Math.acos((c+d+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class EC{constructor(e,t,n,r,s,a,o,l,c){EC.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,o,l,c)}set(e,t,n,r,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=s,u[5]=l,u[6]=n,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[3],l=n[6],c=n[1],u=n[4],h=n[7],f=n[2],d=n[5],g=n[8],v=r[0],A=r[3],_=r[6],y=r[1],x=r[4],C=r[7],S=r[2],I=r[5],P=r[8];return s[0]=a*v+o*y+l*S,s[3]=a*A+o*x+l*I,s[6]=a*_+o*C+l*P,s[1]=c*v+u*y+h*S,s[4]=c*A+u*x+h*I,s[7]=c*_+u*C+h*P,s[2]=f*v+d*y+g*S,s[5]=f*A+d*x+g*I,s[8]=f*_+d*C+g*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-n*s*u+n*o*l+r*s*c-r*a*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=u*a-o*c,f=o*l-u*s,d=c*s-a*l,g=t*h+n*f+r*d;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=h*v,e[1]=(r*c-u*n)*v,e[2]=(o*n-r*a)*v,e[3]=f*v,e[4]=(u*t-r*l)*v,e[5]=(r*s-o*t)*v,e[6]=d*v,e[7]=(n*l-c*t)*v,e[8]=(a*t-n*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*a+c*o)+a+e,-r*c,r*l,-r*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(xS.makeScale(e,t)),this}rotate(e){return this.premultiply(xS.makeRotation(-e)),this}translate(e,t){return this.premultiply(xS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const xS=new EC,iw=2e3,BR=2001;class F1{constructor(e,t,n,r,s,a,o,l,c,u,h,f,d,g,v,A){F1.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,o,l,c,u,h,f,d,g,v,A)}set(e,t,n,r,s,a,o,l,c,u,h,f,d,g,v,A){const _=this.elements;return _[0]=e,_[4]=t,_[8]=n,_[12]=r,_[1]=s,_[5]=a,_[9]=o,_[13]=l,_[2]=c,_[6]=u,_[10]=h,_[14]=f,_[3]=d,_[7]=g,_[11]=v,_[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new F1().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/qm.setFromMatrixColumn(e,0).length(),s=1/qm.setFromMatrixColumn(e,1).length(),a=1/qm.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,a=Math.cos(n),o=Math.sin(n),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=a*u,d=a*h,g=o*u,v=o*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=d+g*c,t[5]=f-v*c,t[9]=-o*l,t[2]=v-f*c,t[6]=g+d*c,t[10]=a*l}else if(e.order==="YXZ"){const f=l*u,d=l*h,g=c*u,v=c*h;t[0]=f+v*o,t[4]=g*o-d,t[8]=a*c,t[1]=a*h,t[5]=a*u,t[9]=-o,t[2]=d*o-g,t[6]=v+f*o,t[10]=a*l}else if(e.order==="ZXY"){const f=l*u,d=l*h,g=c*u,v=c*h;t[0]=f-v*o,t[4]=-a*h,t[8]=g+d*o,t[1]=d+g*o,t[5]=a*u,t[9]=v-f*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const f=a*u,d=a*h,g=o*u,v=o*h;t[0]=l*u,t[4]=g*c-d,t[8]=f*c+v,t[1]=l*h,t[5]=v*c+f,t[9]=d*c-g,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const f=a*l,d=a*c,g=o*l,v=o*c;t[0]=l*u,t[4]=v-f*h,t[8]=g*h+d,t[1]=h,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=d*h+g,t[10]=f-v*h}else if(e.order==="XZY"){const f=a*l,d=a*c,g=o*l,v=o*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=f*h+v,t[5]=a*u,t[9]=d*h-g,t[2]=g*h-d,t[6]=o*u,t[10]=v*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(oJe,e,lJe)}lookAt(e,t,n){const r=this.elements;return zl.subVectors(e,t),zl.lengthSq()===0&&(zl.z=1),zl.normalize(),ud.crossVectors(n,zl),ud.lengthSq()===0&&(Math.abs(n.z)===1?zl.x+=1e-4:zl.z+=1e-4,zl.normalize(),ud.crossVectors(n,zl)),ud.normalize(),rw.crossVectors(zl,ud),r[0]=ud.x,r[4]=rw.x,r[8]=zl.x,r[1]=ud.y,r[5]=rw.y,r[9]=zl.y,r[2]=ud.z,r[6]=rw.z,r[10]=zl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[4],l=n[8],c=n[12],u=n[1],h=n[5],f=n[9],d=n[13],g=n[2],v=n[6],A=n[10],_=n[14],y=n[3],x=n[7],C=n[11],S=n[15],I=r[0],P=r[4],B=r[8],M=r[12],D=r[1],F=r[5],z=r[9],U=r[13],$=r[2],O=r[6],ie=r[10],W=r[14],J=r[3],Ce=r[7],Me=r[11],ge=r[15];return s[0]=a*I+o*D+l*$+c*J,s[4]=a*P+o*F+l*O+c*Ce,s[8]=a*B+o*z+l*ie+c*Me,s[12]=a*M+o*U+l*W+c*ge,s[1]=u*I+h*D+f*$+d*J,s[5]=u*P+h*F+f*O+d*Ce,s[9]=u*B+h*z+f*ie+d*Me,s[13]=u*M+h*U+f*W+d*ge,s[2]=g*I+v*D+A*$+_*J,s[6]=g*P+v*F+A*O+_*Ce,s[10]=g*B+v*z+A*ie+_*Me,s[14]=g*M+v*U+A*W+_*ge,s[3]=y*I+x*D+C*$+S*J,s[7]=y*P+x*F+C*O+S*Ce,s[11]=y*B+x*z+C*ie+S*Me,s[15]=y*M+x*U+C*W+S*ge,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],h=e[6],f=e[10],d=e[14],g=e[3],v=e[7],A=e[11],_=e[15];return g*(+s*l*h-r*c*h-s*o*f+n*c*f+r*o*d-n*l*d)+v*(+t*l*d-t*c*f+s*a*f-r*a*d+r*c*u-s*l*u)+A*(+t*c*h-t*o*d-s*a*h+n*a*d+s*o*u-n*c*u)+_*(-r*o*u-t*l*h+t*o*f+r*a*h-n*a*f+n*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],d=e[11],g=e[12],v=e[13],A=e[14],_=e[15],y=h*A*c-v*f*c+v*l*d-o*A*d-h*l*_+o*f*_,x=g*f*c-u*A*c-g*l*d+a*A*d+u*l*_-a*f*_,C=u*v*c-g*h*c+g*o*d-a*v*d-u*o*_+a*h*_,S=g*h*l-u*v*l-g*o*f+a*v*f+u*o*A-a*h*A,I=t*y+n*x+r*C+s*S;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/I;return e[0]=y*P,e[1]=(v*f*s-h*A*s-v*r*d+n*A*d+h*r*_-n*f*_)*P,e[2]=(o*A*s-v*l*s+v*r*c-n*A*c-o*r*_+n*l*_)*P,e[3]=(h*l*s-o*f*s-h*r*c+n*f*c+o*r*d-n*l*d)*P,e[4]=x*P,e[5]=(u*A*s-g*f*s+g*r*d-t*A*d-u*r*_+t*f*_)*P,e[6]=(g*l*s-a*A*s-g*r*c+t*A*c+a*r*_-t*l*_)*P,e[7]=(a*f*s-u*l*s+u*r*c-t*f*c-a*r*d+t*l*d)*P,e[8]=C*P,e[9]=(g*h*s-u*v*s-g*n*d+t*v*d+u*n*_-t*h*_)*P,e[10]=(a*v*s-g*o*s+g*n*c-t*v*c-a*n*_+t*o*_)*P,e[11]=(u*o*s-a*h*s-u*n*c+t*h*c+a*n*d-t*o*d)*P,e[12]=S*P,e[13]=(u*v*r-g*h*r+g*n*f-t*v*f-u*n*A+t*h*A)*P,e[14]=(g*o*r-a*v*r-g*n*l+t*v*l+a*n*A-t*o*A)*P,e[15]=(a*h*r-u*o*r+u*n*l-t*h*l-a*n*f+t*o*f)*P,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+n,c*o-r*l,c*l+r*o,0,c*o+r*l,u*o+n,u*l-r*a,0,c*l-r*o,u*l+r*a,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,a){return this.set(1,n,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,u=a+a,h=o+o,f=s*c,d=s*u,g=s*h,v=a*u,A=a*h,_=o*h,y=l*c,x=l*u,C=l*h,S=n.x,I=n.y,P=n.z;return r[0]=(1-(v+_))*S,r[1]=(d+C)*S,r[2]=(g-x)*S,r[3]=0,r[4]=(d-C)*I,r[5]=(1-(f+_))*I,r[6]=(A+y)*I,r[7]=0,r[8]=(g+x)*P,r[9]=(A-y)*P,r[10]=(1-(f+v))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=qm.set(r[0],r[1],r[2]).length();const a=qm.set(r[4],r[5],r[6]).length(),o=qm.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ou.copy(this);const c=1/s,u=1/a,h=1/o;return ou.elements[0]*=c,ou.elements[1]*=c,ou.elements[2]*=c,ou.elements[4]*=u,ou.elements[5]*=u,ou.elements[6]*=u,ou.elements[8]*=h,ou.elements[9]*=h,ou.elements[10]*=h,t.setFromRotationMatrix(ou),n.x=s,n.y=a,n.z=o,this}makePerspective(e,t,n,r,s,a,o=iw){const l=this.elements,c=2*s/(t-e),u=2*s/(n-r),h=(t+e)/(t-e),f=(n+r)/(n-r);let d,g;if(o===iw)d=-(a+s)/(a-s),g=-2*a*s/(a-s);else if(o===BR)d=-a/(a-s),g=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,s,a,o=iw){const l=this.elements,c=1/(t-e),u=1/(n-r),h=1/(a-s),f=(t+e)*c,d=(n+r)*u;let g,v;if(o===iw)g=(a+s)*h,v=-2*h;else if(o===BR)g=s*h,v=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=v,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const qm=new Ch,ou=new F1,oJe=new Ch(0,0,0),lJe=new Ch(1,1,1),ud=new Ch,rw=new Ch,zl=new Ch,br={};br.in=0;br.out=1;br.inout=2;const nh=i=>i.token.data;br.node=function(i){if((i.children[5]!=null?i.children[5].type:void 0)==="function")return br.function(i);if((i.token!=null?i.token.type:void 0)==="keyword")return br.external(i)};br.external=function(i){let e=i.children,t=nh(e[1]);const n=nh(e[4]),r=e[5];["attribute","uniform","varying"].includes(t)||(t="global");const s=[];for(let a=0;a<r.children.length;a++)if(e=r.children[a],e.type==="ident"){const o=nh(e),l=r.children[a+1],c=(l!=null?l.type:void 0)==="quantifier";s.push({decl:"external",storage:t,type:n,ident:o,quant:!!c,count:c})}return s};br.function=function(i){const e=i.children,t=nh(e[1]),n=nh(e[4]),r=e[5],s=nh(r.children[0]),a=r.children[1],o=r.children[2],l=Array.from(a.children).map(c=>br.argument(c));return[{decl:"function",storage:t,type:n,ident:s,body:!!o,args:l}]};br.argument=function(i){const e=i.children,t=nh(e[1]),n=nh(e[2]),r=nh(e[4]),s=e[5],a=nh(s.children[0]),o=s.children[1],l=o?o.children[0].token.data:void 0;return{decl:"argument",storage:t,inout:n,type:r,ident:a,quant:!!o,count:l}};br.param=function(i,e,t,n,r){let s=[];e!=null&&s.push(e),t!=null&&s.push(t),s.push(""),s=s.join(" ");const a=n?"["+r+"]":"";i!==""&&(i+=" ");const o=(l,c)=>(c?i:"")+`${s}${l}${a}`;return o.split=l=>br.param(l,e,t,n,r),o};const cJe=typeof window<"u",y_=cJe&&!!window.THREE,uJe={int:0,float:0,vec2:y_?jI:null,vec3:y_?Ch:null,vec4:y_?WI:null,mat2:null,mat3:y_?EC:null,mat4:y_?F1:null,sampler2D:0,samplerCube:0},hJe={int:"i",float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat2:"m2",mat3:"m3",mat4:"m4",sampler2D:"t",samplerCube:"t"};br.type=function(i,e,t,n,r,s){const a={in:br.in,out:br.out,inout:br.inout},o={const:"const"};let l=hJe[e];t&&(l+="v");let c=uJe[e];c!=null&&c.call&&(c=new c),t&&(c=[c]);const u=a[r]!=null?a[r]:a.in;s=o[s];const h=br.param(r,s,e,t,n);return new Bx(i,l,e,h,c,u)};class Bx{constructor(e,t,n,r,s,a,o){this.name=e,this.type=t,this.spec=n,this.param=r,this.value=s,this.inout=a,this.meta=o}split(){const e=this.meta.shadowed!=null,t=e?"in":"out",n=e?br.in:br.out,r=this.param.split(t);return new Bx(this.name,this.type,this.spec,r,this.value,n)}copy(e,t){return new Bx(e??this.name,this.type,this.spec,this.param,this.value,this.inout,t)}}const YI="_i_o",O0="return";let Gg=!1;const fJe=function(i,e){const t=dJe(i,e);return pJe(t,e)},dJe=function(i,e){let t,n,r=[];Gg&&(n=$U());try{const a=BKe(e);t=sJe(a)}catch(a){r=[{message:a}]}Gg&&n("GLSL Tokenize & Parse");const s=function(a){a=a.split(`
`);const o=(""+a.length).length,l=function(c){return(c=""+c).length<o?("       "+c).slice(-o):c};return a.map((c,u)=>`${l(u+1)}: ${c}`).join(`
`)};if(!t||r.length){i||(i="(inline code)"),console.warn(s(e));for(const a of r)console.error(`${i} -`,a.message);throw new Error("GLSL parse error")}return t},pJe=function(i,e){let t;Gg&&(t=$U());const n=[];XI(mJe,gJe(n),i,"");const[r,s,a]=Array.from(vJe(n)),o=_Je(r,s,a);return Gg&&t("GLSL AST"),{ast:i,code:e,signatures:o}},mJe=function(i,e){switch(i.type){case"decl":return e(br.node(i)),!1}return!0},gJe=i=>function(e){e!=null&&Array.from(e).map(t=>i.push(t))},vJe=function(i){let e=null;const t=[];let n=[];const r={};let s=!1;for(const a of Array.from(i))a.body?(r[a.ident]&&(n=Array.from(n).filter(o=>o.ident!==a.ident),delete r[a.ident]),t.push(a),a.ident==="main"?(e=a,s=!0):s||(e=a)):a.storage==="global"?t.push(a):(n.push(a),r[a.ident]=!0);return[e,t,n]},_Je=function(i,e,t){let n;const r={uniform:[],attribute:[],varying:[],external:[],internal:[],global:[],main:null},s=o=>br.type(o.ident,o.type,o.quant,o.count,o.inout,o.storage),a=function(o,l){let c;const u=Array.from(o.args).map(g=>s(g));for(c of Array.from(u))if(c.inout===br.inout){const g=c,v=c.copy();g.inout=br.in,v.inout=br.out,v.meta={shadow:g.name},v.name+=YI,g.meta={shadowed:v.name},u.push(v)}o.type!=="void"&&u.unshift(br.type(O0,o.type,!1,"","out"));const h=(()=>{const g=[];for(c of Array.from(u))c.inout===br.in&&g.push(c.type);return g})().join(","),f=(()=>{const g=[];for(c of Array.from(u))c.inout===br.out&&g.push(c.type);return g})().join(","),d=`(${h})(${f})`;return{name:o.ident,type:d,signature:u,inout:l,spec:o.type}};r.main=a(i,br.out);for(n of Array.from(e))r.internal.push({name:n.ident});for(n of Array.from(t)){let o;switch(n.decl){case"external":o=s(n),r[n.storage].push(o);break;case"function":o=a(n,br.in),r.external.push(o);break}}return r};Gg=!1;const XI=function(i,e,t,n){if(Gg&&console.log(n,t.type,t.token!=null?t.token.data:void 0,t.token!=null?t.token.type:void 0),i(t,e))for(let s=0;s<t.children.length;s++){const a=t.children[s];XI(i,e,a,n+"  ")}return null},$U=function(){const i=+new Date;return function(e){const t=+new Date-i;return console.log(e,t+" ms"),t}};function AJe(i){const e=i.replace(YI,"");return e!==i?e:null}function GU(i){return i.join(`
`)}function KI(i){return i.join(", ")}function Rx(i){return i.join(`;
`)}function QM(i){return{entry:i,type:"void",params:[],signature:[],return:"",vars:{},calls:[],post:[],chain:{}}}function JI(i,e){return`#define ${i} ${e}`}function QU(i,e,t,n,r){return`${i} ${e}(${t}) {
${n}${r}}`}function qU(i,e,t){return i=i?`${i} = `:"",t=KI(t),`  ${i}${e}(${t})`}function ZI(i,e){for(let t=0;t<i.length;t++){const n=i[t],r=e[t];if(!r||n.type!==r.type||n.name===O0!=(r.name===O0))return!1}return!0}function qM(i,e,t,n,r){const s=[];let a="";for(let o of Array.from(n)){let l,c;const{name:u}=o;let h=l=i(u),f=null,d=null,g=!1;const v=u===O0;if((c=o.meta!=null?o.meta.shadowed:void 0)&&(f=i(c),f&&(r.vars[f]="  "+o.param(f),r.calls.push(`  ${f} = ${l}`),e(c)?d={shadowed:f}:o=o.split())),(c=o.meta!=null?o.meta.shadow:void 0)&&(f=i(c),f))if(!e(c))o=o.split(),g=!0;else{d={shadow:f};continue}if(v?a=l:g||s.push(f??l),e(u)){let A="push";v?r.return===""?(A="unshift",h=u,r.type=o.spec,r.return=`  return ${l}`,r.vars[l]="  "+o.param(l)):(r.vars[l]="  "+o.param(l),r.params.push(o.param(l,!0))):r.params.push(o.param(l,!0)),o=o.copy(h,d),r.signature[A](o)}else r.vars[l]="  "+o.param(l)}return r.calls.push(qU(a,t,s))}function jM(i,e){const{entry:t}=i;let n=null;if(e&&e.length===1&&t!=="main"){const r=e[0].module;ZI(i.signature,r.main.signature)&&(n=JI(t,r.entry))}if(n==null){let r=(()=>{const c=[];for(const u in i.vars){const h=i.vars[u];c.push(h)}return c})();({calls:e}=i);const{post:s}=i;let{params:a}=i;const{type:o}=i,l=i.return;e=e.concat(s),l!==""&&e.push(l),e.push(""),r.length?(r.push(""),r=Rx(r)+`
`):r="",e=Rx(e),a=KI(a),n=QU(o,t,a,r,e)}return{signature:i.signature,code:n,name:t}}function bJe(i){const e={defs:[],bodies:[]};for(const t of Array.from(i))jU(t,e);return e.defs=GU(e.defs),e.bodies=Rx(e.bodies),e.defs===""&&delete e.defs,e.bodies===""&&delete e.bodies,e}const jU=(i,e)=>{let t,n;const{module:r,name:s,external:a}=i,{main:o}=r,{entry:l}=r;if(ZI(o.signature,a.signature))return e.defs.push(JI(s,l));const c=[],u=[];let h={};const f=[r.namespace,O0].join("");for(t of Array.from(a.signature))n=t.inout===L1?c:u,n.push(t);for(t of Array.from(o.signature)){n=t.inout===L1?c:u;let y=n.shift().name;y===O0&&(y=f),h[t.name]=y}let d=_=>h[_];const g=()=>!0,v=QM();qM(d,g,l,o.signature,v),v.entry=l,h={return:f},d=_=>h[_]!=null?h[_]:_;const A=QM();return qM(d,g,l,a.signature,A),A.calls=v.calls,A.entry=s,e.bodies.push(jM(v).code.split(" {")[0]),e.bodies.push(jM(A).code)};function yJe(i){const e=/([A-Za-z0-9_]+\s+)?[A-Za-z0-9_]+\s+[A-Za-z0-9_]+\s*\([^)]*\)\s*;\s*/gm,t=s=>s.replace(e,a=>""),n=i.split(/(?=[{}])/g);let r=0;for(let s=0;s<n.length;s++){const a=n[s];switch(a[0]){case"{":r++;break;case"}":r--;break}if(r===0){const o=a.split(/^[ \t]*#/m);for(let l=0;l<o.length;l++){let c=o[l];if(l>0){c=c.split(/\n/);const u=c.shift(),h=c.join(`
`);o[l]=[u,t(h)].join(`
`)}else o[l]=t(c)}n[s]=o.join("#")}}return i=n.join("")}function wJe(i){const e={},t=/((attribute|uniform|varying)\s+)[A-Za-z0-9_]+\s+([A-Za-z0-9_]+)\s*(\[[^\]]*\]\s*)?;\s*/gm;return i.replace(t,function(n,r,s,a,o){return e[a]?"":(e[a]=!0,n)})}function xJe(i){const e=function(n,r){const s=[],a=[];for(const o of Array.from(n))(o.match(r)?s:a).push(o);return s.concat(a)};let t=i.split(`
`);return t=e(t,/^#define ([^ ]+ _pg_[0-9]+_|_pg_[0-9]+_ [^ ]+)$/),t=e(t,/^#extension/),t.join(`
`)}const WM=Object.freeze(Object.defineProperty({__proto__:null,RETURN_ARG:O0,SHADOW_ARG:YI,body:QM,build:jM,call:qM,compile:hKe,dedupe:wJe,define:JI,defuse:yJe,fn:QU,hoist:xJe,invoke:qU,lines:GU,link:jU,links:bJe,list:KI,parse:fJe,same:ZI,statements:Rx,unshadow:AJe,walk:XI},Symbol.toStringTag,{value:"Module"})),{library:CJe,cache:EJe}=OU,{visualize:SJe,inspect:WU}=BU,{Snippet:MJe}=TU,RR=function(i,e={}){const t={};for(let n in i)t[n]=e[n]||i[n];return t};class _h{constructor(e,t){const n={globalUniforms:!1,globalVaryings:!0,globalAttributes:!0,globals:[],autoInspect:!1};this.config=RR(n,t),this.fetch=EJe(CJe(WM,e,MJe.load))}shader(e){e==null&&(e={});const t=RR(this.config,e);return new RU(WM,this.fetch,t)}material(e){return new DU(this.shader(e),this.shader(e))}inspect(e){return _h.inspect(e)}visualize(e){return _h.visualize(e)}static inspect(e){return WU(e)}static visualize(e){return SJe(e)}}_h.Block=th;_h.Factory=OU;_h.GLSL=WM;_h.Graph=QXe;_h.Linker=TU;_h.Visualize=BU;function TJe(i,e={}){return new _h(i,e)}const YU=function(i){function e(t){const n=i[t];if(n!=null)return n;const s=["#",".",":","["].includes(t[0])?t:`#${t}`,a=document.querySelector(s);if(a!=null&&a.tagName==="SCRIPT")return a.textContent||a.innerText;throw new Error(`Unknown shader \`${t}\``)}return TJe(e,{autoInspect:!0})},XU={"arrow.position":VWe,"axis.position":HWe,"cartesian.position":GWe,"cartesian4.position":$We,"clamp.position":QWe,"color.opaque":qWe,"face.position":jWe,"face.position.normal":WWe,"float.encode":YWe,"float.index.pack":XWe,"float.stretch":KWe,"fragment.clip.dashed":JWe,"fragment.clip.dotted":ZWe,"fragment.clip.ends":eYe,"fragment.clip.proximity":tYe,"fragment.color":nYe,"fragment.map.rgba":iYe,"fragment.solid":rYe,"fragment.transparent":sYe,"grid.position":aYe,"grow.position":oYe,"join.position":lYe,"label.alpha":cYe,"label.map":uYe,"label.outline":hYe,"layer.position":fYe,"lerp.depth":dYe,"lerp.height":pYe,"lerp.items":mYe,"lerp.width":gYe,"line.position":vYe,"map.2d.data":_Ye,"map.2d.data.wrap":AYe,"map.xyzw.2dv":bYe,"map.xyzw.align":yYe,"map.xyzw.texture":wYe,"mesh.fragment.color":xYe,"mesh.fragment.map":CYe,"mesh.fragment.mask":EYe,"mesh.fragment.material":SYe,"mesh.fragment.shaded":MYe,"mesh.fragment.texture":TYe,"mesh.gamma.in":IYe,"mesh.gamma.out":PYe,"mesh.map.uvwo":kYe,"mesh.position":BYe,"mesh.vertex.color":RYe,"mesh.vertex.mask":DYe,"mesh.vertex.position":LYe,"move.position":OYe,"object.mask.default":NYe,"point.alpha.circle":FYe,"point.alpha.circle.hollow":zYe,"point.alpha.generic":UYe,"point.alpha.generic.hollow":VYe,"point.edge":HYe,"point.fill":$Ye,"point.mask.circle":GYe,"point.mask.diamond":QYe,"point.mask.down":qYe,"point.mask.left":jYe,"point.mask.right":WYe,"point.mask.square":YYe,"point.mask.up":XYe,"point.position":KYe,"point.size.uniform":JYe,"point.size.varying":ZYe,"polar.position":eXe,"project.position":tXe,"project.readback":nXe,"raw.position.scale":iXe,"repeat.position":rXe,"resample.padding":sXe,"resample.relative":aXe,"reveal.mask":oXe,"reverse.position":lXe,"root.position":cXe,"sample.2d":uXe,"scale.position":hXe,"screen.map.stpq":fXe,"screen.map.xy":dXe,"screen.map.xyzw":pXe,"screen.pass.uv":mXe,"screen.position":gXe,"slice.position":vXe,"spherical.position":_Xe,"split.position":AXe,"spread.position":bXe,"sprite.fragment":yXe,"sprite.position":wXe,"stereographic.position":CXe,"stereographic4.position":xXe,"stpq.sample.2d":EXe,"stpq.xyzw.2d":SXe,"strip.position.normal":MXe,"style.color":TXe,"subdivide.depth":IXe,"subdivide.depth.lerp":PXe,"subdivide.height":kXe,"subdivide.height.lerp":BXe,"subdivide.items":RXe,"subdivide.items.lerp":DXe,"subdivide.width":LXe,"subdivide.width.lerp":OXe,"surface.mask.hollow":NXe,"surface.position":FXe,"surface.position.normal":zXe,"surface.position.shaded":UXe,"ticks.position":VXe,"transform3.position":HXe,"transform4.position":$Xe,"view.position":GXe},IJe=Object.freeze(Object.defineProperty({__proto__:null,Factory:YU,Snippets:XU},Symbol.toStringTag,{value:"Module"}));class KU{constructor(e){this.context=e,this.anims=[]}make(e,t){const n=new PJe(this,this.context.time,e,t);return this.anims.push(n),n}unmake(e){return this.anims=Array.from(this.anims).filter(t=>t!==e)}update(){const{time:e}=this.context;return this.anims=(()=>{const t=[];for(const n of Array.from(this.anims))n.update(e)!==!1&&t.push(n);return t})()}lerp(e,t,n,r,s){if(s==null&&(s=e.make()),e.lerp)s=e.lerp(t,n,s,r);else if(e.emitter){const a=t.emitterFrom,o=n.emitterTo;if(a!=null&&o!=null&&a===o)return a.lerp(r),a;{const l=e.emitter(t,n);return t.emitterFrom=l,n.emitterTo=l,l.lerp(r),l}}else if(e.op){const a=function(o,l){return o===+o&&l===+l?o+(l-o)*r:r>.5?l:o};s=e.op(t,n,s,a)}else s=r>.5?n:t;return s}}let PJe=class{constructor(e,t,n,r){this.animator=e,this.time=t,this.type=n,this.options=r,this.value=this.type.make(),this.target=this.type.make(),this.queue=[]}dispose(){return this.animator.unmake(this)}set(){let{target:e}=this,t=arguments.length>1?[].slice.call(arguments):arguments[0],n=!1;return t=this.type.validate(t,e,()=>n=!0),n||(e=t),this.cancel(),this.target=this.value,this.value=e,this.notify()}getTime(){const{clock:e}=this.options,t=e?e.getTime():this.time;return this.options.realtime?t.time:t.clock}cancel(e){let t;e==null&&(e=this.getTime());const{queue:n}=this,r=(()=>{const s=[];for(t of Array.from(n))t.end>=e&&s.push(t);return s})();this.queue=(()=>{const s=[];for(t of Array.from(n))t.end<e&&s.push(t);return s})();for(t of Array.from(r))typeof t.complete=="function"&&t.complete(!1);typeof this.options.complete=="function"&&this.options.complete(!1)}notify(){return typeof this.options.step=="function"?this.options.step(this.value):void 0}immediate(e,t){const{duration:n,delay:r,ease:s,step:a,complete:o}=t,c=this.getTime()+r,u=c+n;let h=!1,f=this.type.make();return e=this.type.validate(e,f,function(){return h=!0,null}),e!==void 0&&!h&&(f=e),this.cancel(c),this.queue.push({from:null,to:f,start:c,end:u,ease:s,step:a,complete:o})}update(e){if(this.time=e,this.queue.length===0)return!0;const t=this.getTime();let{value:n}=this;const{queue:r}=this;let s=!1;for(;!s;){const a=r[0];let{from:o}=a;const{to:l,start:c,end:u,step:h,complete:f,ease:d}=a;o==null&&(o=a.from=this.type.clone(this.value));let g=AC((t-c)/Math.max(1e-5,u-c)||0,0,1);if(g===0)return;const v=(()=>{switch(d){case"linear":case 0:return null;case"cosine":case 1:return D1;case"binary":case 2:return LI;case"hold":case 3:return OI;default:return D1}})();if(v!=null&&(g=v(g)),s=g<1,n=s?this.animator.lerp(this.type,o,l,g,n):l,typeof h=="function"&&h(n),!s&&(typeof f=="function"&&f(!0),typeof this.options.complete=="function"&&this.options.complete(!0),r.shift(),r.length===0))break}return this.value=n,this.notify()}};class SC{v2(){return this}constructor(e,t,n){this._context=e,this._up=t,this._targets=n;const r=this._context.controller.getRoot();this._targets==null&&(this._targets=[r]),this.isRoot=this._targets.length===1&&this._targets[0]===r,this.isLeaf=this._targets.length===1&&this._targets[0].children==null;for(let s=0;s<this._targets.length;s++){const a=this._targets[s];this[s]=a}this.length=this._targets.length;for(const s of Array.from(this._context.controller.getTypes()))["root"].includes(s)||(this[s]=(a,o)=>this.add(s,a,o))}select(e){const t=this._context.model.select(e,this.isRoot?null:this._targets);return this._push(t)}eq(e){return this._targets.length>e?this._push([this._targets[e]]):this._push([])}filter(e){if(typeof e=="string"){const t=this._context.model._matcher(e);e=n=>t(n)}return this._push(this._targets.filter(e))}map(e){return kJe(0,this.length,!1).map(t=>e(this[t],t,this))}each(e){for(let t=0,n=this.length,r=0<=n;r?t<n:t>n;r?t++:t--)e(this[t],t,this);return this}add(e,t,n){const{controller:r}=this._context;if(this.isLeaf)return this._pop().add(e,t,n);const s=[];for(const a of this._targets){const o=r.make(e,t,n);r.add(o,a),s.push(o)}return this._push(s)}remove(e){if(e)return this.select(e).remove();for(const t of Array.from(this._targets.slice().reverse()))this._context.controller.remove(t);return this._pop()}set(e,t){for(const n of Array.from(this._targets))this._context.controller.set(n,e,t);return this}getAll(e){return Array.from(this._targets).map(t=>this._context.controller.get(t,e))}get(e){return this._targets[0]!=null?this._targets[0].get(e):void 0}evaluate(e,t){return this._targets[0]!=null?this._targets[0].evaluate(e,t):void 0}bind(e,t){for(const n of Array.from(this._targets))this._context.controller.bind(n,e,t);return this}unbind(e){for(const t of Array.from(this._targets))this._context.controller.unbind(t,e);return this}end(){return(this.isLeaf?this._pop():this)._pop()}_push(e){return new SC(this._context,this,e)}_pop(){return this._up!=null?this._up:this}_reset(){let e;return(e=this._up!=null?this._up.reset():void 0)!=null?e:this}map(e){return this._targets.map(e)}on(){const e=arguments;return this._targets.map(t=>t.on.apply(t,e)),this}off(){const e=arguments;return this._targets.map(t=>t.off.apply(t,e)),this}toString(){const e=this._targets.map(t=>t.toString());return this._targets.length>1?`[${e.join(", ")}]`:e[0]}toMarkup(){return this._targets.map(t=>t.toMarkup()).join(`

`)}print(){return tI(this._targets.map(e=>e.toMarkup()).join(`

`)),this}debug(){const e=this.inspect();console.log("Renderables: ",e.renderables),console.log("Renders: ",e.renders),console.log("Shaders: ",e.shaders);const t=r=>r.constructor.name,n=[];for(const r of Array.from(e.shaders)){const s=t(r.owner);n.push(`${s} - Vertex`),n.push(r.vertex),n.push(`${s} - Fragment`),n.push(r.fragment)}return WU(n)}inspect(e,t,n){let r;typeof t=="boolean"&&(n=t,t=null),n==null&&(n=!0);const s=u=>(u.controller!=null?u.controller.objects:void 0)!=null?u.controller!=null?u.controller.objects:void 0:[],a=r=function(u,h){if(h==null&&(h=[]),(!t||u.traits.hash[t])&&h.push(s(u)),u.children!=null)for(const f of Array.from(u.children))r(f,h);return h},o=function(u){return u=u.reduce((h,f)=>h.concat(f),[]),u=u.filter((h,f)=>h!=null&&u.indexOf(h)===f)},l=function(u,h){const f={};return f.owner=u,f.geometry=h.geometry,f.material=h.material,f.vertex=h.userData.vertexGraph,f.fragment=h.userData.fragmentGraph,f},c={nodes:this._targets.slice(),renderables:[],renders:[],shaders:[]};for(const u of Array.from(this._targets)){let h;n&&u.print(e,"info");const f={renderables:h=o(a(u)),renders:o(h.map(d=>d.renders)),shaders:o(h.map(d=>d.renders!=null?d.renders.map(g=>l(d,g)):void 0))};for(const d in f)c[d]=c[d].concat(f[d])}return c}}function kJe(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let a=i;r?a<s:a>s;r?a++:a--)n.push(a);return n}class JU{constructor(e,t){this.model=e,this.primitives=t}getRoot(){return this.model.getRoot()}getTypes(){return this.primitives.getTypes()}make(e,t,n){return this.primitives.make(e,t,n)}get(e,t){return e.get(t)}set(e,t,n){try{return e.set(t,n)}catch(r){return e.print(null,"warn"),console.error(r)}}bind(e,t,n){try{return e.bind(t,n)}catch(r){return e.print(null,"warn"),console.error(r)}}unbind(e,t){try{return e.unbind(t)}catch(n){return e.print(null,"warn"),console.error(n)}}add(e,t){return t==null&&(t=this.model.getRoot()),t.add(e)}remove(e){const t=e.parent;if(t)return t.remove(e)}}const BJe=Object.freeze(Object.defineProperty({__proto__:null,API:SC,Animator:KU,Controller:JU},Symbol.toStringTag,{value:"Module"})),RJe=qje,DJe=cFe,LJe=Kje,OJe=hFe,NJe=Wje,FJe=Bre,zJe=lFe,UJe=cWe,ZU=sFe,VJe=Object.freeze(Object.defineProperty({__proto__:null,Axis:RJe,Data:DJe,Ease:LJe,GLSL:OJe,JS:NJe,Pretty:FJe,Three:zJe,Ticks:UJe,VDOM:ZU},Symbol.toStringTag,{value:"Module"}));let eP=class{static initClass(){this.Namespace={Model:ZNe,Overlay:aFe,Primitives:dWe,Render:UWe,Shaders:IJe,Stage:BJe,Util:VJe,DOM:ZU},this.Version="2.3.1"}constructor(e,t=null,n=null){let r;this.canvas=r=e.domElement,this.element=null,this.shaders=YU(XU),this.renderables=new vU(CU,e,this.shaders),this.overlays=new mF(yF,r),this.scene=this.renderables.make("scene",{scene:t}),this.camera=this.defaultCamera=n??new yr,this.attributes=new dN(OM,this),this.primitives=new mU(OM,this),this.root=this.primitives.make("root"),this.model=new pF(this.root),this.guard=new _N,this.controller=new JU(this.model,this.primitives),this.animator=new KU(this),this.api=new SC(this),this.speed=1,this.time={now:+new Date/1e3,time:0,delta:0,clock:0,step:0}}init(){return this.scene.inject(),this.overlays.inject(),this}destroy(){return this.scene.unject(),this.overlays.unject(),this}resize(e){return e==null&&(e={}),e.renderWidth==null&&(e.renderWidth=e.viewWidth!=null?e.viewWidth:e.viewWidth=1280),e.renderHeight==null&&(e.renderHeight=e.viewHeight!=null?e.viewHeight:e.viewHeight=720),e.pixelRatio==null&&(e.pixelRatio=e.renderWidth/Math.max(1e-6,e.viewWidth)),e.aspect==null&&(e.aspect=e.viewWidth/Math.max(1e-6,e.viewHeight)),this.root.controller.resize(e),this}frame(e){return this.pre(e),this.update(),this.render(),this.post(),this}pre(e){return e||(e={now:+new Date/1e3,time:0,delta:0,clock:0,step:0},e.delta=this.time.now!=null?e.now-this.time.now:0,e.delta>1&&(e.delta=1/60),e.step=e.delta*this.speed,e.time=this.time.time+e.delta,e.clock=this.time.clock+e.step),this.time=e,typeof this.root.controller.pre=="function"&&this.root.controller.pre(),this}update(){return this.animator.update(),this.attributes.compute(),this.guard.iterate({step:()=>{let e=this.attributes.digest();return e||(e=this.model.digest())},last(){return{attribute:this.attributes.getLastTrigger(),model:this.model.getLastTrigger()}}}),typeof this.root.controller.update=="function"&&this.root.controller.update(),this.camera=this.root.controller.getCamera(),this.speed=this.root.controller.getSpeed(),this}render(){return typeof this.root.controller.render=="function"&&this.root.controller.render(),this.scene.render(),this}post(){return typeof this.root.controller.post=="function"&&this.root.controller.post(),this}setWarmup(e){return this.scene.warmup(e),this}getPending(){return this.scene.pending.length}};eP.initClass();const eV=eP,DR=eP.Version;Ji.registerPlugin("mathbox",{defaults:{init:!0,warmup:2,inspect:!0,splash:!0},listen:["ready","pre","update","post","resize"],install(i){let e=!1;return this.first=!0,i.MathBox={init:t=>{if(e)return;e=!0;const n=(t!=null?t.scene:void 0)||this.options.scene||i.scene,r=(t!=null?t.camera:void 0)||this.options.camera||i.camera;this.context=new eV(i.renderer,n,r),this.context.api.three=i.three=i,this.context.api.mathbox=i.mathbox=this.context.api,this.context.api.start=()=>i.Loop.start(),this.context.api.stop=()=>i.Loop.stop(),this.context.init(),this.context.resize(i.Size),this.context.setWarmup(this.options.warmup),this.pending=0,this.warm=!this.options.warmup,console.log("MathBox²",DR),i.trigger({type:"mathbox/init",version:DR,context:this.context})},destroy:()=>{e&&(e=!1,i.trigger({type:"mathbox/destroy",context:this.context}),this.context.destroy(),delete i.mathbox,delete this.context.api.three,delete this.context)},object:()=>this.context!=null?this.context.scene.root:void 0}},uninstall(i){i.MathBox.destroy(),delete i.MathBox},ready(i,e){if(this.options.init)return e.MathBox.init(),setTimeout(()=>{if(this.options.inspect&&e.MathBox)return this.inspect(e)})},inspect(i){if(this.context.api.inspect(),!this.options.warmup)return this.info(i)},info(i){const e=function(n){const r=[];for(;n>=1e3;)r.unshift(("000"+n%1e3).slice(-3)),n=Math.floor(n/1e3);return r.unshift(n),r.join(",")},t=i.renderer.info.render;console.log("Geometry  ",e(t.triangles)+" triangles  ",e(t.points)+" points  ",e(t.lines)+" lines  ",e(t.calls)+" draw calls  ")},resize(i,e){return this.context!=null?this.context.resize(e.Size):void 0},pre(i,e){return this.context!=null?this.context.pre(e.Time):void 0},update(i,e){let t;return this.context!=null&&this.context.update(),(t=this.context!=null?this.context.camera:void 0)&&t!==e.camera&&(e.camera=t),e.Time.set({speed:this.context.speed}),this.progress(this.context.getPending(),e),this.context!=null?this.context.render():void 0},post(i,e){return this.context!=null?this.context.post():void 0},progress(i,e){if(!i&&!this.pending)return;let t=Math.max(i+this.options.warmup,this.pending);const n=t-i,r=t;e.trigger({type:"mathbox/progress",current:t-i,total:t}),i===0&&(t=0),this.pending=t,n===r&&!this.warm&&(this.warm=!0,this.options.inspect&&this.info(e))}});var HJe=function(){var i="b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",e="b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var r=WebAssembly.validate(t)?e:i,s,a=WebAssembly.instantiate(o(r),{}).then(function(_){s=_.instance,s.exports.__wasm_call_ctors()});function o(_){for(var y=new Uint8Array(_.length),x=0;x<_.length;++x){var C=_.charCodeAt(x);y[x]=C>96?C-97:C>64?C-39:C+4}for(var S=0,x=0;x<_.length;++x)y[S++]=y[x]<60?n[y[x]]:(y[x]-60)*64+y[++x];return y.buffer.slice(0,S)}function l(_,y,x,C,S,I){var P=s.exports.sbrk,B=x+3&-4,M=P(B*C),D=P(S.length),F=new Uint8Array(s.exports.memory.buffer);F.set(S,D);var z=_(M,x,C,D,S.length);if(z==0&&I&&I(M,B,C),y.set(F.subarray(M,M+x*C)),P(M-P(0)),z!=0)throw new Error("Malformed buffer data: "+z)}var c={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},h=[],f=0;function d(_){var y={object:new Worker(_),pending:0,requests:{}};return y.object.onmessage=function(x){var C=x.data;y.pending-=C.count,y.requests[C.id][C.action](C.value),delete y.requests[C.id]},y}function g(_){for(var y="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(o(r))+"]), {}).then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });self.onmessage = workerProcess;"+l.toString()+A.toString(),x=new Blob([y],{type:"text/javascript"}),C=URL.createObjectURL(x),S=0;S<_;++S)h[S]=d(C);URL.revokeObjectURL(C)}function v(_,y,x,C,S){for(var I=h[0],P=1;P<h.length;++P)h[P].pending<I.pending&&(I=h[P]);return new Promise(function(B,M){var D=new Uint8Array(x),F=f++;I.pending+=_,I.requests[F]={resolve:B,reject:M},I.object.postMessage({id:F,count:_,size:y,source:D,mode:C,filter:S},[D.buffer])})}function A(_){a.then(function(){var y=_.data;try{var x=new Uint8Array(y.count*y.size);l(s.exports[y.mode],x,y.count,y.size,y.source,s.exports[y.filter]),self.postMessage({id:y.id,count:y.count,action:"resolve",value:x},[x.buffer])}catch(C){self.postMessage({id:y.id,count:y.count,action:"reject",value:C})}})}return{ready:a,supported:!0,useWorkers:function(_){g(_)},decodeVertexBuffer:function(_,y,x,C,S){l(s.exports.meshopt_decodeVertexBuffer,_,y,x,C,s.exports[c[S]])},decodeIndexBuffer:function(_,y,x,C){l(s.exports.meshopt_decodeIndexBuffer,_,y,x,C)},decodeIndexSequence:function(_,y,x,C){l(s.exports.meshopt_decodeIndexSequence,_,y,x,C)},decodeGltfBuffer:function(_,y,x,C,S,I){l(s.exports[u[S]],_,y,x,C,s.exports[c[I]])},decodeGltfBufferAsync:function(_,y,x,C,S){return h.length>0?v(_,y,x,u[C],c[S]):a.then(function(){var I=new Uint8Array(_*y);return l(s.exports[u[C]],I,_,y,x,s.exports[c[S]]),I})}}}();const CS=new WeakMap;class $Je extends Ya{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const s=new uo(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{this.parse(a,t,r)},n,r)}parse(e,t,n){this.decodeDracoFile(e,t,null,null,kn).catch(n)}decodeDracoFile(e,t,n,r,s=Nc){const a={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:s};return this.decodeGeometry(e,a).then(t)}decodeGeometry(e,t){const n=JSON.stringify(t);if(CS.has(e)){const l=CS.get(e);if(l.key===n)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(s,a).then(l=>(r=l,new Promise((c,u)=>{r._callbacks[s]={resolve:c,reject:u},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),CS.set(e,{key:n,promise:o}),o}_createGeometry(e){const t=new ai;e.index&&t.setIndex(new Un(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],s=r.name,a=r.array,o=r.itemSize,l=new Un(a,o);s==="color"&&(this._assignVertexColorSpace(l,r.vertexColorSpace),l.normalized=!(a instanceof Float32Array)),t.setAttribute(s,l)}return t}_assignVertexColorSpace(e,t){if(t!==kn)return;const n=new qt;for(let r=0,s=e.count;r<s;r++)n.fromBufferAttribute(e,r).convertSRGBToLinear(),e.setXYZ(r,n.r,n.g,n.b)}_loadLibrary(e,t){const n=new uo(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((r,s)=>{n.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const r=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=GJe.toString(),a=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const a=s.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function GJe(){let i,e;onmessage=function(a){const o=a.data;switch(o.type){case"init":i=o.decoderConfig,e=new Promise(function(u){i.onModuleLoaded=function(h){u({draco:h})},DracoDecoderModule(i)});break;case"decode":const l=o.buffer,c=o.taskConfig;e.then(u=>{const h=u.draco,f=new h.Decoder;try{const d=t(h,f,new Int8Array(l),c),g=d.attributes.map(v=>v.array.buffer);d.index&&g.push(d.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:d},g)}catch(d){console.error(d),self.postMessage({type:"error",id:o.id,error:d.message})}finally{h.destroy(f)}});break}};function t(a,o,l,c){const u=c.attributeIDs,h=c.attributeTypes;let f,d;const g=o.GetEncodedGeometryType(l);if(g===a.TRIANGULAR_MESH)f=new a.Mesh,d=o.DecodeArrayToMesh(l,l.byteLength,f);else if(g===a.POINT_CLOUD)f=new a.PointCloud,d=o.DecodeArrayToPointCloud(l,l.byteLength,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!d.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const v={index:null,attributes:[]};for(const A in u){const _=self[h[A]];let y,x;if(c.useUniqueIDs)x=u[A],y=o.GetAttributeByUniqueId(f,x);else{if(x=o.GetAttributeId(f,a[u[A]]),x===-1)continue;y=o.GetAttribute(f,x)}const C=r(a,o,f,A,_,y);A==="color"&&(C.vertexColorSpace=c.vertexColorSpace),v.attributes.push(C)}return g===a.TRIANGULAR_MESH&&(v.index=n(a,o,f)),a.destroy(f),v}function n(a,o,l){const u=l.num_faces()*3,h=u*4,f=a._malloc(h);o.GetTrianglesUInt32Array(l,h,f);const d=new Uint32Array(a.HEAPF32.buffer,f,u).slice();return a._free(f),{array:d,itemSize:1}}function r(a,o,l,c,u,h){const f=h.num_components(),g=l.num_points()*f,v=g*u.BYTES_PER_ELEMENT,A=s(a,u),_=a._malloc(v);o.GetAttributeDataArrayForAllPoints(l,h,A,v,_);const y=new u(a.HEAPF32.buffer,_,g).slice();return a._free(_),{name:c,array:y,itemSize:f}}function s(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}function LR(i,e){if(e===VL)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===_x||e===p5){let t=i.getIndex();if(t===null){const a=[],o=i.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);i.setIndex(a),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(e===_x)for(let a=1;a<=n;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}class QJe extends Ya{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new XJe(t)}),this.register(function(t){return new rZe(t)}),this.register(function(t){return new sZe(t)}),this.register(function(t){return new aZe(t)}),this.register(function(t){return new JJe(t)}),this.register(function(t){return new ZJe(t)}),this.register(function(t){return new eZe(t)}),this.register(function(t){return new tZe(t)}),this.register(function(t){return new YJe(t)}),this.register(function(t){return new nZe(t)}),this.register(function(t){return new KJe(t)}),this.register(function(t){return new iZe(t)}),this.register(function(t){return new jJe(t)}),this.register(function(t){return new oZe(t)}),this.register(function(t){return new lZe(t)})}load(e,t,n,r){const s=this;let a;this.resourcePath!==""?a=this.resourcePath:this.path!==""?a=this.path:a=Ng.extractUrlBase(e),this.manager.itemStart(e);const o=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new uo(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,a,function(u){t(u),s.manager.itemEnd(e)},o)}catch(u){o(u)}},n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const a={},o={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===tV){try{a[Vi.KHR_BINARY_GLTF]=new cZe(e)}catch(h){r&&r(h);return}s=JSON.parse(a[Vi.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new wZe(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](c);o[h.name]=h,a[h.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const h=s.extensionsUsed[u],f=s.extensionsRequired||[];switch(h){case Vi.KHR_MATERIALS_UNLIT:a[h]=new WJe;break;case Vi.KHR_DRACO_MESH_COMPRESSION:a[h]=new uZe(s,this.dracoLoader);break;case Vi.KHR_TEXTURE_TRANSFORM:a[h]=new hZe;break;case Vi.KHR_MESH_QUANTIZATION:a[h]=new fZe;break;default:f.indexOf(h)>=0&&o[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}c.setExtensions(a),c.setPlugins(o),c.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function qJe(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const Vi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class jJe{constructor(e){this.parser=e,this.name=Vi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new qt(16777215);l.color!==void 0&&u.fromArray(l.color);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new j5(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new q5(u),c.distance=h;break;case"spot":c=new Q5(u),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,xd(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return n._getNodeRef(t.cache,o,l)})}}class WJe{constructor(){this.name=Vi.KHR_MATERIALS_UNLIT}getMaterialType(){return Lo}extendParams(e,t,n){const r=[];e.color=new qt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}s.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",s.baseColorTexture,kn))}return Promise.all(r)}}class YJe{constructor(e){this.parser=e,this.name=Vi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class XJe{constructor(e){this.parser=e,this.name=Vi.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Et(o,o)}return Promise.all(s)}}class KJe{constructor(e){this.parser=e,this.name=Vi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class JJe{constructor(e){this.parser=e,this.name=Vi.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new qt(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];return a.sheenColorFactor!==void 0&&t.sheenColor.fromArray(a.sheenColorFactor),a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,kn)),a.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class ZJe{constructor(e){this.parser=e,this.name=Vi.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class eZe{constructor(e){this.parser=e,this.name=Vi.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new qt(o[0],o[1],o[2]),Promise.all(s)}}class tZe{constructor(e){this.parser=e,this.name=Vi.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wh}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class nZe{constructor(e){this.parser=e,this.name=Vi.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new qt(o[0],o[1],o[2]),a.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,kn)),Promise.all(s)}}class iZe{constructor(e){this.parser=e,this.name=Vi.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}}class rZe{constructor(e){this.parser=e,this.name=Vi.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class sZe{constructor(e){this.parser=e,this.name=Vi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let l=n.textureLoader;if(o.uri){const c=n.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,a.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class aZe{constructor(e){this.parser=e,this.name=Vi.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let l=n.textureLoader;if(o.uri){const c=n.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,a.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class oZe{constructor(e){this.name=Vi.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,h=r.byteStride,f=new Uint8Array(o,l,c);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(u,h,f,r.mode,r.filter).then(function(d){return d.buffer}):a.ready.then(function(){const d=new ArrayBuffer(u*h);return a.decodeGltfBuffer(new Uint8Array(d),u,h,f,r.mode,r.filter),d})})}else return null}}class lZe{constructor(e){this.name=Vi.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const c of r.primitives)if(c.mode!==wc.TRIANGLES&&c.mode!==wc.TRIANGLE_STRIP&&c.mode!==wc.TRIANGLE_FAN&&c.mode!==void 0)return null;const a=n.extensions[this.name].attributes,o=[],l={};for(const c in a)o.push(this.parser.getDependency("accessor",a[c]).then(u=>(l[c]=u,l[c])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(c=>{const u=c.pop(),h=u.isGroup?u.children:[u],f=c[0].count,d=[];for(const g of h){const v=new Wn,A=new fe,_=new ca,y=new fe(1,1,1),x=new T5(g.geometry,g.material,f);for(let C=0;C<f;C++)l.TRANSLATION&&A.fromBufferAttribute(l.TRANSLATION,C),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,C),l.SCALE&&y.fromBufferAttribute(l.SCALE,C),x.setMatrixAt(C,v.compose(A,_,y));for(const C in l)C!=="TRANSLATION"&&C!=="ROTATION"&&C!=="SCALE"&&g.geometry.setAttribute(C,l[C]);Oi.prototype.copy.call(x,g),this.parser.assignFinalMaterial(x),d.push(x)}return u.isGroup?(u.clear(),u.add(...d),u):d[0]}))}}const tV="glTF",w_=12,OR={JSON:1313821514,BIN:5130562};class cZe{constructor(e){this.name=Vi.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,w_),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==tV)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-w_,s=new DataView(e,w_);let a=0;for(;a<r;){const o=s.getUint32(a,!0);a+=4;const l=s.getUint32(a,!0);if(a+=4,l===OR.JSON){const c=new Uint8Array(e,w_+a,o);this.content=n.decode(c)}else if(l===OR.BIN){const c=w_+a;this.body=e.slice(c,c+o)}a+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class uZe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Vi.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},c={};for(const u in a){const h=YM[u]||u.toLowerCase();o[h]=a[u]}for(const u in e.attributes){const h=YM[u]||u.toLowerCase();if(a[u]!==void 0){const f=n.accessors[e.attributes[u]],d=Eg[f.componentType];c[h]=d.name,l[h]=f.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(h){r.decodeDracoFile(u,function(f){for(const d in f.attributes){const g=f.attributes[d],v=l[d];v!==void 0&&(g.normalized=v)}h(f)},o,c)})})}}class hZe{constructor(){this.name=Vi.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class fZe{constructor(){this.name=Vi.KHR_MESH_QUANTIZATION}}class nV extends hv{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)t[a]=n[s+a];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=o*2,c=o*3,u=r-t,h=(n-t)/u,f=h*h,d=f*h,g=e*c,v=g-c,A=-2*d+3*f,_=d-f,y=1-A,x=_-f+h;for(let C=0;C!==o;C++){const S=a[v+C+o],I=a[v+C+l]*u,P=a[g+C+o],B=a[g+C]*u;s[C]=y*S+x*I+A*P+_*B}return s}}const dZe=new ca;class pZe extends nV{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return dZe.fromArray(s).normalize().toArray(s),s}}const wc={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Eg={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},NR={9728:ji,9729:Dr,9984:_1,9985:p2,9986:xg,9987:vu},FR={33071:la,33648:T0,10497:Ef},ES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},YM={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},hd={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},mZe={CUBICSPLINE:void 0,LINEAR:P0,STEP:kg},SS={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function gZe(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new mA({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:mh})),i.DefaultMaterial}function Qp(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function xd(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function vZe(i,e,t){let n=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const h=e[c];if(h.POSITION!==void 0&&(n=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const a=[],o=[],l=[];for(let c=0,u=e.length;c<u;c++){const h=e[c];if(n){const f=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):i.attributes.position;a.push(f)}if(r){const f=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):i.attributes.normal;o.push(f)}if(s){const f=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):i.attributes.color;l.push(f)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(c){const u=c[0],h=c[1],f=c[2];return n&&(i.morphAttributes.position=u),r&&(i.morphAttributes.normal=h),s&&(i.morphAttributes.color=f),i.morphTargetsRelative=!0,i})}function _Ze(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function AZe(i){let e;const t=i.extensions&&i.extensions[Vi.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+MS(t.attributes):e=i.indices+":"+MS(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,r=i.targets.length;n<r;n++)e+=":"+MS(i.targets[n]);return e}function MS(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function XM(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function bZe(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const yZe=new Wn;class wZe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new qJe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,s=-1;typeof navigator<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||r&&s<98?this.textureLoader=new $5(this.options.manager):this.textureLoader=new KO(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new uo(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(a){const o={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:n,userData:{}};Qp(s,o,r),xd(o,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const a=t[r].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(n[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[c,u]of a.children.entries())s(u,o.children[c])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,a){return n.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Vi.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){n.load(Ng.resolveURL(t.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const a=ES[r.type],o=Eg[r.componentType],l=r.normalized===!0,c=new o(r.count*a);return Promise.resolve(new Un(c,a,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],l=ES[r.type],c=Eg[r.componentType],u=c.BYTES_PER_ELEMENT,h=u*l,f=r.byteOffset||0,d=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,g=r.normalized===!0;let v,A;if(d&&d!==h){const _=Math.floor(f/d),y="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count;let x=t.cache.get(y);x||(v=new c(o,_*d,r.count*d/u),x=new cA(v,d/u),t.cache.add(y,x)),A=new Qd(x,l,f%d/u,g)}else o===null?v=new c(r.count*l):v=new c(o,f,r.count*l),A=new Un(v,l,g);if(r.sparse!==void 0){const _=ES.SCALAR,y=Eg[r.sparse.indices.componentType],x=r.sparse.indices.byteOffset||0,C=r.sparse.values.byteOffset||0,S=new y(a[1],x,r.sparse.count*_),I=new c(a[2],C,r.sparse.count*l);o!==null&&(A=new Un(A.array.slice(),A.itemSize,A.normalized));for(let P=0,B=S.length;P<B;P++){const M=S[P];if(A.setX(M,I[P*l]),l>=2&&A.setY(M,I[P*l+1]),l>=3&&A.setZ(M,I[P*l+2]),l>=4&&A.setW(M,I[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return A})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,a=t.images[s];let o=this.textureLoader;if(a.uri){const l=n.manager.getHandler(a.uri);l!==null&&(o=l)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,n){const r=this,s=this.json,a=s.textures[e],o=s.images[t],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then(function(u){u.flipY=!1,u.name=a.name||o.name||"",u.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(u.name=o.uri);const f=(s.samplers||{})[a.sampler]||{};return u.magFilter=NR[f.magFilter]||Dr,u.minFilter=NR[f.minFilter]||vu,u.wrapS=FR[f.wrapS]||Ef,u.wrapT=FR[f.wrapT]||Ef,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const n=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const a=r.images[e],o=self.URL||self.webkitURL;let l=a.uri||"",c=!1;if(a.bufferView!==void 0)l=n.getDependency("bufferView",a.bufferView).then(function(h){c=!0;const f=new Blob([h],{type:a.mimeType});return l=o.createObjectURL(f),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(h){return new Promise(function(f,d){let g=f;t.isImageBitmapLoader===!0&&(g=function(v){const A=new rs(v);A.needsUpdate=!0,f(A)}),t.load(Ng.resolveURL(h,s.path),g,void 0,d)})}).then(function(h){return c===!0&&o.revokeObjectURL(l),h.userData.mimeType=a.mimeType||bZe(a.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=u,u}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(a=a.clone(),a.channel=n.texCoord),s.extensions[Vi.KHR_TEXTURE_TRANSFORM]){const o=n.extensions!==void 0?n.extensions[Vi.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=s.associations.get(a);a=s.extensions[Vi.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,l)}}return r!==void 0&&(a.colorSpace=r),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+n.uuid;let l=this.cache.get(o);l||(l=new I2,xa.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(o,l)),n=l}else if(e.isLine){const o="LineBasicMaterial:"+n.uuid;let l=this.cache.get(o);l||(l=new mo,xa.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(o,l)),n=l}if(r||s||a){let o="ClonedMaterial:"+n.uuid+":";r&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=n.clone(),s&&(l.vertexColors=!0),a&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return mA}loadMaterial(e){const t=this,n=this.json,r=this.extensions,s=n.materials[e];let a;const o={},l=s.extensions||{},c=[];if(l[Vi.KHR_MATERIALS_UNLIT]){const h=r[Vi.KHR_MATERIALS_UNLIT];a=h.getMaterialType(),c.push(h.extendParams(o,s,t))}else{const h=s.pbrMetallicRoughness||{};if(o.color=new qt(1,1,1),o.opacity=1,Array.isArray(h.baseColorFactor)){const f=h.baseColorFactor;o.color.fromArray(f),o.opacity=f[3]}h.baseColorTexture!==void 0&&c.push(t.assignTexture(o,"map",h.baseColorTexture,kn)),o.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,o.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(o,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(o,"roughnessMap",h.metallicRoughnessTexture))),a=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=ms);const u=s.alphaMode||SS.OPAQUE;if(u===SS.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,u===SS.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==Lo&&(c.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new Et(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;o.normalScale.set(h,h)}return s.occlusionTexture!==void 0&&a!==Lo&&(c.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==Lo&&(o.emissive=new qt().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&a!==Lo&&c.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,kn)),Promise.all(c).then(function(){const h=new a(o);return s.name&&(h.name=s.name),xd(h,s),t.associations.set(h,{materials:e}),s.extensions&&Qp(r,h,s),h})}createUniqueName(e){const t=qi.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(o){return n[Vi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return zR(l,o,t)})}const a=[];for(let o=0,l=e.length;o<l;o++){const c=e[o],u=AZe(c),h=r[u];if(h)a.push(h.promise);else{let f;c.extensions&&c.extensions[Vi.KHR_DRACO_MESH_COMPRESSION]?f=s(c):f=zR(new ai,c,t),r[u]={primitive:c,promise:f},a.push(f)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,r=this.extensions,s=n.meshes[e],a=s.primitives,o=[];for(let l=0,c=a.length;l<c;l++){const u=a[l].material===void 0?gZe(this.cache):this.getDependency("material",a[l].material);o.push(u)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],h=[];for(let d=0,g=u.length;d<g;d++){const v=u[d],A=a[d];let _;const y=c[d];if(A.mode===wc.TRIANGLES||A.mode===wc.TRIANGLE_STRIP||A.mode===wc.TRIANGLE_FAN||A.mode===void 0)_=s.isSkinnedMesh===!0?new M5(v,y):new cr(v,y),_.isSkinnedMesh===!0&&_.normalizeSkinWeights(),A.mode===wc.TRIANGLE_STRIP?_.geometry=LR(_.geometry,p5):A.mode===wc.TRIANGLE_FAN&&(_.geometry=LR(_.geometry,_x));else if(A.mode===wc.LINES)_=new yu(v,y);else if(A.mode===wc.LINE_STRIP)_=new Sf(v,y);else if(A.mode===wc.LINE_LOOP)_=new I5(v,y);else if(A.mode===wc.POINTS)_=new P5(v,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);Object.keys(_.geometry.morphAttributes).length>0&&_Ze(_,s),_.name=t.createUniqueName(s.name||"mesh_"+e),xd(_,s),A.extensions&&Qp(r,_,A),t.assignFinalMaterial(_),h.push(_)}for(let d=0,g=h.length;d<g;d++)t.associations.set(h[d],{meshes:e,primitives:d});if(h.length===1)return s.extensions&&Qp(r,h[0],s),h[0];const f=new Zu;s.extensions&&Qp(r,f,s),t.associations.set(f,{meshes:e});for(let d=0,g=h.length;d<g;d++)f.add(h[d]);return f})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new yr(v5.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new yh(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),xd(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const s=r.pop(),a=r,o=[],l=[];for(let c=0,u=a.length;c<u;c++){const h=a[c];if(h){o.push(h);const f=new Wn;s!==null&&f.fromArray(s.array,c*16),l.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new uA(o,l)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,a=[],o=[],l=[],c=[],u=[];for(let h=0,f=r.channels.length;h<f;h++){const d=r.channels[h],g=r.samplers[d.sampler],v=d.target,A=v.node,_=r.parameters!==void 0?r.parameters[g.input]:g.input,y=r.parameters!==void 0?r.parameters[g.output]:g.output;v.node!==void 0&&(a.push(this.getDependency("node",A)),o.push(this.getDependency("accessor",_)),l.push(this.getDependency("accessor",y)),c.push(g),u.push(v))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(h){const f=h[0],d=h[1],g=h[2],v=h[3],A=h[4],_=[];for(let y=0,x=f.length;y<x;y++){const C=f[y],S=d[y],I=g[y],P=v[y],B=A[y];if(C===void 0)continue;C.updateMatrix&&(C.updateMatrix(),C.matrixAutoUpdate=!0);const M=n._createAnimationTracks(C,S,I,P,B);if(M)for(let D=0;D<M.length;D++)_.push(M[D])}return new Og(s,void 0,_)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(s){const a=n._getNodeRef(n.meshCache,r.mesh,s);return r.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,c=r.weights.length;l<c;l++)o.morphTargetInfluences[l]=r.weights[l]}),a})}loadNode(e){const t=this.json,n=this,r=t.nodes[e],s=n._loadNodeShallow(e),a=[],o=r.children||[];for(let c=0,u=o.length;c<u;c++)a.push(n.getDependency("node",o[c]));const l=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(a),l]).then(function(c){const u=c[0],h=c[1],f=c[2];f!==null&&u.traverse(function(d){d.isSkinnedMesh&&d.bind(f,yZe)});for(let d=0,g=h.length;d<g;d++)u.add(h[d]);return u})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],a=s.name?r.createUniqueName(s.name):"",o=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&o.push(l),s.camera!==void 0&&o.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){o.push(c)}),this.nodeCache[e]=Promise.all(o).then(function(c){let u;if(s.isBone===!0?u=new T2:c.length>1?u=new Zu:c.length===1?u=c[0]:u=new Oi,u!==c[0])for(let h=0,f=c.length;h<f;h++)u.add(c[h]);if(s.name&&(u.userData.name=s.name,u.name=a),xd(u,s),s.extensions&&Qp(n,u,s),s.matrix!==void 0){const h=new Wn;h.fromArray(s.matrix),u.applyMatrix4(h)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new Zu;n.name&&(s.name=r.createUniqueName(n.name)),xd(s,n),n.extensions&&Qp(t,s,n);const a=n.nodes||[],o=[];for(let l=0,c=a.length;l<c;l++)o.push(r.getDependency("node",a[l]));return Promise.all(o).then(function(l){for(let u=0,h=l.length;u<h;u++)s.add(l[u]);const c=u=>{const h=new Map;for(const[f,d]of r.associations)(f instanceof xa||f instanceof rs)&&h.set(f,d);return u.traverse(f=>{const d=r.associations.get(f);d!=null&&h.set(f,d)}),h};return r.associations=c(s),s})}_createAnimationTracks(e,t,n,r,s){const a=[],o=e.name?e.name:e.uuid,l=[];hd[s.path]===hd.weights?e.traverse(function(f){f.morphTargetInfluences&&l.push(f.name?f.name:f.uuid)}):l.push(o);let c;switch(hd[s.path]){case hd.weights:c=B0;break;case hd.rotation:c=qd;break;case hd.position:case hd.scale:default:switch(n.itemSize){case 1:c=B0;break;case 2:case 3:c=Lg;break}break}const u=r.interpolation!==void 0?mZe[r.interpolation]:P0,h=this._getArrayFromAccessor(n);for(let f=0,d=l.length;f<d;f++){const g=new c(l[f]+"."+hd[s.path],t.array,h,u);u==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),a.push(g)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=XM(t.constructor),r=new Float32Array(t.length);for(let s=0,a=t.length;s<a;s++)r[s]=t[s]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof qd?pZe:nV;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function xZe(i,e,t){const n=e.attributes,r=new bu;if(n.POSITION!==void 0){const o=t.json.accessors[n.POSITION],l=o.min,c=o.max;if(l!==void 0&&c!==void 0){if(r.set(new fe(l[0],l[1],l[2]),new fe(c[0],c[1],c[2])),o.normalized){const u=XM(Eg[o.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new fe,l=new fe;for(let c=0,u=s.length;c<u;c++){const h=s[c];if(h.POSITION!==void 0){const f=t.json.accessors[h.POSITION],d=f.min,g=f.max;if(d!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(d[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(g[2]))),f.normalized){const v=XM(Eg[f.componentType]);l.multiplyScalar(v)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(o)}i.boundingBox=r;const a=new Vc;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=a}function zR(i,e,t){const n=e.attributes,r=[];function s(a,o){return t.getDependency("accessor",a).then(function(l){i.setAttribute(o,l)})}for(const a in n){const o=YM[a]||a.toLowerCase();o in i.attributes||r.push(s(n[a],o))}if(e.indices!==void 0&&!i.index){const a=t.getDependency("accessor",e.indices).then(function(o){i.setIndex(o)});r.push(a)}return xd(i,e),xZe(i,e,t),Promise.all(r).then(function(){return e.targets!==void 0?vZe(i,e.targets,t):i})}class CZe{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const n=this.workersResolve[e];if(n&&n(t),this.queue.length){const{resolve:r,msg:s,transfer:a}=this.queue.shift();this.workersResolve[e]=r,this.workers[e].postMessage(s,a)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(n=>{const r=this._getIdleWorker();r!==-1?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=n,this.workers[r].postMessage(e,t)):this.queue.push({resolve:n,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const EZe=0,SZe=2,MZe=1,TZe=2,IZe=0,iV=9,tP=15,rV=16,nP=22,sV=37,iP=43,aV=76,oV=83,lV=97,cV=100,uV=103,hV=109;class PZe{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class x_{constructor(e,t,n,r){this._dataView=new DataView(e.buffer,e.byteOffset+t,n),this._littleEndian=r,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_skip(e){return this._offset+=e,this}_scan(e,t=0){const n=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==t&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,r)}}const ko=[171,75,84,88,32,50,48,187,13,10,26,10];function UR(i){return typeof TextDecoder<"u"?new TextDecoder().decode(i):Buffer.from(i).toString("utf8")}function kZe(i){const e=new Uint8Array(i.buffer,i.byteOffset,ko.length);if(e[0]!==ko[0]||e[1]!==ko[1]||e[2]!==ko[2]||e[3]!==ko[3]||e[4]!==ko[4]||e[5]!==ko[5]||e[6]!==ko[6]||e[7]!==ko[7]||e[8]!==ko[8]||e[9]!==ko[9]||e[10]!==ko[10]||e[11]!==ko[11])throw new Error("Missing KTX 2.0 identifier.");const t=new PZe,n=17*Uint32Array.BYTES_PER_ELEMENT,r=new x_(i,ko.length,n,!0);t.vkFormat=r._nextUint32(),t.typeSize=r._nextUint32(),t.pixelWidth=r._nextUint32(),t.pixelHeight=r._nextUint32(),t.pixelDepth=r._nextUint32(),t.layerCount=r._nextUint32(),t.faceCount=r._nextUint32();const s=r._nextUint32();t.supercompressionScheme=r._nextUint32();const a=r._nextUint32(),o=r._nextUint32(),l=r._nextUint32(),c=r._nextUint32(),u=r._nextUint64(),h=r._nextUint64(),f=new x_(i,ko.length+n,3*s*8,!0);for(let W=0;W<s;W++)t.levels.push({levelData:new Uint8Array(i.buffer,i.byteOffset+f._nextUint64(),f._nextUint64()),uncompressedByteLength:f._nextUint64()});const d=new x_(i,a,o,!0),g={vendorId:d._skip(4)._nextUint16(),descriptorType:d._nextUint16(),versionNumber:d._nextUint16(),descriptorBlockSize:d._nextUint16(),colorModel:d._nextUint8(),colorPrimaries:d._nextUint8(),transferFunction:d._nextUint8(),flags:d._nextUint8(),texelBlockDimension:[d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8()],bytesPlane:[d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8()],samples:[]},v=(g.descriptorBlockSize/4-6)/4;for(let W=0;W<v;W++){const J={bitOffset:d._nextUint16(),bitLength:d._nextUint8(),channelType:d._nextUint8(),samplePosition:[d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&J.channelType?(J.sampleLower=d._nextInt32(),J.sampleUpper=d._nextInt32()):(J.sampleLower=d._nextUint32(),J.sampleUpper=d._nextUint32()),g.samples[W]=J}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(g);const A=new x_(i,l,c,!0);for(;A._offset<c;){const W=A._nextUint32(),J=A._scan(W),Ce=UR(J),Me=A._scan(W-J.byteLength);t.keyValue[Ce]=Ce.match(/^ktx/i)?UR(Me):Me,A._offset%4&&A._skip(4-A._offset%4)}if(h<=0)return t;const _=new x_(i,u,h,!0),y=_._nextUint16(),x=_._nextUint16(),C=_._nextUint32(),S=_._nextUint32(),I=_._nextUint32(),P=_._nextUint32(),B=[];for(let W=0;W<s;W++)B.push({imageFlags:_._nextUint32(),rgbSliceByteOffset:_._nextUint32(),rgbSliceByteLength:_._nextUint32(),alphaSliceByteOffset:_._nextUint32(),alphaSliceByteLength:_._nextUint32()});const M=u+_._offset,D=M+C,F=D+S,z=F+I,U=new Uint8Array(i.buffer,i.byteOffset+M,C),$=new Uint8Array(i.buffer,i.byteOffset+D,S),O=new Uint8Array(i.buffer,i.byteOffset+F,I),ie=new Uint8Array(i.buffer,i.byteOffset+z,P);return t.globalData={endpointCount:y,selectorCount:x,imageDescs:B,endpointsData:U,selectorsData:$,tablesData:O,extendedData:ie},t}let TS,uf,KM;const IS={env:{emscripten_notify_memory_growth:function(i){KM=new Uint8Array(uf.exports.memory.buffer)}}};class BZe{init(){return TS||(TS=typeof fetch<"u"?fetch("data:application/wasm;base64,"+VR).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,IS)).then(this._init):WebAssembly.instantiate(Buffer.from(VR,"base64"),IS).then(this._init),TS)}_init(e){uf=e.instance,IS.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!uf)throw new Error("ZSTDDecoder: Await .init() before decoding.");const n=e.byteLength,r=uf.exports.malloc(n);KM.set(e,r),t=t||Number(uf.exports.ZSTD_findDecompressedSize(r,n));const s=uf.exports.malloc(t),a=uf.exports.ZSTD_decompress(s,t,r,n),o=KM.slice(s,s+a);return uf.exports.free(r),uf.exports.free(s),o}}const VR="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",PS=new WeakMap;let kS=0,BS;class ih extends Ya{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new CZe,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}detectSupport(e){return e.isWebGPURenderer===!0?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),etc1Supported:!1,etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-bc"),bptcSupported:!1,pvrtcSupported:!1}:(this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},e.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1)),this}init(){if(!this.transcoderPending){const e=new uo(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),n=new uo(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials);const r=n.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,r]).then(([s,a])=>{const o=ih.BasisWorker.toString(),l=["/* constants */","let _EngineFormat = "+JSON.stringify(ih.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(ih.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(ih.BasisFormat),"/* basis_transcoder.js */",s,"/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l])),this.transcoderBinary=a,this.workerPool.setWorkerCreator(()=>{const c=new Worker(this.workerSourceURL),u=this.transcoderBinary.slice(0);return c.postMessage({type:"init",config:this.workerConfig,transcoderBinary:u},[u]),c})}),kS>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),kS++}return this.transcoderPending}load(e,t,n,r){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const s=new uo(this.manager);s.setResponseType("arraybuffer"),s.setWithCredentials(this.withCredentials),s.load(e,a=>{if(PS.has(a))return PS.get(a).promise.then(t).catch(r);this._createTexture(a).then(o=>t?t(o):null).catch(r)},n,r)}_createTextureFrom(e,t){const{faces:n,width:r,height:s,format:a,type:o,error:l,dfdTransferFn:c,dfdFlags:u}=e;if(o==="error")return Promise.reject(l);let h;if(t.faceCount===6)h=new wO(n,a,ns);else{const f=n[0].mipmaps;h=t.layerCount>1?new yO(f,r,s,t.layerCount,a,ns):new hA(f,r,s,a,ns)}return h.minFilter=n[0].mipmaps.length===1?Dr:vu,h.magFilter=Dr,h.generateMipmaps=!1,h.needsUpdate=!0,h.colorSpace=c===TZe?kn:ch,h.premultiplyAlpha=!!(u&MZe),h}async _createTexture(e,t={}){const n=kZe(new Uint8Array(e));if(n.vkFormat!==IZe){const a=[],o=[];for(let c=0;c<n.levels.length;c++)o.push(DZe(n,c).then(function(u){a[c]=u}));await Promise.all(o);const l=a[0];return l.mipmaps=a.map(c=>({data:c.source.data,width:c.source.data.width,height:c.source.data.height,depth:c.source.data.depth})),l}const r=t,s=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:r},[e])).then(a=>this._createTextureFrom(a.data,n));return PS.set(e,{promise:s}),s}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),kS--,this}}ih.BasisFormat={ETC1S:0,UASTC_4x4:1};ih.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16};ih.EngineFormat={RGBAFormat:Bs,RGBA_ASTC_4x4_Format:vx,RGBA_BPTC_Format:t1,RGBA_ETC2_EAC_Format:gx,RGBA_PVRTC_4BPPV1_Format:px,RGBA_S3TC_DXT5_Format:e1,RGB_ETC1_Format:f5,RGB_ETC2_Format:mx,RGB_PVRTC_4BPPV1_Format:dx,RGB_S3TC_DXT1_Format:Z_};ih.BasisWorker=function(){let i,e,t;const n=_EngineFormat,r=_TranscoderFormat,s=_BasisFormat;self.addEventListener("message",function(g){const v=g.data;switch(v.type){case"init":i=v.config,a(v.transcoderBinary);break;case"transcode":e.then(()=>{try{const{faces:A,buffers:_,width:y,height:x,hasAlpha:C,format:S,dfdTransferFn:I,dfdFlags:P}=o(v.buffer);self.postMessage({type:"transcode",id:v.id,faces:A,width:y,height:x,hasAlpha:C,format:S,dfdTransferFn:I,dfdFlags:P},_)}catch(A){console.error(A),self.postMessage({type:"error",id:v.id,error:A.message})}});break}});function a(g){e=new Promise(v=>{t={wasmBinary:g,onRuntimeInitialized:v},BASIS(t)}).then(()=>{t.initializeBasis(),t.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function o(g){const v=new t.KTX2File(new Uint8Array(g));function A(){v.close(),v.delete()}if(!v.isValid())throw A(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const _=v.isUASTC()?s.UASTC_4x4:s.ETC1S,y=v.getWidth(),x=v.getHeight(),C=v.getLayers()||1,S=v.getLevels(),I=v.getFaces(),P=v.getHasAlpha(),B=v.getDFDTransferFunc(),M=v.getDFDFlags(),{transcoderFormat:D,engineFormat:F}=h(_,y,x,P);if(!y||!x||!S)throw A(),new Error("THREE.KTX2Loader:	Invalid texture");if(!v.startTranscoding())throw A(),new Error("THREE.KTX2Loader: .startTranscoding failed");const z=[],U=[];for(let $=0;$<I;$++){const O=[];for(let ie=0;ie<S;ie++){const W=[];let J,Ce;for(let ge=0;ge<C;ge++){const ve=v.getImageLevelInfo(ie,ge,$);$===0&&ie===0&&ge===0&&(ve.origWidth%4!==0||ve.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),S>1?(J=ve.origWidth,Ce=ve.origHeight):(J=ve.width,Ce=ve.height);const nt=new Uint8Array(v.getImageTranscodedSizeInBytes(ie,ge,0,D));if(!v.transcodeImage(nt,ie,ge,$,D,0,-1,-1))throw A(),new Error("THREE.KTX2Loader: .transcodeImage failed.");W.push(nt)}const Me=d(W);O.push({data:Me,width:J,height:Ce}),U.push(Me.buffer)}z.push({mipmaps:O,width:y,height:x,format:F})}return A(),{faces:z,buffers:U,width:y,height:x,hasAlpha:P,format:F,dfdTransferFn:B,dfdFlags:M}}const l=[{if:"astcSupported",basisFormat:[s.UASTC_4x4],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[n.RGBA_ASTC_4x4_Format,n.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[n.RGBA_BPTC_Format,n.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC1,r.BC3],engineFormat:[n.RGB_S3TC_DXT1_Format,n.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[n.RGB_ETC2_Format,n.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1],engineFormat:[n.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[n.RGB_PVRTC_4BPPV1_Format,n.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],c=l.sort(function(g,v){return g.priorityETC1S-v.priorityETC1S}),u=l.sort(function(g,v){return g.priorityUASTC-v.priorityUASTC});function h(g,v,A,_){let y,x;const C=g===s.ETC1S?c:u;for(let S=0;S<C.length;S++){const I=C[S];if(i[I.if]&&I.basisFormat.includes(g)&&!(_&&I.transcoderFormat.length<2)&&!(I.needsPowerOfTwo&&!(f(v)&&f(A))))return y=I.transcoderFormat[_?1:0],x=I.engineFormat[_?1:0],{transcoderFormat:y,engineFormat:x}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),y=r.RGBA32,x=n.RGBAFormat,{transcoderFormat:y,engineFormat:x}}function f(g){return g<=2?!0:(g&g-1)===0&&g!==0}function d(g){if(g.length===1)return g[0];let v=0;for(let y=0;y<g.length;y++){const x=g[y];v+=x.byteLength}const A=new Uint8Array(v);let _=0;for(let y=0;y<g.length;y++){const x=g[y];A.set(x,_),_+=x.byteLength}return A}};const HR={[hV]:Bs,[lV]:Bs,[sV]:Bs,[iP]:Bs,[uV]:hg,[oV]:hg,[rV]:hg,[nP]:hg,[cV]:ug,[aV]:ug,[tP]:ug,[iV]:ug},RS={[hV]:is,[lV]:Kl,[sV]:ns,[iP]:ns,[uV]:is,[oV]:Kl,[rV]:ns,[nP]:ns,[cV]:is,[aV]:Kl,[tP]:ns,[iV]:ns},RZe={[iP]:kn,[nP]:kn,[tP]:kn};async function DZe(i,e=0){const{vkFormat:t}=i,n=Math.max(1,i.pixelWidth>>e),r=Math.max(1,i.pixelHeight>>e),s=Math.max(1,i.pixelDepth>>e);if(HR[t]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const a=i.levels[e];let o,l;if(i.supercompressionScheme===EZe)o=a.levelData;else if(i.supercompressionScheme===SZe)BS||(BS=new Promise(async u=>{const h=new BZe;await h.init(),u(h)})),o=(await BS).decode(a.levelData,a.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");RS[t]===is?l=new Float32Array(o.buffer,o.byteOffset,o.byteLength/Float32Array.BYTES_PER_ELEMENT):RS[t]===Kl?l=new Uint16Array(o.buffer,o.byteOffset,o.byteLength/Uint16Array.BYTES_PER_ELEMENT):l=o;const c=s===0?new b0(l,n,r):new y2(l,n,r,s);return c.type=RS[t],c.format=HR[t],c.colorSpace=RZe[t]||ch,c.needsUpdate=!0,Promise.resolve(c)}const LZe=i=>{const e={nodes:{},materials:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e};function OZe(i,e){const{renderer:t}=Df(),n=typeof i=="string"?e:i,r=uN(QJe,{extend(o){if(n!=null&&n.useDraco){const l=typeof n.useDraco=="string"?n.useDraco:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/",c=new $Je().setDecoderPath(l);o.setDRACOLoader(c)}if(n!=null&&n.useMeshopt&&o.setMeshoptDecoder(HJe),n!=null&&n.ktxTranscoderPath&&t){const l=new ih;l.setTranscoderPath(n==null?void 0:n.ktxTranscoderPath),l.detectSupport(t),o.setKTX2Loader(l)}}}),s=o=>r.load(o,{transform(l){return{...l,...LZe(l.scene)}}}),a=typeof i=="string"?i:void 0;return a?s(a):{load:s}}const NZe=(i,e)=>uN($5,e).load(i),FZe=()=>{const i=J1();return{hasEventListeners:t=>{const n=i.$$.callbacks;return t in n&&n[t].length>0}}},EA=new fe,rP=new fe,zZe=new fe,UZe=(i,e,t)=>{const n=EA.setFromMatrixPosition(i.matrixWorld);n.project(e);const r=t.width/2,s=t.height/2;return[n.x*r+r,-(n.y*s)+s]},VZe=(i,e)=>{const t=EA.setFromMatrixPosition(i.matrixWorld),n=rP.setFromMatrixPosition(e.matrixWorld),r=t.sub(n),s=e.getWorldDirection(zZe);return r.angleTo(s)>Math.PI/2},HZe=(i,e,t,n)=>{const r=EA.setFromMatrixPosition(i.matrixWorld),s=r.clone();s.project(e),t.setFromCamera(s,e);const a=t.intersectObjects(n,!0);if(a.length){const o=a[0].distance;return r.distanceTo(t.ray.origin)<o}return!0},$Ze=(i,e)=>{if(e instanceof yh)return e.zoom;if(e instanceof yr){const t=EA.setFromMatrixPosition(i.matrixWorld),n=rP.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(n);return 1/(2*Math.tan(r/2)*s)}else return 1},GZe=(i,e,t)=>{if(e instanceof yr||e instanceof yh){const n=EA.setFromMatrixPosition(i.matrixWorld),r=rP.setFromMatrixPosition(e.matrixWorld),s=n.distanceTo(r),a=(t[1]-t[0])/(e.far-e.near),o=t[1]-a*e.far;return Math.round(a*s+o)}},JM=i=>Math.abs(i)<1e-10?0:i,fV=(i,e,t="")=>{let n="matrix3d(";for(let r=0;r!==16;r++)n+=JM(e[r]*i.elements[r])+(r!==15?",":")");return t+n},QZe=(i=>e=>fV(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),qZe=(i=>(e,t)=>fV(e,i(t),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]),jZe=i=>i.split(/(?=[A-Z])/).join("-").toLowerCase(),Yu=i=>Object.entries(i).filter(([e,t])=>!!t).map(([e,t])=>`${jZe(e)}: ${t}`).join("; "),_c=(i,e)=>{i.update(t=>({...t,...e}))},WZe=i=>({ref:i[0]&4}),$R=i=>({ref:i[2]});function YZe(i){let e;const t=i[40].threlte,n=ni(t,i,i[46],$R);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s[0]&4|s[1]&32768)&&ii(n,t,r,r[46],e?si(t,r[46],s,WZe):ri(r[46]),$R)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function XZe(i){let e=i[1],t,n,r=i[1]&&DS(i);return{c(){r&&r.c(),t=ua()},l(s){r&&r.l(s),t=ua()},m(s,a){r&&r.m(s,a),Pe(s,t,a),n=!0},p(s,a){s[1]?e?an(e,s[1])?(r.d(1),r=DS(s),e=s[1],r.c(),r.m(t.parentNode,t)):r.p(s,a):(r=DS(s),e=s[1],r.c(),r.m(t.parentNode,t)):e&&(r.d(1),r=null,e=s[1])},i(s){n||(oe(r,s),n=!0)},o(s){pe(r,s),n=!1},d(s){s&&Z(t),r&&r.d(s)}}}function KZe(i){let e=i[1],t,n,r=i[1]&&LS(i);return{c(){r&&r.c(),t=ua()},l(s){r&&r.l(s),t=ua()},m(s,a){r&&r.m(s,a),Pe(s,t,a),n=!0},p(s,a){s[1]?e?an(e,s[1])?(r.d(1),r=LS(s),e=s[1],r.c(),r.m(t.parentNode,t)):r.p(s,a):(r=LS(s),e=s[1],r.c(),r.m(t.parentNode,t)):e&&(r.d(1),r=null,e=s[1])},i(s){n||(oe(r,s),n=!0)},o(s){pe(r,s),n=!1},d(s){s&&Z(t),r&&r.d(s)}}}function GR(i){let e;const t=i[40].default,n=ni(t,i,i[46],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s[1]&32768)&&ii(n,t,r,r[46],e?si(t,r[46],s,null):ri(r[46]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function DS(i){let e,t,n,r,s,a,o,l=i[6]&&GR(i),c=[{style:r=Yu(i[11])}],u={};for(let h=0;h<c.length;h+=1)u=Bt(u,c[h]);return{c(){e=ht(i[1]),t=ht("div"),l&&l.c(),this.h()},l(h){e=ft(h,(i[1]||"null").toUpperCase(),{style:!0});var f=Pt(e);t=ft(f,"DIV",{style:!0});var d=Pt(t);l&&l.l(d),d.forEach(Z),f.forEach(Z),this.h()},h(){it(t,"style",n=Yu(i[12])),cx(i[1])(e,u)},m(h,f){Pe(h,e,f),Ge(e,t),l&&l.m(t,null),i[45](e),s=!0,a||(o=[sa(i[23].call(null,e)),sa(i[22].call(null,e))],a=!0)},p(h,f){h[6]?l?(l.p(h,f),f[0]&64&&oe(l,1)):(l=GR(h),l.c(),oe(l,1),l.m(t,null)):l&&(Rs(),pe(l,1,1,()=>{l=null}),Ds()),(!s||f[0]&4096&&n!==(n=Yu(h[12])))&&it(t,"style",n),cx(h[1])(e,u=Fn(c,[(!s||f[0]&2048&&r!==(r=Yu(h[11])))&&{style:r}]))},i(h){s||(oe(l),s=!0)},o(h){pe(l),s=!1},d(h){h&&Z(e),l&&l.d(),i[45](null),a=!1,iv(o)}}}function QR(i){let e;const t=i[40].default,n=ni(t,i,i[46],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s[1]&32768)&&ii(n,t,r,r[46],e?si(t,r[46],s,null):ri(r[46]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function LS(i){let e,t,n,r,s,a,o,l,c,u=i[6]&&QR(i),h=[{style:a=Yu(i[8])}],f={};for(let d=0;d<h.length;d+=1)f=Bt(f,h[d]);return{c(){e=ht(i[1]),t=ht("div"),n=ht("div"),u&&u.c(),this.h()},l(d){e=ft(d,(i[1]||"null").toUpperCase(),{style:!0});var g=Pt(e);t=ft(g,"DIV",{style:!0});var v=Pt(t);n=ft(v,"DIV",{style:!0});var A=Pt(n);u&&u.l(A),A.forEach(Z),v.forEach(Z),g.forEach(Z),this.h()},h(){it(n,"style",r=Yu(i[10])),it(t,"style",s=Yu(i[9])),cx(i[1])(e,f)},m(d,g){Pe(d,e,g),Ge(e,t),Ge(t,n),u&&u.m(n,null),i[42](n),i[43](t),i[44](e),o=!0,l||(c=sa(i[23].call(null,e)),l=!0)},p(d,g){d[6]?u?(u.p(d,g),g[0]&64&&oe(u,1)):(u=QR(d),u.c(),oe(u,1),u.m(n,null)):u&&(Rs(),pe(u,1,1,()=>{u=null}),Ds()),(!o||g[0]&1024&&r!==(r=Yu(d[10])))&&it(n,"style",r),(!o||g[0]&512&&s!==(s=Yu(d[9])))&&it(t,"style",s),cx(d[1])(e,f=Fn(h,[(!o||g[0]&256&&a!==(a=Yu(d[8])))&&{style:a}]))},i(d){o||(oe(u),o=!0)},o(d){pe(u),o=!1},d(d){d&&Z(e),u&&u.d(),i[42](null),i[43](null),i[44](null),l=!1,c()}}}function JZe(i){let e,t,n,r,s,a;const o=[{is:i[2]},i[25]];let l={$$slots:{default:[YZe,({ref:f})=>({2:f}),({ref:f})=>[f?4:0]]},$$scope:{ctx:i}};for(let f=0;f<o.length;f+=1)l=Bt(l,o[f]);e=new Oo({props:l}),i[41](e);const c=[KZe,XZe],u=[];function h(f,d){return f[0]?0:1}return n=h(i),r=u[n]=c[n](i),{c(){Oe(e.$$.fragment),t=_t(),r.c(),s=ua()},l(f){ze(e.$$.fragment,f),t=At(f),r.l(f),s=ua()},m(f,d){Ne(e,f,d),Pe(f,t,d),u[n].m(f,d),Pe(f,s,d),a=!0},p(f,d){const g=d[0]&33554436?Fn(o,[d[0]&4&&{is:f[2]},d[0]&33554432&&ur(f[25])]):{};d[0]&4|d[1]&32768&&(g.$$scope={dirty:d,ctx:f}),e.$set(g);let v=n;n=h(f),n===v?u[n].p(f,d):(Rs(),pe(u[v],1,1,()=>{u[v]=null}),Ds(),r=u[n],r?r.p(f,d):(r=u[n]=c[n](f),r.c()),oe(r,1),r.m(s.parentNode,s))},i(f){a||(oe(e.$$.fragment,f),oe(r),a=!0)},o(f){pe(e.$$.fragment,f),pe(r),a=!1},d(f){f&&(Z(t),Z(s)),i[41](null),Fe(e,f),u[n].d(f)}}}function ZZe(i,e,t){const n=["transform","calculatePosition","eps","occlude","zIndexRange","sprite","pointerEvents","center","fullscreen","distanceFactor","as","portal","ref","visible"];let r=$d(e,n),s,a,o,l,c,u,h,f,d,g,{$$slots:v={},$$scope:A}=e,{transform:_=!1}=e,{calculatePosition:y=UZe}=e,{eps:x=.001}=e,{occlude:C=!1}=e,{zIndexRange:S=[16777271,0]}=e,{sprite:I=!1}=e,{pointerEvents:P="auto"}=e,{center:B=!1}=e,{fullscreen:M=!1}=e,{distanceFactor:D=void 0}=e,{as:F="div"}=e,{portal:z=void 0}=e;const U=J5();let{ref:$=new Zu}=e;const{renderer:O,camera:ie,scene:W,size:J}=Df();Xt(i,ie,ne=>t(50,a=ne)),Xt(i,J,ne=>t(37,s=ne));const Ce=()=>{if(!(a instanceof yr)&&!(a instanceof yh))throw new Error("Only PerspectiveCamera or OrthographicCamera supported for component <HTML>");return a},Me=new tN;let ge=[0,0],ve=0,{visible:nt=!0}=e,$e=document.createElement(F),X,Be;const{hasEventListeners:mt}=FZe();let Ue=typeof C=="boolean"&&C===!0?[W]:Array.isArray(C)?C:void 0;const Tt=cu(J,ne=>ne.width/2);Xt(i,Tt,ne=>t(39,l=ne));const yt=cu(J,ne=>ne.height/2);Xt(i,yt,ne=>t(38,o=ne));let Ye={common:{el:Is({})},transform:{el:Is({position:"absolute",top:"0",left:"0",pointerEvents:"none",overflow:"hidden",display:"block",width:`${s.width}px`,height:`${s.height}px`}),outerRef:Is({position:"absolute",top:"0",left:"0",width:`${s.width}px`,height:`${s.height}px`,transformStyle:"preserve-3d",pointerEvents:"none"}),innerRef:Is({position:"absolute",pointerEvents:P})},noTransform:{el:Is({}),div:Is({position:"absolute",transform:B?"translate3d(-50%,-50%,0)":"none",top:M?`${-o}px`:void 0,left:M?`${-l}px`:void 0,width:M?`${s.width}px`:void 0,height:M?`${s.height}px`:void 0})}};const lt=cu([Ye.transform.el,Ye.common.el],([ne,Je])=>({...ne,...Je}));Xt(i,lt,ne=>t(8,u=ne));const ue=cu(Ye.transform.outerRef,ne=>ne);Xt(i,ue,ne=>t(9,h=ne));const dt=cu(Ye.transform.innerRef,ne=>ne);Xt(i,dt,ne=>t(10,f=ne));const le=cu(Ye.noTransform.el,ne=>ne);Xt(i,le,ne=>t(11,d=ne));const he=cu(Ye.noTransform.div,ne=>ne);Xt(i,he,ne=>t(12,g=ne));const xe=()=>{let ne=!0,Je=$.parent;e:for(;Je;){if("visible"in Je&&!Je.visible){ne=!1;break e}Je=Je.parent}return ne};let pt=xe();cN(async()=>{t(6,pt=xe());const ne=Ce();ne.updateMatrixWorld(),$.updateWorldMatrix(!0,!1);const Je=_?ge:y($,ne,s);if(_||Math.abs(ve-ne.zoom)>x||Math.abs(ge[0]-Je[0])>x||Math.abs(ge[1]-Je[1])>x){const Lt=VZe($,ne),we=nt;if(Ue){const Ie=HZe($,ne,Me,Ue);t(26,nt=Ie&&!Lt)}else t(26,nt=!Lt);if(we!==nt&&(mt("visibilitychange")?U("visibilitychange",nt):_c(Ye.common.el,{display:nt?"block":"none"})),_c(Ye.common.el,{zIndex:`${GZe($,ne,S)}`}),_){const Ie=ne.projectionMatrix.elements[5]*o,{isOrthographicCamera:de,top:Xe,left:Nt,bottom:Qt,right:Ft}=ne;let jt=$.matrixWorld;if(I&&(jt=ne.matrixWorldInverse.clone().transpose().copyPosition(jt).scale($.scale),jt.elements[3]=jt.elements[7]=jt.elements[11]=0,jt.elements[15]=1),_c(Ye.transform.el,{perspective:de?"":`${Ie}px`}),X&&Be){const St=de?`scale(${Ie}) translate(${JM(-(Ft+Nt)/2)}px,${JM((Xe+Qt)/2)}px)`:`translateZ(${Ie}px)`,Re=QZe(ne.matrixWorldInverse);_c(Ye.transform.outerRef,{transform:`${St}${Re}translate(${l}px, ${o}px)`}),_c(Ye.transform.innerRef,{transform:qZe(jt,1/((D||10)/400))})}}else{const Ie=D===void 0?1:$Ze($,ne)*D;_c(Ye.noTransform.el,{transform:`translate3d(${Je[0]}px, ${Je[1]}px, 0) scale(${Ie})`})}ge=Je,ve=ne.zoom}},{debugFrameloopMessage:"HTML: tracking parent"});const Ze=ne=>{if(!$||_)return;W.updateMatrixWorld();const Je=y($,a,s);_c(Ye.noTransform.el,{position:"absolute",top:"0",left:"0",transform:`translate3d(${Je[0]}px, ${Je[1]}px, 0)`,transformOrigin:"0 0"})},me=ne=>{if(!O){console.warn("HTML: renderer is undefined. Is this component a child to <Canvas>?");return}const Je=z??O.domElement.parentElement;if(!Je){console.warn("HTML: target is undefined.");return}return Je.appendChild(ne),{destroy:()=>{ne.parentNode&&ne.parentNode.removeChild(ne)}}},te=hN();Xt(i,te,ne=>t(7,c=ne));function Se(ne){Wa[ne?"unshift":"push"](()=>{c=ne,te.set(c)})}function j(ne){Wa[ne?"unshift":"push"](()=>{Be=ne,t(5,Be)})}function q(ne){Wa[ne?"unshift":"push"](()=>{X=ne,t(4,X)})}function Ve(ne){Wa[ne?"unshift":"push"](()=>{$e=ne,t(3,$e)})}function ct(ne){Wa[ne?"unshift":"push"](()=>{$e=ne,t(3,$e)})}return i.$$set=ne=>{e=Bt(Bt({},e),Mn(ne)),t(25,r=$d(e,n)),"transform"in ne&&t(0,_=ne.transform),"calculatePosition"in ne&&t(27,y=ne.calculatePosition),"eps"in ne&&t(28,x=ne.eps),"occlude"in ne&&t(29,C=ne.occlude),"zIndexRange"in ne&&t(30,S=ne.zIndexRange),"sprite"in ne&&t(31,I=ne.sprite),"pointerEvents"in ne&&t(32,P=ne.pointerEvents),"center"in ne&&t(33,B=ne.center),"fullscreen"in ne&&t(34,M=ne.fullscreen),"distanceFactor"in ne&&t(35,D=ne.distanceFactor),"as"in ne&&t(1,F=ne.as),"portal"in ne&&t(36,z=ne.portal),"ref"in ne&&t(2,$=ne.ref),"visible"in ne&&t(26,nt=ne.visible),"$$scope"in ne&&t(46,A=ne.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&536870912&&(Ue=typeof C=="boolean"&&C===!0?[W]:Array.isArray(C)?C:void 0),i.$$.dirty[1]&64&&_c(Ye.transform.el,{width:`${s.width}px`,height:`${s.height}px`}),i.$$.dirty[1]&64&&_c(Ye.transform.outerRef,{width:`${s.width}px`,height:`${s.height}px`}),i.$$.dirty[1]&2&&_c(Ye.transform.innerRef,{pointerEvents:P}),i.$$.dirty[1]&4&&_c(Ye.noTransform.div,{transform:B?"translate3d(-50%, -50%, 0)":"none"}),i.$$.dirty[1]&456&&_c(Ye.noTransform.div,{top:M?`${-o}px`:void 0,left:M?`${-l}px`:void 0,width:M?`${s.width}px`:void 0,height:M?`${s.height}px`:void 0})},[_,F,$,$e,X,Be,pt,c,u,h,f,d,g,ie,J,Tt,yt,lt,ue,dt,le,he,Ze,me,te,r,nt,y,x,C,S,I,P,B,M,D,z,s,o,l,v,Se,j,q,Ve,ct,A]}class dV extends ln{constructor(e){super(),cn(this,e,ZZe,JZe,an,{transform:0,calculatePosition:27,eps:28,occlude:29,zIndexRange:30,sprite:31,pointerEvents:32,center:33,fullscreen:34,distanceFactor:35,as:1,portal:36,ref:2,visible:26},null,[-1,-1])}}const eet=i=>({ref:i&1}),qR=i=>({ref:i[0]});function tet(i){let e,t,n;e=new Oo.PlaneGeometry({props:{args:typeof i[1]=="number"?[i[1],i[1]]:i[1]}});const r=i[17].default,s=ni(r,i,i[20],qR);return{c(){Oe(e.$$.fragment),t=_t(),s&&s.c()},l(a){ze(e.$$.fragment,a),t=At(a),s&&s.l(a)},m(a,o){Ne(e,a,o),Pe(a,t,o),s&&s.m(a,o),n=!0},p(a,o){const l={};o&2&&(l.args=typeof a[1]=="number"?[a[1],a[1]]:a[1]),e.$set(l),s&&s.p&&(!n||o&1048577)&&ii(s,r,a,a[20],n?si(r,a[20],o,eet):ri(a[20]),qR)},i(a){n||(oe(e.$$.fragment,a),oe(s,a),n=!0)},o(a){pe(e.$$.fragment,a),pe(s,a),n=!1},d(a){a&&Z(t),Fe(e,a),s&&s.d(a)}}}function net(i){let e,t,n;const r=[{material:i[2]},{frustumCulled:!1},i[5]];function s(o){i[19](o)}let a={$$slots:{default:[tet,({ref:o})=>({0:o}),({ref:o})=>o?1:0]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Bt(a,r[o]);return i[0]!==void 0&&(a.ref=i[0]),e=new Oo.Mesh({props:a}),i[18](e),Wa.push(()=>eA(e,"ref",s)),{c(){Oe(e.$$.fragment)},l(o){ze(e.$$.fragment,o)},m(o,l){Ne(e,o,l),n=!0},p(o,[l]){const c=l&36?Fn(r,[l&4&&{material:o[2]},r[1],l&32&&ur(o[5])]):{};l&1048579&&(c.$$scope={dirty:l,ctx:o}),!t&&l&1&&(t=!0,c.ref=o[0],Z1(()=>t=!1)),e.$set(c)},i(o){n||(oe(e.$$.fragment,o),n=!0)},o(o){pe(e.$$.fragment,o),n=!1},d(o){i[18](null),Fe(e,o)}}}function iet(i,e,t){let n;const r=["cellColor","sectionColor","cellSize","sectionSize","axes","gridSize","followCamera","infiniteGrid","fadeDistance","fadeStrength","cellThickness","sectionThickness","ref"];let s=$d(e,r),a,{$$slots:o={},$$scope:l}=e,{cellColor:c="#000000"}=e,{sectionColor:u="#0000ee"}=e,{cellSize:h=1}=e,{sectionSize:f=10}=e,{axes:d="xzy"}=e,{gridSize:g=[20,20]}=e,{followCamera:v=!1}=e,{infiniteGrid:A=!1}=e,{fadeDistance:_=100}=e,{fadeStrength:y=1}=e,{cellThickness:x=1}=e,{sectionThickness:C=2}=e,{ref:S}=e;const{invalidate:I}=Df(),P=F=>new _l({side:ms,uniforms:{uSize1:{value:h},uSize2:{value:f},uColor1:{value:new qt(c)},uColor2:{value:new qt(u)},uFadeDistance:{value:_},uFadeStrength:{value:y},uThickness1:{value:1},uThickness2:{value:1},uInfiniteGrid:{value:A?1:0},uFollowCamera:{value:0}},transparent:!0,vertexShader:`
      varying vec3 worldPosition;
      uniform float uFadeDistance;
      uniform float uInfiniteGrid;
      uniform float uFollowCamera;

      void main() {

        vec3 pos = position.${F} * (1. + uFadeDistance * uInfiniteGrid);
        pos.${F.slice(0,2)} += (cameraPosition.${F.slice(0,2)} * uFollowCamera);

        worldPosition = pos;

        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);

      }`,fragmentShader:`
      varying vec3 worldPosition;
      uniform float uSize1;
      uniform float uSize2;
      uniform vec3 uColor1;
      uniform vec3 uColor2;
      uniform float uFadeDistance;
      uniform float uFadeStrength;
      uniform float uThickness1;
      uniform float uThickness2;
      uniform float uInfiniteGrid;

      float getGrid(float size, float thickness) {

        vec2 r = worldPosition.${F.slice(0,2)} / size;

        vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
        float line = min(grid.x, grid.y) + 1. - thickness;

        return 1.0 - min(line, 1.);
      }

      void main() {

        float g1 = getGrid(uSize1, uThickness1);
        float g2 = getGrid(uSize2, uThickness2);

        float d = 1.0 - min(distance(cameraPosition.${F.slice(0,2)}, worldPosition.${F.slice(0,2)}) / uFadeDistance, 1.);
        vec3 color = mix(uColor1, uColor2, min(1.,uThickness2*g2));

        gl_FragColor = vec4(color, (g1 + g2) * pow(d,uFadeStrength));
        gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);

        if(gl_FragColor.a <= 0.0)
          discard;
        #include <tonemapping_fragment>
        #include <encodings_fragment>
      }
       `,extensions:{derivatives:!0}}),B=hN();Xt(i,B,F=>t(3,a=F));function M(F){Wa[F?"unshift":"push"](()=>{a=F,B.set(a)})}function D(F){S=F,t(0,S)}return i.$$set=F=>{e=Bt(Bt({},e),Mn(F)),t(5,s=$d(e,r)),"cellColor"in F&&t(6,c=F.cellColor),"sectionColor"in F&&t(7,u=F.sectionColor),"cellSize"in F&&t(8,h=F.cellSize),"sectionSize"in F&&t(9,f=F.sectionSize),"axes"in F&&t(10,d=F.axes),"gridSize"in F&&t(1,g=F.gridSize),"followCamera"in F&&t(11,v=F.followCamera),"infiniteGrid"in F&&t(12,A=F.infiniteGrid),"fadeDistance"in F&&t(13,_=F.fadeDistance),"fadeStrength"in F&&t(14,y=F.fadeStrength),"cellThickness"in F&&t(15,x=F.cellThickness),"sectionThickness"in F&&t(16,C=F.sectionThickness),"ref"in F&&t(0,S=F.ref),"$$scope"in F&&t(20,l=F.$$scope)},i.$$.update=()=>{i.$$.dirty&1024&&t(2,n=P(d)),i.$$.dirty&131008&&(t(2,n.uniforms.uSize1={value:h},n),t(2,n.uniforms.uSize2={value:f},n),t(2,n.uniforms.uColor1={value:new qt(c)},n),t(2,n.uniforms.uColor2={value:new qt(u)},n),t(2,n.uniforms.uFadeDistance={value:_},n),t(2,n.uniforms.uFadeStrength={value:y},n),t(2,n.uniforms.uThickness1={value:x},n),t(2,n.uniforms.uThickness2={value:C},n),t(2,n.uniforms.uFollowCamera={value:v?1:0},n),t(2,n.uniforms.uInfiniteGrid={value:A?1:0},n),I("Grid uniforms changed")),i.$$.dirty&4&&n&&I("Grid axes changed")},[S,g,n,a,B,s,c,u,h,f,d,v,A,_,y,x,C,o,M,D,l]}let Dx=class extends ln{constructor(e){super(),cn(this,e,iet,net,an,{cellColor:6,sectionColor:7,cellSize:8,sectionSize:9,axes:10,gridSize:1,followCamera:11,infiniteGrid:12,fadeDistance:13,fadeStrength:14,cellThickness:15,sectionThickness:16,ref:0})}};var Lx={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Lx.exports;(function(i,e){(function(){var t,n="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",h=1,f=2,d=4,g=1,v=2,A=1,_=2,y=4,x=8,C=16,S=32,I=64,P=128,B=256,M=512,D=30,F="...",z=800,U=16,$=1,O=2,ie=3,W=1/0,J=9007199254740991,Ce=17976931348623157e292,Me=0/0,ge=4294967295,ve=ge-1,nt=ge>>>1,$e=[["ary",P],["bind",A],["bindKey",_],["curry",x],["curryRight",C],["flip",M],["partial",S],["partialRight",I],["rearg",B]],X="[object Arguments]",Be="[object Array]",mt="[object AsyncFunction]",Ue="[object Boolean]",Tt="[object Date]",yt="[object DOMException]",Ye="[object Error]",lt="[object Function]",ue="[object GeneratorFunction]",dt="[object Map]",le="[object Number]",he="[object Null]",xe="[object Object]",pt="[object Promise]",Ze="[object Proxy]",me="[object RegExp]",te="[object Set]",Se="[object String]",j="[object Symbol]",q="[object Undefined]",Ve="[object WeakMap]",ct="[object WeakSet]",ne="[object ArrayBuffer]",Je="[object DataView]",Lt="[object Float32Array]",we="[object Float64Array]",Ie="[object Int8Array]",de="[object Int16Array]",Xe="[object Int32Array]",Nt="[object Uint8Array]",Qt="[object Uint8ClampedArray]",Ft="[object Uint16Array]",jt="[object Uint32Array]",St=/\b__p \+= '';/g,Re=/\b(__p \+=) '' \+/g,Rt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,tt=/&(?:amp|lt|gt|quot|#39);/g,Ut=/[&<>"']/g,$t=RegExp(tt.source),Le=RegExp(Ut.source),wn=/<%-([\s\S]+?)%>/g,fi=/<%([\s\S]+?)%>/g,Vr=/<%=([\s\S]+?)%>/g,oi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,As=/^\w*$/,er=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pa=/[\\^$.*+?()[\]{}|]/g,El=RegExp(pa.source),rc=/^\s+/,Ka=/\s/,Sl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Hc=/\{\n\/\* \[wrapped with (.+)\] \*/,Su=/,? & /,Hf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ao=/[()=,{}\[\]\/\s]/,Mu=/\\(\\)?/g,Ns=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ce=/\w*$/,ot=/^[-+]0x[0-9a-f]+$/i,vt=/^0b[01]+$/i,Ke=/^\[object .+?Constructor\]$/,wt=/^0o[0-7]+$/i,en=/^(?:0|[1-9]\d*)$/,_n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,fn=/($^)/,Tn=/['\n\r\u2028\u2029\\]/g,Qn="\\ud800-\\udfff",xn="\\u0300-\\u036f",In="\\ufe20-\\ufe2f",tr="\\u20d0-\\u20ff",ki=xn+In+tr,as="\\u2700-\\u27bf",js="a-z\\xdf-\\xf6\\xf8-\\xff",Kn="\\xac\\xb1\\xd7\\xf7",Bn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",bo="\\u2000-\\u206f",Mr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",hr="A-Z\\xc0-\\xd6\\xd8-\\xde",Yr="\\ufe0e\\ufe0f",sc=Kn+Bn+bo+Mr,Ml="['’]",fr="["+Qn+"]",Ja="["+sc+"]",Tl="["+ki+"]",Ws="\\d+",$c="["+as+"]",Ih="["+js+"]",ac="[^"+Qn+sc+Ws+as+js+hr+"]",Xr="\\ud83c[\\udffb-\\udfff]",bs="(?:"+Tl+"|"+Xr+")",Ph="[^"+Qn+"]",oc="(?:\\ud83c[\\udde6-\\uddff]){2}",Ta="[\\ud800-\\udbff][\\udc00-\\udfff]",Ia="["+hr+"]",Il="\\u200d",Tu="(?:"+Ih+"|"+ac+")",Gc="(?:"+Ia+"|"+ac+")",Jn="(?:"+Ml+"(?:d|ll|m|re|s|t|ve))?",$f="(?:"+Ml+"(?:D|LL|M|RE|S|T|VE))?",Ho=bs+"?",Gf="["+Yr+"]?",Iu="(?:"+Il+"(?:"+[Ph,oc,Ta].join("|")+")"+Gf+Ho+")*",Qf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",lc=Gf+Ho+Iu,qf="(?:"+[$c,oc,Ta].join("|")+")"+lc,lm="(?:"+[Ph+Tl+"?",Tl,oc,Ta,fr].join("|")+")",cc=RegExp(Ml,"g"),Pa=RegExp(Tl,"g"),jf=RegExp(Xr+"(?="+Xr+")|"+lm+lc,"g"),vp=RegExp([Ia+"?"+Ih+"+"+Jn+"(?="+[Ja,Ia,"$"].join("|")+")",Gc+"+"+$f+"(?="+[Ja,Ia+Tu,"$"].join("|")+")",Ia+"?"+Tu+"+"+Jn,Ia+"+"+$f,Pu,Qf,Ws,qf].join("|"),"g"),cm=RegExp("["+Il+Qn+ki+Yr+"]"),ma=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wf=-1,Yi={};Yi[Lt]=Yi[we]=Yi[Ie]=Yi[de]=Yi[Xe]=Yi[Nt]=Yi[Qt]=Yi[Ft]=Yi[jt]=!0,Yi[X]=Yi[Be]=Yi[ne]=Yi[Ue]=Yi[Je]=Yi[Tt]=Yi[Ye]=Yi[lt]=Yi[dt]=Yi[le]=Yi[xe]=Yi[me]=Yi[te]=Yi[Se]=Yi[Ve]=!1;var sr={};sr[X]=sr[Be]=sr[ne]=sr[Je]=sr[Ue]=sr[Tt]=sr[Lt]=sr[we]=sr[Ie]=sr[de]=sr[Xe]=sr[dt]=sr[le]=sr[xe]=sr[me]=sr[te]=sr[Se]=sr[j]=sr[Nt]=sr[Qt]=sr[Ft]=sr[jt]=!0,sr[Ye]=sr[lt]=sr[Ve]=!1;var yo={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},_p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ku={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Bu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Pl=parseFloat,Ap=parseInt,kh=typeof bt=="object"&&bt&&bt.Object===Object&&bt,Rv=typeof self=="object"&&self&&self.Object===Object&&self,os=kh||Rv||Function("return this")(),bp=e&&!e.nodeType&&e,Za=bp&&!0&&i&&!i.nodeType&&i,Bh=Za&&Za.exports===bp,yp=Bh&&kh.process,ga=function(){try{var Te=Za&&Za.require&&Za.require("util").types;return Te||yp&&yp.binding&&yp.binding("util")}catch{}}(),wp=ga&&ga.isArrayBuffer,um=ga&&ga.isDate,xp=ga&&ga.isMap,Cp=ga&&ga.isRegExp,Rh=ga&&ga.isSet,Yf=ga&&ga.isTypedArray;function Pn(Te,ut,at){switch(at.length){case 0:return Te.call(ut);case 1:return Te.call(ut,at[0]);case 2:return Te.call(ut,at[0],at[1]);case 3:return Te.call(ut,at[0],at[1],at[2])}return Te.apply(ut,at)}function hm(Te,ut,at,Wt){for(var qe=-1,Yn=Te==null?0:Te.length;++qe<Yn;){var Gi=Te[qe];ut(Wt,Gi,at(Gi),Te)}return Wt}function ka(Te,ut){for(var at=-1,Wt=Te==null?0:Te.length;++at<Wt&&ut(Te[at],at,Te)!==!1;);return Te}function Dh(Te,ut){for(var at=Te==null?0:Te.length;at--&&ut(Te[at],at,Te)!==!1;);return Te}function fm(Te,ut){for(var at=-1,Wt=Te==null?0:Te.length;++at<Wt;)if(!ut(Te[at],at,Te))return!1;return!0}function Fs(Te,ut){for(var at=-1,Wt=Te==null?0:Te.length,qe=0,Yn=[];++at<Wt;){var Gi=Te[at];ut(Gi,at,Te)&&(Yn[qe++]=Gi)}return Yn}function Lh(Te,ut){var at=Te==null?0:Te.length;return!!at&&Kt(Te,ut,0)>-1}function Xf(Te,ut,at){for(var Wt=-1,qe=Te==null?0:Te.length;++Wt<qe;)if(at(ut,Te[Wt]))return!0;return!1}function Zn(Te,ut){for(var at=-1,Wt=Te==null?0:Te.length,qe=Array(Wt);++at<Wt;)qe[at]=ut(Te[at],at,Te);return qe}function uc(Te,ut){for(var at=-1,Wt=ut.length,qe=Te.length;++at<Wt;)Te[qe+at]=ut[at];return Te}function je(Te,ut,at,Wt){var qe=-1,Yn=Te==null?0:Te.length;for(Wt&&Yn&&(at=Te[++qe]);++qe<Yn;)at=ut(at,Te[qe],qe,Te);return at}function Y(Te,ut,at,Wt){var qe=Te==null?0:Te.length;for(Wt&&qe&&(at=Te[--qe]);qe--;)at=ut(at,Te[qe],qe,Te);return at}function Ee(Te,ut){for(var at=-1,Wt=Te==null?0:Te.length;++at<Wt;)if(ut(Te[at],at,Te))return!0;return!1}var se=pn("length");function ae(Te){return Te.split("")}function He(Te){return Te.match(Hf)||[]}function gt(Te,ut,at){var Wt;return at(Te,function(qe,Yn,Gi){if(ut(qe,Yn,Gi))return Wt=Yn,!1}),Wt}function st(Te,ut,at,Wt){for(var qe=Te.length,Yn=at+(Wt?1:-1);Wt?Yn--:++Yn<qe;)if(ut(Te[Yn],Yn,Te))return Yn;return-1}function Kt(Te,ut,at){return ut===ut?qc(Te,ut,at):st(Te,li,at)}function On(Te,ut,at,Wt){for(var qe=at-1,Yn=Te.length;++qe<Yn;)if(Wt(Te[qe],ut))return qe;return-1}function li(Te){return Te!==Te}function dn(Te,ut){var at=Te==null?0:Te.length;return at?ar(Te,ut)/at:Me}function pn(Te){return function(ut){return ut==null?t:ut[Te]}}function xt(Te){return function(ut){return Te==null?t:Te[ut]}}function An(Te,ut,at,Wt,qe){return qe(Te,function(Yn,Gi,nn){at=Wt?(Wt=!1,Yn):ut(at,Yn,Gi,nn)}),at}function Bi(Te,ut){var at=Te.length;for(Te.sort(ut);at--;)Te[at]=Te[at].value;return Te}function ar(Te,ut){for(var at,Wt=-1,qe=Te.length;++Wt<qe;){var Yn=ut(Te[Wt]);Yn!==t&&(at=at===t?Yn:at+Yn)}return at}function vr(Te,ut){for(var at=-1,Wt=Array(Te);++at<Te;)Wt[at]=ut(at);return Wt}function _r(Te,ut){return Zn(ut,function(at){return[at,Te[at]]})}function ys(Te){return Te&&Te.slice(0,Xs(Te)+1).replace(rc,"")}function bn(Te){return function(ut){return Te(ut)}}function Ys(Te,ut){return Zn(ut,function(at){return Te[at]})}function nr(Te,ut){return Te.has(ut)}function Rn(Te,ut){for(var at=-1,Wt=Te.length;++at<Wt&&Kt(ut,Te[at],0)>-1;);return at}function Kr(Te,ut){for(var at=Te.length;at--&&Kt(ut,Te[at],0)>-1;);return at}function zs(Te,ut){for(var at=Te.length,Wt=0;at--;)Te[at]===ut&&++Wt;return Wt}var yn=xt(yo),wr=xt(_p);function Vn(Te){return"\\"+Bu[Te]}function wo(Te,ut){return Te==null?t:Te[ut]}function xr(Te){return cm.test(Te)}function ws(Te){return ma.test(Te)}function Jr(Te){for(var ut,at=[];!(ut=Te.next()).done;)at.push(ut.value);return at}function Si(Te){var ut=-1,at=Array(Te.size);return Te.forEach(function(Wt,qe){at[++ut]=[qe,Wt]}),at}function Cr(Te,ut){return function(at){return Te(ut(at))}}function or(Te,ut){for(var at=-1,Wt=Te.length,qe=0,Yn=[];++at<Wt;){var Gi=Te[at];(Gi===ut||Gi===u)&&(Te[at]=u,Yn[qe++]=at)}return Yn}function et(Te){var ut=-1,at=Array(Te.size);return Te.forEach(function(Wt){at[++ut]=Wt}),at}function ls(Te){var ut=-1,at=Array(Te.size);return Te.forEach(function(Wt){at[++ut]=[Wt,Wt]}),at}function qc(Te,ut,at){for(var Wt=at-1,qe=Te.length;++Wt<qe;)if(Te[Wt]===ut)return Wt;return-1}function Ba(Te,ut,at){for(var Wt=at+1;Wt--;)if(Te[Wt]===ut)return Wt;return Wt}function Us(Te){return xr(Te)?Ks(Te):se(Te)}function cs(Te){return xr(Te)?Js(Te):ae(Te)}function Xs(Te){for(var ut=Te.length;ut--&&Ka.test(Te.charAt(ut)););return ut}var Zr=xt(ku);function Ks(Te){for(var ut=jf.lastIndex=0;jf.test(Te);)++ut;return ut}function Js(Te){return Te.match(jf)||[]}function hc(Te){return Te.match(vp)||[]}var es=function Te(ut){ut=ut==null?os:Zs.defaults(os.Object(),ut,Zs.pick(os,Qc));var at=ut.Array,Wt=ut.Date,qe=ut.Error,Yn=ut.Function,Gi=ut.Math,nn=ut.Object,Xi=ut.RegExp,jc=ut.String,xs=ut.TypeError,$o=at.prototype,Tr=Yn.prototype,Ri=nn.prototype,Ra=ut["__core-js_shared__"],Ar=Tr.toString,xi=Ri.hasOwnProperty,Go=0,eo=function(){var p=/[^.]+$/.exec(Ra&&Ra.keys&&Ra.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),Cs=Ri.toString,fc=Ar.call(nn),Wc=os._,Yc=Xi("^"+Ar.call(xi).replace(pa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xo=Bh?ut.Buffer:t,ea=ut.Symbol,to=ut.Uint8Array,Ci=xo?xo.allocUnsafe:t,Qo=Cr(nn.getPrototypeOf,nn),Ga=nn.create,no=Ri.propertyIsEnumerable,va=$o.splice,kl=ea?ea.isConcatSpreadable:t,Co=ea?ea.iterator:t,ta=ea?ea.toStringTag:t,qn=function(){try{var p=kp(nn,"defineProperty");return p({},"",{}),p}catch{}}(),Cn=ut.clearTimeout!==os.clearTimeout&&ut.clearTimeout,Ii=Wt&&Wt.now!==os.Date.now&&Wt.now,Ir=ut.setTimeout!==os.setTimeout&&ut.setTimeout,sn=Gi.ceil,ci=Gi.floor,En=nn.getOwnPropertySymbols,hi=xo?xo.isBuffer:t,Hr=ut.isFinite,Mi=$o.join,$r=Cr(nn.keys,nn),Ai=Gi.max,Di=Gi.min,Pr=Wt.now,lr=ut.parseInt,Qa=Gi.random,kr=$o.reverse,na=kp(ut,"DataView"),Da=kp(ut,"Map"),_a=kp(ut,"Promise"),Er=kp(ut,"Set"),Sr=kp(ut,"WeakMap"),Eo=kp(nn,"create"),Xc=Sr&&new Sr,dr={},us=Bp(na),qo=Bp(Da),Ep=Bp(_a),dm=Bp(Er),Kc=Bp(Sr),qa=ea?ea.prototype:t,So=qa?qa.valueOf:t,Oh=qa?qa.toString:t;function K(p){if(Es(p)&&!ui(p)&&!(p instanceof Ti)){if(p instanceof jo)return p;if(xi.call(p,"__wrapped__"))return I6(p)}return new jo(p)}var Ru=function(){function p(){}return function(b){if(!hs(b))return{};if(Ga)return Ga(b);p.prototype=b;var T=new p;return p.prototype=t,T}}();function Sp(){}function jo(p,b){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=t}K.templateSettings={escape:wn,evaluate:fi,interpolate:Vr,variable:"",imports:{_:K}},K.prototype=Sp.prototype,K.prototype.constructor=K,jo.prototype=Ru(Sp.prototype),jo.prototype.constructor=jo;function Ti(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ge,this.__views__=[]}function AE(){var p=new Ti(this.__wrapped__);return p.__actions__=Xo(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=Xo(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=Xo(this.__views__),p}function Dv(){if(this.__filtered__){var p=new Ti(this);p.__dir__=-1,p.__filtered__=!0}else p=this.clone(),p.__dir__*=-1;return p}function bE(){var p=this.__wrapped__.value(),b=this.__dir__,T=ui(p),L=b<0,H=T?p.length:0,re=WG(0,H,this.__views__),be=re.start,ke=re.end,Qe=ke-be,Mt=L?ke:be-1,It=this.__iteratees__,Dt=It.length,tn=0,gn=Di(Qe,this.__takeCount__);if(!T||!L&&H==Qe&&gn==Qe)return Nu(p,this.__actions__);var Hn=[];e:for(;Qe--&&tn<gn;){Mt+=b;for(var bi=-1,$n=p[Mt];++bi<Dt;){var Pi=It[bi],Fi=Pi.iteratee,Ll=Pi.type,To=Fi($n);if(Ll==O)$n=To;else if(!To){if(Ll==$)continue e;break e}}Hn[tn++]=$n}return Hn}Ti.prototype=Ru(Sp.prototype),Ti.prototype.constructor=Ti;function Nh(p){var b=-1,T=p==null?0:p.length;for(this.clear();++b<T;){var L=p[b];this.set(L[0],L[1])}}function Lv(){this.__data__=Eo?Eo(null):{},this.size=0}function yE(p){var b=this.has(p)&&delete this.__data__[p];return this.size-=b?1:0,b}function wE(p){var b=this.__data__;if(Eo){var T=b[p];return T===l?t:T}return xi.call(b,p)?b[p]:t}function xE(p){var b=this.__data__;return Eo?b[p]!==t:xi.call(b,p)}function CE(p,b){var T=this.__data__;return this.size+=this.has(p)?0:1,T[p]=Eo&&b===t?l:b,this}Nh.prototype.clear=Lv,Nh.prototype.delete=yE,Nh.prototype.get=wE,Nh.prototype.has=xE,Nh.prototype.set=CE;function Jc(p){var b=-1,T=p==null?0:p.length;for(this.clear();++b<T;){var L=p[b];this.set(L[0],L[1])}}function EE(){this.__data__=[],this.size=0}function SE(p){var b=this.__data__,T=Rl(b,p);if(T<0)return!1;var L=b.length-1;return T==L?b.pop():va.call(b,T,1),--this.size,!0}function ME(p){var b=this.__data__,T=Rl(b,p);return T<0?t:b[T][1]}function TE(p){return Rl(this.__data__,p)>-1}function IE(p,b){var T=this.__data__,L=Rl(T,p);return L<0?(++this.size,T.push([p,b])):T[L][1]=b,this}Jc.prototype.clear=EE,Jc.prototype.delete=SE,Jc.prototype.get=ME,Jc.prototype.has=TE,Jc.prototype.set=IE;function Zc(p){var b=-1,T=p==null?0:p.length;for(this.clear();++b<T;){var L=p[b];this.set(L[0],L[1])}}function PE(){this.size=0,this.__data__={hash:new Nh,map:new(Da||Jc),string:new Nh}}function Ov(p){var b=Yb(this,p).delete(p);return this.size-=b?1:0,b}function kE(p){return Yb(this,p).get(p)}function BE(p){return Yb(this,p).has(p)}function RE(p,b){var T=Yb(this,p),L=T.size;return T.set(p,b),this.size+=T.size==L?0:1,this}Zc.prototype.clear=PE,Zc.prototype.delete=Ov,Zc.prototype.get=kE,Zc.prototype.has=BE,Zc.prototype.set=RE;function Fh(p){var b=-1,T=p==null?0:p.length;for(this.__data__=new Zc;++b<T;)this.add(p[b])}function DE(p){return this.__data__.set(p,l),this}function LE(p){return this.__data__.has(p)}Fh.prototype.add=Fh.prototype.push=DE,Fh.prototype.has=LE;function Bl(p){var b=this.__data__=new Jc(p);this.size=b.size}function OE(){this.__data__=new Jc,this.size=0}function Du(p){var b=this.__data__,T=b.delete(p);return this.size=b.size,T}function Eb(p){return this.__data__.get(p)}function NE(p){return this.__data__.has(p)}function FE(p,b){var T=this.__data__;if(T instanceof Jc){var L=T.__data__;if(!Da||L.length<r-1)return L.push([p,b]),this.size=++T.size,this;T=this.__data__=new Zc(L)}return T.set(p,b),this.size=T.size,this}Bl.prototype.clear=OE,Bl.prototype.delete=Du,Bl.prototype.get=Eb,Bl.prototype.has=NE,Bl.prototype.set=FE;function pm(p,b){var T=ui(p),L=!T&&Rp(p),H=!T&&!L&&rd(p),re=!T&&!L&&!H&&ym(p),be=T||L||H||re,ke=be?vr(p.length,jc):[],Qe=ke.length;for(var Mt in p)(b||xi.call(p,Mt))&&!(be&&(Mt=="length"||H&&(Mt=="offset"||Mt=="parent")||re&&(Mt=="buffer"||Mt=="byteLength"||Mt=="byteOffset")||Qh(Mt,Qe)))&&ke.push(Mt);return ke}function Nv(p){var b=p.length;return b?p[e_(0,b-1)]:t}function Sb(p,b){return Xb(Xo(p),Lu(b,0,p.length))}function zE(p){return Xb(Xo(p))}function Fv(p,b,T){(T!==t&&!eu(p[b],T)||T===t&&!(b in p))&&La(p,b,T)}function Mp(p,b,T){var L=p[b];(!(xi.call(p,b)&&eu(L,T))||T===t&&!(b in p))&&La(p,b,T)}function Rl(p,b){for(var T=p.length;T--;)if(eu(p[T][0],b))return T;return-1}function Mb(p,b,T,L){return Ou(p,function(H,re,be){b(L,H,T(H),be)}),L}function zh(p,b){return p&&Fu(b,Na(b),p)}function UE(p,b){return p&&Fu(b,Jo(b),p)}function La(p,b,T){b=="__proto__"&&qn?qn(p,b,{configurable:!0,enumerable:!0,value:T,writable:!0}):p[b]=T}function zv(p,b){for(var T=-1,L=b.length,H=at(L),re=p==null;++T<L;)H[T]=re?t:A4(p,b[T]);return H}function Lu(p,b,T){return p===p&&(T!==t&&(p=p<=T?p:T),b!==t&&(p=p>=b?p:b)),p}function Wo(p,b,T,L,H,re){var be,ke=b&h,Qe=b&f,Mt=b&d;if(T&&(be=H?T(p,L,H,re):T(p)),be!==t)return be;if(!hs(p))return p;var It=ui(p);if(It){if(be=XG(p),!ke)return Xo(p,be)}else{var Dt=io(p),tn=Dt==lt||Dt==ue;if(rd(p))return t6(p,ke);if(Dt==xe||Dt==X||tn&&!H){if(be=Qe||tn?{}:b6(p),!ke)return Qe?zG(p,UE(be,p)):FG(p,zh(be,p))}else{if(!sr[Dt])return H?p:{};be=KG(p,Dt,ke)}}re||(re=new Bl);var gn=re.get(p);if(gn)return gn;re.set(p,be),Y6(p)?p.forEach(function($n){be.add(Wo($n,b,T,$n,p,re))}):j6(p)&&p.forEach(function($n,Pi){be.set(Pi,Wo($n,b,T,Pi,p,re))});var Hn=Mt?Qe?s4:r4:Qe?Jo:Na,bi=It?t:Hn(p);return ka(bi||p,function($n,Pi){bi&&(Pi=$n,$n=p[Pi]),Mp(be,Pi,Wo($n,b,T,Pi,p,re))}),be}function VE(p){var b=Na(p);return function(T){return Uh(T,p,b)}}function Uh(p,b,T){var L=T.length;if(p==null)return!L;for(p=nn(p);L--;){var H=T[L],re=b[H],be=p[H];if(be===t&&!(H in p)||!re(be))return!1}return!0}function Uv(p,b,T){if(typeof p!="function")throw new xs(a);return r_(function(){p.apply(t,T)},b)}function Tp(p,b,T,L){var H=-1,re=Lh,be=!0,ke=p.length,Qe=[],Mt=b.length;if(!ke)return Qe;T&&(b=Zn(b,bn(T))),L?(re=Xf,be=!1):b.length>=r&&(re=nr,be=!1,b=new Fh(b));e:for(;++H<ke;){var It=p[H],Dt=T==null?It:T(It);if(It=L||It!==0?It:0,be&&Dt===Dt){for(var tn=Mt;tn--;)if(b[tn]===Dt)continue e;Qe.push(It)}else re(b,Dt,L)||Qe.push(It)}return Qe}var Ou=a6(dc),Tb=a6(Gv,!0);function Vv(p,b){var T=!0;return Ou(p,function(L,H,re){return T=!!b(L,H,re),T}),T}function mm(p,b,T){for(var L=-1,H=p.length;++L<H;){var re=p[L],be=b(re);if(be!=null&&(ke===t?be===be&&!Dl(be):T(be,ke)))var ke=be,Qe=re}return Qe}function Kf(p,b,T,L){var H=p.length;for(T=pi(T),T<0&&(T=-T>H?0:H+T),L=L===t||L>H?H:pi(L),L<0&&(L+=H),L=T>L?0:K6(L);T<L;)p[T++]=b;return p}function Hv(p,b){var T=[];return Ou(p,function(L,H,re){b(L,H,re)&&T.push(L)}),T}function Aa(p,b,T,L,H){var re=-1,be=p.length;for(T||(T=ZG),H||(H=[]);++re<be;){var ke=p[re];b>0&&T(ke)?b>1?Aa(ke,b-1,T,L,H):uc(H,ke):L||(H[H.length]=ke)}return H}var $v=o6(),Ib=o6(!0);function dc(p,b){return p&&$v(p,b,Na)}function Gv(p,b){return p&&Ib(p,b,Na)}function gm(p,b){return Fs(b,function(T){return qh(p[T])})}function Vh(p,b){b=nd(b,p);for(var T=0,L=b.length;p!=null&&T<L;)p=p[zu(b[T++])];return T&&T==L?p:t}function Jf(p,b,T){var L=b(p);return ui(p)?L:uc(L,T(p))}function Oa(p){return p==null?p===t?q:he:ta&&ta in nn(p)?jG(p):aQ(p)}function Qv(p,b){return p>b}function qv(p,b){return p!=null&&xi.call(p,b)}function Pb(p,b){return p!=null&&b in nn(p)}function HE(p,b,T){return p>=Di(b,T)&&p<Ai(b,T)}function Ip(p,b,T){for(var L=T?Xf:Lh,H=p[0].length,re=p.length,be=re,ke=at(re),Qe=1/0,Mt=[];be--;){var It=p[be];be&&b&&(It=Zn(It,bn(b))),Qe=Di(It.length,Qe),ke[be]=!T&&(b||H>=120&&It.length>=120)?new Fh(be&&It):t}It=p[0];var Dt=-1,tn=ke[0];e:for(;++Dt<H&&Mt.length<Qe;){var gn=It[Dt],Hn=b?b(gn):gn;if(gn=T||gn!==0?gn:0,!(tn?nr(tn,Hn):L(Mt,Hn,T))){for(be=re;--be;){var bi=ke[be];if(!(bi?nr(bi,Hn):L(p[be],Hn,T)))continue e}tn&&tn.push(Hn),Mt.push(gn)}}return Mt}function $E(p,b,T,L){return dc(p,function(H,re,be){b(L,T(H),re,be)}),L}function Yo(p,b,T){b=nd(b,p),p=C6(p,b);var L=p==null?p:p[zu(mc(b))];return L==null?t:Pn(L,p,T)}function kb(p){return Es(p)&&Oa(p)==X}function GE(p){return Es(p)&&Oa(p)==ne}function jv(p){return Es(p)&&Oa(p)==Tt}function Pp(p,b,T,L,H){return p===b?!0:p==null||b==null||!Es(p)&&!Es(b)?p!==p&&b!==b:QE(p,b,T,L,Pp,H)}function QE(p,b,T,L,H,re){var be=ui(p),ke=ui(b),Qe=be?Be:io(p),Mt=ke?Be:io(b);Qe=Qe==X?xe:Qe,Mt=Mt==X?xe:Mt;var It=Qe==xe,Dt=Mt==xe,tn=Qe==Mt;if(tn&&rd(p)){if(!rd(b))return!1;be=!0,It=!1}if(tn&&!It)return re||(re=new Bl),be||ym(p)?v6(p,b,T,L,H,re):QG(p,b,Qe,T,L,H,re);if(!(T&g)){var gn=It&&xi.call(p,"__wrapped__"),Hn=Dt&&xi.call(b,"__wrapped__");if(gn||Hn){var bi=gn?p.value():p,$n=Hn?b.value():b;return re||(re=new Bl),H(bi,$n,T,L,re)}}return tn?(re||(re=new Bl),qG(p,b,T,L,H,re)):!1}function Bb(p){return Es(p)&&io(p)==dt}function Wv(p,b,T,L){var H=T.length,re=H,be=!L;if(p==null)return!re;for(p=nn(p);H--;){var ke=T[H];if(be&&ke[2]?ke[1]!==p[ke[0]]:!(ke[0]in p))return!1}for(;++H<re;){ke=T[H];var Qe=ke[0],Mt=p[Qe],It=ke[1];if(be&&ke[2]){if(Mt===t&&!(Qe in p))return!1}else{var Dt=new Bl;if(L)var tn=L(Mt,It,Qe,p,b,Dt);if(!(tn===t?Pp(It,Mt,g|v,L,Dt):tn))return!1}}return!0}function Rb(p){if(!hs(p)||tQ(p))return!1;var b=qh(p)?Yc:Ke;return b.test(Bp(p))}function qE(p){return Es(p)&&Oa(p)==me}function jE(p){return Es(p)&&io(p)==te}function WE(p){return Es(p)&&ny(p.length)&&!!Yi[Oa(p)]}function Db(p){return typeof p=="function"?p:p==null?Zo:typeof p=="object"?ui(p)?Kv(p[0],p[1]):Lb(p):lk(p)}function Yv(p){if(!i_(p))return $r(p);var b=[];for(var T in nn(p))xi.call(p,T)&&T!="constructor"&&b.push(T);return b}function YE(p){if(!hs(p))return sQ(p);var b=i_(p),T=[];for(var L in p)L=="constructor"&&(b||!xi.call(p,L))||T.push(L);return T}function Xv(p,b){return p<b}function pc(p,b){var T=-1,L=Ko(p)?at(p.length):[];return Ou(p,function(H,re,be){L[++T]=b(H,re,be)}),L}function Lb(p){var b=o4(p);return b.length==1&&b[0][2]?w6(b[0][0],b[0][1]):function(T){return T===p||Wv(T,p,b)}}function Kv(p,b){return c4(p)&&y6(b)?w6(zu(p),b):function(T){var L=A4(T,p);return L===t&&L===b?b4(T,p):Pp(b,L,g|v)}}function vm(p,b,T,L,H){p!==b&&$v(b,function(re,be){if(H||(H=new Bl),hs(re))Ob(p,b,be,T,vm,L,H);else{var ke=L?L(h4(p,be),re,be+"",p,b,H):t;ke===t&&(ke=re),Fv(p,be,ke)}},Jo)}function Ob(p,b,T,L,H,re,be){var ke=h4(p,T),Qe=h4(b,T),Mt=be.get(Qe);if(Mt){Fv(p,T,Mt);return}var It=re?re(ke,Qe,T+"",p,b,be):t,Dt=It===t;if(Dt){var tn=ui(Qe),gn=!tn&&rd(Qe),Hn=!tn&&!gn&&ym(Qe);It=Qe,tn||gn||Hn?ui(ke)?It=ke:Vs(ke)?It=Xo(ke):gn?(Dt=!1,It=t6(Qe,!0)):Hn?(Dt=!1,It=n6(Qe,!0)):It=[]:s_(Qe)||Rp(Qe)?(It=ke,Rp(ke)?It=J6(ke):(!hs(ke)||qh(ke))&&(It=b6(Qe))):Dt=!1}Dt&&(be.set(Qe,It),H(It,Qe,L,re,be),be.delete(Qe)),Fv(p,T,It)}function Nb(p,b){var T=p.length;if(T)return b+=b<0?T:0,Qh(b,T)?p[b]:t}function Fb(p,b,T){b.length?b=Zn(b,function(re){return ui(re)?function(be){return Vh(be,re.length===1?re[0]:re)}:re}):b=[Zo];var L=-1;b=Zn(b,bn(Nn()));var H=pc(p,function(re,be,ke){var Qe=Zn(b,function(Mt){return Mt(re)});return{criteria:Qe,index:++L,value:re}});return Bi(H,function(re,be){return NG(re,be,T)})}function zb(p,b){return Jv(p,b,function(T,L){return b4(p,L)})}function Jv(p,b,T){for(var L=-1,H=b.length,re={};++L<H;){var be=b[L],ke=Vh(p,be);T(ke,be)&&Zf(re,nd(be,p),ke)}return re}function Ub(p){return function(b){return Vh(b,p)}}function Zv(p,b,T,L){var H=L?On:Kt,re=-1,be=b.length,ke=p;for(p===b&&(b=Xo(b)),T&&(ke=Zn(p,bn(T)));++re<be;)for(var Qe=0,Mt=b[re],It=T?T(Mt):Mt;(Qe=H(ke,It,Qe,L))>-1;)ke!==p&&va.call(ke,Qe,1),va.call(p,Qe,1);return p}function Vb(p,b){for(var T=p?b.length:0,L=T-1;T--;){var H=b[T];if(T==L||H!==re){var re=H;Qh(H)?va.call(p,H,1):Dn(p,H)}}return p}function e_(p,b){return p+ci(Qa()*(b-p+1))}function XE(p,b,T,L){for(var H=-1,re=Ai(sn((b-p)/(T||1)),0),be=at(re);re--;)be[L?re:++H]=p,p+=T;return be}function t_(p,b){var T="";if(!p||b<1||b>J)return T;do b%2&&(T+=p),b=ci(b/2),b&&(p+=p);while(b);return T}function di(p,b){return f4(x6(p,b,Zo),p+"")}function KE(p){return Nv(wm(p))}function JE(p,b){var T=wm(p);return Xb(T,Lu(b,0,T.length))}function Zf(p,b,T,L){if(!hs(p))return p;b=nd(b,p);for(var H=-1,re=b.length,be=re-1,ke=p;ke!=null&&++H<re;){var Qe=zu(b[H]),Mt=T;if(Qe==="__proto__"||Qe==="constructor"||Qe==="prototype")return p;if(H!=be){var It=ke[Qe];Mt=L?L(It,Qe,ke):t,Mt===t&&(Mt=hs(It)?It:Qh(b[H+1])?[]:{})}Mp(ke,Qe,Mt),ke=ke[Qe]}return p}var Hb=Xc?function(p,b){return Xc.set(p,b),p}:Zo,ZE=qn?function(p,b){return qn(p,"toString",{configurable:!0,enumerable:!1,value:w4(b),writable:!0})}:Zo;function E(p){return Xb(wm(p))}function m(p,b,T){var L=-1,H=p.length;b<0&&(b=-b>H?0:H+b),T=T>H?H:T,T<0&&(T+=H),H=b>T?0:T-b>>>0,b>>>=0;for(var re=at(H);++L<H;)re[L]=p[L+b];return re}function w(p,b){var T;return Ou(p,function(L,H,re){return T=b(L,H,re),!T}),!!T}function k(p,b,T){var L=0,H=p==null?L:p.length;if(typeof b=="number"&&b===b&&H<=nt){for(;L<H;){var re=L+H>>>1,be=p[re];be!==null&&!Dl(be)&&(T?be<=b:be<b)?L=re+1:H=re}return H}return V(p,b,Zo,T)}function V(p,b,T,L){var H=0,re=p==null?0:p.length;if(re===0)return 0;b=T(b);for(var be=b!==b,ke=b===null,Qe=Dl(b),Mt=b===t;H<re;){var It=ci((H+re)/2),Dt=T(p[It]),tn=Dt!==t,gn=Dt===null,Hn=Dt===Dt,bi=Dl(Dt);if(be)var $n=L||Hn;else Mt?$n=Hn&&(L||tn):ke?$n=Hn&&tn&&(L||!gn):Qe?$n=Hn&&tn&&!gn&&(L||!bi):gn||bi?$n=!1:$n=L?Dt<=b:Dt<b;$n?H=It+1:re=It}return Di(re,ve)}function Ae(p,b){for(var T=-1,L=p.length,H=0,re=[];++T<L;){var be=p[T],ke=b?b(be):be;if(!T||!eu(ke,Qe)){var Qe=ke;re[H++]=be===0?0:be}}return re}function We(p){return typeof p=="number"?p:Dl(p)?Me:+p}function kt(p){if(typeof p=="string")return p;if(ui(p))return Zn(p,kt)+"";if(Dl(p))return Oh?Oh.call(p):"";var b=p+"";return b=="0"&&1/p==-W?"-0":b}function mn(p,b,T){var L=-1,H=Lh,re=p.length,be=!0,ke=[],Qe=ke;if(T)be=!1,H=Xf;else if(re>=r){var Mt=b?null:$G(p);if(Mt)return et(Mt);be=!1,H=nr,Qe=new Fh}else Qe=b?[]:ke;e:for(;++L<re;){var It=p[L],Dt=b?b(It):It;if(It=T||It!==0?It:0,be&&Dt===Dt){for(var tn=Qe.length;tn--;)if(Qe[tn]===Dt)continue e;b&&Qe.push(Dt),ke.push(It)}else H(Qe,Dt,T)||(Qe!==ke&&Qe.push(Dt),ke.push(It))}return ke}function Dn(p,b){return b=nd(b,p),p=C6(p,b),p==null||delete p[zu(mc(b))]}function Ni(p,b,T,L){return Zf(p,b,T(Vh(p,b)),L)}function Li(p,b,T,L){for(var H=p.length,re=L?H:-1;(L?re--:++re<H)&&b(p[re],re,p););return T?m(p,L?0:re,L?re+1:H):m(p,L?re+1:0,L?H:re)}function Nu(p,b){var T=p;return T instanceof Ti&&(T=T.value()),je(b,function(L,H){return H.func.apply(H.thisArg,uc([L],H.args))},T)}function Hh(p,b,T){var L=p.length;if(L<2)return L?mn(p[0]):[];for(var H=-1,re=at(L);++H<L;)for(var be=p[H],ke=-1;++ke<L;)ke!=H&&(re[H]=Tp(re[H]||be,p[ke],b,T));return mn(Aa(re,1),b,T)}function ed(p,b,T){for(var L=-1,H=p.length,re=b.length,be={};++L<H;){var ke=L<re?b[L]:t;T(be,p[L],ke)}return be}function td(p){return Vs(p)?p:[]}function e4(p){return typeof p=="function"?p:Zo}function nd(p,b){return ui(p)?p:c4(p,b)?[p]:T6(pr(p))}var RG=di;function id(p,b,T){var L=p.length;return T=T===t?L:T,!b&&T>=L?p:m(p,b,T)}var e6=Cn||function(p){return os.clearTimeout(p)};function t6(p,b){if(b)return p.slice();var T=p.length,L=Ci?Ci(T):new p.constructor(T);return p.copy(L),L}function t4(p){var b=new p.constructor(p.byteLength);return new to(b).set(new to(p)),b}function DG(p,b){var T=b?t4(p.buffer):p.buffer;return new p.constructor(T,p.byteOffset,p.byteLength)}function LG(p){var b=new p.constructor(p.source,ce.exec(p));return b.lastIndex=p.lastIndex,b}function OG(p){return So?nn(So.call(p)):{}}function n6(p,b){var T=b?t4(p.buffer):p.buffer;return new p.constructor(T,p.byteOffset,p.length)}function i6(p,b){if(p!==b){var T=p!==t,L=p===null,H=p===p,re=Dl(p),be=b!==t,ke=b===null,Qe=b===b,Mt=Dl(b);if(!ke&&!Mt&&!re&&p>b||re&&be&&Qe&&!ke&&!Mt||L&&be&&Qe||!T&&Qe||!H)return 1;if(!L&&!re&&!Mt&&p<b||Mt&&T&&H&&!L&&!re||ke&&T&&H||!be&&H||!Qe)return-1}return 0}function NG(p,b,T){for(var L=-1,H=p.criteria,re=b.criteria,be=H.length,ke=T.length;++L<be;){var Qe=i6(H[L],re[L]);if(Qe){if(L>=ke)return Qe;var Mt=T[L];return Qe*(Mt=="desc"?-1:1)}}return p.index-b.index}function r6(p,b,T,L){for(var H=-1,re=p.length,be=T.length,ke=-1,Qe=b.length,Mt=Ai(re-be,0),It=at(Qe+Mt),Dt=!L;++ke<Qe;)It[ke]=b[ke];for(;++H<be;)(Dt||H<re)&&(It[T[H]]=p[H]);for(;Mt--;)It[ke++]=p[H++];return It}function s6(p,b,T,L){for(var H=-1,re=p.length,be=-1,ke=T.length,Qe=-1,Mt=b.length,It=Ai(re-ke,0),Dt=at(It+Mt),tn=!L;++H<It;)Dt[H]=p[H];for(var gn=H;++Qe<Mt;)Dt[gn+Qe]=b[Qe];for(;++be<ke;)(tn||H<re)&&(Dt[gn+T[be]]=p[H++]);return Dt}function Xo(p,b){var T=-1,L=p.length;for(b||(b=at(L));++T<L;)b[T]=p[T];return b}function Fu(p,b,T,L){var H=!T;T||(T={});for(var re=-1,be=b.length;++re<be;){var ke=b[re],Qe=L?L(T[ke],p[ke],ke,T,p):t;Qe===t&&(Qe=p[ke]),H?La(T,ke,Qe):Mp(T,ke,Qe)}return T}function FG(p,b){return Fu(p,l4(p),b)}function zG(p,b){return Fu(p,_6(p),b)}function $b(p,b){return function(T,L){var H=ui(T)?hm:Mb,re=b?b():{};return H(T,p,Nn(L,2),re)}}function _m(p){return di(function(b,T){var L=-1,H=T.length,re=H>1?T[H-1]:t,be=H>2?T[2]:t;for(re=p.length>3&&typeof re=="function"?(H--,re):t,be&&Mo(T[0],T[1],be)&&(re=H<3?t:re,H=1),b=nn(b);++L<H;){var ke=T[L];ke&&p(b,ke,L,re)}return b})}function a6(p,b){return function(T,L){if(T==null)return T;if(!Ko(T))return p(T,L);for(var H=T.length,re=b?H:-1,be=nn(T);(b?re--:++re<H)&&L(be[re],re,be)!==!1;);return T}}function o6(p){return function(b,T,L){for(var H=-1,re=nn(b),be=L(b),ke=be.length;ke--;){var Qe=be[p?ke:++H];if(T(re[Qe],Qe,re)===!1)break}return b}}function UG(p,b,T){var L=b&A,H=n_(p);function re(){var be=this&&this!==os&&this instanceof re?H:p;return be.apply(L?T:this,arguments)}return re}function l6(p){return function(b){b=pr(b);var T=xr(b)?cs(b):t,L=T?T[0]:b.charAt(0),H=T?id(T,1).join(""):b.slice(1);return L[p]()+H}}function Am(p){return function(b){return je(ak(sk(b).replace(cc,"")),p,"")}}function n_(p){return function(){var b=arguments;switch(b.length){case 0:return new p;case 1:return new p(b[0]);case 2:return new p(b[0],b[1]);case 3:return new p(b[0],b[1],b[2]);case 4:return new p(b[0],b[1],b[2],b[3]);case 5:return new p(b[0],b[1],b[2],b[3],b[4]);case 6:return new p(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new p(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var T=Ru(p.prototype),L=p.apply(T,b);return hs(L)?L:T}}function VG(p,b,T){var L=n_(p);function H(){for(var re=arguments.length,be=at(re),ke=re,Qe=bm(H);ke--;)be[ke]=arguments[ke];var Mt=re<3&&be[0]!==Qe&&be[re-1]!==Qe?[]:or(be,Qe);if(re-=Mt.length,re<T)return d6(p,b,Gb,H.placeholder,t,be,Mt,t,t,T-re);var It=this&&this!==os&&this instanceof H?L:p;return Pn(It,this,be)}return H}function c6(p){return function(b,T,L){var H=nn(b);if(!Ko(b)){var re=Nn(T,3);b=Na(b),T=function(ke){return re(H[ke],ke,H)}}var be=p(b,T,L);return be>-1?H[re?b[be]:be]:t}}function u6(p){return Gh(function(b){var T=b.length,L=T,H=jo.prototype.thru;for(p&&b.reverse();L--;){var re=b[L];if(typeof re!="function")throw new xs(a);if(H&&!be&&Wb(re)=="wrapper")var be=new jo([],!0)}for(L=be?L:T;++L<T;){re=b[L];var ke=Wb(re),Qe=ke=="wrapper"?a4(re):t;Qe&&u4(Qe[0])&&Qe[1]==(P|x|S|B)&&!Qe[4].length&&Qe[9]==1?be=be[Wb(Qe[0])].apply(be,Qe[3]):be=re.length==1&&u4(re)?be[ke]():be.thru(re)}return function(){var Mt=arguments,It=Mt[0];if(be&&Mt.length==1&&ui(It))return be.plant(It).value();for(var Dt=0,tn=T?b[Dt].apply(this,Mt):It;++Dt<T;)tn=b[Dt].call(this,tn);return tn}})}function Gb(p,b,T,L,H,re,be,ke,Qe,Mt){var It=b&P,Dt=b&A,tn=b&_,gn=b&(x|C),Hn=b&M,bi=tn?t:n_(p);function $n(){for(var Pi=arguments.length,Fi=at(Pi),Ll=Pi;Ll--;)Fi[Ll]=arguments[Ll];if(gn)var To=bm($n),Ol=zs(Fi,To);if(L&&(Fi=r6(Fi,L,H,gn)),re&&(Fi=s6(Fi,re,be,gn)),Pi-=Ol,gn&&Pi<Mt){var Hs=or(Fi,To);return d6(p,b,Gb,$n.placeholder,T,Fi,Hs,ke,Qe,Mt-Pi)}var tu=Dt?T:this,Wh=tn?tu[p]:p;return Pi=Fi.length,ke?Fi=oQ(Fi,ke):Hn&&Pi>1&&Fi.reverse(),It&&Qe<Pi&&(Fi.length=Qe),this&&this!==os&&this instanceof $n&&(Wh=bi||n_(Wh)),Wh.apply(tu,Fi)}return $n}function h6(p,b){return function(T,L){return $E(T,p,b(L),{})}}function Qb(p,b){return function(T,L){var H;if(T===t&&L===t)return b;if(T!==t&&(H=T),L!==t){if(H===t)return L;typeof T=="string"||typeof L=="string"?(T=kt(T),L=kt(L)):(T=We(T),L=We(L)),H=p(T,L)}return H}}function n4(p){return Gh(function(b){return b=Zn(b,bn(Nn())),di(function(T){var L=this;return p(b,function(H){return Pn(H,L,T)})})})}function qb(p,b){b=b===t?" ":kt(b);var T=b.length;if(T<2)return T?t_(b,p):b;var L=t_(b,sn(p/Us(b)));return xr(b)?id(cs(L),0,p).join(""):L.slice(0,p)}function HG(p,b,T,L){var H=b&A,re=n_(p);function be(){for(var ke=-1,Qe=arguments.length,Mt=-1,It=L.length,Dt=at(It+Qe),tn=this&&this!==os&&this instanceof be?re:p;++Mt<It;)Dt[Mt]=L[Mt];for(;Qe--;)Dt[Mt++]=arguments[++ke];return Pn(tn,H?T:this,Dt)}return be}function f6(p){return function(b,T,L){return L&&typeof L!="number"&&Mo(b,T,L)&&(T=L=t),b=jh(b),T===t?(T=b,b=0):T=jh(T),L=L===t?b<T?1:-1:jh(L),XE(b,T,L,p)}}function jb(p){return function(b,T){return typeof b=="string"&&typeof T=="string"||(b=gc(b),T=gc(T)),p(b,T)}}function d6(p,b,T,L,H,re,be,ke,Qe,Mt){var It=b&x,Dt=It?be:t,tn=It?t:be,gn=It?re:t,Hn=It?t:re;b|=It?S:I,b&=~(It?I:S),b&y||(b&=~(A|_));var bi=[p,b,H,gn,Dt,Hn,tn,ke,Qe,Mt],$n=T.apply(t,bi);return u4(p)&&E6($n,bi),$n.placeholder=L,S6($n,p,b)}function i4(p){var b=Gi[p];return function(T,L){if(T=gc(T),L=L==null?0:Di(pi(L),292),L&&Hr(T)){var H=(pr(T)+"e").split("e"),re=b(H[0]+"e"+(+H[1]+L));return H=(pr(re)+"e").split("e"),+(H[0]+"e"+(+H[1]-L))}return b(T)}}var $G=Er&&1/et(new Er([,-0]))[1]==W?function(p){return new Er(p)}:E4;function p6(p){return function(b){var T=io(b);return T==dt?Si(b):T==te?ls(b):_r(b,p(b))}}function $h(p,b,T,L,H,re,be,ke){var Qe=b&_;if(!Qe&&typeof p!="function")throw new xs(a);var Mt=L?L.length:0;if(Mt||(b&=~(S|I),L=H=t),be=be===t?be:Ai(pi(be),0),ke=ke===t?ke:pi(ke),Mt-=H?H.length:0,b&I){var It=L,Dt=H;L=H=t}var tn=Qe?t:a4(p),gn=[p,b,T,L,H,It,Dt,re,be,ke];if(tn&&rQ(gn,tn),p=gn[0],b=gn[1],T=gn[2],L=gn[3],H=gn[4],ke=gn[9]=gn[9]===t?Qe?0:p.length:Ai(gn[9]-Mt,0),!ke&&b&(x|C)&&(b&=~(x|C)),!b||b==A)var Hn=UG(p,b,T);else b==x||b==C?Hn=VG(p,b,ke):(b==S||b==(A|S))&&!H.length?Hn=HG(p,b,T,L):Hn=Gb.apply(t,gn);var bi=tn?Hb:E6;return S6(bi(Hn,gn),p,b)}function m6(p,b,T,L){return p===t||eu(p,Ri[T])&&!xi.call(L,T)?b:p}function g6(p,b,T,L,H,re){return hs(p)&&hs(b)&&(re.set(b,p),vm(p,b,t,g6,re),re.delete(b)),p}function GG(p){return s_(p)?t:p}function v6(p,b,T,L,H,re){var be=T&g,ke=p.length,Qe=b.length;if(ke!=Qe&&!(be&&Qe>ke))return!1;var Mt=re.get(p),It=re.get(b);if(Mt&&It)return Mt==b&&It==p;var Dt=-1,tn=!0,gn=T&v?new Fh:t;for(re.set(p,b),re.set(b,p);++Dt<ke;){var Hn=p[Dt],bi=b[Dt];if(L)var $n=be?L(bi,Hn,Dt,b,p,re):L(Hn,bi,Dt,p,b,re);if($n!==t){if($n)continue;tn=!1;break}if(gn){if(!Ee(b,function(Pi,Fi){if(!nr(gn,Fi)&&(Hn===Pi||H(Hn,Pi,T,L,re)))return gn.push(Fi)})){tn=!1;break}}else if(!(Hn===bi||H(Hn,bi,T,L,re))){tn=!1;break}}return re.delete(p),re.delete(b),tn}function QG(p,b,T,L,H,re,be){switch(T){case Je:if(p.byteLength!=b.byteLength||p.byteOffset!=b.byteOffset)return!1;p=p.buffer,b=b.buffer;case ne:return!(p.byteLength!=b.byteLength||!re(new to(p),new to(b)));case Ue:case Tt:case le:return eu(+p,+b);case Ye:return p.name==b.name&&p.message==b.message;case me:case Se:return p==b+"";case dt:var ke=Si;case te:var Qe=L&g;if(ke||(ke=et),p.size!=b.size&&!Qe)return!1;var Mt=be.get(p);if(Mt)return Mt==b;L|=v,be.set(p,b);var It=v6(ke(p),ke(b),L,H,re,be);return be.delete(p),It;case j:if(So)return So.call(p)==So.call(b)}return!1}function qG(p,b,T,L,H,re){var be=T&g,ke=r4(p),Qe=ke.length,Mt=r4(b),It=Mt.length;if(Qe!=It&&!be)return!1;for(var Dt=Qe;Dt--;){var tn=ke[Dt];if(!(be?tn in b:xi.call(b,tn)))return!1}var gn=re.get(p),Hn=re.get(b);if(gn&&Hn)return gn==b&&Hn==p;var bi=!0;re.set(p,b),re.set(b,p);for(var $n=be;++Dt<Qe;){tn=ke[Dt];var Pi=p[tn],Fi=b[tn];if(L)var Ll=be?L(Fi,Pi,tn,b,p,re):L(Pi,Fi,tn,p,b,re);if(!(Ll===t?Pi===Fi||H(Pi,Fi,T,L,re):Ll)){bi=!1;break}$n||($n=tn=="constructor")}if(bi&&!$n){var To=p.constructor,Ol=b.constructor;To!=Ol&&"constructor"in p&&"constructor"in b&&!(typeof To=="function"&&To instanceof To&&typeof Ol=="function"&&Ol instanceof Ol)&&(bi=!1)}return re.delete(p),re.delete(b),bi}function Gh(p){return f4(x6(p,t,B6),p+"")}function r4(p){return Jf(p,Na,l4)}function s4(p){return Jf(p,Jo,_6)}var a4=Xc?function(p){return Xc.get(p)}:E4;function Wb(p){for(var b=p.name+"",T=dr[b],L=xi.call(dr,b)?T.length:0;L--;){var H=T[L],re=H.func;if(re==null||re==p)return H.name}return b}function bm(p){var b=xi.call(K,"placeholder")?K:p;return b.placeholder}function Nn(){var p=K.iteratee||x4;return p=p===x4?Db:p,arguments.length?p(arguments[0],arguments[1]):p}function Yb(p,b){var T=p.__data__;return eQ(b)?T[typeof b=="string"?"string":"hash"]:T.map}function o4(p){for(var b=Na(p),T=b.length;T--;){var L=b[T],H=p[L];b[T]=[L,H,y6(H)]}return b}function kp(p,b){var T=wo(p,b);return Rb(T)?T:t}function jG(p){var b=xi.call(p,ta),T=p[ta];try{p[ta]=t;var L=!0}catch{}var H=Cs.call(p);return L&&(b?p[ta]=T:delete p[ta]),H}var l4=En?function(p){return p==null?[]:(p=nn(p),Fs(En(p),function(b){return no.call(p,b)}))}:S4,_6=En?function(p){for(var b=[];p;)uc(b,l4(p)),p=Qo(p);return b}:S4,io=Oa;(na&&io(new na(new ArrayBuffer(1)))!=Je||Da&&io(new Da)!=dt||_a&&io(_a.resolve())!=pt||Er&&io(new Er)!=te||Sr&&io(new Sr)!=Ve)&&(io=function(p){var b=Oa(p),T=b==xe?p.constructor:t,L=T?Bp(T):"";if(L)switch(L){case us:return Je;case qo:return dt;case Ep:return pt;case dm:return te;case Kc:return Ve}return b});function WG(p,b,T){for(var L=-1,H=T.length;++L<H;){var re=T[L],be=re.size;switch(re.type){case"drop":p+=be;break;case"dropRight":b-=be;break;case"take":b=Di(b,p+be);break;case"takeRight":p=Ai(p,b-be);break}}return{start:p,end:b}}function YG(p){var b=p.match(Hc);return b?b[1].split(Su):[]}function A6(p,b,T){b=nd(b,p);for(var L=-1,H=b.length,re=!1;++L<H;){var be=zu(b[L]);if(!(re=p!=null&&T(p,be)))break;p=p[be]}return re||++L!=H?re:(H=p==null?0:p.length,!!H&&ny(H)&&Qh(be,H)&&(ui(p)||Rp(p)))}function XG(p){var b=p.length,T=new p.constructor(b);return b&&typeof p[0]=="string"&&xi.call(p,"index")&&(T.index=p.index,T.input=p.input),T}function b6(p){return typeof p.constructor=="function"&&!i_(p)?Ru(Qo(p)):{}}function KG(p,b,T){var L=p.constructor;switch(b){case ne:return t4(p);case Ue:case Tt:return new L(+p);case Je:return DG(p,T);case Lt:case we:case Ie:case de:case Xe:case Nt:case Qt:case Ft:case jt:return n6(p,T);case dt:return new L;case le:case Se:return new L(p);case me:return LG(p);case te:return new L;case j:return OG(p)}}function JG(p,b){var T=b.length;if(!T)return p;var L=T-1;return b[L]=(T>1?"& ":"")+b[L],b=b.join(T>2?", ":" "),p.replace(Sl,`{
/* [wrapped with `+b+`] */
`)}function ZG(p){return ui(p)||Rp(p)||!!(kl&&p&&p[kl])}function Qh(p,b){var T=typeof p;return b=b??J,!!b&&(T=="number"||T!="symbol"&&en.test(p))&&p>-1&&p%1==0&&p<b}function Mo(p,b,T){if(!hs(T))return!1;var L=typeof b;return(L=="number"?Ko(T)&&Qh(b,T.length):L=="string"&&b in T)?eu(T[b],p):!1}function c4(p,b){if(ui(p))return!1;var T=typeof p;return T=="number"||T=="symbol"||T=="boolean"||p==null||Dl(p)?!0:As.test(p)||!oi.test(p)||b!=null&&p in nn(b)}function eQ(p){var b=typeof p;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?p!=="__proto__":p===null}function u4(p){var b=Wb(p),T=K[b];if(typeof T!="function"||!(b in Ti.prototype))return!1;if(p===T)return!0;var L=a4(T);return!!L&&p===L[0]}function tQ(p){return!!eo&&eo in p}var nQ=Ra?qh:M4;function i_(p){var b=p&&p.constructor,T=typeof b=="function"&&b.prototype||Ri;return p===T}function y6(p){return p===p&&!hs(p)}function w6(p,b){return function(T){return T==null?!1:T[p]===b&&(b!==t||p in nn(T))}}function iQ(p){var b=ey(p,function(L){return T.size===c&&T.clear(),L}),T=b.cache;return b}function rQ(p,b){var T=p[1],L=b[1],H=T|L,re=H<(A|_|P),be=L==P&&T==x||L==P&&T==B&&p[7].length<=b[8]||L==(P|B)&&b[7].length<=b[8]&&T==x;if(!(re||be))return p;L&A&&(p[2]=b[2],H|=T&A?0:y);var ke=b[3];if(ke){var Qe=p[3];p[3]=Qe?r6(Qe,ke,b[4]):ke,p[4]=Qe?or(p[3],u):b[4]}return ke=b[5],ke&&(Qe=p[5],p[5]=Qe?s6(Qe,ke,b[6]):ke,p[6]=Qe?or(p[5],u):b[6]),ke=b[7],ke&&(p[7]=ke),L&P&&(p[8]=p[8]==null?b[8]:Di(p[8],b[8])),p[9]==null&&(p[9]=b[9]),p[0]=b[0],p[1]=H,p}function sQ(p){var b=[];if(p!=null)for(var T in nn(p))b.push(T);return b}function aQ(p){return Cs.call(p)}function x6(p,b,T){return b=Ai(b===t?p.length-1:b,0),function(){for(var L=arguments,H=-1,re=Ai(L.length-b,0),be=at(re);++H<re;)be[H]=L[b+H];H=-1;for(var ke=at(b+1);++H<b;)ke[H]=L[H];return ke[b]=T(be),Pn(p,this,ke)}}function C6(p,b){return b.length<2?p:Vh(p,m(b,0,-1))}function oQ(p,b){for(var T=p.length,L=Di(b.length,T),H=Xo(p);L--;){var re=b[L];p[L]=Qh(re,T)?H[re]:t}return p}function h4(p,b){if(!(b==="constructor"&&typeof p[b]=="function")&&b!="__proto__")return p[b]}var E6=M6(Hb),r_=Ir||function(p,b){return os.setTimeout(p,b)},f4=M6(ZE);function S6(p,b,T){var L=b+"";return f4(p,JG(L,lQ(YG(L),T)))}function M6(p){var b=0,T=0;return function(){var L=Pr(),H=U-(L-T);if(T=L,H>0){if(++b>=z)return arguments[0]}else b=0;return p.apply(t,arguments)}}function Xb(p,b){var T=-1,L=p.length,H=L-1;for(b=b===t?L:b;++T<b;){var re=e_(T,H),be=p[re];p[re]=p[T],p[T]=be}return p.length=b,p}var T6=iQ(function(p){var b=[];return p.charCodeAt(0)===46&&b.push(""),p.replace(er,function(T,L,H,re){b.push(H?re.replace(Mu,"$1"):L||T)}),b});function zu(p){if(typeof p=="string"||Dl(p))return p;var b=p+"";return b=="0"&&1/p==-W?"-0":b}function Bp(p){if(p!=null){try{return Ar.call(p)}catch{}try{return p+""}catch{}}return""}function lQ(p,b){return ka($e,function(T){var L="_."+T[0];b&T[1]&&!Lh(p,L)&&p.push(L)}),p.sort()}function I6(p){if(p instanceof Ti)return p.clone();var b=new jo(p.__wrapped__,p.__chain__);return b.__actions__=Xo(p.__actions__),b.__index__=p.__index__,b.__values__=p.__values__,b}function cQ(p,b,T){(T?Mo(p,b,T):b===t)?b=1:b=Ai(pi(b),0);var L=p==null?0:p.length;if(!L||b<1)return[];for(var H=0,re=0,be=at(sn(L/b));H<L;)be[re++]=m(p,H,H+=b);return be}function uQ(p){for(var b=-1,T=p==null?0:p.length,L=0,H=[];++b<T;){var re=p[b];re&&(H[L++]=re)}return H}function hQ(){var p=arguments.length;if(!p)return[];for(var b=at(p-1),T=arguments[0],L=p;L--;)b[L-1]=arguments[L];return uc(ui(T)?Xo(T):[T],Aa(b,1))}var fQ=di(function(p,b){return Vs(p)?Tp(p,Aa(b,1,Vs,!0)):[]}),dQ=di(function(p,b){var T=mc(b);return Vs(T)&&(T=t),Vs(p)?Tp(p,Aa(b,1,Vs,!0),Nn(T,2)):[]}),pQ=di(function(p,b){var T=mc(b);return Vs(T)&&(T=t),Vs(p)?Tp(p,Aa(b,1,Vs,!0),t,T):[]});function mQ(p,b,T){var L=p==null?0:p.length;return L?(b=T||b===t?1:pi(b),m(p,b<0?0:b,L)):[]}function gQ(p,b,T){var L=p==null?0:p.length;return L?(b=T||b===t?1:pi(b),b=L-b,m(p,0,b<0?0:b)):[]}function vQ(p,b){return p&&p.length?Li(p,Nn(b,3),!0,!0):[]}function _Q(p,b){return p&&p.length?Li(p,Nn(b,3),!0):[]}function AQ(p,b,T,L){var H=p==null?0:p.length;return H?(T&&typeof T!="number"&&Mo(p,b,T)&&(T=0,L=H),Kf(p,b,T,L)):[]}function P6(p,b,T){var L=p==null?0:p.length;if(!L)return-1;var H=T==null?0:pi(T);return H<0&&(H=Ai(L+H,0)),st(p,Nn(b,3),H)}function k6(p,b,T){var L=p==null?0:p.length;if(!L)return-1;var H=L-1;return T!==t&&(H=pi(T),H=T<0?Ai(L+H,0):Di(H,L-1)),st(p,Nn(b,3),H,!0)}function B6(p){var b=p==null?0:p.length;return b?Aa(p,1):[]}function bQ(p){var b=p==null?0:p.length;return b?Aa(p,W):[]}function yQ(p,b){var T=p==null?0:p.length;return T?(b=b===t?1:pi(b),Aa(p,b)):[]}function wQ(p){for(var b=-1,T=p==null?0:p.length,L={};++b<T;){var H=p[b];L[H[0]]=H[1]}return L}function R6(p){return p&&p.length?p[0]:t}function xQ(p,b,T){var L=p==null?0:p.length;if(!L)return-1;var H=T==null?0:pi(T);return H<0&&(H=Ai(L+H,0)),Kt(p,b,H)}function CQ(p){var b=p==null?0:p.length;return b?m(p,0,-1):[]}var EQ=di(function(p){var b=Zn(p,td);return b.length&&b[0]===p[0]?Ip(b):[]}),SQ=di(function(p){var b=mc(p),T=Zn(p,td);return b===mc(T)?b=t:T.pop(),T.length&&T[0]===p[0]?Ip(T,Nn(b,2)):[]}),MQ=di(function(p){var b=mc(p),T=Zn(p,td);return b=typeof b=="function"?b:t,b&&T.pop(),T.length&&T[0]===p[0]?Ip(T,t,b):[]});function TQ(p,b){return p==null?"":Mi.call(p,b)}function mc(p){var b=p==null?0:p.length;return b?p[b-1]:t}function IQ(p,b,T){var L=p==null?0:p.length;if(!L)return-1;var H=L;return T!==t&&(H=pi(T),H=H<0?Ai(L+H,0):Di(H,L-1)),b===b?Ba(p,b,H):st(p,li,H,!0)}function PQ(p,b){return p&&p.length?Nb(p,pi(b)):t}var kQ=di(D6);function D6(p,b){return p&&p.length&&b&&b.length?Zv(p,b):p}function BQ(p,b,T){return p&&p.length&&b&&b.length?Zv(p,b,Nn(T,2)):p}function RQ(p,b,T){return p&&p.length&&b&&b.length?Zv(p,b,t,T):p}var DQ=Gh(function(p,b){var T=p==null?0:p.length,L=zv(p,b);return Vb(p,Zn(b,function(H){return Qh(H,T)?+H:H}).sort(i6)),L});function LQ(p,b){var T=[];if(!(p&&p.length))return T;var L=-1,H=[],re=p.length;for(b=Nn(b,3);++L<re;){var be=p[L];b(be,L,p)&&(T.push(be),H.push(L))}return Vb(p,H),T}function d4(p){return p==null?p:kr.call(p)}function OQ(p,b,T){var L=p==null?0:p.length;return L?(T&&typeof T!="number"&&Mo(p,b,T)?(b=0,T=L):(b=b==null?0:pi(b),T=T===t?L:pi(T)),m(p,b,T)):[]}function NQ(p,b){return k(p,b)}function FQ(p,b,T){return V(p,b,Nn(T,2))}function zQ(p,b){var T=p==null?0:p.length;if(T){var L=k(p,b);if(L<T&&eu(p[L],b))return L}return-1}function UQ(p,b){return k(p,b,!0)}function VQ(p,b,T){return V(p,b,Nn(T,2),!0)}function HQ(p,b){var T=p==null?0:p.length;if(T){var L=k(p,b,!0)-1;if(eu(p[L],b))return L}return-1}function $Q(p){return p&&p.length?Ae(p):[]}function GQ(p,b){return p&&p.length?Ae(p,Nn(b,2)):[]}function QQ(p){var b=p==null?0:p.length;return b?m(p,1,b):[]}function qQ(p,b,T){return p&&p.length?(b=T||b===t?1:pi(b),m(p,0,b<0?0:b)):[]}function jQ(p,b,T){var L=p==null?0:p.length;return L?(b=T||b===t?1:pi(b),b=L-b,m(p,b<0?0:b,L)):[]}function WQ(p,b){return p&&p.length?Li(p,Nn(b,3),!1,!0):[]}function YQ(p,b){return p&&p.length?Li(p,Nn(b,3)):[]}var XQ=di(function(p){return mn(Aa(p,1,Vs,!0))}),KQ=di(function(p){var b=mc(p);return Vs(b)&&(b=t),mn(Aa(p,1,Vs,!0),Nn(b,2))}),JQ=di(function(p){var b=mc(p);return b=typeof b=="function"?b:t,mn(Aa(p,1,Vs,!0),t,b)});function ZQ(p){return p&&p.length?mn(p):[]}function eq(p,b){return p&&p.length?mn(p,Nn(b,2)):[]}function tq(p,b){return b=typeof b=="function"?b:t,p&&p.length?mn(p,t,b):[]}function p4(p){if(!(p&&p.length))return[];var b=0;return p=Fs(p,function(T){if(Vs(T))return b=Ai(T.length,b),!0}),vr(b,function(T){return Zn(p,pn(T))})}function L6(p,b){if(!(p&&p.length))return[];var T=p4(p);return b==null?T:Zn(T,function(L){return Pn(b,t,L)})}var nq=di(function(p,b){return Vs(p)?Tp(p,b):[]}),iq=di(function(p){return Hh(Fs(p,Vs))}),rq=di(function(p){var b=mc(p);return Vs(b)&&(b=t),Hh(Fs(p,Vs),Nn(b,2))}),sq=di(function(p){var b=mc(p);return b=typeof b=="function"?b:t,Hh(Fs(p,Vs),t,b)}),aq=di(p4);function oq(p,b){return ed(p||[],b||[],Mp)}function lq(p,b){return ed(p||[],b||[],Zf)}var cq=di(function(p){var b=p.length,T=b>1?p[b-1]:t;return T=typeof T=="function"?(p.pop(),T):t,L6(p,T)});function O6(p){var b=K(p);return b.__chain__=!0,b}function uq(p,b){return b(p),p}function Kb(p,b){return b(p)}var hq=Gh(function(p){var b=p.length,T=b?p[0]:0,L=this.__wrapped__,H=function(re){return zv(re,p)};return b>1||this.__actions__.length||!(L instanceof Ti)||!Qh(T)?this.thru(H):(L=L.slice(T,+T+(b?1:0)),L.__actions__.push({func:Kb,args:[H],thisArg:t}),new jo(L,this.__chain__).thru(function(re){return b&&!re.length&&re.push(t),re}))});function fq(){return O6(this)}function dq(){return new jo(this.value(),this.__chain__)}function pq(){this.__values__===t&&(this.__values__=X6(this.value()));var p=this.__index__>=this.__values__.length,b=p?t:this.__values__[this.__index__++];return{done:p,value:b}}function mq(){return this}function gq(p){for(var b,T=this;T instanceof Sp;){var L=I6(T);L.__index__=0,L.__values__=t,b?H.__wrapped__=L:b=L;var H=L;T=T.__wrapped__}return H.__wrapped__=p,b}function vq(){var p=this.__wrapped__;if(p instanceof Ti){var b=p;return this.__actions__.length&&(b=new Ti(this)),b=b.reverse(),b.__actions__.push({func:Kb,args:[d4],thisArg:t}),new jo(b,this.__chain__)}return this.thru(d4)}function _q(){return Nu(this.__wrapped__,this.__actions__)}var Aq=$b(function(p,b,T){xi.call(p,T)?++p[T]:La(p,T,1)});function bq(p,b,T){var L=ui(p)?fm:Vv;return T&&Mo(p,b,T)&&(b=t),L(p,Nn(b,3))}function yq(p,b){var T=ui(p)?Fs:Hv;return T(p,Nn(b,3))}var wq=c6(P6),xq=c6(k6);function Cq(p,b){return Aa(Jb(p,b),1)}function Eq(p,b){return Aa(Jb(p,b),W)}function Sq(p,b,T){return T=T===t?1:pi(T),Aa(Jb(p,b),T)}function N6(p,b){var T=ui(p)?ka:Ou;return T(p,Nn(b,3))}function F6(p,b){var T=ui(p)?Dh:Tb;return T(p,Nn(b,3))}var Mq=$b(function(p,b,T){xi.call(p,T)?p[T].push(b):La(p,T,[b])});function Tq(p,b,T,L){p=Ko(p)?p:wm(p),T=T&&!L?pi(T):0;var H=p.length;return T<0&&(T=Ai(H+T,0)),iy(p)?T<=H&&p.indexOf(b,T)>-1:!!H&&Kt(p,b,T)>-1}var Iq=di(function(p,b,T){var L=-1,H=typeof b=="function",re=Ko(p)?at(p.length):[];return Ou(p,function(be){re[++L]=H?Pn(b,be,T):Yo(be,b,T)}),re}),Pq=$b(function(p,b,T){La(p,T,b)});function Jb(p,b){var T=ui(p)?Zn:pc;return T(p,Nn(b,3))}function kq(p,b,T,L){return p==null?[]:(ui(b)||(b=b==null?[]:[b]),T=L?t:T,ui(T)||(T=T==null?[]:[T]),Fb(p,b,T))}var Bq=$b(function(p,b,T){p[T?0:1].push(b)},function(){return[[],[]]});function Rq(p,b,T){var L=ui(p)?je:An,H=arguments.length<3;return L(p,Nn(b,4),T,H,Ou)}function Dq(p,b,T){var L=ui(p)?Y:An,H=arguments.length<3;return L(p,Nn(b,4),T,H,Tb)}function Lq(p,b){var T=ui(p)?Fs:Hv;return T(p,ty(Nn(b,3)))}function Oq(p){var b=ui(p)?Nv:KE;return b(p)}function Nq(p,b,T){(T?Mo(p,b,T):b===t)?b=1:b=pi(b);var L=ui(p)?Sb:JE;return L(p,b)}function Fq(p){var b=ui(p)?zE:E;return b(p)}function zq(p){if(p==null)return 0;if(Ko(p))return iy(p)?Us(p):p.length;var b=io(p);return b==dt||b==te?p.size:Yv(p).length}function Uq(p,b,T){var L=ui(p)?Ee:w;return T&&Mo(p,b,T)&&(b=t),L(p,Nn(b,3))}var Vq=di(function(p,b){if(p==null)return[];var T=b.length;return T>1&&Mo(p,b[0],b[1])?b=[]:T>2&&Mo(b[0],b[1],b[2])&&(b=[b[0]]),Fb(p,Aa(b,1),[])}),Zb=Ii||function(){return os.Date.now()};function Hq(p,b){if(typeof b!="function")throw new xs(a);return p=pi(p),function(){if(--p<1)return b.apply(this,arguments)}}function z6(p,b,T){return b=T?t:b,b=p&&b==null?p.length:b,$h(p,P,t,t,t,t,b)}function U6(p,b){var T;if(typeof b!="function")throw new xs(a);return p=pi(p),function(){return--p>0&&(T=b.apply(this,arguments)),p<=1&&(b=t),T}}var m4=di(function(p,b,T){var L=A;if(T.length){var H=or(T,bm(m4));L|=S}return $h(p,L,b,T,H)}),V6=di(function(p,b,T){var L=A|_;if(T.length){var H=or(T,bm(V6));L|=S}return $h(b,L,p,T,H)});function H6(p,b,T){b=T?t:b;var L=$h(p,x,t,t,t,t,t,b);return L.placeholder=H6.placeholder,L}function $6(p,b,T){b=T?t:b;var L=$h(p,C,t,t,t,t,t,b);return L.placeholder=$6.placeholder,L}function G6(p,b,T){var L,H,re,be,ke,Qe,Mt=0,It=!1,Dt=!1,tn=!0;if(typeof p!="function")throw new xs(a);b=gc(b)||0,hs(T)&&(It=!!T.leading,Dt="maxWait"in T,re=Dt?Ai(gc(T.maxWait)||0,b):re,tn="trailing"in T?!!T.trailing:tn);function gn(Hs){var tu=L,Wh=H;return L=H=t,Mt=Hs,be=p.apply(Wh,tu),be}function Hn(Hs){return Mt=Hs,ke=r_(Pi,b),It?gn(Hs):be}function bi(Hs){var tu=Hs-Qe,Wh=Hs-Mt,ck=b-tu;return Dt?Di(ck,re-Wh):ck}function $n(Hs){var tu=Hs-Qe,Wh=Hs-Mt;return Qe===t||tu>=b||tu<0||Dt&&Wh>=re}function Pi(){var Hs=Zb();if($n(Hs))return Fi(Hs);ke=r_(Pi,bi(Hs))}function Fi(Hs){return ke=t,tn&&L?gn(Hs):(L=H=t,be)}function Ll(){ke!==t&&e6(ke),Mt=0,L=Qe=H=ke=t}function To(){return ke===t?be:Fi(Zb())}function Ol(){var Hs=Zb(),tu=$n(Hs);if(L=arguments,H=this,Qe=Hs,tu){if(ke===t)return Hn(Qe);if(Dt)return e6(ke),ke=r_(Pi,b),gn(Qe)}return ke===t&&(ke=r_(Pi,b)),be}return Ol.cancel=Ll,Ol.flush=To,Ol}var $q=di(function(p,b){return Uv(p,1,b)}),Gq=di(function(p,b,T){return Uv(p,gc(b)||0,T)});function Qq(p){return $h(p,M)}function ey(p,b){if(typeof p!="function"||b!=null&&typeof b!="function")throw new xs(a);var T=function(){var L=arguments,H=b?b.apply(this,L):L[0],re=T.cache;if(re.has(H))return re.get(H);var be=p.apply(this,L);return T.cache=re.set(H,be)||re,be};return T.cache=new(ey.Cache||Zc),T}ey.Cache=Zc;function ty(p){if(typeof p!="function")throw new xs(a);return function(){var b=arguments;switch(b.length){case 0:return!p.call(this);case 1:return!p.call(this,b[0]);case 2:return!p.call(this,b[0],b[1]);case 3:return!p.call(this,b[0],b[1],b[2])}return!p.apply(this,b)}}function qq(p){return U6(2,p)}var jq=RG(function(p,b){b=b.length==1&&ui(b[0])?Zn(b[0],bn(Nn())):Zn(Aa(b,1),bn(Nn()));var T=b.length;return di(function(L){for(var H=-1,re=Di(L.length,T);++H<re;)L[H]=b[H].call(this,L[H]);return Pn(p,this,L)})}),g4=di(function(p,b){var T=or(b,bm(g4));return $h(p,S,t,b,T)}),Q6=di(function(p,b){var T=or(b,bm(Q6));return $h(p,I,t,b,T)}),Wq=Gh(function(p,b){return $h(p,B,t,t,t,b)});function Yq(p,b){if(typeof p!="function")throw new xs(a);return b=b===t?b:pi(b),di(p,b)}function Xq(p,b){if(typeof p!="function")throw new xs(a);return b=b==null?0:Ai(pi(b),0),di(function(T){var L=T[b],H=id(T,0,b);return L&&uc(H,L),Pn(p,this,H)})}function Kq(p,b,T){var L=!0,H=!0;if(typeof p!="function")throw new xs(a);return hs(T)&&(L="leading"in T?!!T.leading:L,H="trailing"in T?!!T.trailing:H),G6(p,b,{leading:L,maxWait:b,trailing:H})}function Jq(p){return z6(p,1)}function Zq(p,b){return g4(e4(b),p)}function ej(){if(!arguments.length)return[];var p=arguments[0];return ui(p)?p:[p]}function tj(p){return Wo(p,d)}function nj(p,b){return b=typeof b=="function"?b:t,Wo(p,d,b)}function ij(p){return Wo(p,h|d)}function rj(p,b){return b=typeof b=="function"?b:t,Wo(p,h|d,b)}function sj(p,b){return b==null||Uh(p,b,Na(b))}function eu(p,b){return p===b||p!==p&&b!==b}var aj=jb(Qv),oj=jb(function(p,b){return p>=b}),Rp=kb(function(){return arguments}())?kb:function(p){return Es(p)&&xi.call(p,"callee")&&!no.call(p,"callee")},ui=at.isArray,lj=wp?bn(wp):GE;function Ko(p){return p!=null&&ny(p.length)&&!qh(p)}function Vs(p){return Es(p)&&Ko(p)}function cj(p){return p===!0||p===!1||Es(p)&&Oa(p)==Ue}var rd=hi||M4,uj=um?bn(um):jv;function hj(p){return Es(p)&&p.nodeType===1&&!s_(p)}function fj(p){if(p==null)return!0;if(Ko(p)&&(ui(p)||typeof p=="string"||typeof p.splice=="function"||rd(p)||ym(p)||Rp(p)))return!p.length;var b=io(p);if(b==dt||b==te)return!p.size;if(i_(p))return!Yv(p).length;for(var T in p)if(xi.call(p,T))return!1;return!0}function dj(p,b){return Pp(p,b)}function pj(p,b,T){T=typeof T=="function"?T:t;var L=T?T(p,b):t;return L===t?Pp(p,b,t,T):!!L}function v4(p){if(!Es(p))return!1;var b=Oa(p);return b==Ye||b==yt||typeof p.message=="string"&&typeof p.name=="string"&&!s_(p)}function mj(p){return typeof p=="number"&&Hr(p)}function qh(p){if(!hs(p))return!1;var b=Oa(p);return b==lt||b==ue||b==mt||b==Ze}function q6(p){return typeof p=="number"&&p==pi(p)}function ny(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=J}function hs(p){var b=typeof p;return p!=null&&(b=="object"||b=="function")}function Es(p){return p!=null&&typeof p=="object"}var j6=xp?bn(xp):Bb;function gj(p,b){return p===b||Wv(p,b,o4(b))}function vj(p,b,T){return T=typeof T=="function"?T:t,Wv(p,b,o4(b),T)}function _j(p){return W6(p)&&p!=+p}function Aj(p){if(nQ(p))throw new qe(s);return Rb(p)}function bj(p){return p===null}function yj(p){return p==null}function W6(p){return typeof p=="number"||Es(p)&&Oa(p)==le}function s_(p){if(!Es(p)||Oa(p)!=xe)return!1;var b=Qo(p);if(b===null)return!0;var T=xi.call(b,"constructor")&&b.constructor;return typeof T=="function"&&T instanceof T&&Ar.call(T)==fc}var _4=Cp?bn(Cp):qE;function wj(p){return q6(p)&&p>=-J&&p<=J}var Y6=Rh?bn(Rh):jE;function iy(p){return typeof p=="string"||!ui(p)&&Es(p)&&Oa(p)==Se}function Dl(p){return typeof p=="symbol"||Es(p)&&Oa(p)==j}var ym=Yf?bn(Yf):WE;function xj(p){return p===t}function Cj(p){return Es(p)&&io(p)==Ve}function Ej(p){return Es(p)&&Oa(p)==ct}var Sj=jb(Xv),Mj=jb(function(p,b){return p<=b});function X6(p){if(!p)return[];if(Ko(p))return iy(p)?cs(p):Xo(p);if(Co&&p[Co])return Jr(p[Co]());var b=io(p),T=b==dt?Si:b==te?et:wm;return T(p)}function jh(p){if(!p)return p===0?p:0;if(p=gc(p),p===W||p===-W){var b=p<0?-1:1;return b*Ce}return p===p?p:0}function pi(p){var b=jh(p),T=b%1;return b===b?T?b-T:b:0}function K6(p){return p?Lu(pi(p),0,ge):0}function gc(p){if(typeof p=="number")return p;if(Dl(p))return Me;if(hs(p)){var b=typeof p.valueOf=="function"?p.valueOf():p;p=hs(b)?b+"":b}if(typeof p!="string")return p===0?p:+p;p=ys(p);var T=vt.test(p);return T||wt.test(p)?Ap(p.slice(2),T?2:8):ot.test(p)?Me:+p}function J6(p){return Fu(p,Jo(p))}function Tj(p){return p?Lu(pi(p),-J,J):p===0?p:0}function pr(p){return p==null?"":kt(p)}var Ij=_m(function(p,b){if(i_(b)||Ko(b)){Fu(b,Na(b),p);return}for(var T in b)xi.call(b,T)&&Mp(p,T,b[T])}),Z6=_m(function(p,b){Fu(b,Jo(b),p)}),ry=_m(function(p,b,T,L){Fu(b,Jo(b),p,L)}),Pj=_m(function(p,b,T,L){Fu(b,Na(b),p,L)}),kj=Gh(zv);function Bj(p,b){var T=Ru(p);return b==null?T:zh(T,b)}var Rj=di(function(p,b){p=nn(p);var T=-1,L=b.length,H=L>2?b[2]:t;for(H&&Mo(b[0],b[1],H)&&(L=1);++T<L;)for(var re=b[T],be=Jo(re),ke=-1,Qe=be.length;++ke<Qe;){var Mt=be[ke],It=p[Mt];(It===t||eu(It,Ri[Mt])&&!xi.call(p,Mt))&&(p[Mt]=re[Mt])}return p}),Dj=di(function(p){return p.push(t,g6),Pn(ek,t,p)});function Lj(p,b){return gt(p,Nn(b,3),dc)}function Oj(p,b){return gt(p,Nn(b,3),Gv)}function Nj(p,b){return p==null?p:$v(p,Nn(b,3),Jo)}function Fj(p,b){return p==null?p:Ib(p,Nn(b,3),Jo)}function zj(p,b){return p&&dc(p,Nn(b,3))}function Uj(p,b){return p&&Gv(p,Nn(b,3))}function Vj(p){return p==null?[]:gm(p,Na(p))}function Hj(p){return p==null?[]:gm(p,Jo(p))}function A4(p,b,T){var L=p==null?t:Vh(p,b);return L===t?T:L}function $j(p,b){return p!=null&&A6(p,b,qv)}function b4(p,b){return p!=null&&A6(p,b,Pb)}var Gj=h6(function(p,b,T){b!=null&&typeof b.toString!="function"&&(b=Cs.call(b)),p[b]=T},w4(Zo)),Qj=h6(function(p,b,T){b!=null&&typeof b.toString!="function"&&(b=Cs.call(b)),xi.call(p,b)?p[b].push(T):p[b]=[T]},Nn),qj=di(Yo);function Na(p){return Ko(p)?pm(p):Yv(p)}function Jo(p){return Ko(p)?pm(p,!0):YE(p)}function jj(p,b){var T={};return b=Nn(b,3),dc(p,function(L,H,re){La(T,b(L,H,re),L)}),T}function Wj(p,b){var T={};return b=Nn(b,3),dc(p,function(L,H,re){La(T,H,b(L,H,re))}),T}var Yj=_m(function(p,b,T){vm(p,b,T)}),ek=_m(function(p,b,T,L){vm(p,b,T,L)}),Xj=Gh(function(p,b){var T={};if(p==null)return T;var L=!1;b=Zn(b,function(re){return re=nd(re,p),L||(L=re.length>1),re}),Fu(p,s4(p),T),L&&(T=Wo(T,h|f|d,GG));for(var H=b.length;H--;)Dn(T,b[H]);return T});function Kj(p,b){return tk(p,ty(Nn(b)))}var Jj=Gh(function(p,b){return p==null?{}:zb(p,b)});function tk(p,b){if(p==null)return{};var T=Zn(s4(p),function(L){return[L]});return b=Nn(b),Jv(p,T,function(L,H){return b(L,H[0])})}function Zj(p,b,T){b=nd(b,p);var L=-1,H=b.length;for(H||(H=1,p=t);++L<H;){var re=p==null?t:p[zu(b[L])];re===t&&(L=H,re=T),p=qh(re)?re.call(p):re}return p}function eW(p,b,T){return p==null?p:Zf(p,b,T)}function tW(p,b,T,L){return L=typeof L=="function"?L:t,p==null?p:Zf(p,b,T,L)}var nk=p6(Na),ik=p6(Jo);function nW(p,b,T){var L=ui(p),H=L||rd(p)||ym(p);if(b=Nn(b,4),T==null){var re=p&&p.constructor;H?T=L?new re:[]:hs(p)?T=qh(re)?Ru(Qo(p)):{}:T={}}return(H?ka:dc)(p,function(be,ke,Qe){return b(T,be,ke,Qe)}),T}function iW(p,b){return p==null?!0:Dn(p,b)}function rW(p,b,T){return p==null?p:Ni(p,b,e4(T))}function sW(p,b,T,L){return L=typeof L=="function"?L:t,p==null?p:Ni(p,b,e4(T),L)}function wm(p){return p==null?[]:Ys(p,Na(p))}function aW(p){return p==null?[]:Ys(p,Jo(p))}function oW(p,b,T){return T===t&&(T=b,b=t),T!==t&&(T=gc(T),T=T===T?T:0),b!==t&&(b=gc(b),b=b===b?b:0),Lu(gc(p),b,T)}function lW(p,b,T){return b=jh(b),T===t?(T=b,b=0):T=jh(T),p=gc(p),HE(p,b,T)}function cW(p,b,T){if(T&&typeof T!="boolean"&&Mo(p,b,T)&&(b=T=t),T===t&&(typeof b=="boolean"?(T=b,b=t):typeof p=="boolean"&&(T=p,p=t)),p===t&&b===t?(p=0,b=1):(p=jh(p),b===t?(b=p,p=0):b=jh(b)),p>b){var L=p;p=b,b=L}if(T||p%1||b%1){var H=Qa();return Di(p+H*(b-p+Pl("1e-"+((H+"").length-1))),b)}return e_(p,b)}var uW=Am(function(p,b,T){return b=b.toLowerCase(),p+(T?rk(b):b)});function rk(p){return y4(pr(p).toLowerCase())}function sk(p){return p=pr(p),p&&p.replace(_n,yn).replace(Pa,"")}function hW(p,b,T){p=pr(p),b=kt(b);var L=p.length;T=T===t?L:Lu(pi(T),0,L);var H=T;return T-=b.length,T>=0&&p.slice(T,H)==b}function fW(p){return p=pr(p),p&&Le.test(p)?p.replace(Ut,wr):p}function dW(p){return p=pr(p),p&&El.test(p)?p.replace(pa,"\\$&"):p}var pW=Am(function(p,b,T){return p+(T?"-":"")+b.toLowerCase()}),mW=Am(function(p,b,T){return p+(T?" ":"")+b.toLowerCase()}),gW=l6("toLowerCase");function vW(p,b,T){p=pr(p),b=pi(b);var L=b?Us(p):0;if(!b||L>=b)return p;var H=(b-L)/2;return qb(ci(H),T)+p+qb(sn(H),T)}function _W(p,b,T){p=pr(p),b=pi(b);var L=b?Us(p):0;return b&&L<b?p+qb(b-L,T):p}function AW(p,b,T){p=pr(p),b=pi(b);var L=b?Us(p):0;return b&&L<b?qb(b-L,T)+p:p}function bW(p,b,T){return T||b==null?b=0:b&&(b=+b),lr(pr(p).replace(rc,""),b||0)}function yW(p,b,T){return(T?Mo(p,b,T):b===t)?b=1:b=pi(b),t_(pr(p),b)}function wW(){var p=arguments,b=pr(p[0]);return p.length<3?b:b.replace(p[1],p[2])}var xW=Am(function(p,b,T){return p+(T?"_":"")+b.toLowerCase()});function CW(p,b,T){return T&&typeof T!="number"&&Mo(p,b,T)&&(b=T=t),T=T===t?ge:T>>>0,T?(p=pr(p),p&&(typeof b=="string"||b!=null&&!_4(b))&&(b=kt(b),!b&&xr(p))?id(cs(p),0,T):p.split(b,T)):[]}var EW=Am(function(p,b,T){return p+(T?" ":"")+y4(b)});function SW(p,b,T){return p=pr(p),T=T==null?0:Lu(pi(T),0,p.length),b=kt(b),p.slice(T,T+b.length)==b}function MW(p,b,T){var L=K.templateSettings;T&&Mo(p,b,T)&&(b=t),p=pr(p),b=ry({},b,L,m6);var H=ry({},b.imports,L.imports,m6),re=Na(H),be=Ys(H,re),ke,Qe,Mt=0,It=b.interpolate||fn,Dt="__p += '",tn=Xi((b.escape||fn).source+"|"+It.source+"|"+(It===Vr?Ns:fn).source+"|"+(b.evaluate||fn).source+"|$","g"),gn="//# sourceURL="+(xi.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wf+"]")+`
`;p.replace(tn,function($n,Pi,Fi,Ll,To,Ol){return Fi||(Fi=Ll),Dt+=p.slice(Mt,Ol).replace(Tn,Vn),Pi&&(ke=!0,Dt+=`' +
__e(`+Pi+`) +
'`),To&&(Qe=!0,Dt+=`';
`+To+`;
__p += '`),Fi&&(Dt+=`' +
((__t = (`+Fi+`)) == null ? '' : __t) +
'`),Mt=Ol+$n.length,$n}),Dt+=`';
`;var Hn=xi.call(b,"variable")&&b.variable;if(!Hn)Dt=`with (obj) {
`+Dt+`
}
`;else if(Ao.test(Hn))throw new qe(o);Dt=(Qe?Dt.replace(St,""):Dt).replace(Re,"$1").replace(Rt,"$1;"),Dt="function("+(Hn||"obj")+`) {
`+(Hn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ke?", __e = _.escape":"")+(Qe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Dt+`return __p
}`;var bi=ok(function(){return Yn(re,gn+"return "+Dt).apply(t,be)});if(bi.source=Dt,v4(bi))throw bi;return bi}function TW(p){return pr(p).toLowerCase()}function IW(p){return pr(p).toUpperCase()}function PW(p,b,T){if(p=pr(p),p&&(T||b===t))return ys(p);if(!p||!(b=kt(b)))return p;var L=cs(p),H=cs(b),re=Rn(L,H),be=Kr(L,H)+1;return id(L,re,be).join("")}function kW(p,b,T){if(p=pr(p),p&&(T||b===t))return p.slice(0,Xs(p)+1);if(!p||!(b=kt(b)))return p;var L=cs(p),H=Kr(L,cs(b))+1;return id(L,0,H).join("")}function BW(p,b,T){if(p=pr(p),p&&(T||b===t))return p.replace(rc,"");if(!p||!(b=kt(b)))return p;var L=cs(p),H=Rn(L,cs(b));return id(L,H).join("")}function RW(p,b){var T=D,L=F;if(hs(b)){var H="separator"in b?b.separator:H;T="length"in b?pi(b.length):T,L="omission"in b?kt(b.omission):L}p=pr(p);var re=p.length;if(xr(p)){var be=cs(p);re=be.length}if(T>=re)return p;var ke=T-Us(L);if(ke<1)return L;var Qe=be?id(be,0,ke).join(""):p.slice(0,ke);if(H===t)return Qe+L;if(be&&(ke+=Qe.length-ke),_4(H)){if(p.slice(ke).search(H)){var Mt,It=Qe;for(H.global||(H=Xi(H.source,pr(ce.exec(H))+"g")),H.lastIndex=0;Mt=H.exec(It);)var Dt=Mt.index;Qe=Qe.slice(0,Dt===t?ke:Dt)}}else if(p.indexOf(kt(H),ke)!=ke){var tn=Qe.lastIndexOf(H);tn>-1&&(Qe=Qe.slice(0,tn))}return Qe+L}function DW(p){return p=pr(p),p&&$t.test(p)?p.replace(tt,Zr):p}var LW=Am(function(p,b,T){return p+(T?" ":"")+b.toUpperCase()}),y4=l6("toUpperCase");function ak(p,b,T){return p=pr(p),b=T?t:b,b===t?ws(p)?hc(p):He(p):p.match(b)||[]}var ok=di(function(p,b){try{return Pn(p,t,b)}catch(T){return v4(T)?T:new qe(T)}}),OW=Gh(function(p,b){return ka(b,function(T){T=zu(T),La(p,T,m4(p[T],p))}),p});function NW(p){var b=p==null?0:p.length,T=Nn();return p=b?Zn(p,function(L){if(typeof L[1]!="function")throw new xs(a);return[T(L[0]),L[1]]}):[],di(function(L){for(var H=-1;++H<b;){var re=p[H];if(Pn(re[0],this,L))return Pn(re[1],this,L)}})}function FW(p){return VE(Wo(p,h))}function w4(p){return function(){return p}}function zW(p,b){return p==null||p!==p?b:p}var UW=u6(),VW=u6(!0);function Zo(p){return p}function x4(p){return Db(typeof p=="function"?p:Wo(p,h))}function HW(p){return Lb(Wo(p,h))}function $W(p,b){return Kv(p,Wo(b,h))}var GW=di(function(p,b){return function(T){return Yo(T,p,b)}}),QW=di(function(p,b){return function(T){return Yo(p,T,b)}});function C4(p,b,T){var L=Na(b),H=gm(b,L);T==null&&!(hs(b)&&(H.length||!L.length))&&(T=b,b=p,p=this,H=gm(b,Na(b)));var re=!(hs(T)&&"chain"in T)||!!T.chain,be=qh(p);return ka(H,function(ke){var Qe=b[ke];p[ke]=Qe,be&&(p.prototype[ke]=function(){var Mt=this.__chain__;if(re||Mt){var It=p(this.__wrapped__),Dt=It.__actions__=Xo(this.__actions__);return Dt.push({func:Qe,args:arguments,thisArg:p}),It.__chain__=Mt,It}return Qe.apply(p,uc([this.value()],arguments))})}),p}function qW(){return os._===this&&(os._=Wc),this}function E4(){}function jW(p){return p=pi(p),di(function(b){return Nb(b,p)})}var WW=n4(Zn),YW=n4(fm),XW=n4(Ee);function lk(p){return c4(p)?pn(zu(p)):Ub(p)}function KW(p){return function(b){return p==null?t:Vh(p,b)}}var JW=f6(),ZW=f6(!0);function S4(){return[]}function M4(){return!1}function eY(){return{}}function tY(){return""}function nY(){return!0}function iY(p,b){if(p=pi(p),p<1||p>J)return[];var T=ge,L=Di(p,ge);b=Nn(b),p-=ge;for(var H=vr(L,b);++T<p;)b(T);return H}function rY(p){return ui(p)?Zn(p,zu):Dl(p)?[p]:Xo(T6(pr(p)))}function sY(p){var b=++Go;return pr(p)+b}var aY=Qb(function(p,b){return p+b},0),oY=i4("ceil"),lY=Qb(function(p,b){return p/b},1),cY=i4("floor");function uY(p){return p&&p.length?mm(p,Zo,Qv):t}function hY(p,b){return p&&p.length?mm(p,Nn(b,2),Qv):t}function fY(p){return dn(p,Zo)}function dY(p,b){return dn(p,Nn(b,2))}function pY(p){return p&&p.length?mm(p,Zo,Xv):t}function mY(p,b){return p&&p.length?mm(p,Nn(b,2),Xv):t}var gY=Qb(function(p,b){return p*b},1),vY=i4("round"),_Y=Qb(function(p,b){return p-b},0);function AY(p){return p&&p.length?ar(p,Zo):0}function bY(p,b){return p&&p.length?ar(p,Nn(b,2)):0}return K.after=Hq,K.ary=z6,K.assign=Ij,K.assignIn=Z6,K.assignInWith=ry,K.assignWith=Pj,K.at=kj,K.before=U6,K.bind=m4,K.bindAll=OW,K.bindKey=V6,K.castArray=ej,K.chain=O6,K.chunk=cQ,K.compact=uQ,K.concat=hQ,K.cond=NW,K.conforms=FW,K.constant=w4,K.countBy=Aq,K.create=Bj,K.curry=H6,K.curryRight=$6,K.debounce=G6,K.defaults=Rj,K.defaultsDeep=Dj,K.defer=$q,K.delay=Gq,K.difference=fQ,K.differenceBy=dQ,K.differenceWith=pQ,K.drop=mQ,K.dropRight=gQ,K.dropRightWhile=vQ,K.dropWhile=_Q,K.fill=AQ,K.filter=yq,K.flatMap=Cq,K.flatMapDeep=Eq,K.flatMapDepth=Sq,K.flatten=B6,K.flattenDeep=bQ,K.flattenDepth=yQ,K.flip=Qq,K.flow=UW,K.flowRight=VW,K.fromPairs=wQ,K.functions=Vj,K.functionsIn=Hj,K.groupBy=Mq,K.initial=CQ,K.intersection=EQ,K.intersectionBy=SQ,K.intersectionWith=MQ,K.invert=Gj,K.invertBy=Qj,K.invokeMap=Iq,K.iteratee=x4,K.keyBy=Pq,K.keys=Na,K.keysIn=Jo,K.map=Jb,K.mapKeys=jj,K.mapValues=Wj,K.matches=HW,K.matchesProperty=$W,K.memoize=ey,K.merge=Yj,K.mergeWith=ek,K.method=GW,K.methodOf=QW,K.mixin=C4,K.negate=ty,K.nthArg=jW,K.omit=Xj,K.omitBy=Kj,K.once=qq,K.orderBy=kq,K.over=WW,K.overArgs=jq,K.overEvery=YW,K.overSome=XW,K.partial=g4,K.partialRight=Q6,K.partition=Bq,K.pick=Jj,K.pickBy=tk,K.property=lk,K.propertyOf=KW,K.pull=kQ,K.pullAll=D6,K.pullAllBy=BQ,K.pullAllWith=RQ,K.pullAt=DQ,K.range=JW,K.rangeRight=ZW,K.rearg=Wq,K.reject=Lq,K.remove=LQ,K.rest=Yq,K.reverse=d4,K.sampleSize=Nq,K.set=eW,K.setWith=tW,K.shuffle=Fq,K.slice=OQ,K.sortBy=Vq,K.sortedUniq=$Q,K.sortedUniqBy=GQ,K.split=CW,K.spread=Xq,K.tail=QQ,K.take=qQ,K.takeRight=jQ,K.takeRightWhile=WQ,K.takeWhile=YQ,K.tap=uq,K.throttle=Kq,K.thru=Kb,K.toArray=X6,K.toPairs=nk,K.toPairsIn=ik,K.toPath=rY,K.toPlainObject=J6,K.transform=nW,K.unary=Jq,K.union=XQ,K.unionBy=KQ,K.unionWith=JQ,K.uniq=ZQ,K.uniqBy=eq,K.uniqWith=tq,K.unset=iW,K.unzip=p4,K.unzipWith=L6,K.update=rW,K.updateWith=sW,K.values=wm,K.valuesIn=aW,K.without=nq,K.words=ak,K.wrap=Zq,K.xor=iq,K.xorBy=rq,K.xorWith=sq,K.zip=aq,K.zipObject=oq,K.zipObjectDeep=lq,K.zipWith=cq,K.entries=nk,K.entriesIn=ik,K.extend=Z6,K.extendWith=ry,C4(K,K),K.add=aY,K.attempt=ok,K.camelCase=uW,K.capitalize=rk,K.ceil=oY,K.clamp=oW,K.clone=tj,K.cloneDeep=ij,K.cloneDeepWith=rj,K.cloneWith=nj,K.conformsTo=sj,K.deburr=sk,K.defaultTo=zW,K.divide=lY,K.endsWith=hW,K.eq=eu,K.escape=fW,K.escapeRegExp=dW,K.every=bq,K.find=wq,K.findIndex=P6,K.findKey=Lj,K.findLast=xq,K.findLastIndex=k6,K.findLastKey=Oj,K.floor=cY,K.forEach=N6,K.forEachRight=F6,K.forIn=Nj,K.forInRight=Fj,K.forOwn=zj,K.forOwnRight=Uj,K.get=A4,K.gt=aj,K.gte=oj,K.has=$j,K.hasIn=b4,K.head=R6,K.identity=Zo,K.includes=Tq,K.indexOf=xQ,K.inRange=lW,K.invoke=qj,K.isArguments=Rp,K.isArray=ui,K.isArrayBuffer=lj,K.isArrayLike=Ko,K.isArrayLikeObject=Vs,K.isBoolean=cj,K.isBuffer=rd,K.isDate=uj,K.isElement=hj,K.isEmpty=fj,K.isEqual=dj,K.isEqualWith=pj,K.isError=v4,K.isFinite=mj,K.isFunction=qh,K.isInteger=q6,K.isLength=ny,K.isMap=j6,K.isMatch=gj,K.isMatchWith=vj,K.isNaN=_j,K.isNative=Aj,K.isNil=yj,K.isNull=bj,K.isNumber=W6,K.isObject=hs,K.isObjectLike=Es,K.isPlainObject=s_,K.isRegExp=_4,K.isSafeInteger=wj,K.isSet=Y6,K.isString=iy,K.isSymbol=Dl,K.isTypedArray=ym,K.isUndefined=xj,K.isWeakMap=Cj,K.isWeakSet=Ej,K.join=TQ,K.kebabCase=pW,K.last=mc,K.lastIndexOf=IQ,K.lowerCase=mW,K.lowerFirst=gW,K.lt=Sj,K.lte=Mj,K.max=uY,K.maxBy=hY,K.mean=fY,K.meanBy=dY,K.min=pY,K.minBy=mY,K.stubArray=S4,K.stubFalse=M4,K.stubObject=eY,K.stubString=tY,K.stubTrue=nY,K.multiply=gY,K.nth=PQ,K.noConflict=qW,K.noop=E4,K.now=Zb,K.pad=vW,K.padEnd=_W,K.padStart=AW,K.parseInt=bW,K.random=cW,K.reduce=Rq,K.reduceRight=Dq,K.repeat=yW,K.replace=wW,K.result=Zj,K.round=vY,K.runInContext=Te,K.sample=Oq,K.size=zq,K.snakeCase=xW,K.some=Uq,K.sortedIndex=NQ,K.sortedIndexBy=FQ,K.sortedIndexOf=zQ,K.sortedLastIndex=UQ,K.sortedLastIndexBy=VQ,K.sortedLastIndexOf=HQ,K.startCase=EW,K.startsWith=SW,K.subtract=_Y,K.sum=AY,K.sumBy=bY,K.template=MW,K.times=iY,K.toFinite=jh,K.toInteger=pi,K.toLength=K6,K.toLower=TW,K.toNumber=gc,K.toSafeInteger=Tj,K.toString=pr,K.toUpper=IW,K.trim=PW,K.trimEnd=kW,K.trimStart=BW,K.truncate=RW,K.unescape=DW,K.uniqueId=sY,K.upperCase=LW,K.upperFirst=y4,K.each=N6,K.eachRight=F6,K.first=R6,C4(K,function(){var p={};return dc(K,function(b,T){xi.call(K.prototype,T)||(p[T]=b)}),p}(),{chain:!1}),K.VERSION=n,ka(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){K[p].placeholder=K}),ka(["drop","take"],function(p,b){Ti.prototype[p]=function(T){T=T===t?1:Ai(pi(T),0);var L=this.__filtered__&&!b?new Ti(this):this.clone();return L.__filtered__?L.__takeCount__=Di(T,L.__takeCount__):L.__views__.push({size:Di(T,ge),type:p+(L.__dir__<0?"Right":"")}),L},Ti.prototype[p+"Right"]=function(T){return this.reverse()[p](T).reverse()}}),ka(["filter","map","takeWhile"],function(p,b){var T=b+1,L=T==$||T==ie;Ti.prototype[p]=function(H){var re=this.clone();return re.__iteratees__.push({iteratee:Nn(H,3),type:T}),re.__filtered__=re.__filtered__||L,re}}),ka(["head","last"],function(p,b){var T="take"+(b?"Right":"");Ti.prototype[p]=function(){return this[T](1).value()[0]}}),ka(["initial","tail"],function(p,b){var T="drop"+(b?"":"Right");Ti.prototype[p]=function(){return this.__filtered__?new Ti(this):this[T](1)}}),Ti.prototype.compact=function(){return this.filter(Zo)},Ti.prototype.find=function(p){return this.filter(p).head()},Ti.prototype.findLast=function(p){return this.reverse().find(p)},Ti.prototype.invokeMap=di(function(p,b){return typeof p=="function"?new Ti(this):this.map(function(T){return Yo(T,p,b)})}),Ti.prototype.reject=function(p){return this.filter(ty(Nn(p)))},Ti.prototype.slice=function(p,b){p=pi(p);var T=this;return T.__filtered__&&(p>0||b<0)?new Ti(T):(p<0?T=T.takeRight(-p):p&&(T=T.drop(p)),b!==t&&(b=pi(b),T=b<0?T.dropRight(-b):T.take(b-p)),T)},Ti.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},Ti.prototype.toArray=function(){return this.take(ge)},dc(Ti.prototype,function(p,b){var T=/^(?:filter|find|map|reject)|While$/.test(b),L=/^(?:head|last)$/.test(b),H=K[L?"take"+(b=="last"?"Right":""):b],re=L||/^find/.test(b);H&&(K.prototype[b]=function(){var be=this.__wrapped__,ke=L?[1]:arguments,Qe=be instanceof Ti,Mt=ke[0],It=Qe||ui(be),Dt=function(Pi){var Fi=H.apply(K,uc([Pi],ke));return L&&tn?Fi[0]:Fi};It&&T&&typeof Mt=="function"&&Mt.length!=1&&(Qe=It=!1);var tn=this.__chain__,gn=!!this.__actions__.length,Hn=re&&!tn,bi=Qe&&!gn;if(!re&&It){be=bi?be:new Ti(this);var $n=p.apply(be,ke);return $n.__actions__.push({func:Kb,args:[Dt],thisArg:t}),new jo($n,tn)}return Hn&&bi?p.apply(this,ke):($n=this.thru(Dt),Hn?L?$n.value()[0]:$n.value():$n)})}),ka(["pop","push","shift","sort","splice","unshift"],function(p){var b=$o[p],T=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",L=/^(?:pop|shift)$/.test(p);K.prototype[p]=function(){var H=arguments;if(L&&!this.__chain__){var re=this.value();return b.apply(ui(re)?re:[],H)}return this[T](function(be){return b.apply(ui(be)?be:[],H)})}}),dc(Ti.prototype,function(p,b){var T=K[b];if(T){var L=T.name+"";xi.call(dr,L)||(dr[L]=[]),dr[L].push({name:b,func:T})}}),dr[Gb(t,_).name]=[{name:"wrapper",func:t}],Ti.prototype.clone=AE,Ti.prototype.reverse=Dv,Ti.prototype.value=bE,K.prototype.at=hq,K.prototype.chain=fq,K.prototype.commit=dq,K.prototype.next=pq,K.prototype.plant=gq,K.prototype.reverse=vq,K.prototype.toJSON=K.prototype.valueOf=K.prototype.value=_q,K.prototype.first=K.prototype.head,Co&&(K.prototype[Co]=mq),K},Zs=es();Za?((Za.exports=Zs)._=Zs,bp._=Zs):os._=Zs}).call(bt)})(Lx,Lx.exports);Lx.exports;new Wn;new Wn;new cr;var jR={exports:{}};/*! Tweakpane 3.1.10 (c) 2016 cocopon, licensed under the MIT license. */(function(i,e){(function(t,n){n(e)})(bt,function(t){class n{constructor(m){const[w,k]=m.split("-"),V=w.split(".");this.major=parseInt(V[0],10),this.minor=parseInt(V[1],10),this.patch=parseInt(V[2],10),this.prerelease=k??null}toString(){const m=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[m,this.prerelease].join("-"):m}}class r{constructor(m){this.controller_=m}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(m){this.controller_.viewProps.set("disabled",m)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(m){this.controller_.viewProps.set("hidden",m)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class s{constructor(m){this.target=m}}class a extends s{constructor(m,w,k,V){super(m),this.value=w,this.presetKey=k,this.last=V??!0}}class o extends s{constructor(m,w,k){super(m),this.value=w,this.presetKey=k}}class l extends s{constructor(m,w){super(m),this.expanded=w}}class c extends s{constructor(m,w){super(m),this.index=w}}function u(E){return E}function h(E){return E==null}function f(E,m){if(E.length!==m.length)return!1;for(let w=0;w<E.length;w++)if(E[w]!==m[w])return!1;return!0}function d(E,m){let w=E;do{const k=Object.getOwnPropertyDescriptor(w,m);if(k&&(k.set!==void 0||k.writable===!0))return!0;w=Object.getPrototypeOf(w)}while(w!==null);return!1}const g={alreadydisposed:()=>"View has been already disposed",invalidparams:E=>`Invalid parameters for '${E.name}'`,nomatchingcontroller:E=>`No matching controller for '${E.key}'`,nomatchingview:E=>`No matching view for '${JSON.stringify(E.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:E=>`Property '${E.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class v{static alreadyDisposed(){return new v({type:"alreadydisposed"})}static notBindable(){return new v({type:"notbindable"})}static propertyNotFound(m){return new v({type:"propertynotfound",context:{name:m}})}static shouldNeverHappen(){return new v({type:"shouldneverhappen"})}constructor(m){var w;this.message=(w=g[m.type](m.context))!==null&&w!==void 0?w:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=m.type}}class A{constructor(m,w,k){this.obj_=m,this.key_=w,this.presetKey_=k??w}static isBindable(m){return!(m===null||typeof m!="object"&&typeof m!="function")}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(m){this.obj_[this.key_]=m}writeProperty(m,w){const k=this.read();if(!A.isBindable(k))throw v.notBindable();if(!(m in k))throw v.propertyNotFound(m);k[m]=w}}class _ extends r{get label(){return this.controller_.props.get("label")}set label(m){this.controller_.props.set("label",m)}get title(){var m;return(m=this.controller_.valueController.props.get("title"))!==null&&m!==void 0?m:""}set title(m){this.controller_.valueController.props.set("title",m)}on(m,w){const k=w.bind(this);return this.controller_.valueController.emitter.on(m,()=>{k(new s(this))}),this}}class y{constructor(){this.observers_={}}on(m,w){let k=this.observers_[m];return k||(k=this.observers_[m]=[]),k.push({handler:w}),this}off(m,w){const k=this.observers_[m];return k&&(this.observers_[m]=k.filter(V=>V.handler!==w)),this}emit(m,w){const k=this.observers_[m];k&&k.forEach(V=>{V.handler(w)})}}const x="tp";function C(E){return(w,k)=>[x,"-",E,"v",w?`_${w}`:"",k?`-${k}`:""].join("")}function S(E,m){return w=>m(E(w))}function I(E){return E.rawValue}function P(E,m){E.emitter.on("change",S(I,m)),m(E.rawValue)}function B(E,m,w){P(E.value(m),w)}function M(E,m,w){w?E.classList.add(m):E.classList.remove(m)}function D(E,m){return w=>{M(E,m,w)}}function F(E,m){P(E,w=>{m.textContent=w??""})}const z=C("btn");class U{constructor(m,w){this.element=m.createElement("div"),this.element.classList.add(z()),w.viewProps.bindClassModifiers(this.element);const k=m.createElement("button");k.classList.add(z("b")),w.viewProps.bindDisabled(k),this.element.appendChild(k),this.buttonElement=k;const V=m.createElement("div");V.classList.add(z("t")),F(w.props.value("title"),V),this.buttonElement.appendChild(V)}}class ${constructor(m,w){this.emitter=new y,this.onClick_=this.onClick_.bind(this),this.props=w.props,this.viewProps=w.viewProps,this.view=new U(m,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class O{constructor(m,w){var k;this.constraint_=w==null?void 0:w.constraint,this.equals_=(k=w==null?void 0:w.equals)!==null&&k!==void 0?k:(V,Ae)=>V===Ae,this.emitter=new y,this.rawValue_=m}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(m){this.setRawValue(m,{forceEmit:!1,last:!0})}setRawValue(m,w){const k=w??{forceEmit:!1,last:!0},V=this.constraint_?this.constraint_.constrain(m):m,Ae=this.rawValue_;this.equals_(Ae,V)&&!k.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=V,this.emitter.emit("change",{options:k,previousRawValue:Ae,rawValue:V,sender:this}))}}class ie{constructor(m){this.emitter=new y,this.value_=m}get rawValue(){return this.value_}set rawValue(m){this.setRawValue(m,{forceEmit:!1,last:!0})}setRawValue(m,w){const k=w??{forceEmit:!1,last:!0},V=this.value_;V===m&&!k.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=m,this.emitter.emit("change",{options:k,previousRawValue:V,rawValue:this.value_,sender:this}))}}function W(E,m){const w=m==null?void 0:m.constraint,k=m==null?void 0:m.equals;return!w&&!k?new ie(E):new O(E,m)}class J{constructor(m){this.emitter=new y,this.valMap_=m;for(const w in this.valMap_)this.valMap_[w].emitter.on("change",()=>{this.emitter.emit("change",{key:w,sender:this})})}static createCore(m){return Object.keys(m).reduce((k,V)=>Object.assign(k,{[V]:W(m[V])}),{})}static fromObject(m){const w=this.createCore(m);return new J(w)}get(m){return this.valMap_[m].rawValue}set(m,w){this.valMap_[m].rawValue=w}value(m){return this.valMap_[m]}}function Ce(E,m){const k=Object.keys(m).reduce((V,Ae)=>{if(V===void 0)return;const We=m[Ae],kt=We(E[Ae]);return kt.succeeded?Object.assign(Object.assign({},V),{[Ae]:kt.value}):void 0},{});return k}function Me(E,m){return E.reduce((w,k)=>{if(w===void 0)return;const V=m(k);if(!(!V.succeeded||V.value===void 0))return[...w,V.value]},[])}function ge(E){return E===null?!1:typeof E=="object"}function ve(E){return m=>w=>{if(!m&&w===void 0)return{succeeded:!1,value:void 0};if(m&&w===void 0)return{succeeded:!0,value:void 0};const k=E(w);return k!==void 0?{succeeded:!0,value:k}:{succeeded:!1,value:void 0}}}function nt(E){return{custom:m=>ve(m)(E),boolean:ve(m=>typeof m=="boolean"?m:void 0)(E),number:ve(m=>typeof m=="number"?m:void 0)(E),string:ve(m=>typeof m=="string"?m:void 0)(E),function:ve(m=>typeof m=="function"?m:void 0)(E),constant:m=>ve(w=>w===m?m:void 0)(E),raw:ve(m=>m)(E),object:m=>ve(w=>{if(ge(w))return Ce(w,m)})(E),array:m=>ve(w=>{if(Array.isArray(w))return Me(w,m)})(E)}}const $e={optional:nt(!0),required:nt(!1)};function X(E,m){const w=$e.required.object(m)(E);return w.succeeded?w.value:void 0}function Be(E){console.warn([`Missing '${E.key}' of ${E.target} in ${E.place}.`,"Please rebuild plugins with the latest core package."].join(" "))}function mt(E){return E&&E.parentElement&&E.parentElement.removeChild(E),null}class Ue{constructor(m){this.value_=m}static create(m){return[new Ue(m),(w,k)=>{m.setRawValue(w,k)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}}const Tt=C("");function yt(E,m){return D(E,Tt(void 0,m))}class Ye extends J{constructor(m){var w;super(m),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Ue.create(W(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(w=this.get("parent"))===null||w===void 0||w.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(m){var w,k,V;const Ae=m??{};return new Ye(J.createCore({disabled:(w=Ae.disabled)!==null&&w!==void 0?w:!1,disposed:!1,hidden:(k=Ae.hidden)!==null&&k!==void 0?k:!1,parent:(V=Ae.parent)!==null&&V!==void 0?V:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(m){P(this.globalDisabled_,yt(m,"disabled")),B(this,"hidden",yt(m,"hidden"))}bindDisabled(m){P(this.globalDisabled_,w=>{m.disabled=w})}bindTabIndex(m){P(this.globalDisabled_,w=>{m.tabIndex=w?-1:0})}handleDispose(m){this.value("disposed").emitter.on("change",w=>{w&&m()})}getGlobalDisabled_(){const m=this.get("parent");return(m?m.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(m){var w;const k=m.previousRawValue;k==null||k.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(w=this.get("parent"))===null||w===void 0||w.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}function lt(){return["veryfirst","first","last","verylast"]}const ue=C(""),dt={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class le{constructor(m){this.parent_=null,this.blade=m.blade,this.view=m.view,this.viewProps=m.viewProps;const w=this.view.element;this.blade.value("positions").emitter.on("change",()=>{lt().forEach(k=>{w.classList.remove(ue(void 0,dt[k]))}),this.blade.get("positions").forEach(k=>{w.classList.add(ue(void 0,dt[k]))})}),this.viewProps.handleDispose(()=>{mt(w)})}get parent(){return this.parent_}set parent(m){if(this.parent_=m,!("parent"in this.viewProps.valMap_)){Be({key:"parent",target:Ye.name,place:"BladeController.parent"});return}this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}}const he="http://www.w3.org/2000/svg";function xe(E){E.offsetHeight}function pt(E,m){const w=E.style.transition;E.style.transition="none",m(),E.style.transition=w}function Ze(E){return E.ontouchstart!==void 0}function me(){return globalThis}function te(){return me().document}function Se(E){const m=E.ownerDocument.defaultView;return m&&"document"in m?E.getContext("2d",{willReadFrequently:!0}):null}const j={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function q(E,m){const w=E.createElementNS(he,"svg");return w.innerHTML=j[m],w}function Ve(E,m,w){E.insertBefore(m,E.children[w])}function ct(E){E.parentElement&&E.parentElement.removeChild(E)}function ne(E){for(;E.children.length>0;)E.removeChild(E.children[0])}function Je(E){for(;E.childNodes.length>0;)E.removeChild(E.childNodes[0])}function Lt(E){return E.relatedTarget?E.relatedTarget:"explicitOriginalTarget"in E?E.explicitOriginalTarget:null}const we=C("lbl");function Ie(E,m){const w=E.createDocumentFragment();return m.split(`
`).map(V=>E.createTextNode(V)).forEach((V,Ae)=>{Ae>0&&w.appendChild(E.createElement("br")),w.appendChild(V)}),w}class de{constructor(m,w){this.element=m.createElement("div"),this.element.classList.add(we()),w.viewProps.bindClassModifiers(this.element);const k=m.createElement("div");k.classList.add(we("l")),B(w.props,"label",Ae=>{h(Ae)?this.element.classList.add(we(void 0,"nol")):(this.element.classList.remove(we(void 0,"nol")),Je(k),k.appendChild(Ie(m,Ae)))}),this.element.appendChild(k),this.labelElement=k;const V=m.createElement("div");V.classList.add(we("v")),this.element.appendChild(V),this.valueElement=V}}class Xe extends le{constructor(m,w){const k=w.valueController.viewProps;super(Object.assign(Object.assign({},w),{view:new de(m,{props:w.props,viewProps:k}),viewProps:k})),this.props=w.props,this.valueController=w.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const Nt={id:"button",type:"blade",accept(E){const m=$e,w=X(E,{title:m.required.string,view:m.required.constant("button"),label:m.optional.string});return w?{params:w}:null},controller(E){return new Xe(E.document,{blade:E.blade,props:J.fromObject({label:E.params.label}),valueController:new $(E.document,{props:J.fromObject({title:E.params.title}),viewProps:E.viewProps})})},api(E){return!(E.controller instanceof Xe)||!(E.controller.valueController instanceof $)?null:new _(E.controller)}};class Qt extends le{constructor(m){super(m),this.value=m.value}}function Ft(){return new J({positions:W([],{equals:f})})}class jt extends J{constructor(m){super(m)}static create(m){const w={completed:!0,expanded:m,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},k=J.createCore(w);return new jt(k)}get styleExpanded(){var m;return(m=this.get("temporaryExpanded"))!==null&&m!==void 0?m:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const m=this.get("expandedHeight");return this.get("shouldFixHeight")&&!h(m)?`${m}px`:"auto"}bindExpandedClass(m,w){const k=()=>{this.styleExpanded?m.classList.add(w):m.classList.remove(w)};B(this,"expanded",k),B(this,"temporaryExpanded",k)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function St(E,m){let w=0;return pt(m,()=>{E.set("expandedHeight",null),E.set("temporaryExpanded",!0),xe(m),w=m.clientHeight,E.set("temporaryExpanded",null),xe(m)}),w}function Re(E,m){m.style.height=E.styleHeight}function Rt(E,m){E.value("expanded").emitter.on("beforechange",()=>{if(E.set("completed",!1),h(E.get("expandedHeight"))){const w=St(E,m);w>0&&E.set("expandedHeight",w)}E.set("shouldFixHeight",!0),xe(m)}),E.emitter.on("change",()=>{Re(E,m)}),Re(E,m),m.addEventListener("transitionend",w=>{w.propertyName==="height"&&E.cleanUpTransition()})}class tt extends r{constructor(m,w){super(m),this.rackApi_=w}}function Ut(E,m){return E.addBlade(Object.assign(Object.assign({},m),{view:"button"}))}function $t(E,m){return E.addBlade(Object.assign(Object.assign({},m),{view:"folder"}))}function Le(E,m){const w=m??{};return E.addBlade(Object.assign(Object.assign({},w),{view:"separator"}))}function wn(E,m){return E.addBlade(Object.assign(Object.assign({},m),{view:"tab"}))}class fi{constructor(m){this.emitter=new y,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=m}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(m){for(const w of this.allItems())if(m(w))return w;return null}includes(m){return this.cache_.has(m)}add(m,w){if(this.includes(m))throw v.shouldNeverHappen();const k=w!==void 0?w:this.items_.length;this.items_.splice(k,0,m),this.cache_.add(m);const V=this.extract_(m);V&&(V.emitter.on("add",this.onSubListAdd_),V.emitter.on("remove",this.onSubListRemove_),V.allItems().forEach(Ae=>{this.cache_.add(Ae)})),this.emitter.emit("add",{index:k,item:m,root:this,target:this})}remove(m){const w=this.items_.indexOf(m);if(w<0)return;this.items_.splice(w,1),this.cache_.delete(m);const k=this.extract_(m);k&&(k.emitter.off("add",this.onSubListAdd_),k.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:w,item:m,root:this,target:this})}onSubListAdd_(m){this.cache_.add(m.item),this.emitter.emit("add",{index:m.index,item:m.item,root:this,target:m.target})}onSubListRemove_(m){this.cache_.delete(m.item),this.emitter.emit("remove",{index:m.index,item:m.item,root:this,target:m.target})}}class Vr extends r{constructor(m){super(m),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new y,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(m){this.controller_.props.set("label",m)}on(m,w){const k=w.bind(this);return this.emitter_.on(m,V=>{k(V.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(m){const w=m.sender.target.read();this.emitter_.emit("change",{event:new a(this,w,this.controller_.binding.target.presetKey,m.options.last)})}}class oi extends Xe{constructor(m,w){super(m,w),this.binding=w.binding}}class As extends r{constructor(m){super(m),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new y,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(m){this.controller_.props.set("label",m)}on(m,w){const k=w.bind(this);return this.emitter_.on(m,V=>{k(V.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(m){const w=m.sender.target.read();this.emitter_.emit("update",{event:new o(this,w,this.controller_.binding.target.presetKey)})}}class er extends Xe{constructor(m,w){super(m,w),this.binding=w.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}}function pa(E){return E instanceof Ka?E.apiSet_:E instanceof tt?E.rackApi_.apiSet_:null}function El(E,m){const w=E.find(k=>k.controller_===m);if(!w)throw v.shouldNeverHappen();return w}function rc(E,m,w){if(!A.isBindable(E))throw v.notBindable();return new A(E,m,w)}class Ka extends r{constructor(m,w){super(m),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new y,this.apiSet_=new fi(pa),this.pool_=w;const k=this.controller_.rack;k.emitter.on("add",this.onRackAdd_),k.emitter.on("remove",this.onRackRemove_),k.emitter.on("inputchange",this.onRackInputChange_),k.emitter.on("monitorupdate",this.onRackMonitorUpdate_),k.children.forEach(V=>{this.setUpApi_(V)})}get children(){return this.controller_.rack.children.map(m=>El(this.apiSet_,m))}addInput(m,w,k){const V=k??{},Ae=this.controller_.view.element.ownerDocument,We=this.pool_.createInput(Ae,rc(m,w,V.presetKey),V),kt=new Vr(We);return this.add(kt,V.index)}addMonitor(m,w,k){const V=k??{},Ae=this.controller_.view.element.ownerDocument,We=this.pool_.createMonitor(Ae,rc(m,w),V),kt=new As(We);return this.add(kt,V.index)}addFolder(m){return $t(this,m)}addButton(m){return Ut(this,m)}addSeparator(m){return Le(this,m)}addTab(m){return wn(this,m)}add(m,w){this.controller_.rack.add(m.controller_,w);const k=this.apiSet_.find(V=>V.controller_===m.controller_);return k&&this.apiSet_.remove(k),this.apiSet_.add(m),m}remove(m){this.controller_.rack.remove(m.controller_)}addBlade(m){const w=this.controller_.view.element.ownerDocument,k=this.pool_.createBlade(w,m),V=this.pool_.createBladeApi(k);return this.add(V,m.index)}on(m,w){const k=w.bind(this);return this.emitter_.on(m,V=>{k(V.event)}),this}setUpApi_(m){this.apiSet_.find(k=>k.controller_===m)||this.apiSet_.add(this.pool_.createBladeApi(m))}onRackAdd_(m){this.setUpApi_(m.bladeController)}onRackRemove_(m){if(m.isRoot){const w=El(this.apiSet_,m.bladeController);this.apiSet_.remove(w)}}onRackInputChange_(m){const w=m.bladeController;if(w instanceof oi){const k=El(this.apiSet_,w),V=w.binding;this.emitter_.emit("change",{event:new a(k,V.target.read(),V.target.presetKey,m.options.last)})}else if(w instanceof Qt){const k=El(this.apiSet_,w);this.emitter_.emit("change",{event:new a(k,w.value.rawValue,void 0,m.options.last)})}}onRackMonitorUpdate_(m){if(!(m.bladeController instanceof er))throw v.shouldNeverHappen();const w=El(this.apiSet_,m.bladeController),k=m.bladeController.binding;this.emitter_.emit("update",{event:new o(w,k.target.read(),k.target.presetKey)})}}class Sl extends tt{constructor(m,w){super(m,new Ka(m.rackController,w)),this.emitter_=new y,this.controller_.foldable.value("expanded").emitter.on("change",k=>{this.emitter_.emit("fold",{event:new l(this,k.sender.rawValue)})}),this.rackApi_.on("change",k=>{this.emitter_.emit("change",{event:k})}),this.rackApi_.on("update",k=>{this.emitter_.emit("update",{event:k})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(m){this.controller_.foldable.set("expanded",m)}get title(){return this.controller_.props.get("title")}set title(m){this.controller_.props.set("title",m)}get children(){return this.rackApi_.children}addInput(m,w,k){return this.rackApi_.addInput(m,w,k)}addMonitor(m,w,k){return this.rackApi_.addMonitor(m,w,k)}addFolder(m){return this.rackApi_.addFolder(m)}addButton(m){return this.rackApi_.addButton(m)}addSeparator(m){return this.rackApi_.addSeparator(m)}addTab(m){return this.rackApi_.addTab(m)}add(m,w){return this.rackApi_.add(m,w)}remove(m){this.rackApi_.remove(m)}addBlade(m){return this.rackApi_.addBlade(m)}on(m,w){const k=w.bind(this);return this.emitter_.on(m,V=>{k(V.event)}),this}}class Hc extends le{constructor(m){super({blade:m.blade,view:m.view,viewProps:m.rackController.viewProps}),this.rackController=m.rackController}}class Su{constructor(m,w){const k=C(w.viewName);this.element=m.createElement("div"),this.element.classList.add(k()),w.viewProps.bindClassModifiers(this.element)}}function Hf(E,m){for(let w=0;w<E.length;w++){const k=E[w];if(k instanceof oi&&k.binding===m)return k}return null}function Ao(E,m){for(let w=0;w<E.length;w++){const k=E[w];if(k instanceof er&&k.binding===m)return k}return null}function Mu(E,m){for(let w=0;w<E.length;w++){const k=E[w];if(k instanceof Qt&&k.value===m)return k}return null}function Ns(E){return E instanceof vt?E.rack:E instanceof Hc?E.rackController.rack:null}function ce(E){const m=Ns(E);return m?m.bcSet_:null}class ot{constructor(m){var w,k;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new y,this.blade_=(w=m.blade)!==null&&w!==void 0?w:null,(k=this.blade_)===null||k===void 0||k.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=m.viewProps,this.bcSet_=new fi(ce),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(m,w){var k;(k=m.parent)===null||k===void 0||k.remove(m),d(m,"parent")?m.parent=this:(m.parent_=this,Be({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(m,w)}remove(m){d(m,"parent")?m.parent=null:(m.parent_=null,Be({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(m)}find(m){return this.bcSet_.allItems().filter(w=>w instanceof m)}onSetAdd_(m){this.updatePositions_();const w=m.target===m.root;if(this.emitter.emit("add",{bladeController:m.item,index:m.index,isRoot:w,sender:this}),!w)return;const k=m.item;if(k.viewProps.emitter.on("change",this.onChildViewPropsChange_),k.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),k.viewProps.handleDispose(this.onChildDispose_),k instanceof oi)k.binding.emitter.on("change",this.onChildInputChange_);else if(k instanceof er)k.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(k instanceof Qt)k.value.emitter.on("change",this.onChildValueChange_);else{const V=Ns(k);if(V){const Ae=V.emitter;Ae.on("layout",this.onDescendantLayout_),Ae.on("inputchange",this.onDescendantInputChange_),Ae.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(m){this.updatePositions_();const w=m.target===m.root;if(this.emitter.emit("remove",{bladeController:m.item,isRoot:w,sender:this}),!w)return;const k=m.item;if(k instanceof oi)k.binding.emitter.off("change",this.onChildInputChange_);else if(k instanceof er)k.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(k instanceof Qt)k.value.emitter.off("change",this.onChildValueChange_);else{const V=Ns(k);if(V){const Ae=V.emitter;Ae.off("layout",this.onDescendantLayout_),Ae.off("inputchange",this.onDescendantInputChange_),Ae.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const m=this.bcSet_.items.filter(V=>!V.viewProps.get("hidden")),w=m[0],k=m[m.length-1];this.bcSet_.items.forEach(V=>{const Ae=[];V===w&&(Ae.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&Ae.push("veryfirst")),V===k&&(Ae.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&Ae.push("verylast")),V.blade.set("positions",Ae)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(m){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(w=>w.viewProps.get("disposed")).forEach(w=>{this.bcSet_.remove(w)})}onChildInputChange_(m){const w=Hf(this.find(oi),m.sender);if(!w)throw v.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:w,options:m.options,sender:this})}onChildMonitorUpdate_(m){const w=Ao(this.find(er),m.sender);if(!w)throw v.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:w,sender:this})}onChildValueChange_(m){const w=Mu(this.find(Qt),m.sender);if(!w)throw v.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:w,options:m.options,sender:this})}onDescendantLayout_(m){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(m){this.emitter.emit("inputchange",{bladeController:m.bladeController,options:m.options,sender:this})}onDescendantMonitorUpdate_(m){this.emitter.emit("monitorupdate",{bladeController:m.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class vt extends le{constructor(m,w){super(Object.assign(Object.assign({},w),{view:new Su(m,{viewName:"brk",viewProps:w.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const k=new ot({blade:w.root?void 0:w.blade,viewProps:w.viewProps});k.emitter.on("add",this.onRackAdd_),k.emitter.on("remove",this.onRackRemove_),this.rack=k,this.viewProps.handleDispose(()=>{for(let V=this.rack.children.length-1;V>=0;V--)this.rack.children[V].viewProps.set("disposed",!0)})}onRackAdd_(m){m.isRoot&&Ve(this.view.element,m.bladeController.view.element,m.index)}onRackRemove_(m){m.isRoot&&ct(m.bladeController.view.element)}}const Ke=C("cnt");class wt{constructor(m,w){var k;this.className_=C((k=w.viewName)!==null&&k!==void 0?k:"fld"),this.element=m.createElement("div"),this.element.classList.add(this.className_(),Ke()),w.viewProps.bindClassModifiers(this.element),this.foldable_=w.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),B(this.foldable_,"completed",D(this.element,this.className_(void 0,"cpl")));const V=m.createElement("button");V.classList.add(this.className_("b")),B(w.props,"title",Dn=>{h(Dn)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),w.viewProps.bindDisabled(V),this.element.appendChild(V),this.buttonElement=V;const Ae=m.createElement("div");Ae.classList.add(this.className_("i")),this.element.appendChild(Ae);const We=m.createElement("div");We.classList.add(this.className_("t")),F(w.props.value("title"),We),this.buttonElement.appendChild(We),this.titleElement=We;const kt=m.createElement("div");kt.classList.add(this.className_("m")),this.buttonElement.appendChild(kt);const mn=w.containerElement;mn.classList.add(this.className_("c")),this.element.appendChild(mn),this.containerElement=mn}}class en extends Hc{constructor(m,w){var k;const V=jt.create((k=w.expanded)!==null&&k!==void 0?k:!0),Ae=new vt(m,{blade:w.blade,root:w.root,viewProps:w.viewProps});super(Object.assign(Object.assign({},w),{rackController:Ae,view:new wt(m,{containerElement:Ae.view.element,foldable:V,props:w.props,viewName:w.root?"rot":void 0,viewProps:w.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=w.props,this.foldable=V,Rt(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const _n={id:"folder",type:"blade",accept(E){const m=$e,w=X(E,{title:m.required.string,view:m.required.constant("folder"),expanded:m.optional.boolean});return w?{params:w}:null},controller(E){return new en(E.document,{blade:E.blade,expanded:E.params.expanded,props:J.fromObject({title:E.params.title}),viewProps:E.viewProps})},api(E){return E.controller instanceof en?new Sl(E.controller,E.pool):null}};class fn extends Qt{constructor(m,w){const k=w.valueController.viewProps;super(Object.assign(Object.assign({},w),{value:w.valueController.value,view:new de(m,{props:w.props,viewProps:k}),viewProps:k})),this.props=w.props,this.valueController=w.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class Tn extends r{}const Qn=C("spr");class xn{constructor(m,w){this.element=m.createElement("div"),this.element.classList.add(Qn()),w.viewProps.bindClassModifiers(this.element);const k=m.createElement("hr");k.classList.add(Qn("r")),this.element.appendChild(k)}}class In extends le{constructor(m,w){super(Object.assign(Object.assign({},w),{view:new xn(m,{viewProps:w.viewProps})}))}}const tr={id:"separator",type:"blade",accept(E){const w=X(E,{view:$e.required.constant("separator")});return w?{params:w}:null},controller(E){return new In(E.document,{blade:E.blade,viewProps:E.viewProps})},api(E){return E.controller instanceof In?new Tn(E.controller):null}},ki=C("tbi");class as{constructor(m,w){this.element=m.createElement("div"),this.element.classList.add(ki()),w.viewProps.bindClassModifiers(this.element),B(w.props,"selected",Ae=>{Ae?this.element.classList.add(ki(void 0,"sel")):this.element.classList.remove(ki(void 0,"sel"))});const k=m.createElement("button");k.classList.add(ki("b")),w.viewProps.bindDisabled(k),this.element.appendChild(k),this.buttonElement=k;const V=m.createElement("div");V.classList.add(ki("t")),F(w.props.value("title"),V),this.buttonElement.appendChild(V),this.titleElement=V}}class js{constructor(m,w){this.emitter=new y,this.onClick_=this.onClick_.bind(this),this.props=w.props,this.viewProps=w.viewProps,this.view=new as(m,{props:w.props,viewProps:w.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Kn{constructor(m,w){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new js(m,{props:w.itemProps,viewProps:Ye.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new vt(m,{blade:Ft(),viewProps:Ye.create()}),this.props=w.props,B(this.props,"selected",k=>{this.itemController.props.set("selected",k),this.contentController.viewProps.set("hidden",!k)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class Bn{constructor(m,w){this.controller_=m,this.rackApi_=w}get title(){var m;return(m=this.controller_.itemController.props.get("title"))!==null&&m!==void 0?m:""}set title(m){this.controller_.itemController.props.set("title",m)}get selected(){return this.controller_.props.get("selected")}set selected(m){this.controller_.props.set("selected",m)}get children(){return this.rackApi_.children}addButton(m){return this.rackApi_.addButton(m)}addFolder(m){return this.rackApi_.addFolder(m)}addSeparator(m){return this.rackApi_.addSeparator(m)}addTab(m){return this.rackApi_.addTab(m)}add(m,w){this.rackApi_.add(m,w)}remove(m){this.rackApi_.remove(m)}addInput(m,w,k){return this.rackApi_.addInput(m,w,k)}addMonitor(m,w,k){return this.rackApi_.addMonitor(m,w,k)}addBlade(m){return this.rackApi_.addBlade(m)}}class bo extends tt{constructor(m,w){super(m,new Ka(m.rackController,w)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new y,this.pageApiMap_=new Map,this.rackApi_.on("change",k=>{this.emitter_.emit("change",{event:k})}),this.rackApi_.on("update",k=>{this.emitter_.emit("update",{event:k})}),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(k=>{this.setUpPageApi_(k)})}get pages(){return this.controller_.pageSet.items.map(m=>{const w=this.pageApiMap_.get(m);if(!w)throw v.shouldNeverHappen();return w})}addPage(m){const w=this.controller_.view.element.ownerDocument,k=new Kn(w,{itemProps:J.fromObject({selected:!1,title:m.title}),props:J.fromObject({selected:!1})});this.controller_.add(k,m.index);const V=this.pageApiMap_.get(k);if(!V)throw v.shouldNeverHappen();return V}removePage(m){this.controller_.remove(m)}on(m,w){const k=w.bind(this);return this.emitter_.on(m,V=>{k(V.event)}),this}setUpPageApi_(m){const w=this.rackApi_.apiSet_.find(V=>V.controller_===m.contentController);if(!w)throw v.shouldNeverHappen();const k=new Bn(m,w);this.pageApiMap_.set(m,k)}onPageAdd_(m){this.setUpPageApi_(m.item)}onPageRemove_(m){if(!this.pageApiMap_.get(m.item))throw v.shouldNeverHappen();this.pageApiMap_.delete(m.item)}onSelect_(m){this.emitter_.emit("select",{event:new c(this,m.rawValue)})}}const Mr=-1;class hr{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=W(!0),this.selectedIndex=W(Mr),this.items_=[]}add(m,w){const k=w??this.items_.length;this.items_.splice(k,0,m),m.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(m){const w=this.items_.indexOf(m);w<0||(this.items_.splice(w,1),m.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Mr,this.empty.rawValue=!0;return}const m=this.items_.findIndex(w=>w.rawValue);m<0?(this.items_.forEach((w,k)=>{w.rawValue=k===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((w,k)=>{w.rawValue=k===m}),this.selectedIndex.rawValue=m),this.empty.rawValue=!1}onItemSelectedChange_(m){if(m.rawValue){const w=this.items_.findIndex(k=>k===m.sender);this.items_.forEach((k,V)=>{k.rawValue=V===w}),this.selectedIndex.rawValue=w}else this.keepSelection_()}}const Yr=C("tab");class sc{constructor(m,w){this.element=m.createElement("div"),this.element.classList.add(Yr(),Ke()),w.viewProps.bindClassModifiers(this.element),P(w.empty,D(this.element,Yr(void 0,"nop")));const k=m.createElement("div");k.classList.add(Yr("t")),this.element.appendChild(k),this.itemsElement=k;const V=m.createElement("div");V.classList.add(Yr("i")),this.element.appendChild(V);const Ae=w.contentsElement;Ae.classList.add(Yr("c")),this.element.appendChild(Ae),this.contentsElement=Ae}}class Ml extends Hc{constructor(m,w){const k=new vt(m,{blade:w.blade,viewProps:w.viewProps}),V=new hr;super({blade:w.blade,rackController:k,view:new sc(m,{contentsElement:k.view.element,empty:V.empty,viewProps:w.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new fi(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=V}get pageSet(){return this.pageSet_}add(m,w){this.pageSet_.add(m,w)}remove(m){this.pageSet_.remove(this.pageSet_.items[m])}onPageAdd_(m){const w=m.item;Ve(this.view.itemsElement,w.itemController.view.element,m.index),w.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(w.contentController,m.index),this.tab.add(w.props.value("selected"))}onPageRemove_(m){const w=m.item;ct(w.itemController.view.element),w.itemController.viewProps.set("parent",null),this.rackController.rack.remove(w.contentController),this.tab.remove(w.props.value("selected"))}}const fr={id:"tab",type:"blade",accept(E){const m=$e,w=X(E,{pages:m.required.array(m.required.object({title:m.required.string})),view:m.required.constant("tab")});return!w||w.pages.length===0?null:{params:w}},controller(E){const m=new Ml(E.document,{blade:E.blade,viewProps:E.viewProps});return E.params.pages.forEach(w=>{const k=new Kn(E.document,{itemProps:J.fromObject({selected:!1,title:w.title}),props:J.fromObject({selected:!1})});m.add(k)}),m},api(E){return E.controller instanceof Ml?new bo(E.controller,E.pool):null}};function Ja(E,m){const w=E.accept(m.params);if(!w)return null;const k=$e.optional.boolean(m.params.disabled).value,V=$e.optional.boolean(m.params.hidden).value;return E.controller({blade:Ft(),document:m.document,params:Object.assign(Object.assign({},w.params),{disabled:k,hidden:V}),viewProps:Ye.create({disabled:k,hidden:V})})}class Tl{constructor(){this.disabled=!1,this.emitter=new y}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Ws{constructor(m,w){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=m,this.emitter=new y,this.interval_=w,this.setTimer_()}get disabled(){return this.disabled_}set disabled(m){this.disabled_=m,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const m=this.doc_.defaultView;m&&m.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const m=this.doc_.defaultView;m&&(this.timerId_=m.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class $c{constructor(m){this.onValueChange_=this.onValueChange_.bind(this),this.reader=m.reader,this.writer=m.writer,this.emitter=new y,this.value=m.value,this.value.emitter.on("change",this.onValueChange_),this.target=m.target,this.read()}read(){const m=this.target.read();m!==void 0&&(this.value.rawValue=this.reader(m))}write_(m){this.writer(this.target,m)}onValueChange_(m){this.write_(m.rawValue),this.emitter.emit("change",{options:m.options,rawValue:m.rawValue,sender:this})}}function Ih(E,m){for(;E.length<m;)E.push(void 0)}function ac(E){const m=[];return Ih(m,E),W(m)}function Xr(E){const m=E.indexOf(void 0);return m<0?E:E.slice(0,m)}function bs(E,m){const w=[...Xr(E),m];return w.length>E.length?w.splice(0,w.length-E.length):Ih(w,E.length),w}class Ph{constructor(m){this.onTick_=this.onTick_.bind(this),this.reader_=m.reader,this.target=m.target,this.emitter=new y,this.value=m.value,this.ticker=m.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const m=this.target.read();if(m===void 0)return;const w=this.value.rawValue,k=this.reader_(m);this.value.rawValue=bs(w,k),this.emitter.emit("update",{rawValue:k,sender:this})}onTick_(m){this.read()}}class oc{constructor(m){this.constraints=m}constrain(m){return this.constraints.reduce((w,k)=>k.constrain(w),m)}}function Ta(E,m){if(E instanceof m)return E;if(E instanceof oc){const w=E.constraints.reduce((k,V)=>k||(V instanceof m?V:null),null);if(w)return w}return null}class Ia{constructor(m){this.values=J.fromObject({max:m.max,min:m.min})}constrain(m){const w=this.values.get("max"),k=this.values.get("min");return Math.min(Math.max(m,k),w)}}class Il{constructor(m){this.values=J.fromObject({options:m})}get options(){return this.values.get("options")}constrain(m){const w=this.values.get("options");return w.length===0||w.filter(V=>V.value===m).length>0?m:w[0].value}}class Tu{constructor(m){this.values=J.fromObject({max:m.max,min:m.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(m){const w=this.values.get("max"),k=this.values.get("min");let V=m;return h(k)||(V=Math.max(V,k)),h(w)||(V=Math.min(V,w)),V}}class Gc{constructor(m,w=0){this.step=m,this.origin=w}constrain(m){const w=this.origin%this.step,k=Math.round((m-w)/this.step);return w+k*this.step}}const Jn=C("lst");class $f{constructor(m,w){this.onValueChange_=this.onValueChange_.bind(this),this.props_=w.props,this.element=m.createElement("div"),this.element.classList.add(Jn()),w.viewProps.bindClassModifiers(this.element);const k=m.createElement("select");k.classList.add(Jn("s")),w.viewProps.bindDisabled(k),this.element.appendChild(k),this.selectElement=k;const V=m.createElement("div");V.classList.add(Jn("m")),V.appendChild(q(m,"dropdown")),this.element.appendChild(V),w.value.emitter.on("change",this.onValueChange_),this.value_=w.value,B(this.props_,"options",Ae=>{ne(this.selectElement),Ae.forEach(We=>{const kt=m.createElement("option");kt.textContent=We.text,this.selectElement.appendChild(kt)}),this.update_()})}update_(){const m=this.props_.get("options").map(w=>w.value);this.selectElement.selectedIndex=m.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class Ho{constructor(m,w){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=w.props,this.value=w.value,this.viewProps=w.viewProps,this.view=new $f(m,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(m){const w=m.currentTarget;this.value.rawValue=this.props.get("options")[w.selectedIndex].value}}const Gf=C("pop");class Iu{constructor(m,w){this.element=m.createElement("div"),this.element.classList.add(Gf()),w.viewProps.bindClassModifiers(this.element),P(w.shows,D(this.element,Gf(void 0,"v")))}}class Qf{constructor(m,w){this.shows=W(!1),this.viewProps=w.viewProps,this.view=new Iu(m,{shows:this.shows,viewProps:this.viewProps})}}const Pu=C("txt");class lc{constructor(m,w){this.onChange_=this.onChange_.bind(this),this.element=m.createElement("div"),this.element.classList.add(Pu()),w.viewProps.bindClassModifiers(this.element),this.props_=w.props,this.props_.emitter.on("change",this.onChange_);const k=m.createElement("input");k.classList.add(Pu("i")),k.type="text",w.viewProps.bindDisabled(k),this.element.appendChild(k),this.inputElement=k,w.value.emitter.on("change",this.onChange_),this.value_=w.value,this.refresh()}refresh(){const m=this.props_.get("formatter");this.inputElement.value=m(this.value_.rawValue)}onChange_(){this.refresh()}}class qf{constructor(m,w){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=w.parser,this.props=w.props,this.value=w.value,this.viewProps=w.viewProps,this.view=new lc(m,{props:w.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(m){const k=m.currentTarget.value,V=this.parser_(k);h(V)||(this.value.rawValue=V),this.view.refresh()}}function lm(E){return String(E)}function cc(E){return E==="false"?!1:!!E}function Pa(E){return lm(E)}class jf{constructor(m){this.text=m}evaluate(){return Number(this.text)}toString(){return this.text}}const vp={"**":(E,m)=>Math.pow(E,m),"*":(E,m)=>E*m,"/":(E,m)=>E/m,"%":(E,m)=>E%m,"+":(E,m)=>E+m,"-":(E,m)=>E-m,"<<":(E,m)=>E<<m,">>":(E,m)=>E>>m,">>>":(E,m)=>E>>>m,"&":(E,m)=>E&m,"^":(E,m)=>E^m,"|":(E,m)=>E|m};class cm{constructor(m,w,k){this.left=w,this.operator=m,this.right=k}evaluate(){const m=vp[this.operator];if(!m)throw new Error(`unexpected binary operator: '${this.operator}`);return m(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const ma={"+":E=>E,"-":E=>-E,"~":E=>~E};class Qc{constructor(m,w){this.operator=m,this.expression=w}evaluate(){const m=ma[this.operator];if(!m)throw new Error(`unexpected unary operator: '${this.operator}`);return m(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Wf(E){return(m,w)=>{for(let k=0;k<E.length;k++){const V=E[k](m,w);if(V!=="")return V}return""}}function Yi(E,m){var w;const k=E.substr(m).match(/^\s+/);return(w=k&&k[0])!==null&&w!==void 0?w:""}function sr(E,m){const w=E.substr(m,1);return w.match(/^[1-9]$/)?w:""}function yo(E,m){var w;const k=E.substr(m).match(/^[0-9]+/);return(w=k&&k[0])!==null&&w!==void 0?w:""}function _p(E,m){const w=yo(E,m);if(w!=="")return w;const k=E.substr(m,1);if(m+=1,k!=="-"&&k!=="+")return"";const V=yo(E,m);return V===""?"":k+V}function ku(E,m){const w=E.substr(m,1);if(m+=1,w.toLowerCase()!=="e")return"";const k=_p(E,m);return k===""?"":w+k}function Bu(E,m){const w=E.substr(m,1);if(w==="0")return w;const k=sr(E,m);return m+=k.length,k===""?"":k+yo(E,m)}function Pl(E,m){const w=Bu(E,m);if(m+=w.length,w==="")return"";const k=E.substr(m,1);if(m+=k.length,k!==".")return"";const V=yo(E,m);return m+=V.length,w+k+V+ku(E,m)}function Ap(E,m){const w=E.substr(m,1);if(m+=w.length,w!==".")return"";const k=yo(E,m);return m+=k.length,k===""?"":w+k+ku(E,m)}function kh(E,m){const w=Bu(E,m);return m+=w.length,w===""?"":w+ku(E,m)}const Rv=Wf([Pl,Ap,kh]);function os(E,m){var w;const k=E.substr(m).match(/^[01]+/);return(w=k&&k[0])!==null&&w!==void 0?w:""}function bp(E,m){const w=E.substr(m,2);if(m+=w.length,w.toLowerCase()!=="0b")return"";const k=os(E,m);return k===""?"":w+k}function Za(E,m){var w;const k=E.substr(m).match(/^[0-7]+/);return(w=k&&k[0])!==null&&w!==void 0?w:""}function Bh(E,m){const w=E.substr(m,2);if(m+=w.length,w.toLowerCase()!=="0o")return"";const k=Za(E,m);return k===""?"":w+k}function yp(E,m){var w;const k=E.substr(m).match(/^[0-9a-f]+/i);return(w=k&&k[0])!==null&&w!==void 0?w:""}function ga(E,m){const w=E.substr(m,2);if(m+=w.length,w.toLowerCase()!=="0x")return"";const k=yp(E,m);return k===""?"":w+k}const wp=Wf([bp,Bh,ga]),um=Wf([wp,Rv]);function xp(E,m){const w=um(E,m);return m+=w.length,w===""?null:{evaluable:new jf(w),cursor:m}}function Cp(E,m){const w=E.substr(m,1);if(m+=w.length,w!=="(")return null;const k=Dh(E,m);if(!k)return null;m=k.cursor,m+=Yi(E,m).length;const V=E.substr(m,1);return m+=V.length,V!==")"?null:{evaluable:k.evaluable,cursor:m}}function Rh(E,m){var w;return(w=xp(E,m))!==null&&w!==void 0?w:Cp(E,m)}function Yf(E,m){const w=Rh(E,m);if(w)return w;const k=E.substr(m,1);if(m+=k.length,k!=="+"&&k!=="-"&&k!=="~")return null;const V=Yf(E,m);return V?(m=V.cursor,{cursor:m,evaluable:new Qc(k,V.evaluable)}):null}function Pn(E,m,w){w+=Yi(m,w).length;const k=E.filter(V=>m.startsWith(V,w))[0];return k?(w+=k.length,w+=Yi(m,w).length,{cursor:w,operator:k}):null}function hm(E,m){return(w,k)=>{const V=E(w,k);if(!V)return null;k=V.cursor;let Ae=V.evaluable;for(;;){const We=Pn(m,w,k);if(!We)break;k=We.cursor;const kt=E(w,k);if(!kt)return null;k=kt.cursor,Ae=new cm(We.operator,Ae,kt.evaluable)}return Ae?{cursor:k,evaluable:Ae}:null}}const ka=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((E,m)=>hm(E,m),Yf);function Dh(E,m){return m+=Yi(E,m).length,ka(E,m)}function fm(E){const m=Dh(E,0);return!m||m.cursor+Yi(E,m.cursor).length!==E.length?null:m.evaluable}function Fs(E){var m;const w=fm(E);return(m=w==null?void 0:w.evaluate())!==null&&m!==void 0?m:null}function Lh(E){if(typeof E=="number")return E;if(typeof E=="string"){const m=Fs(E);if(!h(m))return m}return 0}function Xf(E){return String(E)}function Zn(E){return m=>m.toFixed(Math.max(Math.min(E,20),0))}const uc=Zn(0);function je(E){return uc(E)+"%"}function Y(E){return String(E)}function Ee(E){return E}function se({primary:E,secondary:m,forward:w,backward:k}){let V=!1;function Ae(We){V||(V=!0,We(),V=!1)}E.emitter.on("change",We=>{Ae(()=>{m.setRawValue(w(E,m),We.options)})}),m.emitter.on("change",We=>{Ae(()=>{E.setRawValue(k(E,m),We.options)}),Ae(()=>{m.setRawValue(w(E,m),We.options)})}),Ae(()=>{m.setRawValue(w(E,m),{forceEmit:!1,last:!0})})}function ae(E,m){const w=E*(m.altKey?.1:1)*(m.shiftKey?10:1);return m.upKey?+w:m.downKey?-w:0}function He(E){return{altKey:E.altKey,downKey:E.key==="ArrowDown",shiftKey:E.shiftKey,upKey:E.key==="ArrowUp"}}function gt(E){return{altKey:E.altKey,downKey:E.key==="ArrowLeft",shiftKey:E.shiftKey,upKey:E.key==="ArrowRight"}}function st(E){return E==="ArrowUp"||E==="ArrowDown"}function Kt(E){return st(E)||E==="ArrowLeft"||E==="ArrowRight"}function On(E,m){var w,k;const V=m.ownerDocument.defaultView,Ae=m.getBoundingClientRect();return{x:E.pageX-(((w=V&&V.scrollX)!==null&&w!==void 0?w:0)+Ae.left),y:E.pageY-(((k=V&&V.scrollY)!==null&&k!==void 0?k:0)+Ae.top)}}class li{constructor(m){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=m,this.emitter=new y,m.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),m.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),m.addEventListener("touchend",this.onTouchEnd_),m.addEventListener("mousedown",this.onMouseDown_)}computePosition_(m){const w=this.elem_.getBoundingClientRect();return{bounds:{width:w.width,height:w.height},point:m?{x:m.x,y:m.y}:null}}onMouseDown_(m){var w;m.preventDefault(),(w=m.currentTarget)===null||w===void 0||w.focus();const k=this.elem_.ownerDocument;k.addEventListener("mousemove",this.onDocumentMouseMove_),k.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:m.altKey,data:this.computePosition_(On(m,this.elem_)),sender:this,shiftKey:m.shiftKey})}onDocumentMouseMove_(m){this.emitter.emit("move",{altKey:m.altKey,data:this.computePosition_(On(m,this.elem_)),sender:this,shiftKey:m.shiftKey})}onDocumentMouseUp_(m){const w=this.elem_.ownerDocument;w.removeEventListener("mousemove",this.onDocumentMouseMove_),w.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:m.altKey,data:this.computePosition_(On(m,this.elem_)),sender:this,shiftKey:m.shiftKey})}onTouchStart_(m){m.preventDefault();const w=m.targetTouches.item(0),k=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:m.altKey,data:this.computePosition_(w?{x:w.clientX-k.left,y:w.clientY-k.top}:void 0),sender:this,shiftKey:m.shiftKey}),this.lastTouch_=w}onTouchMove_(m){const w=m.targetTouches.item(0),k=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:m.altKey,data:this.computePosition_(w?{x:w.clientX-k.left,y:w.clientY-k.top}:void 0),sender:this,shiftKey:m.shiftKey}),this.lastTouch_=w}onTouchEnd_(m){var w;const k=(w=m.targetTouches.item(0))!==null&&w!==void 0?w:this.lastTouch_,V=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:m.altKey,data:this.computePosition_(k?{x:k.clientX-V.left,y:k.clientY-V.top}:void 0),sender:this,shiftKey:m.shiftKey})}}function dn(E,m,w,k,V){const Ae=(E-m)/(w-m);return k+Ae*(V-k)}function pn(E){return String(E.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function xt(E,m,w){return Math.min(Math.max(E,m),w)}function An(E,m){return(E%m+m)%m}const Bi=C("txt");class ar{constructor(m,w){this.onChange_=this.onChange_.bind(this),this.props_=w.props,this.props_.emitter.on("change",this.onChange_),this.element=m.createElement("div"),this.element.classList.add(Bi(),Bi(void 0,"num")),w.arrayPosition&&this.element.classList.add(Bi(void 0,w.arrayPosition)),w.viewProps.bindClassModifiers(this.element);const k=m.createElement("input");k.classList.add(Bi("i")),k.type="text",w.viewProps.bindDisabled(k),this.element.appendChild(k),this.inputElement=k,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=w.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Bi()),this.inputElement.classList.add(Bi("i"));const V=m.createElement("div");V.classList.add(Bi("k")),this.element.appendChild(V),this.knobElement=V;const Ae=m.createElementNS(he,"svg");Ae.classList.add(Bi("g")),this.knobElement.appendChild(Ae);const We=m.createElementNS(he,"path");We.classList.add(Bi("gb")),Ae.appendChild(We),this.guideBodyElem_=We;const kt=m.createElementNS(he,"path");kt.classList.add(Bi("gh")),Ae.appendChild(kt),this.guideHeadElem_=kt;const mn=m.createElement("div");mn.classList.add(C("tt")()),this.knobElement.appendChild(mn),this.tooltipElem_=mn,w.value.emitter.on("change",this.onChange_),this.value=w.value,this.refresh()}onDraggingChange_(m){if(m.rawValue===null){this.element.classList.remove(Bi(void 0,"drg"));return}this.element.classList.add(Bi(void 0,"drg"));const w=m.rawValue/this.props_.get("draggingScale"),k=w+(w>0?-1:w<0?1:0),V=xt(-k,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${k+V},0 L${k},4 L${k+V},8`,`M ${w},-1 L${w},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${w},4`);const Ae=this.props_.get("formatter");this.tooltipElem_.textContent=Ae(this.value.rawValue),this.tooltipElem_.style.left=`${w}px`}refresh(){const m=this.props_.get("formatter");this.inputElement.value=m(this.value.rawValue)}onChange_(){this.refresh()}}class vr{constructor(m,w){var k;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=w.baseStep,this.parser_=w.parser,this.props=w.props,this.sliderProps_=(k=w.sliderProps)!==null&&k!==void 0?k:null,this.value=w.value,this.viewProps=w.viewProps,this.dragging_=W(null),this.view=new ar(m,{arrayPosition:w.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const V=new li(this.view.knobElement);V.emitter.on("down",this.onPointerDown_),V.emitter.on("move",this.onPointerMove_),V.emitter.on("up",this.onPointerUp_)}constrainValue_(m){var w,k;const V=(w=this.sliderProps_)===null||w===void 0?void 0:w.get("minValue"),Ae=(k=this.sliderProps_)===null||k===void 0?void 0:k.get("maxValue");let We=m;return V!==void 0&&(We=Math.max(We,V)),Ae!==void 0&&(We=Math.min(We,Ae)),We}onInputChange_(m){const k=m.currentTarget.value,V=this.parser_(k);h(V)||(this.value.rawValue=this.constrainValue_(V)),this.view.refresh()}onInputKeyDown_(m){const w=ae(this.baseStep_,He(m));w!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+w),{forceEmit:!1,last:!1})}onInputKeyUp_(m){ae(this.baseStep_,He(m))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(m){if(!m.point)return null;const w=m.point.x-m.bounds.width/2;return this.constrainValue_(this.originRawValue_+w*this.props.get("draggingScale"))}onPointerMove_(m){const w=this.computeDraggingValue_(m.data);w!==null&&(this.value.setRawValue(w,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(m){const w=this.computeDraggingValue_(m.data);w!==null&&(this.value.setRawValue(w,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const _r=C("sld");class ys{constructor(m,w){this.onChange_=this.onChange_.bind(this),this.props_=w.props,this.props_.emitter.on("change",this.onChange_),this.element=m.createElement("div"),this.element.classList.add(_r()),w.viewProps.bindClassModifiers(this.element);const k=m.createElement("div");k.classList.add(_r("t")),w.viewProps.bindTabIndex(k),this.element.appendChild(k),this.trackElement=k;const V=m.createElement("div");V.classList.add(_r("k")),this.trackElement.appendChild(V),this.knobElement=V,w.value.emitter.on("change",this.onChange_),this.value=w.value,this.update_()}update_(){const m=xt(dn(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${m}%`}onChange_(){this.update_()}}class bn{constructor(m,w){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=w.baseStep,this.value=w.value,this.viewProps=w.viewProps,this.props=w.props,this.view=new ys(m,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new li(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(m,w){m.point&&this.value.setRawValue(dn(xt(m.point.x,0,m.bounds.width),0,m.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),w)}onPointerDownOrMove_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerUp_(m){this.handlePointerEvent_(m.data,{forceEmit:!0,last:!0})}onKeyDown_(m){const w=ae(this.baseStep_,gt(m));w!==0&&this.value.setRawValue(this.value.rawValue+w,{forceEmit:!1,last:!1})}onKeyUp_(m){ae(this.baseStep_,gt(m))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ys=C("sldtxt");class nr{constructor(m,w){this.element=m.createElement("div"),this.element.classList.add(Ys());const k=m.createElement("div");k.classList.add(Ys("s")),this.sliderView_=w.sliderView,k.appendChild(this.sliderView_.element),this.element.appendChild(k);const V=m.createElement("div");V.classList.add(Ys("t")),this.textView_=w.textView,V.appendChild(this.textView_.element),this.element.appendChild(V)}}class Rn{constructor(m,w){this.value=w.value,this.viewProps=w.viewProps,this.sliderC_=new bn(m,{baseStep:w.baseStep,props:w.sliderProps,value:w.value,viewProps:this.viewProps}),this.textC_=new vr(m,{baseStep:w.baseStep,parser:w.parser,props:w.textProps,sliderProps:w.sliderProps,value:w.value,viewProps:w.viewProps}),this.view=new nr(m,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function Kr(E,m){E.write(m)}function zs(E){const m=$e;if(Array.isArray(E))return m.required.array(m.required.object({text:m.required.string,value:m.required.raw}))(E).value;if(typeof E=="object")return m.required.raw(E).value}function yn(E){if(E==="inline"||E==="popup")return E}function wr(E){const m=$e;return m.required.object({max:m.optional.number,min:m.optional.number,step:m.optional.number})(E).value}function Vn(E){if(Array.isArray(E))return E;const m=[];return Object.keys(E).forEach(w=>{m.push({text:w,value:E[w]})}),m}function wo(E){return h(E)?null:new Il(Vn(E))}function xr(E){const m=E?Ta(E,Gc):null;return m?m.step:null}function ws(E,m){const w=E&&Ta(E,Gc);return w?pn(w.step):Math.max(pn(m),2)}function Jr(E){const m=xr(E);return m??1}function Si(E,m){var w;const k=E&&Ta(E,Gc),V=Math.abs((w=k==null?void 0:k.step)!==null&&w!==void 0?w:m);return V===0?.1:Math.pow(10,Math.floor(Math.log10(V))-1)}const Cr=C("ckb");class or{constructor(m,w){this.onValueChange_=this.onValueChange_.bind(this),this.element=m.createElement("div"),this.element.classList.add(Cr()),w.viewProps.bindClassModifiers(this.element);const k=m.createElement("label");k.classList.add(Cr("l")),this.element.appendChild(k);const V=m.createElement("input");V.classList.add(Cr("i")),V.type="checkbox",k.appendChild(V),this.inputElement=V,w.viewProps.bindDisabled(this.inputElement);const Ae=m.createElement("div");Ae.classList.add(Cr("w")),k.appendChild(Ae);const We=q(m,"check");Ae.appendChild(We),w.value.emitter.on("change",this.onValueChange_),this.value=w.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class et{constructor(m,w){this.onInputChange_=this.onInputChange_.bind(this),this.value=w.value,this.viewProps=w.viewProps,this.view=new or(m,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(m){const w=m.currentTarget;this.value.rawValue=w.checked}}function ls(E){const m=[],w=wo(E.options);return w&&m.push(w),new oc(m)}const qc={id:"input-bool",type:"input",accept:(E,m)=>{if(typeof E!="boolean")return null;const k=X(m,{options:$e.optional.custom(zs)});return k?{initialValue:E,params:k}:null},binding:{reader:E=>cc,constraint:E=>ls(E.params),writer:E=>Kr},controller:E=>{const m=E.document,w=E.value,k=E.constraint,V=k&&Ta(k,Il);return V?new Ho(m,{props:new J({options:V.values.value("options")}),value:w,viewProps:E.viewProps}):new et(m,{value:w,viewProps:E.viewProps})}},Ba=C("col");class Us{constructor(m,w){this.element=m.createElement("div"),this.element.classList.add(Ba()),w.foldable.bindExpandedClass(this.element,Ba(void 0,"expanded")),B(w.foldable,"completed",D(this.element,Ba(void 0,"cpl")));const k=m.createElement("div");k.classList.add(Ba("h")),this.element.appendChild(k);const V=m.createElement("div");V.classList.add(Ba("s")),k.appendChild(V),this.swatchElement=V;const Ae=m.createElement("div");if(Ae.classList.add(Ba("t")),k.appendChild(Ae),this.textElement=Ae,w.pickerLayout==="inline"){const We=m.createElement("div");We.classList.add(Ba("p")),this.element.appendChild(We),this.pickerElement=We}else this.pickerElement=null}}function cs(E,m,w){const k=xt(E/255,0,1),V=xt(m/255,0,1),Ae=xt(w/255,0,1),We=Math.max(k,V,Ae),kt=Math.min(k,V,Ae),mn=We-kt;let Dn=0,Ni=0;const Li=(kt+We)/2;return mn!==0&&(Ni=mn/(1-Math.abs(We+kt-1)),k===We?Dn=(V-Ae)/mn:V===We?Dn=2+(Ae-k)/mn:Dn=4+(k-V)/mn,Dn=Dn/6+(Dn<0?1:0)),[Dn*360,Ni*100,Li*100]}function Xs(E,m,w){const k=(E%360+360)%360,V=xt(m/100,0,1),Ae=xt(w/100,0,1),We=(1-Math.abs(2*Ae-1))*V,kt=We*(1-Math.abs(k/60%2-1)),mn=Ae-We/2;let Dn,Ni,Li;return k>=0&&k<60?[Dn,Ni,Li]=[We,kt,0]:k>=60&&k<120?[Dn,Ni,Li]=[kt,We,0]:k>=120&&k<180?[Dn,Ni,Li]=[0,We,kt]:k>=180&&k<240?[Dn,Ni,Li]=[0,kt,We]:k>=240&&k<300?[Dn,Ni,Li]=[kt,0,We]:[Dn,Ni,Li]=[We,0,kt],[(Dn+mn)*255,(Ni+mn)*255,(Li+mn)*255]}function Zr(E,m,w){const k=xt(E/255,0,1),V=xt(m/255,0,1),Ae=xt(w/255,0,1),We=Math.max(k,V,Ae),kt=Math.min(k,V,Ae),mn=We-kt;let Dn;mn===0?Dn=0:We===k?Dn=60*(((V-Ae)/mn%6+6)%6):We===V?Dn=60*((Ae-k)/mn+2):Dn=60*((k-V)/mn+4);const Ni=We===0?0:mn/We,Li=We;return[Dn,Ni*100,Li*100]}function Ks(E,m,w){const k=An(E,360),V=xt(m/100,0,1),Ae=xt(w/100,0,1),We=Ae*V,kt=We*(1-Math.abs(k/60%2-1)),mn=Ae-We;let Dn,Ni,Li;return k>=0&&k<60?[Dn,Ni,Li]=[We,kt,0]:k>=60&&k<120?[Dn,Ni,Li]=[kt,We,0]:k>=120&&k<180?[Dn,Ni,Li]=[0,We,kt]:k>=180&&k<240?[Dn,Ni,Li]=[0,kt,We]:k>=240&&k<300?[Dn,Ni,Li]=[kt,0,We]:[Dn,Ni,Li]=[We,0,kt],[(Dn+mn)*255,(Ni+mn)*255,(Li+mn)*255]}function Js(E,m,w){const k=w+m*(100-Math.abs(2*w-100))/200;return[E,k!==0?m*(100-Math.abs(2*w-100))/k:0,w+m*(100-Math.abs(2*w-100))/(2*100)]}function hc(E,m,w){const k=100-Math.abs(w*(200-m)/100-100);return[E,k!==0?m*w/k:0,w*(200-m)/(2*100)]}function es(E){return[E[0],E[1],E[2]]}function Zs(E,m){return[E[0],E[1],E[2],m]}const Te={hsl:{hsl:(E,m,w)=>[E,m,w],hsv:Js,rgb:Xs},hsv:{hsl:hc,hsv:(E,m,w)=>[E,m,w],rgb:Ks},rgb:{hsl:cs,hsv:Zr,rgb:(E,m,w)=>[E,m,w]}};function ut(E,m){return[m==="float"?1:E==="rgb"?255:360,m==="float"?1:E==="rgb"?255:100,m==="float"?1:E==="rgb"?255:100]}function at(E,m){return E===m?m:An(E,m)}function Wt(E,m,w){var k;const V=ut(m,w);return[m==="rgb"?xt(E[0],0,V[0]):at(E[0],V[0]),xt(E[1],0,V[1]),xt(E[2],0,V[2]),xt((k=E[3])!==null&&k!==void 0?k:1,0,1)]}function qe(E,m,w,k){const V=ut(m,w),Ae=ut(m,k);return E.map((We,kt)=>We/V[kt]*Ae[kt])}function Yn(E,m,w){const k=qe(E,m.mode,m.type,"int"),V=Te[m.mode][w.mode](...k);return qe(V,w.mode,"int",w.type)}function Gi(E,m){return typeof E!="object"||h(E)?!1:m in E&&typeof E[m]=="number"}class nn{static black(m="int"){return new nn([0,0,0],"rgb",m)}static fromObject(m,w="int"){const k="a"in m?[m.r,m.g,m.b,m.a]:[m.r,m.g,m.b];return new nn(k,"rgb",w)}static toRgbaObject(m,w="int"){return m.toRgbaObject(w)}static isRgbColorObject(m){return Gi(m,"r")&&Gi(m,"g")&&Gi(m,"b")}static isRgbaColorObject(m){return this.isRgbColorObject(m)&&Gi(m,"a")}static isColorObject(m){return this.isRgbColorObject(m)}static equals(m,w){if(m.mode!==w.mode)return!1;const k=m.comps_,V=w.comps_;for(let Ae=0;Ae<k.length;Ae++)if(k[Ae]!==V[Ae])return!1;return!0}constructor(m,w,k="int"){this.mode=w,this.type=k,this.comps_=Wt(m,w,k)}getComponents(m,w="int"){return Zs(Yn(es(this.comps_),{mode:this.mode,type:this.type},{mode:m??this.mode,type:w}),this.comps_[3])}toRgbaObject(m="int"){const w=this.getComponents("rgb",m);return{r:w[0],g:w[1],b:w[2],a:w[3]}}}const Xi=C("colp");class jc{constructor(m,w){this.alphaViews_=null,this.element=m.createElement("div"),this.element.classList.add(Xi()),w.viewProps.bindClassModifiers(this.element);const k=m.createElement("div");k.classList.add(Xi("hsv"));const V=m.createElement("div");V.classList.add(Xi("sv")),this.svPaletteView_=w.svPaletteView,V.appendChild(this.svPaletteView_.element),k.appendChild(V);const Ae=m.createElement("div");Ae.classList.add(Xi("h")),this.hPaletteView_=w.hPaletteView,Ae.appendChild(this.hPaletteView_.element),k.appendChild(Ae),this.element.appendChild(k);const We=m.createElement("div");if(We.classList.add(Xi("rgb")),this.textView_=w.textView,We.appendChild(this.textView_.element),this.element.appendChild(We),w.alphaViews){this.alphaViews_={palette:w.alphaViews.palette,text:w.alphaViews.text};const kt=m.createElement("div");kt.classList.add(Xi("a"));const mn=m.createElement("div");mn.classList.add(Xi("ap")),mn.appendChild(this.alphaViews_.palette.element),kt.appendChild(mn);const Dn=m.createElement("div");Dn.classList.add(Xi("at")),Dn.appendChild(this.alphaViews_.text.element),kt.appendChild(Dn),this.element.appendChild(kt)}}get allFocusableElements(){const m=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(w=>w.inputElement)];return this.alphaViews_&&m.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),m}}function xs(E){return E==="int"?"int":E==="float"?"float":void 0}function $o(E){const m=$e;return X(E,{alpha:m.optional.boolean,color:m.optional.object({alpha:m.optional.boolean,type:m.optional.custom(xs)}),expanded:m.optional.boolean,picker:m.optional.custom(yn)})}function Tr(E){return E?.1:1}function Ri(E){var m;return(m=E.color)===null||m===void 0?void 0:m.type}function Ra(E,m){return E.alpha===m.alpha&&E.mode===m.mode&&E.notation===m.notation&&E.type===m.type}function Ar(E,m){const w=E.match(/^(.+)%$/);return Math.min(w?parseFloat(w[1])*.01*m:parseFloat(E),m)}const xi={deg:E=>E,grad:E=>E*360/400,rad:E=>E*360/(2*Math.PI),turn:E=>E*360};function Go(E){const m=E.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!m)return parseFloat(E);const w=parseFloat(m[1]),k=m[2];return xi[k](w)}function eo(E){const m=E.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!m)return null;const w=[Ar(m[1],255),Ar(m[2],255),Ar(m[3],255)];return isNaN(w[0])||isNaN(w[1])||isNaN(w[2])?null:w}function Cs(E){return m=>{const w=eo(m);return w?new nn(w,"rgb",E):null}}function fc(E){const m=E.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!m)return null;const w=[Ar(m[1],255),Ar(m[2],255),Ar(m[3],255),Ar(m[4],1)];return isNaN(w[0])||isNaN(w[1])||isNaN(w[2])||isNaN(w[3])?null:w}function Wc(E){return m=>{const w=fc(m);return w?new nn(w,"rgb",E):null}}function Yc(E){const m=E.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!m)return null;const w=[Go(m[1]),Ar(m[2],100),Ar(m[3],100)];return isNaN(w[0])||isNaN(w[1])||isNaN(w[2])?null:w}function xo(E){return m=>{const w=Yc(m);return w?new nn(w,"hsl",E):null}}function ea(E){const m=E.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!m)return null;const w=[Go(m[1]),Ar(m[2],100),Ar(m[3],100),Ar(m[4],1)];return isNaN(w[0])||isNaN(w[1])||isNaN(w[2])||isNaN(w[3])?null:w}function to(E){return m=>{const w=ea(m);return w?new nn(w,"hsl",E):null}}function Ci(E){const m=E.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(m)return[parseInt(m[1]+m[1],16),parseInt(m[2]+m[2],16),parseInt(m[3]+m[3],16)];const w=E.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return w?[parseInt(w[1],16),parseInt(w[2],16),parseInt(w[3],16)]:null}function Qo(E){const m=Ci(E);return m?new nn(m,"rgb","int"):null}function Ga(E){const m=E.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(m)return[parseInt(m[1]+m[1],16),parseInt(m[2]+m[2],16),parseInt(m[3]+m[3],16),dn(parseInt(m[4]+m[4],16),0,255,0,1)];const w=E.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return w?[parseInt(w[1],16),parseInt(w[2],16),parseInt(w[3],16),dn(parseInt(w[4],16),0,255,0,1)]:null}function no(E){const m=Ga(E);return m?new nn(m,"rgb","int"):null}function va(E){const m=E.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!m)return null;const w=[parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])];return isNaN(w[0])||isNaN(w[1])||isNaN(w[2])?null:w}function kl(E){return m=>{const w=va(m);return w?new nn(w,"rgb",E):null}}function Co(E){const m=E.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!m)return null;const w=[parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]),parseFloat(m[4])];return isNaN(w[0])||isNaN(w[1])||isNaN(w[2])||isNaN(w[3])?null:w}function ta(E){return m=>{const w=Co(m);return w?new nn(w,"rgb",E):null}}const qn=[{parser:Ci,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Ga,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:eo,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:fc,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Yc,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:ea,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:va,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Co,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Cn(E){return qn.reduce((m,{parser:w,result:k})=>m||(w(E)?k:null),null)}function Ii(E,m="int"){const w=Cn(E);return w?w.notation==="hex"&&m!=="float"?Object.assign(Object.assign({},w),{type:"int"}):w.notation==="func"?Object.assign(Object.assign({},w),{type:m}):null:null}const Ir={int:[Qo,no,Cs("int"),Wc("int"),xo("int"),to("int"),kl("int"),ta("int")],float:[Cs("float"),Wc("float"),xo("float"),to("float"),kl("float"),ta("float")]};function sn(E){const m=Ir[E];return w=>{if(typeof w!="string")return nn.black(E);const k=m.reduce((V,Ae)=>V||Ae(w),null);return k??nn.black(E)}}function ci(E){const m=Ir[E];return w=>m.reduce((k,V)=>k||V(w),null)}function En(E){const m=xt(Math.floor(E),0,255).toString(16);return m.length===1?`0${m}`:m}function hi(E,m="#"){const w=es(E.getComponents("rgb")).map(En).join("");return`${m}${w}`}function Hr(E,m="#"){const w=E.getComponents("rgb"),k=[w[0],w[1],w[2],w[3]*255].map(En).join("");return`${m}${k}`}function Mi(E,m){const w=Zn(m==="float"?2:0);return`rgb(${es(E.getComponents("rgb",m)).map(V=>w(V)).join(", ")})`}function $r(E){return m=>Mi(m,E)}function Ai(E,m){const w=Zn(2),k=Zn(m==="float"?2:0);return`rgba(${E.getComponents("rgb",m).map((Ae,We)=>(We===3?w:k)(Ae)).join(", ")})`}function Di(E){return m=>Ai(m,E)}function Pr(E){const m=[Zn(0),je,je];return`hsl(${es(E.getComponents("hsl")).map((k,V)=>m[V](k)).join(", ")})`}function lr(E){const m=[Zn(0),je,je,Zn(2)];return`hsla(${E.getComponents("hsl").map((k,V)=>m[V](k)).join(", ")})`}function Qa(E,m){const w=Zn(m==="float"?2:0),k=["r","g","b"];return`{${es(E.getComponents("rgb",m)).map((Ae,We)=>`${k[We]}: ${w(Ae)}`).join(", ")}}`}function kr(E){return m=>Qa(m,E)}function na(E,m){const w=Zn(2),k=Zn(m==="float"?2:0),V=["r","g","b","a"];return`{${E.getComponents("rgb",m).map((We,kt)=>{const mn=kt===3?w:k;return`${V[kt]}: ${mn(We)}`}).join(", ")}}`}function Da(E){return m=>na(m,E)}const _a=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:hi},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Hr},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:Pr},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:lr},...["int","float"].reduce((E,m)=>[...E,{format:{alpha:!1,mode:"rgb",notation:"func",type:m},stringifier:$r(m)},{format:{alpha:!0,mode:"rgb",notation:"func",type:m},stringifier:Di(m)},{format:{alpha:!1,mode:"rgb",notation:"object",type:m},stringifier:kr(m)},{format:{alpha:!0,mode:"rgb",notation:"object",type:m},stringifier:Da(m)}],[])];function Er(E){return _a.reduce((m,w)=>m||(Ra(w.format,E)?w.stringifier:null),null)}const Sr=C("apl");class Eo{constructor(m,w){this.onValueChange_=this.onValueChange_.bind(this),this.value=w.value,this.value.emitter.on("change",this.onValueChange_),this.element=m.createElement("div"),this.element.classList.add(Sr()),w.viewProps.bindClassModifiers(this.element),w.viewProps.bindTabIndex(this.element);const k=m.createElement("div");k.classList.add(Sr("b")),this.element.appendChild(k);const V=m.createElement("div");V.classList.add(Sr("c")),k.appendChild(V),this.colorElem_=V;const Ae=m.createElement("div");Ae.classList.add(Sr("m")),this.element.appendChild(Ae),this.markerElem_=Ae;const We=m.createElement("div");We.classList.add(Sr("p")),this.markerElem_.appendChild(We),this.previewElem_=We,this.update_()}update_(){const m=this.value.rawValue,w=m.getComponents("rgb"),k=new nn([w[0],w[1],w[2],0],"rgb"),V=new nn([w[0],w[1],w[2],255],"rgb"),Ae=["to right",Ai(k),Ai(V)];this.colorElem_.style.background=`linear-gradient(${Ae.join(",")})`,this.previewElem_.style.backgroundColor=Ai(m);const We=dn(w[3],0,1,0,100);this.markerElem_.style.left=`${We}%`}onValueChange_(){this.update_()}}class Xc{constructor(m,w){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=w.value,this.viewProps=w.viewProps,this.view=new Eo(m,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new li(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(m,w){if(!m.point)return;const k=m.point.x/m.bounds.width,V=this.value.rawValue,[Ae,We,kt]=V.getComponents("hsv");this.value.setRawValue(new nn([Ae,We,kt,k],"hsv"),w)}onPointerDown_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerMove_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerUp_(m){this.handlePointerEvent_(m.data,{forceEmit:!0,last:!0})}onKeyDown_(m){const w=ae(Tr(!0),gt(m));if(w===0)return;const k=this.value.rawValue,[V,Ae,We,kt]=k.getComponents("hsv");this.value.setRawValue(new nn([V,Ae,We,kt+w],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(m){ae(Tr(!0),gt(m))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const dr=C("coltxt");function us(E){const m=E.createElement("select"),w=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return m.appendChild(w.reduce((k,V)=>{const Ae=E.createElement("option");return Ae.textContent=V.text,Ae.value=V.value,k.appendChild(Ae),k},E.createDocumentFragment())),m}class qo{constructor(m,w){this.element=m.createElement("div"),this.element.classList.add(dr()),w.viewProps.bindClassModifiers(this.element);const k=m.createElement("div");k.classList.add(dr("m")),this.modeElem_=us(m),this.modeElem_.classList.add(dr("ms")),k.appendChild(this.modeSelectElement),w.viewProps.bindDisabled(this.modeElem_);const V=m.createElement("div");V.classList.add(dr("mm")),V.appendChild(q(m,"dropdown")),k.appendChild(V),this.element.appendChild(k);const Ae=m.createElement("div");Ae.classList.add(dr("w")),this.element.appendChild(Ae),this.textsElem_=Ae,this.textViews_=w.textViews,this.applyTextViews_(),P(w.colorMode,We=>{this.modeElem_.value=We})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(m){this.textViews_=m,this.applyTextViews_()}applyTextViews_(){ne(this.textsElem_);const m=this.element.ownerDocument;this.textViews_.forEach(w=>{const k=m.createElement("div");k.classList.add(dr("c")),k.appendChild(w.element),this.textsElem_.appendChild(k)})}}function Ep(E){return Zn(E==="float"?2:0)}function dm(E,m,w){const k=ut(E,m)[w];return new Ia({min:0,max:k})}function Kc(E,m,w){return new vr(E,{arrayPosition:w===0?"fst":w===3-1?"lst":"mid",baseStep:Tr(!1),parser:m.parser,props:J.fromObject({draggingScale:m.colorType==="float"?.01:1,formatter:Ep(m.colorType)}),value:W(0,{constraint:dm(m.colorMode,m.colorType,w)}),viewProps:m.viewProps})}class qa{constructor(m,w){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=w.colorType,this.parser_=w.parser,this.value=w.value,this.viewProps=w.viewProps,this.colorMode=W(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(m),this.view=new qo(m,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(m){const w={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},k=[Kc(m,w,0),Kc(m,w,1),Kc(m,w,2)];return k.forEach((V,Ae)=>{se({primary:this.value,secondary:V.value,forward:We=>We.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[Ae],backward:(We,kt)=>{const mn=this.colorMode.rawValue,Dn=We.rawValue.getComponents(mn,this.colorType_);return Dn[Ae]=kt.rawValue,new nn(Zs(es(Dn),Dn[3]),mn,this.colorType_)}})}),k}onModeSelectChange_(m){const w=m.currentTarget;this.colorMode.rawValue=w.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const So=C("hpl");class Oh{constructor(m,w){this.onValueChange_=this.onValueChange_.bind(this),this.value=w.value,this.value.emitter.on("change",this.onValueChange_),this.element=m.createElement("div"),this.element.classList.add(So()),w.viewProps.bindClassModifiers(this.element),w.viewProps.bindTabIndex(this.element);const k=m.createElement("div");k.classList.add(So("c")),this.element.appendChild(k);const V=m.createElement("div");V.classList.add(So("m")),this.element.appendChild(V),this.markerElem_=V,this.update_()}update_(){const m=this.value.rawValue,[w]=m.getComponents("hsv");this.markerElem_.style.backgroundColor=Mi(new nn([w,100,100],"hsv"));const k=dn(w,0,360,0,100);this.markerElem_.style.left=`${k}%`}onValueChange_(){this.update_()}}class K{constructor(m,w){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=w.value,this.viewProps=w.viewProps,this.view=new Oh(m,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new li(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(m,w){if(!m.point)return;const k=dn(xt(m.point.x,0,m.bounds.width),0,m.bounds.width,0,360),V=this.value.rawValue,[,Ae,We,kt]=V.getComponents("hsv");this.value.setRawValue(new nn([k,Ae,We,kt],"hsv"),w)}onPointerDown_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerMove_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerUp_(m){this.handlePointerEvent_(m.data,{forceEmit:!0,last:!0})}onKeyDown_(m){const w=ae(Tr(!1),gt(m));if(w===0)return;const k=this.value.rawValue,[V,Ae,We,kt]=k.getComponents("hsv");this.value.setRawValue(new nn([V+w,Ae,We,kt],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(m){ae(Tr(!1),gt(m))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ru=C("svp"),Sp=64;class jo{constructor(m,w){this.onValueChange_=this.onValueChange_.bind(this),this.value=w.value,this.value.emitter.on("change",this.onValueChange_),this.element=m.createElement("div"),this.element.classList.add(Ru()),w.viewProps.bindClassModifiers(this.element),w.viewProps.bindTabIndex(this.element);const k=m.createElement("canvas");k.height=Sp,k.width=Sp,k.classList.add(Ru("c")),this.element.appendChild(k),this.canvasElement=k;const V=m.createElement("div");V.classList.add(Ru("m")),this.element.appendChild(V),this.markerElem_=V,this.update_()}update_(){const m=Se(this.canvasElement);if(!m)return;const k=this.value.rawValue.getComponents("hsv"),V=this.canvasElement.width,Ae=this.canvasElement.height,We=m.getImageData(0,0,V,Ae),kt=We.data;for(let Ni=0;Ni<Ae;Ni++)for(let Li=0;Li<V;Li++){const Nu=dn(Li,0,V,0,100),Hh=dn(Ni,0,Ae,100,0),ed=Ks(k[0],Nu,Hh),td=(Ni*V+Li)*4;kt[td]=ed[0],kt[td+1]=ed[1],kt[td+2]=ed[2],kt[td+3]=255}m.putImageData(We,0,0);const mn=dn(k[1],0,100,0,100);this.markerElem_.style.left=`${mn}%`;const Dn=dn(k[2],0,100,100,0);this.markerElem_.style.top=`${Dn}%`}onValueChange_(){this.update_()}}class Ti{constructor(m,w){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=w.value,this.viewProps=w.viewProps,this.view=new jo(m,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new li(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(m,w){if(!m.point)return;const k=dn(m.point.x,0,m.bounds.width,0,100),V=dn(m.point.y,0,m.bounds.height,100,0),[Ae,,,We]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new nn([Ae,k,V,We],"hsv"),w)}onPointerDown_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerMove_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerUp_(m){this.handlePointerEvent_(m.data,{forceEmit:!0,last:!0})}onKeyDown_(m){Kt(m.key)&&m.preventDefault();const[w,k,V,Ae]=this.value.rawValue.getComponents("hsv"),We=Tr(!1),kt=ae(We,gt(m)),mn=ae(We,He(m));kt===0&&mn===0||this.value.setRawValue(new nn([w,k+kt,V+mn,Ae],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(m){const w=Tr(!1),k=ae(w,gt(m)),V=ae(w,He(m));k===0&&V===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class AE{constructor(m,w){this.value=w.value,this.viewProps=w.viewProps,this.hPaletteC_=new K(m,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Ti(m,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=w.supportsAlpha?{palette:new Xc(m,{value:this.value,viewProps:this.viewProps}),text:new vr(m,{parser:Fs,baseStep:.1,props:J.fromObject({draggingScale:.01,formatter:Zn(2)}),value:W(0,{constraint:new Ia({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&se({primary:this.value,secondary:this.alphaIcs_.text.value,forward:k=>k.rawValue.getComponents()[3],backward:(k,V)=>{const Ae=k.rawValue.getComponents();return Ae[3]=V.rawValue,new nn(Ae,k.rawValue.mode)}}),this.textC_=new qa(m,{colorType:w.colorType,parser:Fs,value:this.value,viewProps:this.viewProps}),this.view=new jc(m,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:w.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}get textController(){return this.textC_}}const Dv=C("colsw");class bE{constructor(m,w){this.onValueChange_=this.onValueChange_.bind(this),w.value.emitter.on("change",this.onValueChange_),this.value=w.value,this.element=m.createElement("div"),this.element.classList.add(Dv()),w.viewProps.bindClassModifiers(this.element);const k=m.createElement("div");k.classList.add(Dv("sw")),this.element.appendChild(k),this.swatchElem_=k;const V=m.createElement("button");V.classList.add(Dv("b")),w.viewProps.bindDisabled(V),this.element.appendChild(V),this.buttonElement=V,this.update_()}update_(){const m=this.value.rawValue;this.swatchElem_.style.backgroundColor=Hr(m)}onValueChange_(){this.update_()}}class Nh{constructor(m,w){this.value=w.value,this.viewProps=w.viewProps,this.view=new bE(m,{value:this.value,viewProps:this.viewProps})}}class Lv{constructor(m,w){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=w.value,this.viewProps=w.viewProps,this.foldable_=jt.create(w.expanded),this.swatchC_=new Nh(m,{value:this.value,viewProps:this.viewProps});const k=this.swatchC_.view.buttonElement;k.addEventListener("blur",this.onButtonBlur_),k.addEventListener("click",this.onButtonClick_),this.textC_=new qf(m,{parser:w.parser,props:J.fromObject({formatter:w.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Us(m,{foldable:this.foldable_,pickerLayout:w.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=w.pickerLayout==="popup"?new Qf(m,{viewProps:this.viewProps}):null;const V=new AE(m,{colorType:w.colorType,supportsAlpha:w.supportsAlpha,value:this.value,viewProps:this.viewProps});V.view.allFocusableElements.forEach(Ae=>{Ae.addEventListener("blur",this.onPopupChildBlur_),Ae.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=V,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(V.view.element),se({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:Ae=>Ae.rawValue,backward:(Ae,We)=>We.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Rt(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(m){if(!this.popC_)return;const w=this.view.element,k=m.relatedTarget;(!k||!w.contains(k))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(m){if(!this.popC_)return;const w=this.popC_.view.element,k=Lt(m);k&&w.contains(k)||k&&k===this.swatchC_.view.buttonElement&&!Ze(w.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(m){this.popC_?m.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&m.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function yE(E,m){return nn.isColorObject(E)?nn.fromObject(E,m):nn.black(m)}function wE(E){return es(E.getComponents("rgb")).reduce((m,w)=>m<<8|Math.floor(w)&255,0)}function xE(E){return E.getComponents("rgb").reduce((m,w,k)=>{const V=Math.floor(k===3?w*255:w)&255;return m<<8|V},0)>>>0}function CE(E){return new nn([E>>16&255,E>>8&255,E&255],"rgb")}function Jc(E){return new nn([E>>24&255,E>>16&255,E>>8&255,dn(E&255,0,255,0,1)],"rgb")}function EE(E){return typeof E!="number"?nn.black():CE(E)}function SE(E){return typeof E!="number"?nn.black():Jc(E)}function ME(E){const m=Er(E);return m?(w,k)=>{Kr(w,m(k))}:null}function TE(E){const m=E?xE:wE;return(w,k)=>{Kr(w,m(k))}}function IE(E,m,w){const k=m.toRgbaObject(w);E.writeProperty("r",k.r),E.writeProperty("g",k.g),E.writeProperty("b",k.b),E.writeProperty("a",k.a)}function Zc(E,m,w){const k=m.toRgbaObject(w);E.writeProperty("r",k.r),E.writeProperty("g",k.g),E.writeProperty("b",k.b)}function PE(E,m){return(w,k)=>{E?IE(w,k,m):Zc(w,k,m)}}function Ov(E){var m;return!!(E!=null&&E.alpha||!((m=E==null?void 0:E.color)===null||m===void 0)&&m.alpha)}function kE(E){return E?m=>Hr(m,"0x"):m=>hi(m,"0x")}function BE(E){return"color"in E||"view"in E&&E.view==="color"}const RE={id:"input-color-number",type:"input",accept:(E,m)=>{if(typeof E!="number"||!BE(m))return null;const w=$o(m);return w?{initialValue:E,params:w}:null},binding:{reader:E=>Ov(E.params)?SE:EE,equals:nn.equals,writer:E=>TE(Ov(E.params))},controller:E=>{const m=Ov(E.params),w="expanded"in E.params?E.params.expanded:void 0,k="picker"in E.params?E.params.picker:void 0;return new Lv(E.document,{colorType:"int",expanded:w??!1,formatter:kE(m),parser:ci("int"),pickerLayout:k??"popup",supportsAlpha:m,value:E.value,viewProps:E.viewProps})}};function Fh(E){return nn.isRgbaColorObject(E)}function DE(E){return m=>yE(m,E)}function LE(E,m){return w=>E?na(w,m):Qa(w,m)}const Bl={id:"input-color-object",type:"input",accept:(E,m)=>{if(!nn.isColorObject(E))return null;const w=$o(m);return w?{initialValue:E,params:w}:null},binding:{reader:E=>DE(Ri(E.params)),equals:nn.equals,writer:E=>PE(Fh(E.initialValue),Ri(E.params))},controller:E=>{var m;const w=nn.isRgbaColorObject(E.initialValue),k="expanded"in E.params?E.params.expanded:void 0,V="picker"in E.params?E.params.picker:void 0,Ae=(m=Ri(E.params))!==null&&m!==void 0?m:"int";return new Lv(E.document,{colorType:Ae,expanded:k??!1,formatter:LE(w,Ae),parser:ci(Ae),pickerLayout:V??"popup",supportsAlpha:w,value:E.value,viewProps:E.viewProps})}},OE={id:"input-color-string",type:"input",accept:(E,m)=>{if(typeof E!="string"||"view"in m&&m.view==="text")return null;const w=Ii(E,Ri(m));if(!w||!Er(w))return null;const V=$o(m);return V?{initialValue:E,params:V}:null},binding:{reader:E=>{var m;return sn((m=Ri(E.params))!==null&&m!==void 0?m:"int")},equals:nn.equals,writer:E=>{const m=Ii(E.initialValue,Ri(E.params));if(!m)throw v.shouldNeverHappen();const w=ME(m);if(!w)throw v.notBindable();return w}},controller:E=>{const m=Ii(E.initialValue,Ri(E.params));if(!m)throw v.shouldNeverHappen();const w=Er(m);if(!w)throw v.shouldNeverHappen();const k="expanded"in E.params?E.params.expanded:void 0,V="picker"in E.params?E.params.picker:void 0;return new Lv(E.document,{colorType:m.type,expanded:k??!1,formatter:w,parser:ci(m.type),pickerLayout:V??"popup",supportsAlpha:m.alpha,value:E.value,viewProps:E.viewProps})}};class Du{constructor(m){this.components=m.components,this.asm_=m.assembly}constrain(m){const w=this.asm_.toComponents(m).map((k,V)=>{var Ae,We;return(We=(Ae=this.components[V])===null||Ae===void 0?void 0:Ae.constrain(k))!==null&&We!==void 0?We:k});return this.asm_.fromComponents(w)}}const Eb=C("pndtxt");class NE{constructor(m,w){this.textViews=w.textViews,this.element=m.createElement("div"),this.element.classList.add(Eb()),this.textViews.forEach(k=>{const V=m.createElement("div");V.classList.add(Eb("a")),V.appendChild(k.element),this.element.appendChild(V)})}}function FE(E,m,w){return new vr(E,{arrayPosition:w===0?"fst":w===m.axes.length-1?"lst":"mid",baseStep:m.axes[w].baseStep,parser:m.parser,props:m.axes[w].textProps,value:W(0,{constraint:m.axes[w].constraint}),viewProps:m.viewProps})}class pm{constructor(m,w){this.value=w.value,this.viewProps=w.viewProps,this.acs_=w.axes.map((k,V)=>FE(m,w,V)),this.acs_.forEach((k,V)=>{se({primary:this.value,secondary:k.value,forward:Ae=>w.assembly.toComponents(Ae.rawValue)[V],backward:(Ae,We)=>{const kt=w.assembly.toComponents(Ae.rawValue);return kt[V]=We.rawValue,w.assembly.fromComponents(kt)}})}),this.view=new NE(m,{textViews:this.acs_.map(k=>k.view)})}}function Nv(E,m){return"step"in E&&!h(E.step)?new Gc(E.step,m):null}function Sb(E){return!h(E.max)&&!h(E.min)?new Ia({max:E.max,min:E.min}):!h(E.max)||!h(E.min)?new Tu({max:E.max,min:E.min}):null}function zE(E){const m=Ta(E,Ia);if(m)return[m.values.get("min"),m.values.get("max")];const w=Ta(E,Tu);return w?[w.minValue,w.maxValue]:[void 0,void 0]}function Fv(E,m){const w=[],k=Nv(E,m);k&&w.push(k);const V=Sb(E);V&&w.push(V);const Ae=wo(E.options);return Ae&&w.push(Ae),new oc(w)}const Mp={id:"input-number",type:"input",accept:(E,m)=>{if(typeof E!="number")return null;const w=$e,k=X(m,{format:w.optional.function,max:w.optional.number,min:w.optional.number,options:w.optional.custom(zs),step:w.optional.number});return k?{initialValue:E,params:k}:null},binding:{reader:E=>Lh,constraint:E=>Fv(E.params,E.initialValue),writer:E=>Kr},controller:E=>{var m;const w=E.value,k=E.constraint,V=k&&Ta(k,Il);if(V)return new Ho(E.document,{props:new J({options:V.values.value("options")}),value:w,viewProps:E.viewProps});const Ae=(m="format"in E.params?E.params.format:void 0)!==null&&m!==void 0?m:Zn(ws(k,w.rawValue)),We=k&&Ta(k,Ia);return We?new Rn(E.document,{baseStep:Jr(k),parser:Fs,sliderProps:new J({maxValue:We.values.value("max"),minValue:We.values.value("min")}),textProps:J.fromObject({draggingScale:Si(k,w.rawValue),formatter:Ae}),value:w,viewProps:E.viewProps}):new vr(E.document,{baseStep:Jr(k),parser:Fs,props:J.fromObject({draggingScale:Si(k,w.rawValue),formatter:Ae}),value:w,viewProps:E.viewProps})}};class Rl{constructor(m=0,w=0){this.x=m,this.y=w}getComponents(){return[this.x,this.y]}static isObject(m){if(h(m))return!1;const w=m.x,k=m.y;return!(typeof w!="number"||typeof k!="number")}static equals(m,w){return m.x===w.x&&m.y===w.y}toObject(){return{x:this.x,y:this.y}}}const Mb={toComponents:E=>E.getComponents(),fromComponents:E=>new Rl(...E)},zh=C("p2d");class UE{constructor(m,w){this.element=m.createElement("div"),this.element.classList.add(zh()),w.viewProps.bindClassModifiers(this.element),P(w.expanded,D(this.element,zh(void 0,"expanded")));const k=m.createElement("div");k.classList.add(zh("h")),this.element.appendChild(k);const V=m.createElement("button");V.classList.add(zh("b")),V.appendChild(q(m,"p2dpad")),w.viewProps.bindDisabled(V),k.appendChild(V),this.buttonElement=V;const Ae=m.createElement("div");if(Ae.classList.add(zh("t")),k.appendChild(Ae),this.textElement=Ae,w.pickerLayout==="inline"){const We=m.createElement("div");We.classList.add(zh("p")),this.element.appendChild(We),this.pickerElement=We}else this.pickerElement=null}}const La=C("p2dp");class zv{constructor(m,w){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=w.invertsY,this.maxValue_=w.maxValue,this.element=m.createElement("div"),this.element.classList.add(La()),w.layout==="popup"&&this.element.classList.add(La(void 0,"p")),w.viewProps.bindClassModifiers(this.element);const k=m.createElement("div");k.classList.add(La("p")),w.viewProps.bindTabIndex(k),this.element.appendChild(k),this.padElement=k;const V=m.createElementNS(he,"svg");V.classList.add(La("g")),this.padElement.appendChild(V),this.svgElem_=V;const Ae=m.createElementNS(he,"line");Ae.classList.add(La("ax")),Ae.setAttributeNS(null,"x1","0"),Ae.setAttributeNS(null,"y1","50%"),Ae.setAttributeNS(null,"x2","100%"),Ae.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(Ae);const We=m.createElementNS(he,"line");We.classList.add(La("ax")),We.setAttributeNS(null,"x1","50%"),We.setAttributeNS(null,"y1","0"),We.setAttributeNS(null,"x2","50%"),We.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(We);const kt=m.createElementNS(he,"line");kt.classList.add(La("l")),kt.setAttributeNS(null,"x1","50%"),kt.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(kt),this.lineElem_=kt;const mn=m.createElement("div");mn.classList.add(La("m")),this.padElement.appendChild(mn),this.markerElem_=mn,w.value.emitter.on("change",this.onValueChange_),this.value=w.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[m,w]=this.value.rawValue.getComponents(),k=this.maxValue_,V=dn(m,-k,+k,0,100),Ae=dn(w,-k,+k,0,100),We=this.invertsY_?100-Ae:Ae;this.lineElem_.setAttributeNS(null,"x2",`${V}%`),this.lineElem_.setAttributeNS(null,"y2",`${We}%`),this.markerElem_.style.left=`${V}%`,this.markerElem_.style.top=`${We}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Lu(E,m,w){return[ae(m[0],gt(E)),ae(m[1],He(E))*(w?1:-1)]}class Wo{constructor(m,w){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=w.value,this.viewProps=w.viewProps,this.baseSteps_=w.baseSteps,this.maxValue_=w.maxValue,this.invertsY_=w.invertsY,this.view=new zv(m,{invertsY:this.invertsY_,layout:w.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new li(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(m,w){if(!m.point)return;const k=this.maxValue_,V=dn(m.point.x,0,m.bounds.width,-k,+k),Ae=dn(this.invertsY_?m.bounds.height-m.point.y:m.point.y,0,m.bounds.height,-k,+k);this.value.setRawValue(new Rl(V,Ae),w)}onPointerDown_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerMove_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerUp_(m){this.handlePointerEvent_(m.data,{forceEmit:!0,last:!0})}onPadKeyDown_(m){Kt(m.key)&&m.preventDefault();const[w,k]=Lu(m,this.baseSteps_,this.invertsY_);w===0&&k===0||this.value.setRawValue(new Rl(this.value.rawValue.x+w,this.value.rawValue.y+k),{forceEmit:!1,last:!1})}onPadKeyUp_(m){const[w,k]=Lu(m,this.baseSteps_,this.invertsY_);w===0&&k===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class VE{constructor(m,w){var k,V;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=w.value,this.viewProps=w.viewProps,this.foldable_=jt.create(w.expanded),this.popC_=w.pickerLayout==="popup"?new Qf(m,{viewProps:this.viewProps}):null;const Ae=new Wo(m,{baseSteps:[w.axes[0].baseStep,w.axes[1].baseStep],invertsY:w.invertsY,layout:w.pickerLayout,maxValue:w.maxValue,value:this.value,viewProps:this.viewProps});Ae.view.allFocusableElements.forEach(We=>{We.addEventListener("blur",this.onPopupChildBlur_),We.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=Ae,this.textC_=new pm(m,{assembly:Mb,axes:w.axes,parser:w.parser,value:this.value,viewProps:this.viewProps}),this.view=new UE(m,{expanded:this.foldable_.value("expanded"),pickerLayout:w.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(k=this.view.buttonElement)===null||k===void 0||k.addEventListener("blur",this.onPadButtonBlur_),(V=this.view.buttonElement)===null||V===void 0||V.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),se({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:We=>We.rawValue,backward:(We,kt)=>kt.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Rt(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(m){if(!this.popC_)return;const w=this.view.element,k=m.relatedTarget;(!k||!w.contains(k))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(m){if(!this.popC_)return;const w=this.popC_.view.element,k=Lt(m);k&&w.contains(k)||k&&k===this.view.buttonElement&&!Ze(w.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(m){this.popC_?m.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&m.key==="Escape"&&this.view.buttonElement.focus()}}class Uh{constructor(m=0,w=0,k=0){this.x=m,this.y=w,this.z=k}getComponents(){return[this.x,this.y,this.z]}static isObject(m){if(h(m))return!1;const w=m.x,k=m.y,V=m.z;return!(typeof w!="number"||typeof k!="number"||typeof V!="number")}static equals(m,w){return m.x===w.x&&m.y===w.y&&m.z===w.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Uv={toComponents:E=>E.getComponents(),fromComponents:E=>new Uh(...E)};function Tp(E){return Uh.isObject(E)?new Uh(E.x,E.y,E.z):new Uh}function Ou(E,m){E.writeProperty("x",m.x),E.writeProperty("y",m.y),E.writeProperty("z",m.z)}function Tb(E,m){return new Du({assembly:Uv,components:[pc("x"in E?E.x:void 0,m.x),pc("y"in E?E.y:void 0,m.y),pc("z"in E?E.z:void 0,m.z)]})}function Vv(E,m){return{baseStep:Jr(m),constraint:m,textProps:J.fromObject({draggingScale:Si(m,E),formatter:Zn(ws(m,E))})}}const mm={id:"input-point3d",type:"input",accept:(E,m)=>{if(!Uh.isObject(E))return null;const w=$e,k=X(m,{x:w.optional.custom(wr),y:w.optional.custom(wr),z:w.optional.custom(wr)});return k?{initialValue:E,params:k}:null},binding:{reader:E=>Tp,constraint:E=>Tb(E.params,E.initialValue),equals:Uh.equals,writer:E=>Ou},controller:E=>{const m=E.value,w=E.constraint;if(!(w instanceof Du))throw v.shouldNeverHappen();return new pm(E.document,{assembly:Uv,axes:[Vv(m.rawValue.x,w.components[0]),Vv(m.rawValue.y,w.components[1]),Vv(m.rawValue.z,w.components[2])],parser:Fs,value:m,viewProps:E.viewProps})}};class Kf{constructor(m=0,w=0,k=0,V=0){this.x=m,this.y=w,this.z=k,this.w=V}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(m){if(h(m))return!1;const w=m.x,k=m.y,V=m.z,Ae=m.w;return!(typeof w!="number"||typeof k!="number"||typeof V!="number"||typeof Ae!="number")}static equals(m,w){return m.x===w.x&&m.y===w.y&&m.z===w.z&&m.w===w.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Hv={toComponents:E=>E.getComponents(),fromComponents:E=>new Kf(...E)};function Aa(E){return Kf.isObject(E)?new Kf(E.x,E.y,E.z,E.w):new Kf}function $v(E,m){E.writeProperty("x",m.x),E.writeProperty("y",m.y),E.writeProperty("z",m.z),E.writeProperty("w",m.w)}function Ib(E,m){return new Du({assembly:Hv,components:[pc("x"in E?E.x:void 0,m.x),pc("y"in E?E.y:void 0,m.y),pc("z"in E?E.z:void 0,m.z),pc("w"in E?E.w:void 0,m.w)]})}function dc(E,m){return{baseStep:Jr(m),constraint:m,textProps:J.fromObject({draggingScale:Si(m,E),formatter:Zn(ws(m,E))})}}const Gv={id:"input-point4d",type:"input",accept:(E,m)=>{if(!Kf.isObject(E))return null;const w=$e,k=X(m,{x:w.optional.custom(wr),y:w.optional.custom(wr),z:w.optional.custom(wr),w:w.optional.custom(wr)});return k?{initialValue:E,params:k}:null},binding:{reader:E=>Aa,constraint:E=>Ib(E.params,E.initialValue),equals:Kf.equals,writer:E=>$v},controller:E=>{const m=E.value,w=E.constraint;if(!(w instanceof Du))throw v.shouldNeverHappen();return new pm(E.document,{assembly:Hv,axes:m.rawValue.getComponents().map((k,V)=>dc(k,w.components[V])),parser:Fs,value:m,viewProps:E.viewProps})}};function gm(E){const m=[],w=wo(E.options);return w&&m.push(w),new oc(m)}const Vh={id:"input-string",type:"input",accept:(E,m)=>{if(typeof E!="string")return null;const k=X(m,{options:$e.optional.custom(zs)});return k?{initialValue:E,params:k}:null},binding:{reader:E=>Y,constraint:E=>gm(E.params),writer:E=>Kr},controller:E=>{const m=E.document,w=E.value,k=E.constraint,V=k&&Ta(k,Il);return V?new Ho(m,{props:new J({options:V.values.value("options")}),value:w,viewProps:E.viewProps}):new qf(m,{parser:Ae=>Ae,props:J.fromObject({formatter:Ee}),value:w,viewProps:E.viewProps})}},Jf={monitor:{defaultInterval:200,defaultLineCount:3}},Oa=C("mll");class Qv{constructor(m,w){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=w.formatter,this.element=m.createElement("div"),this.element.classList.add(Oa()),w.viewProps.bindClassModifiers(this.element);const k=m.createElement("textarea");k.classList.add(Oa("i")),k.style.height=`calc(var(--bld-us) * ${w.lineCount})`,k.readOnly=!0,w.viewProps.bindDisabled(k),this.element.appendChild(k),this.textareaElem_=k,w.value.emitter.on("change",this.onValueUpdate_),this.value=w.value,this.update_()}update_(){const m=this.textareaElem_,w=m.scrollTop===m.scrollHeight-m.clientHeight,k=[];this.value.rawValue.forEach(V=>{V!==void 0&&k.push(this.formatter_(V))}),m.textContent=k.join(`
`),w&&(m.scrollTop=m.scrollHeight)}onValueUpdate_(){this.update_()}}class qv{constructor(m,w){this.value=w.value,this.viewProps=w.viewProps,this.view=new Qv(m,{formatter:w.formatter,lineCount:w.lineCount,value:this.value,viewProps:this.viewProps})}}const Pb=C("sgl");class HE{constructor(m,w){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=w.formatter,this.element=m.createElement("div"),this.element.classList.add(Pb()),w.viewProps.bindClassModifiers(this.element);const k=m.createElement("input");k.classList.add(Pb("i")),k.readOnly=!0,k.type="text",w.viewProps.bindDisabled(k),this.element.appendChild(k),this.inputElement=k,w.value.emitter.on("change",this.onValueUpdate_),this.value=w.value,this.update_()}update_(){const m=this.value.rawValue,w=m[m.length-1];this.inputElement.value=w!==void 0?this.formatter_(w):""}onValueUpdate_(){this.update_()}}class Ip{constructor(m,w){this.value=w.value,this.viewProps=w.viewProps,this.view=new HE(m,{formatter:w.formatter,value:this.value,viewProps:this.viewProps})}}const $E={id:"monitor-bool",type:"monitor",accept:(E,m)=>{if(typeof E!="boolean")return null;const k=X(m,{lineCount:$e.optional.number});return k?{initialValue:E,params:k}:null},binding:{reader:E=>cc},controller:E=>{var m;return E.value.rawValue.length===1?new Ip(E.document,{formatter:Pa,value:E.value,viewProps:E.viewProps}):new qv(E.document,{formatter:Pa,lineCount:(m=E.params.lineCount)!==null&&m!==void 0?m:Jf.monitor.defaultLineCount,value:E.value,viewProps:E.viewProps})}},Yo=C("grl");class kb{constructor(m,w){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=m.createElement("div"),this.element.classList.add(Yo()),w.viewProps.bindClassModifiers(this.element),this.formatter_=w.formatter,this.props_=w.props,this.cursor_=w.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const k=m.createElementNS(he,"svg");k.classList.add(Yo("g")),k.style.height=`calc(var(--bld-us) * ${w.lineCount})`,this.element.appendChild(k),this.svgElem_=k;const V=m.createElementNS(he,"polyline");this.svgElem_.appendChild(V),this.lineElem_=V;const Ae=m.createElement("div");Ae.classList.add(Yo("t"),C("tt")()),this.element.appendChild(Ae),this.tooltipElem_=Ae,w.value.emitter.on("change",this.onValueUpdate_),this.value=w.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const m=this.svgElem_.getBoundingClientRect(),w=this.value.rawValue.length-1,k=this.props_.get("minValue"),V=this.props_.get("maxValue"),Ae=[];this.value.rawValue.forEach((Ni,Li)=>{if(Ni===void 0)return;const Nu=dn(Li,0,w,0,m.width),Hh=dn(Ni,k,V,m.height,0);Ae.push([Nu,Hh].join(","))}),this.lineElem_.setAttributeNS(null,"points",Ae.join(" "));const We=this.tooltipElem_,kt=this.value.rawValue[this.cursor_.rawValue];if(kt===void 0){We.classList.remove(Yo("t","a"));return}const mn=dn(this.cursor_.rawValue,0,w,0,m.width),Dn=dn(kt,k,V,m.height,0);We.style.left=`${mn}px`,We.style.top=`${Dn}px`,We.textContent=`${this.formatter_(kt)}`,We.classList.contains(Yo("t","a"))||(We.classList.add(Yo("t","a"),Yo("t","in")),xe(We),We.classList.remove(Yo("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class GE{constructor(m,w){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=w.props,this.value=w.value,this.viewProps=w.viewProps,this.cursor_=W(-1),this.view=new kb(m,{cursor:this.cursor_,formatter:w.formatter,lineCount:w.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!Ze(m))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const k=new li(this.view.element);k.emitter.on("down",this.onGraphPointerDown_),k.emitter.on("move",this.onGraphPointerMove_),k.emitter.on("up",this.onGraphPointerUp_)}}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(m){const w=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(dn(m.offsetX,0,w.width,0,this.value.rawValue.length))}onGraphPointerDown_(m){this.onGraphPointerMove_(m)}onGraphPointerMove_(m){if(!m.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(dn(m.data.point.x,0,m.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function jv(E){return"format"in E&&!h(E.format)?E.format:Zn(2)}function Pp(E){var m;return E.value.rawValue.length===1?new Ip(E.document,{formatter:jv(E.params),value:E.value,viewProps:E.viewProps}):new qv(E.document,{formatter:jv(E.params),lineCount:(m=E.params.lineCount)!==null&&m!==void 0?m:Jf.monitor.defaultLineCount,value:E.value,viewProps:E.viewProps})}function QE(E){var m,w,k;return new GE(E.document,{formatter:jv(E.params),lineCount:(m=E.params.lineCount)!==null&&m!==void 0?m:Jf.monitor.defaultLineCount,props:J.fromObject({maxValue:(w="max"in E.params?E.params.max:null)!==null&&w!==void 0?w:100,minValue:(k="min"in E.params?E.params.min:null)!==null&&k!==void 0?k:0}),value:E.value,viewProps:E.viewProps})}function Bb(E){return"view"in E&&E.view==="graph"}const Wv={id:"monitor-number",type:"monitor",accept:(E,m)=>{if(typeof E!="number")return null;const w=$e,k=X(m,{format:w.optional.function,lineCount:w.optional.number,max:w.optional.number,min:w.optional.number,view:w.optional.string});return k?{initialValue:E,params:k}:null},binding:{defaultBufferSize:E=>Bb(E)?64:1,reader:E=>Lh},controller:E=>Bb(E.params)?QE(E):Pp(E)},Rb={id:"monitor-string",type:"monitor",accept:(E,m)=>{if(typeof E!="string")return null;const w=$e,k=X(m,{lineCount:w.optional.number,multiline:w.optional.boolean});return k?{initialValue:E,params:k}:null},binding:{reader:E=>Y},controller:E=>{var m;const w=E.value;return w.rawValue.length>1||"multiline"in E.params&&E.params.multiline?new qv(E.document,{formatter:Ee,lineCount:(m=E.params.lineCount)!==null&&m!==void 0?m:Jf.monitor.defaultLineCount,value:w,viewProps:E.viewProps}):new Ip(E.document,{formatter:Ee,value:w,viewProps:E.viewProps})}};function qE(E,m){var w;const k=E.accept(m.target.read(),m.params);if(h(k))return null;const V=$e,Ae={target:m.target,initialValue:k.initialValue,params:k.params},We=E.binding.reader(Ae),kt=E.binding.constraint?E.binding.constraint(Ae):void 0,mn=W(We(k.initialValue),{constraint:kt,equals:E.binding.equals}),Dn=new $c({reader:We,target:m.target,value:mn,writer:E.binding.writer(Ae)}),Ni=V.optional.boolean(m.params.disabled).value,Li=V.optional.boolean(m.params.hidden).value,Nu=E.controller({constraint:kt,document:m.document,initialValue:k.initialValue,params:k.params,value:Dn.value,viewProps:Ye.create({disabled:Ni,hidden:Li})});return new oi(m.document,{binding:Dn,blade:Ft(),props:J.fromObject({label:"label"in m.params?(w=V.optional.string(m.params.label).value)!==null&&w!==void 0?w:null:m.target.key}),valueController:Nu})}function jE(E,m){return m===0?new Tl:new Ws(E,m??Jf.monitor.defaultInterval)}function WE(E,m){var w,k,V;const Ae=$e,We=E.accept(m.target.read(),m.params);if(h(We))return null;const kt={target:m.target,initialValue:We.initialValue,params:We.params},mn=E.binding.reader(kt),Dn=(k=(w=Ae.optional.number(m.params.bufferSize).value)!==null&&w!==void 0?w:E.binding.defaultBufferSize&&E.binding.defaultBufferSize(We.params))!==null&&k!==void 0?k:1,Ni=Ae.optional.number(m.params.interval).value,Li=new Ph({reader:mn,target:m.target,ticker:jE(m.document,Ni),value:ac(Dn)}),Nu=Ae.optional.boolean(m.params.disabled).value,Hh=Ae.optional.boolean(m.params.hidden).value,ed=E.controller({document:m.document,params:We.params,value:Li.value,viewProps:Ye.create({disabled:Nu,hidden:Hh})});return new er(m.document,{binding:Li,blade:Ft(),props:J.fromObject({label:"label"in m.params?(V=Ae.optional.string(m.params.label).value)!==null&&V!==void 0?V:null:m.target.key}),valueController:ed})}class Db{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(m){m.type==="blade"?this.pluginsMap_.blades.unshift(m):m.type==="input"?this.pluginsMap_.inputs.unshift(m):m.type==="monitor"&&this.pluginsMap_.monitors.unshift(m)}createInput(m,w,k){const V=w.read();if(h(V))throw new v({context:{key:w.key},type:"nomatchingcontroller"});const Ae=this.pluginsMap_.inputs.reduce((We,kt)=>We??qE(kt,{document:m,target:w,params:k}),null);if(Ae)return Ae;throw new v({context:{key:w.key},type:"nomatchingcontroller"})}createMonitor(m,w,k){const V=this.pluginsMap_.monitors.reduce((Ae,We)=>Ae??WE(We,{document:m,params:k,target:w}),null);if(V)return V;throw new v({context:{key:w.key},type:"nomatchingcontroller"})}createBlade(m,w){const k=this.pluginsMap_.blades.reduce((V,Ae)=>V??Ja(Ae,{document:m,params:w}),null);if(!k)throw new v({type:"nomatchingview",context:{params:w}});return k}createBladeApi(m){if(m instanceof oi)return new Vr(m);if(m instanceof er)return new As(m);if(m instanceof vt)return new Ka(m,this);const w=this.pluginsMap_.blades.reduce((k,V)=>k??V.api({controller:m,pool:this}),null);if(!w)throw v.shouldNeverHappen();return w}}function Yv(){const E=new Db;return[Fb,mm,Gv,Vh,Mp,OE,Bl,RE,qc,$E,Rb,Wv,Nt,_n,tr,fr].forEach(m=>{E.register(m)}),E}function YE(E){return Rl.isObject(E)?new Rl(E.x,E.y):new Rl}function Xv(E,m){E.writeProperty("x",m.x),E.writeProperty("y",m.y)}function pc(E,m){if(!E)return;const w=[],k=Nv(E,m);k&&w.push(k);const V=Sb(E);return V&&w.push(V),new oc(w)}function Lb(E,m){return new Du({assembly:Mb,components:[pc("x"in E?E.x:void 0,m.x),pc("y"in E?E.y:void 0,m.y)]})}function Kv(E,m){const[w,k]=E?zE(E):[];if(!h(w)||!h(k))return Math.max(Math.abs(w??0),Math.abs(k??0));const V=Jr(E);return Math.max(Math.abs(V)*10,Math.abs(m)*10)}function vm(E,m){const w=m instanceof Du?m.components[0]:void 0,k=m instanceof Du?m.components[1]:void 0,V=Kv(w,E.x),Ae=Kv(k,E.y);return Math.max(V,Ae)}function Ob(E,m){return{baseStep:Jr(m),constraint:m,textProps:J.fromObject({draggingScale:Si(m,E),formatter:Zn(ws(m,E))})}}function Nb(E){if(!("y"in E))return!1;const m=E.y;return m&&"inverted"in m?!!m.inverted:!1}const Fb={id:"input-point2d",type:"input",accept:(E,m)=>{if(!Rl.isObject(E))return null;const w=$e,k=X(m,{expanded:w.optional.boolean,picker:w.optional.custom(yn),x:w.optional.custom(wr),y:w.optional.object({inverted:w.optional.boolean,max:w.optional.number,min:w.optional.number,step:w.optional.number})});return k?{initialValue:E,params:k}:null},binding:{reader:E=>YE,constraint:E=>Lb(E.params,E.initialValue),equals:Rl.equals,writer:E=>Xv},controller:E=>{const m=E.document,w=E.value,k=E.constraint;if(!(k instanceof Du))throw v.shouldNeverHappen();const V="expanded"in E.params?E.params.expanded:void 0,Ae="picker"in E.params?E.params.picker:void 0;return new VE(m,{axes:[Ob(w.rawValue.x,k.components[0]),Ob(w.rawValue.y,k.components[1])],expanded:V??!1,invertsY:Nb(E.params),maxValue:vm(w.rawValue,k),parser:Fs,pickerLayout:Ae??"popup",value:w,viewProps:E.viewProps})}};class zb extends r{constructor(m){super(m),this.emitter_=new y,this.controller_.valueController.value.emitter.on("change",w=>{this.emitter_.emit("change",{event:new a(this,w.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(m){this.controller_.props.set("label",m)}get options(){return this.controller_.valueController.props.get("options")}set options(m){this.controller_.valueController.props.set("options",m)}get value(){return this.controller_.valueController.value.rawValue}set value(m){this.controller_.valueController.value.rawValue=m}on(m,w){const k=w.bind(this);return this.emitter_.on(m,V=>{k(V.event)}),this}}class Jv extends r{constructor(m){super(m),this.emitter_=new y,this.controller_.valueController.value.emitter.on("change",w=>{this.emitter_.emit("change",{event:new a(this,w.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(m){this.controller_.props.set("label",m)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(m){this.controller_.valueController.sliderController.props.set("maxValue",m)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(m){this.controller_.valueController.sliderController.props.set("minValue",m)}get value(){return this.controller_.valueController.value.rawValue}set value(m){this.controller_.valueController.value.rawValue=m}on(m,w){const k=w.bind(this);return this.emitter_.on(m,V=>{k(V.event)}),this}}class Ub extends r{constructor(m){super(m),this.emitter_=new y,this.controller_.valueController.value.emitter.on("change",w=>{this.emitter_.emit("change",{event:new a(this,w.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(m){this.controller_.props.set("label",m)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(m){this.controller_.valueController.props.set("formatter",m)}get value(){return this.controller_.valueController.value.rawValue}set value(m){this.controller_.valueController.value.rawValue=m}on(m,w){const k=w.bind(this);return this.emitter_.on(m,V=>{k(V.event)}),this}}const Zv=function(){return{id:"list",type:"blade",accept(E){const m=$e,w=X(E,{options:m.required.custom(zs),value:m.required.raw,view:m.required.constant("list"),label:m.optional.string});return w?{params:w}:null},controller(E){const m=new Il(Vn(E.params.options)),w=W(E.params.value,{constraint:m}),k=new Ho(E.document,{props:new J({options:m.values.value("options")}),value:w,viewProps:E.viewProps});return new fn(E.document,{blade:E.blade,props:J.fromObject({label:E.params.label}),valueController:k})},api(E){return!(E.controller instanceof fn)||!(E.controller.valueController instanceof Ho)?null:new zb(E.controller)}}}();function Vb(E){return E.reduce((m,w)=>Object.assign(m,{[w.presetKey]:w.read()}),{})}function e_(E,m){E.forEach(w=>{const k=m[w.target.presetKey];k!==void 0&&w.writer(w.target,w.reader(k))})}class XE extends Sl{constructor(m,w){super(m,w)}get element(){return this.controller_.view.element}importPreset(m){const w=this.controller_.rackController.rack.find(oi).map(k=>k.binding);e_(w,m),this.refresh()}exportPreset(){const m=this.controller_.rackController.rack.find(oi).map(w=>w.binding.target);return Vb(m)}refresh(){this.controller_.rackController.rack.find(oi).forEach(m=>{m.binding.read()}),this.controller_.rackController.rack.find(er).forEach(m=>{m.binding.read()})}}class t_ extends en{constructor(m,w){super(m,{expanded:w.expanded,blade:w.blade,props:w.props,root:!0,viewProps:w.viewProps})}}const di={id:"slider",type:"blade",accept(E){const m=$e,w=X(E,{max:m.required.number,min:m.required.number,view:m.required.constant("slider"),format:m.optional.function,label:m.optional.string,value:m.optional.number});return w?{params:w}:null},controller(E){var m,w;const k=(m=E.params.value)!==null&&m!==void 0?m:0,V=new Ia({max:E.params.max,min:E.params.min}),Ae=new Rn(E.document,{baseStep:1,parser:Fs,sliderProps:new J({maxValue:V.values.value("max"),minValue:V.values.value("min")}),textProps:J.fromObject({draggingScale:Si(void 0,k),formatter:(w=E.params.format)!==null&&w!==void 0?w:Xf}),value:W(k,{constraint:V}),viewProps:E.viewProps});return new fn(E.document,{blade:E.blade,props:J.fromObject({label:E.params.label}),valueController:Ae})},api(E){return!(E.controller instanceof fn)||!(E.controller.valueController instanceof Rn)?null:new Jv(E.controller)}},KE=function(){return{id:"text",type:"blade",accept(E){const m=$e,w=X(E,{parse:m.required.function,value:m.required.raw,view:m.required.constant("text"),format:m.optional.function,label:m.optional.string});return w?{params:w}:null},controller(E){var m;const w=new qf(E.document,{parser:E.params.parse,props:J.fromObject({formatter:(m=E.params.format)!==null&&m!==void 0?m:k=>String(k)}),value:W(E.params.value),viewProps:E.viewProps});return new fn(E.document,{blade:E.blade,props:J.fromObject({label:E.params.label}),valueController:w})},api(E){return!(E.controller instanceof fn)||!(E.controller.valueController instanceof qf)?null:new Ub(E.controller)}}}();function JE(E){const m=E.createElement("div");return m.classList.add(C("dfw")()),E.body&&E.body.appendChild(m),m}function Zf(E,m,w){if(E.querySelector(`style[data-tp-style=${m}]`))return;const k=E.createElement("style");k.dataset.tpStyle=m,k.textContent=w,E.head.appendChild(k)}class Hb extends XE{constructor(m){var w,k;const V=m??{},Ae=(w=V.document)!==null&&w!==void 0?w:te(),We=Yv(),kt=new t_(Ae,{expanded:V.expanded,blade:Ft(),props:J.fromObject({title:V.title}),viewProps:Ye.create()});super(kt,We),this.pool_=We,this.containerElem_=(k=V.container)!==null&&k!==void 0?k:JE(Ae),this.containerElem_.appendChild(this.element),this.doc_=Ae,this.usesDefaultWrapper_=!V.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw v.alreadyDisposed();return this.doc_}dispose(){const m=this.containerElem_;if(!m)throw v.alreadyDisposed();if(this.usesDefaultWrapper_){const w=m.parentElement;w&&w.removeChild(m)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(m){("plugin"in m?[m.plugin]:"plugins"in m?m.plugins:[]).forEach(k=>{this.pool_.register(k),this.embedPluginStyle_(k)})}embedPluginStyle_(m){m.css&&Zf(this.document,`plugin-${m.id}`,m.css)}setUpDefaultPlugins_(){Zf(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach(m=>{this.embedPluginStyle_(m)}),this.registerPlugin({plugins:[di,Zv,fr,KE]})}}const ZE=new n("3.1.10");t.BladeApi=r,t.ButtonApi=_,t.FolderApi=Sl,t.InputBindingApi=Vr,t.ListApi=zb,t.MonitorBindingApi=As,t.Pane=Hb,t.SeparatorApi=Tn,t.SliderApi=Jv,t.TabApi=bo,t.TabPageApi=Bn,t.TextApi=Ub,t.TpChangeEvent=a,t.VERSION=ZE,Object.defineProperty(t,"__esModule",{value:!0})})})(jR,jR.exports);var OS={},Eh={};Object.defineProperty(Eh,"__esModule",{value:!0});Eh.BladeApi=void 0;var ret=function(){function i(e){this.controller_=e}return Object.defineProperty(i.prototype,"element",{get:function(){return this.controller_.view.element},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"disabled",{get:function(){return this.controller_.viewProps.get("disabled")},set:function(e){this.controller_.viewProps.set("disabled",e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hidden",{get:function(){return this.controller_.viewProps.get("hidden")},set:function(e){this.controller_.viewProps.set("hidden",e)},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this.controller_.viewProps.set("disposed",!0)},i}();Eh.BladeApi=ret;var pV={};Object.defineProperty(pV,"__esModule",{value:!0});var mV={};Object.defineProperty(mV,"__esModule",{value:!0});var Ua={},MC=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ua,"__esModule",{value:!0});Ua.TpTabSelectEvent=Ua.TpFoldEvent=Ua.TpUpdateEvent=Ua.TpChangeEvent=Ua.TpEvent=void 0;var SA=function(){function i(e){this.target=e}return i}();Ua.TpEvent=SA;var set=function(i){MC(e,i);function e(t,n,r,s){var a=i.call(this,t)||this;return a.value=n,a.presetKey=r,a.last=s??!0,a}return e}(SA);Ua.TpChangeEvent=set;var aet=function(i){MC(e,i);function e(t,n,r){var s=i.call(this,t)||this;return s.value=n,s.presetKey=r,s}return e}(SA);Ua.TpUpdateEvent=aet;var oet=function(i){MC(e,i);function e(t,n){var r=i.call(this,t)||this;return r.expanded=n,r}return e}(SA);Ua.TpFoldEvent=oet;var cet=function(i){MC(e,i);function e(t,n){var r=i.call(this,t)||this;return r.index=n,r}return e}(SA);Ua.TpTabSelectEvent=cet;var MA={},xl={},vi={};Object.defineProperty(vi,"__esModule",{value:!0});vi.isPropertyWritable=vi.deepEqualsArray=vi.isEmpty=vi.forceCast=void 0;function uet(i){return i}vi.forceCast=uet;function het(i){return i==null}vi.isEmpty=het;function fet(i,e){if(i.length!==e.length)return!1;for(var t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}vi.deepEqualsArray=fet;function det(i,e){var t=i;do{var n=Object.getOwnPropertyDescriptor(t,e);if(n&&(n.set!==void 0||n.writable===!0))return!0;t=Object.getPrototypeOf(t)}while(t!==null);return!1}vi.isPropertyWritable=det;Object.defineProperty(xl,"__esModule",{value:!0});xl.TpError=void 0;var pet=vi,met={alreadydisposed:function(){return"View has been already disposed"},invalidparams:function(i){return"Invalid parameters for '".concat(i.name,"'")},nomatchingcontroller:function(i){return"No matching controller for '".concat(i.key,"'")},nomatchingview:function(i){return"No matching view for '".concat(JSON.stringify(i.params),"'")},notbindable:function(){return"Value is not bindable"},propertynotfound:function(i){return"Property '".concat(i.name,"' not found")},shouldneverhappen:function(){return"This error should never happen"}},get=function(){function i(e){var t;this.message=(t=met[e.type]((0,pet.forceCast)(e.context)))!==null&&t!==void 0?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}return i.alreadyDisposed=function(){return new i({type:"alreadydisposed"})},i.notBindable=function(){return new i({type:"notbindable"})},i.propertyNotFound=function(e){return new i({type:"propertynotfound",context:{name:e}})},i.shouldNeverHappen=function(){return new i({type:"shouldneverhappen"})},i}();xl.TpError=get;Object.defineProperty(MA,"__esModule",{value:!0});MA.BindingTarget=void 0;var WR=xl,vet=function(){function i(e,t,n){this.obj_=e,this.key_=t,this.presetKey_=n??t}return i.isBindable=function(e){return!(e===null||typeof e!="object"&&typeof e!="function")},Object.defineProperty(i.prototype,"key",{get:function(){return this.key_},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"presetKey",{get:function(){return this.presetKey_},enumerable:!1,configurable:!0}),i.prototype.read=function(){return this.obj_[this.key_]},i.prototype.write=function(e){this.obj_[this.key_]=e},i.prototype.writeProperty=function(e,t){var n=this.read();if(!i.isBindable(n))throw WR.TpError.notBindable();if(!(e in n))throw WR.TpError.propertyNotFound(e);n[e]=t},i}();MA.BindingTarget=vet;var TA={},_et=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(TA,"__esModule",{value:!0});TA.ButtonApi=void 0;var Aet=Eh,bet=Ua,yet=function(i){_et(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){var t;return(t=this.controller_.valueController.props.get("title"))!==null&&t!==void 0?t:""},set:function(t){this.controller_.valueController.props.set("title",t)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n){var r=this,s=n.bind(this),a=this.controller_.valueController.emitter;return a.on(t,function(){s(new bet.TpEvent(r))}),this},e}(Aet.BladeApi);TA.ButtonApi=yet;var IA={},qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.Emitter=void 0;var wet=function(){function i(){this.observers_={}}return i.prototype.on=function(e,t){var n=this.observers_[e];return n||(n=this.observers_[e]=[]),n.push({handler:t}),this},i.prototype.off=function(e,t){var n=this.observers_[e];return n&&(this.observers_[e]=n.filter(function(r){return r.handler!==t})),this},i.prototype.emit=function(e,t){var n=this.observers_[e];n&&n.forEach(function(r){r.handler(t)})},i}();qs.Emitter=wet;var PA={},Wi={};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.ClassName=void 0;var xet="tp";function Cet(i){var e=function(t,n){return[xet,"-",i,"v",t?"_".concat(t):"",n?"-".concat(n):""].join("")};return e}Wi.ClassName=Cet;var bl={},Sa={};Object.defineProperty(Sa,"__esModule",{value:!0});Sa.bindValueMap=Sa.bindValue=void 0;function Eet(i,e){return function(t){return e(i(t))}}function Met(i){return i.rawValue}function gV(i,e){i.emitter.on("change",Eet(Met,e)),e(i.rawValue)}Sa.bindValue=gV;function Tet(i,e,t){gV(i.value(e),t)}Sa.bindValueMap=Tet;Object.defineProperty(bl,"__esModule",{value:!0});bl.bindValueToTextContent=bl.valueToClassName=void 0;var Iet=Sa;function Pet(i,e,t){t?i.classList.add(e):i.classList.remove(e)}function ket(i,e){return function(t){Pet(i,e,t)}}bl.valueToClassName=ket;function Bet(i,e){(0,Iet.bindValue)(i,function(t){e.textContent=t??""})}bl.bindValueToTextContent=Bet;Object.defineProperty(PA,"__esModule",{value:!0});PA.ButtonView=void 0;var Ret=Wi,Det=bl,NS=(0,Ret.ClassName)("btn"),Let=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(NS()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("button");n.classList.add(NS("b")),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;var r=e.createElement("div");r.classList.add(NS("t")),(0,Det.bindValueToTextContent)(t.props.value("title"),r),this.buttonElement.appendChild(r)}return i}();PA.ButtonView=Let;Object.defineProperty(IA,"__esModule",{value:!0});IA.ButtonController=void 0;var Oet=qs,Net=PA,Fet=function(){function i(e,t){this.emitter=new Oet.Emitter,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Net.ButtonView(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return i.prototype.onClick_=function(){this.emitter.emit("click",{sender:this})},i}();IA.ButtonController=Fet;var kA={},Ur={},vo={},TC={};Object.defineProperty(TC,"__esModule",{value:!0});TC.BoundValue=void 0;var zet=qs,Uet=function(){function i(e,t){var n;this.constraint_=t==null?void 0:t.constraint,this.equals_=(n=t==null?void 0:t.equals)!==null&&n!==void 0?n:function(r,s){return r===s},this.emitter=new zet.Emitter,this.rawValue_=e}return Object.defineProperty(i.prototype,"constraint",{get:function(){return this.constraint_},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rawValue",{get:function(){return this.rawValue_},set:function(e){this.setRawValue(e,{forceEmit:!1,last:!0})},enumerable:!1,configurable:!0}),i.prototype.setRawValue=function(e,t){var n=t??{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(e):e,s=this.rawValue_,a=!this.equals_(s,r);!a&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:n,previousRawValue:s,rawValue:r,sender:this}))},i}();TC.BoundValue=Uet;var IC={};Object.defineProperty(IC,"__esModule",{value:!0});IC.PrimitiveValue=void 0;var Vet=qs,Het=function(){function i(e){this.emitter=new Vet.Emitter,this.value_=e}return Object.defineProperty(i.prototype,"rawValue",{get:function(){return this.value_},set:function(e){this.setRawValue(e,{forceEmit:!1,last:!0})},enumerable:!1,configurable:!0}),i.prototype.setRawValue=function(e,t){var n=t??{forceEmit:!1,last:!0},r=this.value_;r===e&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:n,previousRawValue:r,rawValue:this.value_,sender:this}))},i}();IC.PrimitiveValue=Het;Object.defineProperty(vo,"__esModule",{value:!0});vo.createValue=void 0;var $et=TC,Get=IC;function Qet(i,e){var t=e==null?void 0:e.constraint,n=e==null?void 0:e.equals;return!t&&!n?new Get.PrimitiveValue(i):new $et.BoundValue(i,e)}vo.createValue=Qet;Object.defineProperty(Ur,"__esModule",{value:!0});Ur.ValueMap=void 0;var qet=qs,jet=vo,Wet=function(){function i(e){var t=this;this.emitter=new qet.Emitter,this.valMap_=e;var n=function(a){var o=r.valMap_[a];o.emitter.on("change",function(){t.emitter.emit("change",{key:a,sender:t})})},r=this;for(var s in this.valMap_)n(s)}return i.createCore=function(e){var t=Object.keys(e);return t.reduce(function(n,r){var s;return Object.assign(n,(s={},s[r]=(0,jet.createValue)(e[r]),s))},{})},i.fromObject=function(e){var t=this.createCore(e);return new i(t)},i.prototype.get=function(e){return this.valMap_[e].rawValue},i.prototype.set=function(e,t){this.valMap_[e].rawValue=t},i.prototype.value=function(e){return this.valMap_[e]},i}();Ur.ValueMap=Wet;var fa={};(function(i){var e=bt&&bt.__assign||function(){return e=Object.assign||function(u){for(var h,f=1,d=arguments.length;f<d;f++){h=arguments[f];for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(u[g]=h[g])}return u},e.apply(this,arguments)},t=bt&&bt.__spreadArray||function(u,h,f){if(f||arguments.length===2)for(var d=0,g=h.length,v;d<g;d++)(v||!(d in h))&&(v||(v=Array.prototype.slice.call(h,0,d)),v[d]=h[d]);return u.concat(v||Array.prototype.slice.call(h))};Object.defineProperty(i,"__esModule",{value:!0}),i.parseParams=i.ParamsParsers=void 0;var n=vi;function r(u,h){var f=Object.keys(h),d=f.reduce(function(g,v){var A;if(g!==void 0){var _=h[v],y=_(u[v]);return y.succeeded?e(e({},g),(A={},A[v]=y.value,A)):void 0}},{});return(0,n.forceCast)(d)}function s(u,h){return u.reduce(function(f,d){if(f!==void 0){var g=h(d);if(!(!g.succeeded||g.value===void 0))return t(t([],f,!0),[g.value],!1)}},[])}function a(u){return u===null?!1:typeof u=="object"}function o(u){return function(h){return function(f){if(!h&&f===void 0)return{succeeded:!1,value:void 0};if(h&&f===void 0)return{succeeded:!0,value:void 0};var d=u(f);return d!==void 0?{succeeded:!0,value:d}:{succeeded:!1,value:void 0}}}}function l(u){return{custom:function(h){return o(h)(u)},boolean:o(function(h){return typeof h=="boolean"?h:void 0})(u),number:o(function(h){return typeof h=="number"?h:void 0})(u),string:o(function(h){return typeof h=="string"?h:void 0})(u),function:o(function(h){return typeof h=="function"?h:void 0})(u),constant:function(h){return o(function(f){return f===h?h:void 0})(u)},raw:o(function(h){return h})(u),object:function(h){return o(function(f){if(a(f))return r(f,h)})(u)},array:function(h){return o(function(f){if(Array.isArray(f))return s(f,h)})(u)}}}i.ParamsParsers={optional:l(!0),required:l(!1)};function c(u,h){var f=i.ParamsParsers.required.object(h)(u);return f.succeeded?f.value:void 0}i.parseParams=c})(fa);var K0={},Of={},Yd={};Object.defineProperty(Yd,"__esModule",{value:!0});Yd.warnMissing=Yd.warnDeprecation=void 0;function Yet(i){var e;console.warn(["".concat(i.name," is deprecated."),i.alternative?"use ".concat(i.alternative," instead."):"",(e=i.postscript)!==null&&e!==void 0?e:""].join(" "))}Yd.warnDeprecation=Yet;function Xet(i){console.warn(["Missing '".concat(i.key,"' of ").concat(i.target," in ").concat(i.place,"."),"Please rebuild plugins with the latest core package."].join(" "))}Yd.warnMissing=Xet;var PC={};Object.defineProperty(PC,"__esModule",{value:!0});PC.disposeElement=void 0;function Ket(i){return i&&i.parentElement&&i.parentElement.removeChild(i),null}PC.disposeElement=Ket;var Nf={},kC={};Object.defineProperty(kC,"__esModule",{value:!0});kC.ReadonlyValue=void 0;var Jet=function(){function i(e){this.value_=e}return i.create=function(e){return[new i(e),function(t,n){e.setRawValue(t,n)}]},Object.defineProperty(i.prototype,"emitter",{get:function(){return this.value_.emitter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rawValue",{get:function(){return this.value_.rawValue},enumerable:!1,configurable:!0}),i}();kC.ReadonlyValue=Jet;var Zet=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Nf,"__esModule",{value:!0});Nf.ViewProps=void 0;var ett=Wi,ttt=bl,sw=Sa,ntt=kC,YR=Ur,itt=vo,rtt=(0,ett.ClassName)("");function XR(i,e){return(0,ttt.valueToClassName)(i,rtt(void 0,e))}var stt=function(i){Zet(e,i);function e(t){var n,r=this,s;return r=i.call(this,t)||this,r.onDisabledChange_=r.onDisabledChange_.bind(r),r.onParentChange_=r.onParentChange_.bind(r),r.onParentGlobalDisabledChange_=r.onParentGlobalDisabledChange_.bind(r),n=ntt.ReadonlyValue.create((0,itt.createValue)(r.getGlobalDisabled_())),r.globalDisabled_=n[0],r.setGlobalDisabled_=n[1],r.value("disabled").emitter.on("change",r.onDisabledChange_),r.value("parent").emitter.on("change",r.onParentChange_),(s=r.get("parent"))===null||s===void 0||s.globalDisabled.emitter.on("change",r.onParentGlobalDisabledChange_),r}return e.create=function(t){var n,r,s,a=t??{};return new e(YR.ValueMap.createCore({disabled:(n=a.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=a.hidden)!==null&&r!==void 0?r:!1,parent:(s=a.parent)!==null&&s!==void 0?s:null}))},Object.defineProperty(e.prototype,"globalDisabled",{get:function(){return this.globalDisabled_},enumerable:!1,configurable:!0}),e.prototype.bindClassModifiers=function(t){(0,sw.bindValue)(this.globalDisabled_,XR(t,"disabled")),(0,sw.bindValueMap)(this,"hidden",XR(t,"hidden"))},e.prototype.bindDisabled=function(t){(0,sw.bindValue)(this.globalDisabled_,function(n){t.disabled=n})},e.prototype.bindTabIndex=function(t){(0,sw.bindValue)(this.globalDisabled_,function(n){t.tabIndex=n?-1:0})},e.prototype.handleDispose=function(t){this.value("disposed").emitter.on("change",function(n){n&&t()})},e.prototype.getGlobalDisabled_=function(){var t=this.get("parent"),n=t?t.globalDisabled.rawValue:!1;return n||this.get("disabled")},e.prototype.updateGlobalDisabled_=function(){this.setGlobalDisabled_(this.getGlobalDisabled_())},e.prototype.onDisabledChange_=function(){this.updateGlobalDisabled_()},e.prototype.onParentGlobalDisabledChange_=function(){this.updateGlobalDisabled_()},e.prototype.onParentChange_=function(t){var n,r=t.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()},e}(YR.ValueMap);Nf.ViewProps=stt;var BA={};Object.defineProperty(BA,"__esModule",{value:!0});BA.getAllBladePositions=void 0;function att(){return["veryfirst","first","last","verylast"]}BA.getAllBladePositions=att;Object.defineProperty(Of,"__esModule",{value:!0});Of.BladeController=void 0;var ott=Yd,ltt=PC,ctt=Nf,utt=Wi,htt=BA,KR=(0,utt.ClassName)(""),JR={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"},ftt=function(){function i(e){var t=this;this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;var n=this.view.element;this.blade.value("positions").emitter.on("change",function(){(0,htt.getAllBladePositions)().forEach(function(r){n.classList.remove(KR(void 0,JR[r]))}),t.blade.get("positions").forEach(function(r){n.classList.add(KR(void 0,JR[r]))})}),this.viewProps.handleDispose(function(){(0,ltt.disposeElement)(n)})}return Object.defineProperty(i.prototype,"parent",{get:function(){return this.parent_},set:function(e){if(this.parent_=e,!("parent"in this.viewProps.valMap_)){(0,ott.warnMissing)({key:"parent",target:ctt.ViewProps.name,place:"BladeController.parent"});return}this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)},enumerable:!1,configurable:!0}),i}();Of.BladeController=ftt;var yv={},Xa={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.findNextTarget=i.indexOfChildElement=i.removeChildNodes=i.removeChildElements=i.removeElement=i.insertElementAt=i.createSvgIconElement=i.getCanvasContext=i.getWindowDocument=i.supportsTouch=i.disableTransitionTemporarily=i.forceReflow=i.SVG_NS=void 0;var e=vi;i.SVG_NS="http://www.w3.org/2000/svg";function t(A){A.offsetHeight}i.forceReflow=t;function n(A,_){var y=A.style.transition;A.style.transition="none",_(),A.style.transition=y}i.disableTransitionTemporarily=n;function r(A){return A.ontouchstart!==void 0}i.supportsTouch=r;function s(){return globalThis}function a(){var A=(0,e.forceCast)(s());return A.document}i.getWindowDocument=a;function o(A){var _=A.ownerDocument.defaultView;if(!_)return null;var y="document"in _;return y?A.getContext("2d",{willReadFrequently:!0}):null}i.getCanvasContext=o;var l={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function c(A,_){var y=A.createElementNS(i.SVG_NS,"svg");return y.innerHTML=l[_],y}i.createSvgIconElement=c;function u(A,_,y){A.insertBefore(_,A.children[y])}i.insertElementAt=u;function h(A){A.parentElement&&A.parentElement.removeChild(A)}i.removeElement=h;function f(A){for(;A.children.length>0;)A.removeChild(A.children[0])}i.removeChildElements=f;function d(A){for(;A.childNodes.length>0;)A.removeChild(A.childNodes[0])}i.removeChildNodes=d;function g(A){var _=A.parentElement;if(!_)return-1;var y=Array.prototype.slice.call(_.children);return y.indexOf(A)}i.indexOfChildElement=g;function v(A){return A.relatedTarget?(0,e.forceCast)(A.relatedTarget):"explicitOriginalTarget"in A?A.explicitOriginalTarget:null}i.findNextTarget=v})(Xa);Object.defineProperty(yv,"__esModule",{value:!0});yv.LabelView=void 0;var dtt=Xa,ptt=Sa,mtt=Wi,gtt=vi,C_=(0,mtt.ClassName)("lbl");function vtt(i,e){var t=i.createDocumentFragment(),n=e.split(`
`).map(function(r){return i.createTextNode(r)});return n.forEach(function(r,s){s>0&&t.appendChild(i.createElement("br")),t.appendChild(r)}),t}var _tt=function(){function i(e,t){var n=this;this.element=e.createElement("div"),this.element.classList.add(C_()),t.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(C_("l")),(0,ptt.bindValueMap)(t.props,"label",function(a){(0,gtt.isEmpty)(a)?n.element.classList.add(C_(void 0,"nol")):(n.element.classList.remove(C_(void 0,"nol")),(0,dtt.removeChildNodes)(r),r.appendChild(vtt(e,a)))}),this.element.appendChild(r),this.labelElement=r;var s=e.createElement("div");s.classList.add(C_("v")),this.element.appendChild(s),this.valueElement=s}return i}();yv.LabelView=_tt;var Att=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ox=bt&&bt.__assign||function(){return Ox=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},Ox.apply(this,arguments)};Object.defineProperty(K0,"__esModule",{value:!0});K0.LabelController=void 0;var btt=Of,ytt=yv,wtt=function(i){Att(e,i);function e(t,n){var r=this,s=n.valueController.viewProps;return r=i.call(this,Ox(Ox({},n),{view:new ytt.LabelView(t,{props:n.props,viewProps:s}),viewProps:s}))||this,r.props=n.props,r.valueController=n.valueController,r.view.valueElement.appendChild(r.valueController.view.element),r}return e}(btt.BladeController);K0.LabelController=wtt;Object.defineProperty(kA,"__esModule",{value:!0});kA.ButtonBladePlugin=void 0;var ZR=Ur,e7=fa,t7=K0,xtt=TA,n7=IA;kA.ButtonBladePlugin={id:"button",type:"blade",accept:function(i){var e=e7.ParamsParsers,t=(0,e7.parseParams)(i,{title:e.required.string,view:e.required.constant("button"),label:e.optional.string});return t?{params:t}:null},controller:function(i){return new t7.LabelController(i.document,{blade:i.blade,props:ZR.ValueMap.fromObject({label:i.params.label}),valueController:new n7.ButtonController(i.document,{props:ZR.ValueMap.fromObject({title:i.params.title}),viewProps:i.viewProps})})},api:function(i){return!(i.controller instanceof t7.LabelController)||!(i.controller.valueController instanceof n7.ButtonController)?null:new xtt.ButtonApi(i.controller)}};var J0={},Ctt=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(J0,"__esModule",{value:!0});J0.ValueBladeController=void 0;var Ett=Of,Stt=function(i){Ctt(e,i);function e(t){var n=i.call(this,t)||this;return n.value=t.value,n}return e}(Ett.BladeController);J0.ValueBladeController=Stt;var cp={};Object.defineProperty(cp,"__esModule",{value:!0});cp.createBlade=void 0;var Mtt=Ur,Ttt=vo,Itt=vi;function Ptt(){return new Mtt.ValueMap({positions:(0,Ttt.createValue)([],{equals:Itt.deepEqualsArray})})}cp.createBlade=Ptt;var Do={},ktt=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Do,"__esModule",{value:!0});Do.bindFoldable=Do.getFoldableStyleHeight=Do.getFoldableStyleExpanded=Do.createFoldable=Do.Foldable=void 0;var tx=Xa,i7=Sa,r7=Ur,vV=vi,_V=function(i){ktt(e,i);function e(t){return i.call(this,t)||this}return e.create=function(t){var n={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=r7.ValueMap.createCore(n);return new e(r)},Object.defineProperty(e.prototype,"styleExpanded",{get:function(){var t;return(t=this.get("temporaryExpanded"))!==null&&t!==void 0?t:this.get("expanded")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleHeight",{get:function(){if(!this.styleExpanded)return"0";var t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!(0,vV.isEmpty)(t)?"".concat(t,"px"):"auto"},enumerable:!1,configurable:!0}),e.prototype.bindExpandedClass=function(t,n){var r=this,s=function(){var a=r.styleExpanded;a?t.classList.add(n):t.classList.remove(n)};(0,i7.bindValueMap)(this,"expanded",s),(0,i7.bindValueMap)(this,"temporaryExpanded",s)},e.prototype.cleanUpTransition=function(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)},e}(r7.ValueMap);Do.Foldable=_V;function Btt(i){return _V.create(i)}Do.createFoldable=Btt;function Rtt(i,e){var t=0;return(0,tx.disableTransitionTemporarily)(e,function(){i.set("expandedHeight",null),i.set("temporaryExpanded",!0),(0,tx.forceReflow)(e),t=e.clientHeight,i.set("temporaryExpanded",null),(0,tx.forceReflow)(e)}),t}function Dtt(i){return i.styleExpanded}Do.getFoldableStyleExpanded=Dtt;function Ltt(i){return i.styleHeight}Do.getFoldableStyleHeight=Ltt;function s7(i,e){e.style.height=i.styleHeight}function Ott(i,e){i.value("expanded").emitter.on("beforechange",function(){if(i.set("completed",!1),(0,vV.isEmpty)(i.get("expandedHeight"))){var t=Rtt(i,e);t>0&&i.set("expandedHeight",t)}i.set("shouldFixHeight",!0),(0,tx.forceReflow)(e)}),i.emitter.on("change",function(){s7(i,e)}),s7(i,e),e.addEventListener("transitionend",function(t){t.propertyName==="height"&&i.cleanUpTransition()})}Do.bindFoldable=Ott;var RA={},wv={},Ntt=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(wv,"__esModule",{value:!0});wv.RackLikeApi=void 0;var Ftt=Eh,ztt=function(i){Ntt(e,i);function e(t,n){var r=i.call(this,t)||this;return r.rackApi_=n,r}return e}(Ftt.BladeApi);wv.RackLikeApi=ztt;var Xd={},rh={},Ah=bt&&bt.__assign||function(){return Ah=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},Ah.apply(this,arguments)};Object.defineProperty(rh,"__esModule",{value:!0});rh.addTabAsBlade=rh.addSeparatorAsBlade=rh.addFolderAsBlade=rh.addButtonAsBlade=void 0;function Utt(i,e){return i.addBlade(Ah(Ah({},e),{view:"button"}))}rh.addButtonAsBlade=Utt;function Vtt(i,e){return i.addBlade(Ah(Ah({},e),{view:"folder"}))}rh.addFolderAsBlade=Vtt;function Htt(i,e){var t=e??{};return i.addBlade(Ah(Ah({},t),{view:"separator"}))}rh.addSeparatorAsBlade=Htt;function $tt(i,e){return i.addBlade(Ah(Ah({},e),{view:"tab"}))}rh.addTabAsBlade=$tt;var xv={};Object.defineProperty(xv,"__esModule",{value:!0});xv.NestedOrderedSet=void 0;var Gtt=qs,Qtt=xl,qtt=function(){function i(e){this.emitter=new Gtt.Emitter,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}return Object.defineProperty(i.prototype,"items",{get:function(){return this.items_},enumerable:!1,configurable:!0}),i.prototype.allItems=function(){return Array.from(this.cache_)},i.prototype.find=function(e){for(var t=0,n=this.allItems();t<n.length;t++){var r=n[t];if(e(r))return r}return null},i.prototype.includes=function(e){return this.cache_.has(e)},i.prototype.add=function(e,t){var n=this;if(this.includes(e))throw Qtt.TpError.shouldNeverHappen();var r=t!==void 0?t:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);var s=this.extract_(e);s&&(s.emitter.on("add",this.onSubListAdd_),s.emitter.on("remove",this.onSubListRemove_),s.allItems().forEach(function(a){n.cache_.add(a)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})},i.prototype.remove=function(e){var t=this.items_.indexOf(e);if(!(t<0)){this.items_.splice(t,1),this.cache_.delete(e);var n=this.extract_(e);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}},i.prototype.onSubListAdd_=function(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})},i.prototype.onSubListRemove_=function(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})},i}();xv.NestedOrderedSet=qtt;var Cv={},jtt=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Cv,"__esModule",{value:!0});Cv.InputBindingApi=void 0;var Wtt=qs,Ytt=vi,Xtt=Eh,Ktt=Ua,Jtt=function(i){jtt(e,i);function e(t){var n=i.call(this,t)||this;return n.onBindingChange_=n.onBindingChange_.bind(n),n.emitter_=new Wtt.Emitter,n.controller_.binding.emitter.on("change",n.onBindingChange_),n}return Object.defineProperty(e.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n){var r=n.bind(this);return this.emitter_.on(t,function(s){r(s.event)}),this},e.prototype.refresh=function(){this.controller_.binding.read()},e.prototype.onBindingChange_=function(t){var n=t.sender.target.read();this.emitter_.emit("change",{event:new Ktt.TpChangeEvent(this,(0,Ytt.forceCast)(n),this.controller_.binding.target.presetKey,t.options.last)})},e}(Xtt.BladeApi);Cv.InputBindingApi=Jtt;var up={},Ztt=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(up,"__esModule",{value:!0});up.InputBindingController=void 0;var ent=K0,tnt=function(i){Ztt(e,i);function e(t,n){var r=i.call(this,t,n)||this;return r.binding=n.binding,r}return e}(ent.LabelController);up.InputBindingController=tnt;var Ev={},nnt=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ev,"__esModule",{value:!0});Ev.MonitorBindingApi=void 0;var int=qs,rnt=vi,snt=Eh,ant=Ua,ont=function(i){nnt(e,i);function e(t){var n=i.call(this,t)||this;return n.onBindingUpdate_=n.onBindingUpdate_.bind(n),n.emitter_=new int.Emitter,n.controller_.binding.emitter.on("update",n.onBindingUpdate_),n}return Object.defineProperty(e.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n){var r=n.bind(this);return this.emitter_.on(t,function(s){r(s.event)}),this},e.prototype.refresh=function(){this.controller_.binding.read()},e.prototype.onBindingUpdate_=function(t){var n=t.sender.target.read();this.emitter_.emit("update",{event:new ant.TpUpdateEvent(this,(0,rnt.forceCast)(n),this.controller_.binding.target.presetKey)})},e}(snt.BladeApi);Ev.MonitorBindingApi=ont;var hp={},lnt=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(hp,"__esModule",{value:!0});hp.MonitorBindingController=void 0;var cnt=K0,unt=function(i){lnt(e,i);function e(t,n){var r=i.call(this,t,n)||this;return r.binding=n.binding,r.viewProps.bindDisabled(r.binding.ticker),r.viewProps.handleDispose(function(){r.binding.dispose()}),r}return e}(cnt.LabelController);hp.MonitorBindingController=unt;var hnt=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Xd,"__esModule",{value:!0});Xd.RackApi=Xd.findSubBladeApiSet=void 0;var a7=MA,fnt=qs,sP=xl,FS=vi,dnt=Eh,aw=rh,pnt=wv,zS=Ua,mnt=J0,gnt=xv,vnt=Cv,_nt=up,Ant=Ev,bnt=hp;function AV(i){return i instanceof bV?i.apiSet_:i instanceof pnt.RackLikeApi?i.rackApi_.apiSet_:null}Xd.findSubBladeApiSet=AV;function E_(i,e){var t=i.find(function(n){return n.controller_===e});if(!t)throw sP.TpError.shouldNeverHappen();return t}function o7(i,e,t){if(!a7.BindingTarget.isBindable(i))throw sP.TpError.notBindable();return new a7.BindingTarget(i,e,t)}var bV=function(i){hnt(e,i);function e(t,n){var r=i.call(this,t)||this;r.onRackAdd_=r.onRackAdd_.bind(r),r.onRackRemove_=r.onRackRemove_.bind(r),r.onRackInputChange_=r.onRackInputChange_.bind(r),r.onRackMonitorUpdate_=r.onRackMonitorUpdate_.bind(r),r.emitter_=new fnt.Emitter,r.apiSet_=new gnt.NestedOrderedSet(AV),r.pool_=n;var s=r.controller_.rack;return s.emitter.on("add",r.onRackAdd_),s.emitter.on("remove",r.onRackRemove_),s.emitter.on("inputchange",r.onRackInputChange_),s.emitter.on("monitorupdate",r.onRackMonitorUpdate_),s.children.forEach(function(a){r.setUpApi_(a)}),r}return Object.defineProperty(e.prototype,"children",{get:function(){var t=this;return this.controller_.rack.children.map(function(n){return E_(t.apiSet_,n)})},enumerable:!1,configurable:!0}),e.prototype.addInput=function(t,n,r){var s=r??{},a=this.controller_.view.element.ownerDocument,o=this.pool_.createInput(a,o7(t,n,s.presetKey),s),l=new vnt.InputBindingApi(o);return this.add(l,s.index)},e.prototype.addMonitor=function(t,n,r){var s=r??{},a=this.controller_.view.element.ownerDocument,o=this.pool_.createMonitor(a,o7(t,n),s),l=new Ant.MonitorBindingApi(o);return(0,FS.forceCast)(this.add(l,s.index))},e.prototype.addFolder=function(t){return(0,aw.addFolderAsBlade)(this,t)},e.prototype.addButton=function(t){return(0,aw.addButtonAsBlade)(this,t)},e.prototype.addSeparator=function(t){return(0,aw.addSeparatorAsBlade)(this,t)},e.prototype.addTab=function(t){return(0,aw.addTabAsBlade)(this,t)},e.prototype.add=function(t,n){this.controller_.rack.add(t.controller_,n);var r=this.apiSet_.find(function(s){return s.controller_===t.controller_});return r&&this.apiSet_.remove(r),this.apiSet_.add(t),t},e.prototype.remove=function(t){this.controller_.rack.remove(t.controller_)},e.prototype.addBlade=function(t){var n=this.controller_.view.element.ownerDocument,r=this.pool_.createBlade(n,t),s=this.pool_.createBladeApi(r);return this.add(s,t.index)},e.prototype.on=function(t,n){var r=n.bind(this);return this.emitter_.on(t,function(s){r(s.event)}),this},e.prototype.setUpApi_=function(t){var n=this.apiSet_.find(function(r){return r.controller_===t});n||this.apiSet_.add(this.pool_.createBladeApi(t))},e.prototype.onRackAdd_=function(t){this.setUpApi_(t.bladeController)},e.prototype.onRackRemove_=function(t){if(t.isRoot){var n=E_(this.apiSet_,t.bladeController);this.apiSet_.remove(n)}},e.prototype.onRackInputChange_=function(t){var n=t.bladeController;if(n instanceof _nt.InputBindingController){var r=E_(this.apiSet_,n),s=n.binding;this.emitter_.emit("change",{event:new zS.TpChangeEvent(r,(0,FS.forceCast)(s.target.read()),s.target.presetKey,t.options.last)})}else if(n instanceof mnt.ValueBladeController){var r=E_(this.apiSet_,n);this.emitter_.emit("change",{event:new zS.TpChangeEvent(r,n.value.rawValue,void 0,t.options.last)})}},e.prototype.onRackMonitorUpdate_=function(t){if(!(t.bladeController instanceof bnt.MonitorBindingController))throw sP.TpError.shouldNeverHappen();var n=E_(this.apiSet_,t.bladeController),r=t.bladeController.binding;this.emitter_.emit("update",{event:new zS.TpUpdateEvent(n,(0,FS.forceCast)(r.target.read()),r.target.presetKey)})},e}(dnt.BladeApi);Xd.RackApi=bV;var ynt=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(RA,"__esModule",{value:!0});RA.FolderApi=void 0;var wnt=qs,xnt=wv,Cnt=Ua,Ent=Xd,Snt=function(i){ynt(e,i);function e(t,n){var r=i.call(this,t,new Ent.RackApi(t.rackController,n))||this;return r.emitter_=new wnt.Emitter,r.controller_.foldable.value("expanded").emitter.on("change",function(s){r.emitter_.emit("fold",{event:new Cnt.TpFoldEvent(r,s.sender.rawValue)})}),r.rackApi_.on("change",function(s){r.emitter_.emit("change",{event:s})}),r.rackApi_.on("update",function(s){r.emitter_.emit("update",{event:s})}),r}return Object.defineProperty(e.prototype,"expanded",{get:function(){return this.controller_.foldable.get("expanded")},set:function(t){this.controller_.foldable.set("expanded",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.controller_.props.get("title")},set:function(t){this.controller_.props.set("title",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.rackApi_.children},enumerable:!1,configurable:!0}),e.prototype.addInput=function(t,n,r){return this.rackApi_.addInput(t,n,r)},e.prototype.addMonitor=function(t,n,r){return this.rackApi_.addMonitor(t,n,r)},e.prototype.addFolder=function(t){return this.rackApi_.addFolder(t)},e.prototype.addButton=function(t){return this.rackApi_.addButton(t)},e.prototype.addSeparator=function(t){return this.rackApi_.addSeparator(t)},e.prototype.addTab=function(t){return this.rackApi_.addTab(t)},e.prototype.add=function(t,n){return this.rackApi_.add(t,n)},e.prototype.remove=function(t){this.rackApi_.remove(t)},e.prototype.addBlade=function(t){return this.rackApi_.addBlade(t)},e.prototype.on=function(t,n){var r=n.bind(this);return this.emitter_.on(t,function(s){r(s.event)}),this},e}(xnt.RackLikeApi);RA.FolderApi=Snt;var DA={},Sv={},Mnt=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Sv,"__esModule",{value:!0});Sv.RackLikeController=void 0;var Tnt=Of,Int=function(i){Mnt(e,i);function e(t){var n=i.call(this,{blade:t.blade,view:t.view,viewProps:t.rackController.viewProps})||this;return n.rackController=t.rackController,n}return e}(Tnt.BladeController);Sv.RackLikeController=Int;var S_={},LA={};Object.defineProperty(LA,"__esModule",{value:!0});LA.PlainView=void 0;var Pnt=Wi,knt=function(){function i(e,t){var n=(0,Pnt.ClassName)(t.viewName);this.element=e.createElement("div"),this.element.classList.add(n()),t.viewProps.bindClassModifiers(this.element)}return i}();LA.PlainView=knt;var M_={},l7;function Bnt(){if(l7)return M_;l7=1,Object.defineProperty(M_,"__esModule",{value:!0}),M_.BladeRack=void 0;var i=Yd,e=qs,t=xl,n=vi,r=up,s=hp,a=OA(),o=Sv,l=J0,c=xv;function u(A,_){for(var y=0;y<A.length;y++){var x=A[y];if(x instanceof r.InputBindingController&&x.binding===_)return x}return null}function h(A,_){for(var y=0;y<A.length;y++){var x=A[y];if(x instanceof s.MonitorBindingController&&x.binding===_)return x}return null}function f(A,_){for(var y=0;y<A.length;y++){var x=A[y];if(x instanceof l.ValueBladeController&&x.value===_)return x}return null}function d(A){return A instanceof a.RackController?A.rack:A instanceof o.RackLikeController?A.rackController.rack:null}function g(A){var _=d(A);return _?_.bcSet_:null}var v=function(){function A(_){var y,x;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new e.Emitter,this.blade_=(y=_.blade)!==null&&y!==void 0?y:null,(x=this.blade_)===null||x===void 0||x.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=_.viewProps,this.bcSet_=new c.NestedOrderedSet(g),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}return Object.defineProperty(A.prototype,"children",{get:function(){return this.bcSet_.items},enumerable:!1,configurable:!0}),A.prototype.add=function(_,y){var x;(x=_.parent)===null||x===void 0||x.remove(_),(0,n.isPropertyWritable)(_,"parent")?_.parent=this:(_.parent_=this,(0,i.warnMissing)({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(_,y)},A.prototype.remove=function(_){(0,n.isPropertyWritable)(_,"parent")?_.parent=null:(_.parent_=null,(0,i.warnMissing)({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(_)},A.prototype.find=function(_){return(0,n.forceCast)(this.bcSet_.allItems().filter(function(y){return y instanceof _}))},A.prototype.onSetAdd_=function(_){this.updatePositions_();var y=_.target===_.root;if(this.emitter.emit("add",{bladeController:_.item,index:_.index,isRoot:y,sender:this}),!!y){var x=_.item;if(x.viewProps.emitter.on("change",this.onChildViewPropsChange_),x.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),x.viewProps.handleDispose(this.onChildDispose_),x instanceof r.InputBindingController)x.binding.emitter.on("change",this.onChildInputChange_);else if(x instanceof s.MonitorBindingController)x.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(x instanceof l.ValueBladeController)x.value.emitter.on("change",this.onChildValueChange_);else{var C=d(x);if(C){var S=C.emitter;S.on("layout",this.onDescendantLayout_),S.on("inputchange",this.onDescendantInputChange_),S.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}},A.prototype.onSetRemove_=function(_){this.updatePositions_();var y=_.target===_.root;if(this.emitter.emit("remove",{bladeController:_.item,isRoot:y,sender:this}),!!y){var x=_.item;if(x instanceof r.InputBindingController)x.binding.emitter.off("change",this.onChildInputChange_);else if(x instanceof s.MonitorBindingController)x.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(x instanceof l.ValueBladeController)x.value.emitter.off("change",this.onChildValueChange_);else{var C=d(x);if(C){var S=C.emitter;S.off("layout",this.onDescendantLayout_),S.off("inputchange",this.onDescendantInputChange_),S.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}},A.prototype.updatePositions_=function(){var _=this,y=this.bcSet_.items.filter(function(S){return!S.viewProps.get("hidden")}),x=y[0],C=y[y.length-1];this.bcSet_.items.forEach(function(S){var I=[];S===x&&(I.push("first"),(!_.blade_||_.blade_.get("positions").includes("veryfirst"))&&I.push("veryfirst")),S===C&&(I.push("last"),(!_.blade_||_.blade_.get("positions").includes("verylast"))&&I.push("verylast")),S.blade.set("positions",I)})},A.prototype.onChildPositionsChange_=function(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})},A.prototype.onChildViewPropsChange_=function(_){this.updatePositions_(),this.emitter.emit("layout",{sender:this})},A.prototype.onChildDispose_=function(){var _=this,y=this.bcSet_.items.filter(function(x){return x.viewProps.get("disposed")});y.forEach(function(x){_.bcSet_.remove(x)})},A.prototype.onChildInputChange_=function(_){var y=u(this.find(r.InputBindingController),_.sender);if(!y)throw t.TpError.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:y,options:_.options,sender:this})},A.prototype.onChildMonitorUpdate_=function(_){var y=h(this.find(s.MonitorBindingController),_.sender);if(!y)throw t.TpError.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:y,sender:this})},A.prototype.onChildValueChange_=function(_){var y=f(this.find(l.ValueBladeController),_.sender);if(!y)throw t.TpError.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:y,options:_.options,sender:this})},A.prototype.onDescendantLayout_=function(_){this.updatePositions_(),this.emitter.emit("layout",{sender:this})},A.prototype.onDescendantInputChange_=function(_){this.emitter.emit("inputchange",{bladeController:_.bladeController,options:_.options,sender:this})},A.prototype.onDescendantMonitorUpdate_=function(_){this.emitter.emit("monitorupdate",{bladeController:_.bladeController,sender:this})},A.prototype.onBladePositionsChange_=function(){this.updatePositions_()},A}();return M_.BladeRack=v,M_}var c7;function OA(){if(c7)return S_;c7=1;var i=bt&&bt.__extends||function(){var o=function(l,c){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(u[f]=h[f])},o(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");o(l,c);function u(){this.constructor=l}l.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}}(),e=bt&&bt.__assign||function(){return e=Object.assign||function(o){for(var l,c=1,u=arguments.length;c<u;c++){l=arguments[c];for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(o[h]=l[h])}return o},e.apply(this,arguments)};Object.defineProperty(S_,"__esModule",{value:!0}),S_.RackController=void 0;var t=Xa,n=LA,r=Of,s=Bnt(),a=function(o){i(l,o);function l(c,u){var h=o.call(this,e(e({},u),{view:new n.PlainView(c,{viewName:"brk",viewProps:u.viewProps})}))||this;h.onRackAdd_=h.onRackAdd_.bind(h),h.onRackRemove_=h.onRackRemove_.bind(h);var f=new s.BladeRack({blade:u.root?void 0:u.blade,viewProps:u.viewProps});return f.emitter.on("add",h.onRackAdd_),f.emitter.on("remove",h.onRackRemove_),h.rack=f,h.viewProps.handleDispose(function(){for(var d=h.rack.children.length-1;d>=0;d--){var g=h.rack.children[d];g.viewProps.set("disposed",!0)}}),h}return l.prototype.onRackAdd_=function(c){c.isRoot&&(0,t.insertElementAt)(this.view.element,c.bladeController.view.element,c.index)},l.prototype.onRackRemove_=function(c){c.isRoot&&(0,t.removeElement)(c.bladeController.view.element)},l}(r.BladeController);return S_.RackController=a,S_}var NA={},FA={};Object.defineProperty(FA,"__esModule",{value:!0});FA.bladeContainerClassName=void 0;var Rnt=Wi;FA.bladeContainerClassName=(0,Rnt.ClassName)("cnt");Object.defineProperty(NA,"__esModule",{value:!0});NA.FolderView=void 0;var u7=Sa,Dnt=Wi,h7=bl,Lnt=vi,Ont=FA,Nnt=function(){function i(e,t){var n=this,r;this.className_=(0,Dnt.ClassName)((r=t.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),(0,Ont.bladeContainerClassName)()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),(0,u7.bindValueMap)(this.foldable_,"completed",(0,h7.valueToClassName)(this.element,this.className_(void 0,"cpl")));var s=e.createElement("button");s.classList.add(this.className_("b")),(0,u7.bindValueMap)(t.props,"title",function(u){(0,Lnt.isEmpty)(u)?n.element.classList.add(n.className_(void 0,"not")):n.element.classList.remove(n.className_(void 0,"not"))}),t.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;var a=e.createElement("div");a.classList.add(this.className_("i")),this.element.appendChild(a);var o=e.createElement("div");o.classList.add(this.className_("t")),(0,h7.bindValueToTextContent)(t.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;var l=e.createElement("div");l.classList.add(this.className_("m")),this.buttonElement.appendChild(l);var c=t.containerElement;c.classList.add(this.className_("c")),this.element.appendChild(c),this.containerElement=c}return i}();NA.FolderView=Nnt;var Fnt=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nx=bt&&bt.__assign||function(){return Nx=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},Nx.apply(this,arguments)};Object.defineProperty(DA,"__esModule",{value:!0});DA.FolderController=void 0;var znt=Sv,f7=Do,Unt=OA(),Vnt=NA,Hnt=function(i){Fnt(e,i);function e(t,n){var r=this,s,a=f7.Foldable.create((s=n.expanded)!==null&&s!==void 0?s:!0),o=new Unt.RackController(t,{blade:n.blade,root:n.root,viewProps:n.viewProps});return r=i.call(this,Nx(Nx({},n),{rackController:o,view:new Vnt.FolderView(t,{containerElement:o.view.element,foldable:a,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps})}))||this,r.onTitleClick_=r.onTitleClick_.bind(r),r.props=n.props,r.foldable=a,(0,f7.bindFoldable)(r.foldable,r.view.containerElement),r.rackController.rack.emitter.on("add",function(){r.foldable.cleanUpTransition()}),r.rackController.rack.emitter.on("remove",function(){r.foldable.cleanUpTransition()}),r.view.buttonElement.addEventListener("click",r.onTitleClick_),r}return Object.defineProperty(e.prototype,"document",{get:function(){return this.view.element.ownerDocument},enumerable:!1,configurable:!0}),e.prototype.onTitleClick_=function(){this.foldable.set("expanded",!this.foldable.get("expanded"))},e}(znt.RackLikeController);DA.FolderController=Hnt;var zA={};Object.defineProperty(zA,"__esModule",{value:!0});zA.FolderBladePlugin=void 0;var $nt=Ur,d7=fa,Gnt=RA,p7=DA;zA.FolderBladePlugin={id:"folder",type:"blade",accept:function(i){var e=d7.ParamsParsers,t=(0,d7.parseParams)(i,{title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean});return t?{params:t}:null},controller:function(i){return new p7.FolderController(i.document,{blade:i.blade,expanded:i.params.expanded,props:$nt.ValueMap.fromObject({title:i.params.title}),viewProps:i.viewProps})},api:function(i){return i.controller instanceof p7.FolderController?new Gnt.FolderApi(i.controller,i.pool):null}};var BC={},Qnt=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fx=bt&&bt.__assign||function(){return Fx=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},Fx.apply(this,arguments)};Object.defineProperty(BC,"__esModule",{value:!0});BC.LabeledValueController=void 0;var qnt=J0,jnt=yv,Wnt=function(i){Qnt(e,i);function e(t,n){var r=this,s=n.valueController.viewProps;return r=i.call(this,Fx(Fx({},n),{value:n.valueController.value,view:new jnt.LabelView(t,{props:n.props,viewProps:s}),viewProps:s}))||this,r.props=n.props,r.valueController=n.valueController,r.view.valueElement.appendChild(r.valueController.view.element),r}return e}(qnt.ValueBladeController);BC.LabeledValueController=Wnt;var UA={},Ynt=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(UA,"__esModule",{value:!0});UA.SeparatorApi=void 0;var Xnt=Eh,Knt=function(i){Ynt(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e}(Xnt.BladeApi);UA.SeparatorApi=Knt;var VA={},RC={};Object.defineProperty(RC,"__esModule",{value:!0});RC.SeparatorView=void 0;var Jnt=Wi,m7=(0,Jnt.ClassName)("spr"),Znt=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(m7()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("hr");n.classList.add(m7("r")),this.element.appendChild(n)}return i}();RC.SeparatorView=Znt;var eit=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zx=bt&&bt.__assign||function(){return zx=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},zx.apply(this,arguments)};Object.defineProperty(VA,"__esModule",{value:!0});VA.SeparatorController=void 0;var tit=Of,nit=RC,iit=function(i){eit(e,i);function e(t,n){return i.call(this,zx(zx({},n),{view:new nit.SeparatorView(t,{viewProps:n.viewProps})}))||this}return e}(tit.BladeController);VA.SeparatorController=iit;var HA={};Object.defineProperty(HA,"__esModule",{value:!0});HA.SeparatorBladePlugin=void 0;var g7=fa,rit=UA,v7=VA;HA.SeparatorBladePlugin={id:"separator",type:"blade",accept:function(i){var e=g7.ParamsParsers,t=(0,g7.parseParams)(i,{view:e.required.constant("separator")});return t?{params:t}:null},controller:function(i){return new v7.SeparatorController(i.document,{blade:i.blade,viewProps:i.viewProps})},api:function(i){return i.controller instanceof v7.SeparatorController?new rit.SeparatorApi(i.controller):null}};var $A={},Mv={},DC={},LC={};Object.defineProperty(LC,"__esModule",{value:!0});LC.TabItemView=void 0;var sit=Sa,ait=Wi,oit=bl,T_=(0,ait.ClassName)("tbi"),lit=function(){function i(e,t){var n=this;this.element=e.createElement("div"),this.element.classList.add(T_()),t.viewProps.bindClassModifiers(this.element),(0,sit.bindValueMap)(t.props,"selected",function(a){a?n.element.classList.add(T_(void 0,"sel")):n.element.classList.remove(T_(void 0,"sel"))});var r=e.createElement("button");r.classList.add(T_("b")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;var s=e.createElement("div");s.classList.add(T_("t")),(0,oit.bindValueToTextContent)(t.props.value("title"),s),this.buttonElement.appendChild(s),this.titleElement=s}return i}();LC.TabItemView=lit;Object.defineProperty(DC,"__esModule",{value:!0});DC.TabItemController=void 0;var cit=qs,uit=LC,hit=function(){function i(e,t){this.emitter=new cit.Emitter,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new uit.TabItemView(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return i.prototype.onClick_=function(){this.emitter.emit("click",{sender:this})},i}();DC.TabItemController=hit;Object.defineProperty(Mv,"__esModule",{value:!0});Mv.TabPageController=void 0;var fit=Sa,_7=Nf,dit=cp,pit=OA(),mit=DC,git=function(){function i(e,t){var n=this;this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new mit.TabItemController(e,{props:t.itemProps,viewProps:_7.ViewProps.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new pit.RackController(e,{blade:(0,dit.createBlade)(),viewProps:_7.ViewProps.create()}),this.props=t.props,(0,fit.bindValueMap)(this.props,"selected",function(r){n.itemController.props.set("selected",r),n.contentController.viewProps.set("hidden",!r)})}return Object.defineProperty(i.prototype,"itemController",{get:function(){return this.ic_},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"contentController",{get:function(){return this.cc_},enumerable:!1,configurable:!0}),i.prototype.onItemClick_=function(){this.props.set("selected",!0)},i}();Mv.TabPageController=git;var GA={};Object.defineProperty(GA,"__esModule",{value:!0});GA.TabPageApi=void 0;var vit=function(){function i(e,t){this.controller_=e,this.rackApi_=t}return Object.defineProperty(i.prototype,"title",{get:function(){var e;return(e=this.controller_.itemController.props.get("title"))!==null&&e!==void 0?e:""},set:function(e){this.controller_.itemController.props.set("title",e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this.controller_.props.get("selected")},set:function(e){this.controller_.props.set("selected",e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"children",{get:function(){return this.rackApi_.children},enumerable:!1,configurable:!0}),i.prototype.addButton=function(e){return this.rackApi_.addButton(e)},i.prototype.addFolder=function(e){return this.rackApi_.addFolder(e)},i.prototype.addSeparator=function(e){return this.rackApi_.addSeparator(e)},i.prototype.addTab=function(e){return this.rackApi_.addTab(e)},i.prototype.add=function(e,t){this.rackApi_.add(e,t)},i.prototype.remove=function(e){this.rackApi_.remove(e)},i.prototype.addInput=function(e,t,n){return this.rackApi_.addInput(e,t,n)},i.prototype.addMonitor=function(e,t,n){return this.rackApi_.addMonitor(e,t,n)},i.prototype.addBlade=function(e){return this.rackApi_.addBlade(e)},i}();GA.TabPageApi=vit;var _it=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty($A,"__esModule",{value:!0});$A.TabApi=void 0;var Ait=qs,A7=Ur,ow=xl,bit=wv,yit=Ua,wit=Xd,xit=Mv,Cit=GA,Eit=function(i){_it(e,i);function e(t,n){var r=i.call(this,t,new wit.RackApi(t.rackController,n))||this;return r.onPageAdd_=r.onPageAdd_.bind(r),r.onPageRemove_=r.onPageRemove_.bind(r),r.onSelect_=r.onSelect_.bind(r),r.emitter_=new Ait.Emitter,r.pageApiMap_=new Map,r.rackApi_.on("change",function(s){r.emitter_.emit("change",{event:s})}),r.rackApi_.on("update",function(s){r.emitter_.emit("update",{event:s})}),r.controller_.tab.selectedIndex.emitter.on("change",r.onSelect_),r.controller_.pageSet.emitter.on("add",r.onPageAdd_),r.controller_.pageSet.emitter.on("remove",r.onPageRemove_),r.controller_.pageSet.items.forEach(function(s){r.setUpPageApi_(s)}),r}return Object.defineProperty(e.prototype,"pages",{get:function(){var t=this;return this.controller_.pageSet.items.map(function(n){var r=t.pageApiMap_.get(n);if(!r)throw ow.TpError.shouldNeverHappen();return r})},enumerable:!1,configurable:!0}),e.prototype.addPage=function(t){var n=this.controller_.view.element.ownerDocument,r=new xit.TabPageController(n,{itemProps:A7.ValueMap.fromObject({selected:!1,title:t.title}),props:A7.ValueMap.fromObject({selected:!1})});this.controller_.add(r,t.index);var s=this.pageApiMap_.get(r);if(!s)throw ow.TpError.shouldNeverHappen();return s},e.prototype.removePage=function(t){this.controller_.remove(t)},e.prototype.on=function(t,n){var r=n.bind(this);return this.emitter_.on(t,function(s){r(s.event)}),this},e.prototype.setUpPageApi_=function(t){var n=this.rackApi_.apiSet_.find(function(s){return s.controller_===t.contentController});if(!n)throw ow.TpError.shouldNeverHappen();var r=new Cit.TabPageApi(t,n);this.pageApiMap_.set(t,r)},e.prototype.onPageAdd_=function(t){this.setUpPageApi_(t.item)},e.prototype.onPageRemove_=function(t){var n=this.pageApiMap_.get(t.item);if(!n)throw ow.TpError.shouldNeverHappen();this.pageApiMap_.delete(t.item)},e.prototype.onSelect_=function(t){this.emitter_.emit("select",{event:new yit.TpTabSelectEvent(this,t.rawValue)})},e}(bit.RackLikeApi);$A.TabApi=Eit;var QA={},OC={};Object.defineProperty(OC,"__esModule",{value:!0});OC.Tab=void 0;var b7=vo,y7=-1,Sit=function(){function i(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=(0,b7.createValue)(!0),this.selectedIndex=(0,b7.createValue)(y7),this.items_=[]}return i.prototype.add=function(e,t){var n=t??this.items_.length;this.items_.splice(n,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()},i.prototype.remove=function(e){var t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())},i.prototype.keepSelection_=function(){if(this.items_.length===0){this.selectedIndex.rawValue=y7,this.empty.rawValue=!0;return}var e=this.items_.findIndex(function(t){return t.rawValue});e<0?(this.items_.forEach(function(t,n){t.rawValue=n===0}),this.selectedIndex.rawValue=0):(this.items_.forEach(function(t,n){t.rawValue=n===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1},i.prototype.onItemSelectedChange_=function(e){if(e.rawValue){var t=this.items_.findIndex(function(n){return n===e.sender});this.items_.forEach(function(n,r){n.rawValue=r===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()},i}();OC.Tab=Sit;var NC={};Object.defineProperty(NC,"__esModule",{value:!0});NC.TabView=void 0;var Mit=Sa,Tit=Wi,Iit=bl,Pit=FA,I_=(0,Tit.ClassName)("tab"),kit=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(I_(),(0,Pit.bladeContainerClassName)()),t.viewProps.bindClassModifiers(this.element),(0,Mit.bindValue)(t.empty,(0,Iit.valueToClassName)(this.element,I_(void 0,"nop")));var n=e.createElement("div");n.classList.add(I_("t")),this.element.appendChild(n),this.itemsElement=n;var r=e.createElement("div");r.classList.add(I_("i")),this.element.appendChild(r);var s=t.contentsElement;s.classList.add(I_("c")),this.element.appendChild(s),this.contentsElement=s}return i}();NC.TabView=kit;var Bit=bt&&bt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(QA,"__esModule",{value:!0});QA.TabController=void 0;var w7=Xa,Rit=Sv,Dit=xv,Lit=OA(),Oit=OC,Nit=NC,Fit=function(i){Bit(e,i);function e(t,n){var r=this,s=new Lit.RackController(t,{blade:n.blade,viewProps:n.viewProps}),a=new Oit.Tab;return r=i.call(this,{blade:n.blade,rackController:s,view:new Nit.TabView(t,{contentsElement:s.view.element,empty:a.empty,viewProps:n.viewProps})})||this,r.onPageAdd_=r.onPageAdd_.bind(r),r.onPageRemove_=r.onPageRemove_.bind(r),r.pageSet_=new Dit.NestedOrderedSet(function(){return null}),r.pageSet_.emitter.on("add",r.onPageAdd_),r.pageSet_.emitter.on("remove",r.onPageRemove_),r.tab=a,r}return Object.defineProperty(e.prototype,"pageSet",{get:function(){return this.pageSet_},enumerable:!1,configurable:!0}),e.prototype.add=function(t,n){this.pageSet_.add(t,n)},e.prototype.remove=function(t){this.pageSet_.remove(this.pageSet_.items[t])},e.prototype.onPageAdd_=function(t){var n=t.item;(0,w7.insertElementAt)(this.view.itemsElement,n.itemController.view.element,t.index),n.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(n.contentController,t.index),this.tab.add(n.props.value("selected"))},e.prototype.onPageRemove_=function(t){var n=t.item;(0,w7.removeElement)(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.rackController.rack.remove(n.contentController),this.tab.remove(n.props.value("selected"))},e}(Rit.RackLikeController);QA.TabController=Fit;var qA={};Object.defineProperty(qA,"__esModule",{value:!0});qA.TabBladePlugin=void 0;var x7=Ur,C7=fa,zit=$A,E7=QA,Uit=Mv;qA.TabBladePlugin={id:"tab",type:"blade",accept:function(i){var e=C7.ParamsParsers,t=(0,C7.parseParams)(i,{pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")});return!t||t.pages.length===0?null:{params:t}},controller:function(i){var e=new E7.TabController(i.document,{blade:i.blade,viewProps:i.viewProps});return i.params.pages.forEach(function(t){var n=new Uit.TabPageController(i.document,{itemProps:x7.ValueMap.fromObject({selected:!1,title:t.title}),props:x7.ValueMap.fromObject({selected:!1})});e.add(n)}),e},api:function(i){return i.controller instanceof E7.TabController?new zit.TabApi(i.controller,i.pool):null}};var jA={},Ux=bt&&bt.__assign||function(){return Ux=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},Ux.apply(this,arguments)};Object.defineProperty(jA,"__esModule",{value:!0});jA.createBladeController=void 0;var Vit=Nf,S7=fa,Hit=vi,$it=cp;function Git(i,e){var t=i.accept(e.params);if(!t)return null;var n=S7.ParamsParsers.optional.boolean(e.params.disabled).value,r=S7.ParamsParsers.optional.boolean(e.params.hidden).value;return i.controller({blade:(0,$it.createBlade)(),document:e.document,params:(0,Hit.forceCast)(Ux(Ux({},t.params),{disabled:n,hidden:r})),viewProps:Vit.ViewProps.create({disabled:n,hidden:r})})}jA.createBladeController=Git;var WA={};Object.defineProperty(WA,"__esModule",{value:!0});WA.ManualTicker=void 0;var Qit=qs,qit=function(){function i(){this.disabled=!1,this.emitter=new Qit.Emitter}return i.prototype.dispose=function(){},i.prototype.tick=function(){this.disabled||this.emitter.emit("tick",{sender:this})},i}();WA.ManualTicker=qit;var YA={};Object.defineProperty(YA,"__esModule",{value:!0});YA.IntervalTicker=void 0;var jit=qs,Wit=function(){function i(e,t){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new jit.Emitter,this.interval_=t,this.setTimer_()}return Object.defineProperty(i.prototype,"disabled",{get:function(){return this.disabled_},set:function(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this.clearTimer_()},i.prototype.clearTimer_=function(){if(this.timerId_!==null){var e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}},i.prototype.setTimer_=function(){if(this.clearTimer_(),!(this.interval_<=0)){var e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}},i.prototype.onTick_=function(){this.disabled_||this.emitter.emit("tick",{sender:this})},i}();YA.IntervalTicker=Wit;var yV={};Object.defineProperty(yV,"__esModule",{value:!0});var XA={};Object.defineProperty(XA,"__esModule",{value:!0});XA.InputBinding=void 0;var Yit=qs,Xit=function(){function i(e){this.onValueChange_=this.onValueChange_.bind(this),this.reader=e.reader,this.writer=e.writer,this.emitter=new Yit.Emitter,this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.target=e.target,this.read()}return i.prototype.read=function(){var e=this.target.read();e!==void 0&&(this.value.rawValue=this.reader(e))},i.prototype.write_=function(e){this.writer(this.target,e)},i.prototype.onValueChange_=function(e){this.write_(e.rawValue),this.emitter.emit("change",{options:e.options,rawValue:e.rawValue,sender:this})},i}();XA.InputBinding=Xit;var KA={},Kd={},M7=bt&&bt.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(Kd,"__esModule",{value:!0});Kd.createPushedBuffer=Kd.initializeBuffer=void 0;var Kit=vi,Jit=vo;function wV(i,e){for(;i.length<e;)i.push(void 0)}function Zit(i){var e=[];return wV(e,i),(0,Jit.createValue)(e)}Kd.initializeBuffer=Zit;function ert(i){var e=i.indexOf(void 0);return(0,Kit.forceCast)(e<0?i:i.slice(0,e))}function trt(i,e){var t=M7(M7([],ert(i),!0),[e],!1);return t.length>i.length?t.splice(0,t.length-i.length):wV(t,i.length),t}Kd.createPushedBuffer=trt;Object.defineProperty(KA,"__esModule",{value:!0});KA.MonitorBinding=void 0;var nrt=Kd,irt=qs,rrt=function(){function i(e){this.onTick_=this.onTick_.bind(this),this.reader_=e.reader,this.target=e.target,this.emitter=new irt.Emitter,this.value=e.value,this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}return i.prototype.dispose=function(){this.ticker.dispose()},i.prototype.read=function(){var e=this.target.read();if(e!==void 0){var t=this.value.rawValue,n=this.reader_(e);this.value.rawValue=(0,nrt.createPushedBuffer)(t,n),this.emitter.emit("update",{rawValue:n,sender:this})}},i.prototype.onTick_=function(e){this.read()},i}();KA.MonitorBinding=rrt;var _u={};Object.defineProperty(_u,"__esModule",{value:!0});_u.findConstraint=_u.CompositeConstraint=void 0;var xV=function(){function i(e){this.constraints=e}return i.prototype.constrain=function(e){return this.constraints.reduce(function(t,n){return n.constrain(t)},e)},i}();_u.CompositeConstraint=xV;function srt(i,e){if(i instanceof e)return i;if(i instanceof xV){var t=i.constraints.reduce(function(n,r){return n||(r instanceof e?r:null)},null);if(t)return t}return null}_u.findConstraint=srt;var CV={};Object.defineProperty(CV,"__esModule",{value:!0});var Z0={};Object.defineProperty(Z0,"__esModule",{value:!0});Z0.DefiniteRangeConstraint=void 0;var art=Ur,ort=function(){function i(e){this.values=art.ValueMap.fromObject({max:e.max,min:e.min})}return i.prototype.constrain=function(e){var t=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(e,n),t)},i}();Z0.DefiniteRangeConstraint=ort;var fp={};Object.defineProperty(fp,"__esModule",{value:!0});fp.ListConstraint=void 0;var lrt=Ur,crt=function(){function i(e){this.values=lrt.ValueMap.fromObject({options:e})}return Object.defineProperty(i.prototype,"options",{get:function(){return this.values.get("options")},enumerable:!1,configurable:!0}),i.prototype.constrain=function(e){var t=this.values.get("options");if(t.length===0)return e;var n=t.filter(function(r){return r.value===e}).length>0;return n?e:t[0].value},i}();fp.ListConstraint=crt;var JA={};Object.defineProperty(JA,"__esModule",{value:!0});JA.RangeConstraint=void 0;var T7=vi,urt=Ur,hrt=function(){function i(e){this.values=urt.ValueMap.fromObject({max:e.max,min:e.min})}return Object.defineProperty(i.prototype,"maxValue",{get:function(){return this.values.get("max")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minValue",{get:function(){return this.values.get("min")},enumerable:!1,configurable:!0}),i.prototype.constrain=function(e){var t=this.values.get("max"),n=this.values.get("min"),r=e;return(0,T7.isEmpty)(n)||(r=Math.max(r,n)),(0,T7.isEmpty)(t)||(r=Math.min(r,t)),r},i}();JA.RangeConstraint=hrt;var Tv={};Object.defineProperty(Tv,"__esModule",{value:!0});Tv.StepConstraint=void 0;var frt=function(){function i(e,t){t===void 0&&(t=0),this.step=e,this.origin=t}return i.prototype.constrain=function(e){var t=this.origin%this.step,n=Math.round((e-t)/this.step);return t+n*this.step},i}();Tv.StepConstraint=frt;var EV={};Object.defineProperty(EV,"__esModule",{value:!0});var em={},ZA={};Object.defineProperty(ZA,"__esModule",{value:!0});ZA.ListView=void 0;var I7=Xa,drt=Sa,prt=Wi,US=(0,prt.ClassName)("lst"),mrt=function(){function i(e,t){var n=this;this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(US()),t.viewProps.bindClassModifiers(this.element);var r=e.createElement("select");r.classList.add(US("s")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;var s=e.createElement("div");s.classList.add(US("m")),s.appendChild((0,I7.createSvgIconElement)(e,"dropdown")),this.element.appendChild(s),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,(0,drt.bindValueMap)(this.props_,"options",function(a){(0,I7.removeChildElements)(n.selectElement),a.forEach(function(o){var l=e.createElement("option");l.textContent=o.text,n.selectElement.appendChild(l)}),n.update_()})}return i.prototype.update_=function(){var e=this.props_.get("options").map(function(t){return t.value});this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)},i.prototype.onValueChange_=function(){this.update_()},i}();ZA.ListView=mrt;Object.defineProperty(em,"__esModule",{value:!0});em.ListController=void 0;var grt=vi,vrt=ZA,_rt=function(){function i(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new vrt.ListView(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}return i.prototype.onSelectChange_=function(e){var t=(0,grt.forceCast)(e.currentTarget);this.value.rawValue=this.props.get("options")[t.selectedIndex].value},i}();em.ListController=_rt;var Iv={},eb={};Object.defineProperty(eb,"__esModule",{value:!0});eb.PopupView=void 0;var Art=Sa,brt=Wi,yrt=bl,P7=(0,brt.ClassName)("pop"),wrt=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(P7()),t.viewProps.bindClassModifiers(this.element),(0,Art.bindValue)(t.shows,(0,yrt.valueToClassName)(this.element,P7(void 0,"v")))}return i}();eb.PopupView=wrt;Object.defineProperty(Iv,"__esModule",{value:!0});Iv.PopupController=void 0;var xrt=vo,Crt=eb,Ert=function(){function i(e,t){this.shows=(0,xrt.createValue)(!1),this.viewProps=t.viewProps,this.view=new Crt.PopupView(e,{shows:this.shows,viewProps:this.viewProps})}return i}();Iv.PopupController=Ert;var Pv={},tb={};Object.defineProperty(tb,"__esModule",{value:!0});tb.TextView=void 0;var Srt=Wi,k7=(0,Srt.ClassName)("txt"),Mrt=function(){function i(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(k7()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);var n=e.createElement("input");n.classList.add(k7("i")),n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}return i.prototype.refresh=function(){var e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)},i.prototype.onChange_=function(){this.refresh()},i}();tb.TextView=Mrt;Object.defineProperty(Pv,"__esModule",{value:!0});Pv.TextController=void 0;var B7=vi,Trt=tb,Irt=function(){function i(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Trt.TextView(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return i.prototype.onInputChange_=function(e){var t=(0,B7.forceCast)(e.currentTarget),n=t.value,r=this.parser_(n);(0,B7.isEmpty)(r)||(this.value.rawValue=r),this.view.refresh()},i}();Pv.TextController=Irt;var SV={};Object.defineProperty(SV,"__esModule",{value:!0});var fh={};Object.defineProperty(fh,"__esModule",{value:!0});fh.BooleanFormatter=fh.boolFromUnknown=fh.boolToString=void 0;function MV(i){return String(i)}fh.boolToString=MV;function Prt(i){return i==="false"?!1:!!i}fh.boolFromUnknown=Prt;function krt(i){return MV(i)}fh.BooleanFormatter=krt;var TV={};Object.defineProperty(TV,"__esModule",{value:!0});var wa={},FC={},Ud={};Object.defineProperty(Ud,"__esModule",{value:!0});Ud.UnaryOperationNode=Ud.BinaryOperationNode=Ud.NumberLiteralNode=void 0;var Brt=function(){function i(e){this.text=e}return i.prototype.evaluate=function(){return Number(this.text)},i.prototype.toString=function(){return this.text},i}();Ud.NumberLiteralNode=Brt;var Rrt={"**":function(i,e){return Math.pow(i,e)},"*":function(i,e){return i*e},"/":function(i,e){return i/e},"%":function(i,e){return i%e},"+":function(i,e){return i+e},"-":function(i,e){return i-e},"<<":function(i,e){return i<<e},">>":function(i,e){return i>>e},">>>":function(i,e){return i>>>e},"&":function(i,e){return i&e},"^":function(i,e){return i^e},"|":function(i,e){return i|e}},Drt=function(){function i(e,t,n){this.left=t,this.operator=e,this.right=n}return i.prototype.evaluate=function(){var e=Rrt[this.operator];if(!e)throw new Error("unexpected binary operator: '".concat(this.operator));return e(this.left.evaluate(),this.right.evaluate())},i.prototype.toString=function(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")},i}();Ud.BinaryOperationNode=Drt;var Lrt={"+":function(i){return i},"-":function(i){return-i},"~":function(i){return~i}},Ort=function(){function i(e,t){this.operator=e,this.expression=t}return i.prototype.evaluate=function(){var e=Lrt[this.operator];if(!e)throw new Error("unexpected unary operator: '".concat(this.operator));return e(this.expression.evaluate())},i.prototype.toString=function(){return["u(",this.operator,this.expression.toString(),")"].join(" ")},i}();Ud.UnaryOperationNode=Ort;var Qg={};Object.defineProperty(Qg,"__esModule",{value:!0});Qg.readNumericLiteral=Qg.readWhitespace=void 0;function aP(i){return function(e,t){for(var n=0;n<i.length;n++){var r=i[n](e,t);if(r!=="")return r}return""}}function Nrt(i,e){var t,n=i.substr(e).match(/^\s+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}Qg.readWhitespace=Nrt;function Frt(i,e){var t=i.substr(e,1);return t.match(/^[1-9]$/)?t:""}function z1(i,e){var t,n=i.substr(e).match(/^[0-9]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function zrt(i,e){var t=z1(i,e);if(t!=="")return t;var n=i.substr(e,1);if(e+=1,n!=="-"&&n!=="+")return"";var r=z1(i,e);return r===""?"":n+r}function oP(i,e){var t=i.substr(e,1);if(e+=1,t.toLowerCase()!=="e")return"";var n=zrt(i,e);return n===""?"":t+n}function IV(i,e){var t=i.substr(e,1);if(t==="0")return t;var n=Frt(i,e);return e+=n.length,n===""?"":n+z1(i,e)}function Urt(i,e){var t=IV(i,e);if(e+=t.length,t==="")return"";var n=i.substr(e,1);if(e+=n.length,n!==".")return"";var r=z1(i,e);return e+=r.length,t+n+r+oP(i,e)}function Vrt(i,e){var t=i.substr(e,1);if(e+=t.length,t!==".")return"";var n=z1(i,e);return e+=n.length,n===""?"":t+n+oP(i,e)}function Hrt(i,e){var t=IV(i,e);return e+=t.length,t===""?"":t+oP(i,e)}var $rt=aP([Urt,Vrt,Hrt]);function Grt(i,e){var t,n=i.substr(e).match(/^[01]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function Qrt(i,e){var t=i.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0b")return"";var n=Grt(i,e);return n===""?"":t+n}function qrt(i,e){var t,n=i.substr(e).match(/^[0-7]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function jrt(i,e){var t=i.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0o")return"";var n=qrt(i,e);return n===""?"":t+n}function Wrt(i,e){var t,n=i.substr(e).match(/^[0-9a-f]+/i);return(t=n&&n[0])!==null&&t!==void 0?t:""}function Yrt(i,e){var t=i.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0x")return"";var n=Wrt(i,e);return n===""?"":t+n}var Xrt=aP([Qrt,jrt,Yrt]);Qg.readNumericLiteral=aP([Xrt,$rt]);Object.defineProperty(FC,"__esModule",{value:!0});FC.parseEcmaNumberExpression=void 0;var lP=Ud,qg=Qg;function Krt(i,e){var t=(0,qg.readNumericLiteral)(i,e);return e+=t.length,t===""?null:{evaluable:new lP.NumberLiteralNode(t),cursor:e}}function Jrt(i,e){var t=i.substr(e,1);if(e+=t.length,t!=="(")return null;var n=kV(i,e);if(!n)return null;e=n.cursor,e+=(0,qg.readWhitespace)(i,e).length;var r=i.substr(e,1);return e+=r.length,r!==")"?null:{evaluable:n.evaluable,cursor:e}}function Zrt(i,e){var t;return(t=Krt(i,e))!==null&&t!==void 0?t:Jrt(i,e)}function PV(i,e){var t=Zrt(i,e);if(t)return t;var n=i.substr(e,1);if(e+=n.length,n!=="+"&&n!=="-"&&n!=="~")return null;var r=PV(i,e);return r?(e=r.cursor,{cursor:e,evaluable:new lP.UnaryOperationNode(n,r.evaluable)}):null}function est(i,e,t){t+=(0,qg.readWhitespace)(e,t).length;var n=i.filter(function(r){return e.startsWith(r,t)})[0];return n?(t+=n.length,t+=(0,qg.readWhitespace)(e,t).length,{cursor:t,operator:n}):null}function tst(i,e){return function(t,n){var r=i(t,n);if(!r)return null;n=r.cursor;for(var s=r.evaluable;;){var a=est(e,t,n);if(!a)break;n=a.cursor;var o=i(t,n);if(!o)return null;n=o.cursor,s=new lP.BinaryOperationNode(a.operator,s,o.evaluable)}return s?{cursor:n,evaluable:s}:null}}var nst=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(function(i,e){return tst(i,e)},PV);function kV(i,e){return e+=(0,qg.readWhitespace)(i,e).length,nst(i,e)}function ist(i){var e=kV(i,0);if(!e)return null;var t=e.cursor+(0,qg.readWhitespace)(i,e.cursor).length;return t!==i.length?null:e.evaluable}FC.parseEcmaNumberExpression=ist;Object.defineProperty(wa,"__esModule",{value:!0});wa.createNumberFormatter=wa.numberToString=wa.numberFromUnknown=wa.parseNumber=void 0;var rst=vi,sst=FC;function BV(i){var e,t=(0,sst.parseEcmaNumberExpression)(i);return(e=t==null?void 0:t.evaluate())!==null&&e!==void 0?e:null}wa.parseNumber=BV;function ast(i){if(typeof i=="number")return i;if(typeof i=="string"){var e=BV(i);if(!(0,rst.isEmpty)(e))return e}return 0}wa.numberFromUnknown=ast;function ost(i){return String(i)}wa.numberToString=ost;function lst(i){return function(e){return e.toFixed(Math.max(Math.min(i,20),0))}}wa.createNumberFormatter=lst;var RV={};Object.defineProperty(RV,"__esModule",{value:!0});var nb={};Object.defineProperty(nb,"__esModule",{value:!0});nb.formatPercentage=void 0;var cst=wa,ust=(0,cst.createNumberFormatter)(0);function hst(i){return ust(i)+"%"}nb.formatPercentage=hst;var Jd={};Object.defineProperty(Jd,"__esModule",{value:!0});Jd.formatString=Jd.stringFromUnknown=void 0;function fst(i){return String(i)}Jd.stringFromUnknown=fst;function dst(i){return i}Jd.formatString=dst;var DV={};Object.defineProperty(DV,"__esModule",{value:!0});var Ff={};Object.defineProperty(Ff,"__esModule",{value:!0});Ff.connectValues=void 0;function pst(i){var e=i.primary,t=i.secondary,n=i.forward,r=i.backward,s=!1;function a(o){s||(s=!0,o(),s=!1)}e.emitter.on("change",function(o){a(function(){t.setRawValue(n(e,t),o.options)})}),t.emitter.on("change",function(o){a(function(){e.setRawValue(r(e,t),o.options)}),a(function(){t.setRawValue(n(e,t),o.options)})}),a(function(){t.setRawValue(n(e,t),{forceEmit:!1,last:!0})})}Ff.connectValues=pst;var zf={},Va={};Object.defineProperty(Va,"__esModule",{value:!0});Va.isArrowKey=Va.isVerticalArrowKey=Va.getHorizontalStepKeys=Va.getVerticalStepKeys=Va.getStepForKey=void 0;function mst(i,e){var t=i*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+t:e.downKey?-t:0}Va.getStepForKey=mst;function gst(i){return{altKey:i.altKey,downKey:i.key==="ArrowDown",shiftKey:i.shiftKey,upKey:i.key==="ArrowUp"}}Va.getVerticalStepKeys=gst;function vst(i){return{altKey:i.altKey,downKey:i.key==="ArrowLeft",shiftKey:i.shiftKey,upKey:i.key==="ArrowRight"}}Va.getHorizontalStepKeys=vst;function LV(i){return i==="ArrowUp"||i==="ArrowDown"}Va.isVerticalArrowKey=LV;function _st(i){return LV(i)||i==="ArrowLeft"||i==="ArrowRight"}Va.isArrowKey=_st;var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.PointerHandler=void 0;var Ast=qs;function VS(i,e){var t,n,r=e.ownerDocument.defaultView,s=e.getBoundingClientRect();return{x:i.pageX-(((t=r&&r.scrollX)!==null&&t!==void 0?t:0)+s.left),y:i.pageY-(((n=r&&r.scrollY)!==null&&n!==void 0?n:0)+s.top)}}var bst=function(){function i(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Ast.Emitter,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}return i.prototype.computePosition_=function(e){var t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}},i.prototype.onMouseDown_=function(e){var t;e.preventDefault(),(t=e.currentTarget)===null||t===void 0||t.focus();var n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(VS(e,this.elem_)),sender:this,shiftKey:e.shiftKey})},i.prototype.onDocumentMouseMove_=function(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(VS(e,this.elem_)),sender:this,shiftKey:e.shiftKey})},i.prototype.onDocumentMouseUp_=function(e){var t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(VS(e,this.elem_)),sender:this,shiftKey:e.shiftKey})},i.prototype.onTouchStart_=function(e){e.preventDefault();var t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t},i.prototype.onTouchMove_=function(e){var t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t},i.prototype.onTouchEnd_=function(e){var t,n=(t=e.targetTouches.item(0))!==null&&t!==void 0?t:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey})},i}();Eu.PointerHandler=bst;var ib={},Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.loopRange=Fr.constrainRange=Fr.getDecimalDigits=Fr.mapRange=void 0;function yst(i,e,t,n,r){var s=(i-e)/(t-e);return n+s*(r-n)}Fr.mapRange=yst;function wst(i){var e=String(i.toFixed(10)),t=e.split(".")[1];return t.replace(/0+$/,"").length}Fr.getDecimalDigits=wst;function xst(i,e,t){return Math.min(Math.max(i,e),t)}Fr.constrainRange=xst;function Cst(i,e){return(i%e+e)%e}Fr.loopRange=Cst;Object.defineProperty(ib,"__esModule",{value:!0});ib.NumberTextView=void 0;var HS=Xa,Est=Fr,OV=Wi,Ac=(0,OV.ClassName)("txt"),Sst=function(){function i(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Ac(),Ac(void 0,"num")),t.arrayPosition&&this.element.classList.add(Ac(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("input");n.classList.add(Ac("i")),n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Ac()),this.inputElement.classList.add(Ac("i"));var r=e.createElement("div");r.classList.add(Ac("k")),this.element.appendChild(r),this.knobElement=r;var s=e.createElementNS(HS.SVG_NS,"svg");s.classList.add(Ac("g")),this.knobElement.appendChild(s);var a=e.createElementNS(HS.SVG_NS,"path");a.classList.add(Ac("gb")),s.appendChild(a),this.guideBodyElem_=a;var o=e.createElementNS(HS.SVG_NS,"path");o.classList.add(Ac("gh")),s.appendChild(o),this.guideHeadElem_=o;var l=e.createElement("div");l.classList.add((0,OV.ClassName)("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}return i.prototype.onDraggingChange_=function(e){if(e.rawValue===null){this.element.classList.remove(Ac(void 0,"drg"));return}this.element.classList.add(Ac(void 0,"drg"));var t=e.rawValue/this.props_.get("draggingScale"),n=t+(t>0?-1:t<0?1:0),r=(0,Est.constrainRange)(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",["M ".concat(n+r,",0 L").concat(n,",4 L").concat(n+r,",8"),"M ".concat(t,",-1 L").concat(t,",9")].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d","M 0,4 L".concat(t,",4"));var s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left="".concat(t,"px")},i.prototype.refresh=function(){var e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)},i.prototype.onChange_=function(){this.refresh()},i}();ib.NumberTextView=Sst;Object.defineProperty(zf,"__esModule",{value:!0});zf.NumberTextController=void 0;var R7=vi,Mst=vo,lw=Va,Tst=Eu,Ist=ib,Pst=function(){function i(e,t){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=t.baseStep,this.parser_=t.parser,this.props=t.props,this.sliderProps_=(n=t.sliderProps)!==null&&n!==void 0?n:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=(0,Mst.createValue)(null),this.view=new Ist.NumberTextView(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);var r=new Tst.PointerHandler(this.view.knobElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}return i.prototype.constrainValue_=function(e){var t,n,r=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("minValue"),s=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("maxValue"),a=e;return r!==void 0&&(a=Math.max(a,r)),s!==void 0&&(a=Math.min(a,s)),a},i.prototype.onInputChange_=function(e){var t=(0,R7.forceCast)(e.currentTarget),n=t.value,r=this.parser_(n);(0,R7.isEmpty)(r)||(this.value.rawValue=this.constrainValue_(r)),this.view.refresh()},i.prototype.onInputKeyDown_=function(e){var t=(0,lw.getStepForKey)(this.baseStep_,(0,lw.getVerticalStepKeys)(e));t!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})},i.prototype.onInputKeyUp_=function(e){var t=(0,lw.getStepForKey)(this.baseStep_,(0,lw.getVerticalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i.prototype.onPointerDown_=function(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0},i.prototype.computeDraggingValue_=function(e){if(!e.point)return null;var t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("draggingScale"))},i.prototype.onPointerMove_=function(e){var t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)},i.prototype.onPointerUp_=function(e){var t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)},i}();zf.NumberTextController=Pst;var rb={},sb={};Object.defineProperty(sb,"__esModule",{value:!0});sb.SliderView=void 0;var D7=Fr,kst=Wi,$S=(0,kst.ClassName)("sld"),Bst=function(){function i(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add($S()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add($S("t")),t.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;var r=e.createElement("div");r.classList.add($S("k")),this.trackElement.appendChild(r),this.knobElement=r,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}return i.prototype.update_=function(){var e=(0,D7.constrainRange)((0,D7.mapRange)(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width="".concat(e,"%")},i.prototype.onChange_=function(){this.update_()},i}();sb.SliderView=Bst;Object.defineProperty(rb,"__esModule",{value:!0});rb.SliderController=void 0;var L7=Fr,cw=Va,Rst=Eu,Dst=sb,Lst=function(){function i(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=t.baseStep,this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new Dst.SliderView(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Rst.PointerHandler(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}return i.prototype.handlePointerEvent_=function(e,t){e.point&&this.value.setRawValue((0,L7.mapRange)((0,L7.constrainRange)(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),t)},i.prototype.onPointerDownOrMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},i.prototype.onKeyDown_=function(e){var t=(0,cw.getStepForKey)(this.baseStep_,(0,cw.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})},i.prototype.onKeyUp_=function(e){var t=(0,cw.getStepForKey)(this.baseStep_,(0,cw.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i}();rb.SliderController=Lst;var ab={},ob={};Object.defineProperty(ob,"__esModule",{value:!0});ob.SliderTextView=void 0;var Ost=Wi,GS=(0,Ost.ClassName)("sldtxt"),Nst=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(GS());var n=e.createElement("div");n.classList.add(GS("s")),this.sliderView_=t.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);var r=e.createElement("div");r.classList.add(GS("t")),this.textView_=t.textView,r.appendChild(this.textView_.element),this.element.appendChild(r)}return i}();ob.SliderTextView=Nst;Object.defineProperty(ab,"__esModule",{value:!0});ab.SliderTextController=void 0;var Fst=ob,zst=zf,Ust=rb,Vst=function(){function i(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new Ust.SliderController(e,{baseStep:t.baseStep,props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new zst.NumberTextController(e,{baseStep:t.baseStep,parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new Fst.SliderTextView(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}return Object.defineProperty(i.prototype,"sliderController",{get:function(){return this.sliderC_},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textController",{get:function(){return this.textC_},enumerable:!1,configurable:!0}),i}();ab.SliderTextController=Vst;var NV={};Object.defineProperty(NV,"__esModule",{value:!0});var FV={};Object.defineProperty(FV,"__esModule",{value:!0});var dp={};Object.defineProperty(dp,"__esModule",{value:!0});dp.writePrimitive=void 0;function Hst(i,e){i.write(e)}dp.writePrimitive=Hst;var jr={};Object.defineProperty(jr,"__esModule",{value:!0});jr.getSuitableDraggingScale=jr.getBaseStep=jr.getSuitableDecimalDigits=jr.createListConstraint=jr.normalizeListOptions=jr.parsePointDimensionParams=jr.parsePickerLayout=jr.parseListOptions=void 0;var O7=vi,cP=_u,$st=fp,uP=Tv,N7=Fr,zV=fa;function Gst(i){var e=zV.ParamsParsers;if(Array.isArray(i))return e.required.array(e.required.object({text:e.required.string,value:e.required.raw}))(i).value;if(typeof i=="object")return e.required.raw(i).value}jr.parseListOptions=Gst;function Qst(i){if(i==="inline"||i==="popup")return i}jr.parsePickerLayout=Qst;function qst(i){var e=zV.ParamsParsers;return e.required.object({max:e.optional.number,min:e.optional.number,step:e.optional.number})(i).value}jr.parsePointDimensionParams=qst;function UV(i){if(Array.isArray(i))return i;var e=[];return Object.keys(i).forEach(function(t){e.push({text:t,value:i[t]})}),e}jr.normalizeListOptions=UV;function jst(i){return(0,O7.isEmpty)(i)?null:new $st.ListConstraint(UV((0,O7.forceCast)(i)))}jr.createListConstraint=jst;function Wst(i){var e=i?(0,cP.findConstraint)(i,uP.StepConstraint):null;return e?e.step:null}function Yst(i,e){var t=i&&(0,cP.findConstraint)(i,uP.StepConstraint);return t?(0,N7.getDecimalDigits)(t.step):Math.max((0,N7.getDecimalDigits)(e),2)}jr.getSuitableDecimalDigits=Yst;function Xst(i){var e=Wst(i);return e??1}jr.getBaseStep=Xst;function Kst(i,e){var t,n=i&&(0,cP.findConstraint)(i,uP.StepConstraint),r=Math.abs((t=n==null?void 0:n.step)!==null&&t!==void 0?t:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}jr.getSuitableDraggingScale=Kst;var lb={},zC={};Object.defineProperty(zC,"__esModule",{value:!0});zC.CheckboxView=void 0;var Jst=Xa,Zst=Wi,uw=(0,Zst.ClassName)("ckb"),eat=function(){function i(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(uw()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("label");n.classList.add(uw("l")),this.element.appendChild(n);var r=e.createElement("input");r.classList.add(uw("i")),r.type="checkbox",n.appendChild(r),this.inputElement=r,t.viewProps.bindDisabled(this.inputElement);var s=e.createElement("div");s.classList.add(uw("w")),n.appendChild(s);var a=(0,Jst.createSvgIconElement)(e,"check");s.appendChild(a),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}return i.prototype.update_=function(){this.inputElement.checked=this.value.rawValue},i.prototype.onValueChange_=function(){this.update_()},i}();zC.CheckboxView=eat;Object.defineProperty(lb,"__esModule",{value:!0});lb.CheckboxController=void 0;var tat=vi,nat=zC,iat=function(){function i(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new nat.CheckboxView(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return i.prototype.onInputChange_=function(e){var t=(0,tat.forceCast)(e.currentTarget);this.value.rawValue=t.checked},i}();lb.CheckboxController=iat;var cb={};Object.defineProperty(cb,"__esModule",{value:!0});cb.BooleanInputPlugin=void 0;var VV=_u,rat=fp,sat=em,aat=fh,oat=Ur,F7=fa,lat=dp,HV=jr,cat=lb;function uat(i){var e=[],t=(0,HV.createListConstraint)(i.options);return t&&e.push(t),new VV.CompositeConstraint(e)}cb.BooleanInputPlugin={id:"input-bool",type:"input",accept:function(i,e){if(typeof i!="boolean")return null;var t=F7.ParamsParsers,n=(0,F7.parseParams)(e,{options:t.optional.custom(HV.parseListOptions)});return n?{initialValue:i,params:n}:null},binding:{reader:function(i){return aat.boolFromUnknown},constraint:function(i){return uat(i.params)},writer:function(i){return lat.writePrimitive}},controller:function(i){var e=i.document,t=i.value,n=i.constraint,r=n&&(0,VV.findConstraint)(n,rat.ListConstraint);return r?new sat.ListController(e,{props:new oat.ValueMap({options:r.values.value("options")}),value:t,viewProps:i.viewProps}):new cat.CheckboxController(e,{value:t,viewProps:i.viewProps})}};var tm={},UC={};Object.defineProperty(UC,"__esModule",{value:!0});UC.ColorView=void 0;var hat=Sa,fat=Wi,dat=bl,qp=(0,fat.ClassName)("col"),pat=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(qp()),t.foldable.bindExpandedClass(this.element,qp(void 0,"expanded")),(0,hat.bindValueMap)(t.foldable,"completed",(0,dat.valueToClassName)(this.element,qp(void 0,"cpl")));var n=e.createElement("div");n.classList.add(qp("h")),this.element.appendChild(n);var r=e.createElement("div");r.classList.add(qp("s")),n.appendChild(r),this.swatchElement=r;var s=e.createElement("div");if(s.classList.add(qp("t")),n.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){var a=e.createElement("div");a.classList.add(qp("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null}return i}();UC.ColorView=pat;var VC={},_o={},Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.convertColor=Ts.constrainColorComponents=Ts.getColorMaxComponents=Ts.appendAlphaComponent=Ts.removeAlphaComponent=Ts.hsvToHslInt=Ts.hslToHsvInt=Ts.hsvToRgbInt=void 0;var co=Fr;function mat(i,e,t){var n=(0,co.constrainRange)(i/255,0,1),r=(0,co.constrainRange)(e/255,0,1),s=(0,co.constrainRange)(t/255,0,1),a=Math.max(n,r,s),o=Math.min(n,r,s),l=a-o,c=0,u=0,h=(o+a)/2;return l!==0&&(u=l/(1-Math.abs(a+o-1)),n===a?c=(r-s)/l:r===a?c=2+(s-n)/l:c=4+(n-r)/l,c=c/6+(c<0?1:0)),[c*360,u*100,h*100]}function gat(i,e,t){var n,r,s,a,o,l,c=(i%360+360)%360,u=(0,co.constrainRange)(e/100,0,1),h=(0,co.constrainRange)(t/100,0,1),f=(1-Math.abs(2*h-1))*u,d=f*(1-Math.abs(c/60%2-1)),g=h-f/2,v,A,_;return c>=0&&c<60?(n=[f,d,0],v=n[0],A=n[1],_=n[2]):c>=60&&c<120?(r=[d,f,0],v=r[0],A=r[1],_=r[2]):c>=120&&c<180?(s=[0,f,d],v=s[0],A=s[1],_=s[2]):c>=180&&c<240?(a=[0,d,f],v=a[0],A=a[1],_=a[2]):c>=240&&c<300?(o=[d,0,f],v=o[0],A=o[1],_=o[2]):(l=[f,0,d],v=l[0],A=l[1],_=l[2]),[(v+g)*255,(A+g)*255,(_+g)*255]}function vat(i,e,t){var n=(0,co.constrainRange)(i/255,0,1),r=(0,co.constrainRange)(e/255,0,1),s=(0,co.constrainRange)(t/255,0,1),a=Math.max(n,r,s),o=Math.min(n,r,s),l=a-o,c;l===0?c=0:a===n?c=60*(((r-s)/l%6+6)%6):a===r?c=60*((s-n)/l+2):c=60*((n-r)/l+4);var u=a===0?0:l/a,h=a;return[c,u*100,h*100]}function $V(i,e,t){var n,r,s,a,o,l,c=(0,co.loopRange)(i,360),u=(0,co.constrainRange)(e/100,0,1),h=(0,co.constrainRange)(t/100,0,1),f=h*u,d=f*(1-Math.abs(c/60%2-1)),g=h-f,v,A,_;return c>=0&&c<60?(n=[f,d,0],v=n[0],A=n[1],_=n[2]):c>=60&&c<120?(r=[d,f,0],v=r[0],A=r[1],_=r[2]):c>=120&&c<180?(s=[0,f,d],v=s[0],A=s[1],_=s[2]):c>=180&&c<240?(a=[0,d,f],v=a[0],A=a[1],_=a[2]):c>=240&&c<300?(o=[d,0,f],v=o[0],A=o[1],_=o[2]):(l=[f,0,d],v=l[0],A=l[1],_=l[2]),[(v+g)*255,(A+g)*255,(_+g)*255]}Ts.hsvToRgbInt=$V;function GV(i,e,t){var n=t+e*(100-Math.abs(2*t-100))/200;return[i,n!==0?e*(100-Math.abs(2*t-100))/n:0,t+e*(100-Math.abs(2*t-100))/(2*100)]}Ts.hslToHsvInt=GV;function QV(i,e,t){var n=100-Math.abs(t*(200-e)/100-100);return[i,n!==0?e*t/n:0,t*(200-e)/(2*100)]}Ts.hsvToHslInt=QV;function _at(i){return[i[0],i[1],i[2]]}Ts.removeAlphaComponent=_at;function Aat(i,e){return[i[0],i[1],i[2],e]}Ts.appendAlphaComponent=Aat;var bat={hsl:{hsl:function(i,e,t){return[i,e,t]},hsv:GV,rgb:gat},hsv:{hsl:QV,hsv:function(i,e,t){return[i,e,t]},rgb:$V},rgb:{hsl:mat,hsv:vat,rgb:function(i,e,t){return[i,e,t]}}};function Vx(i,e){return[e==="float"?1:i==="rgb"?255:360,e==="float"?1:i==="rgb"?255:100,e==="float"?1:i==="rgb"?255:100]}Ts.getColorMaxComponents=Vx;function yat(i,e){return i===e?e:(0,co.loopRange)(i,e)}function wat(i,e,t){var n,r=Vx(e,t);return[e==="rgb"?(0,co.constrainRange)(i[0],0,r[0]):yat(i[0],r[0]),(0,co.constrainRange)(i[1],0,r[1]),(0,co.constrainRange)(i[2],0,r[2]),(0,co.constrainRange)((n=i[3])!==null&&n!==void 0?n:1,0,1)]}Ts.constrainColorComponents=wat;function z7(i,e,t,n){var r=Vx(e,t),s=Vx(e,n);return i.map(function(a,o){return a/r[o]*s[o]})}function xat(i,e,t){var n,r=z7(i,e.mode,e.type,"int"),s=(n=bat[e.mode])[t.mode].apply(n,r);return z7(s,t.mode,"int",t.type)}Ts.convertColor=xat;Object.defineProperty(_o,"__esModule",{value:!0});_o.Color=void 0;var Cat=vi,hw=Ts;function fw(i,e){return typeof i!="object"||(0,Cat.isEmpty)(i)?!1:e in i&&typeof i[e]=="number"}var Eat=function(){function i(e,t,n){n===void 0&&(n="int"),this.mode=t,this.type=n,this.comps_=(0,hw.constrainColorComponents)(e,t,n)}return i.black=function(e){return e===void 0&&(e="int"),new i([0,0,0],"rgb",e)},i.fromObject=function(e,t){t===void 0&&(t="int");var n="a"in e?[e.r,e.g,e.b,e.a]:[e.r,e.g,e.b];return new i(n,"rgb",t)},i.toRgbaObject=function(e,t){return t===void 0&&(t="int"),e.toRgbaObject(t)},i.isRgbColorObject=function(e){return fw(e,"r")&&fw(e,"g")&&fw(e,"b")},i.isRgbaColorObject=function(e){return this.isRgbColorObject(e)&&fw(e,"a")},i.isColorObject=function(e){return this.isRgbColorObject(e)},i.equals=function(e,t){if(e.mode!==t.mode)return!1;for(var n=e.comps_,r=t.comps_,s=0;s<n.length;s++)if(n[s]!==r[s])return!1;return!0},i.prototype.getComponents=function(e,t){return t===void 0&&(t="int"),(0,hw.appendAlphaComponent)((0,hw.convertColor)((0,hw.removeAlphaComponent)(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:t}),this.comps_[3])},i.prototype.toRgbaObject=function(e){e===void 0&&(e="int");var t=this.getComponents("rgb",e);return{r:t[0],g:t[1],b:t[2],a:t[3]}},i}();_o.Color=Eat;var HC={},Sat=bt&&bt.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(HC,"__esModule",{value:!0});HC.ColorPickerView=void 0;var Mat=Wi,fd=(0,Mat.ClassName)("colp"),Tat=function(){function i(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(fd()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add(fd("hsv"));var r=e.createElement("div");r.classList.add(fd("sv")),this.svPaletteView_=t.svPaletteView,r.appendChild(this.svPaletteView_.element),n.appendChild(r);var s=e.createElement("div");s.classList.add(fd("h")),this.hPaletteView_=t.hPaletteView,s.appendChild(this.hPaletteView_.element),n.appendChild(s),this.element.appendChild(n);var a=e.createElement("div");if(a.classList.add(fd("rgb")),this.textView_=t.textView,a.appendChild(this.textView_.element),this.element.appendChild(a),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};var o=e.createElement("div");o.classList.add(fd("a"));var l=e.createElement("div");l.classList.add(fd("ap")),l.appendChild(this.alphaViews_.palette.element),o.appendChild(l);var c=e.createElement("div");c.classList.add(fd("at")),c.appendChild(this.alphaViews_.text.element),o.appendChild(c),this.element.appendChild(o)}}return Object.defineProperty(i.prototype,"allFocusableElements",{get:function(){var e=Sat([this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement],this.textView_.textViews.map(function(t){return t.inputElement}),!0);return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e},enumerable:!1,configurable:!0}),i}();HC.ColorPickerView=Tat;var $C={},dl={};Object.defineProperty(dl,"__esModule",{value:!0});dl.extractColorType=dl.getBaseStepForColor=dl.parseColorInputParams=void 0;var U7=fa,Iat=jr;function Pat(i){return i==="int"?"int":i==="float"?"float":void 0}function kat(i){var e=U7.ParamsParsers;return(0,U7.parseParams)(i,{alpha:e.optional.boolean,color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(Pat)}),expanded:e.optional.boolean,picker:e.optional.custom(Iat.parsePickerLayout)})}dl.parseColorInputParams=kat;function Bat(i){return i?.1:1}dl.getBaseStepForColor=Bat;function Rat(i){var e;return(e=i.color)===null||e===void 0?void 0:e.type}dl.extractColorType=Rat;var GC={},Uf={};(function(i){var e=bt&&bt.__assign||function(){return e=Object.assign||function(me){for(var te,Se=1,j=arguments.length;Se<j;Se++){te=arguments[Se];for(var q in te)Object.prototype.hasOwnProperty.call(te,q)&&(me[q]=te[q])}return me},e.apply(this,arguments)},t=bt&&bt.__spreadArray||function(me,te,Se){if(Se||arguments.length===2)for(var j=0,q=te.length,Ve;j<q;j++)(Ve||!(j in te))&&(Ve||(Ve=Array.prototype.slice.call(te,0,j)),Ve[j]=te[j]);return me.concat(Ve||Array.prototype.slice.call(te))};Object.defineProperty(i,"__esModule",{value:!0}),i.findColorStringifier=i.getColorStringifier=i.colorToObjectRgbaString=i.colorToObjectRgbString=i.colorToFunctionalHslaString=i.colorToFunctionalHslString=i.colorToFunctionalRgbaString=i.colorToFunctionalRgbString=i.colorToHexRgbaString=i.colorToHexRgbString=i.colorFromString=i.hasAlphaComponent=i.createColorStringParser=i.createColorStringBindingReader=i.CompositeColorParser=i.detectStringColorFormat=i.getColorNotation=void 0;var n=wa,r=nb,s=Fr,a=_o,o=Ts;function l(me,te){return me.alpha===te.alpha&&me.mode===te.mode&&me.notation===te.notation&&me.type===te.type}function c(me,te){var Se=me.match(/^(.+)%$/);return Math.min(Se?parseFloat(Se[1])*.01*te:parseFloat(me),te)}var u={deg:function(me){return me},grad:function(me){return me*360/400},rad:function(me){return me*360/(2*Math.PI)},turn:function(me){return me*360}};function h(me){var te=me.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!te)return parseFloat(me);var Se=parseFloat(te[1]),j=te[2];return u[j](Se)}function f(me){var te=me.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!te)return null;var Se=[c(te[1],255),c(te[2],255),c(te[3],255)];return isNaN(Se[0])||isNaN(Se[1])||isNaN(Se[2])?null:Se}function d(me){return function(te){var Se=f(te);return Se?new a.Color(Se,"rgb",me):null}}function g(me){var te=me.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!te)return null;var Se=[c(te[1],255),c(te[2],255),c(te[3],255),c(te[4],1)];return isNaN(Se[0])||isNaN(Se[1])||isNaN(Se[2])||isNaN(Se[3])?null:Se}function v(me){return function(te){var Se=g(te);return Se?new a.Color(Se,"rgb",me):null}}function A(me){var te=me.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!te)return null;var Se=[h(te[1]),c(te[2],100),c(te[3],100)];return isNaN(Se[0])||isNaN(Se[1])||isNaN(Se[2])?null:Se}function _(me){return function(te){var Se=A(te);return Se?new a.Color(Se,"hsl",me):null}}function y(me){var te=me.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!te)return null;var Se=[h(te[1]),c(te[2],100),c(te[3],100),c(te[4],1)];return isNaN(Se[0])||isNaN(Se[1])||isNaN(Se[2])||isNaN(Se[3])?null:Se}function x(me){return function(te){var Se=y(te);return Se?new a.Color(Se,"hsl",me):null}}function C(me){var te=me.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(te)return[parseInt(te[1]+te[1],16),parseInt(te[2]+te[2],16),parseInt(te[3]+te[3],16)];var Se=me.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return Se?[parseInt(Se[1],16),parseInt(Se[2],16),parseInt(Se[3],16)]:null}function S(me){var te=C(me);return te?new a.Color(te,"rgb","int"):null}function I(me){var te=me.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(te)return[parseInt(te[1]+te[1],16),parseInt(te[2]+te[2],16),parseInt(te[3]+te[3],16),(0,s.mapRange)(parseInt(te[4]+te[4],16),0,255,0,1)];var Se=me.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return Se?[parseInt(Se[1],16),parseInt(Se[2],16),parseInt(Se[3],16),(0,s.mapRange)(parseInt(Se[4],16),0,255,0,1)]:null}function P(me){var te=I(me);return te?new a.Color(te,"rgb","int"):null}function B(me){var te=me.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!te)return null;var Se=[parseFloat(te[1]),parseFloat(te[2]),parseFloat(te[3])];return isNaN(Se[0])||isNaN(Se[1])||isNaN(Se[2])?null:Se}function M(me){return function(te){var Se=B(te);return Se?new a.Color(Se,"rgb",me):null}}function D(me){var te=me.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!te)return null;var Se=[parseFloat(te[1]),parseFloat(te[2]),parseFloat(te[3]),parseFloat(te[4])];return isNaN(Se[0])||isNaN(Se[1])||isNaN(Se[2])||isNaN(Se[3])?null:Se}function F(me){return function(te){var Se=D(te);return Se?new a.Color(Se,"rgb",me):null}}var z={"func.rgb":d("int"),"func.rgba":v("int"),"func.hsl":_("int"),"func.hsla":x("int"),"hex.rgb":S,"hex.rgba":P};function U(me){var te=Object.keys(z);return te.reduce(function(Se,j){if(Se)return Se;var q=z[j];return q(me)?j:null},null)}i.getColorNotation=U;var $=[{parser:C,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:I,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:f,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:g,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:A,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:y,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:B,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:D,result:{alpha:!0,mode:"rgb",notation:"object"}}];function O(me){return $.reduce(function(te,Se){var j=Se.parser,q=Se.result;return te||(j(me)?q:null)},null)}function ie(me,te){te===void 0&&(te="int");var Se=O(me);return Se?Se.notation==="hex"&&te!=="float"?e(e({},Se),{type:"int"}):Se.notation==="func"?e(e({},Se),{type:te}):null:null}i.detectStringColorFormat=ie;var W=function(me){var te=U(me);return te?z[te](me):null};i.CompositeColorParser=W;var J={int:[S,P,d("int"),v("int"),_("int"),x("int"),M("int"),F("int")],float:[d("float"),v("float"),_("float"),x("float"),M("float"),F("float")]};function Ce(me){var te=J[me];return function(Se){if(typeof Se!="string")return a.Color.black(me);var j=te.reduce(function(q,Ve){return q||Ve(Se)},null);return j??a.Color.black(me)}}i.createColorStringBindingReader=Ce;function Me(me){var te=J[me];return function(Se){return te.reduce(function(j,q){return j||q(Se)},null)}}i.createColorStringParser=Me;function ge(me){return me==="func.hsla"||me==="func.rgba"||me==="hex.rgba"}i.hasAlphaComponent=ge;function ve(me){if(typeof me=="string"){var te=(0,i.CompositeColorParser)(me);if(te)return te}return a.Color.black()}i.colorFromString=ve;function nt(me){var te=(0,s.constrainRange)(Math.floor(me),0,255).toString(16);return te.length===1?"0".concat(te):te}function $e(me,te){te===void 0&&(te="#");var Se=(0,o.removeAlphaComponent)(me.getComponents("rgb")).map(nt).join("");return"".concat(te).concat(Se)}i.colorToHexRgbString=$e;function X(me,te){te===void 0&&(te="#");var Se=me.getComponents("rgb"),j=[Se[0],Se[1],Se[2],Se[3]*255].map(nt).join("");return"".concat(te).concat(j)}i.colorToHexRgbaString=X;function Be(me,te){var Se=(0,n.createNumberFormatter)(te==="float"?2:0),j=(0,o.removeAlphaComponent)(me.getComponents("rgb",te)).map(function(q){return Se(q)});return"rgb(".concat(j.join(", "),")")}i.colorToFunctionalRgbString=Be;function mt(me){return function(te){return Be(te,me)}}function Ue(me,te){var Se=(0,n.createNumberFormatter)(2),j=(0,n.createNumberFormatter)(te==="float"?2:0),q=me.getComponents("rgb",te).map(function(Ve,ct){var ne=ct===3?Se:j;return ne(Ve)});return"rgba(".concat(q.join(", "),")")}i.colorToFunctionalRgbaString=Ue;function Tt(me){return function(te){return Ue(te,me)}}function yt(me){var te=[(0,n.createNumberFormatter)(0),r.formatPercentage,r.formatPercentage],Se=(0,o.removeAlphaComponent)(me.getComponents("hsl")).map(function(j,q){return te[q](j)});return"hsl(".concat(Se.join(", "),")")}i.colorToFunctionalHslString=yt;function Ye(me){var te=[(0,n.createNumberFormatter)(0),r.formatPercentage,r.formatPercentage,(0,n.createNumberFormatter)(2)],Se=me.getComponents("hsl").map(function(j,q){return te[q](j)});return"hsla(".concat(Se.join(", "),")")}i.colorToFunctionalHslaString=Ye;function lt(me,te){var Se=(0,n.createNumberFormatter)(te==="float"?2:0),j=["r","g","b"],q=(0,o.removeAlphaComponent)(me.getComponents("rgb",te)).map(function(Ve,ct){return"".concat(j[ct],": ").concat(Se(Ve))});return"{".concat(q.join(", "),"}")}i.colorToObjectRgbString=lt;function ue(me){return function(te){return lt(te,me)}}function dt(me,te){var Se=(0,n.createNumberFormatter)(2),j=(0,n.createNumberFormatter)(te==="float"?2:0),q=["r","g","b","a"],Ve=me.getComponents("rgb",te).map(function(ct,ne){var Je=ne===3?Se:j;return"".concat(q[ne],": ").concat(Je(ct))});return"{".concat(Ve.join(", "),"}")}i.colorToObjectRgbaString=dt;function le(me){return function(te){return dt(te,me)}}var he={"func.hsl":yt,"func.hsla":Ye,"func.rgb":Be,"func.rgba":Ue,"hex.rgb":$e,"hex.rgba":X};function xe(me){return he[me]}i.getColorStringifier=xe;var pt=t([{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:$e},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:X},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:yt},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:Ye}],["int","float"].reduce(function(me,te){return t(t([],me,!0),[{format:{alpha:!1,mode:"rgb",notation:"func",type:te},stringifier:mt(te)},{format:{alpha:!0,mode:"rgb",notation:"func",type:te},stringifier:Tt(te)},{format:{alpha:!1,mode:"rgb",notation:"object",type:te},stringifier:ue(te)},{format:{alpha:!0,mode:"rgb",notation:"object",type:te},stringifier:le(te)}],!1)},[]),!0);function Ze(me){return pt.reduce(function(te,Se){return te||(l(Se.format,me)?Se.stringifier:null)},null)}i.findColorStringifier=Ze})(Uf);Object.defineProperty(GC,"__esModule",{value:!0});GC.APaletteView=void 0;var Dat=Fr,Lat=Wi,QS=Uf,V7=_o,P_=(0,Lat.ClassName)("apl"),Oat=function(){function i(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(P_()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);var n=e.createElement("div");n.classList.add(P_("b")),this.element.appendChild(n);var r=e.createElement("div");r.classList.add(P_("c")),n.appendChild(r),this.colorElem_=r;var s=e.createElement("div");s.classList.add(P_("m")),this.element.appendChild(s),this.markerElem_=s;var a=e.createElement("div");a.classList.add(P_("p")),this.markerElem_.appendChild(a),this.previewElem_=a,this.update_()}return i.prototype.update_=function(){var e=this.value.rawValue,t=e.getComponents("rgb"),n=new V7.Color([t[0],t[1],t[2],0],"rgb"),r=new V7.Color([t[0],t[1],t[2],255],"rgb"),s=["to right",(0,QS.colorToFunctionalRgbaString)(n),(0,QS.colorToFunctionalRgbaString)(r)];this.colorElem_.style.background="linear-gradient(".concat(s.join(","),")"),this.previewElem_.style.backgroundColor=(0,QS.colorToFunctionalRgbaString)(e);var a=(0,Dat.mapRange)(t[3],0,1,0,100);this.markerElem_.style.left="".concat(a,"%")},i.prototype.onValueChange_=function(){this.update_()},i}();GC.APaletteView=Oat;Object.defineProperty($C,"__esModule",{value:!0});$C.APaletteController=void 0;var dw=Va,Nat=Eu,H7=_o,$7=dl,Fat=GC,zat=function(){function i(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Fat.APaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Nat.PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return i.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=e.point.x/e.bounds.width,r=this.value.rawValue,s=r.getComponents("hsv"),a=s[0],o=s[1],l=s[2];this.value.setRawValue(new H7.Color([a,o,l,n],"hsv"),t)}},i.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},i.prototype.onKeyDown_=function(e){var t=(0,dw.getStepForKey)((0,$7.getBaseStepForColor)(!0),(0,dw.getHorizontalStepKeys)(e));if(t!==0){var n=this.value.rawValue,r=n.getComponents("hsv"),s=r[0],a=r[1],o=r[2],l=r[3];this.value.setRawValue(new H7.Color([s,a,o,l+t],"hsv"),{forceEmit:!1,last:!1})}},i.prototype.onKeyUp_=function(e){var t=(0,dw.getStepForKey)((0,$7.getBaseStepForColor)(!0),(0,dw.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i}();$C.APaletteController=zat;var QC={},qC={};Object.defineProperty(qC,"__esModule",{value:!0});qC.ColorTextView=void 0;var G7=Xa,Uat=Sa,Vat=Wi,jm=(0,Vat.ClassName)("coltxt");function Hat(i){var e=i.createElement("select"),t=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return e.appendChild(t.reduce(function(n,r){var s=i.createElement("option");return s.textContent=r.text,s.value=r.value,n.appendChild(s),n},i.createDocumentFragment())),e}var $at=function(){function i(e,t){var n=this;this.element=e.createElement("div"),this.element.classList.add(jm()),t.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(jm("m")),this.modeElem_=Hat(e),this.modeElem_.classList.add(jm("ms")),r.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);var s=e.createElement("div");s.classList.add(jm("mm")),s.appendChild((0,G7.createSvgIconElement)(e,"dropdown")),r.appendChild(s),this.element.appendChild(r);var a=e.createElement("div");a.classList.add(jm("w")),this.element.appendChild(a),this.textsElem_=a,this.textViews_=t.textViews,this.applyTextViews_(),(0,Uat.bindValue)(t.colorMode,function(o){n.modeElem_.value=o})}return Object.defineProperty(i.prototype,"modeSelectElement",{get:function(){return this.modeElem_},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textViews",{get:function(){return this.textViews_},set:function(e){this.textViews_=e,this.applyTextViews_()},enumerable:!1,configurable:!0}),i.prototype.applyTextViews_=function(){var e=this;(0,G7.removeChildElements)(this.textsElem_);var t=this.element.ownerDocument;this.textViews_.forEach(function(n){var r=t.createElement("div");r.classList.add(jm("c")),r.appendChild(n.element),e.textsElem_.appendChild(r)})},i}();qC.ColorTextView=$at;Object.defineProperty(QC,"__esModule",{value:!0});QC.ColorTextController=void 0;var Gat=Z0,Qat=wa,qat=Ur,jat=Ff,qV=vo,Wat=zf,Yat=_o,ZM=Ts,Xat=dl,Kat=qC;function Jat(i){return(0,Qat.createNumberFormatter)(i==="float"?2:0)}function Zat(i,e,t){var n=(0,ZM.getColorMaxComponents)(i,e)[t];return new Gat.DefiniteRangeConstraint({min:0,max:n})}function qS(i,e,t){return new Wat.NumberTextController(i,{arrayPosition:t===0?"fst":t===3-1?"lst":"mid",baseStep:(0,Xat.getBaseStepForColor)(!1),parser:e.parser,props:qat.ValueMap.fromObject({draggingScale:e.colorType==="float"?.01:1,formatter:Jat(e.colorType)}),value:(0,qV.createValue)(0,{constraint:Zat(e.colorMode,e.colorType,t)}),viewProps:e.viewProps})}var eot=function(){function i(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.parser_=t.parser,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=(0,qV.createValue)(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new Kat.ColorTextView(e,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}return i.prototype.createComponentControllers_=function(e){var t=this,n={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},r=[qS(e,n,0),qS(e,n,1),qS(e,n,2)];return r.forEach(function(s,a){(0,jat.connectValues)({primary:t.value,secondary:s.value,forward:function(o){return o.rawValue.getComponents(t.colorMode.rawValue,t.colorType_)[a]},backward:function(o,l){var c=t.colorMode.rawValue,u=o.rawValue.getComponents(c,t.colorType_);return u[a]=l.rawValue,new Yat.Color((0,ZM.appendAlphaComponent)((0,ZM.removeAlphaComponent)(u),u[3]),c,t.colorType_)}})}),r},i.prototype.onModeSelectChange_=function(e){var t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]},i}();QC.ColorTextController=eot;var jC={},WC={};Object.defineProperty(WC,"__esModule",{value:!0});WC.HPaletteView=void 0;var tot=Fr,not=Wi,iot=Uf,rot=_o,jS=(0,not.ClassName)("hpl"),sot=function(){function i(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(jS()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);var n=e.createElement("div");n.classList.add(jS("c")),this.element.appendChild(n);var r=e.createElement("div");r.classList.add(jS("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}return i.prototype.update_=function(){var e=this.value.rawValue,t=e.getComponents("hsv")[0];this.markerElem_.style.backgroundColor=(0,iot.colorToFunctionalRgbString)(new rot.Color([t,100,100],"hsv"));var n=(0,tot.mapRange)(t,0,360,0,100);this.markerElem_.style.left="".concat(n,"%")},i.prototype.onValueChange_=function(){this.update_()},i}();WC.HPaletteView=sot;Object.defineProperty(jC,"__esModule",{value:!0});jC.HPaletteController=void 0;var Q7=Fr,pw=Va,aot=Eu,q7=_o,j7=dl,oot=WC,lot=function(){function i(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new oot.HPaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new aot.PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return i.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=(0,Q7.mapRange)((0,Q7.constrainRange)(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),r=this.value.rawValue,s=r.getComponents("hsv"),a=s[1],o=s[2],l=s[3];this.value.setRawValue(new q7.Color([n,a,o,l],"hsv"),t)}},i.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},i.prototype.onKeyDown_=function(e){var t=(0,pw.getStepForKey)((0,j7.getBaseStepForColor)(!1),(0,pw.getHorizontalStepKeys)(e));if(t!==0){var n=this.value.rawValue,r=n.getComponents("hsv"),s=r[0],a=r[1],o=r[2],l=r[3];this.value.setRawValue(new q7.Color([s+t,a,o,l],"hsv"),{forceEmit:!1,last:!1})}},i.prototype.onKeyUp_=function(e){var t=(0,pw.getStepForKey)((0,j7.getBaseStepForColor)(!1),(0,pw.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i}();jC.HPaletteController=lot;var YC={},XC={};Object.defineProperty(XC,"__esModule",{value:!0});XC.SvPaletteView=void 0;var cot=Xa,mw=Fr,uot=Wi,hot=Ts,WS=(0,uot.ClassName)("svp"),W7=64,fot=function(){function i(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(WS()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);var n=e.createElement("canvas");n.height=W7,n.width=W7,n.classList.add(WS("c")),this.element.appendChild(n),this.canvasElement=n;var r=e.createElement("div");r.classList.add(WS("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}return i.prototype.update_=function(){var e=(0,cot.getCanvasContext)(this.canvasElement);if(e){for(var t=this.value.rawValue,n=t.getComponents("hsv"),r=this.canvasElement.width,s=this.canvasElement.height,a=e.getImageData(0,0,r,s),o=a.data,l=0;l<s;l++)for(var c=0;c<r;c++){var u=(0,mw.mapRange)(c,0,r,0,100),h=(0,mw.mapRange)(l,0,s,100,0),f=(0,hot.hsvToRgbInt)(n[0],u,h),d=(l*r+c)*4;o[d]=f[0],o[d+1]=f[1],o[d+2]=f[2],o[d+3]=255}e.putImageData(a,0,0);var g=(0,mw.mapRange)(n[1],0,100,0,100);this.markerElem_.style.left="".concat(g,"%");var v=(0,mw.mapRange)(n[2],0,100,100,0);this.markerElem_.style.top="".concat(v,"%")}},i.prototype.onValueChange_=function(){this.update_()},i}();XC.SvPaletteView=fot;Object.defineProperty(YC,"__esModule",{value:!0});YC.SvPaletteController=void 0;var Y7=Fr,sf=Va,dot=Eu,X7=_o,K7=dl,pot=XC,mot=function(){function i(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new pot.SvPaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new dot.PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return i.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=(0,Y7.mapRange)(e.point.x,0,e.bounds.width,0,100),r=(0,Y7.mapRange)(e.point.y,0,e.bounds.height,100,0),s=this.value.rawValue.getComponents("hsv"),a=s[0],o=s[3];this.value.setRawValue(new X7.Color([a,n,r,o],"hsv"),t)}},i.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},i.prototype.onKeyDown_=function(e){(0,sf.isArrowKey)(e.key)&&e.preventDefault();var t=this.value.rawValue.getComponents("hsv"),n=t[0],r=t[1],s=t[2],a=t[3],o=(0,K7.getBaseStepForColor)(!1),l=(0,sf.getStepForKey)(o,(0,sf.getHorizontalStepKeys)(e)),c=(0,sf.getStepForKey)(o,(0,sf.getVerticalStepKeys)(e));l===0&&c===0||this.value.setRawValue(new X7.Color([n,r+l,s+c,a],"hsv"),{forceEmit:!1,last:!1})},i.prototype.onKeyUp_=function(e){var t=(0,K7.getBaseStepForColor)(!1),n=(0,sf.getStepForKey)(t,(0,sf.getHorizontalStepKeys)(e)),r=(0,sf.getStepForKey)(t,(0,sf.getVerticalStepKeys)(e));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i}();YC.SvPaletteController=mot;Object.defineProperty(VC,"__esModule",{value:!0});VC.ColorPickerController=void 0;var got=Z0,YS=wa,vot=Ur,_ot=Ff,Aot=vo,bot=zf,yot=_o,wot=HC,xot=$C,Cot=QC,Eot=jC,Sot=YC,Mot=function(){function i(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new Eot.HPaletteController(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Sot.SvPaletteController(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new xot.APaletteController(e,{value:this.value,viewProps:this.viewProps}),text:new bot.NumberTextController(e,{parser:YS.parseNumber,baseStep:.1,props:vot.ValueMap.fromObject({draggingScale:.01,formatter:(0,YS.createNumberFormatter)(2)}),value:(0,Aot.createValue)(0,{constraint:new got.DefiniteRangeConstraint({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&(0,_ot.connectValues)({primary:this.value,secondary:this.alphaIcs_.text.value,forward:function(n){return n.rawValue.getComponents()[3]},backward:function(n,r){var s=n.rawValue.getComponents();return s[3]=r.rawValue,new yot.Color(s,n.rawValue.mode)}}),this.textC_=new Cot.ColorTextController(e,{colorType:t.colorType,parser:YS.parseNumber,value:this.value,viewProps:this.viewProps}),this.view=new wot.ColorPickerView(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}return Object.defineProperty(i.prototype,"textController",{get:function(){return this.textC_},enumerable:!1,configurable:!0}),i}();VC.ColorPickerController=Mot;var KC={},JC={};Object.defineProperty(JC,"__esModule",{value:!0});JC.ColorSwatchView=void 0;var Tot=Wi,Iot=Uf,XS=(0,Tot.ClassName)("colsw"),Pot=function(){function i(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(XS()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add(XS("sw")),this.element.appendChild(n),this.swatchElem_=n;var r=e.createElement("button");r.classList.add(XS("b")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r,this.update_()}return i.prototype.update_=function(){var e=this.value.rawValue;this.swatchElem_.style.backgroundColor=(0,Iot.colorToHexRgbaString)(e)},i.prototype.onValueChange_=function(){this.update_()},i}();JC.ColorSwatchView=Pot;Object.defineProperty(KC,"__esModule",{value:!0});KC.ColorSwatchController=void 0;var kot=JC,Bot=function(){function i(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new kot.ColorSwatchView(e,{value:this.value,viewProps:this.viewProps})}return i}();KC.ColorSwatchController=Bot;Object.defineProperty(tm,"__esModule",{value:!0});tm.ColorController=void 0;var J7=Do,Rot=Iv,Dot=Pv,Z7=Xa,Lot=Ur,Oot=Ff,Not=vi,Fot=UC,zot=VC,Uot=KC,Vot=function(){function i(e,t){var n=this;this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=J7.Foldable.create(t.expanded),this.swatchC_=new Uot.ColorSwatchController(e,{value:this.value,viewProps:this.viewProps});var r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new Dot.TextController(e,{parser:t.parser,props:Lot.ValueMap.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Fot.ColorView(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=t.pickerLayout==="popup"?new Rot.PopupController(e,{viewProps:this.viewProps}):null;var s=new zot.ColorPickerController(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(function(a){a.addEventListener("blur",n.onPopupChildBlur_),a.addEventListener("keydown",n.onPopupChildKeydown_)}),this.pickerC_=s,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(s.view.element),(0,Oot.connectValues)({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(a){return a.rawValue},backward:function(a,o){return o.rawValue}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),(0,J7.bindFoldable)(this.foldable_,this.view.pickerElement))}return Object.defineProperty(i.prototype,"textController",{get:function(){return this.textC_},enumerable:!1,configurable:!0}),i.prototype.onButtonBlur_=function(e){if(this.popC_){var t=this.view.element,n=(0,Not.forceCast)(e.relatedTarget);(!n||!t.contains(n))&&(this.popC_.shows.rawValue=!1)}},i.prototype.onButtonClick_=function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()},i.prototype.onPopupChildBlur_=function(e){if(this.popC_){var t=this.popC_.view.element,n=(0,Z7.findNextTarget)(e);n&&t.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!(0,Z7.supportsTouch)(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}},i.prototype.onPopupChildKeydown_=function(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()},i}();tm.ColorController=Vot;var ba={};Object.defineProperty(ba,"__esModule",{value:!0});ba.colorFromRgbaNumber=ba.colorFromRgbNumber=ba.numberToRgbaColor=ba.numberToRgbColor=ba.colorToRgbaNumber=ba.colorToRgbNumber=ba.colorFromObject=void 0;var Hot=Fr,x0=_o,$ot=Ts;function Got(i,e){return x0.Color.isColorObject(i)?x0.Color.fromObject(i,e):x0.Color.black(e)}ba.colorFromObject=Got;function Qot(i){return(0,$ot.removeAlphaComponent)(i.getComponents("rgb")).reduce(function(e,t){return e<<8|Math.floor(t)&255},0)}ba.colorToRgbNumber=Qot;function qot(i){return i.getComponents("rgb").reduce(function(e,t,n){var r=Math.floor(n===3?t*255:t)&255;return e<<8|r},0)>>>0}ba.colorToRgbaNumber=qot;function jV(i){return new x0.Color([i>>16&255,i>>8&255,i&255],"rgb")}ba.numberToRgbColor=jV;function WV(i){return new x0.Color([i>>24&255,i>>16&255,i>>8&255,(0,Hot.mapRange)(i&255,0,255,0,1)],"rgb")}ba.numberToRgbaColor=WV;function jot(i){return typeof i!="number"?x0.Color.black():jV(i)}ba.colorFromRgbNumber=jot;function Wot(i){return typeof i!="number"?x0.Color.black():WV(i)}ba.colorFromRgbaNumber=Wot;var ub={},cl={};Object.defineProperty(cl,"__esModule",{value:!0});cl.createColorObjectWriter=cl.writeRgbColorObject=cl.writeRgbaColorObject=cl.createColorNumberWriter=cl.createColorStringWriter=void 0;var YV=dp,eD=ba,Yot=Uf;function Xot(i){var e=(0,Yot.findColorStringifier)(i);return e?function(t,n){(0,YV.writePrimitive)(t,e(n))}:null}cl.createColorStringWriter=Xot;function Kot(i){var e=i?eD.colorToRgbaNumber:eD.colorToRgbNumber;return function(t,n){(0,YV.writePrimitive)(t,e(n))}}cl.createColorNumberWriter=Kot;function XV(i,e,t){var n=e.toRgbaObject(t);i.writeProperty("r",n.r),i.writeProperty("g",n.g),i.writeProperty("b",n.b),i.writeProperty("a",n.a)}cl.writeRgbaColorObject=XV;function KV(i,e,t){var n=e.toRgbaObject(t);i.writeProperty("r",n.r),i.writeProperty("g",n.g),i.writeProperty("b",n.b)}cl.writeRgbColorObject=KV;function Jot(i,e){return function(t,n){i?XV(t,n,e):KV(t,n,e)}}cl.createColorObjectWriter=Jot;Object.defineProperty(ub,"__esModule",{value:!0});ub.NumberColorInputPlugin=void 0;var Zot=tm,tD=ba,eT=Uf,elt=cl,tlt=_o,nlt=dl;function KS(i){var e;return!!(i!=null&&i.alpha||!((e=i==null?void 0:i.color)===null||e===void 0)&&e.alpha)}function ilt(i){return i?function(e){return(0,eT.colorToHexRgbaString)(e,"0x")}:function(e){return(0,eT.colorToHexRgbString)(e,"0x")}}function rlt(i){return"color"in i||"view"in i&&i.view==="color"}ub.NumberColorInputPlugin={id:"input-color-number",type:"input",accept:function(i,e){if(typeof i!="number"||!rlt(e))return null;var t=(0,nlt.parseColorInputParams)(e);return t?{initialValue:i,params:t}:null},binding:{reader:function(i){return KS(i.params)?tD.colorFromRgbaNumber:tD.colorFromRgbNumber},equals:tlt.Color.equals,writer:function(i){return(0,elt.createColorNumberWriter)(KS(i.params))}},controller:function(i){var e=KS(i.params),t="expanded"in i.params?i.params.expanded:void 0,n="picker"in i.params?i.params.picker:void 0;return new Zot.ColorController(i.document,{colorType:"int",expanded:t??!1,formatter:ilt(e),parser:(0,eT.createColorStringParser)("int"),pickerLayout:n??"popup",supportsAlpha:e,value:i.value,viewProps:i.viewProps})}};var hb={};Object.defineProperty(hb,"__esModule",{value:!0});hb.ObjectColorInputPlugin=void 0;var slt=tm,alt=ba,tT=Uf,olt=cl,nx=_o,gw=dl;function llt(i){return nx.Color.isRgbaColorObject(i)}function clt(i){return function(e){return(0,alt.colorFromObject)(e,i)}}function ult(i,e){return function(t){return i?(0,tT.colorToObjectRgbaString)(t,e):(0,tT.colorToObjectRgbString)(t,e)}}hb.ObjectColorInputPlugin={id:"input-color-object",type:"input",accept:function(i,e){if(!nx.Color.isColorObject(i))return null;var t=(0,gw.parseColorInputParams)(e);return t?{initialValue:i,params:t}:null},binding:{reader:function(i){return clt((0,gw.extractColorType)(i.params))},equals:nx.Color.equals,writer:function(i){return(0,olt.createColorObjectWriter)(llt(i.initialValue),(0,gw.extractColorType)(i.params))}},controller:function(i){var e,t=nx.Color.isRgbaColorObject(i.initialValue),n="expanded"in i.params?i.params.expanded:void 0,r="picker"in i.params?i.params.picker:void 0,s=(e=(0,gw.extractColorType)(i.params))!==null&&e!==void 0?e:"int";return new slt.ColorController(i.document,{colorType:s,expanded:n??!1,formatter:ult(t,s),parser:(0,tT.createColorStringParser)(s),pickerLayout:r??"popup",supportsAlpha:t,value:i.value,viewProps:i.viewProps})}};var fb={};Object.defineProperty(fb,"__esModule",{value:!0});fb.StringColorInputPlugin=void 0;var vw=xl,hlt=tm,jp=Uf,flt=cl,dlt=_o,k_=dl;fb.StringColorInputPlugin={id:"input-color-string",type:"input",accept:function(i,e){if(typeof i!="string"||"view"in e&&e.view==="text")return null;var t=(0,jp.detectStringColorFormat)(i,(0,k_.extractColorType)(e));if(!t)return null;var n=(0,jp.findColorStringifier)(t);if(!n)return null;var r=(0,k_.parseColorInputParams)(e);return r?{initialValue:i,params:r}:null},binding:{reader:function(i){var e;return(0,jp.createColorStringBindingReader)((e=(0,k_.extractColorType)(i.params))!==null&&e!==void 0?e:"int")},equals:dlt.Color.equals,writer:function(i){var e=(0,jp.detectStringColorFormat)(i.initialValue,(0,k_.extractColorType)(i.params));if(!e)throw vw.TpError.shouldNeverHappen();var t=(0,flt.createColorStringWriter)(e);if(!t)throw vw.TpError.notBindable();return t}},controller:function(i){var e=(0,jp.detectStringColorFormat)(i.initialValue,(0,k_.extractColorType)(i.params));if(!e)throw vw.TpError.shouldNeverHappen();var t=(0,jp.findColorStringifier)(e);if(!t)throw vw.TpError.shouldNeverHappen();var n="expanded"in i.params?i.params.expanded:void 0,r="picker"in i.params?i.params.picker:void 0;return new hlt.ColorController(i.document,{colorType:e.type,expanded:n??!1,formatter:t,parser:(0,jp.createColorStringParser)(e.type),pickerLayout:r??"popup",supportsAlpha:e.alpha,value:i.value,viewProps:i.viewProps})}};var nm={};Object.defineProperty(nm,"__esModule",{value:!0});nm.PointNdConstraint=void 0;var plt=function(){function i(e){this.components=e.components,this.asm_=e.assembly}return i.prototype.constrain=function(e){var t=this,n=this.asm_.toComponents(e).map(function(r,s){var a,o;return(o=(a=t.components[s])===null||a===void 0?void 0:a.constrain(r))!==null&&o!==void 0?o:r});return this.asm_.fromComponents(n)},i}();nm.PointNdConstraint=plt;var im={},ZC={};Object.defineProperty(ZC,"__esModule",{value:!0});ZC.PointNdTextView=void 0;var mlt=Wi,nD=(0,mlt.ClassName)("pndtxt"),glt=function(){function i(e,t){var n=this;this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(nD()),this.textViews.forEach(function(r){var s=e.createElement("div");s.classList.add(nD("a")),s.appendChild(r.element),n.element.appendChild(s)})}return i}();ZC.PointNdTextView=glt;Object.defineProperty(im,"__esModule",{value:!0});im.PointNdTextController=void 0;var vlt=Ff,_lt=vo,Alt=zf,blt=ZC;function ylt(i,e,t){return new Alt.NumberTextController(i,{arrayPosition:t===0?"fst":t===e.axes.length-1?"lst":"mid",baseStep:e.axes[t].baseStep,parser:e.parser,props:e.axes[t].textProps,value:(0,_lt.createValue)(0,{constraint:e.axes[t].constraint}),viewProps:e.viewProps})}var wlt=function(){function i(e,t){var n=this;this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map(function(r,s){return ylt(e,t,s)}),this.acs_.forEach(function(r,s){(0,vlt.connectValues)({primary:n.value,secondary:r.value,forward:function(a){return t.assembly.toComponents(a.rawValue)[s]},backward:function(a,o){var l=t.assembly.toComponents(a.rawValue);return l[s]=o.rawValue,t.assembly.fromComponents(l)}})}),this.view=new blt.PointNdTextView(e,{textViews:this.acs_.map(function(r){return r.view})})}return i}();im.PointNdTextController=wlt;var kc={};Object.defineProperty(kc,"__esModule",{value:!0});kc.NumberInputPlugin=kc.findNumberRange=kc.createRangeConstraint=kc.createStepConstraint=void 0;var U1=_u,hP=Z0,xlt=fp,JV=JA,Clt=Tv,Elt=em,_w=wa,Aw=Ur,Slt=zf,Mlt=ab,iD=fa,Tlt=dp,n0=jr,W_=vi;function ZV(i,e){return"step"in i&&!(0,W_.isEmpty)(i.step)?new Clt.StepConstraint(i.step,e):null}kc.createStepConstraint=ZV;function eH(i){return!(0,W_.isEmpty)(i.max)&&!(0,W_.isEmpty)(i.min)?new hP.DefiniteRangeConstraint({max:i.max,min:i.min}):!(0,W_.isEmpty)(i.max)||!(0,W_.isEmpty)(i.min)?new JV.RangeConstraint({max:i.max,min:i.min}):null}kc.createRangeConstraint=eH;function Ilt(i){var e=(0,U1.findConstraint)(i,hP.DefiniteRangeConstraint);if(e)return[e.values.get("min"),e.values.get("max")];var t=(0,U1.findConstraint)(i,JV.RangeConstraint);return t?[t.minValue,t.maxValue]:[void 0,void 0]}kc.findNumberRange=Ilt;function Plt(i,e){var t=[],n=ZV(i,e);n&&t.push(n);var r=eH(i);r&&t.push(r);var s=(0,n0.createListConstraint)(i.options);return s&&t.push(s),new U1.CompositeConstraint(t)}kc.NumberInputPlugin={id:"input-number",type:"input",accept:function(i,e){if(typeof i!="number")return null;var t=iD.ParamsParsers,n=(0,iD.parseParams)(e,{format:t.optional.function,max:t.optional.number,min:t.optional.number,options:t.optional.custom(n0.parseListOptions),step:t.optional.number});return n?{initialValue:i,params:n}:null},binding:{reader:function(i){return _w.numberFromUnknown},constraint:function(i){return Plt(i.params,i.initialValue)},writer:function(i){return Tlt.writePrimitive}},controller:function(i){var e,t=i.value,n=i.constraint,r=n&&(0,U1.findConstraint)(n,xlt.ListConstraint);if(r)return new Elt.ListController(i.document,{props:new Aw.ValueMap({options:r.values.value("options")}),value:t,viewProps:i.viewProps});var s=(e="format"in i.params?i.params.format:void 0)!==null&&e!==void 0?e:(0,_w.createNumberFormatter)((0,n0.getSuitableDecimalDigits)(n,t.rawValue)),a=n&&(0,U1.findConstraint)(n,hP.DefiniteRangeConstraint);return a?new Mlt.SliderTextController(i.document,{baseStep:(0,n0.getBaseStep)(n),parser:_w.parseNumber,sliderProps:new Aw.ValueMap({maxValue:a.values.value("max"),minValue:a.values.value("min")}),textProps:Aw.ValueMap.fromObject({draggingScale:(0,n0.getSuitableDraggingScale)(n,t.rawValue),formatter:s}),value:t,viewProps:i.viewProps}):new Slt.NumberTextController(i.document,{baseStep:(0,n0.getBaseStep)(n),parser:_w.parseNumber,props:Aw.ValueMap.fromObject({draggingScale:(0,n0.getSuitableDraggingScale)(n,t.rawValue),formatter:s}),value:t,viewProps:i.viewProps})}};var db={},Tf={},klt=bt&&bt.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(Tf,"__esModule",{value:!0});Tf.Point2dAssembly=Tf.Point2d=void 0;var Blt=vi,nT=function(){function i(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this.x=e,this.y=t}return i.prototype.getComponents=function(){return[this.x,this.y]},i.isObject=function(e){if((0,Blt.isEmpty)(e))return!1;var t=e.x,n=e.y;return!(typeof t!="number"||typeof n!="number")},i.equals=function(e,t){return e.x===t.x&&e.y===t.y},i.prototype.toObject=function(){return{x:this.x,y:this.y}},i}();Tf.Point2d=nT;Tf.Point2dAssembly={toComponents:function(i){return i.getComponents()},fromComponents:function(i){return new(nT.bind.apply(nT,klt([void 0],i,!1)))}};var eE={};Object.defineProperty(eE,"__esModule",{value:!0});eE.Point2dView=void 0;var Rlt=Xa,Dlt=Sa,Llt=Wi,Olt=bl,Wm=(0,Llt.ClassName)("p2d"),Nlt=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(Wm()),t.viewProps.bindClassModifiers(this.element),(0,Dlt.bindValue)(t.expanded,(0,Olt.valueToClassName)(this.element,Wm(void 0,"expanded")));var n=e.createElement("div");n.classList.add(Wm("h")),this.element.appendChild(n);var r=e.createElement("button");r.classList.add(Wm("b")),r.appendChild((0,Rlt.createSvgIconElement)(e,"p2dpad")),t.viewProps.bindDisabled(r),n.appendChild(r),this.buttonElement=r;var s=e.createElement("div");if(s.classList.add(Wm("t")),n.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){var a=e.createElement("div");a.classList.add(Wm("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null}return i}();eE.Point2dView=Nlt;var tE={},nE={};Object.defineProperty(nE,"__esModule",{value:!0});nE.Point2dPickerView=void 0;var bw=Xa,rD=Fr,Flt=Wi,dd=(0,Flt.ClassName)("p2dp"),zlt=function(){function i(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=t.invertsY,this.maxValue_=t.maxValue,this.element=e.createElement("div"),this.element.classList.add(dd()),t.layout==="popup"&&this.element.classList.add(dd(void 0,"p")),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add(dd("p")),t.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;var r=e.createElementNS(bw.SVG_NS,"svg");r.classList.add(dd("g")),this.padElement.appendChild(r),this.svgElem_=r;var s=e.createElementNS(bw.SVG_NS,"line");s.classList.add(dd("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);var a=e.createElementNS(bw.SVG_NS,"line");a.classList.add(dd("ax")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","0"),a.setAttributeNS(null,"x2","50%"),a.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(a);var o=e.createElementNS(bw.SVG_NS,"line");o.classList.add(dd("l")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(o),this.lineElem_=o;var l=e.createElement("div");l.classList.add(dd("m")),this.padElement.appendChild(l),this.markerElem_=l,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}return Object.defineProperty(i.prototype,"allFocusableElements",{get:function(){return[this.padElement]},enumerable:!1,configurable:!0}),i.prototype.update_=function(){var e=this.value.rawValue.getComponents(),t=e[0],n=e[1],r=this.maxValue_,s=(0,rD.mapRange)(t,-r,+r,0,100),a=(0,rD.mapRange)(n,-r,+r,0,100),o=this.invertsY_?100-a:a;this.lineElem_.setAttributeNS(null,"x2","".concat(s,"%")),this.lineElem_.setAttributeNS(null,"y2","".concat(o,"%")),this.markerElem_.style.left="".concat(s,"%"),this.markerElem_.style.top="".concat(o,"%")},i.prototype.onValueChange_=function(){this.update_()},i.prototype.onFoldableChange_=function(){this.update_()},i}();nE.Point2dPickerView=zlt;Object.defineProperty(tE,"__esModule",{value:!0});tE.Point2dPickerController=void 0;var sD=Fr,Y_=Va,Ult=Eu,aD=Tf,Vlt=nE;function oD(i,e,t){return[(0,Y_.getStepForKey)(e[0],(0,Y_.getHorizontalStepKeys)(i)),(0,Y_.getStepForKey)(e[1],(0,Y_.getVerticalStepKeys)(i))*(t?1:-1)]}var Hlt=function(){function i(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.baseSteps_=t.baseSteps,this.maxValue_=t.maxValue,this.invertsY_=t.invertsY,this.view=new Vlt.Point2dPickerView(e,{invertsY:this.invertsY_,layout:t.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ult.PointerHandler(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}return i.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=this.maxValue_,r=(0,sD.mapRange)(e.point.x,0,e.bounds.width,-n,+n),s=(0,sD.mapRange)(this.invertsY_?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-n,+n);this.value.setRawValue(new aD.Point2d(r,s),t)}},i.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},i.prototype.onPadKeyDown_=function(e){(0,Y_.isArrowKey)(e.key)&&e.preventDefault();var t=oD(e,this.baseSteps_,this.invertsY_),n=t[0],r=t[1];n===0&&r===0||this.value.setRawValue(new aD.Point2d(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})},i.prototype.onPadKeyUp_=function(e){var t=oD(e,this.baseSteps_,this.invertsY_),n=t[0],r=t[1];n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i}();tE.Point2dPickerController=Hlt;Object.defineProperty(db,"__esModule",{value:!0});db.Point2dController=void 0;var lD=Do,$lt=Iv,cD=Xa,Glt=Ff,Qlt=vi,qlt=im,jlt=Tf,Wlt=eE,Ylt=tE,Xlt=function(){function i(e,t){var n=this,r,s;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=lD.Foldable.create(t.expanded),this.popC_=t.pickerLayout==="popup"?new $lt.PopupController(e,{viewProps:this.viewProps}):null;var a=new Ylt.Point2dPickerController(e,{baseSteps:[t.axes[0].baseStep,t.axes[1].baseStep],invertsY:t.invertsY,layout:t.pickerLayout,maxValue:t.maxValue,value:this.value,viewProps:this.viewProps});a.view.allFocusableElements.forEach(function(o){o.addEventListener("blur",n.onPopupChildBlur_),o.addEventListener("keydown",n.onPopupChildKeydown_)}),this.pickerC_=a,this.textC_=new qlt.PointNdTextController(e,{assembly:jlt.Point2dAssembly,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new Wlt.Point2dView(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(s=this.view.buttonElement)===null||s===void 0||s.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),(0,Glt.connectValues)({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(o){return o.rawValue},backward:function(o,l){return l.rawValue}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),(0,lD.bindFoldable)(this.foldable_,this.view.pickerElement))}return i.prototype.onPadButtonBlur_=function(e){if(this.popC_){var t=this.view.element,n=(0,Qlt.forceCast)(e.relatedTarget);(!n||!t.contains(n))&&(this.popC_.shows.rawValue=!1)}},i.prototype.onPadButtonClick_=function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()},i.prototype.onPopupChildBlur_=function(e){if(this.popC_){var t=this.popC_.view.element,n=(0,cD.findNextTarget)(e);n&&t.contains(n)||n&&n===this.view.buttonElement&&!(0,cD.supportsTouch)(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}},i.prototype.onPopupChildKeydown_=function(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()},i}();db.Point2dController=Xlt;var af={},jg={};Object.defineProperty(jg,"__esModule",{value:!0});jg.writePoint2d=jg.point2dFromUnknown=void 0;var JS=Tf;function Klt(i){return JS.Point2d.isObject(i)?new JS.Point2d(i.x,i.y):new JS.Point2d}jg.point2dFromUnknown=Klt;function Jlt(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y)}jg.writePoint2d=Jlt;var uD;function iE(){if(uD)return af;uD=1,Object.defineProperty(af,"__esModule",{value:!0}),af.Point2dInputPlugin=af.getSuitableMaxValue=af.createDimensionConstraint=void 0;var i=_u,e=wa,t=Ur,n=fa,r=xl,s=jr,a=cH(),o=nm,l=kc,c=db,u=jg,h=Tf;function f(y,x){if(y){var C=[],S=(0,l.createStepConstraint)(y,x);S&&C.push(S);var I=(0,l.createRangeConstraint)(y);return I&&C.push(I),new i.CompositeConstraint(C)}}af.createDimensionConstraint=f;function d(y,x){return new o.PointNdConstraint({assembly:h.Point2dAssembly,components:[f("x"in y?y.x:void 0,x.x),f("y"in y?y.y:void 0,x.y)]})}function g(y,x){var C=y?(0,l.findNumberRange)(y):[],S=C[0],I=C[1];if(!(0,a.isEmpty)(S)||!(0,a.isEmpty)(I))return Math.max(Math.abs(S??0),Math.abs(I??0));var P=(0,s.getBaseStep)(y);return Math.max(Math.abs(P)*10,Math.abs(x)*10)}function v(y,x){var C=x instanceof o.PointNdConstraint?x.components[0]:void 0,S=x instanceof o.PointNdConstraint?x.components[1]:void 0,I=g(C,y.x),P=g(S,y.y);return Math.max(I,P)}af.getSuitableMaxValue=v;function A(y,x){return{baseStep:(0,s.getBaseStep)(x),constraint:x,textProps:t.ValueMap.fromObject({draggingScale:(0,s.getSuitableDraggingScale)(x,y),formatter:(0,e.createNumberFormatter)((0,s.getSuitableDecimalDigits)(x,y))})}}function _(y){if(!("y"in y))return!1;var x=y.y;return x&&"inverted"in x?!!x.inverted:!1}return af.Point2dInputPlugin={id:"input-point2d",type:"input",accept:function(y,x){if(!h.Point2d.isObject(y))return null;var C=n.ParamsParsers,S=(0,n.parseParams)(x,{expanded:C.optional.boolean,picker:C.optional.custom(s.parsePickerLayout),x:C.optional.custom(s.parsePointDimensionParams),y:C.optional.object({inverted:C.optional.boolean,max:C.optional.number,min:C.optional.number,step:C.optional.number})});return S?{initialValue:y,params:S}:null},binding:{reader:function(y){return u.point2dFromUnknown},constraint:function(y){return d(y.params,y.initialValue)},equals:h.Point2d.equals,writer:function(y){return u.writePoint2d}},controller:function(y){var x=y.document,C=y.value,S=y.constraint;if(!(S instanceof o.PointNdConstraint))throw r.TpError.shouldNeverHappen();var I="expanded"in y.params?y.params.expanded:void 0,P="picker"in y.params?y.params.picker:void 0;return new c.Point2dController(x,{axes:[A(C.rawValue.x,S.components[0]),A(C.rawValue.y,S.components[1])],expanded:I??!1,invertsY:_(y.params),maxValue:v(C.rawValue,S),parser:e.parseNumber,pickerLayout:P??"popup",value:C,viewProps:y.viewProps})}},af}var B_={},Wg={},N0={},Zlt=bt&&bt.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(N0,"__esModule",{value:!0});N0.Point3dAssembly=N0.Point3d=void 0;var ect=vi,iT=function(){function i(e,t,n){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),this.x=e,this.y=t,this.z=n}return i.prototype.getComponents=function(){return[this.x,this.y,this.z]},i.isObject=function(e){if((0,ect.isEmpty)(e))return!1;var t=e.x,n=e.y,r=e.z;return!(typeof t!="number"||typeof n!="number"||typeof r!="number")},i.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z},i.prototype.toObject=function(){return{x:this.x,y:this.y,z:this.z}},i}();N0.Point3d=iT;N0.Point3dAssembly={toComponents:function(i){return i.getComponents()},fromComponents:function(i){return new(iT.bind.apply(iT,Zlt([void 0],i,!1)))}};Object.defineProperty(Wg,"__esModule",{value:!0});Wg.writePoint3d=Wg.point3dFromUnknown=void 0;var ZS=N0;function tct(i){return ZS.Point3d.isObject(i)?new ZS.Point3d(i.x,i.y,i.z):new ZS.Point3d}Wg.point3dFromUnknown=tct;function nct(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y),i.writeProperty("z",e.z)}Wg.writePoint3d=nct;var hD;function tH(){if(hD)return B_;hD=1,Object.defineProperty(B_,"__esModule",{value:!0}),B_.Point3dInputPlugin=void 0;var i=wa,e=Ur,t=fa,n=xl,r=jr,s=nm,a=im,o=iE(),l=Wg,c=N0;function u(f,d){return new s.PointNdConstraint({assembly:c.Point3dAssembly,components:[(0,o.createDimensionConstraint)("x"in f?f.x:void 0,d.x),(0,o.createDimensionConstraint)("y"in f?f.y:void 0,d.y),(0,o.createDimensionConstraint)("z"in f?f.z:void 0,d.z)]})}function h(f,d){return{baseStep:(0,r.getBaseStep)(d),constraint:d,textProps:e.ValueMap.fromObject({draggingScale:(0,r.getSuitableDraggingScale)(d,f),formatter:(0,i.createNumberFormatter)((0,r.getSuitableDecimalDigits)(d,f))})}}return B_.Point3dInputPlugin={id:"input-point3d",type:"input",accept:function(f,d){if(!c.Point3d.isObject(f))return null;var g=t.ParamsParsers,v=(0,t.parseParams)(d,{x:g.optional.custom(r.parsePointDimensionParams),y:g.optional.custom(r.parsePointDimensionParams),z:g.optional.custom(r.parsePointDimensionParams)});return v?{initialValue:f,params:v}:null},binding:{reader:function(f){return l.point3dFromUnknown},constraint:function(f){return u(f.params,f.initialValue)},equals:c.Point3d.equals,writer:function(f){return l.writePoint3d}},controller:function(f){var d=f.value,g=f.constraint;if(!(g instanceof s.PointNdConstraint))throw n.TpError.shouldNeverHappen();return new a.PointNdTextController(f.document,{assembly:c.Point3dAssembly,axes:[h(d.rawValue.x,g.components[0]),h(d.rawValue.y,g.components[1]),h(d.rawValue.z,g.components[2])],parser:i.parseNumber,value:d,viewProps:f.viewProps})}},B_}var R_={},Yg={},F0={},ict=bt&&bt.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(F0,"__esModule",{value:!0});F0.Point4dAssembly=F0.Point4d=void 0;var rct=vi,rT=function(){function i(e,t,n,r){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),this.x=e,this.y=t,this.z=n,this.w=r}return i.prototype.getComponents=function(){return[this.x,this.y,this.z,this.w]},i.isObject=function(e){if((0,rct.isEmpty)(e))return!1;var t=e.x,n=e.y,r=e.z,s=e.w;return!(typeof t!="number"||typeof n!="number"||typeof r!="number"||typeof s!="number")},i.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},i.prototype.toObject=function(){return{x:this.x,y:this.y,z:this.z,w:this.w}},i}();F0.Point4d=rT;F0.Point4dAssembly={toComponents:function(i){return i.getComponents()},fromComponents:function(i){return new(rT.bind.apply(rT,ict([void 0],i,!1)))}};Object.defineProperty(Yg,"__esModule",{value:!0});Yg.writePoint4d=Yg.point4dFromUnknown=void 0;var e3=F0;function sct(i){return e3.Point4d.isObject(i)?new e3.Point4d(i.x,i.y,i.z,i.w):new e3.Point4d}Yg.point4dFromUnknown=sct;function act(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y),i.writeProperty("z",e.z),i.writeProperty("w",e.w)}Yg.writePoint4d=act;var fD;function nH(){if(fD)return R_;fD=1,Object.defineProperty(R_,"__esModule",{value:!0}),R_.Point4dInputPlugin=void 0;var i=wa,e=Ur,t=fa,n=xl,r=jr,s=nm,a=im,o=iE(),l=Yg,c=F0;function u(f,d){return new s.PointNdConstraint({assembly:c.Point4dAssembly,components:[(0,o.createDimensionConstraint)("x"in f?f.x:void 0,d.x),(0,o.createDimensionConstraint)("y"in f?f.y:void 0,d.y),(0,o.createDimensionConstraint)("z"in f?f.z:void 0,d.z),(0,o.createDimensionConstraint)("w"in f?f.w:void 0,d.w)]})}function h(f,d){return{baseStep:(0,r.getBaseStep)(d),constraint:d,textProps:e.ValueMap.fromObject({draggingScale:(0,r.getSuitableDraggingScale)(d,f),formatter:(0,i.createNumberFormatter)((0,r.getSuitableDecimalDigits)(d,f))})}}return R_.Point4dInputPlugin={id:"input-point4d",type:"input",accept:function(f,d){if(!c.Point4d.isObject(f))return null;var g=t.ParamsParsers,v=(0,t.parseParams)(d,{x:g.optional.custom(r.parsePointDimensionParams),y:g.optional.custom(r.parsePointDimensionParams),z:g.optional.custom(r.parsePointDimensionParams),w:g.optional.custom(r.parsePointDimensionParams)});return v?{initialValue:f,params:v}:null},binding:{reader:function(f){return l.point4dFromUnknown},constraint:function(f){return u(f.params,f.initialValue)},equals:c.Point4d.equals,writer:function(f){return l.writePoint4d}},controller:function(f){var d=f.value,g=f.constraint;if(!(g instanceof s.PointNdConstraint))throw n.TpError.shouldNeverHappen();return new a.PointNdTextController(f.document,{assembly:c.Point4dAssembly,axes:d.rawValue.getComponents().map(function(v,A){return h(v,g.components[A])}),parser:i.parseNumber,value:d,viewProps:f.viewProps})}},R_}var pb={};Object.defineProperty(pb,"__esModule",{value:!0});pb.StringInputPlugin=void 0;var iH=_u,oct=fp,lct=em,cct=Pv,dD=Jd,pD=Ur,mD=fa,uct=dp,rH=jr;function hct(i){var e=[],t=(0,rH.createListConstraint)(i.options);return t&&e.push(t),new iH.CompositeConstraint(e)}pb.StringInputPlugin={id:"input-string",type:"input",accept:function(i,e){if(typeof i!="string")return null;var t=mD.ParamsParsers,n=(0,mD.parseParams)(e,{options:t.optional.custom(rH.parseListOptions)});return n?{initialValue:i,params:n}:null},binding:{reader:function(i){return dD.stringFromUnknown},constraint:function(i){return hct(i.params)},writer:function(i){return uct.writePrimitive}},controller:function(i){var e=i.document,t=i.value,n=i.constraint,r=n&&(0,iH.findConstraint)(n,oct.ListConstraint);return r?new lct.ListController(e,{props:new pD.ValueMap({options:r.values.value("options")}),value:t,viewProps:i.viewProps}):new cct.TextController(e,{parser:function(s){return s},props:pD.ValueMap.fromObject({formatter:dD.formatString}),value:t,viewProps:i.viewProps})}};var pp={};Object.defineProperty(pp,"__esModule",{value:!0});pp.Constants=void 0;pp.Constants={monitor:{defaultInterval:200,defaultLineCount:3}};var mb={},rm={},rE={};Object.defineProperty(rE,"__esModule",{value:!0});rE.MultiLogView=void 0;var fct=Wi,gD=(0,fct.ClassName)("mll"),dct=function(){function i(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(gD()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("textarea");n.classList.add(gD("i")),n.style.height="calc(var(--bld-us) * ".concat(t.lineCount,")"),n.readOnly=!0,t.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}return i.prototype.update_=function(){var e=this,t=this.textareaElem_,n=t.scrollTop===t.scrollHeight-t.clientHeight,r=[];this.value.rawValue.forEach(function(s){s!==void 0&&r.push(e.formatter_(s))}),t.textContent=r.join(`
`),n&&(t.scrollTop=t.scrollHeight)},i.prototype.onValueUpdate_=function(){this.update_()},i}();rE.MultiLogView=dct;Object.defineProperty(rm,"__esModule",{value:!0});rm.MultiLogController=void 0;var pct=rE,mct=function(){function i(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new pct.MultiLogView(e,{formatter:t.formatter,lineCount:t.lineCount,value:this.value,viewProps:this.viewProps})}return i}();rm.MultiLogController=mct;var sm={},sE={};Object.defineProperty(sE,"__esModule",{value:!0});sE.SingleLogView=void 0;var gct=Wi,vD=(0,gct.ClassName)("sgl"),vct=function(){function i(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(vD()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("input");n.classList.add(vD("i")),n.readOnly=!0,n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}return i.prototype.update_=function(){var e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=t!==void 0?this.formatter_(t):""},i.prototype.onValueUpdate_=function(){this.update_()},i}();sE.SingleLogView=vct;Object.defineProperty(sm,"__esModule",{value:!0});sm.SingleLogController=void 0;var _ct=sE,Act=function(){function i(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new _ct.SingleLogView(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}return i}();sm.SingleLogController=Act;Object.defineProperty(mb,"__esModule",{value:!0});mb.BooleanMonitorPlugin=void 0;var t3=fh,_D=fa,bct=pp,yct=rm,wct=sm;mb.BooleanMonitorPlugin={id:"monitor-bool",type:"monitor",accept:function(i,e){if(typeof i!="boolean")return null;var t=_D.ParamsParsers,n=(0,_D.parseParams)(e,{lineCount:t.optional.number});return n?{initialValue:i,params:n}:null},binding:{reader:function(i){return t3.boolFromUnknown}},controller:function(i){var e;return i.value.rawValue.length===1?new wct.SingleLogController(i.document,{formatter:t3.BooleanFormatter,value:i.value,viewProps:i.viewProps}):new yct.MultiLogController(i.document,{formatter:t3.BooleanFormatter,lineCount:(e=i.params.lineCount)!==null&&e!==void 0?e:bct.Constants.monitor.defaultLineCount,value:i.value,viewProps:i.viewProps})}};var gb={},aE={};Object.defineProperty(aE,"__esModule",{value:!0});aE.GraphLogView=void 0;var n3=Xa,yw=Fr,sH=Wi,pd=(0,sH.ClassName)("grl"),xct=function(){function i(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(pd()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);var n=e.createElementNS(n3.SVG_NS,"svg");n.classList.add(pd("g")),n.style.height="calc(var(--bld-us) * ".concat(t.lineCount,")"),this.element.appendChild(n),this.svgElem_=n;var r=e.createElementNS(n3.SVG_NS,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;var s=e.createElement("div");s.classList.add(pd("t"),(0,sH.ClassName)("tt")()),this.element.appendChild(s),this.tooltipElem_=s,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}return Object.defineProperty(i.prototype,"graphElement",{get:function(){return this.svgElem_},enumerable:!1,configurable:!0}),i.prototype.update_=function(){var e=this.svgElem_.getBoundingClientRect(),t=this.value.rawValue.length-1,n=this.props_.get("minValue"),r=this.props_.get("maxValue"),s=[];this.value.rawValue.forEach(function(u,h){if(u!==void 0){var f=(0,yw.mapRange)(h,0,t,0,e.width),d=(0,yw.mapRange)(u,n,r,e.height,0);s.push([f,d].join(","))}}),this.lineElem_.setAttributeNS(null,"points",s.join(" "));var a=this.tooltipElem_,o=this.value.rawValue[this.cursor_.rawValue];if(o===void 0){a.classList.remove(pd("t","a"));return}var l=(0,yw.mapRange)(this.cursor_.rawValue,0,t,0,e.width),c=(0,yw.mapRange)(o,n,r,e.height,0);a.style.left="".concat(l,"px"),a.style.top="".concat(c,"px"),a.textContent="".concat(this.formatter_(o)),a.classList.contains(pd("t","a"))||(a.classList.add(pd("t","a"),pd("t","in")),(0,n3.forceReflow)(a),a.classList.remove(pd("t","in")))},i.prototype.onValueUpdate_=function(){this.update_()},i.prototype.onCursorChange_=function(){this.update_()},i}();aE.GraphLogView=xct;Object.defineProperty(gb,"__esModule",{value:!0});gb.GraphLogController=void 0;var Cct=Xa,Ect=vo,AD=Fr,Sct=Eu,Mct=aE,Tct=function(){function i(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=(0,Ect.createValue)(-1),this.view=new Mct.GraphLogView(e,{cursor:this.cursor_,formatter:t.formatter,lineCount:t.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!(0,Cct.supportsTouch)(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{var n=new Sct.PointerHandler(this.view.element);n.emitter.on("down",this.onGraphPointerDown_),n.emitter.on("move",this.onGraphPointerMove_),n.emitter.on("up",this.onGraphPointerUp_)}}return i.prototype.onGraphMouseLeave_=function(){this.cursor_.rawValue=-1},i.prototype.onGraphMouseMove_=function(e){var t=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor((0,AD.mapRange)(e.offsetX,0,t.width,0,this.value.rawValue.length))},i.prototype.onGraphPointerDown_=function(e){this.onGraphPointerMove_(e)},i.prototype.onGraphPointerMove_=function(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor((0,AD.mapRange)(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))},i.prototype.onGraphPointerUp_=function(){this.cursor_.rawValue=-1},i}();gb.GraphLogController=Tct;var vb={};Object.defineProperty(vb,"__esModule",{value:!0});vb.NumberMonitorPlugin=void 0;var aH=wa,Ict=Ur,bD=fa,oH=pp,Pct=vi,kct=rm,Bct=sm,Rct=gb;function sT(i){return"format"in i&&!(0,Pct.isEmpty)(i.format)?i.format:(0,aH.createNumberFormatter)(2)}function Dct(i){var e;return i.value.rawValue.length===1?new Bct.SingleLogController(i.document,{formatter:sT(i.params),value:i.value,viewProps:i.viewProps}):new kct.MultiLogController(i.document,{formatter:sT(i.params),lineCount:(e=i.params.lineCount)!==null&&e!==void 0?e:oH.Constants.monitor.defaultLineCount,value:i.value,viewProps:i.viewProps})}function Lct(i){var e,t,n;return new Rct.GraphLogController(i.document,{formatter:sT(i.params),lineCount:(e=i.params.lineCount)!==null&&e!==void 0?e:oH.Constants.monitor.defaultLineCount,props:Ict.ValueMap.fromObject({maxValue:(t="max"in i.params?i.params.max:null)!==null&&t!==void 0?t:100,minValue:(n="min"in i.params?i.params.min:null)!==null&&n!==void 0?n:0}),value:i.value,viewProps:i.viewProps})}function yD(i){return"view"in i&&i.view==="graph"}vb.NumberMonitorPlugin={id:"monitor-number",type:"monitor",accept:function(i,e){if(typeof i!="number")return null;var t=bD.ParamsParsers,n=(0,bD.parseParams)(e,{format:t.optional.function,lineCount:t.optional.number,max:t.optional.number,min:t.optional.number,view:t.optional.string});return n?{initialValue:i,params:n}:null},binding:{defaultBufferSize:function(i){return yD(i)?64:1},reader:function(i){return aH.numberFromUnknown}},controller:function(i){return yD(i.params)?Lct(i):Dct(i)}};var _b={};Object.defineProperty(_b,"__esModule",{value:!0});_b.StringMonitorPlugin=void 0;var i3=Jd,wD=fa,Oct=pp,Nct=rm,Fct=sm;_b.StringMonitorPlugin={id:"monitor-string",type:"monitor",accept:function(i,e){if(typeof i!="string")return null;var t=wD.ParamsParsers,n=(0,wD.parseParams)(e,{lineCount:t.optional.number,multiline:t.optional.boolean});return n?{initialValue:i,params:n}:null},binding:{reader:function(i){return i3.stringFromUnknown}},controller:function(i){var e,t=i.value,n=t.rawValue.length>1||"multiline"in i.params&&i.params.multiline;return n?new Nct.MultiLogController(i.document,{formatter:i3.formatString,lineCount:(e=i.params.lineCount)!==null&&e!==void 0?e:Oct.Constants.monitor.defaultLineCount,value:t,viewProps:i.viewProps}):new Fct.SingleLogController(i.document,{formatter:i3.formatString,value:t,viewProps:i.viewProps})}};var lH={};Object.defineProperty(lH,"__esModule",{value:!0});var D_={},Ab={},oE={};Object.defineProperty(oE,"__esModule",{value:!0});oE.createInputBindingController=void 0;var zct=cp,Uct=up,Vct=XA,Hct=Ur,$ct=vo,Gct=Nf,Qct=fa,qct=vi;function jct(i,e){var t,n=i.accept(e.target.read(),e.params);if((0,qct.isEmpty)(n))return null;var r=Qct.ParamsParsers,s={target:e.target,initialValue:n.initialValue,params:n.params},a=i.binding.reader(s),o=i.binding.constraint?i.binding.constraint(s):void 0,l=(0,$ct.createValue)(a(n.initialValue),{constraint:o,equals:i.binding.equals}),c=new Vct.InputBinding({reader:a,target:e.target,value:l,writer:i.binding.writer(s)}),u=r.optional.boolean(e.params.disabled).value,h=r.optional.boolean(e.params.hidden).value,f=i.controller({constraint:o,document:e.document,initialValue:n.initialValue,params:n.params,value:c.value,viewProps:Gct.ViewProps.create({disabled:u,hidden:h})});return new Uct.InputBindingController(e.document,{binding:c,blade:(0,zct.createBlade)(),props:Hct.ValueMap.fromObject({label:"label"in e.params?(t=r.optional.string(e.params.label).value)!==null&&t!==void 0?t:null:e.target.key}),valueController:f})}oE.createInputBindingController=jct;var lE={};Object.defineProperty(lE,"__esModule",{value:!0});lE.createMonitorBindingController=void 0;var Wct=cp,Yct=hp,Xct=KA,Kct=YA,Jct=WA,Zct=Kd,eut=Ur,tut=Nf,nut=fa,iut=pp,rut=vi;function sut(i,e){return e===0?new Jct.ManualTicker:new Kct.IntervalTicker(i,e??iut.Constants.monitor.defaultInterval)}function aut(i,e){var t,n,r,s=nut.ParamsParsers,a=i.accept(e.target.read(),e.params);if((0,rut.isEmpty)(a))return null;var o={target:e.target,initialValue:a.initialValue,params:a.params},l=i.binding.reader(o),c=(n=(t=s.optional.number(e.params.bufferSize).value)!==null&&t!==void 0?t:i.binding.defaultBufferSize&&i.binding.defaultBufferSize(a.params))!==null&&n!==void 0?n:1,u=s.optional.number(e.params.interval).value,h=new Xct.MonitorBinding({reader:l,target:e.target,ticker:sut(e.document,u),value:(0,Zct.initializeBuffer)(c)}),f=s.optional.boolean(e.params.disabled).value,d=s.optional.boolean(e.params.hidden).value,g=i.controller({document:e.document,params:a.params,value:h.value,viewProps:tut.ViewProps.create({disabled:f,hidden:d})});return new Yct.MonitorBindingController(e.document,{binding:h,blade:(0,Wct.createBlade)(),props:eut.ValueMap.fromObject({label:"label"in e.params?(r=s.optional.string(e.params.label).value)!==null&&r!==void 0?r:null:e.target.key}),valueController:g})}lE.createMonitorBindingController=aut;var r3=bt&&bt.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(Ab,"__esModule",{value:!0});Ab.PluginPool=void 0;var out=Cv,lut=up,cut=Ev,uut=hp,hut=jA,fut=Xd,dut=OA(),L_=xl,put=oE,mut=vi,gut=lE,vut=function(){function i(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}return i.prototype.getAll=function(){return r3(r3(r3([],this.pluginsMap_.blades,!0),this.pluginsMap_.inputs,!0),this.pluginsMap_.monitors,!0)},i.prototype.register=function(e){e.type==="blade"?this.pluginsMap_.blades.unshift(e):e.type==="input"?this.pluginsMap_.inputs.unshift(e):e.type==="monitor"&&this.pluginsMap_.monitors.unshift(e)},i.prototype.createInput=function(e,t,n){var r=t.read();if((0,mut.isEmpty)(r))throw new L_.TpError({context:{key:t.key},type:"nomatchingcontroller"});var s=this.pluginsMap_.inputs.reduce(function(a,o){return a??(0,put.createInputBindingController)(o,{document:e,target:t,params:n})},null);if(s)return s;throw new L_.TpError({context:{key:t.key},type:"nomatchingcontroller"})},i.prototype.createMonitor=function(e,t,n){var r=this.pluginsMap_.monitors.reduce(function(s,a){return s??(0,gut.createMonitorBindingController)(a,{document:e,params:n,target:t})},null);if(r)return r;throw new L_.TpError({context:{key:t.key},type:"nomatchingcontroller"})},i.prototype.createBlade=function(e,t){var n=this.pluginsMap_.blades.reduce(function(r,s){return r??(0,hut.createBladeController)(s,{document:e,params:t})},null);if(!n)throw new L_.TpError({type:"nomatchingview",context:{params:t}});return n},i.prototype.createBladeApi=function(e){var t=this;if(e instanceof lut.InputBindingController)return new out.InputBindingApi(e);if(e instanceof uut.MonitorBindingController)return new cut.MonitorBindingApi(e);if(e instanceof dut.RackController)return new fut.RackApi(e,this);var n=this.pluginsMap_.blades.reduce(function(r,s){return r??s.api({controller:e,pool:t})},null);if(!n)throw L_.TpError.shouldNeverHappen();return n},i}();Ab.PluginPool=vut;var xD;function _ut(){if(xD)return D_;xD=1,Object.defineProperty(D_,"__esModule",{value:!0}),D_.createDefaultPluginPool=void 0;var i=kA,e=zA,t=HA,n=qA,r=cb,s=ub,a=hb,o=fb,l=kc,c=iE(),u=tH(),h=nH(),f=pb,d=mb,g=vb,v=_b,A=Ab;function _(){var y=new A.PluginPool;return[c.Point2dInputPlugin,u.Point3dInputPlugin,h.Point4dInputPlugin,f.StringInputPlugin,l.NumberInputPlugin,o.StringColorInputPlugin,a.ObjectColorInputPlugin,s.NumberColorInputPlugin,r.BooleanInputPlugin,d.BooleanMonitorPlugin,v.StringMonitorPlugin,g.NumberMonitorPlugin,i.ButtonBladePlugin,e.FolderBladePlugin,t.SeparatorBladePlugin,n.TabBladePlugin].forEach(function(x){y.register(x)}),y}return D_.createDefaultPluginPool=_,D_}var CD;function cH(){return CD||(CD=1,function(i){var e=bt&&bt.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a);var l=Object.getOwnPropertyDescriptor(s,a);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(r,o,l)}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=bt&&bt.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,r,a)};Object.defineProperty(i,"__esModule",{value:!0}),i.createBladeController=void 0,t(Eh,i),t(pV,i),t(mV,i),t(Ua,i),t(MA,i),t(TA,i),t(IA,i),t(PA,i),t(kA,i),t(Of,i),t(J0,i),t(BA,i),t(cp,i),t(Do,i),t(RA,i),t(DA,i),t(NA,i),t(zA,i),t(Cv,i),t(up,i),t(K0,i),t(BC,i),t(yv,i),t(Ev,i),t(hp,i),t(UA,i),t(VA,i),t(HA,i),t($A,i),t(GA,i),t(QA,i),t(Mv,i),t(qA,i);var n=jA;Object.defineProperty(i,"createBladeController",{enumerable:!0,get:function(){return n.createBladeController}}),t(WA,i),t(YA,i),t(yV,i),t(XA,i),t(KA,i),t(_u,i),t(CV,i),t(Z0,i),t(fp,i),t(JA,i),t(Tv,i),t(EV,i),t(em,i),t(Iv,i),t(Pv,i),t(SV,i),t(fh,i),t(TV,i),t(wa,i),t(RV,i),t(nb,i),t(Jd,i),t(Kd,i),t(qs,i),t(Sa,i),t(DV,i),t(Ur,i),t(Ff,i),t(vo,i),t(Nf,i),t(zf,i),t(rb,i),t(ab,i),t(ib,i),t(sb,i),t(ob,i),t(Wi,i),t(ZA,i),t(LA,i),t(Eu,i),t(eb,i),t(bl,i),t(tb,i),t(NV,i),t(Yd,i),t(Xa,i),t(Fr,i),t(fa,i),t(FV,i),t(dp,i),t(xl,i),t(Va,i),t(jr,i),t(lb,i),t(cb,i),t(tm,i),t(ba,i),t(Uf,i),t(_o,i),t(ub,i),t(hb,i),t(fb,i),t(nm,i),t(im,i),t(kc,i),t(db,i),t(iE(),i),t(tH(),i),t(nH(),i),t(pb,i),t(pp,i),t(vi,i),t(mb,i),t(rm,i),t(sm,i),t(gb,i),t(vb,i),t(_b,i),t(lH,i),t(_ut(),i),t(Ab,i)}(OS)),OS}var uH=cH();const hH=U0(uH),Aut=vL({__proto__:null,default:hH},[uH]),aT=hH??Aut,ED=aT.ClassName("ph");class but{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(ED()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(ED("t")),n.textContent=t.text,this.element.appendChild(n)}}class R1t extends aT.BladeController{constructor(e,t){super({blade:aT.createBlade(),view:new but(e,t),viewProps:t.viewProps})}}const yut=100,s3=20,of=6,SD=.5;function wut(i,e,t){let{view:n}=e,{t:r}=e,{dim3:s=!1}=e;const a=[0,1],o={rangeX:a,rangeY:a,rangeZ:a,width:s3,height:s3,depth:s3/4,items:1,channels:4,live:!1,expr:(u,h,f,d)=>{s?u(h,f,d,SD):u(h,f,1,SD)}};let l;s?l=[-of/2,-of/2,-of/2]:(o.depth=1,l=[-of/2,-of/2,-of]),n.volume(o);const c=n.reveal({stagger:[1,1,0,0]});return c.transform({scale:[of,of,of],position:l}).point({colors:"<",color:16777215,size:3,zBias:yut}),i.$$set=u=>{"view"in u&&t(0,n=u.view),"t"in u&&t(1,r=u.t),"dim3"in u&&t(2,s=u.dim3)},i.$$.update=()=>{i.$$.dirty&2&&c.set({enter:r})},[n,r,s]}class MD extends ln{constructor(e){super(),cn(this,e,wut,null,an,{view:0,t:1,dim3:2})}}const xut=`
  // Enable STPQ mapping
  #define POSITION_STPQ
  void getPosition(inout vec4 xyzw, inout vec4 stpq) {
    // Store XYZ per vertex in STPQ
    stpq = xyzw;
  }
`,Cut=`
  // Enable STPQ mapping
  #define POSITION_STPQ
  vec4 getColor(vec4 rgba, inout vec4 stpq) {
    // Retrieve interpolated XYZ from vertices and use as RGB color.
    // Note: gamma correction is applied with .fragment({ gamma: true }).
    vec3 rgb = stpq.xyz;

    // Add spatial grid
    // vec3 d3 = abs(fract(stpq.xyz * 16.0) - .5);
    // float level = 1.0 - 2.0 * min(d3.x, min(d3.y, d3.z));
    // float grid = clamp(level * 32.0 - 24.0, 0.0, 1.0) * .5 + .5;

    // return vec4(rgb * grid, 1.0);

    return vec4(rgb, 0.3);
  }
`,a3=8,lf=6;function Eut(i,e,t){let{view:n}=e,{t:r}=e,{dim3:s=!1}=e;const a=[0,1],o={expr(h,f,d,g,v,A,_,y){s?h(f,d,g):h(f,d,1)},width:a3,height:a3,depth:a3,channels:3,rangeX:a,rangeY:a,rangeZ:a};let l;s?l=[-lf/2,-lf/2,-lf/2]:(o.depth=1,l=[-lf/2,-lf/2,-lf]),n.volume({...o});let c=n;c=c.shader({code:xut}).vertex({pass:"data"}),c=c.shader({code:Cut}).fragment({gamma:!0});const u=c.reveal({stagger:[1,1,0,0]});return u.transform({position:l,scale:[lf,lf,lf]}).surface({fill:!0,lineX:!1,lineY:!1,width:2,zBias:1,color:16777215}),i.$$set=h=>{"view"in h&&t(0,n=h.view),"t"in h&&t(1,r=h.t),"dim3"in h&&t(2,s=h.dim3)},i.$$.update=()=>{i.$$.dirty&2&&u.set({enter:r})},[n,r,s]}class TD extends ln{constructor(e){super(),cn(this,e,Eut,null,an,{view:0,t:1,dim3:2})}}function Sut(i,e,t){let{view:n}=e,{t:r}=e,{dim:s=10}=e,{position:a=[0,0,0]}=e,{rotation:o=[0,0,0]}=e;const l=[0,1],c={expr(h,f,d,g,v,A,_,y){h(f,d)},width:s+1,height:s+1,channels:2,rangeX:l,rangeY:l};n.area({...c});const u=n.reveal({stagger:[1,1,0,0]});return u.transform({position:a,scale:[s,s,s],rotation:o}).surface({fill:!0,width:2,color:TY,opacity:.7,closed:!0,width:1,zBias:-5}),i.$$set=h=>{"view"in h&&t(0,n=h.view),"t"in h&&t(1,r=h.t),"dim"in h&&t(2,s=h.dim),"position"in h&&t(3,a=h.position),"rotation"in h&&t(4,o=h.rotation)},i.$$.update=()=>{i.$$.dirty&2&&u.set({enter:r})},[n,r,s,a,o]}class ID extends ln{constructor(e){super(),cn(this,e,Sut,null,an,{view:0,t:1,dim:2,position:3,rotation:4})}}class $l{constructor(e,t,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=n}static range(e,t){return t?!e||!e.loc||!t.loc||e.loc.lexer!==t.loc.lexer?null:new $l(e.loc.lexer,e.loc.start,t.loc.end):e&&e.loc}}class dh{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(e,t){return new dh(t,$l.range(this,e))}}class Gt{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,r,s,a=t&&t.loc;if(a&&a.start<=a.end){var o=a.lexer.input;r=a.start,s=a.end,r===o.length?n+=" at end of input: ":n+=" at position "+(r+1)+": ";var l=o.slice(r,s).replace(/[^]/g,"$&̲"),c;r>15?c="…"+o.slice(r-15,r):c=o.slice(0,r);var u;s+15<o.length?u=o.slice(s,s+15)+"…":u=o.slice(s),n+=c+l+u}var h=new Error(n);return h.name="ParseError",h.__proto__=Gt.prototype,h.position=r,r!=null&&s!=null&&(h.length=s-r),h.rawMessage=e,h}}Gt.prototype.__proto__=Error.prototype;var Mut=function(e,t){return e.indexOf(t)!==-1},Tut=function(e,t){return e===void 0?t:e},Iut=/([A-Z])/g,Put=function(e){return e.replace(Iut,"-$1").toLowerCase()},kut={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},But=/[&><"']/g;function Rut(i){return String(i).replace(But,e=>kut[e])}var fH=function i(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?i(e.body[0]):e:e.type==="font"?i(e.body):e},Dut=function(e){var t=fH(e);return t.type==="mathord"||t.type==="textord"||t.type==="atom"},Lut=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Out=function(e){var t=/^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(e);return t!=null?t[1]:"_relative"},jn={contains:Mut,deflt:Tut,escape:Rut,hyphenate:Put,getBaseElem:fH,isCharacterBox:Dut,protocolFromUrl:Out},ix={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:i=>"#"+i},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(i,e)=>(e.push(i),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:i=>Math.max(0,i),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:i=>Math.max(0,i),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:i=>Math.max(0,i),cli:"-e, --max-expand <n>",cliProcessor:i=>i==="Infinity"?1/0:parseInt(i)},globalGroup:{type:"boolean",cli:!1}};function Nut(i){if(i.default)return i.default;var e=i.type,t=Array.isArray(e)?e[0]:e;if(typeof t!="string")return t.enum[0];switch(t){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class fP{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var t in ix)if(ix.hasOwnProperty(t)){var n=ix[t];this[t]=e[t]!==void 0?n.processor?n.processor(e[t]):e[t]:Nut(n)}}reportNonstrict(e,t,n){var r=this.strict;if(typeof r=="function"&&(r=r(e,t,n)),!(!r||r==="ignore")){if(r===!0||r==="error")throw new Gt("LaTeX-incompatible input and strict mode is set to 'error': "+(t+" ["+e+"]"),n);r==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+r+"': "+t+" ["+e+"]"))}}useStrictBehavior(e,t,n){var r=this.strict;if(typeof r=="function")try{r=r(e,t,n)}catch{r="error"}return!r||r==="ignore"?!1:r===!0||r==="error"?!0:r==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+r+"': "+t+" ["+e+"]")),!1)}isTrusted(e){e.url&&!e.protocol&&(e.protocol=jn.protocolFromUrl(e.url));var t=typeof this.trust=="function"?this.trust(e):this.trust;return!!t}}class md{constructor(e,t,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=n}sup(){return Xu[Fut[this.id]]}sub(){return Xu[zut[this.id]]}fracNum(){return Xu[Uut[this.id]]}fracDen(){return Xu[Vut[this.id]]}cramp(){return Xu[Hut[this.id]]}text(){return Xu[$ut[this.id]]}isTight(){return this.size>=2}}var dP=0,Hx=1,Sg=2,wf=3,V1=4,Bc=5,Xg=6,No=7,Xu=[new md(dP,0,!1),new md(Hx,0,!0),new md(Sg,1,!1),new md(wf,1,!0),new md(V1,2,!1),new md(Bc,2,!0),new md(Xg,3,!1),new md(No,3,!0)],Fut=[V1,Bc,V1,Bc,Xg,No,Xg,No],zut=[Bc,Bc,Bc,Bc,No,No,No,No],Uut=[Sg,wf,V1,Bc,Xg,No,Xg,No],Vut=[wf,wf,Bc,Bc,No,No,No,No],Hut=[Hx,Hx,wf,wf,Bc,Bc,No,No],$ut=[dP,Hx,Sg,wf,Sg,wf,Sg,wf],Ln={DISPLAY:Xu[dP],TEXT:Xu[Sg],SCRIPT:Xu[V1],SCRIPTSCRIPT:Xu[Xg]},oT=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Gut(i){for(var e=0;e<oT.length;e++)for(var t=oT[e],n=0;n<t.blocks.length;n++){var r=t.blocks[n];if(i>=r[0]&&i<=r[1])return t.name}return null}var rx=[];oT.forEach(i=>i.blocks.forEach(e=>rx.push(...e)));function dH(i){for(var e=0;e<rx.length;e+=2)if(i>=rx[e]&&i<=rx[e+1])return!0;return!1}var Ym=80,Qut=function(e,t){return"M95,"+(622+e+t)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},qut=function(e,t){return"M263,"+(601+e+t)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},jut=function(e,t){return"M983 "+(10+e+t)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Wut=function(e,t){return"M424,"+(2398+e+t)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+t+`
h400000v`+(40+e)+"h-400000z"},Yut=function(e,t){return"M473,"+(2713+e+t)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+t+"h400000v"+(40+e)+"H1017.7z"},Xut=function(e){var t=e/2;return"M400000 "+e+" H0 L"+t+" 0 l65 45 L145 "+(e-80)+" H400000z"},Kut=function(e,t,n){var r=n-54-t-e;return"M702 "+(e+t)+"H400000"+(40+e)+`
H742v`+r+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+t+"H400000v"+(40+e)+"H742z"},Jut=function(e,t,n){t=1e3*t;var r="";switch(e){case"sqrtMain":r=Qut(t,Ym);break;case"sqrtSize1":r=qut(t,Ym);break;case"sqrtSize2":r=jut(t,Ym);break;case"sqrtSize3":r=Wut(t,Ym);break;case"sqrtSize4":r=Yut(t,Ym);break;case"sqrtTall":r=Kut(t,Ym,n)}return r},Zut=function(e,t){switch(e){case"⎜":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"∣":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"∥":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z"+("M367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z");case"⎟":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"⎢":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"⎥":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"⎪":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"⏐":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"‖":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257z"+("M478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z");default:return""}},PD={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},eht=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+` v585 h43z
M367 15 v585 v`+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v602 h84z
M403 1759 V0 H319 V1759 v`+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v602 h84z
M347 1759 V0 h-84 V1759 v`+t+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(t+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(t+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(t+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(t+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class bb{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return jn.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){var e=t=>t.toText();return this.children.map(e).join("")}}var sh={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},ww={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},kD={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function tht(i,e){sh[i]=e}function pP(i,e,t){if(!sh[e])throw new Error("Font metrics not found for font: "+e+".");var n=i.charCodeAt(0),r=sh[e][n];if(!r&&i[0]in kD&&(n=kD[i[0]].charCodeAt(0),r=sh[e][n]),!r&&t==="text"&&dH(n)&&(r=sh[e][77]),r)return{depth:r[0],height:r[1],italic:r[2],skew:r[3],width:r[4]}}var o3={};function nht(i){var e;if(i>=5?e=0:i>=3?e=1:e=2,!o3[e]){var t=o3[e]={cssEmPerMu:ww.quad[e]/18};for(var n in ww)ww.hasOwnProperty(n)&&(t[n]=ww[n][e])}return o3[e]}var iht=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],BD=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],RD=function(e,t){return t.size<2?e:iht[e-1][t.size-1]};class mf{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||mf.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=BD[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return new mf(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:RD(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:BD[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=RD(mf.BASESIZE,e);return this.size===t&&this.textSize===mf.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==mf.BASESIZE?["sizing","reset-size"+this.size,"size"+mf.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=nht(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}mf.BASESIZE=6;var lT={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},rht={ex:!0,em:!0,mu:!0},pH=function(e){return typeof e!="string"&&(e=e.unit),e in lT||e in rht||e==="ex"},ps=function(e,t){var n;if(e.unit in lT)n=lT[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if(e.unit==="mu")n=t.fontMetrics().cssEmPerMu;else{var r;if(t.style.isTight()?r=t.havingStyle(t.style.text()):r=t,e.unit==="ex")n=r.fontMetrics().xHeight;else if(e.unit==="em")n=r.fontMetrics().quad;else throw new Gt("Invalid unit: '"+e.unit+"'");r!==t&&(n*=r.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*n,t.maxSize)},Yt=function(e){return+e.toFixed(4)+"em"},Zd=function(e){return e.filter(t=>t).join(" ")},mH=function(e,t,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},t){t.style.isTight()&&this.classes.push("mtight");var r=t.getColor();r&&(this.style.color=r)}},gH=function(e){var t=document.createElement(e);t.className=Zd(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(t.style[n]=this.style[n]);for(var r in this.attributes)this.attributes.hasOwnProperty(r)&&t.setAttribute(r,this.attributes[r]);for(var s=0;s<this.children.length;s++)t.appendChild(this.children[s].toNode());return t},vH=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+jn.escape(Zd(this.classes))+'"');var n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=jn.hyphenate(r)+":"+this.style[r]+";");n&&(t+=' style="'+jn.escape(n)+'"');for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&(t+=" "+s+'="'+jn.escape(this.attributes[s])+'"');t+=">";for(var a=0;a<this.children.length;a++)t+=this.children[a].toMarkup();return t+="</"+e+">",t};class yb{constructor(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,mH.call(this,e,n,r),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return jn.contains(this.classes,e)}toNode(){return gH.call(this,"span")}toMarkup(){return vH.call(this,"span")}}class mP{constructor(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,mH.call(this,t,r),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return jn.contains(this.classes,e)}toNode(){return gH.call(this,"a")}toMarkup(){return vH.call(this,"a")}}class sht{constructor(e,t,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return jn.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var t in this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e="<img  src='"+this.src+" 'alt='"+this.alt+"' ",t="";for(var n in this.style)this.style.hasOwnProperty(n)&&(t+=jn.hyphenate(n)+":"+this.style[n]+";");return t&&(e+=' style="'+jn.escape(t)+'"'),e+="'/>",e}}var aht={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"};class Fc{constructor(e,t,n,r,s,a,o,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=n||0,this.italic=r||0,this.skew=s||0,this.width=a||0,this.classes=o||[],this.style=l||{},this.maxFontSize=0;var c=Gut(this.text.charCodeAt(0));c&&this.classes.push(c+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=aht[this.text])}hasClass(e){return jn.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),t=null;this.italic>0&&(t=document.createElement("span"),t.style.marginRight=Yt(this.italic)),this.classes.length>0&&(t=t||document.createElement("span"),t.className=Zd(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(t=t||document.createElement("span"),t.style[n]=this.style[n]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=jn.escape(Zd(this.classes)),t+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=jn.hyphenate(r)+":"+this.style[r]+";");n&&(e=!0,t+=' style="'+jn.escape(n)+'"');var s=jn.escape(this.text);return e?(t+=">",t+=s,t+="</span>",t):s}}class If{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&t.setAttribute(n,this.attributes[n]);for(var r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+"='"+this.attributes[t]+"'");e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class ep{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",PD[this.pathName]),t}toMarkup(){return this.alternate?"<path d='"+this.alternate+"'/>":"<path d='"+PD[this.pathName]+"'/>"}}class cT{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&t.setAttribute(n,this.attributes[n]);return t}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+"='"+this.attributes[t]+"'");return e+="/>",e}}function DD(i){if(i instanceof Fc)return i;throw new Error("Expected symbolNode but got "+String(i)+".")}function oht(i){if(i instanceof yb)return i;throw new Error("Expected span<HtmlDomNode> but got "+String(i)+".")}var lht={bin:1,close:1,inner:1,open:1,punct:1,rel:1},cht={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},zr={math:{},text:{}};function R(i,e,t,n,r,s){zr[i][r]={font:e,group:t,replace:n},s&&n&&(zr[i][n]=zr[i][r])}var N="math",Ot="text",G="main",_e="ams",ss="accent-token",on="bin",Vo="close",kv="inner",zn="mathord",da="op-token",ic="open",cE="punct",ye="rel",Vf="spacing",De="textord";R(N,G,ye,"≡","\\equiv",!0);R(N,G,ye,"≺","\\prec",!0);R(N,G,ye,"≻","\\succ",!0);R(N,G,ye,"∼","\\sim",!0);R(N,G,ye,"⊥","\\perp");R(N,G,ye,"⪯","\\preceq",!0);R(N,G,ye,"⪰","\\succeq",!0);R(N,G,ye,"≃","\\simeq",!0);R(N,G,ye,"∣","\\mid",!0);R(N,G,ye,"≪","\\ll",!0);R(N,G,ye,"≫","\\gg",!0);R(N,G,ye,"≍","\\asymp",!0);R(N,G,ye,"∥","\\parallel");R(N,G,ye,"⋈","\\bowtie",!0);R(N,G,ye,"⌣","\\smile",!0);R(N,G,ye,"⊑","\\sqsubseteq",!0);R(N,G,ye,"⊒","\\sqsupseteq",!0);R(N,G,ye,"≐","\\doteq",!0);R(N,G,ye,"⌢","\\frown",!0);R(N,G,ye,"∋","\\ni",!0);R(N,G,ye,"∝","\\propto",!0);R(N,G,ye,"⊢","\\vdash",!0);R(N,G,ye,"⊣","\\dashv",!0);R(N,G,ye,"∋","\\owns");R(N,G,cE,".","\\ldotp");R(N,G,cE,"⋅","\\cdotp");R(N,G,De,"#","\\#");R(Ot,G,De,"#","\\#");R(N,G,De,"&","\\&");R(Ot,G,De,"&","\\&");R(N,G,De,"ℵ","\\aleph",!0);R(N,G,De,"∀","\\forall",!0);R(N,G,De,"ℏ","\\hbar",!0);R(N,G,De,"∃","\\exists",!0);R(N,G,De,"∇","\\nabla",!0);R(N,G,De,"♭","\\flat",!0);R(N,G,De,"ℓ","\\ell",!0);R(N,G,De,"♮","\\natural",!0);R(N,G,De,"♣","\\clubsuit",!0);R(N,G,De,"℘","\\wp",!0);R(N,G,De,"♯","\\sharp",!0);R(N,G,De,"♢","\\diamondsuit",!0);R(N,G,De,"ℜ","\\Re",!0);R(N,G,De,"♡","\\heartsuit",!0);R(N,G,De,"ℑ","\\Im",!0);R(N,G,De,"♠","\\spadesuit",!0);R(N,G,De,"§","\\S",!0);R(Ot,G,De,"§","\\S");R(N,G,De,"¶","\\P",!0);R(Ot,G,De,"¶","\\P");R(N,G,De,"†","\\dag");R(Ot,G,De,"†","\\dag");R(Ot,G,De,"†","\\textdagger");R(N,G,De,"‡","\\ddag");R(Ot,G,De,"‡","\\ddag");R(Ot,G,De,"‡","\\textdaggerdbl");R(N,G,Vo,"⎱","\\rmoustache",!0);R(N,G,ic,"⎰","\\lmoustache",!0);R(N,G,Vo,"⟯","\\rgroup",!0);R(N,G,ic,"⟮","\\lgroup",!0);R(N,G,on,"∓","\\mp",!0);R(N,G,on,"⊖","\\ominus",!0);R(N,G,on,"⊎","\\uplus",!0);R(N,G,on,"⊓","\\sqcap",!0);R(N,G,on,"∗","\\ast");R(N,G,on,"⊔","\\sqcup",!0);R(N,G,on,"◯","\\bigcirc",!0);R(N,G,on,"∙","\\bullet",!0);R(N,G,on,"‡","\\ddagger");R(N,G,on,"≀","\\wr",!0);R(N,G,on,"⨿","\\amalg");R(N,G,on,"&","\\And");R(N,G,ye,"⟵","\\longleftarrow",!0);R(N,G,ye,"⇐","\\Leftarrow",!0);R(N,G,ye,"⟸","\\Longleftarrow",!0);R(N,G,ye,"⟶","\\longrightarrow",!0);R(N,G,ye,"⇒","\\Rightarrow",!0);R(N,G,ye,"⟹","\\Longrightarrow",!0);R(N,G,ye,"↔","\\leftrightarrow",!0);R(N,G,ye,"⟷","\\longleftrightarrow",!0);R(N,G,ye,"⇔","\\Leftrightarrow",!0);R(N,G,ye,"⟺","\\Longleftrightarrow",!0);R(N,G,ye,"↦","\\mapsto",!0);R(N,G,ye,"⟼","\\longmapsto",!0);R(N,G,ye,"↗","\\nearrow",!0);R(N,G,ye,"↩","\\hookleftarrow",!0);R(N,G,ye,"↪","\\hookrightarrow",!0);R(N,G,ye,"↘","\\searrow",!0);R(N,G,ye,"↼","\\leftharpoonup",!0);R(N,G,ye,"⇀","\\rightharpoonup",!0);R(N,G,ye,"↙","\\swarrow",!0);R(N,G,ye,"↽","\\leftharpoondown",!0);R(N,G,ye,"⇁","\\rightharpoondown",!0);R(N,G,ye,"↖","\\nwarrow",!0);R(N,G,ye,"⇌","\\rightleftharpoons",!0);R(N,_e,ye,"≮","\\nless",!0);R(N,_e,ye,"","\\@nleqslant");R(N,_e,ye,"","\\@nleqq");R(N,_e,ye,"⪇","\\lneq",!0);R(N,_e,ye,"≨","\\lneqq",!0);R(N,_e,ye,"","\\@lvertneqq");R(N,_e,ye,"⋦","\\lnsim",!0);R(N,_e,ye,"⪉","\\lnapprox",!0);R(N,_e,ye,"⊀","\\nprec",!0);R(N,_e,ye,"⋠","\\npreceq",!0);R(N,_e,ye,"⋨","\\precnsim",!0);R(N,_e,ye,"⪹","\\precnapprox",!0);R(N,_e,ye,"≁","\\nsim",!0);R(N,_e,ye,"","\\@nshortmid");R(N,_e,ye,"∤","\\nmid",!0);R(N,_e,ye,"⊬","\\nvdash",!0);R(N,_e,ye,"⊭","\\nvDash",!0);R(N,_e,ye,"⋪","\\ntriangleleft");R(N,_e,ye,"⋬","\\ntrianglelefteq",!0);R(N,_e,ye,"⊊","\\subsetneq",!0);R(N,_e,ye,"","\\@varsubsetneq");R(N,_e,ye,"⫋","\\subsetneqq",!0);R(N,_e,ye,"","\\@varsubsetneqq");R(N,_e,ye,"≯","\\ngtr",!0);R(N,_e,ye,"","\\@ngeqslant");R(N,_e,ye,"","\\@ngeqq");R(N,_e,ye,"⪈","\\gneq",!0);R(N,_e,ye,"≩","\\gneqq",!0);R(N,_e,ye,"","\\@gvertneqq");R(N,_e,ye,"⋧","\\gnsim",!0);R(N,_e,ye,"⪊","\\gnapprox",!0);R(N,_e,ye,"⊁","\\nsucc",!0);R(N,_e,ye,"⋡","\\nsucceq",!0);R(N,_e,ye,"⋩","\\succnsim",!0);R(N,_e,ye,"⪺","\\succnapprox",!0);R(N,_e,ye,"≆","\\ncong",!0);R(N,_e,ye,"","\\@nshortparallel");R(N,_e,ye,"∦","\\nparallel",!0);R(N,_e,ye,"⊯","\\nVDash",!0);R(N,_e,ye,"⋫","\\ntriangleright");R(N,_e,ye,"⋭","\\ntrianglerighteq",!0);R(N,_e,ye,"","\\@nsupseteqq");R(N,_e,ye,"⊋","\\supsetneq",!0);R(N,_e,ye,"","\\@varsupsetneq");R(N,_e,ye,"⫌","\\supsetneqq",!0);R(N,_e,ye,"","\\@varsupsetneqq");R(N,_e,ye,"⊮","\\nVdash",!0);R(N,_e,ye,"⪵","\\precneqq",!0);R(N,_e,ye,"⪶","\\succneqq",!0);R(N,_e,ye,"","\\@nsubseteqq");R(N,_e,on,"⊴","\\unlhd");R(N,_e,on,"⊵","\\unrhd");R(N,_e,ye,"↚","\\nleftarrow",!0);R(N,_e,ye,"↛","\\nrightarrow",!0);R(N,_e,ye,"⇍","\\nLeftarrow",!0);R(N,_e,ye,"⇏","\\nRightarrow",!0);R(N,_e,ye,"↮","\\nleftrightarrow",!0);R(N,_e,ye,"⇎","\\nLeftrightarrow",!0);R(N,_e,ye,"△","\\vartriangle");R(N,_e,De,"ℏ","\\hslash");R(N,_e,De,"▽","\\triangledown");R(N,_e,De,"◊","\\lozenge");R(N,_e,De,"Ⓢ","\\circledS");R(N,_e,De,"®","\\circledR");R(Ot,_e,De,"®","\\circledR");R(N,_e,De,"∡","\\measuredangle",!0);R(N,_e,De,"∄","\\nexists");R(N,_e,De,"℧","\\mho");R(N,_e,De,"Ⅎ","\\Finv",!0);R(N,_e,De,"⅁","\\Game",!0);R(N,_e,De,"‵","\\backprime");R(N,_e,De,"▲","\\blacktriangle");R(N,_e,De,"▼","\\blacktriangledown");R(N,_e,De,"■","\\blacksquare");R(N,_e,De,"⧫","\\blacklozenge");R(N,_e,De,"★","\\bigstar");R(N,_e,De,"∢","\\sphericalangle",!0);R(N,_e,De,"∁","\\complement",!0);R(N,_e,De,"ð","\\eth",!0);R(Ot,G,De,"ð","ð");R(N,_e,De,"╱","\\diagup");R(N,_e,De,"╲","\\diagdown");R(N,_e,De,"□","\\square");R(N,_e,De,"□","\\Box");R(N,_e,De,"◊","\\Diamond");R(N,_e,De,"¥","\\yen",!0);R(Ot,_e,De,"¥","\\yen",!0);R(N,_e,De,"✓","\\checkmark",!0);R(Ot,_e,De,"✓","\\checkmark");R(N,_e,De,"ℶ","\\beth",!0);R(N,_e,De,"ℸ","\\daleth",!0);R(N,_e,De,"ℷ","\\gimel",!0);R(N,_e,De,"ϝ","\\digamma",!0);R(N,_e,De,"ϰ","\\varkappa");R(N,_e,ic,"┌","\\@ulcorner",!0);R(N,_e,Vo,"┐","\\@urcorner",!0);R(N,_e,ic,"└","\\@llcorner",!0);R(N,_e,Vo,"┘","\\@lrcorner",!0);R(N,_e,ye,"≦","\\leqq",!0);R(N,_e,ye,"⩽","\\leqslant",!0);R(N,_e,ye,"⪕","\\eqslantless",!0);R(N,_e,ye,"≲","\\lesssim",!0);R(N,_e,ye,"⪅","\\lessapprox",!0);R(N,_e,ye,"≊","\\approxeq",!0);R(N,_e,on,"⋖","\\lessdot");R(N,_e,ye,"⋘","\\lll",!0);R(N,_e,ye,"≶","\\lessgtr",!0);R(N,_e,ye,"⋚","\\lesseqgtr",!0);R(N,_e,ye,"⪋","\\lesseqqgtr",!0);R(N,_e,ye,"≑","\\doteqdot");R(N,_e,ye,"≓","\\risingdotseq",!0);R(N,_e,ye,"≒","\\fallingdotseq",!0);R(N,_e,ye,"∽","\\backsim",!0);R(N,_e,ye,"⋍","\\backsimeq",!0);R(N,_e,ye,"⫅","\\subseteqq",!0);R(N,_e,ye,"⋐","\\Subset",!0);R(N,_e,ye,"⊏","\\sqsubset",!0);R(N,_e,ye,"≼","\\preccurlyeq",!0);R(N,_e,ye,"⋞","\\curlyeqprec",!0);R(N,_e,ye,"≾","\\precsim",!0);R(N,_e,ye,"⪷","\\precapprox",!0);R(N,_e,ye,"⊲","\\vartriangleleft");R(N,_e,ye,"⊴","\\trianglelefteq");R(N,_e,ye,"⊨","\\vDash",!0);R(N,_e,ye,"⊪","\\Vvdash",!0);R(N,_e,ye,"⌣","\\smallsmile");R(N,_e,ye,"⌢","\\smallfrown");R(N,_e,ye,"≏","\\bumpeq",!0);R(N,_e,ye,"≎","\\Bumpeq",!0);R(N,_e,ye,"≧","\\geqq",!0);R(N,_e,ye,"⩾","\\geqslant",!0);R(N,_e,ye,"⪖","\\eqslantgtr",!0);R(N,_e,ye,"≳","\\gtrsim",!0);R(N,_e,ye,"⪆","\\gtrapprox",!0);R(N,_e,on,"⋗","\\gtrdot");R(N,_e,ye,"⋙","\\ggg",!0);R(N,_e,ye,"≷","\\gtrless",!0);R(N,_e,ye,"⋛","\\gtreqless",!0);R(N,_e,ye,"⪌","\\gtreqqless",!0);R(N,_e,ye,"≖","\\eqcirc",!0);R(N,_e,ye,"≗","\\circeq",!0);R(N,_e,ye,"≜","\\triangleq",!0);R(N,_e,ye,"∼","\\thicksim");R(N,_e,ye,"≈","\\thickapprox");R(N,_e,ye,"⫆","\\supseteqq",!0);R(N,_e,ye,"⋑","\\Supset",!0);R(N,_e,ye,"⊐","\\sqsupset",!0);R(N,_e,ye,"≽","\\succcurlyeq",!0);R(N,_e,ye,"⋟","\\curlyeqsucc",!0);R(N,_e,ye,"≿","\\succsim",!0);R(N,_e,ye,"⪸","\\succapprox",!0);R(N,_e,ye,"⊳","\\vartriangleright");R(N,_e,ye,"⊵","\\trianglerighteq");R(N,_e,ye,"⊩","\\Vdash",!0);R(N,_e,ye,"∣","\\shortmid");R(N,_e,ye,"∥","\\shortparallel");R(N,_e,ye,"≬","\\between",!0);R(N,_e,ye,"⋔","\\pitchfork",!0);R(N,_e,ye,"∝","\\varpropto");R(N,_e,ye,"◀","\\blacktriangleleft");R(N,_e,ye,"∴","\\therefore",!0);R(N,_e,ye,"∍","\\backepsilon");R(N,_e,ye,"▶","\\blacktriangleright");R(N,_e,ye,"∵","\\because",!0);R(N,_e,ye,"⋘","\\llless");R(N,_e,ye,"⋙","\\gggtr");R(N,_e,on,"⊲","\\lhd");R(N,_e,on,"⊳","\\rhd");R(N,_e,ye,"≂","\\eqsim",!0);R(N,G,ye,"⋈","\\Join");R(N,_e,ye,"≑","\\Doteq",!0);R(N,_e,on,"∔","\\dotplus",!0);R(N,_e,on,"∖","\\smallsetminus");R(N,_e,on,"⋒","\\Cap",!0);R(N,_e,on,"⋓","\\Cup",!0);R(N,_e,on,"⩞","\\doublebarwedge",!0);R(N,_e,on,"⊟","\\boxminus",!0);R(N,_e,on,"⊞","\\boxplus",!0);R(N,_e,on,"⋇","\\divideontimes",!0);R(N,_e,on,"⋉","\\ltimes",!0);R(N,_e,on,"⋊","\\rtimes",!0);R(N,_e,on,"⋋","\\leftthreetimes",!0);R(N,_e,on,"⋌","\\rightthreetimes",!0);R(N,_e,on,"⋏","\\curlywedge",!0);R(N,_e,on,"⋎","\\curlyvee",!0);R(N,_e,on,"⊝","\\circleddash",!0);R(N,_e,on,"⊛","\\circledast",!0);R(N,_e,on,"⋅","\\centerdot");R(N,_e,on,"⊺","\\intercal",!0);R(N,_e,on,"⋒","\\doublecap");R(N,_e,on,"⋓","\\doublecup");R(N,_e,on,"⊠","\\boxtimes",!0);R(N,_e,ye,"⇢","\\dashrightarrow",!0);R(N,_e,ye,"⇠","\\dashleftarrow",!0);R(N,_e,ye,"⇇","\\leftleftarrows",!0);R(N,_e,ye,"⇆","\\leftrightarrows",!0);R(N,_e,ye,"⇚","\\Lleftarrow",!0);R(N,_e,ye,"↞","\\twoheadleftarrow",!0);R(N,_e,ye,"↢","\\leftarrowtail",!0);R(N,_e,ye,"↫","\\looparrowleft",!0);R(N,_e,ye,"⇋","\\leftrightharpoons",!0);R(N,_e,ye,"↶","\\curvearrowleft",!0);R(N,_e,ye,"↺","\\circlearrowleft",!0);R(N,_e,ye,"↰","\\Lsh",!0);R(N,_e,ye,"⇈","\\upuparrows",!0);R(N,_e,ye,"↿","\\upharpoonleft",!0);R(N,_e,ye,"⇃","\\downharpoonleft",!0);R(N,G,ye,"⊶","\\origof",!0);R(N,G,ye,"⊷","\\imageof",!0);R(N,_e,ye,"⊸","\\multimap",!0);R(N,_e,ye,"↭","\\leftrightsquigarrow",!0);R(N,_e,ye,"⇉","\\rightrightarrows",!0);R(N,_e,ye,"⇄","\\rightleftarrows",!0);R(N,_e,ye,"↠","\\twoheadrightarrow",!0);R(N,_e,ye,"↣","\\rightarrowtail",!0);R(N,_e,ye,"↬","\\looparrowright",!0);R(N,_e,ye,"↷","\\curvearrowright",!0);R(N,_e,ye,"↻","\\circlearrowright",!0);R(N,_e,ye,"↱","\\Rsh",!0);R(N,_e,ye,"⇊","\\downdownarrows",!0);R(N,_e,ye,"↾","\\upharpoonright",!0);R(N,_e,ye,"⇂","\\downharpoonright",!0);R(N,_e,ye,"⇝","\\rightsquigarrow",!0);R(N,_e,ye,"⇝","\\leadsto");R(N,_e,ye,"⇛","\\Rrightarrow",!0);R(N,_e,ye,"↾","\\restriction");R(N,G,De,"‘","`");R(N,G,De,"$","\\$");R(Ot,G,De,"$","\\$");R(Ot,G,De,"$","\\textdollar");R(N,G,De,"%","\\%");R(Ot,G,De,"%","\\%");R(N,G,De,"_","\\_");R(Ot,G,De,"_","\\_");R(Ot,G,De,"_","\\textunderscore");R(N,G,De,"∠","\\angle",!0);R(N,G,De,"∞","\\infty",!0);R(N,G,De,"′","\\prime");R(N,G,De,"△","\\triangle");R(N,G,De,"Γ","\\Gamma",!0);R(N,G,De,"Δ","\\Delta",!0);R(N,G,De,"Θ","\\Theta",!0);R(N,G,De,"Λ","\\Lambda",!0);R(N,G,De,"Ξ","\\Xi",!0);R(N,G,De,"Π","\\Pi",!0);R(N,G,De,"Σ","\\Sigma",!0);R(N,G,De,"Υ","\\Upsilon",!0);R(N,G,De,"Φ","\\Phi",!0);R(N,G,De,"Ψ","\\Psi",!0);R(N,G,De,"Ω","\\Omega",!0);R(N,G,De,"A","Α");R(N,G,De,"B","Β");R(N,G,De,"E","Ε");R(N,G,De,"Z","Ζ");R(N,G,De,"H","Η");R(N,G,De,"I","Ι");R(N,G,De,"K","Κ");R(N,G,De,"M","Μ");R(N,G,De,"N","Ν");R(N,G,De,"O","Ο");R(N,G,De,"P","Ρ");R(N,G,De,"T","Τ");R(N,G,De,"X","Χ");R(N,G,De,"¬","\\neg",!0);R(N,G,De,"¬","\\lnot");R(N,G,De,"⊤","\\top");R(N,G,De,"⊥","\\bot");R(N,G,De,"∅","\\emptyset");R(N,_e,De,"∅","\\varnothing");R(N,G,zn,"α","\\alpha",!0);R(N,G,zn,"β","\\beta",!0);R(N,G,zn,"γ","\\gamma",!0);R(N,G,zn,"δ","\\delta",!0);R(N,G,zn,"ϵ","\\epsilon",!0);R(N,G,zn,"ζ","\\zeta",!0);R(N,G,zn,"η","\\eta",!0);R(N,G,zn,"θ","\\theta",!0);R(N,G,zn,"ι","\\iota",!0);R(N,G,zn,"κ","\\kappa",!0);R(N,G,zn,"λ","\\lambda",!0);R(N,G,zn,"μ","\\mu",!0);R(N,G,zn,"ν","\\nu",!0);R(N,G,zn,"ξ","\\xi",!0);R(N,G,zn,"ο","\\omicron",!0);R(N,G,zn,"π","\\pi",!0);R(N,G,zn,"ρ","\\rho",!0);R(N,G,zn,"σ","\\sigma",!0);R(N,G,zn,"τ","\\tau",!0);R(N,G,zn,"υ","\\upsilon",!0);R(N,G,zn,"ϕ","\\phi",!0);R(N,G,zn,"χ","\\chi",!0);R(N,G,zn,"ψ","\\psi",!0);R(N,G,zn,"ω","\\omega",!0);R(N,G,zn,"ε","\\varepsilon",!0);R(N,G,zn,"ϑ","\\vartheta",!0);R(N,G,zn,"ϖ","\\varpi",!0);R(N,G,zn,"ϱ","\\varrho",!0);R(N,G,zn,"ς","\\varsigma",!0);R(N,G,zn,"φ","\\varphi",!0);R(N,G,on,"∗","*",!0);R(N,G,on,"+","+");R(N,G,on,"−","-",!0);R(N,G,on,"⋅","\\cdot",!0);R(N,G,on,"∘","\\circ",!0);R(N,G,on,"÷","\\div",!0);R(N,G,on,"±","\\pm",!0);R(N,G,on,"×","\\times",!0);R(N,G,on,"∩","\\cap",!0);R(N,G,on,"∪","\\cup",!0);R(N,G,on,"∖","\\setminus",!0);R(N,G,on,"∧","\\land");R(N,G,on,"∨","\\lor");R(N,G,on,"∧","\\wedge",!0);R(N,G,on,"∨","\\vee",!0);R(N,G,De,"√","\\surd");R(N,G,ic,"⟨","\\langle",!0);R(N,G,ic,"∣","\\lvert");R(N,G,ic,"∥","\\lVert");R(N,G,Vo,"?","?");R(N,G,Vo,"!","!");R(N,G,Vo,"⟩","\\rangle",!0);R(N,G,Vo,"∣","\\rvert");R(N,G,Vo,"∥","\\rVert");R(N,G,ye,"=","=");R(N,G,ye,":",":");R(N,G,ye,"≈","\\approx",!0);R(N,G,ye,"≅","\\cong",!0);R(N,G,ye,"≥","\\ge");R(N,G,ye,"≥","\\geq",!0);R(N,G,ye,"←","\\gets");R(N,G,ye,">","\\gt",!0);R(N,G,ye,"∈","\\in",!0);R(N,G,ye,"","\\@not");R(N,G,ye,"⊂","\\subset",!0);R(N,G,ye,"⊃","\\supset",!0);R(N,G,ye,"⊆","\\subseteq",!0);R(N,G,ye,"⊇","\\supseteq",!0);R(N,_e,ye,"⊈","\\nsubseteq",!0);R(N,_e,ye,"⊉","\\nsupseteq",!0);R(N,G,ye,"⊨","\\models");R(N,G,ye,"←","\\leftarrow",!0);R(N,G,ye,"≤","\\le");R(N,G,ye,"≤","\\leq",!0);R(N,G,ye,"<","\\lt",!0);R(N,G,ye,"→","\\rightarrow",!0);R(N,G,ye,"→","\\to");R(N,_e,ye,"≱","\\ngeq",!0);R(N,_e,ye,"≰","\\nleq",!0);R(N,G,Vf," ","\\ ");R(N,G,Vf," ","\\space");R(N,G,Vf," ","\\nobreakspace");R(Ot,G,Vf," ","\\ ");R(Ot,G,Vf," "," ");R(Ot,G,Vf," ","\\space");R(Ot,G,Vf," ","\\nobreakspace");R(N,G,Vf,null,"\\nobreak");R(N,G,Vf,null,"\\allowbreak");R(N,G,cE,",",",");R(N,G,cE,";",";");R(N,_e,on,"⊼","\\barwedge",!0);R(N,_e,on,"⊻","\\veebar",!0);R(N,G,on,"⊙","\\odot",!0);R(N,G,on,"⊕","\\oplus",!0);R(N,G,on,"⊗","\\otimes",!0);R(N,G,De,"∂","\\partial",!0);R(N,G,on,"⊘","\\oslash",!0);R(N,_e,on,"⊚","\\circledcirc",!0);R(N,_e,on,"⊡","\\boxdot",!0);R(N,G,on,"△","\\bigtriangleup");R(N,G,on,"▽","\\bigtriangledown");R(N,G,on,"†","\\dagger");R(N,G,on,"⋄","\\diamond");R(N,G,on,"⋆","\\star");R(N,G,on,"◃","\\triangleleft");R(N,G,on,"▹","\\triangleright");R(N,G,ic,"{","\\{");R(Ot,G,De,"{","\\{");R(Ot,G,De,"{","\\textbraceleft");R(N,G,Vo,"}","\\}");R(Ot,G,De,"}","\\}");R(Ot,G,De,"}","\\textbraceright");R(N,G,ic,"{","\\lbrace");R(N,G,Vo,"}","\\rbrace");R(N,G,ic,"[","\\lbrack",!0);R(Ot,G,De,"[","\\lbrack",!0);R(N,G,Vo,"]","\\rbrack",!0);R(Ot,G,De,"]","\\rbrack",!0);R(N,G,ic,"(","\\lparen",!0);R(N,G,Vo,")","\\rparen",!0);R(Ot,G,De,"<","\\textless",!0);R(Ot,G,De,">","\\textgreater",!0);R(N,G,ic,"⌊","\\lfloor",!0);R(N,G,Vo,"⌋","\\rfloor",!0);R(N,G,ic,"⌈","\\lceil",!0);R(N,G,Vo,"⌉","\\rceil",!0);R(N,G,De,"\\","\\backslash");R(N,G,De,"∣","|");R(N,G,De,"∣","\\vert");R(Ot,G,De,"|","\\textbar",!0);R(N,G,De,"∥","\\|");R(N,G,De,"∥","\\Vert");R(Ot,G,De,"∥","\\textbardbl");R(Ot,G,De,"~","\\textasciitilde");R(Ot,G,De,"\\","\\textbackslash");R(Ot,G,De,"^","\\textasciicircum");R(N,G,ye,"↑","\\uparrow",!0);R(N,G,ye,"⇑","\\Uparrow",!0);R(N,G,ye,"↓","\\downarrow",!0);R(N,G,ye,"⇓","\\Downarrow",!0);R(N,G,ye,"↕","\\updownarrow",!0);R(N,G,ye,"⇕","\\Updownarrow",!0);R(N,G,da,"∐","\\coprod");R(N,G,da,"⋁","\\bigvee");R(N,G,da,"⋀","\\bigwedge");R(N,G,da,"⨄","\\biguplus");R(N,G,da,"⋂","\\bigcap");R(N,G,da,"⋃","\\bigcup");R(N,G,da,"∫","\\int");R(N,G,da,"∫","\\intop");R(N,G,da,"∬","\\iint");R(N,G,da,"∭","\\iiint");R(N,G,da,"∏","\\prod");R(N,G,da,"∑","\\sum");R(N,G,da,"⨂","\\bigotimes");R(N,G,da,"⨁","\\bigoplus");R(N,G,da,"⨀","\\bigodot");R(N,G,da,"∮","\\oint");R(N,G,da,"∯","\\oiint");R(N,G,da,"∰","\\oiiint");R(N,G,da,"⨆","\\bigsqcup");R(N,G,da,"∫","\\smallint");R(Ot,G,kv,"…","\\textellipsis");R(N,G,kv,"…","\\mathellipsis");R(Ot,G,kv,"…","\\ldots",!0);R(N,G,kv,"…","\\ldots",!0);R(N,G,kv,"⋯","\\@cdots",!0);R(N,G,kv,"⋱","\\ddots",!0);R(N,G,De,"⋮","\\varvdots");R(N,G,ss,"ˊ","\\acute");R(N,G,ss,"ˋ","\\grave");R(N,G,ss,"¨","\\ddot");R(N,G,ss,"~","\\tilde");R(N,G,ss,"ˉ","\\bar");R(N,G,ss,"˘","\\breve");R(N,G,ss,"ˇ","\\check");R(N,G,ss,"^","\\hat");R(N,G,ss,"⃗","\\vec");R(N,G,ss,"˙","\\dot");R(N,G,ss,"˚","\\mathring");R(N,G,zn,"","\\@imath");R(N,G,zn,"","\\@jmath");R(N,G,De,"ı","ı");R(N,G,De,"ȷ","ȷ");R(Ot,G,De,"ı","\\i",!0);R(Ot,G,De,"ȷ","\\j",!0);R(Ot,G,De,"ß","\\ss",!0);R(Ot,G,De,"æ","\\ae",!0);R(Ot,G,De,"œ","\\oe",!0);R(Ot,G,De,"ø","\\o",!0);R(Ot,G,De,"Æ","\\AE",!0);R(Ot,G,De,"Œ","\\OE",!0);R(Ot,G,De,"Ø","\\O",!0);R(Ot,G,ss,"ˊ","\\'");R(Ot,G,ss,"ˋ","\\`");R(Ot,G,ss,"ˆ","\\^");R(Ot,G,ss,"˜","\\~");R(Ot,G,ss,"ˉ","\\=");R(Ot,G,ss,"˘","\\u");R(Ot,G,ss,"˙","\\.");R(Ot,G,ss,"¸","\\c");R(Ot,G,ss,"˚","\\r");R(Ot,G,ss,"ˇ","\\v");R(Ot,G,ss,"¨",'\\"');R(Ot,G,ss,"˝","\\H");R(Ot,G,ss,"◯","\\textcircled");var _H={"--":!0,"---":!0,"``":!0,"''":!0};R(Ot,G,De,"–","--",!0);R(Ot,G,De,"–","\\textendash");R(Ot,G,De,"—","---",!0);R(Ot,G,De,"—","\\textemdash");R(Ot,G,De,"‘","`",!0);R(Ot,G,De,"‘","\\textquoteleft");R(Ot,G,De,"’","'",!0);R(Ot,G,De,"’","\\textquoteright");R(Ot,G,De,"“","``",!0);R(Ot,G,De,"“","\\textquotedblleft");R(Ot,G,De,"”","''",!0);R(Ot,G,De,"”","\\textquotedblright");R(N,G,De,"°","\\degree",!0);R(Ot,G,De,"°","\\degree");R(Ot,G,De,"°","\\textdegree",!0);R(N,G,De,"£","\\pounds");R(N,G,De,"£","\\mathsterling",!0);R(Ot,G,De,"£","\\pounds");R(Ot,G,De,"£","\\textsterling",!0);R(N,_e,De,"✠","\\maltese");R(Ot,_e,De,"✠","\\maltese");var LD='0123456789/@."';for(var l3=0;l3<LD.length;l3++){var OD=LD.charAt(l3);R(N,G,De,OD,OD)}var ND='0123456789!@*()-=+";:?/.,';for(var c3=0;c3<ND.length;c3++){var FD=ND.charAt(c3);R(Ot,G,De,FD,FD)}var $x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var u3=0;u3<$x.length;u3++){var xw=$x.charAt(u3);R(N,G,zn,xw,xw),R(Ot,G,De,xw,xw)}R(N,_e,De,"C","ℂ");R(Ot,_e,De,"C","ℂ");R(N,_e,De,"H","ℍ");R(Ot,_e,De,"H","ℍ");R(N,_e,De,"N","ℕ");R(Ot,_e,De,"N","ℕ");R(N,_e,De,"P","ℙ");R(Ot,_e,De,"P","ℙ");R(N,_e,De,"Q","ℚ");R(Ot,_e,De,"Q","ℚ");R(N,_e,De,"R","ℝ");R(Ot,_e,De,"R","ℝ");R(N,_e,De,"Z","ℤ");R(Ot,_e,De,"Z","ℤ");R(N,G,zn,"h","ℎ");R(Ot,G,zn,"h","ℎ");var ei="";for(var el=0;el<$x.length;el++){var ra=$x.charAt(el);ei=String.fromCharCode(55349,56320+el),R(N,G,zn,ra,ei),R(Ot,G,De,ra,ei),ei=String.fromCharCode(55349,56372+el),R(N,G,zn,ra,ei),R(Ot,G,De,ra,ei),ei=String.fromCharCode(55349,56424+el),R(N,G,zn,ra,ei),R(Ot,G,De,ra,ei),ei=String.fromCharCode(55349,56580+el),R(N,G,zn,ra,ei),R(Ot,G,De,ra,ei),ei=String.fromCharCode(55349,56736+el),R(N,G,zn,ra,ei),R(Ot,G,De,ra,ei),ei=String.fromCharCode(55349,56788+el),R(N,G,zn,ra,ei),R(Ot,G,De,ra,ei),ei=String.fromCharCode(55349,56840+el),R(N,G,zn,ra,ei),R(Ot,G,De,ra,ei),ei=String.fromCharCode(55349,56944+el),R(N,G,zn,ra,ei),R(Ot,G,De,ra,ei),el<26&&(ei=String.fromCharCode(55349,56632+el),R(N,G,zn,ra,ei),R(Ot,G,De,ra,ei),ei=String.fromCharCode(55349,56476+el),R(N,G,zn,ra,ei),R(Ot,G,De,ra,ei))}ei=String.fromCharCode(55349,56668);R(N,G,zn,"k",ei);R(Ot,G,De,"k",ei);for(var Wp=0;Wp<10;Wp++){var gd=Wp.toString();ei=String.fromCharCode(55349,57294+Wp),R(N,G,zn,gd,ei),R(Ot,G,De,gd,ei),ei=String.fromCharCode(55349,57314+Wp),R(N,G,zn,gd,ei),R(Ot,G,De,gd,ei),ei=String.fromCharCode(55349,57324+Wp),R(N,G,zn,gd,ei),R(Ot,G,De,gd,ei),ei=String.fromCharCode(55349,57334+Wp),R(N,G,zn,gd,ei),R(Ot,G,De,gd,ei)}var uT="ÐÞþ";for(var h3=0;h3<uT.length;h3++){var Cw=uT.charAt(h3);R(N,G,zn,Cw,Cw),R(Ot,G,De,Cw,Cw)}var Ew=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["","",""],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],zD=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],uht=function(e,t){var n=e.charCodeAt(0),r=e.charCodeAt(1),s=(n-55296)*1024+(r-56320)+65536,a=t==="math"?0:1;if(119808<=s&&s<120484){var o=Math.floor((s-119808)/26);return[Ew[o][2],Ew[o][a]]}else if(120782<=s&&s<=120831){var l=Math.floor((s-120782)/10);return[zD[l][2],zD[l][a]]}else{if(s===120485||s===120486)return[Ew[0][2],Ew[0][a]];if(120486<s&&s<120782)return["",""];throw new Gt("Unsupported character: "+e)}},uE=function(e,t,n){return zr[n][e]&&zr[n][e].replace&&(e=zr[n][e].replace),{value:e,metrics:pP(e,t,n)}},uu=function(e,t,n,r,s){var a=uE(e,t,n),o=a.metrics;e=a.value;var l;if(o){var c=o.italic;(n==="text"||r&&r.font==="mathit")&&(c=0),l=new Fc(e,o.height,o.depth,c,o.skew,o.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+t+"' and mode '"+n+"'")),l=new Fc(e,0,0,0,0,0,s);if(r){l.maxFontSize=r.sizeMultiplier,r.style.isTight()&&l.classes.push("mtight");var u=r.getColor();u&&(l.style.color=u)}return l},hht=function(e,t,n,r){return r===void 0&&(r=[]),n.font==="boldsymbol"&&uE(e,"Main-Bold",t).metrics?uu(e,"Main-Bold",t,n,r.concat(["mathbf"])):e==="\\"||zr[t][e].font==="main"?uu(e,"Main-Regular",t,n,r):uu(e,"AMS-Regular",t,n,r.concat(["amsrm"]))},fht=function(e,t,n,r,s){return s!=="textord"&&uE(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},dht=function(e,t,n){var r=e.mode,s=e.text,a=["mord"],o=r==="math"||r==="text"&&t.font,l=o?t.font:t.fontFamily;if(s.charCodeAt(0)===55349){var[c,u]=uht(s,r);return uu(s,c,r,t,a.concat(u))}else if(l){var h,f;if(l==="boldsymbol"){var d=fht(s,r,t,a,n);h=d.fontName,f=[d.fontClass]}else o?(h=yH[l].fontName,f=[l]):(h=Sw(l,t.fontWeight,t.fontShape),f=[l,t.fontWeight,t.fontShape]);if(uE(s,h,r).metrics)return uu(s,h,r,t,a.concat(f));if(_H.hasOwnProperty(s)&&h.slice(0,10)==="Typewriter"){for(var g=[],v=0;v<s.length;v++)g.push(uu(s[v],h,r,t,a.concat(f)));return bH(g)}}if(n==="mathord")return uu(s,"Math-Italic",r,t,a.concat(["mathnormal"]));if(n==="textord"){var A=zr[r][s]&&zr[r][s].font;if(A==="ams"){var _=Sw("amsrm",t.fontWeight,t.fontShape);return uu(s,_,r,t,a.concat("amsrm",t.fontWeight,t.fontShape))}else if(A==="main"||!A){var y=Sw("textrm",t.fontWeight,t.fontShape);return uu(s,y,r,t,a.concat(t.fontWeight,t.fontShape))}else{var x=Sw(A,t.fontWeight,t.fontShape);return uu(s,x,r,t,a.concat(x,t.fontWeight,t.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},pht=(i,e)=>{if(Zd(i.classes)!==Zd(e.classes)||i.skew!==e.skew||i.maxFontSize!==e.maxFontSize)return!1;if(i.classes.length===1){var t=i.classes[0];if(t==="mbin"||t==="mord")return!1}for(var n in i.style)if(i.style.hasOwnProperty(n)&&i.style[n]!==e.style[n])return!1;for(var r in e.style)if(e.style.hasOwnProperty(r)&&i.style[r]!==e.style[r])return!1;return!0},mht=i=>{for(var e=0;e<i.length-1;e++){var t=i[e],n=i[e+1];t instanceof Fc&&n instanceof Fc&&pht(t,n)&&(t.text+=n.text,t.height=Math.max(t.height,n.height),t.depth=Math.max(t.depth,n.depth),t.italic=n.italic,i.splice(e+1,1),e--)}return i},gP=function(e){for(var t=0,n=0,r=0,s=0;s<e.children.length;s++){var a=e.children[s];a.height>t&&(t=a.height),a.depth>n&&(n=a.depth),a.maxFontSize>r&&(r=a.maxFontSize)}e.height=t,e.depth=n,e.maxFontSize=r},rl=function(e,t,n,r){var s=new yb(e,t,n,r);return gP(s),s},AH=(i,e,t,n)=>new yb(i,e,t,n),ght=function(e,t,n){var r=rl([e],[],t);return r.height=Math.max(n||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),r.style.borderBottomWidth=Yt(r.height),r.maxFontSize=1,r},vht=function(e,t,n,r){var s=new mP(e,t,n,r);return gP(s),s},bH=function(e){var t=new bb(e);return gP(t),t},_ht=function(e,t){return e instanceof bb?rl([],[e],t):e},Aht=function(e){if(e.positionType==="individualShift"){for(var t=e.children,n=[t[0]],r=-t[0].shift-t[0].elem.depth,s=r,a=1;a<t.length;a++){var o=-t[a].shift-s-t[a].elem.depth,l=o-(t[a-1].elem.height+t[a-1].elem.depth);s=s+o,n.push({type:"kern",size:l}),n.push(t[a])}return{children:n,depth:r}}var c;if(e.positionType==="top"){for(var u=e.positionData,h=0;h<e.children.length;h++){var f=e.children[h];u-=f.type==="kern"?f.size:f.elem.height+f.elem.depth}c=u}else if(e.positionType==="bottom")c=-e.positionData;else{var d=e.children[0];if(d.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")c=-d.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")c=-d.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:c}},bht=function(e,t){for(var{children:n,depth:r}=Aht(e),s=0,a=0;a<n.length;a++){var o=n[a];if(o.type==="elem"){var l=o.elem;s=Math.max(s,l.maxFontSize,l.height)}}s+=2;var c=rl(["pstrut"],[]);c.style.height=Yt(s);for(var u=[],h=r,f=r,d=r,g=0;g<n.length;g++){var v=n[g];if(v.type==="kern")d+=v.size;else{var A=v.elem,_=v.wrapperClasses||[],y=v.wrapperStyle||{},x=rl(_,[c,A],void 0,y);x.style.top=Yt(-s-d-A.depth),v.marginLeft&&(x.style.marginLeft=v.marginLeft),v.marginRight&&(x.style.marginRight=v.marginRight),u.push(x),d+=A.height+A.depth}h=Math.min(h,d),f=Math.max(f,d)}var C=rl(["vlist"],u);C.style.height=Yt(f);var S;if(h<0){var I=rl([],[]),P=rl(["vlist"],[I]);P.style.height=Yt(-h);var B=rl(["vlist-s"],[new Fc("​")]);S=[rl(["vlist-r"],[C,B]),rl(["vlist-r"],[P])]}else S=[rl(["vlist-r"],[C])];var M=rl(["vlist-t"],S);return S.length===2&&M.classes.push("vlist-t2"),M.height=f,M.depth=-h,M},yht=(i,e)=>{var t=rl(["mspace"],[],e),n=ps(i,e);return t.style.marginRight=Yt(n),t},Sw=function(e,t,n){var r="";switch(e){case"amsrm":r="AMS";break;case"textrm":r="Main";break;case"textsf":r="SansSerif";break;case"texttt":r="Typewriter";break;default:r=e}var s;return t==="textbf"&&n==="textit"?s="BoldItalic":t==="textbf"?s="Bold":t==="textit"?s="Italic":s="Regular",r+"-"+s},yH={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},wH={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},wht=function(e,t){var[n,r,s]=wH[e],a=new ep(n),o=new If([a],{width:Yt(r),height:Yt(s),style:"width:"+Yt(r),viewBox:"0 0 "+1e3*r+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),l=AH(["overlay"],[o],t);return l.height=s,l.style.height=Yt(s),l.style.width=Yt(r),l},rt={fontMap:yH,makeSymbol:uu,mathsym:hht,makeSpan:rl,makeSvgSpan:AH,makeLineSpan:ght,makeAnchor:vht,makeFragment:bH,wrapFragment:_ht,makeVList:bht,makeOrd:dht,makeGlue:yht,staticSvg:wht,svgData:wH,tryCombineChars:mht},fs={number:3,unit:"mu"},Yp={number:4,unit:"mu"},cf={number:5,unit:"mu"},xht={mord:{mop:fs,mbin:Yp,mrel:cf,minner:fs},mop:{mord:fs,mop:fs,mrel:cf,minner:fs},mbin:{mord:Yp,mop:Yp,mopen:Yp,minner:Yp},mrel:{mord:cf,mop:cf,mopen:cf,minner:cf},mopen:{},mclose:{mop:fs,mbin:Yp,mrel:cf,minner:fs},mpunct:{mord:fs,mop:fs,mrel:cf,mopen:fs,mclose:fs,mpunct:fs,minner:fs},minner:{mord:fs,mop:fs,mbin:Yp,mrel:cf,mopen:fs,mpunct:fs,minner:fs}},Cht={mord:{mop:fs},mop:{mord:fs,mop:fs},mbin:{},mrel:{},mopen:{},mclose:{mop:fs},mpunct:{},minner:{mop:fs}},xH={},Gx={},Qx={};function rn(i){for(var{type:e,names:t,props:n,handler:r,htmlBuilder:s,mathmlBuilder:a}=i,o={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:r},l=0;l<t.length;++l)xH[t[l]]=o;e&&(s&&(Gx[e]=s),a&&(Qx[e]=a))}function am(i){var{type:e,htmlBuilder:t,mathmlBuilder:n}=i;rn({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:t,mathmlBuilder:n})}var qx=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},Qs=function(e){return e.type==="ordgroup"?e.body:[e]},Pf=rt.makeSpan,Eht=["leftmost","mbin","mopen","mrel","mop","mpunct"],Sht=["rightmost","mrel","mclose","mpunct"],Mht={display:Ln.DISPLAY,text:Ln.TEXT,script:Ln.SCRIPT,scriptscript:Ln.SCRIPTSCRIPT},Tht={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Ma=function(e,t,n,r){r===void 0&&(r=[null,null]);for(var s=[],a=0;a<e.length;a++){var o=Zi(e[a],t);if(o instanceof bb){var l=o.children;s.push(...l)}else s.push(o)}if(rt.tryCombineChars(s),!n)return s;var c=t;if(e.length===1){var u=e[0];u.type==="sizing"?c=t.havingSize(u.size):u.type==="styling"&&(c=t.havingStyle(Mht[u.style]))}var h=Pf([r[0]||"leftmost"],[],t),f=Pf([r[1]||"rightmost"],[],t),d=n==="root";return UD(s,(g,v)=>{var A=v.classes[0],_=g.classes[0];A==="mbin"&&jn.contains(Sht,_)?v.classes[0]="mord":_==="mbin"&&jn.contains(Eht,A)&&(g.classes[0]="mord")},{node:h},f,d),UD(s,(g,v)=>{var A=hT(v),_=hT(g),y=A&&_?g.hasClass("mtight")?Cht[A][_]:xht[A][_]:null;if(y)return rt.makeGlue(y,c)},{node:h},f,d),s},UD=function i(e,t,n,r,s){r&&e.push(r);for(var a=0;a<e.length;a++){var o=e[a],l=CH(o);if(l){i(l.children,t,n,null,s);continue}var c=!o.hasClass("mspace");if(c){var u=t(o,n.node);u&&(n.insertAfter?n.insertAfter(u):(e.unshift(u),a++))}c?n.node=o:s&&o.hasClass("newline")&&(n.node=Pf(["leftmost"])),n.insertAfter=(h=>f=>{e.splice(h+1,0,f),a++})(a)}r&&e.pop()},CH=function(e){return e instanceof bb||e instanceof mP||e instanceof yb&&e.hasClass("enclosing")?e:null},Iht=function i(e,t){var n=CH(e);if(n){var r=n.children;if(r.length){if(t==="right")return i(r[r.length-1],"right");if(t==="left")return i(r[0],"left")}}return e},hT=function(e,t){return e?(t&&(e=Iht(e,t)),Tht[e.classes[0]]||null):null},H1=function(e,t){var n=["nulldelimiter"].concat(e.baseSizingClasses());return Pf(t.concat(n))},Zi=function(e,t,n){if(!e)return Pf();if(Gx[e.type]){var r=Gx[e.type](e,t);if(n&&t.size!==n.size){r=Pf(t.sizingClasses(n),[r],t);var s=t.sizeMultiplier/n.sizeMultiplier;r.height*=s,r.depth*=s}return r}else throw new Gt("Got group of unknown type: '"+e.type+"'")};function Mw(i,e){var t=Pf(["base"],i,e),n=Pf(["strut"]);return n.style.height=Yt(t.height+t.depth),t.depth&&(n.style.verticalAlign=Yt(-t.depth)),t.children.unshift(n),t}function fT(i,e){var t=null;i.length===1&&i[0].type==="tag"&&(t=i[0].tag,i=i[0].body);var n=Ma(i,e,"root"),r;n.length===2&&n[1].hasClass("tag")&&(r=n.pop());for(var s=[],a=[],o=0;o<n.length;o++)if(a.push(n[o]),n[o].hasClass("mbin")||n[o].hasClass("mrel")||n[o].hasClass("allowbreak")){for(var l=!1;o<n.length-1&&n[o+1].hasClass("mspace")&&!n[o+1].hasClass("newline");)o++,a.push(n[o]),n[o].hasClass("nobreak")&&(l=!0);l||(s.push(Mw(a,e)),a=[])}else n[o].hasClass("newline")&&(a.pop(),a.length>0&&(s.push(Mw(a,e)),a=[]),s.push(n[o]));a.length>0&&s.push(Mw(a,e));var c;t?(c=Mw(Ma(t,e,!0)),c.classes=["tag"],s.push(c)):r&&s.push(r);var u=Pf(["katex-html"],s);if(u.setAttribute("aria-hidden","true"),c){var h=c.children[0];h.style.height=Yt(u.height+u.depth),u.depth&&(h.style.verticalAlign=Yt(-u.depth))}return u}function EH(i){return new bb(i)}class Mc{constructor(e,t,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=n||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=Zd(this.classes));for(var n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=jn.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+jn.escape(Zd(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class l1{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return jn.escape(this.toText())}toText(){return this.text}}class Pht{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character=" ":e>=.1666&&e<=.1667?this.character=" ":e>=.2222&&e<=.2223?this.character=" ":e>=.2777&&e<=.2778?this.character="  ":e>=-.05556&&e<=-.05555?this.character=" ⁣":e>=-.1667&&e<=-.1666?this.character=" ⁣":e>=-.2223&&e<=-.2222?this.character=" ⁣":e>=-.2778&&e<=-.2777?this.character=" ⁣":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",Yt(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Yt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var zt={MathNode:Mc,TextNode:l1,SpaceNode:Pht,newDocumentFragment:EH},zc=function(e,t,n){return zr[t][e]&&zr[t][e].replace&&e.charCodeAt(0)!==55349&&!(_H.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=zr[t][e].replace),new zt.TextNode(e)},vP=function(e){return e.length===1?e[0]:new zt.MathNode("mrow",e)},_P=function(e,t){if(t.fontFamily==="texttt")return"monospace";if(t.fontFamily==="textsf")return t.fontShape==="textit"&&t.fontWeight==="textbf"?"sans-serif-bold-italic":t.fontShape==="textit"?"sans-serif-italic":t.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(t.fontShape==="textit"&&t.fontWeight==="textbf")return"bold-italic";if(t.fontShape==="textit")return"italic";if(t.fontWeight==="textbf")return"bold";var n=t.font;if(!n||n==="mathnormal")return null;var r=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var s=e.text;if(jn.contains(["\\imath","\\jmath"],s))return null;zr[r][s]&&zr[r][s].replace&&(s=zr[r][s].replace);var a=rt.fontMap[n].fontName;return pP(s,a,r)?rt.fontMap[n].variant:null},Cl=function(e,t,n){if(e.length===1){var r=Lr(e[0],t);return n&&r instanceof Mc&&r.type==="mo"&&(r.setAttribute("lspace","0em"),r.setAttribute("rspace","0em")),[r]}for(var s=[],a,o=0;o<e.length;o++){var l=Lr(e[o],t);if(l instanceof Mc&&a instanceof Mc){if(l.type==="mtext"&&a.type==="mtext"&&l.getAttribute("mathvariant")===a.getAttribute("mathvariant")){a.children.push(...l.children);continue}else if(l.type==="mn"&&a.type==="mn"){a.children.push(...l.children);continue}else if(l.type==="mi"&&l.children.length===1&&a.type==="mn"){var c=l.children[0];if(c instanceof l1&&c.text==="."){a.children.push(...l.children);continue}}else if(a.type==="mi"&&a.children.length===1){var u=a.children[0];if(u instanceof l1&&u.text==="̸"&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var h=l.children[0];h instanceof l1&&h.text.length>0&&(h.text=h.text.slice(0,1)+"̸"+h.text.slice(1),s.pop())}}}s.push(l),a=l}return s},tp=function(e,t,n){return vP(Cl(e,t,n))},Lr=function(e,t){if(!e)return new zt.MathNode("mrow");if(Qx[e.type]){var n=Qx[e.type](e,t);return n}else throw new Gt("Got group of unknown type: '"+e.type+"'")};function VD(i,e,t,n,r){var s=Cl(i,t),a;s.length===1&&s[0]instanceof Mc&&jn.contains(["mrow","mtable"],s[0].type)?a=s[0]:a=new zt.MathNode("mrow",s);var o=new zt.MathNode("annotation",[new zt.TextNode(e)]);o.setAttribute("encoding","application/x-tex");var l=new zt.MathNode("semantics",[a,o]),c=new zt.MathNode("math",[l]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&c.setAttribute("display","block");var u=r?"katex":"katex-mathml";return rt.makeSpan([u],[c])}var SH=function(e){return new mf({style:e.displayMode?Ln.DISPLAY:Ln.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},MH=function(e,t){if(t.displayMode){var n=["katex-display"];t.leqno&&n.push("leqno"),t.fleqn&&n.push("fleqn"),e=rt.makeSpan(n,[e])}return e},kht=function(e,t,n){var r=SH(n),s;if(n.output==="mathml")return VD(e,t,r,n.displayMode,!0);if(n.output==="html"){var a=fT(e,r);s=rt.makeSpan(["katex"],[a])}else{var o=VD(e,t,r,n.displayMode,!1),l=fT(e,r);s=rt.makeSpan(["katex"],[o,l])}return MH(s,n)},Bht=function(e,t,n){var r=SH(n),s=fT(e,r),a=rt.makeSpan(["katex"],[s]);return MH(a,n)},Rht={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},Dht=function(e){var t=new zt.MathNode("mo",[new zt.TextNode(Rht[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},Lht={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Oht=function(e){return e.type==="ordgroup"?e.body.length:1},Nht=function(e,t){function n(){var o=4e5,l=e.label.slice(1);if(jn.contains(["widehat","widecheck","widetilde","utilde"],l)){var c=e,u=Oht(c.base),h,f,d;if(u>5)l==="widehat"||l==="widecheck"?(h=420,o=2364,d=.42,f=l+"4"):(h=312,o=2340,d=.34,f="tilde4");else{var g=[1,1,2,2,3,3][u];l==="widehat"||l==="widecheck"?(o=[0,1062,2364,2364,2364][g],h=[0,239,300,360,420][g],d=[0,.24,.3,.3,.36,.42][g],f=l+g):(o=[0,600,1033,2339,2340][g],h=[0,260,286,306,312][g],d=[0,.26,.286,.3,.306,.34][g],f="tilde"+g)}var v=new ep(f),A=new If([v],{width:"100%",height:Yt(d),viewBox:"0 0 "+o+" "+h,preserveAspectRatio:"none"});return{span:rt.makeSvgSpan([],[A],t),minWidth:0,height:d}}else{var _=[],y=Lht[l],[x,C,S]=y,I=S/1e3,P=x.length,B,M;if(P===1){var D=y[3];B=["hide-tail"],M=[D]}else if(P===2)B=["halfarrow-left","halfarrow-right"],M=["xMinYMin","xMaxYMin"];else if(P===3)B=["brace-left","brace-center","brace-right"],M=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+P+" children.");for(var F=0;F<P;F++){var z=new ep(x[F]),U=new If([z],{width:"400em",height:Yt(I),viewBox:"0 0 "+o+" "+S,preserveAspectRatio:M[F]+" slice"}),$=rt.makeSvgSpan([B[F]],[U],t);if(P===1)return{span:$,minWidth:C,height:I};$.style.height=Yt(I),_.push($)}return{span:rt.makeSpan(["stretchy"],_,t),minWidth:C,height:I}}}var{span:r,minWidth:s,height:a}=n();return r.height=a,r.style.height=Yt(a),s>0&&(r.style.minWidth=Yt(s)),r},Fht=function(e,t,n,r,s){var a,o=e.height+e.depth+n+r;if(/fbox|color|angl/.test(t)){if(a=rt.makeSpan(["stretchy",t],[],s),t==="fbox"){var l=s.color&&s.getColor();l&&(a.style.borderColor=l)}}else{var c=[];/^[bx]cancel$/.test(t)&&c.push(new cT({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&c.push(new cT({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var u=new If(c,{width:"100%",height:Yt(o)});a=rt.makeSvgSpan([],[u],s)}return a.height=o,a.style.height=Yt(o),a},kf={encloseSpan:Fht,mathMLnode:Dht,svgSpan:Nht};function _i(i,e){if(!i||i.type!==e)throw new Error("Expected node of type "+e+", but got "+(i?"node of type "+i.type:String(i)));return i}function AP(i){var e=hE(i);if(!e)throw new Error("Expected node of symbol group type, but got "+(i?"node of type "+i.type:String(i)));return e}function hE(i){return i&&(i.type==="atom"||cht.hasOwnProperty(i.type))?i:null}var bP=(i,e)=>{var t,n,r;i&&i.type==="supsub"?(n=_i(i.base,"accent"),t=n.base,i.base=t,r=oht(Zi(i,e)),i.base=n):(n=_i(i,"accent"),t=n.base);var s=Zi(t,e.havingCrampedStyle()),a=n.isShifty&&jn.isCharacterBox(t),o=0;if(a){var l=jn.getBaseElem(t),c=Zi(l,e.havingCrampedStyle());o=DD(c).skew}var u=n.label==="\\c",h=u?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight),f;if(n.isStretchy)f=kf.svgSpan(n,e),f=rt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:f,wrapperClasses:["svg-align"],wrapperStyle:o>0?{width:"calc(100% - "+Yt(2*o)+")",marginLeft:Yt(2*o)}:void 0}]},e);else{var d,g;n.label==="\\vec"?(d=rt.staticSvg("vec",e),g=rt.svgData.vec[1]):(d=rt.makeOrd({mode:n.mode,text:n.label},e,"textord"),d=DD(d),d.italic=0,g=d.width,u&&(h+=d.depth)),f=rt.makeSpan(["accent-body"],[d]);var v=n.label==="\\textcircled";v&&(f.classes.push("accent-full"),h=s.height);var A=o;v||(A-=g/2),f.style.left=Yt(A),n.label==="\\textcircled"&&(f.style.top=".2em"),f=rt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-h},{type:"elem",elem:f}]},e)}var _=rt.makeSpan(["mord","accent"],[f],e);return r?(r.children[0]=_,r.height=Math.max(_.height,r.height),r.classes[0]="mord",r):_},TH=(i,e)=>{var t=i.isStretchy?kf.mathMLnode(i.label):new zt.MathNode("mo",[zc(i.label,i.mode)]),n=new zt.MathNode("mover",[Lr(i.base,e),t]);return n.setAttribute("accent","true"),n},zht=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(i=>"\\"+i).join("|"));rn({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(i,e)=>{var t=qx(e[0]),n=!zht.test(i.funcName),r=!n||i.funcName==="\\widehat"||i.funcName==="\\widetilde"||i.funcName==="\\widecheck";return{type:"accent",mode:i.parser.mode,label:i.funcName,isStretchy:n,isShifty:r,base:t}},htmlBuilder:bP,mathmlBuilder:TH});rn({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(i,e)=>{var t=e[0],n=i.parser.mode;return n==="math"&&(i.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+i.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:i.funcName,isStretchy:!1,isShifty:!0,base:t}},htmlBuilder:bP,mathmlBuilder:TH});rn({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0];return{type:"accentUnder",mode:t.mode,label:n,base:r}},htmlBuilder:(i,e)=>{var t=Zi(i.base,e),n=kf.svgSpan(i,e),r=i.label==="\\utilde"?.12:0,s=rt.makeVList({positionType:"top",positionData:t.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:r},{type:"elem",elem:t}]},e);return rt.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(i,e)=>{var t=kf.mathMLnode(i.label),n=new zt.MathNode("munder",[Lr(i.base,e),t]);return n.setAttribute("accentunder","true"),n}});var Tw=i=>{var e=new zt.MathNode("mpadded",i?[i]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};rn({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(i,e,t){var{parser:n,funcName:r}=i;return{type:"xArrow",mode:n.mode,label:r,body:e[0],below:t[0]}},htmlBuilder(i,e){var t=e.style,n=e.havingStyle(t.sup()),r=rt.wrapFragment(Zi(i.body,n,e),e),s=i.label.slice(0,2)==="\\x"?"x":"cd";r.classes.push(s+"-arrow-pad");var a;i.below&&(n=e.havingStyle(t.sub()),a=rt.wrapFragment(Zi(i.below,n,e),e),a.classes.push(s+"-arrow-pad"));var o=kf.svgSpan(i,e),l=-e.fontMetrics().axisHeight+.5*o.height,c=-e.fontMetrics().axisHeight-.5*o.height-.111;(r.depth>.25||i.label==="\\xleftequilibrium")&&(c-=r.depth);var u;if(a){var h=-e.fontMetrics().axisHeight+a.height+.5*o.height+.111;u=rt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:c},{type:"elem",elem:o,shift:l},{type:"elem",elem:a,shift:h}]},e)}else u=rt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:c},{type:"elem",elem:o,shift:l}]},e);return u.children[0].children[0].children[1].classes.push("svg-align"),rt.makeSpan(["mrel","x-arrow"],[u],e)},mathmlBuilder(i,e){var t=kf.mathMLnode(i.label);t.setAttribute("minsize",i.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(i.body){var r=Tw(Lr(i.body,e));if(i.below){var s=Tw(Lr(i.below,e));n=new zt.MathNode("munderover",[t,s,r])}else n=new zt.MathNode("mover",[t,r])}else if(i.below){var a=Tw(Lr(i.below,e));n=new zt.MathNode("munder",[t,a])}else n=Tw(),n=new zt.MathNode("mover",[t,n]);return n}});var Uht=rt.makeSpan;function IH(i,e){var t=Ma(i.body,e,!0);return Uht([i.mclass],t,e)}function PH(i,e){var t,n=Cl(i.body,e);return i.mclass==="minner"?t=new zt.MathNode("mpadded",n):i.mclass==="mord"?i.isCharacterBox?(t=n[0],t.type="mi"):t=new zt.MathNode("mi",n):(i.isCharacterBox?(t=n[0],t.type="mo"):t=new zt.MathNode("mo",n),i.mclass==="mbin"?(t.attributes.lspace="0.22em",t.attributes.rspace="0.22em"):i.mclass==="mpunct"?(t.attributes.lspace="0em",t.attributes.rspace="0.17em"):i.mclass==="mopen"||i.mclass==="mclose"?(t.attributes.lspace="0em",t.attributes.rspace="0em"):i.mclass==="minner"&&(t.attributes.lspace="0.0556em",t.attributes.width="+0.1111em")),t}rn({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(i,e){var{parser:t,funcName:n}=i,r=e[0];return{type:"mclass",mode:t.mode,mclass:"m"+n.slice(5),body:Qs(r),isCharacterBox:jn.isCharacterBox(r)}},htmlBuilder:IH,mathmlBuilder:PH});var fE=i=>{var e=i.type==="ordgroup"&&i.body.length?i.body[0]:i;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};rn({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(i,e){var{parser:t}=i;return{type:"mclass",mode:t.mode,mclass:fE(e[0]),body:Qs(e[1]),isCharacterBox:jn.isCharacterBox(e[1])}}});rn({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(i,e){var{parser:t,funcName:n}=i,r=e[1],s=e[0],a;n!=="\\stackrel"?a=fE(r):a="mrel";var o={type:"op",mode:r.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:Qs(r)},l={type:"supsub",mode:s.mode,base:o,sup:n==="\\underset"?null:s,sub:n==="\\underset"?s:null};return{type:"mclass",mode:t.mode,mclass:a,body:[l],isCharacterBox:jn.isCharacterBox(l)}},htmlBuilder:IH,mathmlBuilder:PH});rn({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(i,e){var{parser:t}=i;return{type:"pmb",mode:t.mode,mclass:fE(e[0]),body:Qs(e[0])}},htmlBuilder(i,e){var t=Ma(i.body,e,!0),n=rt.makeSpan([i.mclass],t,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(i,e){var t=Cl(i.body,e),n=new zt.MathNode("mstyle",t);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var Vht={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},HD=()=>({type:"styling",body:[],mode:"math",style:"display"}),$D=i=>i.type==="textord"&&i.text==="@",Hht=(i,e)=>(i.type==="mathord"||i.type==="atom")&&i.text===e;function $ht(i,e,t){var n=Vht[i];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return t.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var r=t.callFunction("\\\\cdleft",[e[0]],[]),s={type:"atom",text:n,mode:"math",family:"rel"},a=t.callFunction("\\Big",[s],[]),o=t.callFunction("\\\\cdright",[e[1]],[]),l={type:"ordgroup",mode:"math",body:[r,a,o]};return t.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return t.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var c={type:"textord",text:"\\Vert",mode:"math"};return t.callFunction("\\Big",[c],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Ght(i){var e=[];for(i.gullet.beginGroup(),i.gullet.macros.set("\\cr","\\\\\\relax"),i.gullet.beginGroup();;){e.push(i.parseExpression(!1,"\\\\")),i.gullet.endGroup(),i.gullet.beginGroup();var t=i.fetch().text;if(t==="&"||t==="\\\\")i.consume();else if(t==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new Gt("Expected \\\\ or \\cr or \\end",i.nextToken)}for(var n=[],r=[n],s=0;s<e.length;s++){for(var a=e[s],o=HD(),l=0;l<a.length;l++)if(!$D(a[l]))o.body.push(a[l]);else{n.push(o),l+=1;var c=AP(a[l]).text,u=new Array(2);if(u[0]={type:"ordgroup",mode:"math",body:[]},u[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1))if("<>AV".indexOf(c)>-1)for(var h=0;h<2;h++){for(var f=!0,d=l+1;d<a.length;d++){if(Hht(a[d],c)){f=!1,l=d;break}if($D(a[d]))throw new Gt("Missing a "+c+" character to complete a CD arrow.",a[d]);u[h].body.push(a[d])}if(f)throw new Gt("Missing a "+c+" character to complete a CD arrow.",a[l])}else throw new Gt('Expected one of "<>AV=|." after @',a[l]);var g=$ht(c,u,i),v={type:"styling",body:[g],mode:"math",style:"display"};n.push(v),o=HD()}s%2===0?n.push(o):n.shift(),n=[],r.push(n)}i.gullet.endGroup(),i.gullet.endGroup();var A=new Array(r[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:r,arraystretch:1,addJot:!0,rowGaps:[null],cols:A,colSeparationType:"CD",hLinesBeforeRow:new Array(r.length+1).fill([])}}rn({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(i,e){var{parser:t,funcName:n}=i;return{type:"cdlabel",mode:t.mode,side:n.slice(4),label:e[0]}},htmlBuilder(i,e){var t=e.havingStyle(e.style.sup()),n=rt.wrapFragment(Zi(i.label,t,e),e);return n.classes.push("cd-label-"+i.side),n.style.bottom=Yt(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(i,e){var t=new zt.MathNode("mrow",[Lr(i.label,e)]);return t=new zt.MathNode("mpadded",[t]),t.setAttribute("width","0"),i.side==="left"&&t.setAttribute("lspace","-1width"),t.setAttribute("voffset","0.7em"),t=new zt.MathNode("mstyle",[t]),t.setAttribute("displaystyle","false"),t.setAttribute("scriptlevel","1"),t}});rn({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(i,e){var{parser:t}=i;return{type:"cdlabelparent",mode:t.mode,fragment:e[0]}},htmlBuilder(i,e){var t=rt.wrapFragment(Zi(i.fragment,e),e);return t.classes.push("cd-vert-arrow"),t},mathmlBuilder(i,e){return new zt.MathNode("mrow",[Lr(i.fragment,e)])}});rn({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(i,e){for(var{parser:t}=i,n=_i(e[0],"ordgroup"),r=n.body,s="",a=0;a<r.length;a++){var o=_i(r[a],"textord");s+=o.text}var l=parseInt(s),c;if(isNaN(l))throw new Gt("\\@char has non-numeric argument "+s);if(l<0||l>=1114111)throw new Gt("\\@char with invalid code point "+s);return l<=65535?c=String.fromCharCode(l):(l-=65536,c=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:t.mode,text:c}}});var kH=(i,e)=>{var t=Ma(i.body,e.withColor(i.color),!1);return rt.makeFragment(t)},BH=(i,e)=>{var t=Cl(i.body,e.withColor(i.color)),n=new zt.MathNode("mstyle",t);return n.setAttribute("mathcolor",i.color),n};rn({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(i,e){var{parser:t}=i,n=_i(e[0],"color-token").color,r=e[1];return{type:"color",mode:t.mode,color:n,body:Qs(r)}},htmlBuilder:kH,mathmlBuilder:BH});rn({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(i,e){var{parser:t,breakOnTokenText:n}=i,r=_i(e[0],"color-token").color;t.gullet.macros.set("\\current@color",r);var s=t.parseExpression(!0,n);return{type:"color",mode:t.mode,color:r,body:s}},htmlBuilder:kH,mathmlBuilder:BH});rn({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(i,e,t){var{parser:n}=i,r=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,s=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:s,size:r&&_i(r,"size").value}},htmlBuilder(i,e){var t=rt.makeSpan(["mspace"],[],e);return i.newLine&&(t.classes.push("newline"),i.size&&(t.style.marginTop=Yt(ps(i.size,e)))),t},mathmlBuilder(i,e){var t=new zt.MathNode("mspace");return i.newLine&&(t.setAttribute("linebreak","newline"),i.size&&t.setAttribute("height",Yt(ps(i.size,e)))),t}});var dT={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},RH=i=>{var e=i.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new Gt("Expected a control sequence",i);return e},Qht=i=>{var e=i.gullet.popToken();return e.text==="="&&(e=i.gullet.popToken(),e.text===" "&&(e=i.gullet.popToken())),e},DH=(i,e,t,n)=>{var r=i.gullet.macros.get(t.text);r==null&&(t.noexpand=!0,r={tokens:[t],numArgs:0,unexpandable:!i.gullet.isExpandable(t.text)}),i.gullet.macros.set(e,r,n)};rn({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(i){var{parser:e,funcName:t}=i;e.consumeSpaces();var n=e.fetch();if(dT[n.text])return(t==="\\global"||t==="\\\\globallong")&&(n.text=dT[n.text]),_i(e.parseFunction(),"internal");throw new Gt("Invalid token after macro prefix",n)}});rn({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(i){var{parser:e,funcName:t}=i,n=e.gullet.popToken(),r=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(r))throw new Gt("Expected a control sequence",n);for(var s=0,a,o=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){a=e.gullet.future(),o[s].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new Gt('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==s+1)throw new Gt('Argument number "'+n.text+'" out of order');s++,o.push([])}else{if(n.text==="EOF")throw new Gt("Expected a macro definition");o[s].push(n.text)}var{tokens:l}=e.gullet.consumeArg();return a&&l.unshift(a),(t==="\\edef"||t==="\\xdef")&&(l=e.gullet.expandTokens(l),l.reverse()),e.gullet.macros.set(r,{tokens:l,numArgs:s,delimiters:o},t===dT[t]),{type:"internal",mode:e.mode}}});rn({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(i){var{parser:e,funcName:t}=i,n=RH(e.gullet.popToken());e.gullet.consumeSpaces();var r=Qht(e);return DH(e,n,r,t==="\\\\globallet"),{type:"internal",mode:e.mode}}});rn({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(i){var{parser:e,funcName:t}=i,n=RH(e.gullet.popToken()),r=e.gullet.popToken(),s=e.gullet.popToken();return DH(e,n,s,t==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(r),{type:"internal",mode:e.mode}}});var X_=function(e,t,n){var r=zr.math[e]&&zr.math[e].replace,s=pP(r||e,t,n);if(!s)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return s},yP=function(e,t,n,r){var s=n.havingBaseStyle(t),a=rt.makeSpan(r.concat(s.sizingClasses(n)),[e],n),o=s.sizeMultiplier/n.sizeMultiplier;return a.height*=o,a.depth*=o,a.maxFontSize=s.sizeMultiplier,a},LH=function(e,t,n){var r=t.havingBaseStyle(n),s=(1-t.sizeMultiplier/r.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=Yt(s),e.height-=s,e.depth+=s},qht=function(e,t,n,r,s,a){var o=rt.makeSymbol(e,"Main-Regular",s,r),l=yP(o,t,r,a);return n&&LH(l,r,t),l},jht=function(e,t,n,r){return rt.makeSymbol(e,"Size"+t+"-Regular",n,r)},OH=function(e,t,n,r,s,a){var o=jht(e,t,s,r),l=yP(rt.makeSpan(["delimsizing","size"+t],[o],r),Ln.TEXT,r,a);return n&&LH(l,r,Ln.TEXT),l},f3=function(e,t,n){var r;t==="Size1-Regular"?r="delim-size1":r="delim-size4";var s=rt.makeSpan(["delimsizinginner",r],[rt.makeSpan([],[rt.makeSymbol(e,t,n)])]);return{type:"elem",elem:s}},d3=function(e,t,n){var r=sh["Size4-Regular"][e.charCodeAt(0)]?sh["Size4-Regular"][e.charCodeAt(0)][4]:sh["Size1-Regular"][e.charCodeAt(0)][4],s=new ep("inner",Zut(e,Math.round(1e3*t))),a=new If([s],{width:Yt(r),height:Yt(t),style:"width:"+Yt(r),viewBox:"0 0 "+1e3*r+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),o=rt.makeSvgSpan([],[a],n);return o.height=t,o.style.height=Yt(t),o.style.width=Yt(r),{type:"elem",elem:o}},pT=.008,Iw={type:"kern",size:-1*pT},Wht=["|","\\lvert","\\rvert","\\vert"],Yht=["\\|","\\lVert","\\rVert","\\Vert"],NH=function(e,t,n,r,s,a){var o,l,c,u,h="",f=0;o=c=u=e,l=null;var d="Size1-Regular";e==="\\uparrow"?c=u="⏐":e==="\\Uparrow"?c=u="‖":e==="\\downarrow"?o=c="⏐":e==="\\Downarrow"?o=c="‖":e==="\\updownarrow"?(o="\\uparrow",c="⏐",u="\\downarrow"):e==="\\Updownarrow"?(o="\\Uparrow",c="‖",u="\\Downarrow"):jn.contains(Wht,e)?(c="∣",h="vert",f=333):jn.contains(Yht,e)?(c="∥",h="doublevert",f=556):e==="["||e==="\\lbrack"?(o="⎡",c="⎢",u="⎣",d="Size4-Regular",h="lbrack",f=667):e==="]"||e==="\\rbrack"?(o="⎤",c="⎥",u="⎦",d="Size4-Regular",h="rbrack",f=667):e==="\\lfloor"||e==="⌊"?(c=o="⎢",u="⎣",d="Size4-Regular",h="lfloor",f=667):e==="\\lceil"||e==="⌈"?(o="⎡",c=u="⎢",d="Size4-Regular",h="lceil",f=667):e==="\\rfloor"||e==="⌋"?(c=o="⎥",u="⎦",d="Size4-Regular",h="rfloor",f=667):e==="\\rceil"||e==="⌉"?(o="⎤",c=u="⎥",d="Size4-Regular",h="rceil",f=667):e==="("||e==="\\lparen"?(o="⎛",c="⎜",u="⎝",d="Size4-Regular",h="lparen",f=875):e===")"||e==="\\rparen"?(o="⎞",c="⎟",u="⎠",d="Size4-Regular",h="rparen",f=875):e==="\\{"||e==="\\lbrace"?(o="⎧",l="⎨",u="⎩",c="⎪",d="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(o="⎫",l="⎬",u="⎭",c="⎪",d="Size4-Regular"):e==="\\lgroup"||e==="⟮"?(o="⎧",u="⎩",c="⎪",d="Size4-Regular"):e==="\\rgroup"||e==="⟯"?(o="⎫",u="⎭",c="⎪",d="Size4-Regular"):e==="\\lmoustache"||e==="⎰"?(o="⎧",u="⎭",c="⎪",d="Size4-Regular"):(e==="\\rmoustache"||e==="⎱")&&(o="⎫",u="⎩",c="⎪",d="Size4-Regular");var g=X_(o,d,s),v=g.height+g.depth,A=X_(c,d,s),_=A.height+A.depth,y=X_(u,d,s),x=y.height+y.depth,C=0,S=1;if(l!==null){var I=X_(l,d,s);C=I.height+I.depth,S=2}var P=v+x+C,B=Math.max(0,Math.ceil((t-P)/(S*_))),M=P+B*S*_,D=r.fontMetrics().axisHeight;n&&(D*=r.sizeMultiplier);var F=M/2-D,z=[];if(h.length>0){var U=M-v-x,$=Math.round(M*1e3),O=eht(h,Math.round(U*1e3)),ie=new ep(h,O),W=(f/1e3).toFixed(3)+"em",J=($/1e3).toFixed(3)+"em",Ce=new If([ie],{width:W,height:J,viewBox:"0 0 "+f+" "+$}),Me=rt.makeSvgSpan([],[Ce],r);Me.height=$/1e3,Me.style.width=W,Me.style.height=J,z.push({type:"elem",elem:Me})}else{if(z.push(f3(u,d,s)),z.push(Iw),l===null){var ge=M-v-x+2*pT;z.push(d3(c,ge,r))}else{var ve=(M-v-x-C)/2+2*pT;z.push(d3(c,ve,r)),z.push(Iw),z.push(f3(l,d,s)),z.push(Iw),z.push(d3(c,ve,r))}z.push(Iw),z.push(f3(o,d,s))}var nt=r.havingBaseStyle(Ln.TEXT),$e=rt.makeVList({positionType:"bottom",positionData:F,children:z},nt);return yP(rt.makeSpan(["delimsizing","mult"],[$e],nt),Ln.TEXT,r,a)},p3=80,m3=.08,g3=function(e,t,n,r,s){var a=Jut(e,r,n),o=new ep(e,a),l=new If([o],{width:"400em",height:Yt(t),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return rt.makeSvgSpan(["hide-tail"],[l],s)},Xht=function(e,t){var n=t.havingBaseSizing(),r=VH("\\surd",e*n.sizeMultiplier,UH,n),s=n.sizeMultiplier,a=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),o,l=0,c=0,u=0,h;return r.type==="small"?(u=1e3+1e3*a+p3,e<1?s=1:e<1.4&&(s=.7),l=(1+a+m3)/s,c=(1+a)/s,o=g3("sqrtMain",l,u,a,t),o.style.minWidth="0.853em",h=.833/s):r.type==="large"?(u=(1e3+p3)*c1[r.size],c=(c1[r.size]+a)/s,l=(c1[r.size]+a+m3)/s,o=g3("sqrtSize"+r.size,l,u,a,t),o.style.minWidth="1.02em",h=1/s):(l=e+a+m3,c=e+a,u=Math.floor(1e3*e+a)+p3,o=g3("sqrtTall",l,u,a,t),o.style.minWidth="0.742em",h=1.056),o.height=c,o.style.height=Yt(l),{span:o,advanceWidth:h,ruleWidth:(t.fontMetrics().sqrtRuleThickness+a)*s}},FH=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],Kht=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],zH=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],c1=[0,1.2,1.8,2.4,3],Jht=function(e,t,n,r,s){if(e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle"),jn.contains(FH,e)||jn.contains(zH,e))return OH(e,t,!1,n,r,s);if(jn.contains(Kht,e))return NH(e,c1[t],!1,n,r,s);throw new Gt("Illegal delimiter: '"+e+"'")},Zht=[{type:"small",style:Ln.SCRIPTSCRIPT},{type:"small",style:Ln.SCRIPT},{type:"small",style:Ln.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],eft=[{type:"small",style:Ln.SCRIPTSCRIPT},{type:"small",style:Ln.SCRIPT},{type:"small",style:Ln.TEXT},{type:"stack"}],UH=[{type:"small",style:Ln.SCRIPTSCRIPT},{type:"small",style:Ln.SCRIPT},{type:"small",style:Ln.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],tft=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},VH=function(e,t,n,r){for(var s=Math.min(2,3-r.style.size),a=s;a<n.length&&n[a].type!=="stack";a++){var o=X_(e,tft(n[a]),"math"),l=o.height+o.depth;if(n[a].type==="small"){var c=r.havingBaseStyle(n[a].style);l*=c.sizeMultiplier}if(l>t)return n[a]}return n[n.length-1]},HH=function(e,t,n,r,s,a){e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle");var o;jn.contains(zH,e)?o=Zht:jn.contains(FH,e)?o=UH:o=eft;var l=VH(e,t,o,r);return l.type==="small"?qht(e,l.style,n,r,s,a):l.type==="large"?OH(e,l.size,n,r,s,a):NH(e,t,n,r,s,a)},nft=function(e,t,n,r,s,a){var o=r.fontMetrics().axisHeight*r.sizeMultiplier,l=901,c=5/r.fontMetrics().ptPerEm,u=Math.max(t-o,n+o),h=Math.max(u/500*l,2*u-c);return HH(e,h,!0,r,s,a)},xf={sqrtImage:Xht,sizedDelim:Jht,sizeToMaxHeight:c1,customSizedDelim:HH,leftRightDelim:nft},GD={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},ift=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function dE(i,e){var t=hE(i);if(t&&jn.contains(ift,t.text))return t;throw t?new Gt("Invalid delimiter '"+t.text+"' after '"+e.funcName+"'",i):new Gt("Invalid delimiter type '"+i.type+"'",i)}rn({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(i,e)=>{var t=dE(e[0],i);return{type:"delimsizing",mode:i.parser.mode,size:GD[i.funcName].size,mclass:GD[i.funcName].mclass,delim:t.text}},htmlBuilder:(i,e)=>i.delim==="."?rt.makeSpan([i.mclass]):xf.sizedDelim(i.delim,i.size,e,i.mode,[i.mclass]),mathmlBuilder:i=>{var e=[];i.delim!=="."&&e.push(zc(i.delim,i.mode));var t=new zt.MathNode("mo",e);i.mclass==="mopen"||i.mclass==="mclose"?t.setAttribute("fence","true"):t.setAttribute("fence","false"),t.setAttribute("stretchy","true");var n=Yt(xf.sizeToMaxHeight[i.size]);return t.setAttribute("minsize",n),t.setAttribute("maxsize",n),t}});function QD(i){if(!i.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}rn({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(i,e)=>{var t=i.parser.gullet.macros.get("\\current@color");if(t&&typeof t!="string")throw new Gt("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:i.parser.mode,delim:dE(e[0],i).text,color:t}}});rn({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(i,e)=>{var t=dE(e[0],i),n=i.parser;++n.leftrightDepth;var r=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var s=_i(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:r,left:t.text,right:s.delim,rightColor:s.color}},htmlBuilder:(i,e)=>{QD(i);for(var t=Ma(i.body,e,!0,["mopen","mclose"]),n=0,r=0,s=!1,a=0;a<t.length;a++)t[a].isMiddle?s=!0:(n=Math.max(t[a].height,n),r=Math.max(t[a].depth,r));n*=e.sizeMultiplier,r*=e.sizeMultiplier;var o;if(i.left==="."?o=H1(e,["mopen"]):o=xf.leftRightDelim(i.left,n,r,e,i.mode,["mopen"]),t.unshift(o),s)for(var l=1;l<t.length;l++){var c=t[l],u=c.isMiddle;u&&(t[l]=xf.leftRightDelim(u.delim,n,r,u.options,i.mode,[]))}var h;if(i.right===".")h=H1(e,["mclose"]);else{var f=i.rightColor?e.withColor(i.rightColor):e;h=xf.leftRightDelim(i.right,n,r,f,i.mode,["mclose"])}return t.push(h),rt.makeSpan(["minner"],t,e)},mathmlBuilder:(i,e)=>{QD(i);var t=Cl(i.body,e);if(i.left!=="."){var n=new zt.MathNode("mo",[zc(i.left,i.mode)]);n.setAttribute("fence","true"),t.unshift(n)}if(i.right!=="."){var r=new zt.MathNode("mo",[zc(i.right,i.mode)]);r.setAttribute("fence","true"),i.rightColor&&r.setAttribute("mathcolor",i.rightColor),t.push(r)}return vP(t)}});rn({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(i,e)=>{var t=dE(e[0],i);if(!i.parser.leftrightDepth)throw new Gt("\\middle without preceding \\left",t);return{type:"middle",mode:i.parser.mode,delim:t.text}},htmlBuilder:(i,e)=>{var t;if(i.delim===".")t=H1(e,[]);else{t=xf.sizedDelim(i.delim,1,e,i.mode,[]);var n={delim:i.delim,options:e};t.isMiddle=n}return t},mathmlBuilder:(i,e)=>{var t=i.delim==="\\vert"||i.delim==="|"?zc("|","text"):zc(i.delim,i.mode),n=new zt.MathNode("mo",[t]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var wP=(i,e)=>{var t=rt.wrapFragment(Zi(i.body,e),e),n=i.label.slice(1),r=e.sizeMultiplier,s,a=0,o=jn.isCharacterBox(i.body);if(n==="sout")s=rt.makeSpan(["stretchy","sout"]),s.height=e.fontMetrics().defaultRuleThickness/r,a=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var l=ps({number:.6,unit:"pt"},e),c=ps({number:.35,unit:"ex"},e),u=e.havingBaseSizing();r=r/u.sizeMultiplier;var h=t.height+t.depth+l+c;t.style.paddingLeft=Yt(h/2+l);var f=Math.floor(1e3*h*r),d=Xut(f),g=new If([new ep("phase",d)],{width:"400em",height:Yt(f/1e3),viewBox:"0 0 400000 "+f,preserveAspectRatio:"xMinYMin slice"});s=rt.makeSvgSpan(["hide-tail"],[g],e),s.style.height=Yt(h),a=t.depth+l+c}else{/cancel/.test(n)?o||t.classes.push("cancel-pad"):n==="angl"?t.classes.push("anglpad"):t.classes.push("boxpad");var v=0,A=0,_=0;/box/.test(n)?(_=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),v=e.fontMetrics().fboxsep+(n==="colorbox"?0:_),A=v):n==="angl"?(_=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),v=4*_,A=Math.max(0,.25-t.depth)):(v=o?.2:0,A=v),s=kf.encloseSpan(t,n,v,A,e),/fbox|boxed|fcolorbox/.test(n)?(s.style.borderStyle="solid",s.style.borderWidth=Yt(_)):n==="angl"&&_!==.049&&(s.style.borderTopWidth=Yt(_),s.style.borderRightWidth=Yt(_)),a=t.depth+A,i.backgroundColor&&(s.style.backgroundColor=i.backgroundColor,i.borderColor&&(s.style.borderColor=i.borderColor))}var y;if(i.backgroundColor)y=rt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:a},{type:"elem",elem:t,shift:0}]},e);else{var x=/cancel|phase/.test(n)?["svg-align"]:[];y=rt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:t,shift:0},{type:"elem",elem:s,shift:a,wrapperClasses:x}]},e)}return/cancel/.test(n)&&(y.height=t.height,y.depth=t.depth),/cancel/.test(n)&&!o?rt.makeSpan(["mord","cancel-lap"],[y],e):rt.makeSpan(["mord"],[y],e)},xP=(i,e)=>{var t=0,n=new zt.MathNode(i.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Lr(i.body,e)]);switch(i.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(t=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*t+"pt"),n.setAttribute("height","+"+2*t+"pt"),n.setAttribute("lspace",t+"pt"),n.setAttribute("voffset",t+"pt"),i.label==="\\fcolorbox"){var r=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+r+"em solid "+String(i.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return i.backgroundColor&&n.setAttribute("mathbackground",i.backgroundColor),n};rn({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(i,e,t){var{parser:n,funcName:r}=i,s=_i(e[0],"color-token").color,a=e[1];return{type:"enclose",mode:n.mode,label:r,backgroundColor:s,body:a}},htmlBuilder:wP,mathmlBuilder:xP});rn({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(i,e,t){var{parser:n,funcName:r}=i,s=_i(e[0],"color-token").color,a=_i(e[1],"color-token").color,o=e[2];return{type:"enclose",mode:n.mode,label:r,backgroundColor:a,borderColor:s,body:o}},htmlBuilder:wP,mathmlBuilder:xP});rn({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(i,e){var{parser:t}=i;return{type:"enclose",mode:t.mode,label:"\\fbox",body:e[0]}}});rn({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(i,e){var{parser:t,funcName:n}=i,r=e[0];return{type:"enclose",mode:t.mode,label:n,body:r}},htmlBuilder:wP,mathmlBuilder:xP});rn({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(i,e){var{parser:t}=i;return{type:"enclose",mode:t.mode,label:"\\angl",body:e[0]}}});var $H={};function Sh(i){for(var{type:e,names:t,props:n,handler:r,htmlBuilder:s,mathmlBuilder:a}=i,o={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:r},l=0;l<t.length;++l)$H[t[l]]=o;s&&(Gx[e]=s),a&&(Qx[e]=a)}var GH={};function ee(i,e){GH[i]=e}function qD(i){var e=[];i.consumeSpaces();var t=i.fetch().text;for(t==="\\relax"&&(i.consume(),i.consumeSpaces(),t=i.fetch().text);t==="\\hline"||t==="\\hdashline";)i.consume(),e.push(t==="\\hdashline"),i.consumeSpaces(),t=i.fetch().text;return e}var pE=i=>{var e=i.parser.settings;if(!e.displayMode)throw new Gt("{"+i.envName+"} can be used only in display mode.")};function CP(i){if(i.indexOf("ed")===-1)return i.indexOf("*")===-1}function mp(i,e,t){var{hskipBeforeAndAfter:n,addJot:r,cols:s,arraystretch:a,colSeparationType:o,autoTag:l,singleRow:c,emptySingleRow:u,maxNumCols:h,leqno:f}=e;if(i.gullet.beginGroup(),c||i.gullet.macros.set("\\cr","\\\\\\relax"),!a){var d=i.gullet.expandMacroAsText("\\arraystretch");if(d==null)a=1;else if(a=parseFloat(d),!a||a<0)throw new Gt("Invalid \\arraystretch: "+d)}i.gullet.beginGroup();var g=[],v=[g],A=[],_=[],y=l!=null?[]:void 0;function x(){l&&i.gullet.macros.set("\\@eqnsw","1",!0)}function C(){y&&(i.gullet.macros.get("\\df@tag")?(y.push(i.subparse([new dh("\\df@tag")])),i.gullet.macros.set("\\df@tag",void 0,!0)):y.push(!!l&&i.gullet.macros.get("\\@eqnsw")==="1"))}for(x(),_.push(qD(i));;){var S=i.parseExpression(!1,c?"\\end":"\\\\");i.gullet.endGroup(),i.gullet.beginGroup(),S={type:"ordgroup",mode:i.mode,body:S},t&&(S={type:"styling",mode:i.mode,style:t,body:[S]}),g.push(S);var I=i.fetch().text;if(I==="&"){if(h&&g.length===h){if(c||o)throw new Gt("Too many tab characters: &",i.nextToken);i.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}i.consume()}else if(I==="\\end"){C(),g.length===1&&S.type==="styling"&&S.body[0].body.length===0&&(v.length>1||!u)&&v.pop(),_.length<v.length+1&&_.push([]);break}else if(I==="\\\\"){i.consume();var P=void 0;i.gullet.future().text!==" "&&(P=i.parseSizeGroup(!0)),A.push(P?P.value:null),C(),_.push(qD(i)),g=[],v.push(g),x()}else throw new Gt("Expected & or \\\\ or \\cr or \\end",i.nextToken)}return i.gullet.endGroup(),i.gullet.endGroup(),{type:"array",mode:i.mode,addJot:r,arraystretch:a,body:v,cols:s,rowGaps:A,hskipBeforeAndAfter:n,hLinesBeforeRow:_,colSeparationType:o,tags:y,leqno:f}}function EP(i){return i.slice(0,1)==="d"?"display":"text"}var Mh=function(e,t){var n,r,s=e.body.length,a=e.hLinesBeforeRow,o=0,l=new Array(s),c=[],u=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),h=1/t.fontMetrics().ptPerEm,f=5*h;if(e.colSeparationType&&e.colSeparationType==="small"){var d=t.havingStyle(Ln.SCRIPT).sizeMultiplier;f=.2778*(d/t.sizeMultiplier)}var g=e.colSeparationType==="CD"?ps({number:3,unit:"ex"},t):12*h,v=3*h,A=e.arraystretch*g,_=.7*A,y=.3*A,x=0;function C(pt){for(var Ze=0;Ze<pt.length;++Ze)Ze>0&&(x+=.25),c.push({pos:x,isDashed:pt[Ze]})}for(C(a[0]),n=0;n<e.body.length;++n){var S=e.body[n],I=_,P=y;o<S.length&&(o=S.length);var B=new Array(S.length);for(r=0;r<S.length;++r){var M=Zi(S[r],t);P<M.depth&&(P=M.depth),I<M.height&&(I=M.height),B[r]=M}var D=e.rowGaps[n],F=0;D&&(F=ps(D,t),F>0&&(F+=y,P<F&&(P=F),F=0)),e.addJot&&(P+=v),B.height=I,B.depth=P,x+=I,B.pos=x,x+=P+F,l[n]=B,C(a[n+1])}var z=x/2+t.fontMetrics().axisHeight,U=e.cols||[],$=[],O,ie,W=[];if(e.tags&&e.tags.some(pt=>pt))for(n=0;n<s;++n){var J=l[n],Ce=J.pos-z,Me=e.tags[n],ge=void 0;Me===!0?ge=rt.makeSpan(["eqn-num"],[],t):Me===!1?ge=rt.makeSpan([],[],t):ge=rt.makeSpan([],Ma(Me,t,!0),t),ge.depth=J.depth,ge.height=J.height,W.push({type:"elem",elem:ge,shift:Ce})}for(r=0,ie=0;r<o||ie<U.length;++r,++ie){for(var ve=U[ie]||{},nt=!0;ve.type==="separator";){if(nt||(O=rt.makeSpan(["arraycolsep"],[]),O.style.width=Yt(t.fontMetrics().doubleRuleSep),$.push(O)),ve.separator==="|"||ve.separator===":"){var $e=ve.separator==="|"?"solid":"dashed",X=rt.makeSpan(["vertical-separator"],[],t);X.style.height=Yt(x),X.style.borderRightWidth=Yt(u),X.style.borderRightStyle=$e,X.style.margin="0 "+Yt(-u/2);var Be=x-z;Be&&(X.style.verticalAlign=Yt(-Be)),$.push(X)}else throw new Gt("Invalid separator type: "+ve.separator);ie++,ve=U[ie]||{},nt=!1}if(!(r>=o)){var mt=void 0;(r>0||e.hskipBeforeAndAfter)&&(mt=jn.deflt(ve.pregap,f),mt!==0&&(O=rt.makeSpan(["arraycolsep"],[]),O.style.width=Yt(mt),$.push(O)));var Ue=[];for(n=0;n<s;++n){var Tt=l[n],yt=Tt[r];if(yt){var Ye=Tt.pos-z;yt.depth=Tt.depth,yt.height=Tt.height,Ue.push({type:"elem",elem:yt,shift:Ye})}}Ue=rt.makeVList({positionType:"individualShift",children:Ue},t),Ue=rt.makeSpan(["col-align-"+(ve.align||"c")],[Ue]),$.push(Ue),(r<o-1||e.hskipBeforeAndAfter)&&(mt=jn.deflt(ve.postgap,f),mt!==0&&(O=rt.makeSpan(["arraycolsep"],[]),O.style.width=Yt(mt),$.push(O)))}}if(l=rt.makeSpan(["mtable"],$),c.length>0){for(var lt=rt.makeLineSpan("hline",t,u),ue=rt.makeLineSpan("hdashline",t,u),dt=[{type:"elem",elem:l,shift:0}];c.length>0;){var le=c.pop(),he=le.pos-z;le.isDashed?dt.push({type:"elem",elem:ue,shift:he}):dt.push({type:"elem",elem:lt,shift:he})}l=rt.makeVList({positionType:"individualShift",children:dt},t)}if(W.length===0)return rt.makeSpan(["mord"],[l],t);var xe=rt.makeVList({positionType:"individualShift",children:W},t);return xe=rt.makeSpan(["tag"],[xe],t),rt.makeFragment([l,xe])},rft={c:"center ",l:"left ",r:"right "},Th=function(e,t){for(var n=[],r=new zt.MathNode("mtd",[],["mtr-glue"]),s=new zt.MathNode("mtd",[],["mml-eqn-num"]),a=0;a<e.body.length;a++){for(var o=e.body[a],l=[],c=0;c<o.length;c++)l.push(new zt.MathNode("mtd",[Lr(o[c],t)]));e.tags&&e.tags[a]&&(l.unshift(r),l.push(r),e.leqno?l.unshift(s):l.push(s)),n.push(new zt.MathNode("mtr",l))}var u=new zt.MathNode("mtable",n),h=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);u.setAttribute("rowspacing",Yt(h));var f="",d="";if(e.cols&&e.cols.length>0){var g=e.cols,v="",A=!1,_=0,y=g.length;g[0].type==="separator"&&(f+="top ",_=1),g[g.length-1].type==="separator"&&(f+="bottom ",y-=1);for(var x=_;x<y;x++)g[x].type==="align"?(d+=rft[g[x].align],A&&(v+="none "),A=!0):g[x].type==="separator"&&A&&(v+=g[x].separator==="|"?"solid ":"dashed ",A=!1);u.setAttribute("columnalign",d.trim()),/[sd]/.test(v)&&u.setAttribute("columnlines",v.trim())}if(e.colSeparationType==="align"){for(var C=e.cols||[],S="",I=1;I<C.length;I++)S+=I%2?"0em ":"1em ";u.setAttribute("columnspacing",S.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?u.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?u.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?u.setAttribute("columnspacing","0.5em"):u.setAttribute("columnspacing","1em");var P="",B=e.hLinesBeforeRow;f+=B[0].length>0?"left ":"",f+=B[B.length-1].length>0?"right ":"";for(var M=1;M<B.length-1;M++)P+=B[M].length===0?"none ":B[M][0]?"dashed ":"solid ";return/[sd]/.test(P)&&u.setAttribute("rowlines",P.trim()),f!==""&&(u=new zt.MathNode("menclose",[u]),u.setAttribute("notation",f.trim())),e.arraystretch&&e.arraystretch<1&&(u=new zt.MathNode("mstyle",[u]),u.setAttribute("scriptlevel","1")),u},QH=function(e,t){e.envName.indexOf("ed")===-1&&pE(e);var n=[],r=e.envName.indexOf("at")>-1?"alignat":"align",s=e.envName==="split",a=mp(e.parser,{cols:n,addJot:!0,autoTag:s?void 0:CP(e.envName),emptySingleRow:!0,colSeparationType:r,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),o,l=0,c={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&t[0].type==="ordgroup"){for(var u="",h=0;h<t[0].body.length;h++){var f=_i(t[0].body[h],"textord");u+=f.text}o=Number(u),l=o*2}var d=!l;a.body.forEach(function(_){for(var y=1;y<_.length;y+=2){var x=_i(_[y],"styling"),C=_i(x.body[0],"ordgroup");C.body.unshift(c)}if(d)l<_.length&&(l=_.length);else{var S=_.length/2;if(o<S)throw new Gt("Too many math in a row: "+("expected "+o+", but got "+S),_[0])}});for(var g=0;g<l;++g){var v="r",A=0;g%2===1?v="l":g>0&&d&&(A=1),n[g]={type:"align",align:v,pregap:A,postgap:0}}return a.colSeparationType=d?"align":"alignat",a};Sh({type:"array",names:["array","darray"],props:{numArgs:1},handler(i,e){var t=hE(e[0]),n=t?[e[0]]:_i(e[0],"ordgroup").body,r=n.map(function(a){var o=AP(a),l=o.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new Gt("Unknown column alignment: "+l,a)}),s={cols:r,hskipBeforeAndAfter:!0,maxNumCols:r.length};return mp(i.parser,s,EP(i.envName))},htmlBuilder:Mh,mathmlBuilder:Th});Sh({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(i){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[i.envName.replace("*","")],t="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:t}]};if(i.envName.charAt(i.envName.length-1)==="*"){var r=i.parser;if(r.consumeSpaces(),r.fetch().text==="["){if(r.consume(),r.consumeSpaces(),t=r.fetch().text,"lcr".indexOf(t)===-1)throw new Gt("Expected l or c or r",r.nextToken);r.consume(),r.consumeSpaces(),r.expect("]"),r.consume(),n.cols=[{type:"align",align:t}]}}var s=mp(i.parser,n,EP(i.envName)),a=Math.max(0,...s.body.map(o=>o.length));return s.cols=new Array(a).fill({type:"align",align:t}),e?{type:"leftright",mode:i.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:Mh,mathmlBuilder:Th});Sh({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(i){var e={arraystretch:.5},t=mp(i.parser,e,"script");return t.colSeparationType="small",t},htmlBuilder:Mh,mathmlBuilder:Th});Sh({type:"array",names:["subarray"],props:{numArgs:1},handler(i,e){var t=hE(e[0]),n=t?[e[0]]:_i(e[0],"ordgroup").body,r=n.map(function(a){var o=AP(a),l=o.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new Gt("Unknown column alignment: "+l,a)});if(r.length>1)throw new Gt("{subarray} can contain only one column");var s={cols:r,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=mp(i.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new Gt("{subarray} can contain only one column");return s},htmlBuilder:Mh,mathmlBuilder:Th});Sh({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(i){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},t=mp(i.parser,e,EP(i.envName));return{type:"leftright",mode:i.mode,body:[t],left:i.envName.indexOf("r")>-1?".":"\\{",right:i.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Mh,mathmlBuilder:Th});Sh({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:QH,htmlBuilder:Mh,mathmlBuilder:Th});Sh({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(i){jn.contains(["gather","gather*"],i.envName)&&pE(i);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:CP(i.envName),emptySingleRow:!0,leqno:i.parser.settings.leqno};return mp(i.parser,e,"display")},htmlBuilder:Mh,mathmlBuilder:Th});Sh({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:QH,htmlBuilder:Mh,mathmlBuilder:Th});Sh({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(i){pE(i);var e={autoTag:CP(i.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:i.parser.settings.leqno};return mp(i.parser,e,"display")},htmlBuilder:Mh,mathmlBuilder:Th});Sh({type:"array",names:["CD"],props:{numArgs:0},handler(i){return pE(i),Ght(i.parser)},htmlBuilder:Mh,mathmlBuilder:Th});ee("\\nonumber","\\gdef\\@eqnsw{0}");ee("\\notag","\\nonumber");rn({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(i,e){throw new Gt(i.funcName+" valid only within array environment")}});var jD=$H;rn({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(i,e){var{parser:t,funcName:n}=i,r=e[0];if(r.type!=="ordgroup")throw new Gt("Invalid environment name",r);for(var s="",a=0;a<r.body.length;++a)s+=_i(r.body[a],"textord").text;if(n==="\\begin"){if(!jD.hasOwnProperty(s))throw new Gt("No such environment: "+s,r);var o=jD[s],{args:l,optArgs:c}=t.parseArguments("\\begin{"+s+"}",o),u={mode:t.mode,envName:s,parser:t},h=o.handler(u,l,c);t.expect("\\end",!1);var f=t.nextToken,d=_i(t.parseFunction(),"environment");if(d.name!==s)throw new Gt("Mismatch: \\begin{"+s+"} matched by \\end{"+d.name+"}",f);return h}return{type:"environment",mode:t.mode,name:s,nameGroup:r}}});var qH=(i,e)=>{var t=i.font,n=e.withFont(t);return Zi(i.body,n)},jH=(i,e)=>{var t=i.font,n=e.withFont(t);return Lr(i.body,n)},WD={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};rn({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=qx(e[0]),s=n;return s in WD&&(s=WD[s]),{type:"font",mode:t.mode,font:s.slice(1),body:r}},htmlBuilder:qH,mathmlBuilder:jH});rn({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(i,e)=>{var{parser:t}=i,n=e[0],r=jn.isCharacterBox(n);return{type:"mclass",mode:t.mode,mclass:fE(n),body:[{type:"font",mode:t.mode,font:"boldsymbol",body:n}],isCharacterBox:r}}});rn({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(i,e)=>{var{parser:t,funcName:n,breakOnTokenText:r}=i,{mode:s}=t,a=t.parseExpression(!0,r),o="math"+n.slice(1);return{type:"font",mode:s,font:o,body:{type:"ordgroup",mode:t.mode,body:a}}},htmlBuilder:qH,mathmlBuilder:jH});var WH=(i,e)=>{var t=e;return i==="display"?t=t.id>=Ln.SCRIPT.id?t.text():Ln.DISPLAY:i==="text"&&t.size===Ln.DISPLAY.size?t=Ln.TEXT:i==="script"?t=Ln.SCRIPT:i==="scriptscript"&&(t=Ln.SCRIPTSCRIPT),t},SP=(i,e)=>{var t=WH(i.size,e.style),n=t.fracNum(),r=t.fracDen(),s;s=e.havingStyle(n);var a=Zi(i.numer,s,e);if(i.continued){var o=8.5/e.fontMetrics().ptPerEm,l=3.5/e.fontMetrics().ptPerEm;a.height=a.height<o?o:a.height,a.depth=a.depth<l?l:a.depth}s=e.havingStyle(r);var c=Zi(i.denom,s,e),u,h,f;i.hasBarLine?(i.barSize?(h=ps(i.barSize,e),u=rt.makeLineSpan("frac-line",e,h)):u=rt.makeLineSpan("frac-line",e),h=u.height,f=u.height):(u=null,h=0,f=e.fontMetrics().defaultRuleThickness);var d,g,v;t.size===Ln.DISPLAY.size||i.size==="display"?(d=e.fontMetrics().num1,h>0?g=3*f:g=7*f,v=e.fontMetrics().denom1):(h>0?(d=e.fontMetrics().num2,g=f):(d=e.fontMetrics().num3,g=3*f),v=e.fontMetrics().denom2);var A;if(u){var y=e.fontMetrics().axisHeight;d-a.depth-(y+.5*h)<g&&(d+=g-(d-a.depth-(y+.5*h))),y-.5*h-(c.height-v)<g&&(v+=g-(y-.5*h-(c.height-v)));var x=-(y-.5*h);A=rt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:v},{type:"elem",elem:u,shift:x},{type:"elem",elem:a,shift:-d}]},e)}else{var _=d-a.depth-(c.height-v);_<g&&(d+=.5*(g-_),v+=.5*(g-_)),A=rt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:v},{type:"elem",elem:a,shift:-d}]},e)}s=e.havingStyle(t),A.height*=s.sizeMultiplier/e.sizeMultiplier,A.depth*=s.sizeMultiplier/e.sizeMultiplier;var C;t.size===Ln.DISPLAY.size?C=e.fontMetrics().delim1:t.size===Ln.SCRIPTSCRIPT.size?C=e.havingStyle(Ln.SCRIPT).fontMetrics().delim2:C=e.fontMetrics().delim2;var S,I;return i.leftDelim==null?S=H1(e,["mopen"]):S=xf.customSizedDelim(i.leftDelim,C,!0,e.havingStyle(t),i.mode,["mopen"]),i.continued?I=rt.makeSpan([]):i.rightDelim==null?I=H1(e,["mclose"]):I=xf.customSizedDelim(i.rightDelim,C,!0,e.havingStyle(t),i.mode,["mclose"]),rt.makeSpan(["mord"].concat(s.sizingClasses(e)),[S,rt.makeSpan(["mfrac"],[A]),I],e)},MP=(i,e)=>{var t=new zt.MathNode("mfrac",[Lr(i.numer,e),Lr(i.denom,e)]);if(!i.hasBarLine)t.setAttribute("linethickness","0px");else if(i.barSize){var n=ps(i.barSize,e);t.setAttribute("linethickness",Yt(n))}var r=WH(i.size,e.style);if(r.size!==e.style.size){t=new zt.MathNode("mstyle",[t]);var s=r.size===Ln.DISPLAY.size?"true":"false";t.setAttribute("displaystyle",s),t.setAttribute("scriptlevel","0")}if(i.leftDelim!=null||i.rightDelim!=null){var a=[];if(i.leftDelim!=null){var o=new zt.MathNode("mo",[new zt.TextNode(i.leftDelim.replace("\\",""))]);o.setAttribute("fence","true"),a.push(o)}if(a.push(t),i.rightDelim!=null){var l=new zt.MathNode("mo",[new zt.TextNode(i.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),a.push(l)}return vP(a)}return t};rn({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0],s=e[1],a,o=null,l=null,c="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":a=!0;break;case"\\\\atopfrac":a=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":a=!1,o="(",l=")";break;case"\\\\bracefrac":a=!1,o="\\{",l="\\}";break;case"\\\\brackfrac":a=!1,o="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text";break}return{type:"genfrac",mode:t.mode,continued:!1,numer:r,denom:s,hasBarLine:a,leftDelim:o,rightDelim:l,size:c,barSize:null}},htmlBuilder:SP,mathmlBuilder:MP});rn({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0],s=e[1];return{type:"genfrac",mode:t.mode,continued:!0,numer:r,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});rn({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(i){var{parser:e,funcName:t,token:n}=i,r;switch(t){case"\\over":r="\\frac";break;case"\\choose":r="\\binom";break;case"\\atop":r="\\\\atopfrac";break;case"\\brace":r="\\\\bracefrac";break;case"\\brack":r="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:r,token:n}}});var YD=["display","text","script","scriptscript"],XD=function(e){var t=null;return e.length>0&&(t=e,t=t==="."?null:t),t};rn({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(i,e){var{parser:t}=i,n=e[4],r=e[5],s=qx(e[0]),a=s.type==="atom"&&s.family==="open"?XD(s.text):null,o=qx(e[1]),l=o.type==="atom"&&o.family==="close"?XD(o.text):null,c=_i(e[2],"size"),u,h=null;c.isBlank?u=!0:(h=c.value,u=h.number>0);var f="auto",d=e[3];if(d.type==="ordgroup"){if(d.body.length>0){var g=_i(d.body[0],"textord");f=YD[Number(g.text)]}}else d=_i(d,"textord"),f=YD[Number(d.text)];return{type:"genfrac",mode:t.mode,numer:n,denom:r,continued:!1,hasBarLine:u,barSize:h,leftDelim:a,rightDelim:l,size:f}},htmlBuilder:SP,mathmlBuilder:MP});rn({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(i,e){var{parser:t,funcName:n,token:r}=i;return{type:"infix",mode:t.mode,replaceWith:"\\\\abovefrac",size:_i(e[0],"size").value,token:r}}});rn({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0],s=Lut(_i(e[1],"infix").size),a=e[2],o=s.number>0;return{type:"genfrac",mode:t.mode,numer:r,denom:a,continued:!1,hasBarLine:o,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:SP,mathmlBuilder:MP});var YH=(i,e)=>{var t=e.style,n,r;i.type==="supsub"?(n=i.sup?Zi(i.sup,e.havingStyle(t.sup()),e):Zi(i.sub,e.havingStyle(t.sub()),e),r=_i(i.base,"horizBrace")):r=_i(i,"horizBrace");var s=Zi(r.base,e.havingBaseStyle(Ln.DISPLAY)),a=kf.svgSpan(r,e),o;if(r.isOver?(o=rt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},e),o.children[0].children[0].children[1].classes.push("svg-align")):(o=rt.makeVList({positionType:"bottom",positionData:s.depth+.1+a.height,children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},e),o.children[0].children[0].children[0].classes.push("svg-align")),n){var l=rt.makeSpan(["mord",r.isOver?"mover":"munder"],[o],e);r.isOver?o=rt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:n}]},e):o=rt.makeVList({positionType:"bottom",positionData:l.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:l}]},e)}return rt.makeSpan(["mord",r.isOver?"mover":"munder"],[o],e)},sft=(i,e)=>{var t=kf.mathMLnode(i.label);return new zt.MathNode(i.isOver?"mover":"munder",[Lr(i.base,e),t])};rn({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(i,e){var{parser:t,funcName:n}=i;return{type:"horizBrace",mode:t.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:YH,mathmlBuilder:sft});rn({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,n=e[1],r=_i(e[0],"url").url;return t.settings.isTrusted({command:"\\href",url:r})?{type:"href",mode:t.mode,href:r,body:Qs(n)}:t.formatUnsupportedCmd("\\href")},htmlBuilder:(i,e)=>{var t=Ma(i.body,e,!1);return rt.makeAnchor(i.href,[],t,e)},mathmlBuilder:(i,e)=>{var t=tp(i.body,e);return t instanceof Mc||(t=new Mc("mrow",[t])),t.setAttribute("href",i.href),t}});rn({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,n=_i(e[0],"url").url;if(!t.settings.isTrusted({command:"\\url",url:n}))return t.formatUnsupportedCmd("\\url");for(var r=[],s=0;s<n.length;s++){var a=n[s];a==="~"&&(a="\\textasciitilde"),r.push({type:"textord",mode:"text",text:a})}var o={type:"text",mode:t.mode,font:"\\texttt",body:r};return{type:"href",mode:t.mode,href:n,body:Qs(o)}}});rn({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(i,e){var{parser:t}=i;return{type:"hbox",mode:t.mode,body:Qs(e[0])}},htmlBuilder(i,e){var t=Ma(i.body,e,!1);return rt.makeFragment(t)},mathmlBuilder(i,e){return new zt.MathNode("mrow",Cl(i.body,e))}});rn({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(i,e)=>{var{parser:t,funcName:n,token:r}=i,s=_i(e[0],"raw").string,a=e[1];t.settings.strict&&t.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var o,l={};switch(n){case"\\htmlClass":l.class=s,o={command:"\\htmlClass",class:s};break;case"\\htmlId":l.id=s,o={command:"\\htmlId",id:s};break;case"\\htmlStyle":l.style=s,o={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var c=s.split(","),u=0;u<c.length;u++){var h=c[u].split("=");if(h.length!==2)throw new Gt("Error parsing key-value for \\htmlData");l["data-"+h[0].trim()]=h[1].trim()}o={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return t.settings.isTrusted(o)?{type:"html",mode:t.mode,attributes:l,body:Qs(a)}:t.formatUnsupportedCmd(n)},htmlBuilder:(i,e)=>{var t=Ma(i.body,e,!1),n=["enclosing"];i.attributes.class&&n.push(...i.attributes.class.trim().split(/\s+/));var r=rt.makeSpan(n,t,e);for(var s in i.attributes)s!=="class"&&i.attributes.hasOwnProperty(s)&&r.setAttribute(s,i.attributes[s]);return r},mathmlBuilder:(i,e)=>tp(i.body,e)});rn({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(i,e)=>{var{parser:t}=i;return{type:"htmlmathml",mode:t.mode,html:Qs(e[0]),mathml:Qs(e[1])}},htmlBuilder:(i,e)=>{var t=Ma(i.html,e,!1);return rt.makeFragment(t)},mathmlBuilder:(i,e)=>tp(i.mathml,e)});var v3=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new Gt("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(t[1]+t[2]),unit:t[3]};if(!pH(n))throw new Gt("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};rn({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(i,e,t)=>{var{parser:n}=i,r={number:0,unit:"em"},s={number:.9,unit:"em"},a={number:0,unit:"em"},o="";if(t[0])for(var l=_i(t[0],"raw").string,c=l.split(","),u=0;u<c.length;u++){var h=c[u].split("=");if(h.length===2){var f=h[1].trim();switch(h[0].trim()){case"alt":o=f;break;case"width":r=v3(f);break;case"height":s=v3(f);break;case"totalheight":a=v3(f);break;default:throw new Gt("Invalid key: '"+h[0]+"' in \\includegraphics.")}}}var d=_i(e[0],"url").url;return o===""&&(o=d,o=o.replace(/^.*[\\/]/,""),o=o.substring(0,o.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:d})?{type:"includegraphics",mode:n.mode,alt:o,width:r,height:s,totalheight:a,src:d}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(i,e)=>{var t=ps(i.height,e),n=0;i.totalheight.number>0&&(n=ps(i.totalheight,e)-t);var r=0;i.width.number>0&&(r=ps(i.width,e));var s={height:Yt(t+n)};r>0&&(s.width=Yt(r)),n>0&&(s.verticalAlign=Yt(-n));var a=new sht(i.src,i.alt,s);return a.height=t,a.depth=n,a},mathmlBuilder:(i,e)=>{var t=new zt.MathNode("mglyph",[]);t.setAttribute("alt",i.alt);var n=ps(i.height,e),r=0;if(i.totalheight.number>0&&(r=ps(i.totalheight,e)-n,t.setAttribute("valign",Yt(-r))),t.setAttribute("height",Yt(n+r)),i.width.number>0){var s=ps(i.width,e);t.setAttribute("width",Yt(s))}return t.setAttribute("src",i.src),t}});rn({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(i,e){var{parser:t,funcName:n}=i,r=_i(e[0],"size");if(t.settings.strict){var s=n[1]==="m",a=r.value.unit==="mu";s?(a||t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+r.value.unit+" units")),t.mode!=="math"&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):a&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:t.mode,dimension:r.value}},htmlBuilder(i,e){return rt.makeGlue(i.dimension,e)},mathmlBuilder(i,e){var t=ps(i.dimension,e);return new zt.SpaceNode(t)}});rn({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0];return{type:"lap",mode:t.mode,alignment:n.slice(5),body:r}},htmlBuilder:(i,e)=>{var t;i.alignment==="clap"?(t=rt.makeSpan([],[Zi(i.body,e)]),t=rt.makeSpan(["inner"],[t],e)):t=rt.makeSpan(["inner"],[Zi(i.body,e)]);var n=rt.makeSpan(["fix"],[]),r=rt.makeSpan([i.alignment],[t,n],e),s=rt.makeSpan(["strut"]);return s.style.height=Yt(r.height+r.depth),r.depth&&(s.style.verticalAlign=Yt(-r.depth)),r.children.unshift(s),r=rt.makeSpan(["thinbox"],[r],e),rt.makeSpan(["mord","vbox"],[r],e)},mathmlBuilder:(i,e)=>{var t=new zt.MathNode("mpadded",[Lr(i.body,e)]);if(i.alignment!=="rlap"){var n=i.alignment==="llap"?"-1":"-0.5";t.setAttribute("lspace",n+"width")}return t.setAttribute("width","0px"),t}});rn({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(i,e){var{funcName:t,parser:n}=i,r=n.mode;n.switchMode("math");var s=t==="\\("?"\\)":"$",a=n.parseExpression(!1,s);return n.expect(s),n.switchMode(r),{type:"styling",mode:n.mode,style:"text",body:a}}});rn({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(i,e){throw new Gt("Mismatched "+i.funcName)}});var KD=(i,e)=>{switch(e.style.size){case Ln.DISPLAY.size:return i.display;case Ln.TEXT.size:return i.text;case Ln.SCRIPT.size:return i.script;case Ln.SCRIPTSCRIPT.size:return i.scriptscript;default:return i.text}};rn({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(i,e)=>{var{parser:t}=i;return{type:"mathchoice",mode:t.mode,display:Qs(e[0]),text:Qs(e[1]),script:Qs(e[2]),scriptscript:Qs(e[3])}},htmlBuilder:(i,e)=>{var t=KD(i,e),n=Ma(t,e,!1);return rt.makeFragment(n)},mathmlBuilder:(i,e)=>{var t=KD(i,e);return tp(t,e)}});var XH=(i,e,t,n,r,s,a)=>{i=rt.makeSpan([],[i]);var o=t&&jn.isCharacterBox(t),l,c;if(e){var u=Zi(e,n.havingStyle(r.sup()),n);c={elem:u,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-u.depth)}}if(t){var h=Zi(t,n.havingStyle(r.sub()),n);l={elem:h,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-h.height)}}var f;if(c&&l){var d=n.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+i.depth+a;f=rt.makeVList({positionType:"bottom",positionData:d,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Yt(-s)},{type:"kern",size:l.kern},{type:"elem",elem:i},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Yt(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(l){var g=i.height-a;f=rt.makeVList({positionType:"top",positionData:g,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Yt(-s)},{type:"kern",size:l.kern},{type:"elem",elem:i}]},n)}else if(c){var v=i.depth+a;f=rt.makeVList({positionType:"bottom",positionData:v,children:[{type:"elem",elem:i},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Yt(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return i;var A=[f];if(l&&s!==0&&!o){var _=rt.makeSpan(["mspace"],[],n);_.style.marginRight=Yt(s),A.unshift(_)}return rt.makeSpan(["mop","op-limits"],A,n)},KH=["\\smallint"],Bv=(i,e)=>{var t,n,r=!1,s;i.type==="supsub"?(t=i.sup,n=i.sub,s=_i(i.base,"op"),r=!0):s=_i(i,"op");var a=e.style,o=!1;a.size===Ln.DISPLAY.size&&s.symbol&&!jn.contains(KH,s.name)&&(o=!0);var l;if(s.symbol){var c=o?"Size2-Regular":"Size1-Regular",u="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(u=s.name.slice(1),s.name=u==="oiint"?"\\iint":"\\iiint"),l=rt.makeSymbol(s.name,c,"math",e,["mop","op-symbol",o?"large-op":"small-op"]),u.length>0){var h=l.italic,f=rt.staticSvg(u+"Size"+(o?"2":"1"),e);l=rt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:f,shift:o?.08:0}]},e),s.name="\\"+u,l.classes.unshift("mop"),l.italic=h}}else if(s.body){var d=Ma(s.body,e,!0);d.length===1&&d[0]instanceof Fc?(l=d[0],l.classes[0]="mop"):l=rt.makeSpan(["mop"],d,e)}else{for(var g=[],v=1;v<s.name.length;v++)g.push(rt.mathsym(s.name[v],s.mode,e));l=rt.makeSpan(["mop"],g,e)}var A=0,_=0;return(l instanceof Fc||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(A=(l.height-l.depth)/2-e.fontMetrics().axisHeight,_=l.italic),r?XH(l,t,n,e,a,_,A):(A&&(l.style.position="relative",l.style.top=Yt(A)),l)},wb=(i,e)=>{var t;if(i.symbol)t=new Mc("mo",[zc(i.name,i.mode)]),jn.contains(KH,i.name)&&t.setAttribute("largeop","false");else if(i.body)t=new Mc("mo",Cl(i.body,e));else{t=new Mc("mi",[new l1(i.name.slice(1))]);var n=new Mc("mo",[zc("⁡","text")]);i.parentIsSupSub?t=new Mc("mrow",[t,n]):t=EH([t,n])}return t},aft={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};rn({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=n;return r.length===1&&(r=aft[r]),{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:Bv,mathmlBuilder:wb});rn({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(i,e)=>{var{parser:t}=i,n=e[0];return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Qs(n)}},htmlBuilder:Bv,mathmlBuilder:wb});var oft={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};rn({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(i){var{parser:e,funcName:t}=i;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:Bv,mathmlBuilder:wb});rn({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(i){var{parser:e,funcName:t}=i;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:Bv,mathmlBuilder:wb});rn({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler(i){var{parser:e,funcName:t}=i,n=t;return n.length===1&&(n=oft[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Bv,mathmlBuilder:wb});var JH=(i,e)=>{var t,n,r=!1,s;i.type==="supsub"?(t=i.sup,n=i.sub,s=_i(i.base,"operatorname"),r=!0):s=_i(i,"operatorname");var a;if(s.body.length>0){for(var o=s.body.map(h=>{var f=h.text;return typeof f=="string"?{type:"textord",mode:h.mode,text:f}:h}),l=Ma(o,e.withFont("mathrm"),!0),c=0;c<l.length;c++){var u=l[c];u instanceof Fc&&(u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}a=rt.makeSpan(["mop"],l,e)}else a=rt.makeSpan(["mop"],[],e);return r?XH(a,t,n,e,e.style,0,0):a},lft=(i,e)=>{for(var t=Cl(i.body,e.withFont("mathrm")),n=!0,r=0;r<t.length;r++){var s=t[r];if(!(s instanceof zt.SpaceNode))if(s instanceof zt.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var a=s.children[0];s.children.length===1&&a instanceof zt.TextNode?a.text=a.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var o=t.map(u=>u.toText()).join("");t=[new zt.TextNode(o)]}var l=new zt.MathNode("mi",t);l.setAttribute("mathvariant","normal");var c=new zt.MathNode("mo",[zc("⁡","text")]);return i.parentIsSupSub?new zt.MathNode("mrow",[l,c]):zt.newDocumentFragment([l,c])};rn({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0];return{type:"operatorname",mode:t.mode,body:Qs(r),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:JH,mathmlBuilder:lft});ee("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");am({type:"ordgroup",htmlBuilder(i,e){return i.semisimple?rt.makeFragment(Ma(i.body,e,!1)):rt.makeSpan(["mord"],Ma(i.body,e,!0),e)},mathmlBuilder(i,e){return tp(i.body,e,!0)}});rn({type:"overline",names:["\\overline"],props:{numArgs:1},handler(i,e){var{parser:t}=i,n=e[0];return{type:"overline",mode:t.mode,body:n}},htmlBuilder(i,e){var t=Zi(i.body,e.havingCrampedStyle()),n=rt.makeLineSpan("overline-line",e),r=e.fontMetrics().defaultRuleThickness,s=rt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t},{type:"kern",size:3*r},{type:"elem",elem:n},{type:"kern",size:r}]},e);return rt.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(i,e){var t=new zt.MathNode("mo",[new zt.TextNode("‾")]);t.setAttribute("stretchy","true");var n=new zt.MathNode("mover",[Lr(i.body,e),t]);return n.setAttribute("accent","true"),n}});rn({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,n=e[0];return{type:"phantom",mode:t.mode,body:Qs(n)}},htmlBuilder:(i,e)=>{var t=Ma(i.body,e.withPhantom(),!1);return rt.makeFragment(t)},mathmlBuilder:(i,e)=>{var t=Cl(i.body,e);return new zt.MathNode("mphantom",t)}});rn({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,n=e[0];return{type:"hphantom",mode:t.mode,body:n}},htmlBuilder:(i,e)=>{var t=rt.makeSpan([],[Zi(i.body,e.withPhantom())]);if(t.height=0,t.depth=0,t.children)for(var n=0;n<t.children.length;n++)t.children[n].height=0,t.children[n].depth=0;return t=rt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e),rt.makeSpan(["mord"],[t],e)},mathmlBuilder:(i,e)=>{var t=Cl(Qs(i.body),e),n=new zt.MathNode("mphantom",t),r=new zt.MathNode("mpadded",[n]);return r.setAttribute("height","0px"),r.setAttribute("depth","0px"),r}});rn({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,n=e[0];return{type:"vphantom",mode:t.mode,body:n}},htmlBuilder:(i,e)=>{var t=rt.makeSpan(["inner"],[Zi(i.body,e.withPhantom())]),n=rt.makeSpan(["fix"],[]);return rt.makeSpan(["mord","rlap"],[t,n],e)},mathmlBuilder:(i,e)=>{var t=Cl(Qs(i.body),e),n=new zt.MathNode("mphantom",t),r=new zt.MathNode("mpadded",[n]);return r.setAttribute("width","0px"),r}});rn({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(i,e){var{parser:t}=i,n=_i(e[0],"size").value,r=e[1];return{type:"raisebox",mode:t.mode,dy:n,body:r}},htmlBuilder(i,e){var t=Zi(i.body,e),n=ps(i.dy,e);return rt.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(i,e){var t=new zt.MathNode("mpadded",[Lr(i.body,e)]),n=i.dy.number+i.dy.unit;return t.setAttribute("voffset",n),t}});rn({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(i){var{parser:e}=i;return{type:"internal",mode:e.mode}}});rn({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler(i,e,t){var{parser:n}=i,r=t[0],s=_i(e[0],"size"),a=_i(e[1],"size");return{type:"rule",mode:n.mode,shift:r&&_i(r,"size").value,width:s.value,height:a.value}},htmlBuilder(i,e){var t=rt.makeSpan(["mord","rule"],[],e),n=ps(i.width,e),r=ps(i.height,e),s=i.shift?ps(i.shift,e):0;return t.style.borderRightWidth=Yt(n),t.style.borderTopWidth=Yt(r),t.style.bottom=Yt(s),t.width=n,t.height=r+s,t.depth=-s,t.maxFontSize=r*1.125*e.sizeMultiplier,t},mathmlBuilder(i,e){var t=ps(i.width,e),n=ps(i.height,e),r=i.shift?ps(i.shift,e):0,s=e.color&&e.getColor()||"black",a=new zt.MathNode("mspace");a.setAttribute("mathbackground",s),a.setAttribute("width",Yt(t)),a.setAttribute("height",Yt(n));var o=new zt.MathNode("mpadded",[a]);return r>=0?o.setAttribute("height",Yt(r)):(o.setAttribute("height",Yt(r)),o.setAttribute("depth",Yt(-r))),o.setAttribute("voffset",Yt(r)),o}});function ZH(i,e,t){for(var n=Ma(i,e,!1),r=e.sizeMultiplier/t.sizeMultiplier,s=0;s<n.length;s++){var a=n[s].classes.indexOf("sizing");a<0?Array.prototype.push.apply(n[s].classes,e.sizingClasses(t)):n[s].classes[a+1]==="reset-size"+e.size&&(n[s].classes[a+1]="reset-size"+t.size),n[s].height*=r,n[s].depth*=r}return rt.makeFragment(n)}var JD=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],cft=(i,e)=>{var t=e.havingSize(i.size);return ZH(i.body,t,e)};rn({type:"sizing",names:JD,props:{numArgs:0,allowedInText:!0},handler:(i,e)=>{var{breakOnTokenText:t,funcName:n,parser:r}=i,s=r.parseExpression(!1,t);return{type:"sizing",mode:r.mode,size:JD.indexOf(n)+1,body:s}},htmlBuilder:cft,mathmlBuilder:(i,e)=>{var t=e.havingSize(i.size),n=Cl(i.body,t),r=new zt.MathNode("mstyle",n);return r.setAttribute("mathsize",Yt(t.sizeMultiplier)),r}});rn({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(i,e,t)=>{var{parser:n}=i,r=!1,s=!1,a=t[0]&&_i(t[0],"ordgroup");if(a)for(var o="",l=0;l<a.body.length;++l){var c=a.body[l];if(o=c.text,o==="t")r=!0;else if(o==="b")s=!0;else{r=!1,s=!1;break}}else r=!0,s=!0;var u=e[0];return{type:"smash",mode:n.mode,body:u,smashHeight:r,smashDepth:s}},htmlBuilder:(i,e)=>{var t=rt.makeSpan([],[Zi(i.body,e)]);if(!i.smashHeight&&!i.smashDepth)return t;if(i.smashHeight&&(t.height=0,t.children))for(var n=0;n<t.children.length;n++)t.children[n].height=0;if(i.smashDepth&&(t.depth=0,t.children))for(var r=0;r<t.children.length;r++)t.children[r].depth=0;var s=rt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e);return rt.makeSpan(["mord"],[s],e)},mathmlBuilder:(i,e)=>{var t=new zt.MathNode("mpadded",[Lr(i.body,e)]);return i.smashHeight&&t.setAttribute("height","0px"),i.smashDepth&&t.setAttribute("depth","0px"),t}});rn({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(i,e,t){var{parser:n}=i,r=t[0],s=e[0];return{type:"sqrt",mode:n.mode,body:s,index:r}},htmlBuilder(i,e){var t=Zi(i.body,e.havingCrampedStyle());t.height===0&&(t.height=e.fontMetrics().xHeight),t=rt.wrapFragment(t,e);var n=e.fontMetrics(),r=n.defaultRuleThickness,s=r;e.style.id<Ln.TEXT.id&&(s=e.fontMetrics().xHeight);var a=r+s/4,o=t.height+t.depth+a+r,{span:l,ruleWidth:c,advanceWidth:u}=xf.sqrtImage(o,e),h=l.height-c;h>t.height+t.depth+a&&(a=(a+h-t.height-t.depth)/2);var f=l.height-t.height-a-c;t.style.paddingLeft=Yt(u);var d=rt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t,wrapperClasses:["svg-align"]},{type:"kern",size:-(t.height+f)},{type:"elem",elem:l},{type:"kern",size:c}]},e);if(i.index){var g=e.havingStyle(Ln.SCRIPTSCRIPT),v=Zi(i.index,g,e),A=.6*(d.height-d.depth),_=rt.makeVList({positionType:"shift",positionData:-A,children:[{type:"elem",elem:v}]},e),y=rt.makeSpan(["root"],[_]);return rt.makeSpan(["mord","sqrt"],[y,d],e)}else return rt.makeSpan(["mord","sqrt"],[d],e)},mathmlBuilder(i,e){var{body:t,index:n}=i;return n?new zt.MathNode("mroot",[Lr(t,e),Lr(n,e)]):new zt.MathNode("msqrt",[Lr(t,e)])}});var ZD={display:Ln.DISPLAY,text:Ln.TEXT,script:Ln.SCRIPT,scriptscript:Ln.SCRIPTSCRIPT};rn({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(i,e){var{breakOnTokenText:t,funcName:n,parser:r}=i,s=r.parseExpression(!0,t),a=n.slice(1,n.length-5);return{type:"styling",mode:r.mode,style:a,body:s}},htmlBuilder(i,e){var t=ZD[i.style],n=e.havingStyle(t).withFont("");return ZH(i.body,n,e)},mathmlBuilder(i,e){var t=ZD[i.style],n=e.havingStyle(t),r=Cl(i.body,n),s=new zt.MathNode("mstyle",r),a={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},o=a[i.style];return s.setAttribute("scriptlevel",o[0]),s.setAttribute("displaystyle",o[1]),s}});var uft=function(e,t){var n=e.base;if(n)if(n.type==="op"){var r=n.limits&&(t.style.size===Ln.DISPLAY.size||n.alwaysHandleSupSub);return r?Bv:null}else if(n.type==="operatorname"){var s=n.alwaysHandleSupSub&&(t.style.size===Ln.DISPLAY.size||n.limits);return s?JH:null}else{if(n.type==="accent")return jn.isCharacterBox(n.base)?bP:null;if(n.type==="horizBrace"){var a=!e.sub;return a===n.isOver?YH:null}else return null}else return null};am({type:"supsub",htmlBuilder(i,e){var t=uft(i,e);if(t)return t(i,e);var{base:n,sup:r,sub:s}=i,a=Zi(n,e),o,l,c=e.fontMetrics(),u=0,h=0,f=n&&jn.isCharacterBox(n);if(r){var d=e.havingStyle(e.style.sup());o=Zi(r,d,e),f||(u=a.height-d.fontMetrics().supDrop*d.sizeMultiplier/e.sizeMultiplier)}if(s){var g=e.havingStyle(e.style.sub());l=Zi(s,g,e),f||(h=a.depth+g.fontMetrics().subDrop*g.sizeMultiplier/e.sizeMultiplier)}var v;e.style===Ln.DISPLAY?v=c.sup1:e.style.cramped?v=c.sup3:v=c.sup2;var A=e.sizeMultiplier,_=Yt(.5/c.ptPerEm/A),y=null;if(l){var x=i.base&&i.base.type==="op"&&i.base.name&&(i.base.name==="\\oiint"||i.base.name==="\\oiiint");(a instanceof Fc||x)&&(y=Yt(-a.italic))}var C;if(o&&l){u=Math.max(u,v,o.depth+.25*c.xHeight),h=Math.max(h,c.sub2);var S=c.defaultRuleThickness,I=4*S;if(u-o.depth-(l.height-h)<I){h=I-(u-o.depth)+l.height;var P=.8*c.xHeight-(u-o.depth);P>0&&(u+=P,h-=P)}var B=[{type:"elem",elem:l,shift:h,marginRight:_,marginLeft:y},{type:"elem",elem:o,shift:-u,marginRight:_}];C=rt.makeVList({positionType:"individualShift",children:B},e)}else if(l){h=Math.max(h,c.sub1,l.height-.8*c.xHeight);var M=[{type:"elem",elem:l,marginLeft:y,marginRight:_}];C=rt.makeVList({positionType:"shift",positionData:h,children:M},e)}else if(o)u=Math.max(u,v,o.depth+.25*c.xHeight),C=rt.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:o,marginRight:_}]},e);else throw new Error("supsub must have either sup or sub.");var D=hT(a,"right")||"mord";return rt.makeSpan([D],[a,rt.makeSpan(["msupsub"],[C])],e)},mathmlBuilder(i,e){var t=!1,n,r;i.base&&i.base.type==="horizBrace"&&(r=!!i.sup,r===i.base.isOver&&(t=!0,n=i.base.isOver)),i.base&&(i.base.type==="op"||i.base.type==="operatorname")&&(i.base.parentIsSupSub=!0);var s=[Lr(i.base,e)];i.sub&&s.push(Lr(i.sub,e)),i.sup&&s.push(Lr(i.sup,e));var a;if(t)a=n?"mover":"munder";else if(i.sub)if(i.sup){var c=i.base;c&&c.type==="op"&&c.limits&&e.style===Ln.DISPLAY||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(e.style===Ln.DISPLAY||c.limits)?a="munderover":a="msubsup"}else{var l=i.base;l&&l.type==="op"&&l.limits&&(e.style===Ln.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===Ln.DISPLAY)?a="munder":a="msub"}else{var o=i.base;o&&o.type==="op"&&o.limits&&(e.style===Ln.DISPLAY||o.alwaysHandleSupSub)||o&&o.type==="operatorname"&&o.alwaysHandleSupSub&&(o.limits||e.style===Ln.DISPLAY)?a="mover":a="msup"}return new zt.MathNode(a,s)}});am({type:"atom",htmlBuilder(i,e){return rt.mathsym(i.text,i.mode,e,["m"+i.family])},mathmlBuilder(i,e){var t=new zt.MathNode("mo",[zc(i.text,i.mode)]);if(i.family==="bin"){var n=_P(i,e);n==="bold-italic"&&t.setAttribute("mathvariant",n)}else i.family==="punct"?t.setAttribute("separator","true"):(i.family==="open"||i.family==="close")&&t.setAttribute("stretchy","false");return t}});var e$={mi:"italic",mn:"normal",mtext:"normal"};am({type:"mathord",htmlBuilder(i,e){return rt.makeOrd(i,e,"mathord")},mathmlBuilder(i,e){var t=new zt.MathNode("mi",[zc(i.text,i.mode,e)]),n=_P(i,e)||"italic";return n!==e$[t.type]&&t.setAttribute("mathvariant",n),t}});am({type:"textord",htmlBuilder(i,e){return rt.makeOrd(i,e,"textord")},mathmlBuilder(i,e){var t=zc(i.text,i.mode,e),n=_P(i,e)||"normal",r;return i.mode==="text"?r=new zt.MathNode("mtext",[t]):/[0-9]/.test(i.text)?r=new zt.MathNode("mn",[t]):i.text==="\\prime"?r=new zt.MathNode("mo",[t]):r=new zt.MathNode("mi",[t]),n!==e$[r.type]&&r.setAttribute("mathvariant",n),r}});var _3={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},A3={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};am({type:"spacing",htmlBuilder(i,e){if(A3.hasOwnProperty(i.text)){var t=A3[i.text].className||"";if(i.mode==="text"){var n=rt.makeOrd(i,e,"textord");return n.classes.push(t),n}else return rt.makeSpan(["mspace",t],[rt.mathsym(i.text,i.mode,e)],e)}else{if(_3.hasOwnProperty(i.text))return rt.makeSpan(["mspace",_3[i.text]],[],e);throw new Gt('Unknown type of space "'+i.text+'"')}},mathmlBuilder(i,e){var t;if(A3.hasOwnProperty(i.text))t=new zt.MathNode("mtext",[new zt.TextNode(" ")]);else{if(_3.hasOwnProperty(i.text))return new zt.MathNode("mspace");throw new Gt('Unknown type of space "'+i.text+'"')}return t}});var e9=()=>{var i=new zt.MathNode("mtd",[]);return i.setAttribute("width","50%"),i};am({type:"tag",mathmlBuilder(i,e){var t=new zt.MathNode("mtable",[new zt.MathNode("mtr",[e9(),new zt.MathNode("mtd",[tp(i.body,e)]),e9(),new zt.MathNode("mtd",[tp(i.tag,e)])])]);return t.setAttribute("width","100%"),t}});var t9={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},n9={"\\textbf":"textbf","\\textmd":"textmd"},hft={"\\textit":"textit","\\textup":"textup"},i9=(i,e)=>{var t=i.font;return t?t9[t]?e.withTextFontFamily(t9[t]):n9[t]?e.withTextFontWeight(n9[t]):e.withTextFontShape(hft[t]):e};rn({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(i,e){var{parser:t,funcName:n}=i,r=e[0];return{type:"text",mode:t.mode,body:Qs(r),font:n}},htmlBuilder(i,e){var t=i9(i,e),n=Ma(i.body,t,!0);return rt.makeSpan(["mord","text"],n,t)},mathmlBuilder(i,e){var t=i9(i,e);return tp(i.body,t)}});rn({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(i,e){var{parser:t}=i;return{type:"underline",mode:t.mode,body:e[0]}},htmlBuilder(i,e){var t=Zi(i.body,e),n=rt.makeLineSpan("underline-line",e),r=e.fontMetrics().defaultRuleThickness,s=rt.makeVList({positionType:"top",positionData:t.height,children:[{type:"kern",size:r},{type:"elem",elem:n},{type:"kern",size:3*r},{type:"elem",elem:t}]},e);return rt.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(i,e){var t=new zt.MathNode("mo",[new zt.TextNode("‾")]);t.setAttribute("stretchy","true");var n=new zt.MathNode("munder",[Lr(i.body,e),t]);return n.setAttribute("accentunder","true"),n}});rn({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(i,e){var{parser:t}=i;return{type:"vcenter",mode:t.mode,body:e[0]}},htmlBuilder(i,e){var t=Zi(i.body,e),n=e.fontMetrics().axisHeight,r=.5*(t.height-n-(t.depth+n));return rt.makeVList({positionType:"shift",positionData:r,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(i,e){return new zt.MathNode("mpadded",[Lr(i.body,e)],["vcenter"])}});rn({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(i,e,t){throw new Gt("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(i,e){for(var t=r9(i),n=[],r=e.havingStyle(e.style.text()),s=0;s<t.length;s++){var a=t[s];a==="~"&&(a="\\textasciitilde"),n.push(rt.makeSymbol(a,"Typewriter-Regular",i.mode,r,["mord","texttt"]))}return rt.makeSpan(["mord","text"].concat(r.sizingClasses(e)),rt.tryCombineChars(n),r)},mathmlBuilder(i,e){var t=new zt.TextNode(r9(i)),n=new zt.MathNode("mtext",[t]);return n.setAttribute("mathvariant","monospace"),n}});var r9=i=>i.body.replace(/ /g,i.star?"␣":" "),Pd=xH,t$=`[ \r
	]`,fft="\\\\[a-zA-Z@]+",dft="\\\\[^\uD800-\uDFFF]",pft="("+fft+")"+t$+"*",mft=`\\\\(
|[ \r	]+
?)[ \r	]*`,mT="[̀-ͯ]",gft=new RegExp(mT+"+$"),vft="("+t$+"+)|"+(mft+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(mT+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(mT+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+pft)+("|"+dft+")");class s9{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(vft,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new dh("EOF",new $l(this,t,t));var n=this.tokenRegex.exec(e);if(n===null||n.index!==t)throw new Gt("Unexpected character: '"+e[t]+"'",new dh(e[t],new $l(this,t,t+1)));var r=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[r]===14){var s=e.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new dh(r,new $l(this,t,this.tokenRegex.lastIndex))}}class _ft{constructor(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new Gt("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(e[t]==null?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,n){if(n===void 0&&(n=!1),n){for(var r=0;r<this.undefStack.length;r++)delete this.undefStack[r][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(e)&&(s[e]=this.current[e])}t==null?delete this.current[e]:this.current[e]=t}}var Aft=GH;ee("\\noexpand",function(i){var e=i.popToken();return i.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});ee("\\expandafter",function(i){var e=i.popToken();return i.expandOnce(!0),{tokens:[e],numArgs:0}});ee("\\@firstoftwo",function(i){var e=i.consumeArgs(2);return{tokens:e[0],numArgs:0}});ee("\\@secondoftwo",function(i){var e=i.consumeArgs(2);return{tokens:e[1],numArgs:0}});ee("\\@ifnextchar",function(i){var e=i.consumeArgs(3);i.consumeSpaces();var t=i.future();return e[0].length===1&&e[0][0].text===t.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});ee("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");ee("\\TextOrMath",function(i){var e=i.consumeArgs(2);return i.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var a9={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};ee("\\char",function(i){var e=i.popToken(),t,n="";if(e.text==="'")t=8,e=i.popToken();else if(e.text==='"')t=16,e=i.popToken();else if(e.text==="`")if(e=i.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new Gt("\\char` missing argument");n=e.text.charCodeAt(0)}else t=10;if(t){if(n=a9[e.text],n==null||n>=t)throw new Gt("Invalid base-"+t+" digit "+e.text);for(var r;(r=a9[i.future().text])!=null&&r<t;)n*=t,n+=r,i.popToken()}return"\\@char{"+n+"}"});var TP=(i,e,t)=>{var n=i.consumeArg().tokens;if(n.length!==1)throw new Gt("\\newcommand's first argument must be a macro name");var r=n[0].text,s=i.isDefined(r);if(s&&!e)throw new Gt("\\newcommand{"+r+"} attempting to redefine "+(r+"; use \\renewcommand"));if(!s&&!t)throw new Gt("\\renewcommand{"+r+"} when command "+r+" does not yet exist; use \\newcommand");var a=0;if(n=i.consumeArg().tokens,n.length===1&&n[0].text==="["){for(var o="",l=i.expandNextToken();l.text!=="]"&&l.text!=="EOF";)o+=l.text,l=i.expandNextToken();if(!o.match(/^\s*[0-9]+\s*$/))throw new Gt("Invalid number of arguments: "+o);a=parseInt(o),n=i.consumeArg().tokens}return i.macros.set(r,{tokens:n,numArgs:a}),""};ee("\\newcommand",i=>TP(i,!1,!0));ee("\\renewcommand",i=>TP(i,!0,!1));ee("\\providecommand",i=>TP(i,!0,!0));ee("\\message",i=>{var e=i.consumeArgs(1)[0];return console.log(e.reverse().map(t=>t.text).join("")),""});ee("\\errmessage",i=>{var e=i.consumeArgs(1)[0];return console.error(e.reverse().map(t=>t.text).join("")),""});ee("\\show",i=>{var e=i.popToken(),t=e.text;return console.log(e,i.macros.get(t),Pd[t],zr.math[t],zr.text[t]),""});ee("\\bgroup","{");ee("\\egroup","}");ee("~","\\nobreakspace");ee("\\lq","`");ee("\\rq","'");ee("\\aa","\\r a");ee("\\AA","\\r A");ee("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}");ee("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");ee("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}");ee("ℬ","\\mathscr{B}");ee("ℰ","\\mathscr{E}");ee("ℱ","\\mathscr{F}");ee("ℋ","\\mathscr{H}");ee("ℐ","\\mathscr{I}");ee("ℒ","\\mathscr{L}");ee("ℳ","\\mathscr{M}");ee("ℛ","\\mathscr{R}");ee("ℭ","\\mathfrak{C}");ee("ℌ","\\mathfrak{H}");ee("ℨ","\\mathfrak{Z}");ee("\\Bbbk","\\Bbb{k}");ee("·","\\cdotp");ee("\\llap","\\mathllap{\\textrm{#1}}");ee("\\rlap","\\mathrlap{\\textrm{#1}}");ee("\\clap","\\mathclap{\\textrm{#1}}");ee("\\mathstrut","\\vphantom{(}");ee("\\underbar","\\underline{\\text{#1}}");ee("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');ee("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}");ee("\\ne","\\neq");ee("≠","\\neq");ee("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}");ee("∉","\\notin");ee("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}");ee("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}");ee("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}");ee("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}");ee("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}");ee("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}");ee("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}");ee("⟂","\\perp");ee("‼","\\mathclose{!\\mkern-0.8mu!}");ee("∌","\\notni");ee("⌜","\\ulcorner");ee("⌝","\\urcorner");ee("⌞","\\llcorner");ee("⌟","\\lrcorner");ee("©","\\copyright");ee("®","\\textregistered");ee("️","\\textregistered");ee("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');ee("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');ee("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');ee("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');ee("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}");ee("⋮","\\vdots");ee("\\varGamma","\\mathit{\\Gamma}");ee("\\varDelta","\\mathit{\\Delta}");ee("\\varTheta","\\mathit{\\Theta}");ee("\\varLambda","\\mathit{\\Lambda}");ee("\\varXi","\\mathit{\\Xi}");ee("\\varPi","\\mathit{\\Pi}");ee("\\varSigma","\\mathit{\\Sigma}");ee("\\varUpsilon","\\mathit{\\Upsilon}");ee("\\varPhi","\\mathit{\\Phi}");ee("\\varPsi","\\mathit{\\Psi}");ee("\\varOmega","\\mathit{\\Omega}");ee("\\substack","\\begin{subarray}{c}#1\\end{subarray}");ee("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");ee("\\boxed","\\fbox{$\\displaystyle{#1}$}");ee("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");ee("\\implies","\\DOTSB\\;\\Longrightarrow\\;");ee("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var o9={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};ee("\\dots",function(i){var e="\\dotso",t=i.expandAfterFuture().text;return t in o9?e=o9[t]:(t.slice(0,4)==="\\not"||t in zr.math&&jn.contains(["bin","rel"],zr.math[t].group))&&(e="\\dotsb"),e});var IP={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};ee("\\dotso",function(i){var e=i.future().text;return e in IP?"\\ldots\\,":"\\ldots"});ee("\\dotsc",function(i){var e=i.future().text;return e in IP&&e!==","?"\\ldots\\,":"\\ldots"});ee("\\cdots",function(i){var e=i.future().text;return e in IP?"\\@cdots\\,":"\\@cdots"});ee("\\dotsb","\\cdots");ee("\\dotsm","\\cdots");ee("\\dotsi","\\!\\cdots");ee("\\dotsx","\\ldots\\,");ee("\\DOTSI","\\relax");ee("\\DOTSB","\\relax");ee("\\DOTSX","\\relax");ee("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");ee("\\,","\\tmspace+{3mu}{.1667em}");ee("\\thinspace","\\,");ee("\\>","\\mskip{4mu}");ee("\\:","\\tmspace+{4mu}{.2222em}");ee("\\medspace","\\:");ee("\\;","\\tmspace+{5mu}{.2777em}");ee("\\thickspace","\\;");ee("\\!","\\tmspace-{3mu}{.1667em}");ee("\\negthinspace","\\!");ee("\\negmedspace","\\tmspace-{4mu}{.2222em}");ee("\\negthickspace","\\tmspace-{5mu}{.277em}");ee("\\enspace","\\kern.5em ");ee("\\enskip","\\hskip.5em\\relax");ee("\\quad","\\hskip1em\\relax");ee("\\qquad","\\hskip2em\\relax");ee("\\tag","\\@ifstar\\tag@literal\\tag@paren");ee("\\tag@paren","\\tag@literal{({#1})}");ee("\\tag@literal",i=>{if(i.macros.get("\\df@tag"))throw new Gt("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});ee("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");ee("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");ee("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");ee("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");ee("\\newline","\\\\\\relax");ee("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var n$=Yt(sh["Main-Regular"]["T".charCodeAt(0)][1]-.7*sh["Main-Regular"]["A".charCodeAt(0)][1]);ee("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+n$+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");ee("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+n$+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");ee("\\hspace","\\@ifstar\\@hspacer\\@hspace");ee("\\@hspace","\\hskip #1\\relax");ee("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");ee("\\ordinarycolon",":");ee("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");ee("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');ee("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');ee("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');ee("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');ee("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');ee("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');ee("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');ee("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');ee("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');ee("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');ee("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');ee("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');ee("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');ee("∷","\\dblcolon");ee("∹","\\eqcolon");ee("≔","\\coloneqq");ee("≕","\\eqqcolon");ee("⩴","\\Coloneqq");ee("\\ratio","\\vcentcolon");ee("\\coloncolon","\\dblcolon");ee("\\colonequals","\\coloneqq");ee("\\coloncolonequals","\\Coloneqq");ee("\\equalscolon","\\eqqcolon");ee("\\equalscoloncolon","\\Eqqcolon");ee("\\colonminus","\\coloneq");ee("\\coloncolonminus","\\Coloneq");ee("\\minuscolon","\\eqcolon");ee("\\minuscoloncolon","\\Eqcolon");ee("\\coloncolonapprox","\\Colonapprox");ee("\\coloncolonsim","\\Colonsim");ee("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");ee("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");ee("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");ee("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");ee("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}");ee("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");ee("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");ee("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");ee("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");ee("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");ee("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");ee("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");ee("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");ee("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}");ee("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}");ee("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}");ee("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}");ee("\\nleqq","\\html@mathml{\\@nleqq}{≰}");ee("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}");ee("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}");ee("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}");ee("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}");ee("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}");ee("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}");ee("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}");ee("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}");ee("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}");ee("\\imath","\\html@mathml{\\@imath}{ı}");ee("\\jmath","\\html@mathml{\\@jmath}{ȷ}");ee("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}");ee("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}");ee("⟦","\\llbracket");ee("⟧","\\rrbracket");ee("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}");ee("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}");ee("⦃","\\lBrace");ee("⦄","\\rBrace");ee("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}");ee("⦵","\\minuso");ee("\\darr","\\downarrow");ee("\\dArr","\\Downarrow");ee("\\Darr","\\Downarrow");ee("\\lang","\\langle");ee("\\rang","\\rangle");ee("\\uarr","\\uparrow");ee("\\uArr","\\Uparrow");ee("\\Uarr","\\Uparrow");ee("\\N","\\mathbb{N}");ee("\\R","\\mathbb{R}");ee("\\Z","\\mathbb{Z}");ee("\\alef","\\aleph");ee("\\alefsym","\\aleph");ee("\\Alpha","\\mathrm{A}");ee("\\Beta","\\mathrm{B}");ee("\\bull","\\bullet");ee("\\Chi","\\mathrm{X}");ee("\\clubs","\\clubsuit");ee("\\cnums","\\mathbb{C}");ee("\\Complex","\\mathbb{C}");ee("\\Dagger","\\ddagger");ee("\\diamonds","\\diamondsuit");ee("\\empty","\\emptyset");ee("\\Epsilon","\\mathrm{E}");ee("\\Eta","\\mathrm{H}");ee("\\exist","\\exists");ee("\\harr","\\leftrightarrow");ee("\\hArr","\\Leftrightarrow");ee("\\Harr","\\Leftrightarrow");ee("\\hearts","\\heartsuit");ee("\\image","\\Im");ee("\\infin","\\infty");ee("\\Iota","\\mathrm{I}");ee("\\isin","\\in");ee("\\Kappa","\\mathrm{K}");ee("\\larr","\\leftarrow");ee("\\lArr","\\Leftarrow");ee("\\Larr","\\Leftarrow");ee("\\lrarr","\\leftrightarrow");ee("\\lrArr","\\Leftrightarrow");ee("\\Lrarr","\\Leftrightarrow");ee("\\Mu","\\mathrm{M}");ee("\\natnums","\\mathbb{N}");ee("\\Nu","\\mathrm{N}");ee("\\Omicron","\\mathrm{O}");ee("\\plusmn","\\pm");ee("\\rarr","\\rightarrow");ee("\\rArr","\\Rightarrow");ee("\\Rarr","\\Rightarrow");ee("\\real","\\Re");ee("\\reals","\\mathbb{R}");ee("\\Reals","\\mathbb{R}");ee("\\Rho","\\mathrm{P}");ee("\\sdot","\\cdot");ee("\\sect","\\S");ee("\\spades","\\spadesuit");ee("\\sub","\\subset");ee("\\sube","\\subseteq");ee("\\supe","\\supseteq");ee("\\Tau","\\mathrm{T}");ee("\\thetasym","\\vartheta");ee("\\weierp","\\wp");ee("\\Zeta","\\mathrm{Z}");ee("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");ee("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");ee("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");ee("\\bra","\\mathinner{\\langle{#1}|}");ee("\\ket","\\mathinner{|{#1}\\rangle}");ee("\\braket","\\mathinner{\\langle{#1}\\rangle}");ee("\\Bra","\\left\\langle#1\\right|");ee("\\Ket","\\left|#1\\right\\rangle");var i$=i=>e=>{var t=e.consumeArg().tokens,n=e.consumeArg().tokens,r=e.consumeArg().tokens,s=e.consumeArg().tokens,a=e.macros.get("|"),o=e.macros.get("\\|");e.macros.beginGroup();var l=h=>f=>{i&&(f.macros.set("|",a),r.length&&f.macros.set("\\|",o));var d=h;if(!h&&r.length){var g=f.future();g.text==="|"&&(f.popToken(),d=!0)}return{tokens:d?r:n,numArgs:0}};e.macros.set("|",l(!1)),r.length&&e.macros.set("\\|",l(!0));var c=e.consumeArg().tokens,u=e.expandTokens([...s,...c,...t]);return e.macros.endGroup(),{tokens:u.reverse(),numArgs:0}};ee("\\bra@ket",i$(!1));ee("\\bra@set",i$(!0));ee("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");ee("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");ee("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");ee("\\angln","{\\angl n}");ee("\\blue","\\textcolor{##6495ed}{#1}");ee("\\orange","\\textcolor{##ffa500}{#1}");ee("\\pink","\\textcolor{##ff00af}{#1}");ee("\\red","\\textcolor{##df0030}{#1}");ee("\\green","\\textcolor{##28ae7b}{#1}");ee("\\gray","\\textcolor{gray}{#1}");ee("\\purple","\\textcolor{##9d38bd}{#1}");ee("\\blueA","\\textcolor{##ccfaff}{#1}");ee("\\blueB","\\textcolor{##80f6ff}{#1}");ee("\\blueC","\\textcolor{##63d9ea}{#1}");ee("\\blueD","\\textcolor{##11accd}{#1}");ee("\\blueE","\\textcolor{##0c7f99}{#1}");ee("\\tealA","\\textcolor{##94fff5}{#1}");ee("\\tealB","\\textcolor{##26edd5}{#1}");ee("\\tealC","\\textcolor{##01d1c1}{#1}");ee("\\tealD","\\textcolor{##01a995}{#1}");ee("\\tealE","\\textcolor{##208170}{#1}");ee("\\greenA","\\textcolor{##b6ffb0}{#1}");ee("\\greenB","\\textcolor{##8af281}{#1}");ee("\\greenC","\\textcolor{##74cf70}{#1}");ee("\\greenD","\\textcolor{##1fab54}{#1}");ee("\\greenE","\\textcolor{##0d923f}{#1}");ee("\\goldA","\\textcolor{##ffd0a9}{#1}");ee("\\goldB","\\textcolor{##ffbb71}{#1}");ee("\\goldC","\\textcolor{##ff9c39}{#1}");ee("\\goldD","\\textcolor{##e07d10}{#1}");ee("\\goldE","\\textcolor{##a75a05}{#1}");ee("\\redA","\\textcolor{##fca9a9}{#1}");ee("\\redB","\\textcolor{##ff8482}{#1}");ee("\\redC","\\textcolor{##f9685d}{#1}");ee("\\redD","\\textcolor{##e84d39}{#1}");ee("\\redE","\\textcolor{##bc2612}{#1}");ee("\\maroonA","\\textcolor{##ffbde0}{#1}");ee("\\maroonB","\\textcolor{##ff92c6}{#1}");ee("\\maroonC","\\textcolor{##ed5fa6}{#1}");ee("\\maroonD","\\textcolor{##ca337c}{#1}");ee("\\maroonE","\\textcolor{##9e034e}{#1}");ee("\\purpleA","\\textcolor{##ddd7ff}{#1}");ee("\\purpleB","\\textcolor{##c6b9fc}{#1}");ee("\\purpleC","\\textcolor{##aa87ff}{#1}");ee("\\purpleD","\\textcolor{##7854ab}{#1}");ee("\\purpleE","\\textcolor{##543b78}{#1}");ee("\\mintA","\\textcolor{##f5f9e8}{#1}");ee("\\mintB","\\textcolor{##edf2df}{#1}");ee("\\mintC","\\textcolor{##e0e5cc}{#1}");ee("\\grayA","\\textcolor{##f6f7f7}{#1}");ee("\\grayB","\\textcolor{##f0f1f2}{#1}");ee("\\grayC","\\textcolor{##e3e5e6}{#1}");ee("\\grayD","\\textcolor{##d6d8da}{#1}");ee("\\grayE","\\textcolor{##babec2}{#1}");ee("\\grayF","\\textcolor{##888d93}{#1}");ee("\\grayG","\\textcolor{##626569}{#1}");ee("\\grayH","\\textcolor{##3b3e40}{#1}");ee("\\grayI","\\textcolor{##21242c}{#1}");ee("\\kaBlue","\\textcolor{##314453}{#1}");ee("\\kaGreen","\\textcolor{##71B307}{#1}");var r$={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class bft{constructor(e,t,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new _ft(Aft,t.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new s9(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,n,r;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;t=this.popToken(),{tokens:r,end:n}=this.consumeArg(["]"])}else({tokens:r,start:t,end:n}=this.consumeArg());return this.pushToken(new dh("EOF",n.loc)),this.pushTokens(r),t.range(n,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var t=[],n=e&&e.length>0;n||this.consumeSpaces();var r=this.future(),s,a=0,o=0;do{if(s=this.popToken(),t.push(s),s.text==="{")++a;else if(s.text==="}"){if(--a,a===-1)throw new Gt("Extra }",s)}else if(s.text==="EOF")throw new Gt("Unexpected end of input in a macro argument, expected '"+(e&&n?e[o]:"}")+"'",s);if(e&&n)if((a===0||a===1&&e[o]==="{")&&s.text===e[o]){if(++o,o===e.length){t.splice(-o,o);break}}else o=0}while(a!==0||n);return r.text==="{"&&t[t.length-1].text==="}"&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:r,end:s}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new Gt("The length of delimiters doesn't match the number of args!");for(var n=t[0],r=0;r<n.length;r++){var s=this.popToken();if(n[r]!==s.text)throw new Gt("Use of the macro doesn't match its definition",s)}}for(var a=[],o=0;o<e;o++)a.push(this.consumeArg(t&&t[o+1]).tokens);return a}expandOnce(e){var t=this.popToken(),n=t.text,r=t.noexpand?null:this._getExpansion(n);if(r==null||e&&r.unexpandable){if(e&&r==null&&n[0]==="\\"&&!this.isDefined(n))throw new Gt("Undefined control sequence: "+n);return this.pushToken(t),!1}if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new Gt("Too many expansions: infinite loop or need to increase maxExpand setting");var s=r.tokens,a=this.consumeArgs(r.numArgs,r.delimiters);if(r.numArgs){s=s.slice();for(var o=s.length-1;o>=0;--o){var l=s[o];if(l.text==="#"){if(o===0)throw new Gt("Incomplete placeholder at end of macro body",l);if(l=s[--o],l.text==="#")s.splice(o+1,1);else if(/^[1-9]$/.test(l.text))s.splice(o,2,...a[+l.text-1]);else throw new Gt("Not a valid argument number",l)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new dh(e)]):void 0}expandTokens(e){var t=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var r=this.stack.pop();r.treatAsRelax&&(r.noexpand=!1,r.treatAsRelax=!1),t.push(r)}return t}expandMacroAsText(e){var t=this.expandMacro(e);return t&&t.map(n=>n.text).join("")}_getExpansion(e){var t=this.macros.get(e);if(t==null)return t;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var r=typeof t=="function"?t(this):t;if(typeof r=="string"){var s=0;if(r.indexOf("#")!==-1)for(var a=r.replace(/##/g,"");a.indexOf("#"+(s+1))!==-1;)++s;for(var o=new s9(r,this.settings),l=[],c=o.lex();c.text!=="EOF";)l.push(c),c=o.lex();l.reverse();var u={tokens:l,numArgs:s};return u}return r}isDefined(e){return this.macros.has(e)||Pd.hasOwnProperty(e)||zr.math.hasOwnProperty(e)||zr.text.hasOwnProperty(e)||r$.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return t!=null?typeof t=="string"||typeof t=="function"||!t.unexpandable:Pd.hasOwnProperty(e)&&!Pd[e].primitive}}var l9=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,Pw=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g",ʰ:"h","ⁱ":"i",ʲ:"j","ᵏ":"k",ˡ:"l","ᵐ":"m",ⁿ:"n","ᵒ":"o","ᵖ":"p",ʳ:"r",ˢ:"s","ᵗ":"t","ᵘ":"u","ᵛ":"v",ʷ:"w",ˣ:"x",ʸ:"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),b3={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},c9={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"};class $1{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new bft(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(t===void 0&&(t=!0),this.fetch().text!==e)throw new Gt("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new dh("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,n}parseExpression(e,t){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var r=this.fetch();if($1.endOfExpression.indexOf(r.text)!==-1||t&&r.text===t||e&&Pd[r.text]&&Pd[r.text].infix)break;var s=this.parseAtom(t);if(s){if(s.type==="internal")continue}else break;n.push(s)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var t=-1,n,r=0;r<e.length;r++)if(e[r].type==="infix"){if(t!==-1)throw new Gt("only one infix operator per group",e[r].token);t=r,n=e[r].replaceWith}if(t!==-1&&n){var s,a,o=e.slice(0,t),l=e.slice(t+1);o.length===1&&o[0].type==="ordgroup"?s=o[0]:s={type:"ordgroup",mode:this.mode,body:o},l.length===1&&l[0].type==="ordgroup"?a=l[0]:a={type:"ordgroup",mode:this.mode,body:l};var c;return n==="\\\\abovefrac"?c=this.callFunction(n,[s,e[t],a],[]):c=this.callFunction(n,[s,a],[]),[c]}else return e}handleSupSubscript(e){var t=this.fetch(),n=t.text;this.consume(),this.consumeSpaces();var r=this.parseGroup(e);if(!r)throw new Gt("Expected group after '"+n+"'",t);return r}formatUnsupportedCmd(e){for(var t=[],n=0;n<e.length;n++)t.push({type:"textord",mode:"text",text:e[n]});var r={type:"text",mode:this.mode,body:t},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[r]};return s}parseAtom(e){var t=this.parseGroup("atom",e);if(this.mode==="text")return t;for(var n,r;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(t&&t.type==="op"){var a=s.text==="\\limits";t.limits=a,t.alwaysHandleSupSub=!0}else if(t&&t.type==="operatorname")t.alwaysHandleSupSub&&(t.limits=s.text==="\\limits");else throw new Gt("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(n)throw new Gt("Double superscript",s);n=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(r)throw new Gt("Double subscript",s);r=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(n)throw new Gt("Double superscript",s);var o={type:"textord",mode:this.mode,text:"\\prime"},l=[o];for(this.consume();this.fetch().text==="'";)l.push(o),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:l}}else if(Pw[s.text]){var c=Pw[s.text],u=l9.test(s.text);for(this.consume();;){var h=this.fetch().text;if(!Pw[h]||l9.test(h)!==u)break;this.consume(),c+=Pw[h]}var f=new $1(c,this.settings).parse();u?r={type:"ordgroup",mode:"math",body:f}:n={type:"ordgroup",mode:"math",body:f}}else break}return n||r?{type:"supsub",mode:this.mode,base:t,sup:n,sub:r}:t}parseFunction(e,t){var n=this.fetch(),r=n.text,s=Pd[r];if(!s)return null;if(this.consume(),t&&t!=="atom"&&!s.allowedInArgument)throw new Gt("Got function '"+r+"' with no arguments"+(t?" as "+t:""),n);if(this.mode==="text"&&!s.allowedInText)throw new Gt("Can't use function '"+r+"' in text mode",n);if(this.mode==="math"&&s.allowedInMath===!1)throw new Gt("Can't use function '"+r+"' in math mode",n);var{args:a,optArgs:o}=this.parseArguments(r,s);return this.callFunction(r,a,o,n,e)}callFunction(e,t,n,r,s){var a={funcName:e,parser:this,token:r,breakOnTokenText:s},o=Pd[e];if(o&&o.handler)return o.handler(a,t,n);throw new Gt("No function handler for "+e)}parseArguments(e,t){var n=t.numArgs+t.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var r=[],s=[],a=0;a<n;a++){var o=t.argTypes&&t.argTypes[a],l=a<t.numOptionalArgs;(t.primitive&&o==null||t.type==="sqrt"&&a===1&&s[0]==null)&&(o="primitive");var c=this.parseGroupOfType("argument to '"+e+"'",o,l);if(l)s.push(c);else if(c!=null)r.push(c);else throw new Gt("Null argument, please report this as a bug")}return{args:r,optArgs:s}}parseGroupOfType(e,t,n){switch(t){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,t);case"hbox":{var r=this.parseArgumentGroup(n,"text");return r!=null?{type:"styling",mode:r.mode,body:[r],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",n);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(n)throw new Gt("A primitive argument cannot be optional");var a=this.parseGroup(e);if(a==null)throw new Gt("Expected group as "+e,this.fetch());return a}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new Gt("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,t){var n=this.gullet.scanArgument(t);if(n==null)return null;for(var r="",s;(s=this.fetch()).text!=="EOF";)r+=s.text,this.consume();return this.consume(),n.text=r,n}parseRegexGroup(e,t){for(var n=this.fetch(),r=n,s="",a;(a=this.fetch()).text!=="EOF"&&e.test(s+a.text);)r=a,s+=r.text,this.consume();if(s==="")throw new Gt("Invalid "+t+": '"+n.text+"'",n);return n.range(r,s)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(t==null)return null;var n=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!n)throw new Gt("Invalid color: '"+t.text+"'",t);var r=n[0];return/^[0-9a-f]{6}$/i.test(r)&&(r="#"+r),{type:"color-token",mode:this.mode,color:r}}parseSizeGroup(e){var t,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?t=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):t=this.parseStringGroup("size",e),!t)return null;!e&&t.text.length===0&&(t.text="0pt",n=!0);var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!r)throw new Gt("Invalid size: '"+t.text+"'",t);var s={number:+(r[1]+r[2]),unit:r[3]};if(!pH(s))throw new Gt("Invalid unit: '"+s.unit+"'",t);return{type:"size",mode:this.mode,value:s,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),t==null)return null;var n=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,t){var n=this.gullet.scanArgument(e);if(n==null)return null;var r=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var a={type:"ordgroup",mode:this.mode,loc:n.loc,body:s};return t&&this.switchMode(r),a}parseGroup(e,t){var n=this.fetch(),r=n.text,s;if(r==="{"||r==="\\begingroup"){this.consume();var a=r==="{"?"}":"\\endgroup";this.gullet.beginGroup();var o=this.parseExpression(!1,a),l=this.fetch();this.expect(a),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:$l.range(n,l),body:o,semisimple:r==="\\begingroup"||void 0}}else if(s=this.parseFunction(t,e)||this.parseSymbol(),s==null&&r[0]==="\\"&&!r$.hasOwnProperty(r)){if(this.settings.throwOnError)throw new Gt("Undefined control sequence: "+r,n);s=this.formatUnsupportedCmd(r),this.consume()}return s}formLigatures(e){for(var t=e.length-1,n=0;n<t;++n){var r=e[n],s=r.text;s==="-"&&e[n+1].text==="-"&&(n+1<t&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:$l.range(r,e[n+2]),text:"---"}),t-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:$l.range(r,e[n+1]),text:"--"}),t-=1)),(s==="'"||s==="`")&&e[n+1].text===s&&(e.splice(n,2,{type:"textord",mode:"text",loc:$l.range(r,e[n+1]),text:s+s}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var n=t.slice(5),r=n.charAt(0)==="*";if(r&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new Gt(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:r}}c9.hasOwnProperty(t[0])&&!zr[this.mode][t[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=c9[t[0]]+t.slice(1));var s=gft.exec(t);s&&(t=t.substring(0,s.index),t==="i"?t="ı":t==="j"&&(t="ȷ"));var a;if(zr[this.mode][t]){this.settings.strict&&this.mode==="math"&&uT.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var o=zr[this.mode][t].group,l=$l.range(e),c;if(lht.hasOwnProperty(o)){var u=o;c={type:"atom",mode:this.mode,family:u,loc:l,text:t}}else c={type:o,mode:this.mode,loc:l,text:t};a=c}else if(t.charCodeAt(0)>=128)this.settings.strict&&(dH(t.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'"'+(" ("+t.charCodeAt(0)+")"),e)),a={type:"textord",mode:"text",loc:$l.range(e),text:t};else return null;if(this.consume(),s)for(var h=0;h<s[0].length;h++){var f=s[0][h];if(!b3[f])throw new Gt("Unknown accent ' "+f+"'",e);var d=b3[f][this.mode]||b3[f].text;if(!d)throw new Gt("Accent "+f+" unsupported in "+this.mode+" mode",e);a={type:"accent",mode:this.mode,loc:$l.range(e),label:d,isStretchy:!1,isShifty:!0,base:a}}return a}}$1.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var PP=function(e,t){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new $1(e,t);delete n.gullet.macros.current["\\df@tag"];var r=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new Gt("\\tag works only in display equations");r=[{type:"tag",mode:"text",body:r,tag:n.subparse([new dh("\\df@tag")])}]}return r},s$=function(e,t,n){t.textContent="";var r=kP(e,n).toNode();t.appendChild(r)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),s$=function(){throw new Gt("KaTeX doesn't work in quirks mode.")});var yft=function(e,t){var n=kP(e,t).toMarkup();return n},wft=function(e,t){var n=new fP(t);return PP(e,n)},a$=function(e,t,n){if(n.throwOnError||!(e instanceof Gt))throw e;var r=rt.makeSpan(["katex-error"],[new Fc(t)]);return r.setAttribute("title",e.toString()),r.setAttribute("style","color:"+n.errorColor),r},kP=function(e,t){var n=new fP(t);try{var r=PP(e,n);return kht(r,e,n)}catch(s){return a$(s,e,n)}},xft=function(e,t){var n=new fP(t);try{var r=PP(e,n);return Bht(r,e,n)}catch(s){return a$(s,e,n)}},G1={version:"0.16.8",render:s$,renderToString:yft,ParseError:Gt,SETTINGS_SCHEMA:ix,__parse:wft,__renderToDomTree:kP,__renderToHTMLTree:xft,__setFontMetrics:tht,__defineSymbol:R,__defineFunction:rn,__defineMacro:ee,__domTree:{Span:yb,Anchor:mP,SymbolNode:Fc,SvgNode:If,PathNode:ep,LineNode:cT}};function u1(i){return i.toFixed(1).replace(/[.,]0$/,"")}function Cft(i){let e,t,n;return{c(){e=ht("span"),t=new UT(!1),this.h()},l(r){e=ft(r,"SPAN",{class:!0});var s=Pt(e);t=VT(s,!1),s.forEach(Z),this.h()},h(){t.a=null,it(e,"class",n=(i[1]?"text-xl":"text-2xl")+" bg-base-300/50 inline-block"),oa(e,"opacity",i[0])},m(r,s){Pe(r,e,s),t.m(i[4],e),i[13](e)},p(r,s){s&16&&t.p(r[4]),s&2&&n!==(n=(r[1]?"text-xl":"text-2xl")+" bg-base-300/50 inline-block")&&it(e,"class",n),s&1&&oa(e,"opacity",r[0])},d(r){r&&Z(e),i[13](null)}}}function Eft(i){let e,t;return e=new dV({props:{position:i[3],center:!0,$$slots:{default:[Cft]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},p(n,[r]){const s={};r&8&&(s.position=n[3]),r&131095&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function Sft(i,e,t){let n,r,s,a,o,l,c,u,h,{coords:f}=e,{opacity:d}=e,{dim3:g=!1}=e,v,A,_,y;Au(()=>{t(2,y.parentElement.style.pointerEvents="none",y)});function x(C){Wa[C?"unshift":"push"](()=>{y=C,t(2,y)})}return i.$$set=C=>{"coords"in C&&t(5,f=C.coords),"opacity"in C&&t(0,d=C.opacity),"dim3"in C&&t(1,g=C.dim3)},i.$$.update=()=>{if(i.$$.dirty&32&&t(11,[n,r,s,a,o,l]=f,a,(t(10,o),t(5,f)),(t(9,l),t(5,f))),i.$$.dirty&3072&&t(12,c=Math.atan2(o,a)),i.$$.dirty&7682)if(g){const S=Math.sqrt(a*a+o*o+l*l),I=Math.acos(l/S);t(6,v=.4*Math.sin(I)*Math.cos(c)),t(7,A=.4*Math.sin(I)*Math.sin(c)),t(8,_=.4*Math.cos(I))}else t(6,v=.6*Math.cos(c)),t(7,A=.6*Math.sin(c)),t(8,_=0);i.$$.dirty&3586&&t(4,u=G1.renderToString(String.raw`\left[\begin{array}{r}
  ${u1(a)} \\
  ${u1(o)} \\
  ${g?`${u1(l)}`:""}
  \end{array}\right]`)),i.$$.dirty&4032&&t(3,h=[a+v,o+A,l+_])},[d,g,y,h,u,f,v,A,_,l,o,a,c,x]}class Mft extends ln{constructor(e){super(),cn(this,e,Sft,Eft,an,{coords:5,opacity:0,dim3:1})}}function y3(i){const e=i.slice(),t=e[5]?[e[11]/2,e[10]/2,e[9]/2]:[e[11]/2+e[6],e[10]/2+e[7],e[9]/2];return e[23]=t,e}function u9(i){let e,t,n,r;e=new Mft({props:{coords:i[0],opacity:i[2],dim3:i[5]}});let s=i[3]&&h9(y3(i));return{c(){Oe(e.$$.fragment),t=_t(),s&&s.c(),n=ua()},l(a){ze(e.$$.fragment,a),t=At(a),s&&s.l(a),n=ua()},m(a,o){Ne(e,a,o),Pe(a,t,o),s&&s.m(a,o),Pe(a,n,o),r=!0},p(a,o){const l={};o&1&&(l.coords=a[0]),o&4&&(l.opacity=a[2]),o&32&&(l.dim3=a[5]),e.$set(l),a[3]?s?(s.p(y3(a),o),o&8&&oe(s,1)):(s=h9(y3(a)),s.c(),oe(s,1),s.m(n.parentNode,n)):s&&(Rs(),pe(s,1,1,()=>{s=null}),Ds())},i(a){r||(oe(e.$$.fragment,a),oe(s),r=!0)},o(a){pe(e.$$.fragment,a),pe(s),r=!1},d(a){a&&(Z(t),Z(n)),Fe(e,a),s&&s.d(a)}}}function h9(i){let e,t;return e=new dV({props:{position:i[23],center:!0,$$slots:{default:[Tft]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},p(n,r){const s={};r&3808&&(s.position=n[23]),r&16777496&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function Tft(i){let e,t,n=G1.renderToString(String.raw`\times ${u1(i[3])}`)+"";return{c(){e=ht("span"),t=new UT(!1),this.h()},l(r){e=ft(r,"SPAN",{class:!0});var s=Pt(e);t=VT(s,!1),s.forEach(Z),this.h()},h(){t.a=null,it(e,"class","text-xl whitespace-nowrap"),oa(e,"opacity",i[4])},m(r,s){Pe(r,e,s),t.m(n,e),i[16](e)},p(r,s){s&8&&n!==(n=G1.renderToString(String.raw`\times ${u1(r[3])}`)+"")&&t.p(n),s&16&&oa(e,"opacity",r[4])},d(r){r&&Z(e),i[16](null)}}}function Ift(i){let e,t,n=i[1]&&u9(i);return{c(){n&&n.c(),e=ua()},l(r){n&&n.l(r),e=ua()},m(r,s){n&&n.m(r,s),Pe(r,e,s),t=!0},p(r,[s]){r[1]?n?(n.p(r,s),s&2&&oe(n,1)):(n=u9(r),n.c(),oe(n,1),n.m(e.parentNode,e)):n&&(Rs(),pe(n,1,1,()=>{n=null}),Ds())},i(r){t||(oe(n),t=!0)},o(r){pe(n),t=!1},d(r){r&&Z(e),n&&n.d(r)}}}const kw=.4;function Pft(i,e,t){let n,r,s,a,o,l,{view:c}=e,{coords:u=[0,0,0,-1,2,0]}=e,{color:h="white"}=e,{tex:f=!0}=e,{texOpacity:d=1}=e,{scalar:g=!1}=e,{scalarOpacity:v=1}=e,{scalarAlign:A="center"}=e,{visible:_=!0}=e,{dim3:y=!1}=e;const x={end:!0,width:3,zBias:1e3,zIndex:3,width:3,color:h,visible:_},C=c.array({data:u,width:2,items:2,channels:3}),S=c.vector({...x});let I,P,B;Au(()=>{B&&t(8,B.parentElement.style.pointerEvents="none",B)});function M(D){Wa[D?"unshift":"push"](()=>{B=D,t(8,B)})}return i.$$set=D=>{"view"in D&&t(12,c=D.view),"coords"in D&&t(0,u=D.coords),"color"in D&&t(13,h=D.color),"tex"in D&&t(1,f=D.tex),"texOpacity"in D&&t(2,d=D.texOpacity),"scalar"in D&&t(3,g=D.scalar),"scalarOpacity"in D&&t(4,v=D.scalarOpacity),"scalarAlign"in D&&t(14,A=D.scalarAlign),"visible"in D&&t(15,_=D.visible),"dim3"in D&&t(5,y=D.dim3)},i.$$.update=()=>{i.$$.dirty&1&&t(11,[n,r,s,a,o,l]=u,a,(t(10,o),t(0,u)),(t(9,l),t(0,u))),i.$$.dirty&1&&C.set("data",u),i.$$.dirty&32768&&S.set("visible",_),i.$$.dirty&16384&&(A=="center"?(t(6,I=0),t(7,P=0)):A=="left"?(t(6,I=kw*1.5),t(7,P=0)):A=="top"?(t(6,I=0),t(7,P=-kw)):A=="right"?(t(6,I=-kw),t(7,P=0)):A=="bottom"&&(t(6,I=0),t(7,P=kw)))},[u,f,d,g,v,y,I,P,B,l,o,a,c,h,A,_,M]}class vd extends ln{constructor(e){super(),cn(this,e,Pft,Ift,an,{view:12,coords:0,color:13,tex:1,texOpacity:2,scalar:3,scalarOpacity:4,scalarAlign:14,visible:15,dim3:5})}}var gT={exports:{}};(function(i,e){(function(t,n){n(e)})(bt,function(t){function n(je,Y){for(var Ee=0;Ee<Y.length;Ee++){var se=Y[Ee];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(je,se.key,se)}}function r(je,Y,Ee){return Y&&n(je.prototype,Y),Ee&&n(je,Ee),je}/*!
 * Observer 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var s,a,o,l,c,u,h,f,d,g,v,A,_,y=function(){return s||typeof window<"u"&&(s=window.gsap)&&s.registerPlugin&&s},x=1,C=[],S=[],I=[],P=Date.now,B=function(Y,Ee){return Ee},M=function(){var Y=d.core,Ee=Y.bridge||{},se=Y._scrollers,ae=Y._proxies;se.push.apply(se,S),ae.push.apply(ae,I),S=se,I=ae,B=function(gt,st){return Ee[gt](st)}},D=function(Y,Ee){return~I.indexOf(Y)&&I[I.indexOf(Y)+1][Ee]},F=function(Y){return!!~g.indexOf(Y)},z=function(Y,Ee,se,ae,He){return Y.addEventListener(Ee,se,{passive:!ae,capture:!!He})},U=function(Y,Ee,se,ae){return Y.removeEventListener(Ee,se,!!ae)},$="scrollLeft",O="scrollTop",ie=function(){return v&&v.isPressed||S.cache++},W=function(Y,Ee){var se=function ae(He){if(He||He===0){x&&(o.history.scrollRestoration="manual");var gt=v&&v.isPressed;He=ae.v=Math.round(He)||(v&&v.iOS?1:0),Y(He),ae.cacheID=S.cache,gt&&B("ss",He)}else(Ee||S.cache!==ae.cacheID||B("ref"))&&(ae.cacheID=S.cache,ae.v=Y());return ae.v+ae.offset};return se.offset=0,Y&&se},J={s:$,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:W(function(je){return arguments.length?o.scrollTo(je,Ce.sc()):o.pageXOffset||l[$]||c[$]||u[$]||0})},Ce={s:O,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:J,sc:W(function(je){return arguments.length?o.scrollTo(J.sc(),je):o.pageYOffset||l[O]||c[O]||u[O]||0})},Me=function(Y,Ee){return(Ee&&Ee._ctx&&Ee._ctx.selector||s.utils.toArray)(Y)[0]||(typeof Y=="string"&&s.config().nullTargetWarn!==!1?console.warn("Element not found:",Y):null)},ge=function(Y,Ee){var se=Ee.s,ae=Ee.sc;F(Y)&&(Y=l.scrollingElement||c);var He=S.indexOf(Y),gt=ae===Ce.sc?1:2;!~He&&(He=S.push(Y)-1),S[He+gt]||z(Y,"scroll",ie);var st=S[He+gt],Kt=st||(S[He+gt]=W(D(Y,se),!0)||(F(Y)?ae:W(function(On){return arguments.length?Y[se]=On:Y[se]})));return Kt.target=Y,st||(Kt.smooth=s.getProperty(Y,"scrollBehavior")==="smooth"),Kt},ve=function(Y,Ee,se){var ae=Y,He=Y,gt=P(),st=gt,Kt=Ee||50,On=Math.max(500,Kt*3),li=function(An,Bi){var ar=P();Bi||ar-gt>Kt?(He=ae,ae=An,st=gt,gt=ar):se?ae+=An:ae=He+(An-He)/(ar-st)*(gt-st)},dn=function(){He=ae=se?0:ae,st=gt=0},pn=function(An){var Bi=st,ar=He,vr=P();return(An||An===0)&&An!==ae&&li(An),gt===st||vr-st>On?0:(ae+(se?ar:-ar))/((se?vr:gt)-Bi)*1e3};return{update:li,reset:dn,getVelocity:pn}},nt=function(Y,Ee){return Ee&&!Y._gsapAllow&&Y.preventDefault(),Y.changedTouches?Y.changedTouches[0]:Y},$e=function(Y){var Ee=Math.max.apply(Math,Y),se=Math.min.apply(Math,Y);return Math.abs(Ee)>=Math.abs(se)?Ee:se},X=function(){d=s.core.globals().ScrollTrigger,d&&d.core&&M()},Be=function(Y){return s=Y||y(),s&&typeof document<"u"&&document.body&&(o=window,l=document,c=l.documentElement,u=l.body,g=[o,l,c,u],s.utils.clamp,_=s.core.context||function(){},f="onpointerenter"in u?"pointer":"mouse",h=mt.isTouch=o.matchMedia&&o.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in o||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,A=mt.eventTypes=("ontouchstart"in c?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in c?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return x=0},500),X(),a=1),a};J.op=Ce,S.cache=0;var mt=function(){function je(Ee){this.init(Ee)}var Y=je.prototype;return Y.init=function(se){a||Be(s)||console.warn("Please gsap.registerPlugin(Observer)"),d||X();var ae=se.tolerance,He=se.dragMinimum,gt=se.type,st=se.target,Kt=se.lineHeight,On=se.debounce,li=se.preventDefault,dn=se.onStop,pn=se.onStopDelay,xt=se.ignore,An=se.wheelSpeed,Bi=se.event,ar=se.onDragStart,vr=se.onDragEnd,_r=se.onDrag,ys=se.onPress,bn=se.onRelease,Ys=se.onRight,nr=se.onLeft,Rn=se.onUp,Kr=se.onDown,zs=se.onChangeX,yn=se.onChangeY,wr=se.onChange,Vn=se.onToggleX,wo=se.onToggleY,xr=se.onHover,ws=se.onHoverEnd,Jr=se.onMove,Si=se.ignoreCheck,Cr=se.isNormalizer,or=se.onGestureStart,et=se.onGestureEnd,ls=se.onWheel,qc=se.onEnable,Ba=se.onDisable,Us=se.onClick,cs=se.scrollSpeed,Xs=se.capture,Zr=se.allowClicks,Ks=se.lockAxis,Js=se.onLockAxis;this.target=st=Me(st)||c,this.vars=se,xt&&(xt=s.utils.toArray(xt)),ae=ae||1e-9,He=He||0,An=An||1,cs=cs||1,gt=gt||"wheel,touch,pointer",On=On!==!1,Kt||(Kt=parseFloat(o.getComputedStyle(u).lineHeight)||22);var hc,es,Zs,Te,ut,at,Wt,qe=this,Yn=0,Gi=0,nn=ge(st,J),Xi=ge(st,Ce),jc=nn(),xs=Xi(),$o=~gt.indexOf("touch")&&!~gt.indexOf("pointer")&&A[0]==="pointerdown",Tr=F(st),Ri=st.ownerDocument||l,Ra=[0,0,0],Ar=[0,0,0],xi=0,Go=function(){return xi=P()},eo=function(Cn,Ii){return(qe.event=Cn)&&xt&&~xt.indexOf(Cn.target)||Ii&&$o&&Cn.pointerType!=="touch"||Si&&Si(Cn,Ii)},Cs=function(){qe._vx.reset(),qe._vy.reset(),es.pause(),dn&&dn(qe)},fc=function(){var Cn=qe.deltaX=$e(Ra),Ii=qe.deltaY=$e(Ar),Ir=Math.abs(Cn)>=ae,sn=Math.abs(Ii)>=ae;wr&&(Ir||sn)&&wr(qe,Cn,Ii,Ra,Ar),Ir&&(Ys&&qe.deltaX>0&&Ys(qe),nr&&qe.deltaX<0&&nr(qe),zs&&zs(qe),Vn&&qe.deltaX<0!=Yn<0&&Vn(qe),Yn=qe.deltaX,Ra[0]=Ra[1]=Ra[2]=0),sn&&(Kr&&qe.deltaY>0&&Kr(qe),Rn&&qe.deltaY<0&&Rn(qe),yn&&yn(qe),wo&&qe.deltaY<0!=Gi<0&&wo(qe),Gi=qe.deltaY,Ar[0]=Ar[1]=Ar[2]=0),(Te||Zs)&&(Jr&&Jr(qe),Zs&&(_r(qe),Zs=!1),Te=!1),at&&!(at=!1)&&Js&&Js(qe),ut&&(ls(qe),ut=!1),hc=0},Wc=function(Cn,Ii,Ir){Ra[Ir]+=Cn,Ar[Ir]+=Ii,qe._vx.update(Cn),qe._vy.update(Ii),On?hc||(hc=requestAnimationFrame(fc)):fc()},Yc=function(Cn,Ii){Ks&&!Wt&&(qe.axis=Wt=Math.abs(Cn)>Math.abs(Ii)?"x":"y",at=!0),Wt!=="y"&&(Ra[2]+=Cn,qe._vx.update(Cn,!0)),Wt!=="x"&&(Ar[2]+=Ii,qe._vy.update(Ii,!0)),On?hc||(hc=requestAnimationFrame(fc)):fc()},xo=function(Cn){if(!eo(Cn,1)){Cn=nt(Cn,li);var Ii=Cn.clientX,Ir=Cn.clientY,sn=Ii-qe.x,ci=Ir-qe.y,En=qe.isDragging;qe.x=Ii,qe.y=Ir,(En||Math.abs(qe.startX-Ii)>=He||Math.abs(qe.startY-Ir)>=He)&&(_r&&(Zs=!0),En||(qe.isDragging=!0),Yc(sn,ci),En||ar&&ar(qe))}},ea=qe.onPress=function(qn){eo(qn,1)||qn&&qn.button||(qe.axis=Wt=null,es.pause(),qe.isPressed=!0,qn=nt(qn),Yn=Gi=0,qe.startX=qe.x=qn.clientX,qe.startY=qe.y=qn.clientY,qe._vx.reset(),qe._vy.reset(),z(Cr?st:Ri,A[1],xo,li,!0),qe.deltaX=qe.deltaY=0,ys&&ys(qe))},to=qe.onRelease=function(qn){if(!eo(qn,1)){U(Cr?st:Ri,A[1],xo,!0);var Cn=!isNaN(qe.y-qe.startY),Ii=qe.isDragging&&(Math.abs(qe.x-qe.startX)>3||Math.abs(qe.y-qe.startY)>3),Ir=nt(qn);!Ii&&Cn&&(qe._vx.reset(),qe._vy.reset(),li&&Zr&&s.delayedCall(.08,function(){if(P()-xi>300&&!qn.defaultPrevented){if(qn.target.click)qn.target.click();else if(Ri.createEvent){var sn=Ri.createEvent("MouseEvents");sn.initMouseEvent("click",!0,!0,o,1,Ir.screenX,Ir.screenY,Ir.clientX,Ir.clientY,!1,!1,!1,!1,0,null),qn.target.dispatchEvent(sn)}}})),qe.isDragging=qe.isGesturing=qe.isPressed=!1,dn&&!Cr&&es.restart(!0),vr&&Ii&&vr(qe),bn&&bn(qe,Ii)}},Ci=function(Cn){return Cn.touches&&Cn.touches.length>1&&(qe.isGesturing=!0)&&or(Cn,qe.isDragging)},Qo=function(){return(qe.isGesturing=!1)||et(qe)},Ga=function(Cn){if(!eo(Cn)){var Ii=nn(),Ir=Xi();Wc((Ii-jc)*cs,(Ir-xs)*cs,1),jc=Ii,xs=Ir,dn&&es.restart(!0)}},no=function(Cn){if(!eo(Cn)){Cn=nt(Cn,li),ls&&(ut=!0);var Ii=(Cn.deltaMode===1?Kt:Cn.deltaMode===2?o.innerHeight:1)*An;Wc(Cn.deltaX*Ii,Cn.deltaY*Ii,0),dn&&!Cr&&es.restart(!0)}},va=function(Cn){if(!eo(Cn)){var Ii=Cn.clientX,Ir=Cn.clientY,sn=Ii-qe.x,ci=Ir-qe.y;qe.x=Ii,qe.y=Ir,Te=!0,(sn||ci)&&Yc(sn,ci)}},kl=function(Cn){qe.event=Cn,xr(qe)},Co=function(Cn){qe.event=Cn,ws(qe)},ta=function(Cn){return eo(Cn)||nt(Cn,li)&&Us(qe)};es=qe._dc=s.delayedCall(pn||.25,Cs).pause(),qe.deltaX=qe.deltaY=0,qe._vx=ve(0,50,!0),qe._vy=ve(0,50,!0),qe.scrollX=nn,qe.scrollY=Xi,qe.isDragging=qe.isGesturing=qe.isPressed=!1,_(this),qe.enable=function(qn){return qe.isEnabled||(z(Tr?Ri:st,"scroll",ie),gt.indexOf("scroll")>=0&&z(Tr?Ri:st,"scroll",Ga,li,Xs),gt.indexOf("wheel")>=0&&z(st,"wheel",no,li,Xs),(gt.indexOf("touch")>=0&&h||gt.indexOf("pointer")>=0)&&(z(st,A[0],ea,li,Xs),z(Ri,A[2],to),z(Ri,A[3],to),Zr&&z(st,"click",Go,!1,!0),Us&&z(st,"click",ta),or&&z(Ri,"gesturestart",Ci),et&&z(Ri,"gestureend",Qo),xr&&z(st,f+"enter",kl),ws&&z(st,f+"leave",Co),Jr&&z(st,f+"move",va)),qe.isEnabled=!0,qn&&qn.type&&ea(qn),qc&&qc(qe)),qe},qe.disable=function(){qe.isEnabled&&(C.filter(function(qn){return qn!==qe&&F(qn.target)}).length||U(Tr?Ri:st,"scroll",ie),qe.isPressed&&(qe._vx.reset(),qe._vy.reset(),U(Cr?st:Ri,A[1],xo,!0)),U(Tr?Ri:st,"scroll",Ga,Xs),U(st,"wheel",no,Xs),U(st,A[0],ea,Xs),U(Ri,A[2],to),U(Ri,A[3],to),U(st,"click",Go,!0),U(st,"click",ta),U(Ri,"gesturestart",Ci),U(Ri,"gestureend",Qo),U(st,f+"enter",kl),U(st,f+"leave",Co),U(st,f+"move",va),qe.isEnabled=qe.isPressed=qe.isDragging=!1,Ba&&Ba(qe))},qe.kill=qe.revert=function(){qe.disable();var qn=C.indexOf(qe);qn>=0&&C.splice(qn,1),v===qe&&(v=0)},C.push(qe),Cr&&F(st)&&(v=qe),qe.enable(Bi)},r(je,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),je}();mt.version="3.12.2",mt.create=function(je){return new mt(je)},mt.register=Be,mt.getAll=function(){return C.slice()},mt.getById=function(je){return C.filter(function(Y){return Y.vars.id===je})[0]},y()&&s.registerPlugin(mt);/*!
 * ScrollTrigger 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ue,Tt,yt,Ye,lt,ue,dt,le,he,xe,pt,Ze,me,te,Se,j,q,Ve,ct,ne,Je,Lt,we,Ie,de,Xe,Nt,Qt,Ft,jt,St,Re,Rt=1,tt=Date.now,Ut=tt(),$t=0,Le=0,wn=function(Y,Ee,se){var ae=Ns(Y)&&(Y.substr(0,6)==="clamp("||Y.indexOf("max")>-1);return se["_"+Ee+"Clamp"]=ae,ae?Y.substr(6,Y.length-7):Y},fi=function(Y,Ee){return Ee&&(!Ns(Y)||Y.substr(0,6)!=="clamp(")?"clamp("+Y+")":Y},Vr=function je(){return Le&&requestAnimationFrame(je)},oi=function(){return te=1},As=function(){return te=0},er=function(Y){return Y},pa=function(Y){return Math.round(Y*1e5)/1e5||0},El=function(){return typeof window<"u"},rc=function(){return Ue||El()&&(Ue=window.gsap)&&Ue.registerPlugin&&Ue},Ka=function(Y){return!!~dt.indexOf(Y)},Sl=function(Y){return(Y==="Height"?St:yt["inner"+Y])||lt["client"+Y]||ue["client"+Y]},Hc=function(Y){return D(Y,"getBoundingClientRect")||(Ka(Y)?function(){return ga.width=yt.innerWidth,ga.height=St,ga}:function(){return fr(Y)})},Su=function(Y,Ee,se){var ae=se.d,He=se.d2,gt=se.a;return(gt=D(Y,"getBoundingClientRect"))?function(){return gt()[ae]}:function(){return(Ee?Sl(He):Y["client"+He])||0}},Hf=function(Y,Ee){return!Ee||~I.indexOf(Y)?Hc(Y):function(){return ga}},Ao=function(Y,Ee){var se=Ee.s,ae=Ee.d2,He=Ee.d,gt=Ee.a;return Math.max(0,(se="scroll"+ae)&&(gt=D(Y,se))?gt()-Hc(Y)()[He]:Ka(Y)?(lt[se]||ue[se])-Sl(ae):Y[se]-Y["offset"+ae])},Mu=function(Y,Ee){for(var se=0;se<ct.length;se+=3)(!Ee||~Ee.indexOf(ct[se+1]))&&Y(ct[se],ct[se+1],ct[se+2])},Ns=function(Y){return typeof Y=="string"},ce=function(Y){return typeof Y=="function"},ot=function(Y){return typeof Y=="number"},vt=function(Y){return typeof Y=="object"},Ke=function(Y,Ee,se){return Y&&Y.progress(Ee?0:1)&&se&&Y.pause()},wt=function(Y,Ee){if(Y.enabled){var se=Ee(Y);se&&se.totalTime&&(Y.callbackAnimation=se)}},en=Math.abs,_n="left",fn="top",Tn="right",Qn="bottom",xn="width",In="height",tr="Right",ki="Left",as="Top",js="Bottom",Kn="padding",Bn="margin",bo="Width",Mr="Height",hr="px",Yr=function(Y){return yt.getComputedStyle(Y)},sc=function(Y){var Ee=Yr(Y).position;Y.style.position=Ee==="absolute"||Ee==="fixed"?Ee:"relative"},Ml=function(Y,Ee){for(var se in Ee)se in Y||(Y[se]=Ee[se]);return Y},fr=function(Y,Ee){var se=Ee&&Yr(Y)[Se]!=="matrix(1, 0, 0, 1, 0, 0)"&&Ue.to(Y,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),ae=Y.getBoundingClientRect();return se&&se.progress(0).kill(),ae},Ja=function(Y,Ee){var se=Ee.d2;return Y["offset"+se]||Y["client"+se]||0},Tl=function(Y){var Ee=[],se=Y.labels,ae=Y.duration(),He;for(He in se)Ee.push(se[He]/ae);return Ee},Ws=function(Y){return function(Ee){return Ue.utils.snap(Tl(Y),Ee)}},$c=function(Y){var Ee=Ue.utils.snap(Y),se=Array.isArray(Y)&&Y.slice(0).sort(function(ae,He){return ae-He});return se?function(ae,He,gt){gt===void 0&&(gt=.001);var st;if(!He)return Ee(ae);if(He>0){for(ae-=gt,st=0;st<se.length;st++)if(se[st]>=ae)return se[st];return se[st-1]}else for(st=se.length,ae+=gt;st--;)if(se[st]<=ae)return se[st];return se[0]}:function(ae,He,gt){gt===void 0&&(gt=.001);var st=Ee(ae);return!He||Math.abs(st-ae)<gt||st-ae<0==He<0?st:Ee(He<0?ae-Y:ae+Y)}},Ih=function(Y){return function(Ee,se){return $c(Tl(Y))(Ee,se.direction)}},ac=function(Y,Ee,se,ae){return se.split(",").forEach(function(He){return Y(Ee,He,ae)})},Xr=function(Y,Ee,se,ae,He){return Y.addEventListener(Ee,se,{passive:!ae,capture:!!He})},bs=function(Y,Ee,se,ae){return Y.removeEventListener(Ee,se,!!ae)},Ph=function(Y,Ee,se){se=se&&se.wheelHandler,se&&(Y(Ee,"wheel",se),Y(Ee,"touchmove",se))},oc={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Ta={toggleActions:"play",anticipatePin:0},Ia={top:0,left:0,center:.5,bottom:1,right:1},Il=function(Y,Ee){if(Ns(Y)){var se=Y.indexOf("="),ae=~se?+(Y.charAt(se-1)+1)*parseFloat(Y.substr(se+1)):0;~se&&(Y.indexOf("%")>se&&(ae*=Ee/100),Y=Y.substr(0,se-1)),Y=ae+(Y in Ia?Ia[Y]*Ee:~Y.indexOf("%")?parseFloat(Y)*Ee/100:parseFloat(Y)||0)}return Y},Tu=function(Y,Ee,se,ae,He,gt,st,Kt){var On=He.startColor,li=He.endColor,dn=He.fontSize,pn=He.indent,xt=He.fontWeight,An=Ye.createElement("div"),Bi=Ka(se)||D(se,"pinType")==="fixed",ar=Y.indexOf("scroller")!==-1,vr=Bi?ue:se,_r=Y.indexOf("start")!==-1,ys=_r?On:li,bn="border-color:"+ys+";font-size:"+dn+";color:"+ys+";font-weight:"+xt+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return bn+="position:"+((ar||Kt)&&Bi?"fixed;":"absolute;"),(ar||Kt||!Bi)&&(bn+=(ae===Ce?Tn:Qn)+":"+(gt+parseFloat(pn))+"px;"),st&&(bn+="box-sizing:border-box;text-align:left;width:"+st.offsetWidth+"px;"),An._isStart=_r,An.setAttribute("class","gsap-marker-"+Y+(Ee?" marker-"+Ee:"")),An.style.cssText=bn,An.innerText=Ee||Ee===0?Y+"-"+Ee:Y,vr.children[0]?vr.insertBefore(An,vr.children[0]):vr.appendChild(An),An._offset=An["offset"+ae.op.d2],Gc(An,0,ae,_r),An},Gc=function(Y,Ee,se,ae){var He={display:"block"},gt=se[ae?"os2":"p2"],st=se[ae?"p2":"os2"];Y._isFlipped=ae,He[se.a+"Percent"]=ae?-100:0,He[se.a]=ae?"1px":0,He["border"+gt+bo]=1,He["border"+st+bo]=0,He[se.p]=Ee+"px",Ue.set(Y,He)},Jn=[],$f={},Ho,Gf=function(){return tt()-$t>34&&(Ho||(Ho=requestAnimationFrame(Pl)))},Iu=function(){(!we||!we.isPressed||we.startX>ue.clientWidth)&&(S.cache++,we?Ho||(Ho=requestAnimationFrame(Pl)):Pl(),$t||cc("scrollStart"),$t=tt())},Qf=function(){Xe=yt.innerWidth,de=yt.innerHeight},Pu=function(){S.cache++,!me&&!Lt&&!Ye.fullscreenElement&&!Ye.webkitFullscreenElement&&(!Ie||Xe!==yt.innerWidth||Math.abs(yt.innerHeight-de)>yt.innerHeight*.25)&&le.restart(!0)},lc={},qf=[],lm=function je(){return bs(Pn,"scrollEnd",je)||yo(!0)},cc=function(Y){return lc[Y]&&lc[Y].map(function(Ee){return Ee()})||qf},Pa=[],jf=function(Y){for(var Ee=0;Ee<Pa.length;Ee+=5)(!Y||Pa[Ee+4]&&Pa[Ee+4].query===Y)&&(Pa[Ee].style.cssText=Pa[Ee+1],Pa[Ee].getBBox&&Pa[Ee].setAttribute("transform",Pa[Ee+2]||""),Pa[Ee+3].uncache=1)},vp=function(Y,Ee){var se;for(j=0;j<Jn.length;j++)se=Jn[j],se&&(!Ee||se._ctx===Ee)&&(Y?se.kill(1):se.revert(!0,!0));Ee&&jf(Ee),Ee||cc("revert")},cm=function(Y,Ee){S.cache++,(Ee||!ma)&&S.forEach(function(se){return ce(se)&&se.cacheID++&&(se.rec=0)}),Ns(Y)&&(yt.history.scrollRestoration=Ft=Y)},ma,Qc=0,Wf,Yi=function(){if(Wf!==Qc){var Y=Wf=Qc;requestAnimationFrame(function(){return Y===Qc&&yo(!0)})}},sr=function(){ue.appendChild(jt),St=jt.offsetHeight||yt.innerHeight,ue.removeChild(jt)},yo=function(Y,Ee){if($t&&!Y){Xr(Pn,"scrollEnd",lm);return}sr(),ma=Pn.isRefreshing=!0,S.forEach(function(ae){return ce(ae)&&++ae.cacheID&&(ae.rec=ae())});var se=cc("refreshInit");ne&&Pn.sort(),Ee||vp(),S.forEach(function(ae){ce(ae)&&(ae.smooth&&(ae.target.style.scrollBehavior="auto"),ae(0))}),Jn.slice(0).forEach(function(ae){return ae.refresh()}),Jn.forEach(function(ae,He){if(ae._subPinOffset&&ae.pin){var gt=ae.vars.horizontal?"offsetWidth":"offsetHeight",st=ae.pin[gt];ae.revert(!0,1),ae.adjustPinSpacing(ae.pin[gt]-st),ae.refresh()}}),Jn.forEach(function(ae){var He=Ao(ae.scroller,ae._dir);(ae.vars.end==="max"||ae._endClamp&&ae.end>He)&&ae.setPositions(ae.start,Math.max(ae.start+1,He),!0)}),se.forEach(function(ae){return ae&&ae.render&&ae.render(-1)}),S.forEach(function(ae){ce(ae)&&(ae.smooth&&requestAnimationFrame(function(){return ae.target.style.scrollBehavior="smooth"}),ae.rec&&ae(ae.rec))}),cm(Ft,1),le.pause(),Qc++,ma=2,Pl(2),Jn.forEach(function(ae){return ce(ae.vars.onRefresh)&&ae.vars.onRefresh(ae)}),ma=Pn.isRefreshing=!1,cc("refresh")},_p=0,ku=1,Bu,Pl=function(Y){if(!ma||Y===2){Pn.isUpdating=!0,Bu&&Bu.update(0);var Ee=Jn.length,se=tt(),ae=se-Ut>=50,He=Ee&&Jn[0].scroll();if(ku=_p>He?-1:1,ma||(_p=He),ae&&($t&&!te&&se-$t>200&&($t=0,cc("scrollEnd")),pt=Ut,Ut=se),ku<0){for(j=Ee;j-- >0;)Jn[j]&&Jn[j].update(0,ae);ku=1}else for(j=0;j<Ee;j++)Jn[j]&&Jn[j].update(0,ae);Pn.isUpdating=!1}Ho=0},Ap=[_n,fn,Qn,Tn,Bn+js,Bn+tr,Bn+as,Bn+ki,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],kh=Ap.concat([xn,In,"boxSizing","max"+bo,"max"+Mr,"position",Bn,Kn,Kn+as,Kn+tr,Kn+js,Kn+ki]),Rv=function(Y,Ee,se){Za(se);var ae=Y._gsap;if(ae.spacerIsNative)Za(ae.spacerState);else if(Y._gsap.swappedIn){var He=Ee.parentNode;He&&(He.insertBefore(Y,Ee),He.removeChild(Ee))}Y._gsap.swappedIn=!1},os=function(Y,Ee,se,ae){if(!Y._gsap.swappedIn){for(var He=Ap.length,gt=Ee.style,st=Y.style,Kt;He--;)Kt=Ap[He],gt[Kt]=se[Kt];gt.position=se.position==="absolute"?"absolute":"relative",se.display==="inline"&&(gt.display="inline-block"),st[Qn]=st[Tn]="auto",gt.flexBasis=se.flexBasis||"auto",gt.overflow="visible",gt.boxSizing="border-box",gt[xn]=Ja(Y,J)+hr,gt[In]=Ja(Y,Ce)+hr,gt[Kn]=st[Bn]=st[fn]=st[_n]="0",Za(ae),st[xn]=st["max"+bo]=se[xn],st[In]=st["max"+Mr]=se[In],st[Kn]=se[Kn],Y.parentNode!==Ee&&(Y.parentNode.insertBefore(Ee,Y),Ee.appendChild(Y)),Y._gsap.swappedIn=!0}},bp=/([A-Z])/g,Za=function(Y){if(Y){var Ee=Y.t.style,se=Y.length,ae=0,He,gt;for((Y.t._gsap||Ue.core.getCache(Y.t)).uncache=1;ae<se;ae+=2)gt=Y[ae+1],He=Y[ae],gt?Ee[He]=gt:Ee[He]&&Ee.removeProperty(He.replace(bp,"-$1").toLowerCase())}},Bh=function(Y){for(var Ee=kh.length,se=Y.style,ae=[],He=0;He<Ee;He++)ae.push(kh[He],se[kh[He]]);return ae.t=Y,ae},yp=function(Y,Ee,se){for(var ae=[],He=Y.length,gt=se?8:0,st;gt<He;gt+=2)st=Y[gt],ae.push(st,st in Ee?Ee[st]:Y[gt+1]);return ae.t=Y.t,ae},ga={left:0,top:0},wp=function(Y,Ee,se,ae,He,gt,st,Kt,On,li,dn,pn,xt,An){ce(Y)&&(Y=Y(Kt)),Ns(Y)&&Y.substr(0,3)==="max"&&(Y=pn+(Y.charAt(4)==="="?Il("0"+Y.substr(3),se):0));var Bi=xt?xt.time():0,ar,vr,_r;if(xt&&xt.seek(0),isNaN(Y)||(Y=+Y),ot(Y))xt&&(Y=Ue.utils.mapRange(xt.scrollTrigger.start,xt.scrollTrigger.end,0,pn,Y)),st&&Gc(st,se,ae,!0);else{ce(Ee)&&(Ee=Ee(Kt));var ys=(Y||"0").split(" "),bn,Ys,nr,Rn;_r=Me(Ee,Kt)||ue,bn=fr(_r)||{},(!bn||!bn.left&&!bn.top)&&Yr(_r).display==="none"&&(Rn=_r.style.display,_r.style.display="block",bn=fr(_r),Rn?_r.style.display=Rn:_r.style.removeProperty("display")),Ys=Il(ys[0],bn[ae.d]),nr=Il(ys[1]||"0",se),Y=bn[ae.p]-On[ae.p]-li+Ys+He-nr,st&&Gc(st,nr,ae,se-nr<20||st._isStart&&nr>20),se-=se-nr}if(An&&(Kt[An]=Y||-.001,Y<0&&(Y=0)),gt){var Kr=Y+se,zs=gt._isStart;ar="scroll"+ae.d2,Gc(gt,Kr,ae,zs&&Kr>20||!zs&&(dn?Math.max(ue[ar],lt[ar]):gt.parentNode[ar])<=Kr+1),dn&&(On=fr(st),dn&&(gt.style[ae.op.p]=On[ae.op.p]-ae.op.m-gt._offset+hr))}return xt&&_r&&(ar=fr(_r),xt.seek(pn),vr=fr(_r),xt._caScrollDist=ar[ae.p]-vr[ae.p],Y=Y/xt._caScrollDist*pn),xt&&xt.seek(Bi),xt?Y:Math.round(Y)},um=/(webkit|moz|length|cssText|inset)/i,xp=function(Y,Ee,se,ae){if(Y.parentNode!==Ee){var He=Y.style,gt,st;if(Ee===ue){Y._stOrig=He.cssText,st=Yr(Y);for(gt in st)!+gt&&!um.test(gt)&&st[gt]&&typeof He[gt]=="string"&&gt!=="0"&&(He[gt]=st[gt]);He.top=se,He.left=ae}else He.cssText=Y._stOrig;Ue.core.getCache(Y).uncache=1,Ee.appendChild(Y)}},Cp=function(Y,Ee,se){var ae=Ee,He=ae;return function(gt){var st=Math.round(Y());return st!==ae&&st!==He&&Math.abs(st-ae)>3&&Math.abs(st-He)>3&&(gt=st,se&&se()),He=ae,ae=gt,gt}},Rh=function(Y,Ee,se){var ae={};ae[Ee.p]="+="+se,Ue.set(Y,ae)},Yf=function(Y,Ee){var se=ge(Y,Ee),ae="_scroll"+Ee.p2,He=function gt(st,Kt,On,li,dn){var pn=gt.tween,xt=Kt.onComplete,An={};On=On||se();var Bi=Cp(se,On,function(){pn.kill(),gt.tween=0});return dn=li&&dn||0,li=li||st-On,pn&&pn.kill(),Kt[ae]=st,Kt.modifiers=An,An[ae]=function(){return Bi(On+li*pn.ratio+dn*pn.ratio*pn.ratio)},Kt.onUpdate=function(){S.cache++,Pl()},Kt.onComplete=function(){gt.tween=0,xt&&xt.call(pn)},pn=gt.tween=Ue.to(Y,Kt),pn};return Y[ae]=se,se.wheelHandler=function(){return He.tween&&He.tween.kill()&&(He.tween=0)},Xr(Y,"wheel",se.wheelHandler),Pn.isTouch&&Xr(Y,"touchmove",se.wheelHandler),He},Pn=function(){function je(Ee,se){Tt||je.register(Ue)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),Qt(this),this.init(Ee,se)}var Y=je.prototype;return Y.init=function(se,ae){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Le){this.update=this.refresh=this.kill=er;return}se=Ml(Ns(se)||ot(se)||se.nodeType?{trigger:se}:se,Ta);var He=se,gt=He.onUpdate,st=He.toggleClass,Kt=He.id,On=He.onToggle,li=He.onRefresh,dn=He.scrub,pn=He.trigger,xt=He.pin,An=He.pinSpacing,Bi=He.invalidateOnRefresh,ar=He.anticipatePin,vr=He.onScrubComplete,_r=He.onSnapComplete,ys=He.once,bn=He.snap,Ys=He.pinReparent,nr=He.pinSpacer,Rn=He.containerAnimation,Kr=He.fastScrollEnd,zs=He.preventOverlaps,yn=se.horizontal||se.containerAnimation&&se.horizontal!==!1?J:Ce,wr=!dn&&dn!==0,Vn=Me(se.scroller||yt),wo=Ue.core.getCache(Vn),xr=Ka(Vn),ws=("pinType"in se?se.pinType:D(Vn,"pinType")||xr&&"fixed")==="fixed",Jr=[se.onEnter,se.onLeave,se.onEnterBack,se.onLeaveBack],Si=wr&&se.toggleActions.split(" "),Cr="markers"in se?se.markers:Ta.markers,or=xr?0:parseFloat(Yr(Vn)["border"+yn.p2+bo])||0,et=this,ls=se.onRefreshInit&&function(){return se.onRefreshInit(et)},qc=Su(Vn,xr,yn),Ba=Hf(Vn,xr),Us=0,cs=0,Xs=0,Zr=ge(Vn,yn),Ks,Js,hc,es,Zs,Te,ut,at,Wt,qe,Yn,Gi,nn,Xi,jc,xs,$o,Tr,Ri,Ra,Ar,xi,Go,eo,Cs,fc,Wc,Yc,xo,ea,to,Ci,Qo,Ga,no,va,kl,Co,ta;if(et._startClamp=et._endClamp=!1,et._dir=yn,ar*=45,et.scroller=Vn,et.scroll=Rn?Rn.time.bind(Rn):Zr,es=Zr(),et.vars=se,ae=ae||se.animation,"refreshPriority"in se&&(ne=1,se.refreshPriority===-9999&&(Bu=et)),wo.tweenScroll=wo.tweenScroll||{top:Yf(Vn,Ce),left:Yf(Vn,J)},et.tweenTo=Ks=wo.tweenScroll[yn.p],et.scrubDuration=function(sn){Qo=ot(sn)&&sn,Qo?Ci?Ci.duration(sn):Ci=Ue.to(ae,{ease:"expo",totalProgress:"+=0",duration:Qo,paused:!0,onComplete:function(){return vr&&vr(et)}}):(Ci&&Ci.progress(1).kill(),Ci=0)},ae&&(ae.vars.lazy=!1,ae._initted&&!et.isReverted||ae.vars.immediateRender!==!1&&se.immediateRender!==!1&&ae.duration()&&ae.render(0,!0,!0),et.animation=ae.pause(),ae.scrollTrigger=et,et.scrubDuration(dn),ea=0,Kt||(Kt=ae.vars.id)),bn&&((!vt(bn)||bn.push)&&(bn={snapTo:bn}),"scrollBehavior"in ue.style&&Ue.set(xr?[ue,lt]:Vn,{scrollBehavior:"auto"}),S.forEach(function(sn){return ce(sn)&&sn.target===(xr?Ye.scrollingElement||lt:Vn)&&(sn.smooth=!1)}),hc=ce(bn.snapTo)?bn.snapTo:bn.snapTo==="labels"?Ws(ae):bn.snapTo==="labelsDirectional"?Ih(ae):bn.directional!==!1?function(sn,ci){return $c(bn.snapTo)(sn,tt()-cs<500?0:ci.direction)}:Ue.utils.snap(bn.snapTo),Ga=bn.duration||{min:.1,max:2},Ga=vt(Ga)?xe(Ga.min,Ga.max):xe(Ga,Ga),no=Ue.delayedCall(bn.delay||Qo/2||.1,function(){var sn=Zr(),ci=tt()-cs<500,En=Ks.tween;if((ci||Math.abs(et.getVelocity())<10)&&!En&&!te&&Us!==sn){var hi=(sn-Te)/Xi,Hr=ae&&!wr?ae.totalProgress():hi,Mi=ci?0:(Hr-to)/(tt()-pt)*1e3||0,$r=Ue.utils.clamp(-hi,1-hi,en(Mi/2)*Mi/.185),Ai=hi+(bn.inertia===!1?0:$r),Di=xe(0,1,hc(Ai,et)),Pr=Math.round(Te+Di*Xi),lr=bn,Qa=lr.onStart,kr=lr.onInterrupt,na=lr.onComplete;if(sn<=ut&&sn>=Te&&Pr!==sn){if(En&&!En._initted&&En.data<=en(Pr-sn))return;bn.inertia===!1&&($r=Di-hi),Ks(Pr,{duration:Ga(en(Math.max(en(Ai-Hr),en(Di-Hr))*.185/Mi/.05||0)),ease:bn.ease||"power3",data:en(Pr-sn),onInterrupt:function(){return no.restart(!0)&&kr&&kr(et)},onComplete:function(){et.update(),Us=Zr(),ea=to=ae&&!wr?ae.totalProgress():et.progress,_r&&_r(et),na&&na(et)}},sn,$r*Xi,Pr-sn-$r*Xi),Qa&&Qa(et,Ks.tween)}}else et.isActive&&Us!==sn&&no.restart(!0)}).pause()),Kt&&($f[Kt]=et),pn=et.trigger=Me(pn||xt!==!0&&xt),ta=pn&&pn._gsap&&pn._gsap.stRevert,ta&&(ta=ta(et)),xt=xt===!0?pn:Me(xt),Ns(st)&&(st={targets:pn,className:st}),xt&&(An===!1||An===Bn||(An=!An&&xt.parentNode&&xt.parentNode.style&&Yr(xt.parentNode).display==="flex"?!1:Kn),et.pin=xt,Js=Ue.core.getCache(xt),Js.spacer?jc=Js.pinState:(nr&&(nr=Me(nr),nr&&!nr.nodeType&&(nr=nr.current||nr.nativeElement),Js.spacerIsNative=!!nr,nr&&(Js.spacerState=Bh(nr))),Js.spacer=Tr=nr||Ye.createElement("div"),Tr.classList.add("pin-spacer"),Kt&&Tr.classList.add("pin-spacer-"+Kt),Js.pinState=jc=Bh(xt)),se.force3D!==!1&&Ue.set(xt,{force3D:!0}),et.spacer=Tr=Js.spacer,xo=Yr(xt),eo=xo[An+yn.os2],Ra=Ue.getProperty(xt),Ar=Ue.quickSetter(xt,yn.a,hr),os(xt,Tr,xo),$o=Bh(xt)),Cr){Gi=vt(Cr)?Ml(Cr,oc):oc,qe=Tu("scroller-start",Kt,Vn,yn,Gi,0),Yn=Tu("scroller-end",Kt,Vn,yn,Gi,0,qe),Ri=qe["offset"+yn.op.d2];var qn=Me(D(Vn,"content")||Vn);at=this.markerStart=Tu("start",Kt,qn,yn,Gi,Ri,0,Rn),Wt=this.markerEnd=Tu("end",Kt,qn,yn,Gi,Ri,0,Rn),Rn&&(Co=Ue.quickSetter([at,Wt],yn.a,hr)),!ws&&!(I.length&&D(Vn,"fixedMarkers")===!0)&&(sc(xr?ue:Vn),Ue.set([qe,Yn],{force3D:!0}),fc=Ue.quickSetter(qe,yn.a,hr),Yc=Ue.quickSetter(Yn,yn.a,hr))}if(Rn){var Cn=Rn.vars.onUpdate,Ii=Rn.vars.onUpdateParams;Rn.eventCallback("onUpdate",function(){et.update(0,0,1),Cn&&Cn.apply(Rn,Ii||[])})}if(et.previous=function(){return Jn[Jn.indexOf(et)-1]},et.next=function(){return Jn[Jn.indexOf(et)+1]},et.revert=function(sn,ci){if(!ci)return et.kill(!0);var En=sn!==!1||!et.enabled,hi=me;En!==et.isReverted&&(En&&(va=Math.max(Zr(),et.scroll.rec||0),Xs=et.progress,kl=ae&&ae.progress()),at&&[at,Wt,qe,Yn].forEach(function(Hr){return Hr.style.display=En?"none":"block"}),En&&(me=et,et.update(En)),xt&&(!Ys||!et.isActive)&&(En?Rv(xt,Tr,jc):os(xt,Tr,Yr(xt),Cs)),En||et.update(En),me=hi,et.isReverted=En)},et.refresh=function(sn,ci,En,hi){if(!((me||!et.enabled)&&!ci)){if(xt&&sn&&$t){Xr(je,"scrollEnd",lm);return}!ma&&ls&&ls(et),me=et,Ks.tween&&!En&&(Ks.tween.kill(),Ks.tween=0),Ci&&Ci.pause(),Bi&&ae&&ae.revert({kill:!1}).invalidate(),et.isReverted||et.revert(!0,!0),et._subPinOffset=!1;var Hr=qc(),Mi=Ba(),$r=Rn?Rn.duration():Ao(Vn,yn),Ai=Xi<=.01,Di=0,Pr=hi||0,lr=vt(En)?En.end:se.end,Qa=se.endTrigger||pn,kr=vt(En)?En.start:se.start||(se.start===0||!pn?0:xt?"0 0":"0 100%"),na=et.pinnedContainer=se.pinnedContainer&&Me(se.pinnedContainer,et),Da=pn&&Math.max(0,Jn.indexOf(et))||0,_a=Da,Er,Sr,Eo,Xc,dr,us,qo,Ep,dm,Kc,qa,So,Oh;for(Cr&&vt(En)&&(So=Ue.getProperty(qe,yn.p),Oh=Ue.getProperty(Yn,yn.p));_a--;)us=Jn[_a],us.end||us.refresh(0,1)||(me=et),qo=us.pin,qo&&(qo===pn||qo===xt||qo===na)&&!us.isReverted&&(Kc||(Kc=[]),Kc.unshift(us),us.revert(!0,!0)),us!==Jn[_a]&&(Da--,_a--);for(ce(kr)&&(kr=kr(et)),kr=wn(kr,"start",et),Te=wp(kr,pn,Hr,yn,Zr(),at,qe,et,Mi,or,ws,$r,Rn,et._startClamp&&"_startClamp")||(xt?-.001:0),ce(lr)&&(lr=lr(et)),Ns(lr)&&!lr.indexOf("+=")&&(~lr.indexOf(" ")?lr=(Ns(kr)?kr.split(" ")[0]:"")+lr:(Di=Il(lr.substr(2),Hr),lr=Ns(kr)?kr:(Rn?Ue.utils.mapRange(0,Rn.duration(),Rn.scrollTrigger.start,Rn.scrollTrigger.end,Te):Te)+Di,Qa=pn)),lr=wn(lr,"end",et),ut=Math.max(Te,wp(lr||(Qa?"100% 0":$r),Qa,Hr,yn,Zr()+Di,Wt,Yn,et,Mi,or,ws,$r,Rn,et._endClamp&&"_endClamp"))||-.001,Di=0,_a=Da;_a--;)us=Jn[_a],qo=us.pin,qo&&us.start-us._pinPush<=Te&&!Rn&&us.end>0&&(Er=us.end-(et._startClamp?Math.max(0,us.start):us.start),(qo===pn&&us.start-us._pinPush<Te||qo===na)&&isNaN(kr)&&(Di+=Er*(1-us.progress)),qo===xt&&(Pr+=Er));if(Te+=Di,ut+=Di,et._startClamp&&(et._startClamp+=Di),et._endClamp&&!ma&&(et._endClamp=ut||-.001,ut=Math.min(ut,Ao(Vn,yn))),Xi=ut-Te||(Te-=.01)&&.001,Ai&&(Xs=Ue.utils.clamp(0,1,Ue.utils.normalize(Te,ut,va))),et._pinPush=Pr,at&&Di&&(Er={},Er[yn.a]="+="+Di,na&&(Er[yn.p]="-="+Zr()),Ue.set([at,Wt],Er)),xt)Er=Yr(xt),Xc=yn===Ce,Eo=Zr(),xi=parseFloat(Ra(yn.a))+Pr,!$r&&ut>1&&(qa=(xr?Ye.scrollingElement||lt:Vn).style,qa={style:qa,value:qa["overflow"+yn.a.toUpperCase()]},xr&&Yr(ue)["overflow"+yn.a.toUpperCase()]!=="scroll"&&(qa.style["overflow"+yn.a.toUpperCase()]="scroll")),os(xt,Tr,Er),$o=Bh(xt),Sr=fr(xt,!0),Ep=ws&&ge(Vn,Xc?J:Ce)(),An&&(Cs=[An+yn.os2,Xi+Pr+hr],Cs.t=Tr,_a=An===Kn?Ja(xt,yn)+Xi+Pr:0,_a&&Cs.push(yn.d,_a+hr),Za(Cs),na&&Jn.forEach(function(K){K.pin===na&&K.vars.pinSpacing!==!1&&(K._subPinOffset=!0)}),ws&&Zr(va)),ws&&(dr={top:Sr.top+(Xc?Eo-Te:Ep)+hr,left:Sr.left+(Xc?Ep:Eo-Te)+hr,boxSizing:"border-box",position:"fixed"},dr[xn]=dr["max"+bo]=Math.ceil(Sr.width)+hr,dr[In]=dr["max"+Mr]=Math.ceil(Sr.height)+hr,dr[Bn]=dr[Bn+as]=dr[Bn+tr]=dr[Bn+js]=dr[Bn+ki]="0",dr[Kn]=Er[Kn],dr[Kn+as]=Er[Kn+as],dr[Kn+tr]=Er[Kn+tr],dr[Kn+js]=Er[Kn+js],dr[Kn+ki]=Er[Kn+ki],xs=yp(jc,dr,Ys),ma&&Zr(0)),ae?(dm=ae._initted,Je(1),ae.render(ae.duration(),!0,!0),Go=Ra(yn.a)-xi+Xi+Pr,Wc=Math.abs(Xi-Go)>1,ws&&Wc&&xs.splice(xs.length-2,2),ae.render(0,!0,!0),dm||ae.invalidate(!0),ae.parent||ae.totalTime(ae.totalTime()),Je(0)):Go=Xi,qa&&(qa.value?qa.style["overflow"+yn.a.toUpperCase()]=qa.value:qa.style.removeProperty("overflow-"+yn.a));else if(pn&&Zr()&&!Rn)for(Sr=pn.parentNode;Sr&&Sr!==ue;)Sr._pinOffset&&(Te-=Sr._pinOffset,ut-=Sr._pinOffset),Sr=Sr.parentNode;Kc&&Kc.forEach(function(K){return K.revert(!1,!0)}),et.start=Te,et.end=ut,es=Zs=ma?va:Zr(),!Rn&&!ma&&(es<va&&Zr(va),et.scroll.rec=0),et.revert(!1,!0),cs=tt(),no&&(Us=-1,no.restart(!0)),me=0,ae&&wr&&(ae._initted||kl)&&ae.progress()!==kl&&ae.progress(kl||0,!0).render(ae.time(),!0,!0),(Ai||Xs!==et.progress||Rn)&&(ae&&!wr&&ae.totalProgress(Rn&&Te<-.001&&!Xs?Ue.utils.normalize(Te,ut,0):Xs,!0),et.progress=Ai||(es-Te)/Xi===Xs?0:Xs),xt&&An&&(Tr._pinOffset=Math.round(et.progress*Go)),Ci&&Ci.invalidate(),isNaN(So)||(So-=Ue.getProperty(qe,yn.p),Oh-=Ue.getProperty(Yn,yn.p),Rh(qe,yn,So),Rh(at,yn,So-(hi||0)),Rh(Yn,yn,Oh),Rh(Wt,yn,Oh-(hi||0))),Ai&&!ma&&et.update(),li&&!ma&&!nn&&(nn=!0,li(et),nn=!1)}},et.getVelocity=function(){return(Zr()-Zs)/(tt()-pt)*1e3||0},et.endAnimation=function(){Ke(et.callbackAnimation),ae&&(Ci?Ci.progress(1):ae.paused()?wr||Ke(ae,et.direction<0,1):Ke(ae,ae.reversed()))},et.labelToScroll=function(sn){return ae&&ae.labels&&(Te||et.refresh()||Te)+ae.labels[sn]/ae.duration()*Xi||0},et.getTrailing=function(sn){var ci=Jn.indexOf(et),En=et.direction>0?Jn.slice(0,ci).reverse():Jn.slice(ci+1);return(Ns(sn)?En.filter(function(hi){return hi.vars.preventOverlaps===sn}):En).filter(function(hi){return et.direction>0?hi.end<=Te:hi.start>=ut})},et.update=function(sn,ci,En){if(!(Rn&&!En&&!sn)){var hi=ma===!0?va:et.scroll(),Hr=sn?0:(hi-Te)/Xi,Mi=Hr<0?0:Hr>1?1:Hr||0,$r=et.progress,Ai,Di,Pr,lr,Qa,kr,na,Da;if(ci&&(Zs=es,es=Rn?Zr():hi,bn&&(to=ea,ea=ae&&!wr?ae.totalProgress():Mi)),ar&&!Mi&&xt&&!me&&!Rt&&$t&&Te<hi+(hi-Zs)/(tt()-pt)*ar&&(Mi=1e-4),Mi!==$r&&et.enabled){if(Ai=et.isActive=!!Mi&&Mi<1,Di=!!$r&&$r<1,kr=Ai!==Di,Qa=kr||!!Mi!=!!$r,et.direction=Mi>$r?1:-1,et.progress=Mi,Qa&&!me&&(Pr=Mi&&!$r?0:Mi===1?1:$r===1?2:3,wr&&(lr=!kr&&Si[Pr+1]!=="none"&&Si[Pr+1]||Si[Pr],Da=ae&&(lr==="complete"||lr==="reset"||lr in ae))),zs&&(kr||Da)&&(Da||dn||!ae)&&(ce(zs)?zs(et):et.getTrailing(zs).forEach(function(Eo){return Eo.endAnimation()})),wr||(Ci&&!me&&!Rt?(Ci._dp._time-Ci._start!==Ci._time&&Ci.render(Ci._dp._time-Ci._start),Ci.resetTo?Ci.resetTo("totalProgress",Mi,ae._tTime/ae._tDur):(Ci.vars.totalProgress=Mi,Ci.invalidate().restart())):ae&&ae.totalProgress(Mi,!!(me&&(cs||sn)))),xt){if(sn&&An&&(Tr.style[An+yn.os2]=eo),!ws)Ar(pa(xi+Go*Mi));else if(Qa){if(na=!sn&&Mi>$r&&ut+1>hi&&hi+1>=Ao(Vn,yn),Ys)if(!sn&&(Ai||na)){var _a=fr(xt,!0),Er=hi-Te;xp(xt,ue,_a.top+(yn===Ce?Er:0)+hr,_a.left+(yn===Ce?0:Er)+hr)}else xp(xt,Tr);Za(Ai||na?xs:$o),Wc&&Mi<1&&Ai||Ar(xi+(Mi===1&&!na?Go:0))}}bn&&!Ks.tween&&!me&&!Rt&&no.restart(!0),st&&(kr||ys&&Mi&&(Mi<1||!Re))&&he(st.targets).forEach(function(Eo){return Eo.classList[Ai||ys?"add":"remove"](st.className)}),gt&&!wr&&!sn&&gt(et),Qa&&!me?(wr&&(Da&&(lr==="complete"?ae.pause().totalProgress(1):lr==="reset"?ae.restart(!0).pause():lr==="restart"?ae.restart(!0):ae[lr]()),gt&&gt(et)),(kr||!Re)&&(On&&kr&&wt(et,On),Jr[Pr]&&wt(et,Jr[Pr]),ys&&(Mi===1?et.kill(!1,1):Jr[Pr]=0),kr||(Pr=Mi===1?1:3,Jr[Pr]&&wt(et,Jr[Pr]))),Kr&&!Ai&&Math.abs(et.getVelocity())>(ot(Kr)?Kr:2500)&&(Ke(et.callbackAnimation),Ci?Ci.progress(1):Ke(ae,lr==="reverse"?1:!Mi,1))):wr&&gt&&!me&&gt(et)}if(Yc){var Sr=Rn?hi/Rn.duration()*(Rn._caScrollDist||0):hi;fc(Sr+(qe._isFlipped?1:0)),Yc(Sr)}Co&&Co(-hi/Rn.duration()*(Rn._caScrollDist||0))}},et.enable=function(sn,ci){et.enabled||(et.enabled=!0,Xr(Vn,"resize",Pu),xr||Xr(Vn,"scroll",Iu),ls&&Xr(je,"refreshInit",ls),sn!==!1&&(et.progress=Xs=0,es=Zs=Us=Zr()),ci!==!1&&et.refresh())},et.getTween=function(sn){return sn&&Ks?Ks.tween:Ci},et.setPositions=function(sn,ci,En,hi){if(Rn){var Hr=Rn.scrollTrigger,Mi=Rn.duration(),$r=Hr.end-Hr.start;sn=Hr.start+$r*sn/Mi,ci=Hr.start+$r*ci/Mi}et.refresh(!1,!1,{start:fi(sn,En&&!!et._startClamp),end:fi(ci,En&&!!et._endClamp)},hi),et.update()},et.adjustPinSpacing=function(sn){if(Cs&&sn){var ci=Cs.indexOf(yn.d)+1;Cs[ci]=parseFloat(Cs[ci])+sn+hr,Cs[1]=parseFloat(Cs[1])+sn+hr,Za(Cs)}},et.disable=function(sn,ci){if(et.enabled&&(sn!==!1&&et.revert(!0,!0),et.enabled=et.isActive=!1,ci||Ci&&Ci.pause(),va=0,Js&&(Js.uncache=1),ls&&bs(je,"refreshInit",ls),no&&(no.pause(),Ks.tween&&Ks.tween.kill()&&(Ks.tween=0)),!xr)){for(var En=Jn.length;En--;)if(Jn[En].scroller===Vn&&Jn[En]!==et)return;bs(Vn,"resize",Pu),xr||bs(Vn,"scroll",Iu)}},et.kill=function(sn,ci){et.disable(sn,ci),Ci&&!ci&&Ci.kill(),Kt&&delete $f[Kt];var En=Jn.indexOf(et);En>=0&&Jn.splice(En,1),En===j&&ku>0&&j--,En=0,Jn.forEach(function(hi){return hi.scroller===et.scroller&&(En=1)}),En||ma||(et.scroll.rec=0),ae&&(ae.scrollTrigger=null,sn&&ae.revert({kill:!1}),ci||ae.kill()),at&&[at,Wt,qe,Yn].forEach(function(hi){return hi.parentNode&&hi.parentNode.removeChild(hi)}),Bu===et&&(Bu=0),xt&&(Js&&(Js.uncache=1),En=0,Jn.forEach(function(hi){return hi.pin===xt&&En++}),En||(Js.spacer=0)),se.onKill&&se.onKill(et)},Jn.push(et),et.enable(!1,!1),ta&&ta(et),ae&&ae.add&&!Xi){var Ir=et.update;et.update=function(){et.update=Ir,Te||ut||et.refresh()},Ue.delayedCall(.01,et.update),Xi=.01,Te=ut=0}else et.refresh();xt&&Yi()},je.register=function(se){return Tt||(Ue=se||rc(),El()&&window.document&&je.enable(),Tt=Le),Tt},je.defaults=function(se){if(se)for(var ae in se)Ta[ae]=se[ae];return Ta},je.disable=function(se,ae){Le=0,Jn.forEach(function(gt){return gt[ae?"kill":"disable"](se)}),bs(yt,"wheel",Iu),bs(Ye,"scroll",Iu),clearInterval(Ze),bs(Ye,"touchcancel",er),bs(ue,"touchstart",er),ac(bs,Ye,"pointerdown,touchstart,mousedown",oi),ac(bs,Ye,"pointerup,touchend,mouseup",As),le.kill(),Mu(bs);for(var He=0;He<S.length;He+=3)Ph(bs,S[He],S[He+1]),Ph(bs,S[He],S[He+2])},je.enable=function(){if(yt=window,Ye=document,lt=Ye.documentElement,ue=Ye.body,Ue&&(he=Ue.utils.toArray,xe=Ue.utils.clamp,Qt=Ue.core.context||er,Je=Ue.core.suppressOverwrites||er,Ft=yt.history.scrollRestoration||"auto",_p=yt.pageYOffset,Ue.core.globals("ScrollTrigger",je),ue)){Le=1,jt=document.createElement("div"),jt.style.height="100vh",jt.style.position="absolute",sr(),Vr(),mt.register(Ue),je.isTouch=mt.isTouch,Nt=mt.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Xr(yt,"wheel",Iu),dt=[yt,Ye,lt,ue],Ue.matchMedia?(je.matchMedia=function(Kt){var On=Ue.matchMedia(),li;for(li in Kt)On.add(li,Kt[li]);return On},Ue.addEventListener("matchMediaInit",function(){return vp()}),Ue.addEventListener("matchMediaRevert",function(){return jf()}),Ue.addEventListener("matchMedia",function(){yo(0,1),cc("matchMedia")}),Ue.matchMedia("(orientation: portrait)",function(){return Qf(),Qf})):console.warn("Requires GSAP 3.11.0 or later"),Qf(),Xr(Ye,"scroll",Iu);var se=ue.style,ae=se.borderTopStyle,He=Ue.core.Animation.prototype,gt,st;for(He.revert||Object.defineProperty(He,"revert",{value:function(){return this.time(-.01,!0)}}),se.borderTopStyle="solid",gt=fr(ue),Ce.m=Math.round(gt.top+Ce.sc())||0,J.m=Math.round(gt.left+J.sc())||0,ae?se.borderTopStyle=ae:se.removeProperty("border-top-style"),Ze=setInterval(Gf,250),Ue.delayedCall(.5,function(){return Rt=0}),Xr(Ye,"touchcancel",er),Xr(ue,"touchstart",er),ac(Xr,Ye,"pointerdown,touchstart,mousedown",oi),ac(Xr,Ye,"pointerup,touchend,mouseup",As),Se=Ue.utils.checkPrefix("transform"),kh.push(Se),Tt=tt(),le=Ue.delayedCall(.2,yo).pause(),ct=[Ye,"visibilitychange",function(){var Kt=yt.innerWidth,On=yt.innerHeight;Ye.hidden?(q=Kt,Ve=On):(q!==Kt||Ve!==On)&&Pu()},Ye,"DOMContentLoaded",yo,yt,"load",yo,yt,"resize",Pu],Mu(Xr),Jn.forEach(function(Kt){return Kt.enable(0,1)}),st=0;st<S.length;st+=3)Ph(bs,S[st],S[st+1]),Ph(bs,S[st],S[st+2])}},je.config=function(se){"limitCallbacks"in se&&(Re=!!se.limitCallbacks);var ae=se.syncInterval;ae&&clearInterval(Ze)||(Ze=ae)&&setInterval(Gf,ae),"ignoreMobileResize"in se&&(Ie=je.isTouch===1&&se.ignoreMobileResize),"autoRefreshEvents"in se&&(Mu(bs)||Mu(Xr,se.autoRefreshEvents||"none"),Lt=(se.autoRefreshEvents+"").indexOf("resize")===-1)},je.scrollerProxy=function(se,ae){var He=Me(se),gt=S.indexOf(He),st=Ka(He);~gt&&S.splice(gt,st?6:2),ae&&(st?I.unshift(yt,ae,ue,ae,lt,ae):I.unshift(He,ae))},je.clearMatchMedia=function(se){Jn.forEach(function(ae){return ae._ctx&&ae._ctx.query===se&&ae._ctx.kill(!0,!0)})},je.isInViewport=function(se,ae,He){var gt=(Ns(se)?Me(se):se).getBoundingClientRect(),st=gt[He?xn:In]*ae||0;return He?gt.right-st>0&&gt.left+st<yt.innerWidth:gt.bottom-st>0&&gt.top+st<yt.innerHeight},je.positionInViewport=function(se,ae,He){Ns(se)&&(se=Me(se));var gt=se.getBoundingClientRect(),st=gt[He?xn:In],Kt=ae==null?st/2:ae in Ia?Ia[ae]*st:~ae.indexOf("%")?parseFloat(ae)*st/100:parseFloat(ae)||0;return He?(gt.left+Kt)/yt.innerWidth:(gt.top+Kt)/yt.innerHeight},je.killAll=function(se){if(Jn.slice(0).forEach(function(He){return He.vars.id!=="ScrollSmoother"&&He.kill()}),se!==!0){var ae=lc.killAll||[];lc={},ae.forEach(function(He){return He()})}},je}();Pn.version="3.12.2",Pn.saveStyles=function(je){return je?he(je).forEach(function(Y){if(Y&&Y.style){var Ee=Pa.indexOf(Y);Ee>=0&&Pa.splice(Ee,5),Pa.push(Y,Y.style.cssText,Y.getBBox&&Y.getAttribute("transform"),Ue.core.getCache(Y),Qt())}}):Pa},Pn.revert=function(je,Y){return vp(!je,Y)},Pn.create=function(je,Y){return new Pn(je,Y)},Pn.refresh=function(je){return je?Pu():(Tt||Pn.register())&&yo(!0)},Pn.update=function(je){return++S.cache&&Pl(je===!0?2:0)},Pn.clearScrollMemory=cm,Pn.maxScroll=function(je,Y){return Ao(je,Y?J:Ce)},Pn.getScrollFunc=function(je,Y){return ge(Me(je),Y?J:Ce)},Pn.getById=function(je){return $f[je]},Pn.getAll=function(){return Jn.filter(function(je){return je.vars.id!=="ScrollSmoother"})},Pn.isScrolling=function(){return!!$t},Pn.snapDirectional=$c,Pn.addEventListener=function(je,Y){var Ee=lc[je]||(lc[je]=[]);~Ee.indexOf(Y)||Ee.push(Y)},Pn.removeEventListener=function(je,Y){var Ee=lc[je],se=Ee&&Ee.indexOf(Y);se>=0&&Ee.splice(se,1)},Pn.batch=function(je,Y){var Ee=[],se={},ae=Y.interval||.016,He=Y.batchMax||1e9,gt=function(On,li){var dn=[],pn=[],xt=Ue.delayedCall(ae,function(){li(dn,pn),dn=[],pn=[]}).pause();return function(An){dn.length||xt.restart(!0),dn.push(An.trigger),pn.push(An),He<=dn.length&&xt.progress(1)}},st;for(st in Y)se[st]=st.substr(0,2)==="on"&&ce(Y[st])&&st!=="onRefreshInit"?gt(st,Y[st]):Y[st];return ce(He)&&(He=He(),Xr(Pn,"refresh",function(){return He=Y.batchMax()})),he(je).forEach(function(Kt){var On={};for(st in se)On[st]=se[st];On.trigger=Kt,Ee.push(Pn.create(On))}),Ee};var hm=function(Y,Ee,se,ae){return Ee>ae?Y(ae):Ee<0&&Y(0),se>ae?(ae-Ee)/(se-Ee):se<0?Ee/(Ee-se):1},ka=function je(Y,Ee){Ee===!0?Y.style.removeProperty("touch-action"):Y.style.touchAction=Ee===!0?"auto":Ee?"pan-"+Ee+(mt.isTouch?" pinch-zoom":""):"none",Y===lt&&je(ue,Ee)},Dh={auto:1,scroll:1},fm=function(Y){var Ee=Y.event,se=Y.target,ae=Y.axis,He=(Ee.changedTouches?Ee.changedTouches[0]:Ee).target,gt=He._gsap||Ue.core.getCache(He),st=tt(),Kt;if(!gt._isScrollT||st-gt._isScrollT>2e3){for(;He&&He!==ue&&(He.scrollHeight<=He.clientHeight&&He.scrollWidth<=He.clientWidth||!(Dh[(Kt=Yr(He)).overflowY]||Dh[Kt.overflowX]));)He=He.parentNode;gt._isScroll=He&&He!==se&&!Ka(He)&&(Dh[(Kt=Yr(He)).overflowY]||Dh[Kt.overflowX]),gt._isScrollT=st}(gt._isScroll||ae==="x")&&(Ee.stopPropagation(),Ee._gsapAllow=!0)},Fs=function(Y,Ee,se,ae){return mt.create({target:Y,capture:!0,debounce:!1,lockAxis:!0,type:Ee,onWheel:ae=ae&&fm,onPress:ae,onDrag:ae,onScroll:ae,onEnable:function(){return se&&Xr(Ye,mt.eventTypes[0],Zn,!1,!0)},onDisable:function(){return bs(Ye,mt.eventTypes[0],Zn,!0)}})},Lh=/(input|label|select|textarea)/i,Xf,Zn=function(Y){var Ee=Lh.test(Y.target.tagName);(Ee||Xf)&&(Y._gsapAllow=!0,Xf=Ee)},uc=function(Y){vt(Y)||(Y={}),Y.preventDefault=Y.isNormalizer=Y.allowClicks=!0,Y.type||(Y.type="wheel,touch"),Y.debounce=!!Y.debounce,Y.id=Y.id||"normalizer";var Ee=Y,se=Ee.normalizeScrollX,ae=Ee.momentum,He=Ee.allowNestedScroll,gt=Ee.onRelease,st,Kt,On=Me(Y.target)||lt,li=Ue.core.globals().ScrollSmoother,dn=li&&li.get(),pn=Nt&&(Y.content&&Me(Y.content)||dn&&Y.content!==!1&&!dn.smooth()&&dn.content()),xt=ge(On,Ce),An=ge(On,J),Bi=1,ar=(mt.isTouch&&yt.visualViewport?yt.visualViewport.scale*yt.visualViewport.width:yt.outerWidth)/yt.innerWidth,vr=0,_r=ce(ae)?function(){return ae(st)}:function(){return ae||2.8},ys,bn,Ys=Fs(On,Y.type,!0,He),nr=function(){return bn=!1},Rn=er,Kr=er,zs=function(){Kt=Ao(On,Ce),Kr=xe(Nt?1:0,Kt),se&&(Rn=xe(0,Ao(On,J))),ys=Qc},yn=function(){pn._gsap.y=pa(parseFloat(pn._gsap.y)+xt.offset)+"px",pn.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(pn._gsap.y)+", 0, 1)",xt.offset=xt.cacheID=0},wr=function(){if(bn){requestAnimationFrame(nr);var Cr=pa(st.deltaY/2),or=Kr(xt.v-Cr);if(pn&&or!==xt.v+xt.offset){xt.offset=or-xt.v;var et=pa((parseFloat(pn&&pn._gsap.y)||0)-xt.offset);pn.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+et+", 0, 1)",pn._gsap.y=et+"px",xt.cacheID=S.cache,Pl()}return!0}xt.offset&&yn(),bn=!0},Vn,wo,xr,ws,Jr=function(){zs(),Vn.isActive()&&Vn.vars.scrollY>Kt&&(xt()>Kt?Vn.progress(1)&&xt(Kt):Vn.resetTo("scrollY",Kt))};return pn&&Ue.set(pn,{y:"+=0"}),Y.ignoreCheck=function(Si){return Nt&&Si.type==="touchmove"&&wr()||Bi>1.05&&Si.type!=="touchstart"||st.isGesturing||Si.touches&&Si.touches.length>1},Y.onPress=function(){bn=!1;var Si=Bi;Bi=pa((yt.visualViewport&&yt.visualViewport.scale||1)/ar),Vn.pause(),Si!==Bi&&ka(On,Bi>1.01?!0:se?!1:"x"),wo=An(),xr=xt(),zs(),ys=Qc},Y.onRelease=Y.onGestureStart=function(Si,Cr){if(xt.offset&&yn(),!Cr)ws.restart(!0);else{S.cache++;var or=_r(),et,ls;se&&(et=An(),ls=et+or*.05*-Si.velocityX/.227,or*=hm(An,et,ls,Ao(On,J)),Vn.vars.scrollX=Rn(ls)),et=xt(),ls=et+or*.05*-Si.velocityY/.227,or*=hm(xt,et,ls,Ao(On,Ce)),Vn.vars.scrollY=Kr(ls),Vn.invalidate().duration(or).play(.01),(Nt&&Vn.vars.scrollY>=Kt||et>=Kt-1)&&Ue.to({},{onUpdate:Jr,duration:or})}gt&&gt(Si)},Y.onWheel=function(){Vn._ts&&Vn.pause(),tt()-vr>1e3&&(ys=0,vr=tt())},Y.onChange=function(Si,Cr,or,et,ls){if(Qc!==ys&&zs(),Cr&&se&&An(Rn(et[2]===Cr?wo+(Si.startX-Si.x):An()+Cr-et[1])),or){xt.offset&&yn();var qc=ls[2]===or,Ba=qc?xr+Si.startY-Si.y:xt()+or-ls[1],Us=Kr(Ba);qc&&Ba!==Us&&(xr+=Us-Ba),xt(Us)}(or||Cr)&&Pl()},Y.onEnable=function(){ka(On,se?!1:"x"),Pn.addEventListener("refresh",Jr),Xr(yt,"resize",Jr),xt.smooth&&(xt.target.style.scrollBehavior="auto",xt.smooth=An.smooth=!1),Ys.enable()},Y.onDisable=function(){ka(On,!0),bs(yt,"resize",Jr),Pn.removeEventListener("refresh",Jr),Ys.kill()},Y.lockAxis=Y.lockAxis!==!1,st=new mt(Y),st.iOS=Nt,Nt&&!xt()&&xt(1),Nt&&Ue.ticker.add(er),ws=st._dc,Vn=Ue.to(st,{ease:"power4",paused:!0,scrollX:se?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:Cp(xt,xt(),function(){return Vn.pause()})},onUpdate:Pl,onComplete:ws.vars.onComplete}),st};Pn.sort=function(je){return Jn.sort(je||function(Y,Ee){return(Y.vars.refreshPriority||0)*-1e6+Y.start-(Ee.start+(Ee.vars.refreshPriority||0)*-1e6)})},Pn.observe=function(je){return new mt(je)},Pn.normalizeScroll=function(je){if(typeof je>"u")return we;if(je===!0&&we)return we.enable();if(je===!1)return we&&we.kill();var Y=je instanceof mt?je:uc(je);return we&&we.target===Y.target&&we.kill(),Ka(Y.target)&&(we=Y),Y},Pn.core={_getVelocityProp:ve,_inputObserver:Fs,_scrollers:S,_proxies:I,bridge:{ss:function(){$t||cc("scrollStart"),$t=tt()},ref:function(){return me}}},rc()&&Ue.registerPlugin(Pn),t.ScrollTrigger=Pn,t.default=Pn,typeof window>"u"||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete window.default})})(gT,gT.exports);var BP=gT.exports,vT={exports:{}};(function(i,e){(function(t,n){n(e)})(bt,function(t){/*!
 * ScrollToPlugin 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var n,r,s,a,o,l,c,u,h=function(){return typeof window<"u"},f=function(){return n||h()&&(n=window.gsap)&&n.registerPlugin&&n},d=function(P){return typeof P=="string"},g=function(P){return typeof P=="function"},v=function(P,B){var M=B==="x"?"Width":"Height",D="scroll"+M,F="client"+M;return P===s||P===a||P===o?Math.max(a[D],o[D])-(s["inner"+M]||a[F]||o[F]):P[D]-P["offset"+M]},A=function(P,B){var M="scroll"+(B==="x"?"Left":"Top");return P===s&&(P.pageXOffset!=null?M="page"+B.toUpperCase()+"Offset":P=a[M]!=null?a:o),function(){return P[M]}},_=function(P,B,M,D){if(g(P)&&(P=P(B,M,D)),typeof P!="object")return d(P)&&P!=="max"&&P.charAt(1)!=="="?{x:P,y:P}:{y:P};if(P.nodeType)return{y:P,x:P};var F={},z;for(z in P)F[z]=z!=="onAutoKill"&&g(P[z])?P[z](B,M,D):P[z];return F},y=function(P,B){if(P=l(P)[0],!P||!P.getBoundingClientRect)return console.warn("scrollTo target doesn't exist. Using 0")||{x:0,y:0};var M=P.getBoundingClientRect(),D=!B||B===s||B===o,F=D?{top:a.clientTop-(s.pageYOffset||a.scrollTop||o.scrollTop||0),left:a.clientLeft-(s.pageXOffset||a.scrollLeft||o.scrollLeft||0)}:B.getBoundingClientRect(),z={x:M.left-F.left,y:M.top-F.top};return!D&&B&&(z.x+=A(B,"x")(),z.y+=A(B,"y")()),z},x=function(P,B,M,D,F){return!isNaN(P)&&typeof P!="object"?parseFloat(P)-F:d(P)&&P.charAt(1)==="="?parseFloat(P.substr(2))*(P.charAt(0)==="-"?-1:1)+D-F:P==="max"?v(B,M)-F:Math.min(v(B,M),y(P,B)[M]-F)},C=function(){n=f(),h()&&n&&typeof document<"u"&&document.body&&(s=window,o=document.body,a=document.documentElement,l=n.utils.toArray,n.config({autoKillThreshold:7}),c=n.config(),r=1)},S={version:"3.12.2",name:"scrollTo",rawVars:1,register:function(P){n=P,C()},init:function(P,B,M,D,F){r||C();var z=this,U=n.getProperty(P,"scrollSnapType");z.isWin=P===s,z.target=P,z.tween=M,B=_(B,D,P,F),z.vars=B,z.autoKill=!!B.autoKill,z.getX=A(P,"x"),z.getY=A(P,"y"),z.x=z.xPrev=z.getX(),z.y=z.yPrev=z.getY(),u||(u=n.core.globals().ScrollTrigger),n.getProperty(P,"scrollBehavior")==="smooth"&&n.set(P,{scrollBehavior:"auto"}),U&&U!=="none"&&(z.snap=1,z.snapInline=P.style.scrollSnapType,P.style.scrollSnapType="none"),B.x!=null?(z.add(z,"x",z.x,x(B.x,P,"x",z.x,B.offsetX||0),D,F),z._props.push("scrollTo_x")):z.skipX=1,B.y!=null?(z.add(z,"y",z.y,x(B.y,P,"y",z.y,B.offsetY||0),D,F),z._props.push("scrollTo_y")):z.skipY=1},render:function(P,B){for(var M=B._pt,D=B.target,F=B.tween,z=B.autoKill,U=B.xPrev,$=B.yPrev,O=B.isWin,ie=B.snap,W=B.snapInline,J,Ce,Me,ge,ve;M;)M.r(P,M.d),M=M._next;J=O||!B.skipX?B.getX():U,Ce=O||!B.skipY?B.getY():$,Me=Ce-$,ge=J-U,ve=c.autoKillThreshold,B.x<0&&(B.x=0),B.y<0&&(B.y=0),z&&(!B.skipX&&(ge>ve||ge<-ve)&&J<v(D,"x")&&(B.skipX=1),!B.skipY&&(Me>ve||Me<-ve)&&Ce<v(D,"y")&&(B.skipY=1),B.skipX&&B.skipY&&(F.kill(),B.vars.onAutoKill&&B.vars.onAutoKill.apply(F,B.vars.onAutoKillParams||[]))),O?s.scrollTo(B.skipX?J:B.x,B.skipY?Ce:B.y):(B.skipY||(D.scrollTop=B.y),B.skipX||(D.scrollLeft=B.x)),ie&&(P===1||P===0)&&(Ce=D.scrollTop,J=D.scrollLeft,W?D.style.scrollSnapType=W:D.style.removeProperty("scroll-snap-type"),D.scrollTop=Ce+1,D.scrollLeft=J+1,D.scrollTop=Ce,D.scrollLeft=J),B.xPrev=B.x,B.yPrev=B.y,u&&u.update()},kill:function(P){var B=P==="scrollTo";(B||P==="scrollTo_x")&&(this.skipX=1),(B||P==="scrollTo_y")&&(this.skipY=1)}};S.max=v,S.getOffset=y,S.buildGetter=A,f()&&n.registerPlugin(S),t.ScrollToPlugin=S,t.default=S,Object.defineProperty(t,"__esModule",{value:!0})})})(vT,vT.exports);var kft=vT.exports;function df(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function o$(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}/*!
 * GSAP 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Zl={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Kg={duration:.5,overwrite:!1,delay:0},RP,ho,ks,Rc=1e8,Rr=1/Rc,_T=Math.PI*2,Bft=_T/4,Rft=0,l$=Math.sqrt,Dft=Math.cos,Lft=Math.sin,$a=function(e){return typeof e=="string"},Ls=function(e){return typeof e=="function"},Bf=function(e){return typeof e=="number"},DP=function(e){return typeof e>"u"},bh=function(e){return typeof e=="object"},pl=function(e){return e!==!1},LP=function(){return typeof window<"u"},Bw=function(e){return Ls(e)||$a(e)},c$=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},fo=Array.isArray,AT=/(?:-?\.?\d|\.)+/gi,u$=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,bg=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,w3=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,h$=/[+-]=-?[.\d]+/,f$=/[^,'"\[\]\s]+/gi,Oft=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ds,xc,bT,OP,nc={},jx={},d$,p$=function(e){return(jx=z0(e,nc))&&yl},NP=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Wx=function(e,t){return!t&&console.warn(e)},m$=function(e,t){return e&&(nc[e]=t)&&jx&&(jx[e]=t)||nc},Q1=function(){return 0},Nft={suppressEvents:!0,isStart:!0,kill:!1},sx={suppressEvents:!0,kill:!1},Fft={suppressEvents:!0},FP={},Vd=[],yT={},g$,Gl={},x3={},f9=30,ax=[],zP="",UP=function(e){var t=e[0],n,r;if(bh(t)||Ls(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(r=ax.length;r--&&!ax[r].targetTest(t););n=ax[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new U$(e[r],n)))||e.splice(r,1);return e},C0=function(e){return e._gsap||UP(Dc(e))[0]._gsap},v$=function(e,t,n){return(n=e[t])&&Ls(n)?e[t]():DP(n)&&e.getAttribute&&e.getAttribute(t)||n},ml=function(e,t){return(e=e.split(",")).forEach(t)||e},Gs=function(e){return Math.round(e*1e5)/1e5||0},ja=function(e){return Math.round(e*1e7)/1e7||0},Mg=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+r:n==="-"?e-r:n==="*"?e*r:e/r},zft=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},Yx=function(){var e=Vd.length,t=Vd.slice(0),n,r;for(yT={},Vd.length=0,n=0;n<e;n++)r=t[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},_$=function(e,t,n,r){Vd.length&&!ho&&Yx(),e.render(t,n,r||ho&&t<0&&(e._initted||e._startAt)),Vd.length&&!ho&&Yx()},A$=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(f$).length<2?t:$a(e)?e.trim():e},b$=function(e){return e},Uc=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Uft=function(e){return function(t,n){for(var r in n)r in t||r==="duration"&&e||r==="ease"||(t[r]=n[r])}},z0=function(e,t){for(var n in t)e[n]=t[n];return e},d9=function i(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=bh(t[n])?i(e[n]||(e[n]={}),t[n]):t[n]);return e},Xx=function(e,t){var n={},r;for(r in e)r in t||(n[r]=e[r]);return n},h1=function(e){var t=e.parent||ds,n=e.keyframes?Uft(fo(e.keyframes)):Uc;if(pl(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},Vft=function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0},y$=function(e,t,n,r,s){n===void 0&&(n="_first"),r===void 0&&(r="_last");var a=e[r],o;if(s)for(o=t[s];a&&a[s]>o;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=a,t.parent=t._dp=e,t},mE=function(e,t,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=t._prev,a=t._next;s?s._next=a:e[n]===t&&(e[n]=a),a?a._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},np=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},E0=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},Hft=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},wT=function(e,t,n,r){return e._startAt&&(ho?e._startAt.revert(sx):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},$ft=function i(e){return!e||e._ts&&i(e.parent)},p9=function(e){return e._repeat?Jg(e._tTime,e=e.duration()+e._rDelay)*e:0},Jg=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},Kx=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},gE=function(e){return e._end=ja(e._start+(e._tDur/Math.abs(e._ts||e._rts||Rr)||0))},vE=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=ja(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),gE(e),n._dirty||E0(n,e)),e},w$=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Kx(e.rawTime(),t),(!t._dur||xb(0,t.totalDuration(),n)-t._tTime>Rr)&&t.render(n,!0)),E0(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Rr}},Ku=function(e,t,n,r){return t.parent&&np(t),t._start=ja((Bf(n)?n:n||e!==ds?yc(e,n,t):e._time)+t._delay),t._end=ja(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),y$(e,t,"_first","_last",e._sort?"_start":0),xT(t)||(e._recent=t),r||w$(e,t),e._ts<0&&vE(e,e._tTime),e},x$=function(e,t){return(nc.ScrollTrigger||NP("scrollTrigger",t))&&nc.ScrollTrigger.create(t,e)},C$=function(e,t,n,r,s){if(HP(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!ho&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&g$!==Yl.frame)return Vd.push(e),e._lazy=[s,r],1},Gft=function i(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||i(t))},xT=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},Qft=function(e,t,n,r){var s=e.ratio,a=t<0||!t&&(!e._start&&Gft(e)&&!(!e._initted&&xT(e))||(e._ts<0||e._dp._ts<0)&&!xT(e))?0:1,o=e._rDelay,l=0,c,u,h;if(o&&e._repeat&&(l=xb(0,e._tDur,t),u=Jg(l,o),e._yoyo&&u&1&&(a=1-a),u!==Jg(e._tTime,o)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||ho||r||e._zTime===Rr||!t&&e._zTime){if(!e._initted&&C$(e,t,r,n,l))return;for(h=e._zTime,e._zTime=t||(n?Rr:0),n||(n=t&&!h),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=l,c=e._pt;c;)c.r(a,c.d),c=c._next;t<0&&wT(e,t,n,!0),e._onUpdate&&!n&&Lc(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&Lc(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&np(e,1),!n&&!ho&&(Lc(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},qft=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},Zg=function(e,t,n,r){var s=e._repeat,a=ja(t)||0,o=e._tTime/e._tDur;return o&&!r&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:ja(a*(s+1)+e._rDelay*s):a,o>0&&!r&&vE(e,e._tTime=e._tDur*o),e.parent&&gE(e),n||E0(e.parent,e),e},m9=function(e){return e instanceof ul?E0(e):Zg(e,e._dur)},jft={_start:0,endTime:Q1,totalDuration:Q1},yc=function i(e,t,n){var r=e.labels,s=e._recent||jft,a=e.duration()>=Rc?s.endTime(!1):e._dur,o,l,c;return $a(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c=t.substr(-1)==="%",o=t.indexOf("="),l==="<"||l===">"?(o>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(o<0?s:n).totalDuration()/100:1)):o<0?(t in r||(r[t]=a),r[t]):(l=parseFloat(t.charAt(o-1)+t.substr(o+1)),c&&n&&(l=l/100*(fo(n)?n[0]:n).totalDuration()),o>1?i(e,t.substr(0,o-1),n)+l:a+l)):t==null?a:+t},f1=function(e,t,n){var r=Bf(t[1]),s=(r?2:1)+(e<2?0:1),a=t[s],o,l;if(r&&(a.duration=t[1]),a.parent=n,e){for(o=a,l=n;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=pl(l.vars.inherit)&&l.parent;a.immediateRender=pl(o.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new aa(t[0],a,t[s+1])},gp=function(e,t){return e||e===0?t(e):t},xb=function(e,t,n){return n<e?e:n>t?t:n},ao=function(e,t){return!$a(e)||!(t=Oft.exec(e))?"":t[1]},Wft=function(e,t,n){return gp(n,function(r){return xb(e,t,r)})},CT=[].slice,E$=function(e,t){return e&&bh(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&bh(e[0]))&&!e.nodeType&&e!==xc},Yft=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(r){var s;return $a(r)&&!t||E$(r,1)?(s=n).push.apply(s,Dc(r)):n.push(r)})||n},Dc=function(e,t,n){return ks&&!t&&ks.selector?ks.selector(e):$a(e)&&!n&&(bT||!ev())?CT.call((t||OP).querySelectorAll(e),0):fo(e)?Yft(e,n):E$(e)?CT.call(e,0):e?[e]:[]},ET=function(e){return e=Dc(e)[0]||Wx("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Dc(t,n.querySelectorAll?n:n===e?Wx("Invalid scope")||OP.createElement("div"):e)}},S$=function(e){return e.sort(function(){return .5-Math.random()})},M$=function(e){if(Ls(e))return e;var t=bh(e)?e:{each:e},n=S0(t.ease),r=t.from||0,s=parseFloat(t.base)||0,a={},o=r>0&&r<1,l=isNaN(r)||o,c=t.axis,u=r,h=r;return $a(r)?u=h={center:.5,edges:.5,end:1}[r]||0:!o&&l&&(u=r[0],h=r[1]),function(f,d,g){var v=(g||t).length,A=a[v],_,y,x,C,S,I,P,B,M;if(!A){if(M=t.grid==="auto"?0:(t.grid||[1,Rc])[1],!M){for(P=-Rc;P<(P=g[M++].getBoundingClientRect().left)&&M<v;);M--}for(A=a[v]=[],_=l?Math.min(M,v)*u-.5:r%M,y=M===Rc?0:l?v*h/M-.5:r/M|0,P=0,B=Rc,I=0;I<v;I++)x=I%M-_,C=y-(I/M|0),A[I]=S=c?Math.abs(c==="y"?C:x):l$(x*x+C*C),S>P&&(P=S),S<B&&(B=S);r==="random"&&S$(A),A.max=P-B,A.min=B,A.v=v=(parseFloat(t.amount)||parseFloat(t.each)*(M>v?v-1:c?c==="y"?v/M:M:Math.max(M,v/M))||0)*(r==="edges"?-1:1),A.b=v<0?s-v:s,A.u=ao(t.amount||t.each)||0,n=n&&v<0?N$(n):n}return v=(A[f]-A.min)/A.max||0,ja(A.b+(n?n(v):v)*A.v)+A.u}},ST=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=ja(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(Bf(n)?0:ao(n))}},T$=function(e,t){var n=fo(e),r,s;return!n&&bh(e)&&(r=n=e.radius||Rc,e.values?(e=Dc(e.values),(s=!Bf(e[0]))&&(r*=r)):e=ST(e.increment)),gp(t,n?Ls(e)?function(a){return s=e(a),Math.abs(s-a)<=r?s:a}:function(a){for(var o=parseFloat(s?a.x:a),l=parseFloat(s?a.y:0),c=Rc,u=0,h=e.length,f,d;h--;)s?(f=e[h].x-o,d=e[h].y-l,f=f*f+d*d):f=Math.abs(e[h]-o),f<c&&(c=f,u=h);return u=!r||c<=r?e[u]:a,s||u===a||Bf(a)?u:u+ao(a)}:ST(e))},I$=function(e,t,n,r){return gp(fo(e)?!t:n===!0?!!(n=0):!r,function(){return fo(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*r)/r})},Xft=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduce(function(s,a){return a(s)},r)}},Kft=function(e,t){return function(n){return e(parseFloat(n))+(t||ao(n))}},Jft=function(e,t,n){return k$(e,t,0,1,n)},P$=function(e,t,n){return gp(n,function(r){return e[~~t(r)]})},Zft=function i(e,t,n){var r=t-e;return fo(e)?P$(e,i(0,e.length),t):gp(n,function(s){return(r+(s-e)%r)%r+e})},edt=function i(e,t,n){var r=t-e,s=r*2;return fo(e)?P$(e,i(0,e.length-1),t):gp(n,function(a){return a=(s+(a-e)%s)%s||0,e+(a>r?s-a:a)})},q1=function(e){for(var t=0,n="",r,s,a,o;~(r=e.indexOf("random(",t));)a=e.indexOf(")",r),o=e.charAt(r+7)==="[",s=e.substr(r+7,a-r-7).match(o?f$:AT),n+=e.substr(t,r-t)+I$(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),t=a+1;return n+e.substr(t,e.length-t)},k$=function(e,t,n,r,s){var a=t-e,o=r-n;return gp(s,function(l){return n+((l-e)/a*o||0)})},tdt=function i(e,t,n,r){var s=isNaN(e+t)?0:function(d){return(1-d)*e+d*t};if(!s){var a=$a(e),o={},l,c,u,h,f;if(n===!0&&(r=1)&&(n=null),a)e={p:e},t={p:t};else if(fo(e)&&!fo(t)){for(u=[],h=e.length,f=h-2,c=1;c<h;c++)u.push(i(e[c-1],e[c]));h--,s=function(g){g*=h;var v=Math.min(f,~~g);return u[v](g-v)},n=t}else r||(e=z0(fo(e)?[]:{},e));if(!u){for(l in t)VP.call(o,e,l,"get",t[l]);s=function(g){return QP(g,o)||(a?e.p:e)}}}return gp(n,s)},g9=function(e,t,n){var r=e.labels,s=Rc,a,o,l;for(a in r)o=r[a]-t,o<0==!!n&&o&&s>(o=Math.abs(o))&&(l=a,s=o);return l},Lc=function(e,t,n){var r=e.vars,s=r[t],a=ks,o=e._ctx,l,c,u;if(s)return l=r[t+"Params"],c=r.callbackScope||e,n&&Vd.length&&Yx(),o&&(ks=o),u=l?s.apply(c,l):s.call(c),ks=a,u},K_=function(e){return np(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ho),e.progress()<1&&Lc(e,"onInterrupt"),e},yg,B$=[],R$=function(e){if(LP()&&e){e=!e.name&&e.default||e;var t=e.name,n=Ls(e),r=t&&!n&&e.init?function(){this._props=[]}:e,s={init:Q1,render:QP,add:VP,kill:vdt,modifier:gdt,rawVars:0},a={targetTest:0,get:0,getSetter:GP,aliases:{},register:0};if(ev(),e!==r){if(Gl[t])return;Uc(r,Uc(Xx(e,s),a)),z0(r.prototype,z0(s,Xx(e,a))),Gl[r.prop=t]=r,e.targetTest&&(ax.push(r),FP[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}m$(t,r),e.register&&e.register(yl,r,gl)}else e&&B$.push(e)},Br=255,J_={aqua:[0,Br,Br],lime:[0,Br,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Br],navy:[0,0,128],white:[Br,Br,Br],olive:[128,128,0],yellow:[Br,Br,0],orange:[Br,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Br,0,0],pink:[Br,192,203],cyan:[0,Br,Br],transparent:[Br,Br,Br,0]},C3=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*Br+.5|0},D$=function(e,t,n){var r=e?Bf(e)?[e>>16,e>>8&Br,e&Br]:0:J_.black,s,a,o,l,c,u,h,f,d,g;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),J_[e])r=J_[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),o=e.charAt(3),e="#"+s+s+a+a+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&Br,r&Br,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&Br,e&Br]}else if(e.substr(0,3)==="hsl"){if(r=g=e.match(AT),!t)l=+r[0]%360/360,c=+r[1]/100,u=+r[2]/100,a=u<=.5?u*(c+1):u+c-u*c,s=u*2-a,r.length>3&&(r[3]*=1),r[0]=C3(l+1/3,s,a),r[1]=C3(l,s,a),r[2]=C3(l-1/3,s,a);else if(~e.indexOf("="))return r=e.match(u$),n&&r.length<4&&(r[3]=1),r}else r=e.match(AT)||J_.transparent;r=r.map(Number)}return t&&!g&&(s=r[0]/Br,a=r[1]/Br,o=r[2]/Br,h=Math.max(s,a,o),f=Math.min(s,a,o),u=(h+f)/2,h===f?l=c=0:(d=h-f,c=u>.5?d/(2-h-f):d/(h+f),l=h===s?(a-o)/d+(a<o?6:0):h===a?(o-s)/d+2:(s-a)/d+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(u*100+.5)),n&&r.length<4&&(r[3]=1),r},L$=function(e){var t=[],n=[],r=-1;return e.split(Hd).forEach(function(s){var a=s.match(bg)||[];t.push.apply(t,a),n.push(r+=a.length+1)}),t.c=n,t},v9=function(e,t,n){var r="",s=(e+r).match(Hd),a=t?"hsla(":"rgba(",o=0,l,c,u,h;if(!s)return e;if(s=s.map(function(f){return(f=D$(f,t,1))&&a+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),n&&(u=L$(e),l=n.c,l.join(r)!==u.c.join(r)))for(c=e.replace(Hd,"1").split(bg),h=c.length-1;o<h;o++)r+=c[o]+(~l.indexOf(o)?s.shift()||a+"0,0,0,0)":(u.length?u:s.length?s:n).shift());if(!c)for(c=e.split(Hd),h=c.length-1;o<h;o++)r+=c[o]+s[o];return r+c[h]},Hd=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in J_)i+="|"+e+"\\b";return new RegExp(i+")","gi")}(),ndt=/hsl[a]?\(/,O$=function(e){var t=e.join(" "),n;if(Hd.lastIndex=0,Hd.test(t))return n=ndt.test(t),e[1]=v9(e[1],n),e[0]=v9(e[0],n,L$(e[1])),!0},j1,Yl=function(){var i=Date.now,e=500,t=33,n=i(),r=n,s=1e3/240,a=s,o=[],l,c,u,h,f,d,g=function v(A){var _=i()-r,y=A===!0,x,C,S,I;if(_>e&&(n+=_-t),r+=_,S=r-n,x=S-a,(x>0||y)&&(I=++h.frame,f=S-h.time*1e3,h.time=S=S/1e3,a+=x+(x>=s?4:s-x),C=1),y||(l=c(v)),C)for(d=0;d<o.length;d++)o[d](S,f,I,A)};return h={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(A){return f/(1e3/(A||60))},wake:function(){d$&&(!bT&&LP()&&(xc=bT=window,OP=xc.document||{},nc.gsap=yl,(xc.gsapVersions||(xc.gsapVersions=[])).push(yl.version),p$(jx||xc.GreenSockGlobals||!xc.gsap&&xc||{}),u=xc.requestAnimationFrame,B$.forEach(R$)),l&&h.sleep(),c=u||function(A){return setTimeout(A,a-h.time*1e3+1|0)},j1=1,g(2))},sleep:function(){(u?xc.cancelAnimationFrame:clearTimeout)(l),j1=0,c=Q1},lagSmoothing:function(A,_){e=A||1/0,t=Math.min(_||33,e)},fps:function(A){s=1e3/(A||240),a=h.time*1e3+s},add:function(A,_,y){var x=_?function(C,S,I,P){A(C,S,I,P),h.remove(x)}:A;return h.remove(A),o[y?"unshift":"push"](x),ev(),x},remove:function(A,_){~(_=o.indexOf(A))&&o.splice(_,1)&&d>=_&&d--},_listeners:o},h}(),ev=function(){return!j1&&Yl.wake()},$i={},idt=/^[\d.\-M][\d.\-,\s]/,rdt=/["']/g,sdt=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),r=n[0],s=1,a=n.length,o,l,c;s<a;s++)l=n[s],o=s!==a-1?l.lastIndexOf(","):l.length,c=l.substr(0,o),t[r]=isNaN(c)?c.replace(rdt,"").trim():+c,r=l.substr(o+1).trim();return t},adt=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)},odt=function(e){var t=(e+"").split("("),n=$i[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[sdt(t[1])]:adt(e).split(",").map(A$)):$i._CE&&idt.test(e)?$i._CE("",e):n},N$=function(e){return function(t){return 1-e(1-t)}},F$=function i(e,t){for(var n=e._first,r;n;)n instanceof ul?i(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?i(n.timeline,t):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=t)),n=n._next},S0=function(e,t){return e&&(Ls(e)?e:$i[e]||odt(e))||t},om=function(e,t,n,r){n===void 0&&(n=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:r},a;return ml(e,function(o){$i[o]=nc[o]=s,$i[a=o.toLowerCase()]=n;for(var l in s)$i[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=$i[o+"."+l]=s[l]}),s},z$=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},E3=function i(e,t,n){var r=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),a=s/_T*(Math.asin(1/r)||0),o=function(u){return u===1?1:r*Math.pow(2,-10*u)*Lft((u-a)*s)+1},l=e==="out"?o:e==="in"?function(c){return 1-o(1-c)}:z$(o);return s=_T/s,l.config=function(c,u){return i(e,c,u)},l},S3=function i(e,t){t===void 0&&(t=1.70158);var n=function(a){return a?--a*a*((t+1)*a+t)+1:0},r=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:z$(n);return r.config=function(s){return i(e,s)},r};ml("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,e){var t=e<5?e+1:e;om(i+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});$i.Linear.easeNone=$i.none=$i.Linear.easeIn;om("Elastic",E3("in"),E3("out"),E3());(function(i,e){var t=1/e,n=2*t,r=2.5*t,s=function(o){return o<t?i*o*o:o<n?i*Math.pow(o-1.5/e,2)+.75:o<r?i*(o-=2.25/e)*o+.9375:i*Math.pow(o-2.625/e,2)+.984375};om("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);om("Expo",function(i){return i?Math.pow(2,10*(i-1)):0});om("Circ",function(i){return-(l$(1-i*i)-1)});om("Sine",function(i){return i===1?1:-Dft(i*Bft)+1});om("Back",S3("in"),S3("out"),S3());$i.SteppedEase=$i.steps=nc.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,r=e+(t?0:1),s=t?1:0,a=1-Rr;return function(o){return((r*xb(0,a,o)|0)+s)*n}}};Kg.ease=$i["quad.out"];ml("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return zP+=i+","+i+"Params,"});var U$=function(e,t){this.id=Rft++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:v$,this.set=t?t.getSetter:GP},W1=function(){function i(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Zg(this,+t.duration,1,1),this.data=t.data,ks&&(this._ctx=ks,ks.data.push(this)),j1||Yl.wake()}var e=i.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,Zg(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,r){if(ev(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(vE(this,n),!s._dp||s.parent||w$(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Ku(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Rr||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),_$(this,n,r)),this},e.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+p9(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},e.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+p9(this),r):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?Jg(this._tTime,s)+1:1},e.timeScale=function(n){if(!arguments.length)return this._rts===-Rr?0:this._rts;if(this._rts===n)return this;var r=this.parent&&this._ts?Kx(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Rr?0:this._rts,this.totalTime(xb(-Math.abs(this._delay),this._tDur,r),!0),gE(this),Hft(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ev(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Rr&&(this._tTime-=Rr)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Ku(r,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(pl(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Kx(r.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=Fft);var r=ho;return ho=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),ho=r,this},e.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(r._ts||1),r=r._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1/0:this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,m9(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,m9(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,r){return this.totalTime(yc(this,n),pl(r))},e.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,pl(r))},e.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},e.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Rr:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Rr,this},e.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-Rr)},e.eventCallback=function(n,r,s){var a=this.vars;return arguments.length>1?(r?(a[n]=r,s&&(a[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete a[n],this):a[n]},e.then=function(n){var r=this;return new Promise(function(s){var a=Ls(n)?n:b$,o=function(){var c=r.then;r.then=null,Ls(a)&&(a=a(r))&&(a.then||a===r)&&(r.then=c),s(a),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?o():r._prom=o})},e.kill=function(){K_(this)},i}();Uc(W1.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Rr,_prom:0,_ps:!1,_rts:1});var ul=function(i){o$(e,i);function e(n,r){var s;return n===void 0&&(n={}),s=i.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=pl(n.sortChildren),ds&&Ku(n.parent||ds,df(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&x$(df(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,a){return f1(0,arguments,this),this},t.from=function(r,s,a){return f1(1,arguments,this),this},t.fromTo=function(r,s,a,o){return f1(2,arguments,this),this},t.set=function(r,s,a){return s.duration=0,s.parent=this,h1(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new aa(r,s,yc(this,a),1),this},t.call=function(r,s,a){return Ku(this,aa.delayedCall(0,r,s),a)},t.staggerTo=function(r,s,a,o,l,c,u){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=c,a.onCompleteParams=u,a.parent=this,new aa(r,a,yc(this,l)),this},t.staggerFrom=function(r,s,a,o,l,c,u){return a.runBackwards=1,h1(a).immediateRender=pl(a.immediateRender),this.staggerTo(r,s,a,o,l,c,u)},t.staggerFromTo=function(r,s,a,o,l,c,u,h){return o.startAt=a,h1(o).immediateRender=pl(o.immediateRender),this.staggerTo(r,s,o,l,c,u,h)},t.render=function(r,s,a){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=r<=0?0:ja(r),h=this._zTime<0!=r<0&&(this._initted||!c),f,d,g,v,A,_,y,x,C,S,I,P;if(this!==ds&&u>l&&r>=0&&(u=l),u!==this._tTime||a||h){if(o!==this._time&&c&&(u+=this._time-o,r+=this._time-o),f=u,C=this._start,x=this._ts,_=!x,h&&(c||(o=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(I=this._yoyo,A=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(A*100+r,s,a);if(f=ja(u%A),u===l?(v=this._repeat,f=c):(v=~~(u/A),v&&v===u/A&&(f=c,v--),f>c&&(f=c)),S=Jg(this._tTime,A),!o&&this._tTime&&S!==v&&this._tTime-S*A-this._dur<=0&&(S=v),I&&v&1&&(f=c-f,P=1),v!==S&&!this._lock){var B=I&&S&1,M=B===(I&&v&1);if(v<S&&(B=!B),o=B?0:u%c?c:u,this._lock=1,this.render(o||(P?0:ja(v*A)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&Lc(this,"onRepeat"),this.vars.repeatRefresh&&!P&&(this.invalidate()._lock=1),o&&o!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,M&&(this._lock=2,o=B?c:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!P&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;F$(this,P)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=qft(this,ja(o),ja(f)),y&&(u-=f-(f=y._start))),this._tTime=u,this._time=f,this._act=!x,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,o=0),!o&&f&&!s&&!v&&(Lc(this,"onStart"),this._tTime!==u))return this;if(f>=o&&r>=0)for(d=this._first;d;){if(g=d._next,(d._act||f>=d._start)&&d._ts&&y!==d){if(d.parent!==this)return this.render(r,s,a);if(d.render(d._ts>0?(f-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(f-d._start)*d._ts,s,a),f!==this._time||!this._ts&&!_){y=0,g&&(u+=this._zTime=-Rr);break}}d=g}else{d=this._last;for(var D=r<0?r:f;d;){if(g=d._prev,(d._act||D<=d._end)&&d._ts&&y!==d){if(d.parent!==this)return this.render(r,s,a);if(d.render(d._ts>0?(D-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(D-d._start)*d._ts,s,a||ho&&(d._initted||d._startAt)),f!==this._time||!this._ts&&!_){y=0,g&&(u+=this._zTime=D?-Rr:Rr);break}}d=g}}if(y&&!s&&(this.pause(),y.render(f>=o?0:-Rr)._zTime=f>=o?1:-1,this._ts))return this._start=C,gE(this),this.render(r,s,a);this._onUpdate&&!s&&Lc(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&o)&&(C===this._start||Math.abs(x)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&np(this,1),!s&&!(r<0&&!o)&&(u||o||!l)&&(Lc(this,u===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var a=this;if(Bf(s)||(s=yc(this,s,r)),!(r instanceof W1)){if(fo(r))return r.forEach(function(o){return a.add(o,s)}),this;if($a(r))return this.addLabel(r,s);if(Ls(r))r=aa.delayedCall(0,r);else return this}return this!==r?Ku(this,r,s):this},t.getChildren=function(r,s,a,o){r===void 0&&(r=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-Rc);for(var l=[],c=this._first;c;)c._start>=o&&(c instanceof aa?s&&l.push(c):(a&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,a)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===r)return s[a]},t.remove=function(r){return $a(r)?this.removeLabel(r):Ls(r)?this.killTweensOf(r):(mE(this,r),r===this._recent&&(this._recent=this._last),E0(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ja(Yl.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=yc(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,a){var o=aa.delayedCall(0,s||Q1,a);return o.data="isPause",this._hasPause=1,Ku(this,o,yc(this,r))},t.removePause=function(r){var s=this._first;for(r=yc(this,r);s;)s._start===r&&s.data==="isPause"&&np(s),s=s._next},t.killTweensOf=function(r,s,a){for(var o=this.getTweensOf(r,a),l=o.length;l--;)kd!==o[l]&&o[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var a=[],o=Dc(r),l=this._first,c=Bf(s),u;l;)l instanceof aa?zft(l._targets,o)&&(c?(!kd||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&a.push(l):(u=l.getTweensOf(o,s)).length&&a.push.apply(a,u),l=l._next;return a},t.tweenTo=function(r,s){s=s||{};var a=this,o=yc(a,r),l=s,c=l.startAt,u=l.onStart,h=l.onStartParams,f=l.immediateRender,d,g=aa.to(a,Uc({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale())||Rr,onStart:function(){if(a.pause(),!d){var A=s.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale());g._dur!==A&&Zg(g,A,0,1).render(g._time,!0,!0),d=1}u&&u.apply(g,h||[])}},s));return f?g.render(0):g},t.tweenFromTo=function(r,s,a){return this.tweenTo(s,Uc({startAt:{time:yc(this,r)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),g9(this,yc(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),g9(this,yc(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Rr)},t.shiftChildren=function(r,s,a){a===void 0&&(a=0);for(var o=this._first,l=this.labels,c;o;)o._start>=a&&(o._start+=r,o._end+=r),o=o._next;if(s)for(c in l)l[c]>=a&&(l[c]+=r);return E0(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return i.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),E0(this)},t.totalDuration=function(r){var s=0,a=this,o=a._last,l=Rc,c,u,h;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-r:r));if(a._dirty){for(h=a.parent;o;)c=o._prev,o._dirty&&o.totalDuration(),u=o._start,u>l&&a._sort&&o._ts&&!a._lock?(a._lock=1,Ku(a,o,u-o._delay,1)._lock=0):l=u,u<0&&o._ts&&(s-=u,(!h&&!a._dp||h&&h.smoothChildTiming)&&(a._start+=u/a._ts,a._time-=u,a._tTime-=u),a.shiftChildren(-u,!1,-1/0),l=0),o._end>s&&o._ts&&(s=o._end),o=c;Zg(a,a===ds&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(r){if(ds._ts&&(_$(ds,Kx(r,ds)),g$=Yl.frame),Yl.frame>=f9){f9+=Zl.autoSleep||120;var s=ds._first;if((!s||!s._ts)&&Zl.autoSleep&&Yl._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Yl.sleep()}}},e}(W1);Uc(ul.prototype,{_lock:0,_hasPause:0,_forcing:0});var ldt=function(e,t,n,r,s,a,o){var l=new gl(this._pt,e,t,0,1,q$,null,s),c=0,u=0,h,f,d,g,v,A,_,y;for(l.b=n,l.e=r,n+="",r+="",(_=~r.indexOf("random("))&&(r=q1(r)),a&&(y=[n,r],a(y,e,t),n=y[0],r=y[1]),f=n.match(w3)||[];h=w3.exec(r);)g=h[0],v=r.substring(c,h.index),d?d=(d+1)%5:v.substr(-5)==="rgba("&&(d=1),g!==f[u++]&&(A=parseFloat(f[u-1])||0,l._pt={_next:l._pt,p:v||u===1?v:",",s:A,c:g.charAt(1)==="="?Mg(A,g)-A:parseFloat(g)-A,m:d&&d<4?Math.round:0},c=w3.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=o,(h$.test(r)||_)&&(l.e=0),this._pt=l,l},VP=function(e,t,n,r,s,a,o,l,c,u){Ls(r)&&(r=r(s||0,e,a));var h=e[t],f=n!=="get"?n:Ls(h)?c?e[t.indexOf("set")||!Ls(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():h,d=Ls(h)?c?ddt:G$:$P,g;if($a(r)&&(~r.indexOf("random(")&&(r=q1(r)),r.charAt(1)==="="&&(g=Mg(f,r)+(ao(f)||0),(g||g===0)&&(r=g))),!u||f!==r||MT)return!isNaN(f*r)&&r!==""?(g=new gl(this._pt,e,t,+f||0,r-(f||0),typeof h=="boolean"?mdt:Q$,0,d),c&&(g.fp=c),o&&g.modifier(o,this,e),this._pt=g):(!h&&!(t in e)&&NP(t,r),ldt.call(this,e,t,f,r,d,l||Zl.stringFilter,c))},cdt=function(e,t,n,r,s){if(Ls(e)&&(e=d1(e,s,t,n,r)),!bh(e)||e.style&&e.nodeType||fo(e)||c$(e))return $a(e)?d1(e,s,t,n,r):e;var a={},o;for(o in e)a[o]=d1(e[o],s,t,n,r);return a},V$=function(e,t,n,r,s,a){var o,l,c,u;if(Gl[e]&&(o=new Gl[e]).init(s,o.rawVars?t[e]:cdt(t[e],r,s,a,n),n,r,a)!==!1&&(n._pt=l=new gl(n._pt,s,e,0,1,o.render,o,0,o.priority),n!==yg))for(c=n._ptLookup[n._targets.indexOf(s)],u=o._props.length;u--;)c[o._props[u]]=l;return o},kd,MT,HP=function i(e,t,n){var r=e.vars,s=r.ease,a=r.startAt,o=r.immediateRender,l=r.lazy,c=r.onUpdate,u=r.onUpdateParams,h=r.callbackScope,f=r.runBackwards,d=r.yoyoEase,g=r.keyframes,v=r.autoRevert,A=e._dur,_=e._startAt,y=e._targets,x=e.parent,C=x&&x.data==="nested"?x.vars.targets:y,S=e._overwrite==="auto"&&!RP,I=e.timeline,P,B,M,D,F,z,U,$,O,ie,W,J,Ce;if(I&&(!g||!s)&&(s="none"),e._ease=S0(s,Kg.ease),e._yEase=d?N$(S0(d===!0?s:d,Kg.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!I&&!!r.runBackwards,!I||g&&!r.stagger){if($=y[0]?C0(y[0]).harness:0,J=$&&r[$.prop],P=Xx(r,FP),_&&(_._zTime<0&&_.progress(1),t<0&&f&&o&&!v?_.render(-1,!0):_.revert(f&&A?sx:Nft),_._lazy=0),a){if(np(e._startAt=aa.set(y,Uc({data:"isStart",overwrite:!1,parent:x,immediateRender:!0,lazy:!_&&pl(l),startAt:null,delay:0,onUpdate:c,onUpdateParams:u,callbackScope:h,stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ho||!o&&!v)&&e._startAt.revert(sx),o&&A&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(f&&A&&!_){if(t&&(o=!1),M=Uc({overwrite:!1,data:"isFromStart",lazy:o&&!_&&pl(l),immediateRender:o,stagger:0,parent:x},P),J&&(M[$.prop]=J),np(e._startAt=aa.set(y,M)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ho?e._startAt.revert(sx):e._startAt.render(-1,!0)),e._zTime=t,!o)i(e._startAt,Rr,Rr);else if(!t)return}for(e._pt=e._ptCache=0,l=A&&pl(l)||l&&!A,B=0;B<y.length;B++){if(F=y[B],U=F._gsap||UP(y)[B]._gsap,e._ptLookup[B]=ie={},yT[U.id]&&Vd.length&&Yx(),W=C===y?B:C.indexOf(F),$&&(O=new $).init(F,J||P,e,W,C)!==!1&&(e._pt=D=new gl(e._pt,F,O.name,0,1,O.render,O,0,O.priority),O._props.forEach(function(Me){ie[Me]=D}),O.priority&&(z=1)),!$||J)for(M in P)Gl[M]&&(O=V$(M,P,e,W,F,C))?O.priority&&(z=1):ie[M]=D=VP.call(e,F,M,"get",P[M],W,C,0,r.stringFilter);e._op&&e._op[B]&&e.kill(F,e._op[B]),S&&e._pt&&(kd=e,ds.killTweensOf(F,ie,e.globalTime(t)),Ce=!e.parent,kd=0),e._pt&&l&&(yT[U.id]=1)}z&&j$(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!Ce,g&&t<=0&&I.render(Rc,!0,!0)},udt=function(e,t,n,r,s,a,o){var l=(e._pt&&e._ptCache||(e._ptCache={}))[t],c,u,h,f;if(!l)for(l=e._ptCache[t]=[],h=e._ptLookup,f=e._targets.length;f--;){if(c=h[f][t],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==t&&c.fp!==t;)c=c._next;if(!c)return MT=1,e.vars[t]="+=0",HP(e,o),MT=0,1;l.push(c)}for(f=l.length;f--;)u=l[f],c=u._pt||u,c.s=(r||r===0)&&!s?r:c.s+(r||0)+a*c.c,c.c=n-c.s,u.e&&(u.e=Gs(n)+ao(u.e)),u.b&&(u.b=c.s+ao(u.b))},hdt=function(e,t){var n=e[0]?C0(e[0]).harness:0,r=n&&n.aliases,s,a,o,l;if(!r)return t;s=z0({},t);for(a in r)if(a in s)for(l=r[a].split(","),o=l.length;o--;)s[l[o]]=s[a];return s},fdt=function(e,t,n,r){var s=t.ease||r||"power1.inOut",a,o;if(fo(t))o=n[e]||(n[e]=[]),t.forEach(function(l,c){return o.push({t:c/(t.length-1)*100,v:l,e:s})});else for(a in t)o=n[a]||(n[a]=[]),a==="ease"||o.push({t:parseFloat(e),v:t[a],e:s})},d1=function(e,t,n,r,s){return Ls(e)?e.call(t,n,r,s):$a(e)&&~e.indexOf("random(")?q1(e):e},H$=zP+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",$$={};ml(H$+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return $$[i]=1});var aa=function(i){o$(e,i);function e(n,r,s,a){var o;typeof r=="number"&&(s.duration=r,r=s,s=null),o=i.call(this,a?r:h1(r))||this;var l=o.vars,c=l.duration,u=l.delay,h=l.immediateRender,f=l.stagger,d=l.overwrite,g=l.keyframes,v=l.defaults,A=l.scrollTrigger,_=l.yoyoEase,y=r.parent||ds,x=(fo(n)||c$(n)?Bf(n[0]):"length"in r)?[n]:Dc(n),C,S,I,P,B,M,D,F;if(o._targets=x.length?UP(x):Wx("GSAP target "+n+" not found. https://greensock.com",!Zl.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=d,g||f||Bw(c)||Bw(u)){if(r=o.vars,C=o.timeline=new ul({data:"nested",defaults:v||{},targets:y&&y.data==="nested"?y.vars.targets:x}),C.kill(),C.parent=C._dp=df(o),C._start=0,f||Bw(c)||Bw(u)){if(P=x.length,D=f&&M$(f),bh(f))for(B in f)~H$.indexOf(B)&&(F||(F={}),F[B]=f[B]);for(S=0;S<P;S++)I=Xx(r,$$),I.stagger=0,_&&(I.yoyoEase=_),F&&z0(I,F),M=x[S],I.duration=+d1(c,df(o),S,M,x),I.delay=(+d1(u,df(o),S,M,x)||0)-o._delay,!f&&P===1&&I.delay&&(o._delay=u=I.delay,o._start+=u,I.delay=0),C.to(M,I,D?D(S,M,x):0),C._ease=$i.none;C.duration()?c=u=0:o.timeline=0}else if(g){h1(Uc(C.vars.defaults,{ease:"none"})),C._ease=S0(g.ease||r.ease||"none");var z=0,U,$,O;if(fo(g))g.forEach(function(ie){return C.to(x,ie,">")}),C.duration();else{I={};for(B in g)B==="ease"||B==="easeEach"||fdt(B,g[B],I,g.easeEach);for(B in I)for(U=I[B].sort(function(ie,W){return ie.t-W.t}),z=0,S=0;S<U.length;S++)$=U[S],O={ease:$.e,duration:($.t-(S?U[S-1].t:0))/100*c},O[B]=$.v,C.to(x,O,z),z+=O.duration;C.duration()<c&&C.to({},{duration:c-C.duration()})}}c||o.duration(c=C.duration())}else o.timeline=0;return d===!0&&!RP&&(kd=df(o),ds.killTweensOf(x),kd=0),Ku(y,df(o),s),r.reversed&&o.reverse(),r.paused&&o.paused(!0),(h||!c&&!g&&o._start===ja(y._time)&&pl(h)&&$ft(df(o))&&y.data!=="nested")&&(o._tTime=-Rr,o.render(Math.max(0,-u)||0)),A&&x$(df(o),A),o}var t=e.prototype;return t.render=function(r,s,a){var o=this._time,l=this._tDur,c=this._dur,u=r<0,h=r>l-Rr&&!u?l:r<Rr?0:r,f,d,g,v,A,_,y,x,C;if(!c)Qft(this,r,s,a);else if(h!==this._tTime||!r||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(f=h,x=this.timeline,this._repeat){if(v=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(v*100+r,s,a);if(f=ja(h%v),h===l?(g=this._repeat,f=c):(g=~~(h/v),g&&g===h/v&&(f=c,g--),f>c&&(f=c)),_=this._yoyo&&g&1,_&&(C=this._yEase,f=c-f),A=Jg(this._tTime,v),f===o&&!a&&this._initted)return this._tTime=h,this;g!==A&&(x&&this._yEase&&F$(x,_),this.vars.repeatRefresh&&!_&&!this._lock&&(this._lock=a=1,this.render(ja(v*g),!0).invalidate()._lock=0))}if(!this._initted){if(C$(this,u?r:f,a,s,h))return this._tTime=0,this;if(o!==this._time)return this;if(c!==this._dur)return this.render(r,s,a)}if(this._tTime=h,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(C||this._ease)(f/c),this._from&&(this.ratio=y=1-y),f&&!o&&!s&&!g&&(Lc(this,"onStart"),this._tTime!==h))return this;for(d=this._pt;d;)d.r(y,d.d),d=d._next;x&&x.render(r<0?r:!f&&_?-Rr:x._dur*x._ease(f/this._dur),s,a)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&wT(this,r,s,a),Lc(this,"onUpdate")),this._repeat&&g!==A&&this.vars.onRepeat&&!s&&this.parent&&Lc(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(u&&!this._onUpdate&&wT(this,r,!0,!0),(r||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&np(this,1),!s&&!(u&&!o)&&(h||o||_)&&(Lc(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,a,o){j1||Yl.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||HP(this,l),c=this._ease(l/this._dur),udt(this,r,s,a,o,c,l)?this.resetTo(r,s,a,o):(vE(this,0),this.parent||y$(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?K_(this):this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,kd&&kd.vars.overwrite!==!0)._first||K_(this),this.parent&&a!==this.timeline.totalDuration()&&Zg(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,l=r?Dc(r):o,c=this._ptLookup,u=this._pt,h,f,d,g,v,A,_;if((!s||s==="all")&&Vft(o,l))return s==="all"&&(this._pt=0),K_(this);for(h=this._op=this._op||[],s!=="all"&&($a(s)&&(v={},ml(s,function(y){return v[y]=1}),s=v),s=hdt(o,s)),_=o.length;_--;)if(~l.indexOf(o[_])){f=c[_],s==="all"?(h[_]=s,g=f,d={}):(d=h[_]=h[_]||{},g=s);for(v in g)A=f&&f[v],A&&((!("kill"in A.d)||A.d.kill(v)===!0)&&mE(this,A,"_pt"),delete f[v]),d!=="all"&&(d[v]=1)}return this._initted&&!this._pt&&u&&K_(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return f1(1,arguments)},e.delayedCall=function(r,s,a,o){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},e.fromTo=function(r,s,a){return f1(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,a){return ds.killTweensOf(r,s,a)},e}(W1);Uc(aa.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ml("staggerTo,staggerFrom,staggerFromTo",function(i){aa[i]=function(){var e=new ul,t=CT.call(arguments,0);return t.splice(i==="staggerFromTo"?5:4,0,0),e[i].apply(e,t)}});var $P=function(e,t,n){return e[t]=n},G$=function(e,t,n){return e[t](n)},ddt=function(e,t,n,r){return e[t](r.fp,n)},pdt=function(e,t,n){return e.setAttribute(t,n)},GP=function(e,t){return Ls(e[t])?G$:DP(e[t])&&e.setAttribute?pdt:$P},Q$=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},mdt=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},q$=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},QP=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},gdt=function(e,t,n,r){for(var s=this._pt,a;s;)a=s._next,s.p===r&&s.modifier(e,t,n),s=a},vdt=function(e){for(var t=this._pt,n,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?mE(this,t,"_pt"):t.dep||(n=1),t=r;return!n},_dt=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},j$=function(e){for(var t=e._pt,n,r,s,a;t;){for(n=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:a)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:a=t,t=n}e._pt=s},gl=function(){function i(t,n,r,s,a,o,l,c,u){this.t=n,this.s=s,this.c=a,this.p=r,this.r=o||Q$,this.d=l||this,this.set=c||$P,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=i.prototype;return e.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=_dt,this.m=n,this.mt=s,this.tween=r},i}();ml(zP+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return FP[i]=1});nc.TweenMax=nc.TweenLite=aa;nc.TimelineLite=nc.TimelineMax=ul;ds=new ul({sortChildren:!1,defaults:Kg,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Zl.stringFilter=O$;var M0=[],ox={},Adt=[],_9=0,bdt=0,M3=function(e){return(ox[e]||Adt).map(function(t){return t()})},TT=function(){var e=Date.now(),t=[];e-_9>2&&(M3("matchMediaInit"),M0.forEach(function(n){var r=n.queries,s=n.conditions,a,o,l,c;for(o in r)a=xc.matchMedia(r[o]).matches,a&&(l=1),a!==s[o]&&(s[o]=a,c=1);c&&(n.revert(),l&&t.push(n))}),M3("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n)}),_9=e,M3("matchMedia"))},W$=function(){function i(t,n){this.selector=n&&ET(n),this.data=[],this._r=[],this.isReverted=!1,this.id=bdt++,t&&this.add(t)}var e=i.prototype;return e.add=function(n,r,s){Ls(n)&&(s=r,r=n,n=Ls);var a=this,o=function(){var c=ks,u=a.selector,h;return c&&c!==a&&c.data.push(a),s&&(a.selector=ET(s)),ks=a,h=r.apply(a,arguments),Ls(h)&&a._r.push(h),ks=c,a.selector=u,a.isReverted=!1,h};return a.last=o,n===Ls?o(a):n?a[n]=o:o},e.ignore=function(n){var r=ks;ks=null,n(this),ks=r},e.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof aa&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,r){var s=this;if(n){var a=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(c){return a.splice(a.indexOf(c),1)}))}),a.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,c){return c.g-l.g||-1/0}).forEach(function(l){return l.t.revert(n)}),this.data.forEach(function(l){return!(l instanceof aa)&&l.revert&&l.revert(n)}),this._r.forEach(function(l){return l(n,s)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),r)for(var o=M0.length;o--;)M0[o].id===this.id&&M0.splice(o,1)},e.revert=function(n){this.kill(n||{})},i}(),ydt=function(){function i(t){this.contexts=[],this.scope=t}var e=i.prototype;return e.add=function(n,r,s){bh(n)||(n={matches:n});var a=new W$(0,s||this.scope),o=a.conditions={},l,c,u;ks&&!a.selector&&(a.selector=ks.selector),this.contexts.push(a),r=a.add("onMatch",r),a.queries=n;for(c in n)c==="all"?u=1:(l=xc.matchMedia(n[c]),l&&(M0.indexOf(a)<0&&M0.push(a),(o[c]=l.matches)&&(u=1),l.addListener?l.addListener(TT):l.addEventListener("change",TT)));return u&&r(a),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),Jx={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(r){return R$(r)})},timeline:function(e){return new ul(e)},getTweensOf:function(e,t){return ds.getTweensOf(e,t)},getProperty:function(e,t,n,r){$a(e)&&(e=Dc(e)[0]);var s=C0(e||{}).get,a=n?b$:A$;return n==="native"&&(n=""),e&&(t?a((Gl[t]&&Gl[t].get||s)(e,t,n,r)):function(o,l,c){return a((Gl[o]&&Gl[o].get||s)(e,o,l,c))})},quickSetter:function(e,t,n){if(e=Dc(e),e.length>1){var r=e.map(function(u){return yl.quickSetter(u,t,n)}),s=r.length;return function(u){for(var h=s;h--;)r[h](u)}}e=e[0]||{};var a=Gl[t],o=C0(e),l=o.harness&&(o.harness.aliases||{})[t]||t,c=a?function(u){var h=new a;yg._pt=0,h.init(e,n?u+n:u,yg,0,[e]),h.render(1,h),yg._pt&&QP(1,yg)}:o.set(e,l);return a?c:function(u){return c(e,l,n?u+n:u,o,1)}},quickTo:function(e,t,n){var r,s=yl.to(e,z0((r={},r[t]="+=0.1",r.paused=!0,r),n||{})),a=function(l,c,u){return s.resetTo(t,l,c,u)};return a.tween=s,a},isTweening:function(e){return ds.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=S0(e.ease,Kg.ease)),d9(Kg,e||{})},config:function(e){return d9(Zl,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,s=e.defaults,a=e.extendTimeline;(r||"").split(",").forEach(function(o){return o&&!Gl[o]&&!nc[o]&&Wx(t+" effect requires "+o+" plugin.")}),x3[t]=function(o,l,c){return n(Dc(o),Uc(l||{},s),c)},a&&(ul.prototype[t]=function(o,l,c){return this.add(x3[t](o,bh(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){$i[e]=S0(t)},parseEase:function(e,t){return arguments.length?S0(e,t):$i},getById:function(e){return ds.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new ul(e),r,s;for(n.smoothChildTiming=pl(e.smoothChildTiming),ds.remove(n),n._dp=0,n._time=n._tTime=ds._time,r=ds._first;r;)s=r._next,(t||!(!r._dur&&r instanceof aa&&r.vars.onComplete===r._targets[0]))&&Ku(n,r,r._start-r._delay),r=s;return Ku(ds,n,0),n},context:function(e,t){return e?new W$(e,t):ks},matchMedia:function(e){return new ydt(e)},matchMediaRefresh:function(){return M0.forEach(function(e){var t=e.conditions,n,r;for(r in t)t[r]&&(t[r]=!1,n=1);n&&e.revert()})||TT()},addEventListener:function(e,t){var n=ox[e]||(ox[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=ox[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:Zft,wrapYoyo:edt,distribute:M$,random:I$,snap:T$,normalize:Jft,getUnit:ao,clamp:Wft,splitColor:D$,toArray:Dc,selector:ET,mapRange:k$,pipe:Xft,unitize:Kft,interpolate:tdt,shuffle:S$},install:p$,effects:x3,ticker:Yl,updateRoot:ul.updateRoot,plugins:Gl,globalTimeline:ds,core:{PropTween:gl,globals:m$,Tween:aa,Timeline:ul,Animation:W1,getCache:C0,_removeLinkedListItem:mE,reverting:function(){return ho},context:function(e){return e&&ks&&(ks.data.push(e),e._ctx=ks),ks},suppressOverwrites:function(e){return RP=e}}};ml("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return Jx[i]=aa[i]});Yl.add(ul.updateRoot);yg=Jx.to({},{duration:0});var wdt=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},xdt=function(e,t){var n=e._targets,r,s,a;for(r in t)for(s=n.length;s--;)a=e._ptLookup[s][r],a&&(a=a.d)&&(a._pt&&(a=wdt(a,r)),a&&a.modifier&&a.modifier(t[r],e,n[s],r))},T3=function(e,t){return{name:e,rawVars:1,init:function(r,s,a){a._onInit=function(o){var l,c;if($a(s)&&(l={},ml(s,function(u){return l[u]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}xdt(o,s)}}}},yl=Jx.registerPlugin({name:"attr",init:function(e,t,n,r,s){var a,o,l;this.tween=n;for(a in t)l=e.getAttribute(a)||"",o=this.add(e,"setAttribute",(l||0)+"",t[a],r,s,0,0,a),o.op=a,o.b=l,this._props.push(a)},render:function(e,t){for(var n=t._pt;n;)ho?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},T3("roundProps",ST),T3("modifiers"),T3("snap",T$))||Jx;aa.version=ul.version=yl.version="3.12.2";d$=1;LP()&&ev();$i.Power0;$i.Power1;$i.Power2;$i.Power3;$i.Power4;$i.Linear;$i.Quad;$i.Cubic;$i.Quart;$i.Quint;$i.Strong;$i.Elastic;$i.Back;$i.SteppedEase;$i.Bounce;$i.Sine;$i.Expo;$i.Circ;/*!
 * CSSPlugin 3.12.2
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var A9,Bd,Tg,qP,_0,b9,jP,Cdt=function(){return typeof window<"u"},Rf={},i0=180/Math.PI,Ig=Math.PI/180,Xm=Math.atan2,y9=1e8,WP=/([A-Z])/g,Edt=/(left|right|width|margin|padding|x)/i,Sdt=/[\s,\(]\S/,ah={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},IT=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Mdt=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Tdt=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Idt=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},Y$=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},X$=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Pdt=function(e,t,n){return e.style[t]=n},kdt=function(e,t,n){return e.style.setProperty(t,n)},Bdt=function(e,t,n){return e._gsap[t]=n},Rdt=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Ddt=function(e,t,n,r,s){var a=e._gsap;a.scaleX=a.scaleY=n,a.renderTransform(s,a)},Ldt=function(e,t,n,r,s){var a=e._gsap;a[t]=n,a.renderTransform(s,a)},vs="transform",mu=vs+"Origin",Odt=function i(e,t){var n=this,r=this.target,s=r.style;if(e in Rf&&s){if(this.tfm=this.tfm||{},e!=="transform")e=ah[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return n.tfm[a]=gf(r,a)}):this.tfm[e]=r._gsap.x?r._gsap[e]:gf(r,e);else return ah.transform.split(",").forEach(function(a){return i.call(n,a,t)});if(this.props.indexOf(vs)>=0)return;r._gsap.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(mu,t,"")),e=vs}(s||t)&&this.props.push(e,t,s[e])},K$=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Ndt=function(){var e=this.props,t=this.target,n=t.style,r=t._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(WP,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)r[a]=this.tfm[a];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=jP(),(!s||!s.isStart)&&!n[vs]&&(K$(n),r.uncache=1)}},J$=function(e,t){var n={target:e,props:[],revert:Ndt,save:Odt};return e._gsap||yl.core.getCache(e),t&&t.split(",").forEach(function(r){return n.save(r)}),n},Z$,PT=function(e,t){var n=Bd.createElementNS?Bd.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Bd.createElement(e);return n.style?n:Bd.createElement(e)},ph=function i(e,t,n){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(WP,"-$1").toLowerCase())||r.getPropertyValue(t)||!n&&i(e,tv(t)||t,1)||""},w9="O,Moz,ms,Ms,Webkit".split(","),tv=function(e,t,n){var r=t||_0,s=r.style,a=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(w9[a]+e in s););return a<0?null:(a===3?"ms":a>=0?w9[a]:"")+e},kT=function(){Cdt()&&window.document&&(A9=window,Bd=A9.document,Tg=Bd.documentElement,_0=PT("div")||{style:{}},PT("div"),vs=tv(vs),mu=vs+"Origin",_0.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Z$=!!tv("perspective"),jP=yl.core.reverting,qP=1)},I3=function i(e){var t=PT("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText,a;if(Tg.appendChild(t),t.appendChild(this),this.style.display="block",e)try{a=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch{}else this._gsapBBox&&(a=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),Tg.removeChild(t),this.style.cssText=s,a},x9=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},eG=function(e){var t;try{t=e.getBBox()}catch{t=I3.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===I3||(t=I3.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+x9(e,["x","cx","x1"])||0,y:+x9(e,["y","cy","y1"])||0,width:0,height:0}:t},tG=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&eG(e))},Y1=function(e,t){if(t){var n=e.style;t in Rf&&t!==mu&&(t=vs),n.removeProperty?((t.substr(0,2)==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(t.replace(WP,"-$1").toLowerCase())):n.removeAttribute(t)}},Rd=function(e,t,n,r,s,a){var o=new gl(e._pt,t,n,0,1,a?X$:Y$);return e._pt=o,o.b=r,o.e=s,e._props.push(n),o},C9={deg:1,rad:1,turn:1},Fdt={grid:1,flex:1},ip=function i(e,t,n,r){var s=parseFloat(n)||0,a=(n+"").trim().substr((s+"").length)||"px",o=_0.style,l=Edt.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),h=100,f=r==="px",d=r==="%",g,v,A,_;return r===a||!s||C9[r]||C9[a]?s:(a!=="px"&&!f&&(s=i(e,t,n,"px")),_=e.getCTM&&tG(e),(d||a==="%")&&(Rf[t]||~t.indexOf("adius"))?(g=_?e.getBBox()[l?"width":"height"]:e[u],Gs(d?s/g*h:s/100*g)):(o[l?"width":"height"]=h+(f?a:r),v=~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,_&&(v=(e.ownerSVGElement||{}).parentNode),(!v||v===Bd||!v.appendChild)&&(v=Bd.body),A=v._gsap,A&&d&&A.width&&l&&A.time===Yl.time&&!A.uncache?Gs(s/A.width*h):((d||a==="%")&&!Fdt[ph(v,"display")]&&(o.position=ph(e,"position")),v===e&&(o.position="static"),v.appendChild(_0),g=_0[u],v.removeChild(_0),o.position="absolute",l&&d&&(A=C0(v),A.time=Yl.time,A.width=v[u]),Gs(f?g*s/h:g&&s?h/g*s:0))))},gf=function(e,t,n,r){var s;return qP||kT(),t in ah&&t!=="transform"&&(t=ah[t],~t.indexOf(",")&&(t=t.split(",")[0])),Rf[t]&&t!=="transform"?(s=K1(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:e2(ph(e,mu))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=Zx[t]&&Zx[t](e,t,n)||ph(e,t)||v$(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?ip(e,t,s,n)+n:s},zdt=function(e,t,n,r){if(!n||n==="none"){var s=tv(t,e,1),a=s&&ph(e,s,1);a&&a!==n?(t=s,n=a):t==="borderColor"&&(n=ph(e,"borderTopColor"))}var o=new gl(this._pt,e.style,t,0,1,q$),l=0,c=0,u,h,f,d,g,v,A,_,y,x,C,S;if(o.b=n,o.e=r,n+="",r+="",r==="auto"&&(e.style[t]=r,r=ph(e,t)||r,e.style[t]=n),u=[n,r],O$(u),n=u[0],r=u[1],f=n.match(bg)||[],S=r.match(bg)||[],S.length){for(;h=bg.exec(r);)A=h[0],y=r.substring(l,h.index),g?g=(g+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(g=1),A!==(v=f[c++]||"")&&(d=parseFloat(v)||0,C=v.substr((d+"").length),A.charAt(1)==="="&&(A=Mg(d,A)+C),_=parseFloat(A),x=A.substr((_+"").length),l=bg.lastIndex-x.length,x||(x=x||Zl.units[t]||C,l===r.length&&(r+=x,o.e+=x)),C!==x&&(d=ip(e,t,v,x)||0),o._pt={_next:o._pt,p:y||c===1?y:",",s:d,c:_-d,m:g&&g<4||t==="zIndex"?Math.round:0});o.c=l<r.length?r.substring(l,r.length):""}else o.r=t==="display"&&r==="none"?X$:Y$;return h$.test(r)&&(o.e=0),this._pt=o,o},E9={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Udt=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(e=n,n=r,r=e),t[0]=E9[n]||n,t[1]=E9[r]||r,t.join(" ")},Vdt=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,r=n.style,s=t.u,a=n._gsap,o,l,c;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)o=s[c],Rf[o]&&(l=1,o=o==="transformOrigin"?mu:vs),Y1(n,o);l&&(Y1(n,vs),a&&(a.svg&&n.removeAttribute("transform"),K1(n,1),a.uncache=1,K$(r)))}},Zx={clearProps:function(e,t,n,r,s){if(s.data!=="isFromStart"){var a=e._pt=new gl(e._pt,t,n,0,0,Vdt);return a.u=r,a.pr=-10,a.tween=s,e._props.push(n),1}}},X1=[1,0,0,1,0,0],nG={},iG=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},S9=function(e){var t=ph(e,vs);return iG(t)?X1:t.substr(7).match(u$).map(Gs)},YP=function(e,t){var n=e._gsap||C0(e),r=e.style,s=S9(e),a,o,l,c;return n.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?X1:s):(s===X1&&!e.offsetParent&&e!==Tg&&!n.svg&&(l=r.display,r.display="block",a=e.parentNode,(!a||!e.offsetParent)&&(c=1,o=e.nextElementSibling,Tg.appendChild(e)),s=S9(e),l?r.display=l:Y1(e,"display"),c&&(o?a.insertBefore(e,o):a?a.appendChild(e):Tg.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},BT=function(e,t,n,r,s,a){var o=e._gsap,l=s||YP(e,!0),c=o.xOrigin||0,u=o.yOrigin||0,h=o.xOffset||0,f=o.yOffset||0,d=l[0],g=l[1],v=l[2],A=l[3],_=l[4],y=l[5],x=t.split(" "),C=parseFloat(x[0])||0,S=parseFloat(x[1])||0,I,P,B,M;n?l!==X1&&(P=d*A-g*v)&&(B=C*(A/P)+S*(-v/P)+(v*y-A*_)/P,M=C*(-g/P)+S*(d/P)-(d*y-g*_)/P,C=B,S=M):(I=eG(e),C=I.x+(~x[0].indexOf("%")?C/100*I.width:C),S=I.y+(~(x[1]||x[0]).indexOf("%")?S/100*I.height:S)),r||r!==!1&&o.smooth?(_=C-c,y=S-u,o.xOffset=h+(_*d+y*v)-_,o.yOffset=f+(_*g+y*A)-y):o.xOffset=o.yOffset=0,o.xOrigin=C,o.yOrigin=S,o.smooth=!!r,o.origin=t,o.originIsAbsolute=!!n,e.style[mu]="0px 0px",a&&(Rd(a,o,"xOrigin",c,C),Rd(a,o,"yOrigin",u,S),Rd(a,o,"xOffset",h,o.xOffset),Rd(a,o,"yOffset",f,o.yOffset)),e.setAttribute("data-svg-origin",C+" "+S)},K1=function(e,t){var n=e._gsap||new U$(e);if("x"in n&&!t&&!n.uncache)return n;var r=e.style,s=n.scaleX<0,a="px",o="deg",l=getComputedStyle(e),c=ph(e,mu)||"0",u,h,f,d,g,v,A,_,y,x,C,S,I,P,B,M,D,F,z,U,$,O,ie,W,J,Ce,Me,ge,ve,nt,$e,X;return u=h=f=v=A=_=y=x=C=0,d=g=1,n.svg=!!(e.getCTM&&tG(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[vs]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[vs]!=="none"?l[vs]:"")),r.scale=r.rotate=r.translate="none"),P=YP(e,n.svg),n.svg&&(n.uncache?(J=e.getBBox(),c=n.xOrigin-J.x+"px "+(n.yOrigin-J.y)+"px",W=""):W=!t&&e.getAttribute("data-svg-origin"),BT(e,W||c,!!W||n.originIsAbsolute,n.smooth!==!1,P)),S=n.xOrigin||0,I=n.yOrigin||0,P!==X1&&(F=P[0],z=P[1],U=P[2],$=P[3],u=O=P[4],h=ie=P[5],P.length===6?(d=Math.sqrt(F*F+z*z),g=Math.sqrt($*$+U*U),v=F||z?Xm(z,F)*i0:0,y=U||$?Xm(U,$)*i0+v:0,y&&(g*=Math.abs(Math.cos(y*Ig))),n.svg&&(u-=S-(S*F+I*U),h-=I-(S*z+I*$))):(X=P[6],nt=P[7],Me=P[8],ge=P[9],ve=P[10],$e=P[11],u=P[12],h=P[13],f=P[14],B=Xm(X,ve),A=B*i0,B&&(M=Math.cos(-B),D=Math.sin(-B),W=O*M+Me*D,J=ie*M+ge*D,Ce=X*M+ve*D,Me=O*-D+Me*M,ge=ie*-D+ge*M,ve=X*-D+ve*M,$e=nt*-D+$e*M,O=W,ie=J,X=Ce),B=Xm(-U,ve),_=B*i0,B&&(M=Math.cos(-B),D=Math.sin(-B),W=F*M-Me*D,J=z*M-ge*D,Ce=U*M-ve*D,$e=$*D+$e*M,F=W,z=J,U=Ce),B=Xm(z,F),v=B*i0,B&&(M=Math.cos(B),D=Math.sin(B),W=F*M+z*D,J=O*M+ie*D,z=z*M-F*D,ie=ie*M-O*D,F=W,O=J),A&&Math.abs(A)+Math.abs(v)>359.9&&(A=v=0,_=180-_),d=Gs(Math.sqrt(F*F+z*z+U*U)),g=Gs(Math.sqrt(ie*ie+X*X)),B=Xm(O,ie),y=Math.abs(B)>2e-4?B*i0:0,C=$e?1/($e<0?-$e:$e):0),n.svg&&(W=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!iG(ph(e,vs)),W&&e.setAttribute("transform",W))),Math.abs(y)>90&&Math.abs(y)<270&&(s?(d*=-1,y+=v<=0?180:-180,v+=v<=0?180:-180):(g*=-1,y+=y<=0?180:-180)),t=t||n.uncache,n.x=u-((n.xPercent=u&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+a,n.y=h-((n.yPercent=h&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+a,n.z=f+a,n.scaleX=Gs(d),n.scaleY=Gs(g),n.rotation=Gs(v)+o,n.rotationX=Gs(A)+o,n.rotationY=Gs(_)+o,n.skewX=y+o,n.skewY=x+o,n.transformPerspective=C+a,(n.zOrigin=parseFloat(c.split(" ")[2])||0)&&(r[mu]=e2(c)),n.xOffset=n.yOffset=0,n.force3D=Zl.force3D,n.renderTransform=n.svg?$dt:Z$?rG:Hdt,n.uncache=0,n},e2=function(e){return(e=e.split(" "))[0]+" "+e[1]},P3=function(e,t,n){var r=ao(t);return Gs(parseFloat(t)+parseFloat(ip(e,"x",n+"px",r)))+r},Hdt=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,rG(e,t)},Xp="0deg",O_="0px",Kp=") ",rG=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,a=n.x,o=n.y,l=n.z,c=n.rotation,u=n.rotationY,h=n.rotationX,f=n.skewX,d=n.skewY,g=n.scaleX,v=n.scaleY,A=n.transformPerspective,_=n.force3D,y=n.target,x=n.zOrigin,C="",S=_==="auto"&&e&&e!==1||_===!0;if(x&&(h!==Xp||u!==Xp)){var I=parseFloat(u)*Ig,P=Math.sin(I),B=Math.cos(I),M;I=parseFloat(h)*Ig,M=Math.cos(I),a=P3(y,a,P*M*-x),o=P3(y,o,-Math.sin(I)*-x),l=P3(y,l,B*M*-x+x)}A!==O_&&(C+="perspective("+A+Kp),(r||s)&&(C+="translate("+r+"%, "+s+"%) "),(S||a!==O_||o!==O_||l!==O_)&&(C+=l!==O_||S?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+Kp),c!==Xp&&(C+="rotate("+c+Kp),u!==Xp&&(C+="rotateY("+u+Kp),h!==Xp&&(C+="rotateX("+h+Kp),(f!==Xp||d!==Xp)&&(C+="skew("+f+", "+d+Kp),(g!==1||v!==1)&&(C+="scale("+g+", "+v+Kp),y.style[vs]=C||"translate(0, 0)"},$dt=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,a=n.x,o=n.y,l=n.rotation,c=n.skewX,u=n.skewY,h=n.scaleX,f=n.scaleY,d=n.target,g=n.xOrigin,v=n.yOrigin,A=n.xOffset,_=n.yOffset,y=n.forceCSS,x=parseFloat(a),C=parseFloat(o),S,I,P,B,M;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=Ig,c*=Ig,S=Math.cos(l)*h,I=Math.sin(l)*h,P=Math.sin(l-c)*-f,B=Math.cos(l-c)*f,c&&(u*=Ig,M=Math.tan(c-u),M=Math.sqrt(1+M*M),P*=M,B*=M,u&&(M=Math.tan(u),M=Math.sqrt(1+M*M),S*=M,I*=M)),S=Gs(S),I=Gs(I),P=Gs(P),B=Gs(B)):(S=h,B=f,I=P=0),(x&&!~(a+"").indexOf("px")||C&&!~(o+"").indexOf("px"))&&(x=ip(d,"x",a,"px"),C=ip(d,"y",o,"px")),(g||v||A||_)&&(x=Gs(x+g-(g*S+v*P)+A),C=Gs(C+v-(g*I+v*B)+_)),(r||s)&&(M=d.getBBox(),x=Gs(x+r/100*M.width),C=Gs(C+s/100*M.height)),M="matrix("+S+","+I+","+P+","+B+","+x+","+C+")",d.setAttribute("transform",M),y&&(d.style[vs]=M)},Gdt=function(e,t,n,r,s){var a=360,o=$a(s),l=parseFloat(s)*(o&&~s.indexOf("rad")?i0:1),c=l-r,u=r+c+"deg",h,f;return o&&(h=s.split("_")[1],h==="short"&&(c%=a,c!==c%(a/2)&&(c+=c<0?a:-a)),h==="cw"&&c<0?c=(c+a*y9)%a-~~(c/a)*a:h==="ccw"&&c>0&&(c=(c-a*y9)%a-~~(c/a)*a)),e._pt=f=new gl(e._pt,t,n,r,c,Mdt),f.e=u,f.u="deg",e._props.push(n),f},M9=function(e,t){for(var n in t)e[n]=t[n];return e},Qdt=function(e,t,n){var r=M9({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=n.style,o,l,c,u,h,f,d,g;r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),a[vs]=t,o=K1(n,1),Y1(n,vs),n.setAttribute("transform",c)):(c=getComputedStyle(n)[vs],a[vs]=t,o=K1(n,1),a[vs]=c);for(l in Rf)c=r[l],u=o[l],c!==u&&s.indexOf(l)<0&&(d=ao(c),g=ao(u),h=d!==g?ip(n,l,c,g):parseFloat(c),f=parseFloat(u),e._pt=new gl(e._pt,o,l,h,f-h,IT),e._pt.u=g||0,e._props.push(l));M9(o,r)};ml("padding,margin,Width,Radius",function(i,e){var t="Top",n="Right",r="Bottom",s="Left",a=(e<3?[t,n,r,s]:[t+s,t+n,r+n,r+s]).map(function(o){return e<2?i+o:"border"+o+i});Zx[e>1?"border"+i:i]=function(o,l,c,u,h){var f,d;if(arguments.length<4)return f=a.map(function(g){return gf(o,g,c)}),d=f.join(" "),d.split(f[0]).length===5?f[0]:d;f=(u+"").split(" "),d={},a.forEach(function(g,v){return d[g]=f[v]=f[v]||f[(v-1)/2|0]}),o.init(l,d,h)}});var sG={name:"css",register:kT,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,s){var a=this._props,o=e.style,l=n.vars.startAt,c,u,h,f,d,g,v,A,_,y,x,C,S,I,P,B;qP||kT(),this.styles=this.styles||J$(e),B=this.styles.props,this.tween=n;for(v in t)if(v!=="autoRound"&&(u=t[v],!(Gl[v]&&V$(v,t,n,r,e,s)))){if(d=typeof u,g=Zx[v],d==="function"&&(u=u.call(n,r,e,s),d=typeof u),d==="string"&&~u.indexOf("random(")&&(u=q1(u)),g)g(this,e,v,u,n)&&(P=1);else if(v.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(v)+"").trim(),u+="",Hd.lastIndex=0,Hd.test(c)||(A=ao(c),_=ao(u)),_?A!==_&&(c=ip(e,v,c,_)+_):A&&(u+=A),this.add(o,"setProperty",c,u,r,s,0,0,v),a.push(v),B.push(v,0,o[v]);else if(d!=="undefined"){if(l&&v in l?(c=typeof l[v]=="function"?l[v].call(n,r,e,s):l[v],$a(c)&&~c.indexOf("random(")&&(c=q1(c)),ao(c+"")||(c+=Zl.units[v]||ao(gf(e,v))||""),(c+"").charAt(1)==="="&&(c=gf(e,v))):c=gf(e,v),f=parseFloat(c),y=d==="string"&&u.charAt(1)==="="&&u.substr(0,2),y&&(u=u.substr(2)),h=parseFloat(u),v in ah&&(v==="autoAlpha"&&(f===1&&gf(e,"visibility")==="hidden"&&h&&(f=0),B.push("visibility",0,o.visibility),Rd(this,o,"visibility",f?"inherit":"hidden",h?"inherit":"hidden",!h)),v!=="scale"&&v!=="transform"&&(v=ah[v],~v.indexOf(",")&&(v=v.split(",")[0]))),x=v in Rf,x){if(this.styles.save(v),C||(S=e._gsap,S.renderTransform&&!t.parseTransform||K1(e,t.parseTransform),I=t.smoothOrigin!==!1&&S.smooth,C=this._pt=new gl(this._pt,o,vs,0,1,S.renderTransform,S,0,-1),C.dep=1),v==="scale")this._pt=new gl(this._pt,S,"scaleY",S.scaleY,(y?Mg(S.scaleY,y+h):h)-S.scaleY||0,IT),this._pt.u=0,a.push("scaleY",v),v+="X";else if(v==="transformOrigin"){B.push(mu,0,o[mu]),u=Udt(u),S.svg?BT(e,u,0,I,0,this):(_=parseFloat(u.split(" ")[2])||0,_!==S.zOrigin&&Rd(this,S,"zOrigin",S.zOrigin,_),Rd(this,o,v,e2(c),e2(u)));continue}else if(v==="svgOrigin"){BT(e,u,1,I,0,this);continue}else if(v in nG){Gdt(this,S,v,f,y?Mg(f,y+u):u);continue}else if(v==="smoothOrigin"){Rd(this,S,"smooth",S.smooth,u);continue}else if(v==="force3D"){S[v]=u;continue}else if(v==="transform"){Qdt(this,u,e);continue}}else v in o||(v=tv(v)||v);if(x||(h||h===0)&&(f||f===0)&&!Sdt.test(u)&&v in o)A=(c+"").substr((f+"").length),h||(h=0),_=ao(u)||(v in Zl.units?Zl.units[v]:A),A!==_&&(f=ip(e,v,c,_)),this._pt=new gl(this._pt,x?S:o,v,f,(y?Mg(f,y+h):h)-f,!x&&(_==="px"||v==="zIndex")&&t.autoRound!==!1?Idt:IT),this._pt.u=_||0,A!==_&&_!=="%"&&(this._pt.b=c,this._pt.r=Tdt);else if(v in o)zdt.call(this,e,v,c,y?y+u:u);else if(v in e)this.add(e,v,c||e[v],y?y+u:u,r,s);else if(v!=="parseTransform"){NP(v,u);continue}x||(v in o?B.push(v,0,o[v]):B.push(v,1,c||e[v])),a.push(v)}}P&&j$(this)},render:function(e,t){if(t.tween._time||!jP())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:gf,aliases:ah,getSetter:function(e,t,n){var r=ah[t];return r&&r.indexOf(",")<0&&(t=r),t in Rf&&t!==mu&&(e._gsap.x||gf(e,"x"))?n&&b9===n?t==="scale"?Rdt:Bdt:(b9=n||{})&&(t==="scale"?Ddt:Ldt):e.style&&!DP(e.style[t])?Pdt:~t.indexOf("-")?kdt:GP(e,t)},core:{_removeProperty:Y1,_getMatrix:YP}};yl.utils.checkPrefix=tv;yl.core.getStyleSaver=J$;(function(i,e,t,n){var r=ml(i+","+e+","+t,function(s){Rf[s]=1});ml(e,function(s){Zl.units[s]="deg",nG[s]=1}),ah[r[13]]=i+","+e,ml(n,function(s){var a=s.split(":");ah[a[1]]=r[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ml("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){Zl.units[i]="px"});yl.registerPlugin(sG);var un=yl.registerPlugin(sG)||yl;un.core.Tween;typeof window<"u"&&(un.registerPlugin(BP.ScrollTrigger),un.registerPlugin(kft.ScrollToPlugin));var aG={},oG={},XP={exports:{}},Gr=String,lG=function(){return{isColorSupported:!1,reset:Gr,bold:Gr,dim:Gr,italic:Gr,underline:Gr,inverse:Gr,hidden:Gr,strikethrough:Gr,black:Gr,red:Gr,green:Gr,yellow:Gr,blue:Gr,magenta:Gr,cyan:Gr,white:Gr,gray:Gr,bgBlack:Gr,bgRed:Gr,bgGreen:Gr,bgYellow:Gr,bgBlue:Gr,bgMagenta:Gr,bgCyan:Gr,bgWhite:Gr}};XP.exports=lG();XP.exports.createColors=lG;var qdt=XP.exports;(function(i){Object.defineProperty(i,"__esModule",{value:!0});function e(l,c){for(var u in c)Object.defineProperty(l,u,{enumerable:!0,get:c[u]})}e(i,{dim:function(){return a},default:function(){return o}});const t=n(qdt);function n(l){return l&&l.__esModule?l:{default:l}}let r=new Set;function s(l,c,u){typeof process<"u"&&{}.JEST_WORKER_ID||u&&r.has(u)||(u&&r.add(u),console.warn(""),c.forEach(h=>console.warn(l,"-",h)))}function a(l){return t.default.dim(l)}const o={info(l,c){s(t.default.bold(t.default.cyan("info")),...Array.isArray(l)?[l]:[c,l])},warn(l,c){s(t.default.bold(t.default.yellow("warn")),...Array.isArray(l)?[l]:[c,l])},risk(l,c){s(t.default.bold(t.default.magenta("risk")),...Array.isArray(l)?[l]:[c,l])}}})(oG);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"default",{enumerable:!0,get:function(){return r}});const e=t(oG);function t(s){return s&&s.__esModule?s:{default:s}}function n({version:s,from:a,to:o}){e.default.warn(`${a}-color-renamed`,[`As of Tailwind CSS ${s}, \`${a}\` has been renamed to \`${o}\`.`,"Update your configuration file to silence this warning."])}const r={inherit:"inherit",current:"currentColor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},get lightBlue(){return n({version:"v2.2",from:"lightBlue",to:"sky"}),this.sky},get warmGray(){return n({version:"v3.0",from:"warmGray",to:"stone"}),this.stone},get trueGray(){return n({version:"v3.0",from:"trueGray",to:"neutral"}),this.neutral},get coolGray(){return n({version:"v3.0",from:"coolGray",to:"gray"}),this.gray},get blueGray(){return n({version:"v3.0",from:"blueGray",to:"slate"}),this.slate}}})(aG);let k3=aG;var jdt=(k3.__esModule?k3:{default:k3}).default;const nv=U0(jdt);/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const Xn={LEFT:1,RIGHT:2,MIDDLE:4},Ct=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),Km={NONE:0,IN:1,OUT:-1};function Jp(i){return i.isPerspectiveCamera}function Ad(i){return i.isOrthographicCamera}const Jm=Math.PI*2,T9=Math.PI/2,cG=1e-5,N_=Math.PI/180;function Qu(i,e,t){return Math.max(e,Math.min(t,i))}function Or(i,e=cG){return Math.abs(i)<e}function mr(i,e,t=cG){return Or(i-e,t)}function I9(i,e){return Math.round(i/e)*e}function F_(i){return isFinite(i)?i:i<0?-Number.MAX_VALUE:Number.MAX_VALUE}function z_(i){return Math.abs(i)<Number.MAX_VALUE?i:i*(1/0)}function Rw(i,e,t,n,r=1/0,s){n=Math.max(1e-4,n);const a=2/n,o=a*s,l=1/(1+o+.48*o*o+.235*o*o*o);let c=i-e;const u=e,h=r*n;c=Qu(c,-h,h),e=i-c;const f=(t.value+a*c)*s;t.value=(t.value-a*f)*l;let d=e+(c+f)*l;return u-i>0==d>u&&(d=u,t.value=(d-u)/s),d}function P9(i,e,t,n,r=1/0,s,a){n=Math.max(1e-4,n);const o=2/n,l=o*s,c=1/(1+l+.48*l*l+.235*l*l*l);let u=e.x,h=e.y,f=e.z,d=i.x-u,g=i.y-h,v=i.z-f;const A=u,_=h,y=f,x=r*n,C=x*x,S=d*d+g*g+v*v;if(S>C){const O=Math.sqrt(S);d=d/O*x,g=g/O*x,v=v/O*x}u=i.x-d,h=i.y-g,f=i.z-v;const I=(t.x+o*d)*s,P=(t.y+o*g)*s,B=(t.z+o*v)*s;t.x=(t.x-o*I)*c,t.y=(t.y-o*P)*c,t.z=(t.z-o*B)*c,a.x=u+(d+I)*c,a.y=h+(g+P)*c,a.z=f+(v+B)*c;const M=A-i.x,D=_-i.y,F=y-i.z,z=a.x-A,U=a.y-_,$=a.z-y;return M*z+D*U+F*$>0&&(a.x=A,a.y=_,a.z=y,t.x=(a.x-A)/s,t.y=(a.y-_)/s,t.z=(a.z-y)/s),a}function B3(i,e){e.set(0,0),i.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=i.length,e.y/=i.length}function R3(i,e){return Ad(i)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class Wdt{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e)}}}const Ydt="2.7.0",Dw=1/8,uG=typeof window<"u",Xdt=uG&&/Mac/.test(navigator.platform),Kdt=!(uG&&"PointerEvent"in window);let Gn,k9,Lw,D3,tl,mi,ir,Zm,U_,Uu,Vu,Zp,B9,R9,bc,V_,eg,D9,L3,L9,O3,N3,Ow;class hl extends Wdt{static install(e){Gn=e.THREE,k9=Object.freeze(new Gn.Vector3(0,0,0)),Lw=Object.freeze(new Gn.Vector3(0,1,0)),D3=Object.freeze(new Gn.Vector3(0,0,1)),tl=new Gn.Vector2,mi=new Gn.Vector3,ir=new Gn.Vector3,Zm=new Gn.Vector3,U_=new Gn.Vector3,Uu=new Gn.Vector3,Vu=new Gn.Vector3,Zp=new Gn.Vector3,B9=new Gn.Vector3,R9=new Gn.Vector3,bc=new Gn.Spherical,V_=new Gn.Spherical,eg=new Gn.Box3,D9=new Gn.Box3,L3=new Gn.Sphere,L9=new Gn.Quaternion,O3=new Gn.Quaternion,N3=new Gn.Matrix4,Ow=new Gn.Raycaster}static get ACTION(){return Ct}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=Ct.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Km.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new Gn.Vector3,this._focalOffsetVelocity=new Gn.Vector3,this._zoomVelocity={value:0},this._truckInternal=(C,S,I)=>{let P,B;if(Jp(this._camera)){const M=mi.copy(this._camera.position).sub(this._target),D=this._camera.getEffectiveFOV()*N_,F=M.length()*Math.tan(D*.5);P=this.truckSpeed*C*F/this._elementRect.height,B=this.truckSpeed*S*F/this._elementRect.height}else if(Ad(this._camera)){const M=this._camera;P=C*(M.right-M.left)/M.zoom/this._elementRect.width,B=S*(M.top-M.bottom)/M.zoom/this._elementRect.height}else return;this.verticalDragToForward?(I?this.setFocalOffset(this._focalOffsetEnd.x+P,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(P,0,!0),this.forward(-B,!0)):I?this.setFocalOffset(this._focalOffsetEnd.x+P,this._focalOffsetEnd.y+B,this._focalOffsetEnd.z,!0):this.truck(P,B,!0)},this._rotateInternal=(C,S)=>{const I=Jm*this.azimuthRotateSpeed*C/this._elementRect.height,P=Jm*this.polarRotateSpeed*S/this._elementRect.height;this.rotate(I,P,!0)},this._dollyInternal=(C,S,I)=>{const P=Math.pow(.95,-C*this.dollySpeed),B=this._sphericalEnd.radius,M=this._sphericalEnd.radius*P,D=Gn.MathUtils.clamp(M,this.minDistance,this.maxDistance),F=D-M;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(M,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(F,!0),this._dollyToNoClamp(D,!0)):this._dollyToNoClamp(D,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?M:D)-B,this._dollyControlCoord.set(S,I)),this._lastDollyDirection=Math.sign(-C)},this._zoomInternal=(C,S,I)=>{const P=Math.pow(.95,C*this.dollySpeed),B=this._zoom,M=this._zoom*P;this.zoomTo(M,!0),this.dollyToCursor&&(this._changedZoom+=M-B,this._dollyControlCoord.set(S,I))},typeof Gn>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new Gn.Quaternion().setFromUnitVectors(this._camera.up,Lw),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=Ct.NONE,this._target=new Gn.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new Gn.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new Gn.Spherical().setFromVector3(mi.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new Gn.Vector3,new Gn.Vector3,new Gn.Vector3,new Gn.Vector3],this._updateNearPlaneCorners(),this._boundary=new Gn.Box3(new Gn.Vector3(-1/0,-1/0,-1/0),new Gn.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new Gn.Vector2,this.mouseButtons={left:Ct.ROTATE,middle:Ct.DOLLY,right:Ct.TRUCK,wheel:Jp(this._camera)?Ct.DOLLY:Ad(this._camera)?Ct.ZOOM:Ct.NONE},this.touches={one:Ct.TOUCH_ROTATE,two:Jp(this._camera)?Ct.TOUCH_DOLLY_TRUCK:Ad(this._camera)?Ct.TOUCH_ZOOM_TRUCK:Ct.NONE,three:Ct.TOUCH_TRUCK};const n=new Gn.Vector2,r=new Gn.Vector2,s=new Gn.Vector2,a=C=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const P=this._domElement.getBoundingClientRect(),B=C.clientX/P.width,M=C.clientY/P.height;if(B<this._interactiveArea.left||B>this._interactiveArea.right||M<this._interactiveArea.top||M>this._interactiveArea.bottom)return}const S=C.pointerType!=="mouse"?null:(C.buttons&Xn.LEFT)===Xn.LEFT?Xn.LEFT:(C.buttons&Xn.MIDDLE)===Xn.MIDDLE?Xn.MIDDLE:(C.buttons&Xn.RIGHT)===Xn.RIGHT?Xn.RIGHT:null;if(S!==null){const P=this._findPointerByMouseButton(S);P&&this._disposePointer(P)}if((C.buttons&Xn.LEFT)===Xn.LEFT&&this._lockedPointer)return;const I={pointerId:C.pointerId,clientX:C.clientX,clientY:C.clientY,deltaX:0,deltaY:0,mouseButton:S};this._activePointers.push(I),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),this._isDragging=!0,v(C)},o=C=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const P=this._domElement.getBoundingClientRect(),B=C.clientX/P.width,M=C.clientY/P.height;if(B<this._interactiveArea.left||B>this._interactiveArea.right||M<this._interactiveArea.top||M>this._interactiveArea.bottom)return}const S=(C.buttons&Xn.LEFT)===Xn.LEFT?Xn.LEFT:(C.buttons&Xn.MIDDLE)===Xn.MIDDLE?Xn.MIDDLE:(C.buttons&Xn.RIGHT)===Xn.RIGHT?Xn.RIGHT:null;if(S!==null){const P=this._findPointerByMouseButton(S);P&&this._disposePointer(P)}const I={pointerId:1,clientX:C.clientX,clientY:C.clientY,deltaX:0,deltaY:0,mouseButton:(C.buttons&Xn.LEFT)===Xn.LEFT?Xn.LEFT:(C.buttons&Xn.MIDDLE)===Xn.LEFT?Xn.MIDDLE:(C.buttons&Xn.RIGHT)===Xn.LEFT?Xn.RIGHT:null};this._activePointers.push(I),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.addEventListener("mousemove",c),this._domElement.ownerDocument.addEventListener("mouseup",h),this._isDragging=!0,v(C)},l=C=>{C.cancelable&&C.preventDefault();const S=C.pointerId,I=this._lockedPointer||this._findPointerById(S);if(I){if(I.clientX=C.clientX,I.clientY=C.clientY,I.deltaX=C.movementX,I.deltaY=C.movementY,this._state=0,C.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(C.buttons&Xn.LEFT)===Xn.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(C.buttons&Xn.MIDDLE)===Xn.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(C.buttons&Xn.RIGHT)===Xn.RIGHT&&(this._state=this._state|this.mouseButtons.right);A()}},c=C=>{const S=this._lockedPointer||this._findPointerById(1);S&&(S.clientX=C.clientX,S.clientY=C.clientY,S.deltaX=C.movementX,S.deltaY=C.movementY,this._state=0,(this._lockedPointer||(C.buttons&Xn.LEFT)===Xn.LEFT)&&(this._state=this._state|this.mouseButtons.left),(C.buttons&Xn.MIDDLE)===Xn.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(C.buttons&Xn.RIGHT)===Xn.RIGHT&&(this._state=this._state|this.mouseButtons.right),A())},u=C=>{const S=this._findPointerById(C.pointerId);if(!(S&&S===this._lockedPointer)){if(S&&this._disposePointer(S),C.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=Ct.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=Ct.NONE;_()}},h=()=>{const C=this._findPointerById(1);C&&C===this._lockedPointer||(C&&this._disposePointer(C),this._state=Ct.NONE,_())};let f=-1;const d=C=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===Ct.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const M=this._domElement.getBoundingClientRect(),D=C.clientX/M.width,F=C.clientY/M.height;if(D<this._interactiveArea.left||D>this._interactiveArea.right||F<this._interactiveArea.top||F>this._interactiveArea.bottom)return}if(C.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Ct.ROTATE||this.mouseButtons.wheel===Ct.TRUCK){const M=performance.now();f-M<1e3&&this._getClientRect(this._elementRect),f=M}const S=Xdt?-1:-3,I=C.deltaMode===1?C.deltaY/S:C.deltaY/(S*10),P=this.dollyToCursor?(C.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,B=this.dollyToCursor?(C.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case Ct.ROTATE:{this._rotateInternal(C.deltaX,C.deltaY),this._isUserControllingRotate=!0;break}case Ct.TRUCK:{this._truckInternal(C.deltaX,C.deltaY,!1),this._isUserControllingTruck=!0;break}case Ct.OFFSET:{this._truckInternal(C.deltaX,C.deltaY,!0),this._isUserControllingOffset=!0;break}case Ct.DOLLY:{this._dollyInternal(-I,P,B),this._isUserControllingDolly=!0;break}case Ct.ZOOM:{this._zoomInternal(-I,P,B),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},g=C=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===hl.ACTION.NONE){const S=C instanceof PointerEvent?C.pointerId:(C instanceof MouseEvent,0),I=this._findPointerById(S);I&&this._disposePointer(I),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("mouseup",h);return}C.preventDefault()}},v=C=>{if(!this._enabled)return;if(B3(this._activePointers,tl),this._getClientRect(this._elementRect),n.copy(tl),r.copy(tl),this._activePointers.length>=2){const I=tl.x-this._activePointers[1].clientX,P=tl.y-this._activePointers[1].clientY,B=Math.sqrt(I*I+P*P);s.set(0,B);const M=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,D=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(M,D)}if(this._state=0,!C)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in C&&C.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(C.buttons&Xn.LEFT)===Xn.LEFT&&(this._state=this._state|this.mouseButtons.left),(C.buttons&Xn.MIDDLE)===Xn.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(C.buttons&Xn.RIGHT)===Xn.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&Ct.ROTATE)===Ct.ROTATE||(this._state&Ct.TOUCH_ROTATE)===Ct.TOUCH_ROTATE||(this._state&Ct.TOUCH_DOLLY_ROTATE)===Ct.TOUCH_DOLLY_ROTATE||(this._state&Ct.TOUCH_ZOOM_ROTATE)===Ct.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&Ct.TRUCK)===Ct.TRUCK||(this._state&Ct.TOUCH_TRUCK)===Ct.TOUCH_TRUCK||(this._state&Ct.TOUCH_DOLLY_TRUCK)===Ct.TOUCH_DOLLY_TRUCK||(this._state&Ct.TOUCH_ZOOM_TRUCK)===Ct.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&Ct.DOLLY)===Ct.DOLLY||(this._state&Ct.TOUCH_DOLLY)===Ct.TOUCH_DOLLY||(this._state&Ct.TOUCH_DOLLY_TRUCK)===Ct.TOUCH_DOLLY_TRUCK||(this._state&Ct.TOUCH_DOLLY_OFFSET)===Ct.TOUCH_DOLLY_OFFSET||(this._state&Ct.TOUCH_DOLLY_ROTATE)===Ct.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&Ct.ZOOM)===Ct.ZOOM||(this._state&Ct.TOUCH_ZOOM)===Ct.TOUCH_ZOOM||(this._state&Ct.TOUCH_ZOOM_TRUCK)===Ct.TOUCH_ZOOM_TRUCK||(this._state&Ct.TOUCH_ZOOM_OFFSET)===Ct.TOUCH_ZOOM_OFFSET||(this._state&Ct.TOUCH_ZOOM_ROTATE)===Ct.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&Ct.OFFSET)===Ct.OFFSET||(this._state&Ct.TOUCH_OFFSET)===Ct.TOUCH_OFFSET||(this._state&Ct.TOUCH_DOLLY_OFFSET)===Ct.TOUCH_DOLLY_OFFSET||(this._state&Ct.TOUCH_ZOOM_OFFSET)===Ct.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},A=()=>{if(!this._enabled)return;B3(this._activePointers,tl);const S=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,I=S?-S.deltaX:r.x-tl.x,P=S?-S.deltaY:r.y-tl.y;if(r.copy(tl),((this._state&Ct.ROTATE)===Ct.ROTATE||(this._state&Ct.TOUCH_ROTATE)===Ct.TOUCH_ROTATE||(this._state&Ct.TOUCH_DOLLY_ROTATE)===Ct.TOUCH_DOLLY_ROTATE||(this._state&Ct.TOUCH_ZOOM_ROTATE)===Ct.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(I,P),this._isUserControllingRotate=!0),(this._state&Ct.DOLLY)===Ct.DOLLY||(this._state&Ct.ZOOM)===Ct.ZOOM){const B=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,M=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0,D=this.dollyDragInverted?-1:1;(this._state&Ct.DOLLY)===Ct.DOLLY?(this._dollyInternal(D*P*Dw,B,M),this._isUserControllingDolly=!0):(this._zoomInternal(D*P*Dw,B,M),this._isUserControllingZoom=!0)}if((this._state&Ct.TOUCH_DOLLY)===Ct.TOUCH_DOLLY||(this._state&Ct.TOUCH_ZOOM)===Ct.TOUCH_ZOOM||(this._state&Ct.TOUCH_DOLLY_TRUCK)===Ct.TOUCH_DOLLY_TRUCK||(this._state&Ct.TOUCH_ZOOM_TRUCK)===Ct.TOUCH_ZOOM_TRUCK||(this._state&Ct.TOUCH_DOLLY_OFFSET)===Ct.TOUCH_DOLLY_OFFSET||(this._state&Ct.TOUCH_ZOOM_OFFSET)===Ct.TOUCH_ZOOM_OFFSET||(this._state&Ct.TOUCH_DOLLY_ROTATE)===Ct.TOUCH_DOLLY_ROTATE||(this._state&Ct.TOUCH_ZOOM_ROTATE)===Ct.TOUCH_ZOOM_ROTATE){const B=tl.x-this._activePointers[1].clientX,M=tl.y-this._activePointers[1].clientY,D=Math.sqrt(B*B+M*M),F=s.y-D;s.set(0,D);const z=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,U=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&Ct.TOUCH_DOLLY)===Ct.TOUCH_DOLLY||(this._state&Ct.TOUCH_DOLLY_ROTATE)===Ct.TOUCH_DOLLY_ROTATE||(this._state&Ct.TOUCH_DOLLY_TRUCK)===Ct.TOUCH_DOLLY_TRUCK||(this._state&Ct.TOUCH_DOLLY_OFFSET)===Ct.TOUCH_DOLLY_OFFSET?(this._dollyInternal(F*Dw,z,U),this._isUserControllingDolly=!0):(this._zoomInternal(F*Dw,z,U),this._isUserControllingZoom=!0)}((this._state&Ct.TRUCK)===Ct.TRUCK||(this._state&Ct.TOUCH_TRUCK)===Ct.TOUCH_TRUCK||(this._state&Ct.TOUCH_DOLLY_TRUCK)===Ct.TOUCH_DOLLY_TRUCK||(this._state&Ct.TOUCH_ZOOM_TRUCK)===Ct.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(I,P,!1),this._isUserControllingTruck=!0),((this._state&Ct.OFFSET)===Ct.OFFSET||(this._state&Ct.TOUCH_OFFSET)===Ct.TOUCH_OFFSET||(this._state&Ct.TOUCH_DOLLY_OFFSET)===Ct.TOUCH_DOLLY_OFFSET||(this._state&Ct.TOUCH_ZOOM_OFFSET)===Ct.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(I,P,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},_=()=>{B3(this._activePointers,tl),r.copy(tl),(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",h),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",y),this._domElement.ownerDocument.addEventListener("pointerlockerror",x),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),v())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",y),this._domElement.ownerDocument.removeEventListener("pointerlockerror",x))};const y=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},x=()=>{this.unlockPointer()};this._addAllEventListeners=C=>{this._domElement=C,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",a),Kdt&&this._domElement.addEventListener("mousedown",o),this._domElement.addEventListener("pointercancel",u),this._domElement.addEventListener("wheel",d,{passive:!1}),this._domElement.addEventListener("contextmenu",g)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",a),this._domElement.removeEventListener("mousedown",o),this._domElement.removeEventListener("pointercancel",u),this._domElement.removeEventListener("wheel",d,{passive:!1}),this._domElement.removeEventListener("contextmenu",g),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.removeEventListener("pointerlockchange",y),this._domElement.ownerDocument.removeEventListener("pointerlockerror",x))},this.cancel=()=>{this._state!==Ct.NONE&&(this._state=Ct.NONE,this._activePointers.length=0,_())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=Qu(e.width,0,1),this._interactiveArea.height=Qu(e.height,0,1),this._interactiveArea.x=Qu(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Qu(e.x,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,n=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,n)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,n=!1){this._isUserControllingRotate=!1;const r=Qu(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=Qu(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const a=!n||mr(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&mr(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(a)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Km.NONE,this._changedDolly=0,this._dollyToNoClamp(Qu(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const n=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const a=this._collisionTest(),o=mr(a,this._spherical.radius);if(!(n>e)&&o)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,a)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||mr(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(U_).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const n=!t||mr(this._target.x,this._targetEnd.x,this.restThreshold)&&mr(this._target.y,this._targetEnd.y,this.restThreshold)&&mr(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=Qu(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const n=!t||mr(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(n)}pan(e,t,n=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,n)}truck(e,t,n=!1){this._camera.updateMatrix(),Uu.setFromMatrixColumn(this._camera.matrix,0),Vu.setFromMatrixColumn(this._camera.matrix,1),Uu.multiplyScalar(e),Vu.multiplyScalar(-t);const r=mi.copy(Uu).add(Vu),s=ir.copy(this._targetEnd).add(r);return this.moveTo(s.x,s.y,s.z,n)}forward(e,t=!1){mi.setFromMatrixColumn(this._camera.matrix,0),mi.crossVectors(this._camera.up,mi),mi.multiplyScalar(e);const n=ir.copy(this._targetEnd).add(mi);return this.moveTo(n.x,n.y,n.z,t)}elevate(e,t=!1){return mi.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+mi.x,this._targetEnd.y+mi.y,this._targetEnd.z+mi.z,t)}moveTo(e,t,n,r=!1){this._isUserControllingTruck=!1;const s=mi.set(e,t,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const a=!r||mr(this._target.x,this._targetEnd.x,this.restThreshold)&&mr(this._target.y,this._targetEnd.y,this.restThreshold)&&mr(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(a)}lookInDirectionOf(e,t,n,r=!1){const o=mi.set(e,t,n).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(o.x,o.y,o.z,r)}fitToBox(e,t,{cover:n=!1,paddingLeft:r=0,paddingRight:s=0,paddingBottom:a=0,paddingTop:o=0}={}){const l=[],c=e.isBox3?eg.copy(e):eg.setFromObject(e);c.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const u=I9(this._sphericalEnd.theta,T9),h=I9(this._sphericalEnd.phi,T9);l.push(this.rotateTo(u,h,t));const f=mi.setFromSpherical(this._sphericalEnd).normalize(),d=L9.setFromUnitVectors(f,D3),g=mr(Math.abs(f.y),1);g&&d.multiply(O3.setFromAxisAngle(Lw,u)),d.multiply(this._yAxisUpSpaceInverse);const v=D9.makeEmpty();ir.copy(c.min).applyQuaternion(d),v.expandByPoint(ir),ir.copy(c.min).setX(c.max.x).applyQuaternion(d),v.expandByPoint(ir),ir.copy(c.min).setY(c.max.y).applyQuaternion(d),v.expandByPoint(ir),ir.copy(c.max).setZ(c.min.z).applyQuaternion(d),v.expandByPoint(ir),ir.copy(c.min).setZ(c.max.z).applyQuaternion(d),v.expandByPoint(ir),ir.copy(c.max).setY(c.min.y).applyQuaternion(d),v.expandByPoint(ir),ir.copy(c.max).setX(c.min.x).applyQuaternion(d),v.expandByPoint(ir),ir.copy(c.max).applyQuaternion(d),v.expandByPoint(ir),v.min.x-=r,v.min.y-=a,v.max.x+=s,v.max.y+=o,d.setFromUnitVectors(D3,f),g&&d.premultiply(O3.invert()),d.premultiply(this._yAxisUpSpace);const A=v.getSize(mi),_=v.getCenter(ir).applyQuaternion(d);if(Jp(this._camera)){const y=this.getDistanceToFitBox(A.x,A.y,A.z,n);l.push(this.moveTo(_.x,_.y,_.z,t)),l.push(this.dollyTo(y,t)),l.push(this.setFocalOffset(0,0,0,t))}else if(Ad(this._camera)){const y=this._camera,x=y.right-y.left,C=y.top-y.bottom,S=n?Math.max(x/A.x,C/A.y):Math.min(x/A.x,C/A.y);l.push(this.moveTo(_.x,_.y,_.z,t)),l.push(this.zoomTo(S,t)),l.push(this.setFocalOffset(0,0,0,t))}return Promise.all(l)}fitToSphere(e,t){const n=[],s=e instanceof Gn.Sphere?L3.copy(e):hl.createBoundingSphere(e,L3);if(n.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),Jp(this._camera)){const a=this.getDistanceToFitSphere(s.radius);n.push(this.dollyTo(a,t))}else if(Ad(this._camera)){const a=this._camera.right-this._camera.left,o=this._camera.top-this._camera.bottom,l=2*s.radius,c=Math.min(a/l,o/l);n.push(this.zoomTo(c,t))}return n.push(this.setFocalOffset(0,0,0,t)),Promise.all(n)}setLookAt(e,t,n,r,s,a,o=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Km.NONE,this._changedDolly=0;const l=ir.set(r,s,a),c=mi.set(e,t,n);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(c.sub(l).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,o||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const u=!o||mr(this._target.x,this._targetEnd.x,this.restThreshold)&&mr(this._target.y,this._targetEnd.y,this.restThreshold)&&mr(this._target.z,this._targetEnd.z,this.restThreshold)&&mr(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&mr(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&mr(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}lerpLookAt(e,t,n,r,s,a,o,l,c,u,h,f,d,g=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Km.NONE,this._changedDolly=0;const v=mi.set(r,s,a),A=ir.set(e,t,n);bc.setFromVector3(A.sub(v).applyQuaternion(this._yAxisUpSpace));const _=Zm.set(u,h,f),y=ir.set(o,l,c);V_.setFromVector3(y.sub(_).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(v.lerp(_,d));const x=V_.theta-bc.theta,C=V_.phi-bc.phi,S=V_.radius-bc.radius;this._sphericalEnd.set(bc.radius+S*d,bc.phi+C*d,bc.theta+x*d),this.normalizeRotations(),this._needsUpdate=!0,g||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const I=!g||mr(this._target.x,this._targetEnd.x,this.restThreshold)&&mr(this._target.y,this._targetEnd.y,this.restThreshold)&&mr(this._target.z,this._targetEnd.z,this.restThreshold)&&mr(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&mr(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&mr(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(I)}setPosition(e,t,n,r=!1){return this.setLookAt(e,t,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,n,r=!1){const s=this.getPosition(mi),a=this.setLookAt(s.x,s.y,s.z,e,t,n,r);return this._sphericalEnd.phi=Qu(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),a}setFocalOffset(e,t,n,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,n),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const s=!r||mr(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&mr(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&mr(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,n){this._camera.updateMatrixWorld(),Uu.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Vu.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Zp.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=mi.set(e,t,n),s=r.distanceTo(this._camera.position),a=r.sub(this._camera.position);Uu.multiplyScalar(a.x),Vu.multiplyScalar(a.y),Zp.multiplyScalar(a.z),mi.copy(Uu).add(Vu).add(Zp),mi.z=mi.z+s,this.dollyTo(s,!1),this.setFocalOffset(-mi.x,mi.y,-mi.z,!1),this.moveTo(e,t,n,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,n,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new Gn.Vector4,typeof e=="number"?this._viewport.set(e,t,n,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,n,r=!1){if(R3(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=e/t,a=this._camera.getEffectiveFOV()*N_,o=this._camera.aspect;return((r?s>o:s<o)?t:e/o)*.5/Math.tan(a*.5)+n*.5}getDistanceToFitSphere(e){if(R3(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*N_,n=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?t:n;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new Gn.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new Gn.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e&&e instanceof Gn.Spherical?e:new Gn.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new Gn.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Jm,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Jm),this._spherical.theta+=Jm*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Jm)}reset(e=!1){if(!mr(this._camera.up.x,this._cameraUp0.x)||!mr(this._camera.up.y,this._cameraUp0.y)||!mr(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const n=this.getPosition(mi);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Lw),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=mi.subVectors(this._target,this._camera.position).normalize(),t=ir.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e),this._camera.updateMatrixWorld();const n=this.getPosition(mi);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,n=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,s=B9.subVectors(this._targetEnd,this._target),a=R9.subVectors(this._focalOffsetEnd,this._focalOffset),o=this._zoomEnd-this._zoom;if(Or(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=Rw(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,h,1/0,e),this._needsUpdate=!0}if(Or(n))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=Rw(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,h,1/0,e),this._needsUpdate=!0}if(Or(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const h=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=Rw(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,h,this.maxSpeed,e),this._needsUpdate=!0}if(Or(s.x)&&Or(s.y)&&Or(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const h=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;P9(this._target,this._targetEnd,this._targetVelocity,h,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Or(a.x)&&Or(a.y)&&Or(a.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const h=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;P9(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,h,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Or(o))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const h=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=Rw(this._zoom,this._zoomEnd,this._zoomVelocity,h,1/0,e)}if(this.dollyToCursor){if(Jp(this._camera)&&this._changedDolly!==0){const h=this._spherical.radius-this._lastDistance,f=this._camera,d=this._getCameraDirection(U_),g=mi.copy(d).cross(f.up).normalize();g.lengthSq()===0&&(g.x=1);const v=ir.crossVectors(g,d),A=this._sphericalEnd.radius*Math.tan(f.getEffectiveFOV()*N_*.5),y=(this._sphericalEnd.radius-h-this._sphericalEnd.radius)/this._sphericalEnd.radius,x=Zm.copy(this._targetEnd).add(g.multiplyScalar(this._dollyControlCoord.x*A*f.aspect)).add(v.multiplyScalar(this._dollyControlCoord.y*A)),C=mi.copy(this._targetEnd).lerp(x,y),S=this._lastDollyDirection===Km.IN&&this._spherical.radius<=this.minDistance,I=this._lastDollyDirection===Km.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(S||I)){this._sphericalEnd.radius-=h,this._spherical.radius-=h;const B=ir.copy(d).multiplyScalar(-h);C.add(B)}this._boundary.clampPoint(C,C);const P=ir.subVectors(C,this._targetEnd);this._targetEnd.copy(C),this._target.add(P),this._changedDolly-=h,Or(this._changedDolly)&&(this._changedDolly=0)}else if(Ad(this._camera)&&this._changedZoom!==0){const h=this._zoom-this._lastZoom,f=this._camera,d=mi.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(f.near+f.far)/(f.near-f.far)).unproject(f),g=ir.set(0,0,-1).applyQuaternion(f.quaternion),v=Zm.copy(d).add(g.multiplyScalar(-d.dot(f.up))),_=-(this._zoom-h-this._zoom)/this._zoom,y=this._getCameraDirection(U_),x=this._targetEnd.dot(y),C=mi.copy(this._targetEnd).lerp(v,_),S=C.dot(y),I=y.multiplyScalar(S-x);C.sub(I),this._boundary.clampPoint(C,C);const P=ir.subVectors(C,this._targetEnd);this._targetEnd.copy(C),this._target.add(P),this._changedZoom-=h,Or(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Or(this._focalOffset.x)||!Or(this._focalOffset.y)||!Or(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),Uu.setFromMatrixColumn(this._camera.matrix,0),Vu.setFromMatrixColumn(this._camera.matrix,1),Zp.setFromMatrixColumn(this._camera.matrix,2),Uu.multiplyScalar(this._focalOffset.x),Vu.multiplyScalar(-this._focalOffset.y),Zp.multiplyScalar(this._focalOffset.z),mi.copy(Uu).add(Vu).add(Zp),this._camera.position.add(mi)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),mi.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),Or(t,this.restThreshold)&&Or(n,this.restThreshold)&&Or(r,this.restThreshold)&&Or(s.x,this.restThreshold)&&Or(s.y,this.restThreshold)&&Or(s.z,this.restThreshold)&&Or(a.x,this.restThreshold)&&Or(a.y,this.restThreshold)&&Or(a.z,this.restThreshold)&&Or(o,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:F_(this.maxDistance),minZoom:this.minZoom,maxZoom:F_(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:F_(this.maxPolarAngle),minAzimuthAngle:F_(this.minAzimuthAngle),maxAzimuthAngle:F_(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:mi.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const n=JSON.parse(e);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=z_(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=z_(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=z_(n.maxPolarAngle),this.minAzimuthAngle=z_(n.minAzimuthAngle),this.maxAzimuthAngle=z_(n.maxAzimuthAngle),this.smoothTime=n.smoothTime,this.draggingSmoothTime=n.draggingSmoothTime,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],t),bc.setFromVector3(mi.fromArray(n.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(bc.theta,bc.phi,t),this.dollyTo(bc.radius,t),this.zoomTo(n.zoom,t),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",Ydt),this._addAllEventListeners(e)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,n){const r=t.lengthSq();if(r===0)return e;const s=ir.copy(t).add(e),o=this._boundary.clampPoint(s,Zm).sub(s),l=o.lengthSq();if(l===0)return e.add(t);if(l===r)return e;if(n===0)return e.add(t).add(o);{const c=1+n*l/t.dot(o);return e.add(ir.copy(t).multiplyScalar(c)).add(o.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(Jp(this._camera)){const e=this._camera,t=e.near,n=e.getEffectiveFOV()*N_,r=Math.tan(n*.5)*t,s=r*e.aspect;this._nearPlaneCorners[0].set(-s,-r,0),this._nearPlaneCorners[1].set(s,-r,0),this._nearPlaneCorners[2].set(s,r,0),this._nearPlaneCorners[3].set(-s,r,0)}else if(Ad(this._camera)){const e=this._camera,t=1/e.zoom,n=e.left*t,r=e.right*t,s=e.top*t,a=e.bottom*t;this._nearPlaneCorners[0].set(n,s,0),this._nearPlaneCorners[1].set(r,s,0),this._nearPlaneCorners[2].set(r,a,0),this._nearPlaneCorners[3].set(n,a,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||R3(this._camera,"_collisionTest"))return e;const n=this._getTargetDirection(U_);N3.lookAt(k9,n,this._camera.up);for(let r=0;r<4;r++){const s=ir.copy(this._nearPlaneCorners[r]);s.applyMatrix4(N3);const a=Zm.addVectors(this._target,s);Ow.set(a,n),Ow.far=this._spherical.radius+1;const o=Ow.intersectObjects(this.colliderMeshes);o.length!==0&&o[0].distance<e&&(e=o[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const n=()=>{this.removeEventListener("rest",n),t()};this.addEventListener("rest",n)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new Gn.Sphere){const n=t,r=n.center;eg.makeEmpty(),e.traverseVisible(a=>{a.isMesh&&eg.expandByObject(a)}),eg.getCenter(r);let s=0;return e.traverseVisible(a=>{if(!a.isMesh)return;const o=a,l=o.geometry.clone();l.applyMatrix4(o.matrixWorld);const u=l.attributes.position;for(let h=0,f=u.count;h<f;h++)mi.fromBufferAttribute(u,h),s=Math.max(s,r.distanceToSquared(mi))}),n.radius=Math.sqrt(s),n}}function Jdt(i){let e,t;return Af(i[6]),{c:Sn,l:Sn,m(n,r){e||(t=[Ki(window,"mousemove",i[5]),Ki(window,"resize",i[6])],e=!0)},p:Sn,i:Sn,o:Sn,d(n){e=!1,iv(t)}}}function Zdt(i,e,t){let n,r;Xt(i,U3,f=>t(7,n=f)),Df();let s=new fe(1,0,0);const a=V3([1,0,0]);Xt(i,a,f=>t(0,r=f)),a.stiffness=.1,a.damping=1.5;let o,l;function c(f){Zt(U3,n=[f[0],0,0,0,f[1],1,0,0,0,0,1,0,0,0,0,1],n)}const u=f=>{s.set((f.clientX/o*2-1)*1,(-(f.clientY/l)*2+1)*1,0),Zt(a,r=[s.x,s.y,s.z],r)};function h(){t(2,o=window.innerWidth),t(3,l=window.innerHeight)}return i.$$.update=()=>{i.$$.dirty&1&&c(r)},[r,a,o,l,s,u,h]}class ept extends ln{constructor(e){super(),cn(this,e,Zdt,Jdt,an,{})}}const tpt=200,Nw=20,H_=6,npt=.5;function ipt(i,e,t){let{view:n}=e,{enter:r}=e,{exit:s}=e;const a=[0,1];n.area({rangeX:a,rangeY:a,width:Nw,height:Nw,items:1,channels:4,live:!1,expr:(l,c,u)=>{l(c,u,1,npt)}}),n.area({rangeX:a,rangeY:a,width:Nw,height:Nw,items:2,channels:2,live:!1,expr:(l,c,u)=>{l(c,u),l(.5,.5)}});const o=n.reveal({stagger:[2,2,0,0]});return o.transform({scale:[H_,H_,H_],position:[-H_/2,-H_/2,0]}).vector({width:1,start:!0,colors:"<<",color:16777215,zBias:tpt}),i.$$set=l=>{"view"in l&&t(0,n=l.view),"enter"in l&&t(1,r=l.enter),"exit"in l&&t(2,s=l.exit)},i.$$.update=()=>{i.$$.dirty&2&&o.set({enter:r}),i.$$.dirty&4&&o.set({exit:s})},[n,r,s]}class rpt extends ln{constructor(e){super(),cn(this,e,ipt,null,an,{view:0,enter:1,exit:2})}}function O9(i){let e,t;return e=new ept({}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function spt(i){let e,t;const n=[i[2],{axes:"xyz"}];let r={};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new Dx({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,a){const o=a[0]&4?Fn(n,[ur(s[2]),n[1]]):{};e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function apt(i){let e,t;const n=[i[3],{axes:"xyz"}];let r={};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new Dx({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,a){const o=a[0]&8?Fn(n,[ur(s[3]),n[1]]):{};e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function opt(i){let e,t,n,r;const s=[{axes:"xzy"},{"position.z":hf*0},{"position.y":hf},i[4]];let a={};for(let c=0;c<s.length;c+=1)a=Bt(a,s[c]);e=new Dx({props:a});const o=[{axes:"zyx"},{"position.z":hf*0},{"position.x":-hf},i[4]];let l={};for(let c=0;c<o.length;c+=1)l=Bt(l,o[c]);return n=new Dx({props:l}),{c(){Oe(e.$$.fragment),t=_t(),Oe(n.$$.fragment)},l(c){ze(e.$$.fragment,c),t=At(c),ze(n.$$.fragment,c)},m(c,u){Ne(e,c,u),Pe(c,t,u),Ne(n,c,u),r=!0},p(c,u){const h=u[0]&16?Fn(s,[s[0],u&0&&{"position.z":hf*0},u&0&&{"position.y":hf},u[0]&16&&ur(c[4])]):{};e.$set(h);const f=u[0]&16?Fn(o,[o[0],u&0&&{"position.z":hf*0},u&0&&{"position.x":-hf},u[0]&16&&ur(c[4])]):{};n.$set(f)},i(c){r||(oe(e.$$.fragment,c),oe(n.$$.fragment,c),r=!0)},o(c){pe(e.$$.fragment,c),pe(n.$$.fragment,c),r=!1},d(c){c&&Z(t),Fe(e,c),Fe(n,c)}}}function lpt(i){return{c:Sn,l:Sn,m:Sn,p:Sn,i:Sn,o:Sn,d:Sn}}function cpt(i){let e,t;const n=[{is:i[73].scene},{"position.z":0},{rotation:[Math.PI/2,0,0]},i[14]];let r={};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new Oo({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,a){const o=a[0]&16384?Fn(n,[n[0],n[1],a&0&&{rotation:[Math.PI/2,0,0]},a[0]&16384&&ur(s[14])]):{};e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function upt(i){return{c:Sn,l:Sn,m:Sn,p:Sn,i:Sn,o:Sn,d:Sn}}function hpt(i){return{c:Sn,l:Sn,m:Sn,p:Sn,i:Sn,o:Sn,d:Sn}}function fpt(i){let e,t;return e=new Oo.MeshBasicMaterial({props:{map:i[72],$$slots:{default:[dpt]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},p(n,r){const s={};r[2]&4096&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function dpt(i){let e,t;return e=new Oo.DoubleSide({props:{attach:"side"}}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},p:Sn,i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function ppt(i){return{c:Sn,l:Sn,m:Sn,p:Sn,i:Sn,o:Sn,d:Sn}}function mpt(i){let e,t,n,r;e=new Oo.PlaneGeometry({props:{args:[6,6]}});let s={ctx:i,current:null,token:null,hasCatch:!1,pending:ppt,then:fpt,catch:hpt,value:72,blocks:[,,,]};return _L(i[19],s),{c(){Oe(e.$$.fragment),t=_t(),n=ua(),s.block.c()},l(a){ze(e.$$.fragment,a),t=At(a),n=ua(),s.block.l(a)},m(a,o){Ne(e,a,o),Pe(a,t,o),Pe(a,n,o),s.block.m(a,s.anchor=o),s.mount=()=>n.parentNode,s.anchor=n,r=!0},p(a,o){i=a,AL(s,i,o)},i(a){r||(oe(e.$$.fragment,a),oe(s.block),r=!0)},o(a){pe(e.$$.fragment,a);for(let o=0;o<3;o+=1){const l=s.blocks[o];pe(l)}r=!1},d(a){a&&(Z(t),Z(n)),Fe(e,a),s.block.d(a),s.token=null,s=null}}}function gpt(i){let e,t,n,r={ctx:i,current:null,token:null,hasCatch:!1,pending:upt,then:cpt,catch:lpt,value:73,blocks:[,,,]};_L(OZe(`${gL}/maxwell.glb`),r);const s=[i[15]];let a={$$slots:{default:[mpt]},$$scope:{ctx:i}};for(let o=0;o<s.length;o+=1)a=Bt(a,s[o]);return t=new Oo.Mesh({props:a}),{c(){r.block.c(),e=_t(),Oe(t.$$.fragment)},l(o){r.block.l(o),e=At(o),ze(t.$$.fragment,o)},m(o,l){r.block.m(o,r.anchor=l),r.mount=()=>e.parentNode,r.anchor=e,Pe(o,e,l),Ne(t,o,l),n=!0},p(o,l){i=o,AL(r,i,l);const c=l[0]&32768?Fn(s,[ur(i[15])]):{};l[2]&4096&&(c.$$scope={dirty:l,ctx:i}),t.$set(c)},i(o){n||(oe(r.block),oe(t.$$.fragment,o),n=!0)},o(o){for(let l=0;l<3;l+=1){const c=r.blocks[l];pe(c)}pe(t.$$.fragment,o),n=!1},d(o){o&&Z(e),r.block.d(o),r.token=null,r=null,Fe(t,o)}}}function vpt(i){let e,t,n,r,s,a,o,l,c,u,h,f,d,g,v,A,_,y,x,C,S,I,P,B,M,D,F,z,U,$,O,ie,W,J,Ce,Me,ge,ve,nt,$e=i[1]&&O9();return t=new vd({props:{view:i[20],coords:i[5],color:vl,texOpacity:i[9].vectorTexOpacity,visible:i[9].xVisible,dim3:i[9].vectorDim3}}),r=new vd({props:{view:i[21],coords:[0,0,0,...i[18]],color:vl,tex:!1,visible:i[17].vectorVisible}}),a=new vd({props:{view:i[20],coords:i[6],color:ec,texOpacity:i[9].xTexOpacity,scalar:i[9].xScalar,scalarOpacity:i[9].xScalarOpacity,scalarAlign:i[9].xScalarAlign,visible:i[9].xVisible,dim3:i[9].xDim3}}),l=new vd({props:{view:i[20],coords:i[7],color:tc,texOpacity:i[9].yTexOpacity,scalar:i[9].yScalar,scalarOpacity:i[9].yScalarOpacity,scalarAlign:i[9].yScalarAlign,visible:i[9].yVisible,dim3:i[9].yDim3}}),u=new vd({props:{view:i[20],coords:i[8],color:p1,texOpacity:i[9].zTexOpacity,scalar:i[9].zScalar,scalarOpacity:i[9].zScalarOpacity,scalarAlign:i[9].zScalarAlign,visible:i[9].zVisible,dim3:i[9].zDim3}}),f=new vd({props:{view:i[21],coords:[0,0,0,1,0,0],color:ec,tex:!1,visible:i[17].xVisible}}),g=new vd({props:{view:i[21],coords:[0,0,0,0,1,0],color:tc,tex:!1,visible:i[17].yVisible}}),A=new vd({props:{view:i[21],coords:[0,0,0,0,0,1],color:p1,tex:!1,visible:i[17].zVisible}}),y=new Oo.Group({props:{renderOrder:-3,$$slots:{default:[spt]},$$scope:{ctx:i}}}),C=new Oo.Group({props:{renderOrder:-2,matrix:i[0],matrixAutoUpdate:!1,$$slots:{default:[apt]},$$scope:{ctx:i}}}),I=new Oo.Group({props:{renderOrder:-4,matrix:i[0],matrixAutoUpdate:!1,$$slots:{default:[opt]},$$scope:{ctx:i}}}),B=new Oo.Group({props:{renderOrder:-4,matrix:i[0],matrixAutoUpdate:!1,$$slots:{default:[gpt]},$$scope:{ctx:i}}}),D=new TD({props:{view:i[21],t:i[11].t}}),z=new MD({props:{view:i[21],t:i[10].t}}),$=new TD({props:{view:i[21],t:i[13].t,dim3:!0}}),ie=new MD({props:{view:i[21],t:i[12].t,dim3:!0}}),J=new ID({props:{view:i[21],dim:_d,position:[-_d/2,-_d/2,-_d/2],rotation:[0,-Math.PI/2,0],t:i[4].t}}),Me=new ID({props:{view:i[21],dim:_d,position:[-_d/2,_d/2,_d/2],rotation:[-Math.PI/2,0,0],t:i[4].t}}),ve=new rpt({props:{view:i[21],enter:i[16].enter,exit:i[16].exit}}),{c(){$e&&$e.c(),e=_t(),Oe(t.$$.fragment),n=_t(),Oe(r.$$.fragment),s=_t(),Oe(a.$$.fragment),o=_t(),Oe(l.$$.fragment),c=_t(),Oe(u.$$.fragment),h=_t(),Oe(f.$$.fragment),d=_t(),Oe(g.$$.fragment),v=_t(),Oe(A.$$.fragment),_=_t(),Oe(y.$$.fragment),x=_t(),Oe(C.$$.fragment),S=_t(),Oe(I.$$.fragment),P=_t(),Oe(B.$$.fragment),M=_t(),Oe(D.$$.fragment),F=_t(),Oe(z.$$.fragment),U=_t(),Oe($.$$.fragment),O=_t(),Oe(ie.$$.fragment),W=_t(),Oe(J.$$.fragment),Ce=_t(),Oe(Me.$$.fragment),ge=_t(),Oe(ve.$$.fragment)},l(X){$e&&$e.l(X),e=At(X),ze(t.$$.fragment,X),n=At(X),ze(r.$$.fragment,X),s=At(X),ze(a.$$.fragment,X),o=At(X),ze(l.$$.fragment,X),c=At(X),ze(u.$$.fragment,X),h=At(X),ze(f.$$.fragment,X),d=At(X),ze(g.$$.fragment,X),v=At(X),ze(A.$$.fragment,X),_=At(X),ze(y.$$.fragment,X),x=At(X),ze(C.$$.fragment,X),S=At(X),ze(I.$$.fragment,X),P=At(X),ze(B.$$.fragment,X),M=At(X),ze(D.$$.fragment,X),F=At(X),ze(z.$$.fragment,X),U=At(X),ze($.$$.fragment,X),O=At(X),ze(ie.$$.fragment,X),W=At(X),ze(J.$$.fragment,X),Ce=At(X),ze(Me.$$.fragment,X),ge=At(X),ze(ve.$$.fragment,X)},m(X,Be){$e&&$e.m(X,Be),Pe(X,e,Be),Ne(t,X,Be),Pe(X,n,Be),Ne(r,X,Be),Pe(X,s,Be),Ne(a,X,Be),Pe(X,o,Be),Ne(l,X,Be),Pe(X,c,Be),Ne(u,X,Be),Pe(X,h,Be),Ne(f,X,Be),Pe(X,d,Be),Ne(g,X,Be),Pe(X,v,Be),Ne(A,X,Be),Pe(X,_,Be),Ne(y,X,Be),Pe(X,x,Be),Ne(C,X,Be),Pe(X,S,Be),Ne(I,X,Be),Pe(X,P,Be),Ne(B,X,Be),Pe(X,M,Be),Ne(D,X,Be),Pe(X,F,Be),Ne(z,X,Be),Pe(X,U,Be),Ne($,X,Be),Pe(X,O,Be),Ne(ie,X,Be),Pe(X,W,Be),Ne(J,X,Be),Pe(X,Ce,Be),Ne(Me,X,Be),Pe(X,ge,Be),Ne(ve,X,Be),nt=!0},p(X,Be){X[1]?$e?Be[0]&2&&oe($e,1):($e=O9(),$e.c(),oe($e,1),$e.m(e.parentNode,e)):$e&&(Rs(),pe($e,1,1,()=>{$e=null}),Ds());const mt={};Be[0]&32&&(mt.coords=X[5]),Be[0]&512&&(mt.texOpacity=X[9].vectorTexOpacity),Be[0]&512&&(mt.visible=X[9].xVisible),Be[0]&512&&(mt.dim3=X[9].vectorDim3),t.$set(mt);const Ue={};Be[0]&262144&&(Ue.coords=[0,0,0,...X[18]]),Be[0]&131072&&(Ue.visible=X[17].vectorVisible),r.$set(Ue);const Tt={};Be[0]&64&&(Tt.coords=X[6]),Be[0]&512&&(Tt.texOpacity=X[9].xTexOpacity),Be[0]&512&&(Tt.scalar=X[9].xScalar),Be[0]&512&&(Tt.scalarOpacity=X[9].xScalarOpacity),Be[0]&512&&(Tt.scalarAlign=X[9].xScalarAlign),Be[0]&512&&(Tt.visible=X[9].xVisible),Be[0]&512&&(Tt.dim3=X[9].xDim3),a.$set(Tt);const yt={};Be[0]&128&&(yt.coords=X[7]),Be[0]&512&&(yt.texOpacity=X[9].yTexOpacity),Be[0]&512&&(yt.scalar=X[9].yScalar),Be[0]&512&&(yt.scalarOpacity=X[9].yScalarOpacity),Be[0]&512&&(yt.scalarAlign=X[9].yScalarAlign),Be[0]&512&&(yt.visible=X[9].yVisible),Be[0]&512&&(yt.dim3=X[9].yDim3),l.$set(yt);const Ye={};Be[0]&256&&(Ye.coords=X[8]),Be[0]&512&&(Ye.texOpacity=X[9].zTexOpacity),Be[0]&512&&(Ye.scalar=X[9].zScalar),Be[0]&512&&(Ye.scalarOpacity=X[9].zScalarOpacity),Be[0]&512&&(Ye.scalarAlign=X[9].zScalarAlign),Be[0]&512&&(Ye.visible=X[9].zVisible),Be[0]&512&&(Ye.dim3=X[9].zDim3),u.$set(Ye);const lt={};Be[0]&131072&&(lt.visible=X[17].xVisible),f.$set(lt);const ue={};Be[0]&131072&&(ue.visible=X[17].yVisible),g.$set(ue);const dt={};Be[0]&131072&&(dt.visible=X[17].zVisible),A.$set(dt);const le={};Be[0]&4|Be[2]&4096&&(le.$$scope={dirty:Be,ctx:X}),y.$set(le);const he={};Be[0]&1&&(he.matrix=X[0]),Be[0]&8|Be[2]&4096&&(he.$$scope={dirty:Be,ctx:X}),C.$set(he);const xe={};Be[0]&1&&(xe.matrix=X[0]),Be[0]&16|Be[2]&4096&&(xe.$$scope={dirty:Be,ctx:X}),I.$set(xe);const pt={};Be[0]&1&&(pt.matrix=X[0]),Be[0]&49152|Be[2]&4096&&(pt.$$scope={dirty:Be,ctx:X}),B.$set(pt);const Ze={};Be[0]&2048&&(Ze.t=X[11].t),D.$set(Ze);const me={};Be[0]&1024&&(me.t=X[10].t),z.$set(me);const te={};Be[0]&8192&&(te.t=X[13].t),$.$set(te);const Se={};Be[0]&4096&&(Se.t=X[12].t),ie.$set(Se);const j={};Be[0]&16&&(j.t=X[4].t),J.$set(j);const q={};Be[0]&16&&(q.t=X[4].t),Me.$set(q);const Ve={};Be[0]&65536&&(Ve.enter=X[16].enter),Be[0]&65536&&(Ve.exit=X[16].exit),ve.$set(Ve)},i(X){nt||(oe($e),oe(t.$$.fragment,X),oe(r.$$.fragment,X),oe(a.$$.fragment,X),oe(l.$$.fragment,X),oe(u.$$.fragment,X),oe(f.$$.fragment,X),oe(g.$$.fragment,X),oe(A.$$.fragment,X),oe(y.$$.fragment,X),oe(C.$$.fragment,X),oe(I.$$.fragment,X),oe(B.$$.fragment,X),oe(D.$$.fragment,X),oe(z.$$.fragment,X),oe($.$$.fragment,X),oe(ie.$$.fragment,X),oe(J.$$.fragment,X),oe(Me.$$.fragment,X),oe(ve.$$.fragment,X),nt=!0)},o(X){pe($e),pe(t.$$.fragment,X),pe(r.$$.fragment,X),pe(a.$$.fragment,X),pe(l.$$.fragment,X),pe(u.$$.fragment,X),pe(f.$$.fragment,X),pe(g.$$.fragment,X),pe(A.$$.fragment,X),pe(y.$$.fragment,X),pe(C.$$.fragment,X),pe(I.$$.fragment,X),pe(B.$$.fragment,X),pe(D.$$.fragment,X),pe(z.$$.fragment,X),pe($.$$.fragment,X),pe(ie.$$.fragment,X),pe(J.$$.fragment,X),pe(Me.$$.fragment,X),pe(ve.$$.fragment,X),nt=!1},d(X){X&&(Z(e),Z(n),Z(s),Z(o),Z(c),Z(h),Z(d),Z(v),Z(_),Z(x),Z(S),Z(P),Z(M),Z(F),Z(U),Z(O),Z(W),Z(Ce),Z(ge)),$e&&$e.d(X),Fe(t,X),Fe(r,X),Fe(a,X),Fe(l,X),Fe(u,X),Fe(f,X),Fe(g,X),Fe(A,X),Fe(y,X),Fe(C,X),Fe(I,X),Fe(B,X),Fe(D,X),Fe(z,X),Fe($,X),Fe(ie,X),Fe(J,X),Fe(Me,X),Fe(ve,X)}}}const tg=1,_d=10,_pt=1,hf=5,nl=.1,gr=.3,Hu=1e3;function Apt(i,e,t){let n,r,s,a,o,l,c,u,h,f,d,g,v,A,_,y,x,C,S,I,P,B,M,D,F,z;Xt(i,H3,St=>t(27,s=St)),Xt(i,$T,St=>t(28,a=St)),Xt(i,$3,St=>t(44,o=St)),Xt(i,G3,St=>t(45,l=St)),Xt(i,$u,St=>t(46,c=St)),Xt(i,pf,St=>t(29,u=St)),Xt(i,Q3,St=>t(47,h=St)),Xt(i,Md,St=>t(30,f=St)),Xt(i,Wu,St=>t(31,d=St)),Xt(i,Td,St=>t(32,g=St)),Xt(i,sg,St=>t(33,v=St)),Xt(i,Gu,St=>t(34,A=St)),Xt(i,ag,St=>t(48,_=St)),Xt(i,yd,St=>t(35,y=St)),Xt(i,qu,St=>t(36,x=St)),Xt(i,$_,St=>t(49,C=St)),Xt(i,m1,St=>t(50,I=St)),Xt(i,U3,St=>t(37,B=St)),Xt(i,$w,St=>t(1,M=St)),Xt(i,a0,St=>t(51,D=St)),Xt(i,hx,St=>t(52,F=St));let{mathbox:U}=e;const $=NZe(`${gL}/maxwell.jpg`);Xt(i,$,St=>t(38,z=St));let O;U.set("focus",20);const ie=[[-tg,tg],[-tg,tg],[-tg,tg]],W=U.cartesian({range:ie}),J=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];let Ce=[...J];const Me=W.transform();Zt(Q3,h=un.to(Ce,{ease:"linear",duration:2,paused:!0,endArray:u,onUpdate(){Zt(hx,F=this.progress(),F),t(26,Ce)},onComplete(){Zt(a0,D=!0,D),this.pause()}}),h);let ge=!0;function ve(St){Ce.forEach((Rt,tt)=>{t(26,Ce[tt]=J[tt],Ce)}),h.invalidate();const Re=ge?1e-4:-1e-4;h.progress(h.progress()+Re),ge=!ge,t(26,Ce)}const nt=V3(T4);Xt(i,nt,St=>t(0,P=St));const $e={cellSize:_pt,cellColor:nv.slate[700],cellThickness:1.5,sectionSize:hf,sectionColor:nv.slate[700],sectionThickness:3,infiniteGrid:!0};let X={...$e,...n},Be={...$e,cellColor:fk,sectionColor:dk,...r},mt={...$e,infiniteGrid:!1,cellColor:fk,sectionColor:dk,gridSize:[10,10],cellThickness:0,sectionThickness:0,t:0},Ue={fadeDistance:X.fadeDistance,transformedFadeDistance:0,fadeStrength:X.fadeStrength,transformedFadeStrength:Be.fadeStrength};function Tt(St){St?un.to(X,{fadeDistance:n.fadeDistance,onUpdate(){t(2,X)}}):un.to(X,{fadeDistance:0,onUpdate(){t(2,X)}})}function yt(St){St?un.to(Be,{fadeDistance:r.fadeDistance,onUpdate(){t(3,Be)}}):un.to(Be,{fadeDistance:0,onUpdate(){t(3,Be)}})}function Ye(St){St?un.to(mt,{t:1,cellThickness:$e.cellThickness,sectionThickness:$e.sectionThickness,onUpdate(){t(4,mt)}}):un.to(mt,{t:0,cellThickness:0,sectionThickness:0,onUpdate(){t(4,mt)}})}let lt;function ue(St){lt=="points"?un.to(Se,{t:0,onUpdate(){t(10,Se)}}):lt=="3d points"?un.to(q,{t:0,onUpdate(){t(12,q)}}):lt=="planes"?un.to(j,{t:0,onUpdate(){t(11,j)}}):lt=="3d planes"?un.to(Ve,{t:0,onUpdate(){t(13,Ve)}}):lt=="model"?un.to(ct,{scale:0,onUpdate(){t(14,ct)}}):lt=="image"&&un.to(ne,{scale:0,onUpdate(){t(15,ne)}}),St=="points"?un.to(Se,{t:1,onUpdate(){t(10,Se)}}):St=="3d points"?un.to(q,{t:1,onUpdate(){t(12,q)}}):St=="planes"?un.to(j,{t:1,onUpdate(){t(11,j)}}):St=="3d planes"?un.to(Ve,{t:1,onUpdate(){t(13,Ve)}}):St=="model"?un.to(ct,{scale:.25,onUpdate(){t(14,ct)}}):St=="image"&&un.to(ne,{scale:1,onUpdate(){t(15,ne)}}),lt=St}function dt(St){g&&un.to(X,{duration:gr,fadeDistance:n.fadeDistance,fadeStrength:n.fadeStrength,onUpdate:()=>t(2,X)}),d&&un.to(Be,{duration:gr,fadeDistance:r.fadeDistance,fadeStrength:r.fadeStrength,onUpdate:()=>t(3,Be)}),c&&(f?t(17,Lt.zVisible=!0,Lt):(Zt(Gu,A=void 0,A),ue(void 0),Zt(m1,I=!I,I),t(17,Lt.zVisible=!1,Lt),Zt(qu,x[2]=0,x),un.to(u,{endArray:T4,onUpdate:()=>{pf.set(u)},duration:gr}),Zt(sg,v=!1,v),Ye(!1)))}let le=[0,0,0,0,0,0],he=[0,0,0,0,0,0],xe=[0,0,0,0,0,0],pt=[0,0,0,0,0,0];const Ze=V3([0,0,0]);Xt(i,Ze,St=>t(18,S=St));function me(St){St?Zt(Ze,S=x,S):Zt(Ze,S=[0,0,0],S)}let te={vectorTexOpacity:0,xTexOpacity:0,yTexOpacity:0,zTexOpacity:0,xScalar:1,yScalar:1,zScalar:1,xScalarOpacity:0,yScalarOpacity:0,zScalarOpacity:0,xScalarAlign:"top",yScalarAlign:"left",zScalarAlign:"bottom",vectorVisible:!1,xVisible:!0,yVisible:!0,zVisible:!0,xDim3:!1,yDim3:!1,zDim3:!1,vectorDim3:!1},Se={t:0},j={t:0},q={t:0},Ve={t:0},ct={scale:0},ne={scale:0},Je={enter:0,exit:1},Lt={vectorVisible:!0,xVisible:!1,yVisible:!1,zVisible:!1};const we={fastScrollEnd:!0,pin:"#article",pinnedContainer:"#article",start:"center center",scrub:1,pinSpacing:!0,toggleClass:"active",invalidateOnRefresh:!0,onEnter(){Ft()},onLeave(){jt()},onEnterBack(){Ft()},onLeaveBack(){jt()}},Ie={start:"bottom center",pinnedContainer:"#article",toggleActions:"play none none reverse",fastScrollEnd:!0,end:200},de={onUpdate(){Qt(this.progress())}},Xe={ease:"power2.in"};function Nt(){un.timeline({...de,scrollTrigger:{...we,trigger:"#st-1",end:`+=${Hu*1}`}}).to(le,{endArray:[0,0,0,...Qr,0],onUpdate(){t(5,le)}}).to(te,{vectorTexOpacity:1,onUpdate(){t(9,te)}}).to({},{duration:nl}),un.timeline({...de,scrollTrigger:{...we,trigger:"#st-2",end:`+=${Hu*1}`}}).to(he,{endArray:[0,0,0,1,0,0],onUpdate(){t(6,he)},delay:nl}).to(xe,{endArray:[0,0,0,0,1,0],onUpdate(){t(7,xe)}},"<").to(te,{xTexOpacity:1,onUpdate(){t(9,te)}}).to(te,{yTexOpacity:1,onUpdate(){t(9,te)}},"<").to({},{duration:nl}),un.timeline({...de,scrollTrigger:{...we,trigger:"#st-3",end:`+=${Hu*3}`,preventOverlaps:!0}}).to(te,{xTexOpacity:0,onUpdate(){t(9,te)}}).to(te,{yTexOpacity:0,onUpdate(){t(9,te)}},"<").add("step-2").to(te,{duration:.2,xScalarOpacity:1,onUpdate(){t(9,te)}},"step-2").to(te,{duration:.2,yScalarOpacity:1,onUpdate(){t(9,te)}},"step-2").to(he,{endArray:[0,0,0,Qr[0],0,0],onUpdate(){t(6,he)}},"step-2").to(xe,{endArray:[0,0,0,0,Qr[1],0],onUpdate(){t(7,xe)}},"step-2").to(te,{xScalar:Qr[0],onUpdate(){t(9,te)}},"step-2").to(te,{yScalar:Qr[1],onUpdate(){t(9,te)}},"step-2").to({},{duration:nl}).add("step-3").to(te,{duration:.2,xScalarOpacity:0,onUpdate(){t(9,te)}},"step-3").to(te,{duration:.2,yScalarOpacity:0,onUpdate(){t(9,te)}},"step-3").to(xe,{endArray:[Qr[0],0,0,...Qr,0],onUpdate(){t(7,xe)}},"step-3").to({},{duration:nl}),un.timeline({scrollTrigger:{...Ie,trigger:"#st-3"},timelinePropsAlt:Xe}).add("step-1").to(te,{duration:gr,xScalar:1,yScalar:1},"step-1").to(he,{duration:gr,endArray:[0,0,0,1,0,0],onUpdate(){t(6,he)}},"step-1").to(xe,{duration:gr,endArray:[0,0,0,0,1,0],onUpdate(){t(7,xe)}},"step-1").to(te,{duration:gr,xTexOpacity:1,onUpdate(){t(9,te)}}).to(te,{duration:gr,yTexOpacity:1,onUpdate(){t(9,te)}},"<"),un.timeline({...de,scrollTrigger:{...we,trigger:"#st-4",end:`+=${Hu*1}`}}).to(he,{endArray:[0,0,0,...Hl,0],onUpdate(){t(6,he)}}).to(xe,{endArray:[0,0,0,...fu,0],onUpdate(){t(7,xe)}},"<").to(le,{endArray:[0,0,0,...Pg,0],onUpdate(){t(5,le)}},"<").to({},{duration:nl}),un.timeline({...de,scrollTrigger:{...we,trigger:"#st-5",end:`+=${Hu*3}`}}).add("step-1").to(te,{xScalarAlign:"left",yScalarAlign:"top"},"step-1").to(te,{xTexOpacity:0,onUpdate(){t(9,te)}},"step-1").to(te,{yTexOpacity:0,onUpdate(){t(9,te)}},"step-1").add("step-2").to(te,{duration:.2,xScalarOpacity:1,onUpdate(){t(9,te)}},"step-2").to(te,{duration:.2,yScalarOpacity:1,onUpdate(){t(9,te)}},"step-2").to(he,{endArray:[0,0,0,Qr[0]*Hl[0],Qr[0]*Hl[1],0],onUpdate(){t(6,he)}},"step-2").to(xe,{endArray:[0,0,0,Qr[1]*fu[0],Qr[1]*fu[1],0],onUpdate(){t(7,xe)}},"step-2").to(te,{xScalar:Qr[0],onUpdate(){t(9,te)}},"step-2").to(te,{yScalar:Qr[1],onUpdate(){t(9,te)}},"step-2").to({},{duration:nl}).add("step-3").to(te,{duration:.2,xScalarOpacity:0,onUpdate(){t(9,te)}},"step-3").to(te,{duration:.2,yScalarOpacity:0,onUpdate(){t(9,te)}},"step-3").to(xe,{endArray:[Qr[0]*Hl[0],Qr[0]*Hl[1],0,...Pg,0],onUpdate(){t(7,xe)}},"step-3").to({},{duration:nl}),un.timeline({scrollTrigger:{...Ie,trigger:"#st-5"},timelinePropsAlt:Xe}).add("step-1").to(te,{duration:gr,vectorTexOpacity:0,onUpdate(){t(9,te)}},"step-1").to(le,{duration:gr,endArray:[0,0,0,0,0,0],onUpdate(){t(5,le)}},"step-1").to(he,{duration:gr,endArray:[0,0,0,1,0,0],onUpdate(){t(6,he)}},"step-1").to(xe,{duration:gr,endArray:[0,0,0,0,1,0],onUpdate(){t(7,xe)}},"step-1").add("step-2").to(te,{duration:gr,xTexOpacity:1,onUpdate(){t(9,te)}},"step-2").to(te,{duration:gr,yTexOpacity:1,onUpdate(){t(9,te)}},"step-2"),un.timeline({...de,scrollTrigger:{...we,trigger:"#st-6",end:`+=${Hu*4}`,onLeaveBack:()=>{we.onLeaveBack(),Zt(Gu,A=void 0,A),Zt(Wu,d=!1,d)}}}).add("step-1").to(Je,{enter:1,onUpdate(){t(16,Je)}},"step-1").to(Je,{exit:0,onUpdate(){t(16,Je)}},"step-1+=0.1").to(Se,{t:1,onUpdate(){t(10,Se)}},"step-1+=0.15").to(Ue,{transformedFadeDistance:X.fadeDistance,onUpdate(){Ue=Ue}},"step-1+=0.15").to({},{duration:nl}),un.timeline({...de,scrollTrigger:{...we,trigger:"#st-7",end:`+=${Hu*1}`,onToggle:Re=>{Zt(Gu,A="points",A),Zt(Wu,d=!0,d)}}}).add("step-1").to(h,{progress:1},"step-1").to(he,{endArray:[0,0,0,...Hl,0],onUpdate(){t(6,he)}},"step-1").to(xe,{endArray:[0,0,0,...fu,0],onUpdate(){t(7,xe)}},"step-1").to({},{duration:nl}),un.timeline({scrollTrigger:{...Ie,trigger:"#st-8",start:"top center",onEnter:()=>{Zt($u,c=!0,c),Zt(yd,y=!0,y)},onLeaveBack:()=>{Zt($u,c=!1,c),C.reset(!0),Zt(Gu,A="points",A),Zt(Td,g=!0,g),Zt(Wu,d=!0,d),Zt(yd,y=!1,y),h.progress(1),un.to(u,{endArray:IY,onUpdate:()=>{pf.set(u)},duration:gr})}},timelinePropsAlt:Xe}).add("step-1").to("#canvas-wrapper",{pointerEvents:"auto",duration:gr},"step-1").from("#inputs",{autoAlpha:0,x:-40,duration:gr},"step-1").fromTo(he,{endArray:[0,0,0,...Hl,0]},{endArray:()=>[0,0,0,Ce[0],Ce[4],0],onUpdate:()=>{t(6,he)},immediateRender:!1,duration:gr},"step-1").fromTo(xe,{endArray:[0,0,0,...fu,0]},{endArray:()=>[0,0,0,Ce[1],Ce[5],0],onUpdate:()=>{t(7,xe)},immediateRender:!1,duration:gr},"step-1").to(te,{duration:gr,xTexOpacity:0,yTexOpacity:0,onUpdate(){t(9,te)}},"step-1").to(Lt,{duration:.001,xVisible:!0,yVisible:!0,onUpdate(){t(17,Lt),t(28,a)}},"step-1").to(te,{duration:.001,xVisible:!1,yVisible:!1,onUpdate(){t(9,te)}},"step-1"),un.timeline({scrollTrigger:{...Ie,trigger:"#section-2",start:"top center",onEnter:()=>{Zt($u,c=!1,c),C.reset(!0),Zt(Gu,A=void 0,A),Zt(Td,g=!0,g),Zt(Wu,d=!1,d),Zt(yd,y=!1,y),h.progress(1),un.to(u,{endArray:T4,onUpdate:()=>{pf.set(u)},duration:gr})},onLeaveBack:()=>{Zt($u,c=!0,c),t(17,Lt.vectorVisible=!0,Lt)}},timelinePropsAlt:Xe}).add("step-1").to(Ue,{duration:gr,fadeDistance:mt.fadeDistance,onUpdate:()=>{Ue=Ue}},"step-1").to("#canvas-wrapper",{pointerEvents:"none",duration:gr},"step-1").to("#inputs",{autoAlpha:0,x:-40,duration:gr},"step-1").to(he,{endArray:()=>[0,0,0,1,0,0],onUpdate:()=>{t(6,he)},duration:.001},"step-1").to(xe,{endArray:()=>[0,0,0,0,1,0],onUpdate:()=>{t(7,xe)},duration:.001},"step-1").add("step-2").to(Lt,{duration:.001,xVisible:!1,yVisible:!1,onUpdate(){t(17,Lt),t(28,a)}},"step-2").to(te,{duration:.001,xVisible:!0,yVisible:!0,onUpdate(){t(9,te)}},"step-2"),un.timeline({...de,scrollTrigger:{...we,trigger:"#st-9",end:`+=${Hu*3}`,onEnter:()=>{we.onEnter(),Zt(Md,f=!0,f),t(17,Lt.zVisible=!1,Lt),t(17,Lt.vectorVisible=!1,Lt)},onLeaveBack:()=>{we.onLeaveBack(),Zt(Md,f=!1,f),Zt(sg,v=!1,v),Zt(yd,y=!1,y),me(!1)},onLeave:()=>{we.onLeave(),Zt(ag,_=!0,_),Zt(sg,v=!0,v)},onEnterBack:()=>{we.onEnterBack(),Zt(ag,_=!1,_),un.to(C,{azimuthAngle:Math.PI*.3})}}}).add("step-0").to(C.mouseButtons,{right:hl.ACTION.ROTATE,duration:.001},"step-0").to({},{duration:nl},"step-0").add("step-1").to(C,{distance:15,polarAngle:Math.PI*.35,azimuthAngle:Math.PI*.3},"step-1").to(pt,{endArray:[0,0,0,0,0,1],onUpdate(){t(8,pt)}},"step-1").to(te,{xTexOpacity:1,yTexOpacity:1,xDim3:!0,yDim3:!0,zDim3:!0,vectorDim3:!0,onUpdate(){t(9,te)}},"step-1").to(le,{endArray:[0,0,0,...f0],onUpdate(){t(5,le)}},"step-1").add("step-2").to(h,{progress:0,duration:.001},"step-2").to(u,{endArray:pk,duration:.001,onUpdate(){pf.set(u)}},"step-2").to(te,{zTexOpacity:1,onUpdate(){t(9,te)}},"step-2").to(te,{vectorTexOpacity:1,onUpdate(){t(9,te)}},"step-2").to(mt,{cellThickness:$e.cellThickness,sectionThickness:$e.sectionThickness,onUpdate(){t(4,mt)}},"step-2").add("step-3").to(mt,{t:1,onUpdate(){t(4,mt)}},"step-3").to({},{duration:nl}),un.timeline({...de,scrollTrigger:{...we,trigger:"#st-10",end:`+=${Hu*1}`,onEnter:()=>{we.onEnter(),Zt(qu,x[0]=f0[0],x),Zt(qu,x[1]=f0[1],x),Zt(qu,x[2]=f0[2],x)},onLeaveBack:()=>{we.onLeaveBack(),Zt(qu,x[0]=Qr[0],x),Zt(qu,x[1]=Qr[1],x),Zt(qu,x[2]=0,x)}}}).add("step-1").to(h,{progress:1},"step-1").to(he,{endArray:[0,0,0,...a2],onUpdate(){t(6,he)}},"step-1").to(xe,{endArray:[0,0,0,...o2],onUpdate(){t(7,xe)}},"step-1").to(pt,{endArray:[0,0,0,...l2],onUpdate(){t(8,pt)}},"step-1").to(le,{endArray:[0,0,0,...c2],onUpdate(){t(5,le)}},"step-1").to({},{duration:nl}),un.timeline({...de,scrollTrigger:{...we,trigger:"#st-12",end:`+=${Hu*1}`,onLeave:()=>{we.onLeave(),Zt(Gu,A="model",A),Zt(yd,y=!0,y)},onLeaveBack:()=>{we.onLeaveBack(),Zt(Gu,A=void 0,A)}}}).to(ct,{scale:.25,onUpdate(){t(14,ct)}}).to({},{duration:nl}),un.timeline({scrollTrigger:{...Ie,trigger:"#st-13",start:"top center",onEnter:()=>{Zt(ag,_=!1,_),Zt($u,c=!0,c),t(17,Lt.vectorVisible=!0,Lt),t(9,te.vectorVisible=!0,te)},onLeaveBack:()=>{Zt(ag,_=!0,_),Zt($u,c=!1,c),Zt(Gu,A="model",A),Zt(sg,v=!0,v),Zt(Td,g=!0,g),Zt(Wu,d=!1,d),Zt(Md,f=!0,f),h.progress(1),un.to(u,{endArray:pk,onUpdate:()=>{pf.set(u)},duration:gr}),t(17,Lt.vectorVisible=!1,Lt),t(9,te.vectorVisible=!1,te)}},timelinePropsAlt:Xe}).add("step-1").to("#canvas-wrapper",{pointerEvents:"auto",duration:gr},"step-1").to("#inputs",{autoAlpha:1,x:0,duration:gr},"step-1").to(te,{duration:gr,xTexOpacity:0,yTexOpacity:0,zTexOpacity:0,vectorTexOpacity:0,xVisible:!1,yVisible:!1,zVisible:!1,onUpdate(){t(9,te)}},"step-1").to(Lt,{duration:gr,xVisible:!0,yVisible:!0,zVisible:!0,onUpdate(){t(17,Lt),t(28,a)}},"step-1");const St=un.timeline({scrollTrigger:{...Ie,trigger:"#article",start:"bottom bottom",onEnter:()=>{Zt($u,c=!1,c)},onLeaveBack:()=>{Zt($u,c=!0,c)}},timelinePropsAlt:Xe}).to("#inputs",{autoAlpha:0,x:-40,duration:gr},"step-1");Zt(G3,l=St.scrollTrigger,l),Zt($3,o=!0,o)}function Qt(St){un.set("#st-progress",{scaleY:St})}function Ft(){un.to("#st-progress",{opacity:1,duration:.5})}function jt(){un.to("#st-progress",{opacity:0,duration:.5})}return Au(()=>{t(25,O=!0)}),i.$$set=St=>{"mathbox"in St&&t(24,U=St.mathbox)},i.$$.update=()=>{i.$$.dirty[1]&128&&z&&Zt($,z.encoding=lh,z),i.$$.dirty[0]&536870912&&ve(),i.$$.dirty[0]&67108866|i.$$.dirty[1]&64&&(M?Zt(nt,P=B,P):Zt(nt,P=Ce,P)),i.$$.dirty[0]&1&&Me.set("matrix",P),i.$$.dirty[0]&1073741824&&(n=f?{fadeDistance:150,fadeStrength:4}:{fadeDistance:50,fadeStrength:5}),i.$$.dirty[0]&1073741824&&(r=f?{fadeDistance:150,fadeStrength:4}:{fadeDistance:100,fadeStrength:8}),i.$$.dirty[1]&2&&Tt(g),i.$$.dirty[1]&1&&yt(d),i.$$.dirty[1]&4&&Ye(v),i.$$.dirty[1]&8&&ue(A),i.$$.dirty[0]&1073741824&&dt(),i.$$.dirty[1]&32&&Zt(Ze,S=x,S),i.$$.dirty[1]&16&&me(y),i.$$.dirty[0]&268435456&&a&&(t(17,Lt.xVisible=!0,Lt),t(17,Lt.yVisible=!0,Lt),t(17,Lt.zVisible=!0,Lt)),i.$$.dirty[0]&436207616&&!a&&O&&s&&Nt()},[P,M,X,Be,mt,le,he,xe,pt,te,Se,j,q,Ve,ct,ne,Je,Lt,S,$,W,Me,nt,Ze,U,O,Ce,s,a,u,f,d,g,v,A,y,x,B,z]}class bpt extends ln{constructor(e){super(),cn(this,e,Apt,vpt,an,{mathbox:24},null,[-1,-1,-1])}}const N9={lg:"(min-width: 1024px)","20rem":"(min-width: 20rem)","30rem":"(min-width: 30rem)","40rem":"(min-width: 40rem)","50rem":"(min-width: 50rem)","60rem":"(min-width: 60rem)","70rem":"(min-width: 70rem)","80rem":"(min-width: 80rem)",reducedMotion:"(prefers-reduced-motion: reduce)",desktop:"(hover: hover) and (pointer: fine)"};function ypt(i){const e={classNames:""},t=[];for(let n in i)e[n]=i[n].matches,e[n]&&t.push(`mq-${n}`);return e.classNames=t.join(" "),e}const hG=s2({},i=>{const e={},t=()=>i(ypt(e));{for(let n in N9)e[n]=window.matchMedia(N9[n]),e[n].addListener(t);t()}return()=>{for(let n in e)e[n].removeListener(t)}}),wpt={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class Cb{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const xpt=new yh(-1,1,1,-1,0,1),KP=new ai;KP.setAttribute("position",new hn([-1,3,0,-1,-1,0,3,-1,0],3));KP.setAttribute("uv",new hn([0,2,0,0,2,0],2));class RT{constructor(e){this._mesh=new cr(KP,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,xpt)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class DT extends Cb{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof _l?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=x2.clone(e.uniforms),this.material=new _l({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new RT(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class F9 extends Cb{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let a,o;this.inverse?(a=0,o=1):(a=1,o=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,a,4294967295),s.buffers.stencil.setClear(o),s.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class Cpt extends Cb{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Ept{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const n=e.getSize(new Et);this._width=n.width,this._height=n.height,t=new po(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Kl}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new DT(wpt),this.copyPass.material.blending=oh,this.clock=new j2}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let r=0,s=this.passes.length;r<s;r++){const a=this.passes[r];if(a.enabled!==!1){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),a.needsSwap){if(n){const o=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}F9!==void 0&&(a instanceof F9?n=!0:a instanceof Cpt&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new Et);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Spt extends Cb{constructor(e,t,n,r,s){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=s!==void 0?s:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new qt}render(e,t,n){const r=e.autoClear;e.autoClear=!1;let s,a;this.overrideMaterial!==void 0&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=a),e.autoClear=r}}const Mpt={uniforms:{damp:{value:.96},tOld:{value:null},tNew:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float damp;

		uniform sampler2D tOld;
		uniform sampler2D tNew;

		varying vec2 vUv;

		vec4 when_gt( vec4 x, float y ) {

			return max( sign( x - y ), 0.0 );

		}

		void main() {

			vec4 texelOld = texture2D( tOld, vUv );
			vec4 texelNew = texture2D( tNew, vUv );

			texelOld *= damp * when_gt( texelOld, 0.1 );

			gl_FragColor = max(texelNew, texelOld);

		}`};class Tpt extends Cb{constructor(e=.96){super(),this.shader=Mpt,this.uniforms=x2.clone(this.shader.uniforms),this.uniforms.damp.value=e,this.textureComp=new po(window.innerWidth,window.innerHeight,{magFilter:ji,type:Kl}),this.textureOld=new po(window.innerWidth,window.innerHeight,{magFilter:ji,type:Kl}),this.compFsMaterial=new _l({uniforms:this.uniforms,vertexShader:this.shader.vertexShader,fragmentShader:this.shader.fragmentShader}),this.compFsQuad=new RT(this.compFsMaterial),this.copyFsMaterial=new Lo,this.copyFsQuad=new RT(this.copyFsMaterial)}render(e,t,n){this.uniforms.tOld.value=this.textureOld.texture,this.uniforms.tNew.value=n.texture,e.setRenderTarget(this.textureComp),this.compFsQuad.render(e),this.copyFsQuad.material.map=this.textureComp.texture,this.renderToScreen?(e.setRenderTarget(null),this.copyFsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.copyFsQuad.render(e));const r=this.textureOld;this.textureOld=this.textureComp,this.textureComp=r}setSize(e,t){this.textureComp.setSize(e,t),this.textureOld.setSize(e,t)}dispose(){this.textureComp.dispose(),this.textureOld.dispose(),this.compFsMaterial.dispose(),this.copyFsMaterial.dispose(),this.compFsQuad.dispose(),this.copyFsQuad.dispose()}}const Ipt={name:"GammaCorrectionShader",uniforms:{tDiffuse:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 tex = texture2D( tDiffuse, vUv );

			gl_FragColor = LinearTosRGB( tex );

		}`},Ppt={name:"RGBShiftShader",uniforms:{tDiffuse:{value:null},amount:{value:.005},angle:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float amount;
		uniform float angle;

		varying vec2 vUv;

		void main() {

			vec2 offset = amount * vec2( cos(angle), sin(angle));
			vec4 cr = texture2D(tDiffuse, vUv + offset);
			vec4 cga = texture2D(tDiffuse, vUv);
			vec4 cb = texture2D(tDiffuse, vUv - offset);
			gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);

		}`};function kpt(i){let e,t,n;function r(a){i[17](a)}let s={args:[i[35],i[7].domElement],minDistance:5,maxDistance:100,"mouseButtons.left":hl.ACTION.TRUCK,"mouseButtons.right":i[1]?hl.ACTION.ROTATE:hl.ACTION.NONE};return i[0]!==void 0&&(s.ref=i[0]),e=new Oo.CameraControls({props:s}),Wa.push(()=>eA(e,"ref",r)),e.$on("controlstart",i[18]),e.$on("controlend",i[19]),e.$on("update",i[20]),{c(){Oe(e.$$.fragment)},l(a){ze(e.$$.fragment,a)},m(a,o){Ne(e,a,o),n=!0},p(a,o){const l={};o[1]&16&&(l.args=[a[35],a[7].domElement]),o[0]&2&&(l["mouseButtons.right"]=a[1]?hl.ACTION.ROTATE:hl.ACTION.NONE),!t&&o[0]&1&&(t=!0,l.ref=a[0],Z1(()=>t=!1)),e.$set(l)},i(a){n||(oe(e.$$.fragment,a),n=!0)},o(a){pe(e.$$.fragment,a),n=!1},d(a){Fe(e,a)}}}function Bpt(i){let e,t,n,r,s,a;return e=new Oo.PerspectiveCamera({props:{makeDefault:!0,position:i[9],near:2,far:300,$$slots:{default:[kpt,({ref:o})=>({35:o}),({ref:o})=>[0,o?16:0]]},$$scope:{ctx:i}}}),n=new Oo.AmbientLight({props:{intensity:.8}}),s=new bpt({props:{mathbox:i[8]}}),{c(){Oe(e.$$.fragment),t=_t(),Oe(n.$$.fragment),r=_t(),Oe(s.$$.fragment)},l(o){ze(e.$$.fragment,o),t=At(o),ze(n.$$.fragment,o),r=At(o),ze(s.$$.fragment,o)},m(o,l){Ne(e,o,l),Pe(o,t,l),Ne(n,o,l),Pe(o,r,l),Ne(s,o,l),a=!0},p(o,l){const c={};l[0]&3|l[1]&48&&(c.$$scope={dirty:l,ctx:o}),e.$set(c)},i(o){a||(oe(e.$$.fragment,o),oe(n.$$.fragment,o),oe(s.$$.fragment,o),a=!0)},o(o){pe(e.$$.fragment,o),pe(n.$$.fragment,o),pe(s.$$.fragment,o),a=!1},d(o){o&&(Z(t),Z(r)),Fe(e,o),Fe(n,o),Fe(s,o)}}}const ng=10;function Rpt(i,e,t){let n,r,s,a,o,l,c,u,h,f,d,g,v,A;Xt(i,$_,ve=>t(0,n=ve)),Xt(i,Md,ve=>t(1,r=ve)),Xt(i,m1,ve=>t(11,s=ve)),Xt(i,$T,ve=>t(12,a=ve)),Xt(i,H3,ve=>t(25,o=ve)),Xt(i,I4,ve=>t(13,l=ve)),Xt(i,$w,ve=>t(26,c=ve)),Xt(i,Wu,ve=>t(27,u=ve)),Xt(i,Td,ve=>t(28,h=ve)),Xt(i,hG,ve=>t(14,d=ve)),Xt(i,ag,ve=>t(30,g=ve)),Xt(i,PY,ve=>t(16,A=ve));let _=!1;const y=new fe(-ng,-ng,-ng),x=new fe(ng,ng,ng),C=new fe;hl.install({THREE:iN}),pre({CameraControls:hl});const{size:S,scene:I,camera:P,renderer:B}=Df();Xt(i,S,ve=>t(29,f=ve)),Xt(i,P,ve=>t(15,v=ve)),I.background=new qt("hsl(231, 15%, 4%)");const M=new eV(B,I,v).init(),D=M.api,F=[0,0,30];let z;const U=new Tpt,$=new DT(Ppt);$.uniforms.amount.value=.0015;function O(ve){z=new Ept(B),z.addPass(new Spt(I,ve)),z.addPass(U);const nt=new DT(Ipt);z.addPass(nt)}vre((ve,nt)=>{z.render(nt)}),cN(({},ve)=>{g&&(Zt($_,n.azimuthAngle+=5*ve*v5.DEG2RAD,n),Zt($_,n.azimuthAngle=n.azimuthAngle%(2*Math.PI),n)),n.update(ve),M.frame()}),Au(()=>{M.resize({viewWidth:f.width,viewHeight:f.height}),t(10,_=!0)});function ie(){un.set("#title",{transformPerspective:400}),un.timeline({scrollTrigger:{trigger:"#title-spacer",start:"top top",end:"+=2000",scrub:1,onLeave:()=>{Zt(Td,h=!0,h),Zt(Wu,u=!1,u),Zt($w,c=!1,c)},onLeaveBack:()=>{Zt(Td,h=!1,h),Zt(Wu,u=!0,u),Zt($w,c=!0,c)}}}).add("step-1").fromTo(n,{distance:15,polarAngle:Math.PI*.35},{polarAngle:0,azimuthAngle:0},"step-1").to("#title",{rotationX:-70,transformOrigin:"50% 100%, 200",autoAlpha:0},"step-1"),un.timeline({scrollTrigger:{trigger:"#tex-1",start:"top 60%"}}).from("#tex-1 span",{opacity:0,stagger:{amount:.5}}),un.timeline({scrollTrigger:{trigger:"#tex-2",start:"top 60%"}}).from("#tex-2 span",{opacity:0,stagger:{amount:.5}}),un.timeline({scrollTrigger:{trigger:"#section-1",start:"top bottom",end:"+=500",scrub:1,onLeave:()=>Zt(I4,l=!1,l),onEnterBack:()=>Zt(I4,l=!0,l)}}).add("step-1").to(n,{distance:15,onComplete(){n.saveState()}},"step-1").to("#article",{translateX:"-65ch"},"step-1").to("#canvas-wrapper",{translateX:"-32.5ch"},"step-1"),Zt(H3,o=!0,o)}function W(ve){r?(n.rotateTo(Math.PI*.3,Math.PI*.35,!0),n.dollyTo(15,!0),n.moveTo(0,0,0,!0)):(n.rotateTo(0,0,!0),n.dollyTo(15,!0),n.moveTo(0,0,0,!0))}function J(ve){n=ve,$_.set(n)}const Ce=()=>{n.currentAction==hl.ACTION.ROTATE?B.domElement.classList.add("dragging"):n.currentAction==hl.ACTION.TRUCK?B.domElement.classList.add("moving"):n.currentAction==hl.ACTION.DOLLY&&B.domElement.classList.add("zoomIn")},Me=()=>{B.domElement.classList.remove("dragging","moving")},ge=()=>{C.copy(n._target),n._target.clamp(y,x),C.sub(n._target),n._camera.position.sub(C)};return i.$$.update=()=>{i.$$.dirty[0]&8192&&(U.enabled=l),i.$$.dirty[0]&65536&&($.enabled=A),i.$$.dirty[0]&32768&&O(v),i.$$.dirty[0]&17408&&_&&d.lg&&ie(),i.$$.dirty[0]&4096&&a&&(U.uniforms.damp=0),i.$$.dirty[0]&2049&&n&&W()},[n,r,y,x,C,S,P,B,D,F,_,s,a,l,d,v,A,J,Ce,Me,ge]}class Dpt extends ln{constructor(e){super(),cn(this,e,Rpt,Bpt,an,{},null,[-1,-1])}}function Lpt(i){let e,t;return e=new Dpt({}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function Opt(i){let e,t;return e=new dre({props:{colorManagementEnabled:!0,rendererParameters:{webgl1:!0,logarithmicDepthBuffer:!1},$$slots:{default:[Lpt]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},p(n,[r]){const s={};r&1&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function Npt(i){return Oi.DEFAULT_UP.set(0,0,1),[]}class Fpt extends ln{constructor(e){super(),cn(this,e,Npt,Opt,an,{})}}function zpt(i){let e,t,n,r,s,a,o,l;return{c(){e=ht("input"),n=_t(),r=ht("input"),this.h()},l(c){e=ft(c,"INPUT",{type:!0,style:!0,class:!0,contenteditable:!0,tabindex:!0}),n=At(c),r=ft(c,"INPUT",{style:!0,class:!0,type:!0,inputmode:!0}),this.h()},h(){it(e,"type","text"),it(e,"style",i[10]),it(e,"class",t=ay(i[24].class)+" svelte-6cnb9y"),e.readOnly=!0,it(e,"contenteditable",!1),it(e,"tabindex","0"),vn(e,"default",!i[24].class),vn(e,"drag",!0),vn(e,"dragging",i[6]),vn(e,"fast",i[7]>1?"fast":""),vn(e,"slow",i[7]<1?"slow":""),vn(e,"focus",i[4]),vn(e,"inactive",i[8]),it(r,"style",i[10]),it(r,"class",s=ay(i[24].class)+" svelte-6cnb9y"),it(r,"type","text"),it(r,"inputmode",a=Fw(i[1])&&Fw(i[0])&&i[0]>=0?"numeric":"text"),vn(r,"default",!i[24].class),vn(r,"edit",!0),vn(r,"editing",i[8]),vn(r,"focus",i[5]),vn(r,"inactive",!i[8])},m(c,u){Pe(c,e,u),i[57](e),cg(e,i[9]),Pe(c,n,u),Pe(c,r,u),i[59](r),cg(r,i[9]),o||(l=[Ki(window,"mousemove",function(){oy(i[6]?i[14]:"")&&(i[6]?i[14]:"").apply(this,arguments)}),Ki(window,"touchmove",function(){oy(i[6]?i[13]:"")&&(i[6]?i[13]:"").apply(this,arguments)}),Ki(window,"mouseup",Dp(function(){oy(i[6]?i[16]:i[20])&&(i[6]?i[16]:i[20]).apply(this,arguments)})),Ki(window,"touchend",Dp(function(){oy(i[6]?i[15]:i[20])&&(i[6]?i[15]:i[20]).apply(this,arguments)})),Ki(window,"keydown",i[21]),Ki(window,"keyup",i[22]),Ki(e,"mousedown",Dp(i[12])),Ki(e,"touchstart",Dp(CY(i[11]))),Ki(e,"dblclick",Dp(Upt)),Ki(e,"focus",i[17]),Ki(e,"blur",i[18]),Ki(e,"keydown",i[54]),Ki(e,"keypress",i[55]),Ki(e,"keyup",i[56]),Ki(e,"input",i[58]),Ki(r,"mouseup",Dp(Vpt)),Ki(r,"touchend",Dp(Hpt)),Ki(r,"focus",i[19]),Ki(r,"blur",i[20]),Ki(r,"input",i[23]),Ki(r,"keydown",i[51]),Ki(r,"keypress",i[52]),Ki(r,"keyup",i[53]),Ki(r,"input",i[60])],o=!0)},p(c,u){i=c,u[0]&1024&&it(e,"style",i[10]),u[0]&16777216&&t!==(t=ay(i[24].class)+" svelte-6cnb9y")&&it(e,"class",t),u[0]&512&&e.value!==i[9]&&cg(e,i[9]),u[0]&16777216&&vn(e,"default",!i[24].class),u[0]&16777216&&vn(e,"drag",!0),u[0]&16777280&&vn(e,"dragging",i[6]),u[0]&16777344&&vn(e,"fast",i[7]>1?"fast":""),u[0]&16777344&&vn(e,"slow",i[7]<1?"slow":""),u[0]&16777232&&vn(e,"focus",i[4]),u[0]&16777472&&vn(e,"inactive",i[8]),u[0]&1024&&it(r,"style",i[10]),u[0]&16777216&&s!==(s=ay(i[24].class)+" svelte-6cnb9y")&&it(r,"class",s),u[0]&3&&a!==(a=Fw(i[1])&&Fw(i[0])&&i[0]>=0?"numeric":"text")&&it(r,"inputmode",a),u[0]&512&&r.value!==i[9]&&cg(r,i[9]),u[0]&16777216&&vn(r,"default",!i[24].class),u[0]&16777216&&vn(r,"edit",!0),u[0]&16777472&&vn(r,"editing",i[8]),u[0]&16777248&&vn(r,"focus",i[5]),u[0]&16777472&&vn(r,"inactive",!i[8])},i:Sn,o:Sn,d(c){c&&(Z(e),Z(n),Z(r)),i[57](null),i[59](null),o=!1,iv(l)}}}function Upt(i){}function Fw(i){return i==Math.round(i)}const Vpt=i=>{},Hpt=i=>{};function $pt(i,e,t){const n=EY();let{options:r={}}=e,{value:s=r.value??0}=e;s=parseFloat(s);let{min:a=r.min??-1e12}=e;a=parseFloat(a);let{max:o=r.max??1e12}=e;o=parseFloat(o);let{step:l=r.step??1}=e;l=parseFloat(l);let{precision:c=r.precision??l}=e;c=parseFloat(c);let{speed:u=r.speed??1}=e;u=parseFloat(u);let{keyStep:h=r.keyStep??l*10}=e;h=parseFloat(h);let{keyStepSlow:f=r.keyStepSlow??l}=e;f=parseFloat(f);let{keyStepFast:d=r.keyStepFast??l*100}=e;d=parseFloat(d);let{decimals:g=r.decimals??0}=e;g=parseFloat(g);let{format:v=r.format??void 0}=e,{parse:A=r.parse??void 0}=e,{horizontal:_=r.horizontal??!0}=e,{vertical:y=r.vertical??!1}=e,{circular:x=r.circular??!1}=e,{mainStyle:C=r.mainStyle??void 0}=e,{fastStyle:S=r.fastStyle??void 0}=e,{slowStyle:I=r.slowStyle??void 0}=e,{focusStyle:P=r.focusStyle??void 0}=e,{draggingStyle:B=r.draggingStyle??void 0}=e,{editingStyle:M=r.editingStyle??void 0}=e,{cursor:D=r.cursor??void 0}=e,F,z,U,$=!1,O,ie,W=!1,J=!1,Ce=!1,Me=!1,ge,ve,nt,$e,X=1,Be=!1,mt=!1,Ue=!1,Tt,yt=null,Ye=null,lt;Au(()=>(t(48,yt=document.querySelector("html")),t(49,Ye=yt.style.cursor),()=>{t(48,yt.style.cursor=Ye,yt)})),Ie(s);function ue(Le){n("consoleLog",Le.type),$=!0,dt(Le)}function dt(Le){n("consoleLog",Le.type),ge=document.activeElement===O,t(6,Me=!0),O.focus(),ve=!1,nt=$?Le.touches[0].clientX:Le.clientX,$e=$?Le.touches[0].clientY:Le.clientY,t(6,Me=!0),Ie(s)}function le(Le){$=!0,he(Le)}function he(Le){let wn=$?Le.touches[0].clientX:Le.clientX,fi=$?Le.touches[0].clientY:Le.clientY,Vr=_?wn-nt:0,oi=y?-(fi-$e):0,As=Math.abs(Vr)>Math.abs(oi)?Vr:oi;As!=0&&!ve&&(ve=!0,n("dragstart")),Lt(As*X),nt=wn,$e=fi}function xe(Le){n("consoleLog",Le.type),pt(Le)}function pt(Le){n("consoleLog",Le.type),Me&&ve&&n("dragend"),t(6,Me=!1),ge&&!ve&&ne()}function Ze(Le){n("consoleLog",Le.type),t(4,W=!0),ct()}function me(Le){n("consoleLog",Le.type),t(4,W=!1),ct()}function te(Le){n("consoleLog",Le.type),t(5,J=!0),ct()}function Se(Le){n("consoleLog",Le.type),t(5,J=!1),ct(),Je()}function j(Le){Le.key=="Enter"&&(Le.target==O||Le.target==ie)&&Le.preventDefault(),(Le.target==O||Le.target==ie)&&(n("consoleLog",Le.type),Le.key.length==1&&(U=U?U+Le.key:Le.key)),Le.key=="Shift"&&t(47,mt=!0),Le.key=="Alt"&&t(46,Be=!0)}function q(Le){if((Le.target==O||Le.target==ie)&&n("consoleLog",Le.type),Le.key=="Shift"&&t(47,mt=!1),Le.key=="Alt"&&t(46,Be=!1),W&&!Ue){let wn=h;X<1&&(wn=f),X>1&&(wn=d),(Le.key=="ArrowUp"||Le.key=="ArrowRight")&&we(wn),(Le.key=="ArrowDown"||Le.key=="ArrowLeft")&&we(-wn),Le.key=="Enter"&&ne(),Le.key.length==1&&ne()}else J&&Ue&&(Le.key=="Enter"||Le.key=="Escape")&&Je()}function Ve(Le){let wn=parseFloat(ie.value);isNaN(wn)||(F=wn,F=de(F),n("input",parseFloat(Xe(F))))}async function ct(){await z3(),document.activeElement==O||document.activeElement==ie?Ce||(Ce=!0,n("focus")):Ce&&(Ce=!1,n("blur"))}async function ne(){t(8,Ue=!0),await z3(),ie.focus(),U?t(9,z=U):ie.select(),n("editstart")}function Je(){if(Ue){if(t(8,Ue=!1),U=void 0,A)F=A(z),Ie(F);else{let Le=parseFloat(ie.value);isNaN(Le)||(F=parseFloat(z),Ie(F))}document.activeElement===ie&&setTimeout(()=>{O.focus()},0),n("editend")}}function Lt(Le){F=F??parseFloat(z),F+=Le*l*u,Ie(F)}function we(Le){F=F??parseFloat(z),F+=Le,Ie(F)}function Ie(Le){F=parseFloat(Le),F=de(F),t(9,z=Math.round((F-a)/l)*l+a),v?t(9,z=v(z)):t(9,z=z.toFixed(g)),t(25,s=Xe(F)),n("input",parseFloat(s)),n("change",parseFloat(s))}function de(Le){if(t(0,a=parseFloat(a)),t(26,o=parseFloat(o)),x){let wn=o-a;if(wn===0)return a;let fi=Le<a?Math.ceil((a-Le)/wn):0;Le=(Le-a+wn*fi)%wn+a}else Le=Math.min(Math.max(Le,a),o);return Le}function Xe(Le){let wn;Le=Math.round((parseFloat(Le)-a)/c)*c+a;let fi=c<1?Math.ceil(-Math.log10(c)):0;return wn=l.toString().split(".")[1],wn&&(fi=Math.max(fi,wn.length)),wn=a.toString().split(".")[1],wn&&(fi=Math.max(fi,wn.length)),parseFloat(Le.toFixed(fi))}function Nt(Le){xm.call(this,i,Le)}function Qt(Le){xm.call(this,i,Le)}function Ft(Le){xm.call(this,i,Le)}function jt(Le){xm.call(this,i,Le)}function St(Le){xm.call(this,i,Le)}function Re(Le){xm.call(this,i,Le)}function Rt(Le){Wa[Le?"unshift":"push"](()=>{O=Le,t(2,O)})}function tt(){z=this.value,t(9,z)}function Ut(Le){Wa[Le?"unshift":"push"](()=>{ie=Le,t(3,ie)})}function $t(){z=this.value,t(9,z)}return i.$$set=Le=>{t(24,e=Bt(Bt({},e),Mn(Le))),"options"in Le&&t(33,r=Le.options),"value"in Le&&t(25,s=Le.value),"min"in Le&&t(0,a=Le.min),"max"in Le&&t(26,o=Le.max),"step"in Le&&t(1,l=Le.step),"precision"in Le&&t(27,c=Le.precision),"speed"in Le&&t(28,u=Le.speed),"keyStep"in Le&&t(29,h=Le.keyStep),"keyStepSlow"in Le&&t(30,f=Le.keyStepSlow),"keyStepFast"in Le&&t(31,d=Le.keyStepFast),"decimals"in Le&&t(32,g=Le.decimals),"format"in Le&&t(34,v=Le.format),"parse"in Le&&t(35,A=Le.parse),"horizontal"in Le&&t(36,_=Le.horizontal),"vertical"in Le&&t(37,y=Le.vertical),"circular"in Le&&t(38,x=Le.circular),"mainStyle"in Le&&t(39,C=Le.mainStyle),"fastStyle"in Le&&t(40,S=Le.fastStyle),"slowStyle"in Le&&t(41,I=Le.slowStyle),"focusStyle"in Le&&t(42,P=Le.focusStyle),"draggingStyle"in Le&&t(43,B=Le.draggingStyle),"editingStyle"in Le&&t(44,M=Le.editingStyle),"cursor"in Le&&t(45,D=Le.cursor)},i.$$.update=()=>{i.$$.dirty[0]&12&&O&&ie&&ct(),i.$$.dirty[0]&33554752&&!Ue&&!Me&&Ie(s),i.$$.dirty[0]&272|i.$$.dirty[1]&98304&&(t(7,X=1),W&&!Ue&&(Be&&mt?t(7,X=10):Be&&t(7,X=.1))),i.$$.dirty[0]&64|i.$$.dirty[1]&933984&&(t(50,lt=_?y?"move":"ew-resize":"ns-resize"),yt&&(Me?t(48,yt.style.cursor=D??lt,yt):t(48,yt.style.cursor=Ye,yt))),i.$$.dirty[0]&1520|i.$$.dirty[1]&556800&&(t(10,Tt=C??""),t(10,Tt+=(W||J)&&P?";"+P:""),t(10,Tt+=!Ue&&X>1&&S?";"+S:""),t(10,Tt+=!Ue&&X<1&&I?";"+I:""),t(10,Tt+=Me&&B?";"+B:""),t(10,Tt+=Ue&&M?";"+M:""),t(10,Tt+=Ue?"":";cursor:"+(D??lt)))},e=Mn(e),[a,l,O,ie,W,J,Me,X,Ue,z,Tt,ue,dt,le,he,xe,pt,Ze,me,te,Se,j,q,Ve,e,s,o,c,u,h,f,d,g,r,v,A,_,y,x,C,S,I,P,B,M,D,Be,mt,yt,Ye,lt,Nt,Qt,Ft,jt,St,Re,Rt,tt,Ut,$t]}class JP extends ln{constructor(e){super(),cn(this,e,$pt,zpt,an,{options:33,value:25,min:0,max:26,step:1,precision:27,speed:28,keyStep:29,keyStepSlow:30,keyStepFast:31,decimals:32,format:34,parse:35,horizontal:36,vertical:37,circular:38,mainStyle:39,fastStyle:40,slowStyle:41,focusStyle:42,draggingStyle:43,editingStyle:44,cursor:45},null,[-1,-1,-1])}}function Sc(i,{delay:e=0,duration:t=400,easing:n=DY,x:r=0,y:s=0,opacity:a=0}={}){const o=getComputedStyle(i),l=+o.opacity,c=o.transform==="none"?"":o.transform,u=l*(1-a),[h,f]=uk(r),[d,g]=uk(s);return{delay:e,duration:t,easing:n,css:(v,A)=>`
			transform: ${c} translate(${(1-v)*h}${f}, ${(1-v)*d}${g});
			opacity: ${l-u*A}`}}function z9(i,e,t){const n=i.slice();return n[14]=e[t],n[16]=t,n}function U9(i,e,t){const n=i.slice();n[17]=e[t],n[19]=e,n[16]=t;const r=n[8][n[16]%3];return n[18]=r,n}function V9(i,e,t){const n=i.slice();n[17]=e[t],n[21]=e,n[16]=t;const r=n[8][n[16]%2];return n[18]=r,n}function H9(i,e,t){const n=i.slice();n[17]=e[t],n[20]=e,n[16]=t;const r=n[8][n[16]%3];return n[18]=r,n}function Gpt(i){let e,t=[],n=new Map,r,s=Tc(i[7]);const a=o=>o[16];for(let o=0;o<s.length;o+=1){let l=V9(i,s,o),c=a(l);n.set(c,t[o]=$9(c,l))}return{c(){e=ht("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=ft(o,"DIV",{class:!0});var l=Pt(e);for(let c=0;c<t.length;c+=1)t[c].l(l);l.forEach(Z),this.h()},h(){it(e,"class","container font-serif grid grid-cols-2 grid-rows-2 px-3 bg-base-200 svelte-148wii3")},m(o,l){Pe(o,e,l);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,l){l&898&&(s=Tc(o[7]),Rs(),t=GT(t,l,a,1,o,s,n,e,bL,$9,null,V9),Ds())},i(o){if(!r){for(let l=0;l<s.length;l+=1)oe(t[l]);r=!0}},o(o){for(let l=0;l<t.length;l+=1)pe(t[l]);r=!1},d(o){o&&Z(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function Qpt(i){let e,t=[],n=new Map,r,s=Tc(i[6]);const a=o=>o[16];for(let o=0;o<s.length;o+=1){let l=H9(i,s,o),c=a(l);n.set(c,t[o]=G9(c,l))}return{c(){e=ht("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=ft(o,"DIV",{class:!0});var l=Pt(e);for(let c=0;c<t.length;c+=1)t[c].l(l);l.forEach(Z),this.h()},h(){it(e,"class","container font-serif grid grid-cols-3 grid-rows-3 px-3 bg-base-200 svelte-148wii3")},m(o,l){Pe(o,e,l);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,l){l&834&&(s=Tc(o[6]),Rs(),t=GT(t,l,a,1,o,s,n,e,bL,G9,null,H9),Ds())},i(o){if(!r){for(let l=0;l<s.length;l+=1)oe(t[l]);r=!0}},o(o){for(let l=0;l<t.length;l+=1)pe(t[l]);r=!1},d(o){o&&Z(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function $9(i,e){let t,n,r,s,a;function o(c){e[11](c,e[17])}let l={step:.1,decimals:1,speed:.1,class:e[9],mainStyle:`color: hsl(var(--${e[18]}));`};return e[1][e[17]]!==void 0&&(l.value=e[1][e[17]]),n=new JP({props:l}),Wa.push(()=>eA(n,"value",o)),{key:i,first:null,c(){t=ht("div"),Oe(n.$$.fragment),s=_t(),this.h()},l(c){t=ft(c,"DIV",{class:!0});var u=Pt(t);ze(n.$$.fragment,u),s=At(u),u.forEach(Z),this.h()},h(){it(t,"class","svelte-148wii3"),this.first=t},m(c,u){Pe(c,t,u),Ne(n,t,null),Ge(t,s),a=!0},p(c,u){e=c;const h={};!r&&u&130&&(r=!0,h.value=e[1][e[17]],Z1(()=>r=!1)),n.$set(h)},i(c){a||(oe(n.$$.fragment,c),a=!0)},o(c){pe(n.$$.fragment,c),a=!1},d(c){c&&Z(t),Fe(n)}}}function G9(i,e){let t,n,r,s,a;function o(c){e[10](c,e[17])}let l={step:.1,decimals:1,speed:.1,class:e[9],mainStyle:`color: hsl(var(--${e[18]}));`};return e[1][e[17]]!==void 0&&(l.value=e[1][e[17]]),n=new JP({props:l}),Wa.push(()=>eA(n,"value",o)),{key:i,first:null,c(){t=ht("div"),Oe(n.$$.fragment),s=_t(),this.h()},l(c){t=ft(c,"DIV",{class:!0});var u=Pt(t);ze(n.$$.fragment,u),s=At(u),u.forEach(Z),this.h()},h(){it(t,"class","svelte-148wii3"),this.first=t},m(c,u){Pe(c,t,u),Ne(n,t,null),Ge(t,s),a=!0},p(c,u){e=c;const h={};!r&&u&66&&(r=!0,h.value=e[1][e[17]],Z1(()=>r=!1)),n.$set(h)},i(c){a||(oe(n.$$.fragment,c),a=!0)},o(c){pe(n.$$.fragment,c),a=!1},d(c){c&&Z(t),Fe(n)}}}function Q9(i){let e,t,n=`inset 0px 0px 0px 3px ${vl}`,r,s,a,o="=",l,c,u,h,f=[],d=new Map,g,v,A=Tc(i[2]?[3,4,5]:[3,4]),_=[];for(let S=0;S<A.length;S+=1)_[S]=q9(U9(i,A,S));const y=S=>pe(_[S],1,1,()=>{_[S]=null});let x=Tc(i[3]);const C=S=>S[16];for(let S=0;S<x.length;S+=1){let I=z9(i,x,S),P=C(I);d.set(P,f[S]=j9(P,I))}return{c(){e=ht("div"),t=ht("div");for(let S=0;S<_.length;S+=1)_[S].c();s=_t(),a=ht("div"),a.textContent=o,c=_t(),u=ht("div"),h=ht("div");for(let S=0;S<f.length;S+=1)f[S].c();this.h()},l(S){e=ft(S,"DIV",{class:!0});var I=Pt(e);t=ft(I,"DIV",{class:!0});var P=Pt(t);for(let D=0;D<_.length;D+=1)_[D].l(P);P.forEach(Z),I.forEach(Z),s=At(S),a=ft(S,"DIV",{class:!0,"data-svelte-h":!0}),ya(a)!=="svelte-1q7svd3"&&(a.textContent=o),c=At(S),u=ft(S,"DIV",{class:!0});var B=Pt(u);h=ft(B,"DIV",{class:!0});var M=Pt(h);for(let D=0;D<f.length;D+=1)f[D].l(M);M.forEach(Z),B.forEach(Z),this.h()},h(){it(t,"class","font-serif grid grid-cols-1 grid-rows-2 px-3 bg-base-200 svelte-148wii3"),oa(t,"box-shadow",n),it(e,"class","shadow-lg shadow-neutral-content/20 svelte-148wii3"),it(a,"class","font-serif text-2xl font-black svelte-148wii3"),it(h,"class","container font-serif grid grid-cols-1 grid-rows-2 px-3 bg-base-200 svelte-148wii3"),it(u,"class","svelte-148wii3")},m(S,I){Pe(S,e,I),Ge(e,t);for(let P=0;P<_.length;P+=1)_[P]&&_[P].m(t,null);Pe(S,s,I),Pe(S,a,I),Pe(S,c,I),Pe(S,u,I),Ge(u,h);for(let P=0;P<f.length;P+=1)f[P]&&f[P].m(h,null);v=!0},p(S,I){if(i=S,I&773){A=Tc(i[2]?[3,4,5]:[3,4]);let P;for(P=0;P<A.length;P+=1){const B=U9(i,A,P);_[P]?(_[P].p(B,I),oe(_[P],1)):(_[P]=q9(B),_[P].c(),oe(_[P],1),_[P].m(t,null))}for(Rs(),P=A.length;P<_.length;P+=1)y(P);Ds()}I&8&&(x=Tc(i[3]),f=GT(f,I,C,1,i,x,d,h,RY,j9,null,z9))},i(S){if(!v){for(let I=0;I<A.length;I+=1)oe(_[I]);S&&Af(()=>{v&&(r||(r=bd(e,Sc,i[5],!0)),r.run(1))}),S&&Af(()=>{v&&(l||(l=bd(a,Sc,i[5],!0)),l.run(1))}),S&&Af(()=>{v&&(g||(g=bd(u,Sc,i[5],!0)),g.run(1))}),v=!0}},o(S){_=_.filter(Boolean);for(let I=0;I<_.length;I+=1)pe(_[I]);S&&(r||(r=bd(e,Sc,i[5],!1)),r.run(0)),S&&(l||(l=bd(a,Sc,i[5],!1)),l.run(0)),S&&(g||(g=bd(u,Sc,i[5],!1)),g.run(0)),v=!1},d(S){S&&(Z(e),Z(s),Z(a),Z(c),Z(u)),HT(_,S),S&&r&&r.end(),S&&l&&l.end();for(let I=0;I<f.length;I+=1)f[I].d();S&&g&&g.end()}}}function q9(i){let e,t,n,r,s;function a(l){i[12](l,i[16])}let o={step:.1,decimals:1,speed:.1,class:i[9],mainStyle:`color: hsl(var(--${i[18]}));`};return i[0][i[16]]!==void 0&&(o.value=i[0][i[16]]),t=new JP({props:o}),Wa.push(()=>eA(t,"value",a)),{c(){e=ht("div"),Oe(t.$$.fragment),r=_t(),this.h()},l(l){e=ft(l,"DIV",{class:!0});var c=Pt(e);ze(t.$$.fragment,c),r=At(c),c.forEach(Z),this.h()},h(){it(e,"class","svelte-148wii3")},m(l,c){Pe(l,e,c),Ne(t,e,null),Ge(e,r),s=!0},p(l,c){i=l;const u={};!n&&c&1&&(n=!0,u.value=i[0][i[16]],Z1(()=>n=!1)),t.$set(u)},i(l){s||(oe(t.$$.fragment,l),s=!0)},o(l){pe(t.$$.fragment,l),s=!1},d(l){l&&Z(e),Fe(t)}}}function j9(i,e){let t,n=e[14].toFixed(1)+"",r,s;return{key:i,first:null,c(){t=ht("div"),r=Vt(n),s=_t(),this.h()},l(a){t=ft(a,"DIV",{class:!0});var o=Pt(t);r=Ht(o,n),s=At(o),o.forEach(Z),this.h()},h(){it(t,"class","number svelte-148wii3"),oa(t,"color",vl),this.first=t},m(a,o){Pe(a,t,o),Ge(t,r),Ge(t,s)},p(a,o){e=a,o&8&&n!==(n=e[14].toFixed(1)+"")&&dL(r,n)},d(a){a&&Z(t)}}}function qpt(i){let e,t,n,r,s,a;const o=[Qpt,Gpt],l=[];function c(h,f){return h[2]?0:1}n=c(i),r=l[n]=o[n](i);let u=i[4]&&Q9(i);return{c(){e=ht("div"),t=ht("div"),r.c(),s=_t(),u&&u.c(),this.h()},l(h){e=ft(h,"DIV",{class:!0});var f=Pt(e);t=ft(f,"DIV",{class:!0});var d=Pt(t);r.l(d),d.forEach(Z),s=At(f),u&&u.l(f),f.forEach(Z),this.h()},h(){it(t,"class","shadow-lg shadow-neutral-content/20 svelte-148wii3"),it(e,"class","flex gap-5 items-center pointer-events-auto svelte-148wii3")},m(h,f){Pe(h,e,f),Ge(e,t),l[n].m(t,null),Ge(e,s),u&&u.m(e,null),a=!0},p(h,[f]){let d=n;n=c(h),n===d?l[n].p(h,f):(Rs(),pe(l[d],1,1,()=>{l[d]=null}),Ds(),r=l[n],r?r.p(h,f):(r=l[n]=o[n](h),r.c()),oe(r,1),r.m(t,null)),h[4]?u?(u.p(h,f),f&16&&oe(u,1)):(u=Q9(h),u.c(),oe(u,1),u.m(e,null)):u&&(Rs(),pe(u,1,1,()=>{u=null}),Ds())},i(h){a||(oe(r),oe(u),a=!0)},o(h){pe(r),pe(u),a=!1},d(h){h&&Z(e),l[n].d(),u&&u.d()}}}function jpt(i,e,t){let n,r,s,a;Xt(i,qu,A=>t(0,n=A)),Xt(i,pf,A=>t(1,r=A)),Xt(i,Md,A=>t(2,s=A)),Xt(i,yd,A=>t(4,a=A));const o={duration:200,x:-30},l=[0,1,2,4,5,6,8,9,10],c=[0,1,4,5],u=["p","s","a"],h="number-spinner";let f;function d(A,_){i.$$.not_equal(r[_],A)&&(r[_]=A,pf.set(r))}function g(A,_){i.$$.not_equal(r[_],A)&&(r[_]=A,pf.set(r))}function v(A,_){i.$$.not_equal(n[_],A)&&(n[_]=A,qu.set(n))}return i.$$.update=()=>{if(i.$$.dirty&4,i.$$.dirty&7)if(s){const A=new ly([[r[0],r[1],r[2]],[r[4],r[5],r[6]],[r[8],r[9],r[10]]]),_=new ly([n]).transpose(),y=A.mmul(_);t(3,f=[y.get(0,0),y.get(1,0),y.get(2,0)])}else{const A=new ly([[r[0],r[1]],[r[4],r[5]]]),_=new ly([[n[0],n[1]]]).transpose(),y=A.mmul(_);t(3,f=[y.get(0,0),y.get(1,0)])}},[n,r,s,f,a,o,l,c,u,h,d,g,v]}class Wpt extends ln{constructor(e){super(),cn(this,e,jpt,qpt,an,{})}}const W9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function Y9(i,e,t){const n=i.slice();return n[10]=e[t][0],n[11]=e[t][1],n}function F3(i){let e,t=[i[11]],n={};for(let r=0;r<t.length;r+=1)n=Bt(n,t[r]);return{c(){e=pL(i[10]),this.h()},l(r){e=mL(r,i[10],{}),Pt(e).forEach(Z),this.h()},h(){ux(e,n)},m(r,s){Pe(r,e,s)},p(r,s){ux(e,n=Fn(t,[s&32&&r[11]]))},d(r){r&&Z(e)}}}function X9(i){let e=i[10],t,n=i[10]&&F3(i);return{c(){n&&n.c(),t=ua()},l(r){n&&n.l(r),t=ua()},m(r,s){n&&n.m(r,s),Pe(r,t,s)},p(r,s){r[10]?e?an(e,r[10])?(n.d(1),n=F3(r),e=r[10],n.c(),n.m(t.parentNode,t)):n.p(r,s):(n=F3(r),e=r[10],n.c(),n.m(t.parentNode,t)):e&&(n.d(1),n=null,e=r[10])},d(r){r&&Z(t),n&&n.d(r)}}}function Ypt(i){let e,t,n,r,s,a=Tc(i[5]),o=[];for(let f=0;f<a.length;f+=1)o[f]=X9(Y9(i,a,f));const l=i[9].default,c=ni(l,i,i[8],null);let u=[W9,i[6],{width:i[2]},{height:i[2]},{stroke:i[1]},{"stroke-width":n=i[4]?Number(i[3])*24/Number(i[2]):i[3]},{class:r=`lucide-icon lucide lucide-${i[0]} ${i[7].class??""}`}],h={};for(let f=0;f<u.length;f+=1)h=Bt(h,u[f]);return{c(){e=pL("svg");for(let f=0;f<o.length;f+=1)o[f].c();t=ua(),c&&c.c(),this.h()},l(f){e=mL(f,"svg",{width:!0,height:!0,stroke:!0,"stroke-width":!0,class:!0});var d=Pt(e);for(let g=0;g<o.length;g+=1)o[g].l(d);t=ua(),c&&c.l(d),d.forEach(Z),this.h()},h(){ux(e,h)},m(f,d){Pe(f,e,d);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(e,null);Ge(e,t),c&&c.m(e,null),s=!0},p(f,[d]){if(d&32){a=Tc(f[5]);let g;for(g=0;g<a.length;g+=1){const v=Y9(f,a,g);o[g]?o[g].p(v,d):(o[g]=X9(v),o[g].c(),o[g].m(e,t))}for(;g<o.length;g+=1)o[g].d(1);o.length=a.length}c&&c.p&&(!s||d&256)&&ii(c,l,f,f[8],s?si(l,f[8],d,null):ri(f[8]),null),ux(e,h=Fn(u,[W9,d&64&&f[6],(!s||d&4)&&{width:f[2]},(!s||d&4)&&{height:f[2]},(!s||d&2)&&{stroke:f[1]},(!s||d&28&&n!==(n=f[4]?Number(f[3])*24/Number(f[2]):f[3]))&&{"stroke-width":n},(!s||d&129&&r!==(r=`lucide-icon lucide lucide-${f[0]} ${f[7].class??""}`))&&{class:r}]))},i(f){s||(oe(c,f),s=!0)},o(f){pe(c,f),s=!1},d(f){f&&Z(e),HT(o,f),c&&c.d(f)}}}function Xpt(i,e,t){const n=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"];let r=$d(e,n),{$$slots:s={},$$scope:a}=e,{name:o}=e,{color:l="currentColor"}=e,{size:c=24}=e,{strokeWidth:u=2}=e,{absoluteStrokeWidth:h=!1}=e,{iconNode:f}=e;return i.$$set=d=>{t(7,e=Bt(Bt({},e),Mn(d))),t(6,r=$d(e,n)),"name"in d&&t(0,o=d.name),"color"in d&&t(1,l=d.color),"size"in d&&t(2,c=d.size),"strokeWidth"in d&&t(3,u=d.strokeWidth),"absoluteStrokeWidth"in d&&t(4,h=d.absoluteStrokeWidth),"iconNode"in d&&t(5,f=d.iconNode),"$$scope"in d&&t(8,a=d.$$scope)},e=Mn(e),[o,l,c,u,h,f,r,e,a,s]}class Kpt extends ln{constructor(e){super(),cn(this,e,Xpt,Ypt,an,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5})}}const _s=Kpt;function Jpt(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function Zpt(i){let e,t;const n=[{name:"cat"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Jpt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function e0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z"}],["path",{d:"M8 14v.5"}],["path",{d:"M16 14v.5"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class t0t extends ln{constructor(e){super(),cn(this,e,e0t,Zpt,an,{})}}const n0t=t0t;function i0t(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function r0t(i){let e,t;const n=[{name:"chevron-right"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[i0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function s0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"m9 18 6-6-6-6"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class a0t extends ln{constructor(e){super(),cn(this,e,s0t,r0t,an,{})}}const o0t=a0t;function l0t(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function c0t(i){let e,t;const n=[{name:"codesandbox"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[l0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function u0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}],["polyline",{points:"7.5 4.21 12 6.81 16.5 4.21"}],["polyline",{points:"7.5 19.79 7.5 14.6 3 12"}],["polyline",{points:"21 12 16.5 14.6 16.5 19.79"}],["polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}],["line",{x1:"12",x2:"12",y1:"22.08",y2:"12"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class h0t extends ln{constructor(e){super(),cn(this,e,u0t,c0t,an,{})}}const f0t=h0t;function d0t(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function p0t(i){let e,t;const n=[{name:"eye"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[d0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function m0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}],["circle",{cx:"12",cy:"12",r:"3"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class g0t extends ln{constructor(e){super(),cn(this,e,m0t,p0t,an,{})}}const v0t=g0t;function _0t(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function A0t(i){let e,t;const n=[{name:"github"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[_0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function b0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}],["path",{d:"M9 18c-4.51 2-5-2-7-2"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class y0t extends ln{constructor(e){super(),cn(this,e,b0t,A0t,an,{})}}const w0t=y0t;function x0t(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function C0t(i){let e,t;const n=[{name:"grab"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[x0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function E0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M18 11.5V9a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v1.4"}],["path",{d:"M14 10V8a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2"}],["path",{d:"M10 9.9V9a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v5"}],["path",{d:"M6 14v0a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"}],["path",{d:"M18 11v0a2 2 0 1 1 4 0v3a8 8 0 0 1-8 8h-4a8 8 0 0 1-8-8 2 2 0 1 1 4 0"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class S0t extends ln{constructor(e){super(),cn(this,e,E0t,C0t,an,{})}}const M0t=S0t;function T0t(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function I0t(i){let e,t;const n=[{name:"grid-3x3"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[T0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function P0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M3 9h18"}],["path",{d:"M3 15h18"}],["path",{d:"M9 3v18"}],["path",{d:"M15 3v18"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class k0t extends ln{constructor(e){super(),cn(this,e,P0t,I0t,an,{})}}const K9=k0t;function B0t(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function R0t(i){let e,t;const n=[{name:"grip"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[B0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function D0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["circle",{cx:"12",cy:"5",r:"1"}],["circle",{cx:"19",cy:"5",r:"1"}],["circle",{cx:"5",cy:"5",r:"1"}],["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}],["circle",{cx:"12",cy:"19",r:"1"}],["circle",{cx:"19",cy:"19",r:"1"}],["circle",{cx:"5",cy:"19",r:"1"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class L0t extends ln{constructor(e){super(),cn(this,e,D0t,R0t,an,{})}}const O0t=L0t;function N0t(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function F0t(i){let e,t;const n=[{name:"image"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[N0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function z0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}let U0t=class extends ln{constructor(e){super(),cn(this,e,z0t,F0t,an,{})}};const V0t=U0t;function H0t(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function $0t(i){let e,t;const n=[{name:"layers"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[H0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function G0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["polygon",{points:"12 2 2 7 12 12 22 7 12 2"}],["polyline",{points:"2 17 12 22 22 17"}],["polyline",{points:"2 12 12 17 22 12"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class Q0t extends ln{constructor(e){super(),cn(this,e,G0t,$0t,an,{})}}const q0t=Q0t;function j0t(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function W0t(i){let e,t;const n=[{name:"linkedin"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[j0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function Y0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"}],["rect",{width:"4",height:"12",x:"2",y:"9"}],["circle",{cx:"4",cy:"4",r:"2"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class X0t extends ln{constructor(e){super(),cn(this,e,Y0t,W0t,an,{})}}const K0t=X0t;function J0t(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function Z0t(i){let e,t;const n=[{name:"mail"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[J0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function emt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class tmt extends ln{constructor(e){super(),cn(this,e,emt,Z0t,an,{})}}const nmt=tmt;function imt(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function rmt(i){let e,t;const n=[{name:"mouse-pointer-click"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[imt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function smt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"m9 9 5 12 1.774-5.226L21 14 9 9z"}],["path",{d:"m16.071 16.071 4.243 4.243"}],["path",{d:"m7.188 2.239.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656-2.12 2.122"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class amt extends ln{constructor(e){super(),cn(this,e,smt,rmt,an,{})}}const omt=amt;function lmt(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function cmt(i){let e,t;const n=[{name:"mouse"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[lmt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function umt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["rect",{x:"5",y:"2",width:"14",height:"20",rx:"7"}],["path",{d:"M12 6v4"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class hmt extends ln{constructor(e){super(),cn(this,e,umt,cmt,an,{})}}const fmt=hmt;function dmt(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function pmt(i){let e,t;const n=[{name:"move-3d"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[dmt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function mmt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M5 3v16h16"}],["path",{d:"m5 19 6-6"}],["path",{d:"m2 6 3-3 3 3"}],["path",{d:"m18 16 3 3-3 3"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class gmt extends ln{constructor(e){super(),cn(this,e,mmt,pmt,an,{})}}const vmt=gmt;function _mt(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function Amt(i){let e,t;const n=[{name:"move-horizontal"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[_mt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function bmt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["polyline",{points:"18 8 22 12 18 16"}],["polyline",{points:"6 8 2 12 6 16"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class ymt extends ln{constructor(e){super(),cn(this,e,bmt,Amt,an,{})}}const wmt=ymt;function xmt(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function Cmt(i){let e,t;const n=[{name:"move-up-right"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[xmt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function Emt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M13 5H19V11"}],["path",{d:"M19 5L5 19"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class Smt extends ln{constructor(e){super(),cn(this,e,Emt,Cmt,an,{})}}const Mmt=Smt;function Tmt(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function Imt(i){let e,t;const n=[{name:"move"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Tmt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function Pmt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["polyline",{points:"5 9 2 12 5 15"}],["polyline",{points:"9 5 12 2 15 5"}],["polyline",{points:"15 19 12 22 9 19"}],["polyline",{points:"19 9 22 12 19 15"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class kmt extends ln{constructor(e){super(),cn(this,e,Pmt,Imt,an,{})}}const Bmt=kmt;function Rmt(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function Dmt(i){let e,t;const n=[{name:"pause"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Rmt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function Lmt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["rect",{width:"4",height:"16",x:"6",y:"4"}],["rect",{width:"4",height:"16",x:"14",y:"4"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class Omt extends ln{constructor(e){super(),cn(this,e,Lmt,Dmt,an,{})}}const Nmt=Omt;function Fmt(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function zmt(i){let e,t;const n=[{name:"play"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Fmt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function Umt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["polygon",{points:"5 3 19 12 5 21 5 3"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class Vmt extends ln{constructor(e){super(),cn(this,e,Umt,zmt,an,{})}}const fG=Vmt;function Hmt(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function $mt(i){let e,t;const n=[{name:"scale-3d"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Hmt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function Gmt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["circle",{cx:"19",cy:"19",r:"2"}],["circle",{cx:"5",cy:"5",r:"2"}],["path",{d:"M5 7v12h12"}],["path",{d:"m5 19 6-6"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class Qmt extends ln{constructor(e){super(),cn(this,e,Gmt,$mt,an,{})}}const qmt=Qmt;function jmt(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function Wmt(i){let e,t;const n=[{name:"square"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[jmt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function Ymt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class Xmt extends ln{constructor(e){super(),cn(this,e,Ymt,Wmt,an,{})}}const Kmt=Xmt;function Jmt(i){let e;const t=i[2].default,n=ni(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ii(n,t,r,r[3],e?si(t,r[3],s,null):ri(r[3]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function Zmt(i){let e,t;const n=[{name:"twitter"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Jmt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Bt(r,n[s]);return e=new _s({props:r}),{c(){Oe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,a){Ne(e,s,a),t=!0},p(s,[a]){const o=a&3?Fn(n,[n[0],a&2&&ur(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(oe(e.$$.fragment,s),t=!0)},o(s){pe(e.$$.fragment,s),t=!1},d(s){Fe(e,s)}}}function egt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"}]];return i.$$set=a=>{t(1,e=Bt(Bt({},e),Mn(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Mn(e),[s,e,n,r]}class tgt extends ln{constructor(e){super(),cn(this,e,egt,Zmt,an,{})}}const ngt=tgt;function igt(i){let e,t,n,r,s,a,o,l,c,u,h,f;return r=new fG({props:{fill:"black"}}),o=new Nmt({props:{fill:"black"}}),{c(){e=ht("div"),t=ht("label"),n=ht("div"),Oe(r.$$.fragment),s=_t(),a=ht("div"),Oe(o.$$.fragment),l=_t(),c=ht("input"),this.h()},l(d){e=ft(d,"DIV",{class:!0});var g=Pt(e);t=ft(g,"LABEL",{class:!0});var v=Pt(t);n=ft(v,"DIV",{class:!0});var A=Pt(n);ze(r.$$.fragment,A),A.forEach(Z),s=At(v),a=ft(v,"DIV",{class:!0});var _=Pt(a);ze(o.$$.fragment,_),_.forEach(Z),v.forEach(Z),l=At(g),c=ft(g,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),g.forEach(Z),this.h()},h(){it(n,"class","swap-on"),it(a,"class","swap-off"),it(t,"class","swap swap-rotate drop-shadow-lg shadow-neutral-content/20"),vn(t,"swap-active",i[0]),it(c,"type","range"),it(c,"min",0),it(c,"max",1),it(c,"step",.001),it(c,"class","range range-sm"),it(e,"class","flex w-80 gap-3 pointer-events-auto")},m(d,g){Pe(d,e,g),Ge(e,t),Ge(t,n),Ne(r,n,null),Ge(t,s),Ge(t,a),Ne(o,a,null),Ge(e,l),Ge(e,c),cg(c,i[2]),u=!0,h||(f=[Ki(t,"click",i[4]),Ki(c,"change",i[5]),Ki(c,"input",i[5]),Ki(c,"input",i[6]),Ki(c,"change",i[7])],h=!0)},p(d,[g]){(!u||g&1)&&vn(t,"swap-active",d[0]),g&4&&cg(c,d[2])},i(d){u||(oe(r.$$.fragment,d),oe(o.$$.fragment,d),u=!0)},o(d){pe(r.$$.fragment,d),pe(o.$$.fragment,d),u=!1},d(d){d&&Z(e),Fe(r),Fe(o),h=!1,iv(f)}}}function rgt(i,e,t){let n,r,s;Xt(i,a0,h=>t(0,n=h)),Xt(i,Q3,h=>t(1,r=h)),Xt(i,hx,h=>t(2,s=h));function a(h){h.paused(!h.paused()),h.progress()==1?(Zt(a0,n=!1,n),h.progress(0),h.pause(),setTimeout(()=>h.play(),500)):h.paused()?Zt(a0,n=!0,n):Zt(a0,n=!1,n)}const o=()=>{a(r)};function l(){s=SY(this.value),hx.set(s)}return[n,r,s,a,o,l,()=>{r.progress(s),r.pause()},()=>{Zt(a0,n=!0,n)}]}class sgt extends ln{constructor(e){super(),cn(this,e,rgt,igt,an,{})}}const zw=i=>new Proxy(i,{get(e,t,n){return Reflect.get(e,t,n)},ownKeys(e){return Reflect.ownKeys(e).filter(t=>t!=="action")}});function J9(i){function e(t){return t(i),()=>{}}return{subscribe:e}}const Z9=i=>typeof i=="function";function r0(i,e){const{stores:t,action:n,returned:r}=e??{},s=(()=>{if(t&&r)return cu(t,o=>{const l=r(o);if(Z9(l)){const c=(...u)=>zw({...l(...u),[`data-melt-${i}`]:"",action:n??ig});return c.action=n??ig,c}return zw({...l,[`data-melt-${i}`]:"",action:n??ig})});{const o=r,l=o==null?void 0:o();if(Z9(l)){const c=(...u)=>zw({...l(...u),[`data-melt-${i}`]:"",action:n??ig});return c.action=n??ig,J9(c)}return J9(zw({...l,[`data-melt-${i}`]:"",action:n??ig}))}})(),a=n??(()=>{});return a.subscribe=s.subscribe,a}function dG(i){const e=s=>s?`${i}-${s}`:i,t=s=>`data-melt-${i}${s?`-${s}`:""}`,n=s=>`[data-melt-${i}${s?`-${s}`:""}]`;return{name:e,attribute:t,selector:n,getEl:s=>document.querySelector(n(s))}}const agt=typeof document<"u";function u0(i){return i instanceof HTMLElement}function pG(...i){return(...e)=>{for(const t of i)typeof t=="function"&&t(...e)}}function ig(){}function mG(i,e,t,n){const r=Array.isArray(e)?e:[e];return r.forEach(s=>i.addEventListener(s,t,n)),()=>{r.forEach(s=>i.removeEventListener(s,t,n))}}function wg(i,e,t,n){const r=Array.isArray(e)?e:[e];if(typeof t=="function"){const s=lgt(a=>t(a));return r.forEach(a=>i.addEventListener(a,s,n)),()=>{r.forEach(a=>i.removeEventListener(a,s,n))}}return()=>void 0}function ogt(i){const e=i.currentTarget;if(!u0(e))return;const t=new CustomEvent(`m-${i.type}`,{detail:{cancel:()=>{i.preventDefault()},originalEvent:i}});e.dispatchEvent(t)}function lgt(i){return e=>{if(ogt(e),!e.defaultPrevented)return i(e)}}function cgt(i,...e){const t={};for(const n of Object.keys(i))e.includes(n)||(t[n]=i[n]);return t}const gG=(i,e)=>{const t=(r,s)=>{i.update(a=>{const o=r(a);let l=o;return e&&(l=e({curr:a,next:o})),s==null||s(l),l})};return{...i,update:t,set:r=>{t(()=>r)}}};function ugt(i){return new Promise(e=>setTimeout(e,i))}const lu={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control"};function LT(i){const e={};return Object.keys(i).forEach(t=>{const n=t,r=i[n];e[n]=Is(r)}),e}function rg(i){if(!agt)return;const e=document.activeElement;u0(e)&&e!==i&&(e.tabIndex=-1,i.tabIndex=0,ugt(1).then(()=>i.focus()))}s2(void 0,i=>{function e(n){i(n),i(void 0)}return mG(document,"pointerdown",e,{passive:!1,capture:!0})});s2(void 0,i=>{function e(n){n&&n.key===lu.ESCAPE&&i(n),i(void 0)}return mG(document,"keydown",e,{passive:!1,capture:!0})});const hgt={defaultPressed:!1,disabled:!1};function h0(i){const e={...hgt,...i},t=LT(cgt(e,"pressed")),{disabled:n}=t,r=e.pressed??Is(e.defaultPressed),s=gG(r,e==null?void 0:e.onPressedChange);function a(){lx(n)||s.update(c=>!c)}return{elements:{root:r0("toggle",{stores:[s,n],returned:([l,c])=>({"data-disabled":c?!0:void 0,disabled:c,"data-state":l?"on":"off","aria-pressed":l,type:"button"}),action:l=>({destroy:pG(wg(l,"click",()=>{a()}),wg(l,"keydown",u=>{u.key!==lu.ENTER&&u.key!==lu.SPACE||(u.preventDefault(),a())}))})})},states:{pressed:s},options:t}}const fgt={loop:!0,orientation:"horizontal"},{name:Uw,selector:Vw}=dG("toolbar"),dgt=i=>{const e={...fgt,...i},t=LT(e),{loop:n,orientation:r}=t,s=r0(Uw(),{stores:r,returned:d=>({role:"toolbar","data-orientation":d})}),a=r0(Uw("button"),{returned:()=>({role:"button",type:"button",tabIndex:-1}),action:d=>({destroy:wg(d,"keydown",f)})}),o=r0(Uw("link"),{returned:()=>({role:"link","data-melt-toolbar-item":"",tabIndex:-1}),action:d=>({destroy:wg(d,"keydown",f)})}),l=r0(Uw("separator"),{stores:r,returned:d=>({role:"separator","data-orientation":d==="horizontal"?"vertical":"horizontal","aria-orientation":d==="horizontal"?"vertical":"horizontal"})}),c={type:"single",disabled:!1},u=d=>{const g={...c,...d},v=LT(g),{type:A,disabled:_}=v,y=g.defaultValue?g.defaultValue:g.type==="single"?void 0:[],x=g.value??Is(y),C=gG(x,g==null?void 0:g.onValueChange),{name:S}=dG("toolbar-group"),I=r0(S(),{stores:r,returned:M=>({role:"group","data-orientation":M})}),P=r0(S("item"),{stores:[_,A,C,r],returned:([M,D,F,z])=>U=>{const $=typeof U=="string"?U:U.value,O=typeof U=="string"?!1:!!U.disabled,ie=M||O,W=Array.isArray(F)?F.includes($):F===$;return{disabled:ie,pressed:W,"data-orientation":z,"data-disabled":ie?!0:void 0,"data-value":$,"data-state":W?"on":"off","aria-pressed":W,type:"button",role:D==="single"?"radio":void 0,"data-melt-toolbar-item":""}},action:M=>{function D(){const O=M.dataset.value,ie=M.dataset.disabled==="true";return{value:O,disabled:ie}}function F(){const{value:O,disabled:ie}=D();O===void 0||ie||C.update(W=>Array.isArray(W)?W.includes(O)?W.filter(J=>J!==O):(W.push(O),W):W===O?void 0:O)}const z=M.closest("[data-melt-toolbar]");return u0(z)?(h(z)[0]===M?M.tabIndex=0:M.tabIndex=-1,{destroy:pG(wg(M,"click",()=>{F()}),wg(M,"keydown",O=>{if(O.key===lu.ENTER||O.key===lu.SPACE){O.preventDefault(),F();return}f(O)}))}):{}}}),B=cu(C,M=>D=>Array.isArray(M)?M.includes(D):M===D);return{elements:{group:I,item:P},states:{value:C},helpers:{isPressed:B},options:v}};function h(d){return Array.from(d.querySelectorAll(`${Vw("item")}, ${Vw("button")}`)).filter(g=>u0(g))}function f(d){const g=lx(r),v=lx(n),A={horizontal:lu.ARROW_RIGHT,vertical:lu.ARROW_DOWN}[g??"horizontal"],_={horizontal:lu.ARROW_LEFT,vertical:lu.ARROW_UP}[g??"horizontal"],y=d.currentTarget;if(!u0(y))return;const x=y.closest("[data-melt-toolbar]");if(!u0(x))return;const C=Array.from(x.querySelectorAll(`${Vw("item")}, ${Vw("button")}`)).filter(I=>u0(I)),S=C.indexOf(y);if(d.key===A){d.preventDefault();const I=S+1;I>=C.length&&v?rg(C[0]):rg(C[I])}else if(d.key===_){d.preventDefault();const I=S-1;I<0&&v?rg(C[C.length-1]):rg(C[I])}else d.key===lu.HOME?(d.preventDefault(),rg(C[0])):d.key===lu.END&&(d.preventDefault(),rg(C[C.length-1]))}return{elements:{root:s,button:a,separator:l,link:o},builders:{createToolbarGroup:u},options:t}};function pgt(i){let e,t,n,r=G1.renderToString(i[0],{displayMode:i[1]})+"";return{c(){e=ht("span"),t=ht("span"),n=new UT(!1),this.h()},l(s){e=ft(s,"SPAN",{class:!0});var a=Pt(e);t=ft(a,"SPAN",{});var o=Pt(t);n=VT(o,!1),o.forEach(Z),a.forEach(Z),this.h()},h(){n.a=null,it(e,"class",i[3])},m(s,a){Pe(s,e,a),Ge(e,t),n.m(r,t),i[7](t)},p(s,[a]){a&3&&r!==(r=G1.renderToString(s[0],{displayMode:s[1]})+"")&&n.p(r),a&8&&it(e,"class",s[3])},i:Sn,o:Sn,d(s){s&&Z(e),i[7](null)}}}function mgt(i,e,t){let n,{expr:r}=e,{display:s=!1}=e,{color:a=!1}=e,o,l="group relative";l=s?`${l} py-1 block my-5`:l,Au(()=>{a&&un.utils.selector(o)});const{toggle:c,pressed:u}=h0({pressed:!0});Xt(i,u,f=>t(6,n=f));function h(f){Wa[f?"unshift":"push"](()=>{o=f,t(2,o)})}return i.$$set=f=>{"expr"in f&&t(0,r=f.expr),"display"in f&&t(1,s=f.display),"color"in f&&t(5,a=f.color)},i.$$.update=()=>{i.$$.dirty&96},[r,s,o,l,u,a,n,h]}class zo extends ln{constructor(e){super(),cn(this,e,mgt,pgt,an,{expr:0,display:1,color:5})}}nv.cyan[400];nv.green[400];nv.cyan[900];nv.green[900];function ti(i,e){return`\\textcolor{${e}}{${i}}`}const ggt=String.raw`
\begin{aligned}
{\left[\begin{array}{ll}
a & b \\
c & d
\end{array}\right]\left[\begin{array}{l}
x \\
y
\end{array}\right] } & =x\left[\begin{array}{l}
a \\
c
\end{array}\right]+y\left[\begin{array}{l}
b \\
d
\end{array}\right] \\
& =\left[\begin{array}{l}
a x+b y \\
c x+d y
\end{array}\right]
\end{aligned}
`,OT=ti("a",ec),NT=ti("c",ec),FT=ti("b",tc),zT=ti("d",tc),t2=ti("x",tA),n2=ti("y",nA),vgt=ti(String.raw`\left[\begin{array}{l}
  ${t2} \\
  ${n2}
  \end{array}\right]`,vl),_gt=ti(String.raw`\left[\begin{array}{l}
  ${OT} ${t2}+${FT} ${n2} \\
  ${NT} ${t2}+${zT} ${n2}
  \end{array}\right]`,vl),eL=String.raw`
\begin{aligned}
{\left[\begin{array}{ll}
${OT} & ${FT} \\
${NT} & ${zT}
\end{array}\right]${vgt} } & =${t2}\left[\begin{array}{l}
${OT} \\
${NT}
\end{array}\right]+${n2}\left[\begin{array}{l}
${FT} \\
${zT}
\end{array}\right] \\
& =${_gt}
\end{aligned}
`,Agt=String.raw`\left[\begin{array}{r}
  ${Hl[0]} & ${fu[0]} \\
  ${Hl[1]} & ${fu[1]}
  \end{array}\right]\left[\begin{array}{r}
  ${Qr[0]} \\
  ${Qr[1]}
  \end{array}\right]=\left[\begin{array}{l}
  ${Pg[0]} \\
  ${Pg[1]}
  \end{array}\right]`,bgt=ti(Qr[0],tA),ygt=ti(Qr[1],nA),vG=ti(String.raw`\left[\begin{array}{r}
  ${bgt} \\
  ${ygt}
  \end{array}\right]`,vl),wgt=String.raw`${vG}=${ti(Qr[0],tA)}\left[\begin{array}{l}
    ${ti(1,ec)} \\
    ${ti(0,ec)}
    \end{array}\right]
+${ti(Qr[1],nA)}\left[\begin{array}{l}
      ${ti(0,tc)} \\
      ${ti(1,tc)}
      \end{array}\right]
`,xgt=ti(Hl[0],ec),Cgt=ti(fu[0],tc),Egt=ti(Hl[1],ec),Sgt=ti(fu[1],tc),Mgt=String.raw`\left[\begin{array}{r}
${xgt} & ${Cgt} \\
${Egt} & ${Sgt}
\end{array}\right]`,Tgt=String.raw`\left[\begin{array}{r}
  ${ti(Hl[0],ec)} \\
  ${ti(Hl[1],ec)}
  \end{array}\right]`,Igt=String.raw`\left[\begin{array}{r}
  ${ti(fu[0],tc)} \\
  ${ti(fu[1],tc)}
  \end{array}\right]`,Pgt=String.raw`\left[\begin{array}{l}
  ${ti(Pg[0],vl)} \\
  ${ti(Pg[1],vl)}
  \end{array}\right]`,kgt=String.raw`\begin{aligned}
{${Mgt}
${vG} } & =${ti(Qr[0],tA)}${Tgt}+${ti(Qr[1],nA)} ${Igt} \\
& = ${Pgt}
\end{aligned}
`,_G=ti(a2[0],ec),AG=ti(a2[1],ec),bG=ti(a2[2],ec),yG=ti(o2[0],tc),wG=ti(o2[1],tc),xG=ti(o2[2],tc),CG=ti(l2[0],p1),EG=ti(l2[1],p1),SG=ti(l2[2],p1),Bgt=String.raw`\left[\begin{array}{rrr}
  ${_G} & ${yG} & ${CG} \\
  ${AG} & ${wG} & ${EG} \\
  ${bG} & ${xG} & ${SG}
  \end{array}\right]`,MG=ti(f0[0],tA),TG=ti(f0[1],nA),IG=ti(f0[2],kY),Rgt=ti(String.raw`\left[\begin{array}{r}
  ${MG} \\
  ${TG} \\
  ${IG}
  \end{array}\right]`,vl),Dgt=String.raw`\left[\begin{array}{r}
    ${_G} \\
    ${AG} \\
    ${bG}
    \end{array}\right]`,Lgt=ti(c2[0],vl),Ogt=ti(c2[1],vl),Ngt=ti(c2[2],vl),Fgt=String.raw`\begin{aligned}
& {${Bgt}${Rgt}} \\
& ${MG}${Dgt}+${TG}\left[\begin{array}{r}
${yG} \\
${wG} \\
${xG}
\end{array}\right]${IG}\left[\begin{array}{r}
${CG} \\
${EG} \\
${SG}
\end{array}\right] \\
& =\left[\begin{array}{r}
${Lgt} \\
${Ogt} \\
${Ngt}
\end{array}\right]
\end{aligned}`;function zgt(i){let e,t;const n=i[1].default,r=ni(n,i,i[0],null);return{c(){e=ht("b"),r&&r.c(),this.h()},l(s){e=ft(s,"B",{class:!0});var a=Pt(e);r&&r.l(a),a.forEach(Z),this.h()},h(){it(e,"class","text-base-content")},m(s,a){Pe(s,e,a),r&&r.m(e,null),t=!0},p(s,[a]){r&&r.p&&(!t||a&1)&&ii(r,n,s,s[0],t?si(n,s[0],a,null):ri(s[0]),null)},i(s){t||(oe(r,s),t=!0)},o(s){pe(r,s),t=!1},d(s){s&&Z(e),r&&r.d(s)}}}function Ugt(i,e,t){let{$$slots:n={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&t(0,r=s.$$scope)},[r,n]}class ZP extends ln{constructor(e){super(),cn(this,e,Ugt,zgt,an,{})}}function Vgt(i){let e,t,n=`hsl(var(--${i[0]}))`,r;const s=i[2].default,a=ni(s,i,i[1],null);return{c(){e=ht("span"),a&&a.c(),this.h()},l(o){e=ft(o,"SPAN",{class:!0});var l=Pt(e);a&&a.l(l),l.forEach(Z),this.h()},h(){it(e,"class",t=`underline font-bold decoration-wavy decoration-2 underline-offset-4 decoration-${i[0]} text-base-content`),oa(e,"text-decoration-color",n)},m(o,l){Pe(o,e,l),a&&a.m(e,null),r=!0},p(o,[l]){a&&a.p&&(!r||l&2)&&ii(a,s,o,o[1],r?si(s,o[1],l,null):ri(o[1]),null),(!r||l&1&&t!==(t=`underline font-bold decoration-wavy decoration-2 underline-offset-4 decoration-${o[0]} text-base-content`))&&it(e,"class",t),l&1&&n!==(n=`hsl(var(--${o[0]}))`)&&oa(e,"text-decoration-color",n)},i(o){r||(oe(a,o),r=!0)},o(o){pe(a,o),r=!1},d(o){o&&Z(e),a&&a.d(o)}}}function Hgt(i,e,t){let{$$slots:n={},$$scope:r}=e,{color:s}=e;return i.$$set=a=>{"color"in a&&t(0,s=a.color),"$$scope"in a&&t(1,r=a.$$scope)},[s,r,n]}class i2 extends ln{constructor(e){super(),cn(this,e,Hgt,Vgt,an,{color:0})}}function $gt(i){let e,t,n,r,s;const a=i[2].default,o=ni(a,i,i[1],null);return{c(){e=ht("h3"),t=Vt(i[0]),n=_t(),r=ht("div"),o&&o.c(),this.h()},l(l){e=ft(l,"H3",{class:!0});var c=Pt(e);t=Ht(c,i[0]),c.forEach(Z),n=At(l),r=ft(l,"DIV",{class:!0});var u=Pt(r);o&&o.l(u),u.forEach(Z),this.h()},h(){it(e,"class","-mb-10 mt-0 font-sansAlt text-8xl text-neutral"),it(r,"class","relative alert backdrop-blur-0 bg-transparent border-0 svelte-16x4qbx")},m(l,c){Pe(l,e,c),Ge(e,t),Pe(l,n,c),Pe(l,r,c),o&&o.m(r,null),s=!0},p(l,[c]){(!s||c&1)&&dL(t,l[0]),o&&o.p&&(!s||c&2)&&ii(o,a,l,l[1],s?si(a,l[1],c,null):ri(l[1]),null)},i(l){s||(oe(o,l),s=!0)},o(l){pe(o,l),s=!1},d(l){l&&(Z(e),Z(n),Z(r)),o&&o.d(l)}}}function Ggt(i,e,t){let{$$slots:n={},$$scope:r}=e,{title:s}=e;return i.$$set=a=>{"title"in a&&t(0,s=a.title),"$$scope"in a&&t(1,r=a.$$scope)},[s,r,n]}class PG extends ln{constructor(e){super(),cn(this,e,Ggt,$gt,an,{title:0})}}function Qgt(i){let e;const t=i[0].default,n=ni(t,i,i[1],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&2)&&ii(n,t,r,r[1],e?si(t,r[1],s,null):ri(r[1]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function qgt(i){let e,t,n;return e=new PG({props:{title:"Recap",$$slots:{default:[Qgt]},$$scope:{ctx:i}}}),{c(){t=ht("div"),Oe(e.$$.fragment),this.h()},l(r){t=ft(r,"DIV",{style:!0});var s=Pt(t);ze(e.$$.fragment,s),this.h()},h(){oa(t,"display","contents"),oa(t,"--start-color","#03e5b7"),oa(t,"--end-color","#037ade")},m(r,s){Pe(r,t,s),Ne(e,t,null),n=!0},p(r,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(oe(e.$$.fragment,r),n=!0)},o(r){pe(e.$$.fragment,r),n=!1},d(r){r&&e&&Z(t),Fe(e,r)}}}function jgt(i,e,t){let{$$slots:n={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&t(1,r=s.$$scope)},[n,r]}class Wgt extends ln{constructor(e){super(),cn(this,e,jgt,qgt,an,{})}}function Ygt(i){let e,t;const n=i[1].default,r=ni(n,i,i[0],null);return{c(){e=ht("b"),r&&r.c(),this.h()},l(s){e=ft(s,"B",{class:!0});var a=Pt(e);r&&r.l(a),a.forEach(Z),this.h()},h(){it(e,"class","font-bold text-base-content")},m(s,a){Pe(s,e,a),r&&r.m(e,null),t=!0},p(s,[a]){r&&r.p&&(!t||a&1)&&ii(r,n,s,s[0],t?si(n,s[0],a,null):ri(s[0]),null)},i(s){t||(oe(r,s),t=!0)},o(s){pe(r,s),t=!1},d(s){s&&Z(e),r&&r.d(s)}}}function Xgt(i,e,t){let{$$slots:n={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&t(0,r=s.$$scope)},[r,n]}class oo extends ln{constructor(e){super(),cn(this,e,Xgt,Ygt,an,{})}}function Kgt(i){let e;return{c(){e=ht("div"),this.h()},l(t){e=ft(t,"DIV",{class:!0}),Pt(e).forEach(Z),this.h()},h(){it(e,"class","h-16")},m(t,n){Pe(t,e,n)},p:Sn,i:Sn,o:Sn,d(t){t&&Z(e)}}}class Sd extends ln{constructor(e){super(),cn(this,e,null,Kgt,an,{})}}function Jgt(i){let e;return{c(){e=Vt("matrices")},l(t){e=Ht(t,"matrices")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function Zgt(i){let e;return{c(){e=Vt("visual")},l(t){e=Ht(t,"visual")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function evt(i){let e,t,n,r,s,a,o,l,c,u=`Why do we need a way to represent an array of rows and columns of numbers,
		and to execute computations and operations between them?`,h,f,d,g,v,A=`In school, you may recall reluctantly performing drill after drills of
		matrix-vector multiplications mechanically. You may even have been taught to
		memorize several inane formulas.`,_,y,x,C,S,I,P,B,M,D,F;return r=new oo({props:{$$slots:{default:[Jgt]},$$scope:{ctx:i}}}),o=new Sd({}),d=new zo({props:{expr:Agt,display:!0}}),x=new zo({props:{expr:ggt,display:!0}}),S=new Sd({}),M=new oo({props:{$$slots:{default:[Zgt]},$$scope:{ctx:i}}}),{c(){e=ht("section"),t=ht("p"),n=Vt("What do "),Oe(r.$$.fragment),s=Vt(" mean to you?"),a=_t(),Oe(o.$$.fragment),l=_t(),c=ht("p"),c.textContent=u,h=_t(),f=ht("div"),Oe(d.$$.fragment),g=_t(),v=ht("p"),v.textContent=A,_=_t(),y=ht("div"),Oe(x.$$.fragment),C=_t(),Oe(S.$$.fragment),I=_t(),P=ht("p"),B=Vt("Let's explore a deeper, and a more "),Oe(M.$$.fragment),D=Vt(` intuition behind what matrices
		represent.`),this.h()},l(z){e=ft(z,"SECTION",{class:!0});var U=Pt(e);t=ft(U,"P",{});var $=Pt(t);n=Ht($,"What do "),ze(r.$$.fragment,$),s=Ht($," mean to you?"),$.forEach(Z),a=At(U),ze(o.$$.fragment,U),l=At(U),c=ft(U,"P",{"data-svelte-h":!0}),ya(c)!=="svelte-1jmwjc1"&&(c.textContent=u),h=At(U),f=ft(U,"DIV",{id:!0});var O=Pt(f);ze(d.$$.fragment,O),O.forEach(Z),g=At(U),v=ft(U,"P",{"data-svelte-h":!0}),ya(v)!=="svelte-bf7lvd"&&(v.textContent=A),_=At(U),y=ft(U,"DIV",{id:!0});var ie=Pt(y);ze(x.$$.fragment,ie),ie.forEach(Z),C=At(U),ze(S.$$.fragment,U),I=At(U),P=ft(U,"P",{});var W=Pt(P);B=Ht(W,"Let's explore a deeper, and a more "),ze(M.$$.fragment,W),D=Ht(W,` intuition behind what matrices
		represent.`),W.forEach(Z),U.forEach(Z),this.h()},h(){it(f,"id","tex-1"),it(y,"id","tex-2"),it(e,"class","prose prose-xl translate-x-[calc(-50vw-50%)] mt-[100vh] max-w-prose")},m(z,U){Pe(z,e,U),Ge(e,t),Ge(t,n),Ne(r,t,null),Ge(t,s),Ge(e,a),Ne(o,e,null),Ge(e,l),Ge(e,c),Ge(e,h),Ge(e,f),Ne(d,f,null),Ge(e,g),Ge(e,v),Ge(e,_),Ge(e,y),Ne(x,y,null),Ge(e,C),Ne(S,e,null),Ge(e,I),Ge(e,P),Ge(P,B),Ne(M,P,null),Ge(P,D),F=!0},p(z,[U]){const $={};U&1&&($.$$scope={dirty:U,ctx:z}),r.$set($);const O={};U&1&&(O.$$scope={dirty:U,ctx:z}),M.$set(O)},i(z){F||(oe(r.$$.fragment,z),oe(o.$$.fragment,z),oe(d.$$.fragment,z),oe(x.$$.fragment,z),oe(S.$$.fragment,z),oe(M.$$.fragment,z),F=!0)},o(z){pe(r.$$.fragment,z),pe(o.$$.fragment,z),pe(d.$$.fragment,z),pe(x.$$.fragment,z),pe(S.$$.fragment,z),pe(M.$$.fragment,z),F=!1},d(z){z&&Z(e),Fe(r),Fe(o),Fe(d),Fe(x),Fe(S),Fe(M)}}}class tvt extends ln{constructor(e){super(),cn(this,e,null,evt,an,{})}}function nvt(i){let e,t;const n=i[2].default,r=ni(n,i,i[1],null);return{c(){e=ht("p"),r&&r.c(),this.h()},l(s){e=ft(s,"P",{id:!0,class:!0});var a=Pt(e);r&&r.l(a),a.forEach(Z),this.h()},h(){it(e,"id",i[0]),it(e,"class","transition-color duration-300")},m(s,a){Pe(s,e,a),r&&r.m(e,null),t=!0},p(s,[a]){r&&r.p&&(!t||a&2)&&ii(r,n,s,s[1],t?si(n,s[1],a,null):ri(s[1]),null),(!t||a&1)&&it(e,"id",s[0])},i(s){t||(oe(r,s),t=!0)},o(s){pe(r,s),t=!1},d(s){s&&Z(e),r&&r.d(s)}}}function ivt(i,e,t){let{$$slots:n={},$$scope:r}=e,{id:s}=e;return i.$$set=a=>{"id"in a&&t(0,s=a.id),"$$scope"in a&&t(1,r=a.$$scope)},[s,r,n]}class Vl extends ln{constructor(e){super(),cn(this,e,ivt,nvt,an,{id:0})}}function rvt(i){let e;const t=i[0].default,n=ni(t,i,i[1],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&2)&&ii(n,t,r,r[1],e?si(t,r[1],s,null):ri(r[1]),null)},i(r){e||(oe(n,r),e=!0)},o(r){pe(n,r),e=!1},d(r){n&&n.d(r)}}}function svt(i){let e,t,n;return e=new PG({props:{title:"Try it",$$slots:{default:[rvt]},$$scope:{ctx:i}}}),{c(){t=ht("div"),Oe(e.$$.fragment),this.h()},l(r){t=ft(r,"DIV",{style:!0});var s=Pt(t);ze(e.$$.fragment,s),this.h()},h(){oa(t,"display","contents"),oa(t,"--start-color","#fefedf"),oa(t,"--end-color","#c493ff")},m(r,s){Pe(r,t,s),Ne(e,t,null),n=!0},p(r,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(oe(e.$$.fragment,r),n=!0)},o(r){pe(e.$$.fragment,r),n=!1},d(r){r&&e&&Z(t),Fe(e,r)}}}function avt(i,e,t){let{$$slots:n={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&t(1,r=s.$$scope)},[n,r]}class kG extends ln{constructor(e){super(),cn(this,e,avt,svt,an,{})}}function ovt(i){let e,t,n;const r=i[3].default,s=ni(r,i,i[2],null);return{c(){e=ht("section"),s&&s.c(),this.h()},l(a){e=ft(a,"SECTION",{id:!0,class:!0});var o=Pt(e);s&&s.l(o),o.forEach(Z),this.h()},h(){it(e,"id",i[0]),it(e,"class",t="prose prose-xl [&>*]:px-10 mb-60 "+i[1]+" svelte-1b63hsf")},m(a,o){Pe(a,e,o),s&&s.m(e,null),n=!0},p(a,[o]){s&&s.p&&(!n||o&4)&&ii(s,r,a,a[2],n?si(r,a[2],o,null):ri(a[2]),null),(!n||o&1)&&it(e,"id",a[0]),(!n||o&2&&t!==(t="prose prose-xl [&>*]:px-10 mb-60 "+a[1]+" svelte-1b63hsf"))&&it(e,"class",t)},i(a){n||(oe(s,a),n=!0)},o(a){pe(s,a),n=!1},d(a){a&&Z(e),s&&s.d(a)}}}function lvt(i,e,t){let{$$slots:n={},$$scope:r}=e,{id:s=null}=e,{classNames:a=""}=e;return i.$$set=o=>{"id"in o&&t(0,s=o.id),"classNames"in o&&t(1,a=o.classNames),"$$scope"in o&&t(2,r=o.$$scope)},[s,a,r,n]}class tL extends ln{constructor(e){super(),cn(this,e,lvt,ovt,an,{id:0,classNames:1})}}function cvt(i){let e,t,n;var r=i[0];function s(a,o){return{props:{class:"inline-block absolute drop-shadow-2xl stroke-neutral-content translate-x-[calc(-130%)] translate-y-[calc(-10%)] opacity-50",size:40}}}return r&&(e=hk(r,s())),{c(){e&&Oe(e.$$.fragment),t=ua()},l(a){e&&ze(e.$$.fragment,a),t=ua()},m(a,o){e&&Ne(e,a,o),Pe(a,t,o),n=!0},p(a,[o]){if(o&1&&r!==(r=a[0])){if(e){Rs();const l=e;pe(l.$$.fragment,1,0,()=>{Fe(l,1)}),Ds()}r?(e=hk(r,s()),Oe(e.$$.fragment),oe(e.$$.fragment,1),Ne(e,t.parentNode,t)):e=null}},i(a){n||(e&&oe(e.$$.fragment,a),n=!0)},o(a){e&&pe(e.$$.fragment,a),n=!1},d(a){a&&Z(t),e&&Fe(e,a)}}}function uvt(i,e,t){let{icon:n}=e;return i.$$set=r=>{"icon"in r&&t(0,n=r.icon)},[n]}class lg extends ln{constructor(e){super(),cn(this,e,uvt,cvt,an,{icon:0})}}function hvt(i){let e;return{c(){e=Vt("Drag the numbers")},l(t){e=Ht(t,"Drag the numbers")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function fvt(i){let e;return{c(){e=Vt("Double click the numbers")},l(t){e=Ht(t,"Double click the numbers")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function dvt(i){let e;return{c(){e=Vt("Scrub through the animation")},l(t){e=Ht(t,"Scrub through the animation")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function pvt(i){let e;return{c(){e=Vt("Scroll")},l(t){e=Ht(t,"Scroll")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function mvt(i){let e;return{c(){e=Vt("Left click and drag")},l(t){e=Ht(t,"Left click and drag")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function gvt(i){let e,t,n,r,s,a,o,l,c,u,h,f,d,g,v,A,_,y,x,C,S,I,P,B,M,D,F;return t=new lg({props:{icon:wmt}}),n=new oo({props:{$$slots:{default:[hvt]},$$scope:{ctx:i}}}),o=new lg({props:{icon:omt}}),l=new oo({props:{$$slots:{default:[fvt]},$$scope:{ctx:i}}}),f=new lg({props:{icon:fG}}),d=new oo({props:{$$slots:{default:[dvt]},$$scope:{ctx:i}}}),_=new lg({props:{icon:fmt}}),x=new oo({props:{$$slots:{default:[pvt]},$$scope:{ctx:i}}}),P=new lg({props:{icon:Bmt}}),M=new oo({props:{$$slots:{default:[mvt]},$$scope:{ctx:i}}}),{c(){e=ht("li"),Oe(t.$$.fragment),Oe(n.$$.fragment),r=Vt(` to increase or decrease
	the values in the matrix and input vector`),s=_t(),a=ht("li"),Oe(o.$$.fragment),Oe(l.$$.fragment),c=Vt(` to input
	your own values in the matrix and input vector`),u=_t(),h=ht("li"),Oe(f.$$.fragment),Oe(d.$$.fragment),g=Vt(" of the matrix transformation"),v=_t(),A=ht("li"),Oe(_.$$.fragment),y=_t(),Oe(x.$$.fragment),C=Vt(" to zoom in or out"),S=_t(),I=ht("li"),Oe(P.$$.fragment),B=_t(),Oe(M.$$.fragment),D=Vt(" to pan around the space")},l(z){e=ft(z,"LI",{});var U=Pt(e);ze(t.$$.fragment,U),ze(n.$$.fragment,U),r=Ht(U,` to increase or decrease
	the values in the matrix and input vector`),U.forEach(Z),s=At(z),a=ft(z,"LI",{});var $=Pt(a);ze(o.$$.fragment,$),ze(l.$$.fragment,$),c=Ht($,` to input
	your own values in the matrix and input vector`),$.forEach(Z),u=At(z),h=ft(z,"LI",{});var O=Pt(h);ze(f.$$.fragment,O),ze(d.$$.fragment,O),g=Ht(O," of the matrix transformation"),O.forEach(Z),v=At(z),A=ft(z,"LI",{});var ie=Pt(A);ze(_.$$.fragment,ie),y=At(ie),ze(x.$$.fragment,ie),C=Ht(ie," to zoom in or out"),ie.forEach(Z),S=At(z),I=ft(z,"LI",{});var W=Pt(I);ze(P.$$.fragment,W),B=At(W),ze(M.$$.fragment,W),D=Ht(W," to pan around the space"),W.forEach(Z)},m(z,U){Pe(z,e,U),Ne(t,e,null),Ne(n,e,null),Ge(e,r),Pe(z,s,U),Pe(z,a,U),Ne(o,a,null),Ne(l,a,null),Ge(a,c),Pe(z,u,U),Pe(z,h,U),Ne(f,h,null),Ne(d,h,null),Ge(h,g),Pe(z,v,U),Pe(z,A,U),Ne(_,A,null),Ge(A,y),Ne(x,A,null),Ge(A,C),Pe(z,S,U),Pe(z,I,U),Ne(P,I,null),Ge(I,B),Ne(M,I,null),Ge(I,D),F=!0},p(z,[U]){const $={};U&1&&($.$$scope={dirty:U,ctx:z}),n.$set($);const O={};U&1&&(O.$$scope={dirty:U,ctx:z}),l.$set(O);const ie={};U&1&&(ie.$$scope={dirty:U,ctx:z}),d.$set(ie);const W={};U&1&&(W.$$scope={dirty:U,ctx:z}),x.$set(W);const J={};U&1&&(J.$$scope={dirty:U,ctx:z}),M.$set(J)},i(z){F||(oe(t.$$.fragment,z),oe(n.$$.fragment,z),oe(o.$$.fragment,z),oe(l.$$.fragment,z),oe(f.$$.fragment,z),oe(d.$$.fragment,z),oe(_.$$.fragment,z),oe(x.$$.fragment,z),oe(P.$$.fragment,z),oe(M.$$.fragment,z),F=!0)},o(z){pe(t.$$.fragment,z),pe(n.$$.fragment,z),pe(o.$$.fragment,z),pe(l.$$.fragment,z),pe(f.$$.fragment,z),pe(d.$$.fragment,z),pe(_.$$.fragment,z),pe(x.$$.fragment,z),pe(P.$$.fragment,z),pe(M.$$.fragment,z),F=!1},d(z){z&&(Z(e),Z(s),Z(a),Z(u),Z(h),Z(v),Z(A),Z(S),Z(I)),Fe(t),Fe(n),Fe(o),Fe(l),Fe(f),Fe(d),Fe(_),Fe(x),Fe(P),Fe(M)}}}class BG extends ln{constructor(e){super(),cn(this,e,null,gvt,an,{})}}function vvt(i){let e;return{c(){e=Vt("transforms")},l(t){e=Ht(t,"transforms")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function _vt(i){let e;return{c(){e=Vt("vector")},l(t){e=Ht(t,"vector")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function Avt(i){let e,t,n,r;return t=new i2({props:{color:"in",$$slots:{default:[_vt]},$$scope:{ctx:i}}}),{c(){e=Vt("Let's first think about what the coordinates of a "),Oe(t.$$.fragment),n=Vt(" represent.")},l(s){e=Ht(s,"Let's first think about what the coordinates of a "),ze(t.$$.fragment,s),n=Ht(s," represent.")},m(s,a){Pe(s,e,a),Ne(t,s,a),Pe(s,n,a),r=!0},p(s,a){const o={};a&8&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(oe(t.$$.fragment,s),r=!0)},o(s){pe(t.$$.fragment,s),r=!1},d(s){s&&(Z(e),Z(n)),Fe(t,s)}}}function bvt(i){let e,t,n;return e=new zo({props:{expr:"x"}}),{c(){Oe(e.$$.fragment),t=Vt("-direction")},l(r){ze(e.$$.fragment,r),t=Ht(r,"-direction")},m(r,s){Ne(e,r,s),Pe(r,t,s),n=!0},p:Sn,i(r){n||(oe(e.$$.fragment,r),n=!0)},o(r){pe(e.$$.fragment,r),n=!1},d(r){r&&Z(t),Fe(e,r)}}}function yvt(i){let e,t,n;return e=new zo({props:{expr:"y"}}),{c(){Oe(e.$$.fragment),t=Vt("-direction")},l(r){ze(e.$$.fragment,r),t=Ht(r,"-direction")},m(r,s){Ne(e,r,s),Pe(r,t,s),n=!0},p:Sn,i(r){n||(oe(e.$$.fragment,r),n=!0)},o(r){pe(e.$$.fragment,r),n=!1},d(r){r&&Z(t),Fe(e,r)}}}function wvt(i){let e,t,n,r,s,a,o,l,c;return t=new zo({props:{expr:"xy"}}),s=new i2({props:{color:"p",$$slots:{default:[bvt]},$$scope:{ctx:i}}}),o=new i2({props:{color:"s",$$slots:{default:[yvt]},$$scope:{ctx:i}}}),{c(){e=Vt("In the "),Oe(t.$$.fragment),n=Vt(`-coordinate plane, any vector can be thought of
			as the sum of two scaled vectors: the unit vector in the
			`),r=ht("nobr"),Oe(s.$$.fragment),a=Vt(`,
			and the unit vector in the `),Oe(o.$$.fragment),l=Vt(".")},l(u){e=Ht(u,"In the "),ze(t.$$.fragment,u),n=Ht(u,`-coordinate plane, any vector can be thought of
			as the sum of two scaled vectors: the unit vector in the
			`),r=ft(u,"NOBR",{});var h=Pt(r);ze(s.$$.fragment,h),h.forEach(Z),a=Ht(u,`,
			and the unit vector in the `),ze(o.$$.fragment,u),l=Ht(u,".")},m(u,h){Pe(u,e,h),Ne(t,u,h),Pe(u,n,h),Pe(u,r,h),Ne(s,r,null),Pe(u,a,h),Ne(o,u,h),Pe(u,l,h),c=!0},p(u,h){const f={};h&8&&(f.$$scope={dirty:h,ctx:u}),s.$set(f);const d={};h&8&&(d.$$scope={dirty:h,ctx:u}),o.$set(d)},i(u){c||(oe(t.$$.fragment,u),oe(s.$$.fragment,u),oe(o.$$.fragment,u),c=!0)},o(u){pe(t.$$.fragment,u),pe(s.$$.fragment,u),pe(o.$$.fragment,u),c=!1},d(u){u&&(Z(e),Z(n),Z(r),Z(a),Z(l)),Fe(t,u),Fe(s),Fe(o,u)}}}function xvt(i){let e;return{c(){e=Vt("standard basis vectors")},l(t){e=Ht(t,"standard basis vectors")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function Cvt(i){let e,t,n,r,s;return e=new zo({props:{expr:wgt,display:!0,color:!0}}),n=new ZP({props:{$$slots:{default:[xvt]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment),t=Vt(`
			These are also known as our `),Oe(n.$$.fragment),r=Vt(`. The
			vector's coordinates encode the amount to scale each individual basis
			vector, before adding them up.`)},l(a){ze(e.$$.fragment,a),t=Ht(a,`
			These are also known as our `),ze(n.$$.fragment,a),r=Ht(a,`. The
			vector's coordinates encode the amount to scale each individual basis
			vector, before adding them up.`)},m(a,o){Ne(e,a,o),Pe(a,t,o),Ne(n,a,o),Pe(a,r,o),s=!0},p(a,o){const l={};o&8&&(l.$$scope={dirty:o,ctx:a}),n.$set(l)},i(a){s||(oe(e.$$.fragment,a),oe(n.$$.fragment,a),s=!0)},o(a){pe(e.$$.fragment,a),pe(n.$$.fragment,a),s=!1},d(a){a&&(Z(t),Z(r)),Fe(e,a),Fe(n,a)}}}function Evt(i){let e;return{c(){e=Vt("linear combination")},l(t){e=Ht(t,"linear combination")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function Svt(i){let e;return{c(){e=Vt("transforming the original basis vectors")},l(t){e=Ht(t,"transforming the original basis vectors")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function Mvt(i){let e,t,n,r;return t=new oo({props:{$$slots:{default:[Svt]},$$scope:{ctx:i}}}),{c(){e=Vt(`In other words, a matrix can be viewed as a way of packaging information
			about our the new basis vectors that we want. This is the core insight: a
			matrix transforms a vector by `),Oe(t.$$.fragment),n=Vt("; creating an entirely new coordinate system.")},l(s){e=Ht(s,`In other words, a matrix can be viewed as a way of packaging information
			about our the new basis vectors that we want. This is the core insight: a
			matrix transforms a vector by `),ze(t.$$.fragment,s),n=Ht(s,"; creating an entirely new coordinate system.")},m(s,a){Pe(s,e,a),Ne(t,s,a),Pe(s,n,a),r=!0},p(s,a){const o={};a&8&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(oe(t.$$.fragment,s),r=!0)},o(s){pe(t.$$.fragment,s),r=!1},d(s){s&&(Z(e),Z(n)),Fe(t,s)}}}function Tvt(i){let e;return{c(){e=Vt(`Again, the transformed vector is a linear combination of the new basis
			vectors, which are scaled by the coordinates of the original vector.`)},l(t){e=Ht(t,`Again, the transformed vector is a linear combination of the new basis
			vectors, which are scaled by the coordinates of the original vector.`)},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function Ivt(i){let e;return{c(){e=Vt("a sample of vectors in space")},l(t){e=Ht(t,"a sample of vectors in space")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function Pvt(i){let e;return{c(){e=Vt(`In order to make the space less visually cluttered, we can represent each
			vector with just its tip as a point in space. We'll transform the grid
			lines along too, overlaying on top a copy of the original.`)},l(t){e=Ht(t,`In order to make the space less visually cluttered, we can represent each
			vector with just its tip as a point in space. We'll transform the grid
			lines along too, overlaying on top a copy of the original.`)},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function kvt(i){let e;return{c(){e=Vt(`The transformation appears to rotate and stretch the space, accordingly
			with where the new basis vectors land.`)},l(t){e=Ht(t,`The transformation appears to rotate and stretch the space, accordingly
			with where the new basis vectors land.`)},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function Bvt(i){let e;return{c(){e=Vt("linear transformation")},l(t){e=Ht(t,"linear transformation")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function Rvt(i){let e,t,n,r;return t=new ZP({props:{$$slots:{default:[Bvt]},$$scope:{ctx:i}}}),{c(){e=Vt(`As we'll see when you have a chance to tinker around with different basis
			vectors, a matrix performs a particular kind of transformation, called a `),Oe(t.$$.fragment),n=Vt(". Visually, you'll notice that:")},l(s){e=Ht(s,`As we'll see when you have a chance to tinker around with different basis
			vectors, a matrix performs a particular kind of transformation, called a `),ze(t.$$.fragment,s),n=Ht(s,". Visually, you'll notice that:")},m(s,a){Pe(s,e,a),Ne(t,s,a),Pe(s,n,a),r=!0},p(s,a){const o={};a&8&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(oe(t.$$.fragment,s),r=!0)},o(s){pe(t.$$.fragment,s),r=!1},d(s){s&&(Z(e),Z(n)),Fe(t,s)}}}function Dvt(i){let e;return{c(){e=Vt("a linear combination of basis vectors")},l(t){e=Ht(t,"a linear combination of basis vectors")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function Lvt(i){let e;return{c(){e=Vt("package information about a linear transformation")},l(t){e=Ht(t,"package information about a linear transformation")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function Ovt(i){let e,t,n,r,s,a,o,l,c,u,h,f,d=`Matrix-vector multiplication is a way to compute where a given
						vector lands after the transformation defined by a matrix.`,g;return r=new oo({props:{$$slots:{default:[Dvt]},$$scope:{ctx:i}}}),c=new oo({props:{$$slots:{default:[Lvt]},$$scope:{ctx:i}}}),{c(){e=ht("ul"),t=ht("li"),n=Vt(`Any vector can be expressed as the addition of scaled basis vectors,
						i.e.
						`),Oe(r.$$.fragment),s=Vt("."),a=_t(),o=ht("li"),l=Vt("A matrix can be viewed as a way to "),Oe(c.$$.fragment),u=Vt(`. The columns of a matrix represent where the new basis vectors
						land after the transformation.`),h=_t(),f=ht("li"),f.textContent=d},l(v){e=ft(v,"UL",{});var A=Pt(e);t=ft(A,"LI",{});var _=Pt(t);n=Ht(_,`Any vector can be expressed as the addition of scaled basis vectors,
						i.e.
						`),ze(r.$$.fragment,_),s=Ht(_,"."),_.forEach(Z),a=At(A),o=ft(A,"LI",{});var y=Pt(o);l=Ht(y,"A matrix can be viewed as a way to "),ze(c.$$.fragment,y),u=Ht(y,`. The columns of a matrix represent where the new basis vectors
						land after the transformation.`),y.forEach(Z),h=At(A),f=ft(A,"LI",{"data-svelte-h":!0}),ya(f)!=="svelte-1g19qj4"&&(f.textContent=d),A.forEach(Z)},m(v,A){Pe(v,e,A),Ge(e,t),Ge(t,n),Ne(r,t,null),Ge(t,s),Ge(e,a),Ge(e,o),Ge(o,l),Ne(c,o,null),Ge(o,u),Ge(e,h),Ge(e,f),g=!0},p(v,A){const _={};A&8&&(_.$$scope={dirty:A,ctx:v}),r.$set(_);const y={};A&8&&(y.$$scope={dirty:A,ctx:v}),c.$set(y)},i(v){g||(oe(r.$$.fragment,v),oe(c.$$.fragment,v),g=!0)},o(v){pe(r.$$.fragment,v),pe(c.$$.fragment,v),g=!1},d(v){v&&Z(e),Fe(r),Fe(c)}}}function Nvt(i){let e;return{c(){e=Vt(`With our understanding so far, try to tinker about and figure out what
				kinds of transformations are possible with matrices!`)},l(t){e=Ht(t,`With our understanding so far, try to tinker about and figure out what
				kinds of transformations are possible with matrices!`)},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function Fvt(i){let e,t,n;return t=new BG({}),{c(){e=ht("ul"),Oe(t.$$.fragment),this.h()},l(r){e=ft(r,"UL",{class:!0});var s=Pt(e);ze(t.$$.fragment,s),s.forEach(Z),this.h()},h(){it(e,"class","list-none")},m(r,s){Pe(r,e,s),Ne(t,e,null),n=!0},p:Sn,i(r){n||(oe(t.$$.fragment,r),n=!0)},o(r){pe(t.$$.fragment,r),n=!1},d(r){r&&Z(e),Fe(t)}}}function zvt(i){let e,t,n,r,s,a,o,l,c,u,h,f,d,g,v,A,_,y,x,C,S,I,P,B=`Did you notice anything similar with the expression for matrix-vector
			multiplication? A vector multiplied with a matrix can also be expressed as
			a linear combination; only this time the standard basis vectors are
			replaced by the columns of the matrix.`,M,D,F,z,U,$,O,ie,W,J,Ce,Me,ge,ve,nt,$e,X,Be,mt,Ue,Tt,yt=`<li>All lines in the original space remain as lines, without getting curved,
				and</li> <li>Origin remains fixed in place.</li>`,Ye,lt,ue=`As an example, all grid lines stay parallel and evenly spaced after the
			transformation.`,dt,le,he,xe,pt,Ze,me,te,Se,j,q,Ve,ct,ne,Je=`What basis vectors should you choose in order to scale space uniformly
				in all directions? How about a reflection, rotation or a shear?`,Lt,we,Ie;return n=new oo({props:{$$slots:{default:[vvt]},$$scope:{ctx:i}}}),a=new Sd({}),l=new Vl({props:{id:"st-1",$$slots:{default:[Avt]},$$scope:{ctx:i}}}),u=new Vl({props:{id:"st-2",$$slots:{default:[wvt]},$$scope:{ctx:i}}}),f=new Vl({props:{id:"st-3",$$slots:{default:[Cvt]},$$scope:{ctx:i}}}),A=new ZP({props:{$$slots:{default:[Evt]},$$scope:{ctx:i}}}),x=new Sd({}),S=new zo({props:{expr:eL,display:!0}}),D=new zo({props:{expr:kgt,display:!0,color:!0}}),z=new Vl({props:{id:"st-4",$$slots:{default:[Mvt]},$$scope:{ctx:i}}}),$=new Vl({props:{id:"st-5",$$slots:{default:[Tvt]},$$scope:{ctx:i}}}),ie=new Sd({}),Me=new oo({props:{$$slots:{default:[Ivt]},$$scope:{ctx:i}}}),nt=new Vl({props:{id:"st-6",$$slots:{default:[Pvt]},$$scope:{ctx:i}}}),X=new Vl({props:{id:"st-7",$$slots:{default:[kvt]},$$scope:{ctx:i}}}),mt=new Vl({props:{$$slots:{default:[Rvt]},$$scope:{ctx:i}}}),le=new Sd({}),pt=new zo({props:{expr:eL,display:!0}}),me=new Wgt({props:{$$slots:{default:[Ovt]},$$scope:{ctx:i}}}),Se=new Sd({}),Ve=new Vl({props:{id:"st-8",$$slots:{default:[Nvt]},$$scope:{ctx:i}}}),we=new kG({props:{$$slots:{default:[Fvt]},$$scope:{ctx:i}}}),{c(){e=ht("p"),t=Vt("A vector multiplied by a matrix returns yet another vector — it "),Oe(n.$$.fragment),r=Vt(" a vector into a new vector. Let's visualize this transformation with an example."),s=_t(),Oe(a.$$.fragment),o=_t(),Oe(l.$$.fragment),c=_t(),Oe(u.$$.fragment),h=_t(),Oe(f.$$.fragment),d=_t(),g=ht("p"),v=Vt("This scaling and addition of vectors is called a "),Oe(A.$$.fragment),_=Vt(`, and every vector can be expressed as a linear combination of basis
			vectors.`),y=_t(),Oe(x.$$.fragment),C=_t(),Oe(S.$$.fragment),I=_t(),P=ht("p"),P.textContent=B,M=_t(),Oe(D.$$.fragment),F=_t(),Oe(z.$$.fragment),U=_t(),Oe($.$$.fragment),O=_t(),Oe(ie.$$.fragment),W=_t(),J=ht("p"),Ce=Vt(`In that vein, a matrix transformation appears to warp and transform space.
			To get a visceral feel of this, let's visualize what happens to not just a
			single vector, but `),Oe(Me.$$.fragment),ge=Vt(`, each multiplied by
			the same matrix.`),ve=_t(),Oe(nt.$$.fragment),$e=_t(),Oe(X.$$.fragment),Be=_t(),Oe(mt.$$.fragment),Ue=_t(),Tt=ht("ul"),Tt.innerHTML=yt,Ye=_t(),lt=ht("p"),lt.textContent=ue,dt=_t(),Oe(le.$$.fragment),he=_t(),xe=ht("div"),Oe(pt.$$.fragment),Ze=_t(),Oe(me.$$.fragment),te=_t(),Oe(Se.$$.fragment),j=_t(),q=ht("div"),Oe(Ve.$$.fragment),ct=_t(),ne=ht("p"),ne.textContent=Je,Lt=_t(),Oe(we.$$.fragment),this.h()},l(de){e=ft(de,"P",{});var Xe=Pt(e);t=Ht(Xe,"A vector multiplied by a matrix returns yet another vector — it "),ze(n.$$.fragment,Xe),r=Ht(Xe," a vector into a new vector. Let's visualize this transformation with an example."),Xe.forEach(Z),s=At(de),ze(a.$$.fragment,de),o=At(de),ze(l.$$.fragment,de),c=At(de),ze(u.$$.fragment,de),h=At(de),ze(f.$$.fragment,de),d=At(de),g=ft(de,"P",{});var Nt=Pt(g);v=Ht(Nt,"This scaling and addition of vectors is called a "),ze(A.$$.fragment,Nt),_=Ht(Nt,`, and every vector can be expressed as a linear combination of basis
			vectors.`),Nt.forEach(Z),y=At(de),ze(x.$$.fragment,de),C=At(de),ze(S.$$.fragment,de),I=At(de),P=ft(de,"P",{"data-svelte-h":!0}),ya(P)!=="svelte-1p5khc"&&(P.textContent=B),M=At(de),ze(D.$$.fragment,de),F=At(de),ze(z.$$.fragment,de),U=At(de),ze($.$$.fragment,de),O=At(de),ze(ie.$$.fragment,de),W=At(de),J=ft(de,"P",{});var Qt=Pt(J);Ce=Ht(Qt,`In that vein, a matrix transformation appears to warp and transform space.
			To get a visceral feel of this, let's visualize what happens to not just a
			single vector, but `),ze(Me.$$.fragment,Qt),ge=Ht(Qt,`, each multiplied by
			the same matrix.`),Qt.forEach(Z),ve=At(de),ze(nt.$$.fragment,de),$e=At(de),ze(X.$$.fragment,de),Be=At(de),ze(mt.$$.fragment,de),Ue=At(de),Tt=ft(de,"UL",{class:!0,"data-svelte-h":!0}),ya(Tt)!=="svelte-aabgez"&&(Tt.innerHTML=yt),Ye=At(de),lt=ft(de,"P",{"data-svelte-h":!0}),ya(lt)!=="svelte-1pjfjep"&&(lt.textContent=ue),dt=At(de),ze(le.$$.fragment,de),he=At(de),xe=ft(de,"DIV",{class:!0});var Ft=Pt(xe);ze(pt.$$.fragment,Ft),Ze=At(Ft),ze(me.$$.fragment,Ft),Ft.forEach(Z),te=At(de),ze(Se.$$.fragment,de),j=At(de),q=ft(de,"DIV",{class:!0});var jt=Pt(q);ze(Ve.$$.fragment,jt),ct=At(jt),ne=ft(jt,"P",{"data-svelte-h":!0}),ya(ne)!=="svelte-1s2n3xz"&&(ne.textContent=Je),Lt=At(jt),ze(we.$$.fragment,jt),jt.forEach(Z),this.h()},h(){it(Tt,"class","ml-4 marker:text-info marker:text-2xl"),it(xe,"class","exclude"),it(q,"class","exclude")},m(de,Xe){Pe(de,e,Xe),Ge(e,t),Ne(n,e,null),Ge(e,r),Pe(de,s,Xe),Ne(a,de,Xe),Pe(de,o,Xe),Ne(l,de,Xe),Pe(de,c,Xe),Ne(u,de,Xe),Pe(de,h,Xe),Ne(f,de,Xe),Pe(de,d,Xe),Pe(de,g,Xe),Ge(g,v),Ne(A,g,null),Ge(g,_),Pe(de,y,Xe),Ne(x,de,Xe),Pe(de,C,Xe),Ne(S,de,Xe),Pe(de,I,Xe),Pe(de,P,Xe),Pe(de,M,Xe),Ne(D,de,Xe),Pe(de,F,Xe),Ne(z,de,Xe),Pe(de,U,Xe),Ne($,de,Xe),Pe(de,O,Xe),Ne(ie,de,Xe),Pe(de,W,Xe),Pe(de,J,Xe),Ge(J,Ce),Ne(Me,J,null),Ge(J,ge),Pe(de,ve,Xe),Ne(nt,de,Xe),Pe(de,$e,Xe),Ne(X,de,Xe),Pe(de,Be,Xe),Ne(mt,de,Xe),Pe(de,Ue,Xe),Pe(de,Tt,Xe),Pe(de,Ye,Xe),Pe(de,lt,Xe),Pe(de,dt,Xe),Ne(le,de,Xe),Pe(de,he,Xe),Pe(de,xe,Xe),Ne(pt,xe,null),Ge(xe,Ze),Ne(me,xe,null),Pe(de,te,Xe),Ne(Se,de,Xe),Pe(de,j,Xe),Pe(de,q,Xe),Ne(Ve,q,null),Ge(q,ct),Ge(q,ne),Ge(q,Lt),Ne(we,q,null),Ie=!0},p(de,Xe){const Nt={};Xe&8&&(Nt.$$scope={dirty:Xe,ctx:de}),n.$set(Nt);const Qt={};Xe&8&&(Qt.$$scope={dirty:Xe,ctx:de}),l.$set(Qt);const Ft={};Xe&8&&(Ft.$$scope={dirty:Xe,ctx:de}),u.$set(Ft);const jt={};Xe&8&&(jt.$$scope={dirty:Xe,ctx:de}),f.$set(jt);const St={};Xe&8&&(St.$$scope={dirty:Xe,ctx:de}),A.$set(St);const Re={};Xe&8&&(Re.$$scope={dirty:Xe,ctx:de}),z.$set(Re);const Rt={};Xe&8&&(Rt.$$scope={dirty:Xe,ctx:de}),$.$set(Rt);const tt={};Xe&8&&(tt.$$scope={dirty:Xe,ctx:de}),Me.$set(tt);const Ut={};Xe&8&&(Ut.$$scope={dirty:Xe,ctx:de}),nt.$set(Ut);const $t={};Xe&8&&($t.$$scope={dirty:Xe,ctx:de}),X.$set($t);const Le={};Xe&8&&(Le.$$scope={dirty:Xe,ctx:de}),mt.$set(Le);const wn={};Xe&8&&(wn.$$scope={dirty:Xe,ctx:de}),me.$set(wn);const fi={};Xe&8&&(fi.$$scope={dirty:Xe,ctx:de}),Ve.$set(fi);const Vr={};Xe&8&&(Vr.$$scope={dirty:Xe,ctx:de}),we.$set(Vr)},i(de){Ie||(oe(n.$$.fragment,de),oe(a.$$.fragment,de),oe(l.$$.fragment,de),oe(u.$$.fragment,de),oe(f.$$.fragment,de),oe(A.$$.fragment,de),oe(x.$$.fragment,de),oe(S.$$.fragment,de),oe(D.$$.fragment,de),oe(z.$$.fragment,de),oe($.$$.fragment,de),oe(ie.$$.fragment,de),oe(Me.$$.fragment,de),oe(nt.$$.fragment,de),oe(X.$$.fragment,de),oe(mt.$$.fragment,de),oe(le.$$.fragment,de),oe(pt.$$.fragment,de),oe(me.$$.fragment,de),oe(Se.$$.fragment,de),oe(Ve.$$.fragment,de),oe(we.$$.fragment,de),Ie=!0)},o(de){pe(n.$$.fragment,de),pe(a.$$.fragment,de),pe(l.$$.fragment,de),pe(u.$$.fragment,de),pe(f.$$.fragment,de),pe(A.$$.fragment,de),pe(x.$$.fragment,de),pe(S.$$.fragment,de),pe(D.$$.fragment,de),pe(z.$$.fragment,de),pe($.$$.fragment,de),pe(ie.$$.fragment,de),pe(Me.$$.fragment,de),pe(nt.$$.fragment,de),pe(X.$$.fragment,de),pe(mt.$$.fragment,de),pe(le.$$.fragment,de),pe(pt.$$.fragment,de),pe(me.$$.fragment,de),pe(Se.$$.fragment,de),pe(Ve.$$.fragment,de),pe(we.$$.fragment,de),Ie=!1},d(de){de&&(Z(e),Z(s),Z(o),Z(c),Z(h),Z(d),Z(g),Z(y),Z(C),Z(I),Z(P),Z(M),Z(F),Z(U),Z(O),Z(W),Z(J),Z(ve),Z($e),Z(Be),Z(Ue),Z(Tt),Z(Ye),Z(lt),Z(dt),Z(he),Z(xe),Z(te),Z(j),Z(q)),Fe(n),Fe(a,de),Fe(l,de),Fe(u,de),Fe(f,de),Fe(A),Fe(x,de),Fe(S,de),Fe(D,de),Fe(z,de),Fe($,de),Fe(ie,de),Fe(Me),Fe(nt,de),Fe(X,de),Fe(mt,de),Fe(le,de),Fe(pt),Fe(me),Fe(Se,de),Fe(Ve),Fe(we)}}}function Uvt(i){let e;return{c(){e=Vt("higher dimensions")},l(t){e=Ht(t,"higher dimensions")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function Vvt(i){let e,t,n;return e=new zo({props:{expr:"z"}}),{c(){Oe(e.$$.fragment),t=Vt("-direction")},l(r){ze(e.$$.fragment,r),t=Ht(r,"-direction")},m(r,s){Ne(e,r,s),Pe(r,t,s),n=!0},p:Sn,i(r){n||(oe(e.$$.fragment,r),n=!0)},o(r){pe(e.$$.fragment,r),n=!1},d(r){r&&Z(t),Fe(e,r)}}}function Hvt(i){let e,t,n,r,s,a,o,l,c,u,h;return t=new i2({props:{color:"a",$$slots:{default:[Vvt]},$$scope:{ctx:i}}}),r=new zo({props:{expr:"3"}}),a=new zo({props:{expr:"xyz"}}),c=new zo({props:{expr:"3\\times3"}}),{c(){e=Vt(`To make up three dimensions, we have yet another standard basis vector —
			the unit vector in the `),Oe(t.$$.fragment),n=Vt(". This also means we're now fiddling around with vectors of length "),Oe(r.$$.fragment),s=Vt(" — representing the "),Oe(a.$$.fragment),o=Vt(` coordinates — and matrices of size
			`),l=ht("nobr"),Oe(c.$$.fragment),u=Vt(".")},l(f){e=Ht(f,`To make up three dimensions, we have yet another standard basis vector —
			the unit vector in the `),ze(t.$$.fragment,f),n=Ht(f,". This also means we're now fiddling around with vectors of length "),ze(r.$$.fragment,f),s=Ht(f," — representing the "),ze(a.$$.fragment,f),o=Ht(f,` coordinates — and matrices of size
			`),l=ft(f,"NOBR",{});var d=Pt(l);ze(c.$$.fragment,d),d.forEach(Z),u=Ht(f,".")},m(f,d){Pe(f,e,d),Ne(t,f,d),Pe(f,n,d),Ne(r,f,d),Pe(f,s,d),Ne(a,f,d),Pe(f,o,d),Pe(f,l,d),Ne(c,l,null),Pe(f,u,d),h=!0},p(f,d){const g={};d&8&&(g.$$scope={dirty:d,ctx:f}),t.$set(g)},i(f){h||(oe(t.$$.fragment,f),oe(r.$$.fragment,f),oe(a.$$.fragment,f),oe(c.$$.fragment,f),h=!0)},o(f){pe(t.$$.fragment,f),pe(r.$$.fragment,f),pe(a.$$.fragment,f),pe(c.$$.fragment,f),h=!1},d(f){f&&(Z(e),Z(n),Z(s),Z(o),Z(l),Z(u)),Fe(t,f),Fe(r,f),Fe(a,f),Fe(c)}}}function $vt(i){let e;return{c(){e=Vt(`The concept of matrix transformations in 3D is exactly the same. The three
			basis vectors are transformed to their new locations, warping space along
			with them. These locations are completely determined by the columns of the
			matrix.`)},l(t){e=Ht(t,`The concept of matrix transformations in 3D is exactly the same. The three
			basis vectors are transformed to their new locations, warping space along
			with them. These locations are completely determined by the columns of the
			matrix.`)},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function Gvt(i){let e;return{c(){e=Vt(`Originally, any vector is composed of a linear combination of these three
			standard basis vectors. To figure out the where the vector lands after the
			transformation, it is a linear combination of the transformed basis
			vectors, each scaled by the respective coordinates in the starting vector.`)},l(t){e=Ht(t,`Originally, any vector is composed of a linear combination of these three
			standard basis vectors. To figure out the where the vector lands after the
			transformation, it is a linear combination of the transformed basis
			vectors, each scaled by the respective coordinates in the starting vector.`)},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function Qvt(i){let e;return{c(){e=Vt(`From the visual examples we've seen thus far, the most obvious application
			of matrix transformations would be that of computer graphics. In fact,
			this is precisely how this article was built! Matrices provide a language
			to rotate, scale and translate vectors and points and consequently entire
			objects in 2D or 3D space.`)},l(t){e=Ht(t,`From the visual examples we've seen thus far, the most obvious application
			of matrix transformations would be that of computer graphics. In fact,
			this is precisely how this article was built! Matrices provide a language
			to rotate, scale and translate vectors and points and consequently entire
			objects in 2D or 3D space.`)},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function qvt(i){let e;return{c(){e=Vt("Right click and drag")},l(t){e=Ht(t,"Right click and drag")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function jvt(i){let e,t,n,r,s,a,o,l,c;return t=new BG({}),s=new lg({props:{icon:M0t}}),o=new oo({props:{$$slots:{default:[qvt]},$$scope:{ctx:i}}}),{c(){e=ht("ul"),Oe(t.$$.fragment),n=_t(),r=ht("li"),Oe(s.$$.fragment),a=_t(),Oe(o.$$.fragment),l=Vt(" to rotate around the space"),this.h()},l(u){e=ft(u,"UL",{class:!0});var h=Pt(e);ze(t.$$.fragment,h),n=At(h),r=ft(h,"LI",{});var f=Pt(r);ze(s.$$.fragment,f),a=At(f),ze(o.$$.fragment,f),l=Ht(f," to rotate around the space"),f.forEach(Z),h.forEach(Z),this.h()},h(){it(e,"class","list-none")},m(u,h){Pe(u,e,h),Ne(t,e,null),Ge(e,n),Ge(e,r),Ne(s,r,null),Ge(r,a),Ne(o,r,null),Ge(r,l),c=!0},p(u,h){const f={};h&8&&(f.$$scope={dirty:h,ctx:u}),o.$set(f)},i(u){c||(oe(t.$$.fragment,u),oe(s.$$.fragment,u),oe(o.$$.fragment,u),c=!0)},o(u){pe(t.$$.fragment,u),pe(s.$$.fragment,u),pe(o.$$.fragment,u),c=!1},d(u){u&&Z(e),Fe(t),Fe(s),Fe(o)}}}function Wvt(i){let e,t="Beyond Two-Dimensions",n,r,s,a,o,l,c,u,h,f,d,g,v,A,_,y,x,C,S,I,P,B,M=`Go forth and wrap your head around matrix transformations in 3D! Now you
				have a whole additional dimension to fidget around with.`,D,F,z;return a=new zo({props:{expr:"xy"}}),l=new oo({props:{$$slots:{default:[Uvt]},$$scope:{ctx:i}}}),h=new Vl({props:{id:"st-9",$$slots:{default:[Hvt]},$$scope:{ctx:i}}}),d=new Vl({props:{id:"st-10",$$slots:{default:[$vt]},$$scope:{ctx:i}}}),v=new zo({props:{expr:Fgt,display:!0,color:!0}}),_=new Vl({props:{id:"st-11",$$slots:{default:[Gvt]},$$scope:{ctx:i}}}),x=new Vl({props:{id:"st-12",$$slots:{default:[Qvt]},$$scope:{ctx:i}}}),S=new Sd({}),F=new kG({props:{$$slots:{default:[jvt]},$$scope:{ctx:i}}}),{c(){e=ht("h2"),e.textContent=t,n=_t(),r=ht("p"),s=Vt(`So far we've only been talking about matrix transformations in
			two-dimensions on the `),Oe(a.$$.fragment),o=Vt(`-plane. Do the same intuitions
			carry over to `),Oe(l.$$.fragment),c=Vt("?"),u=_t(),Oe(h.$$.fragment),f=_t(),Oe(d.$$.fragment),g=_t(),Oe(v.$$.fragment),A=_t(),Oe(_.$$.fragment),y=_t(),Oe(x.$$.fragment),C=_t(),Oe(S.$$.fragment),I=_t(),P=ht("div"),B=ht("p"),B.textContent=M,D=_t(),Oe(F.$$.fragment),this.h()},l(U){e=ft(U,"H2",{class:!0,"data-svelte-h":!0}),ya(e)!=="svelte-1mnb323"&&(e.textContent=t),n=At(U),r=ft(U,"P",{});var $=Pt(r);s=Ht($,`So far we've only been talking about matrix transformations in
			two-dimensions on the `),ze(a.$$.fragment,$),o=Ht($,`-plane. Do the same intuitions
			carry over to `),ze(l.$$.fragment,$),c=Ht($,"?"),$.forEach(Z),u=At(U),ze(h.$$.fragment,U),f=At(U),ze(d.$$.fragment,U),g=At(U),ze(v.$$.fragment,U),A=At(U),ze(_.$$.fragment,U),y=At(U),ze(x.$$.fragment,U),C=At(U),ze(S.$$.fragment,U),I=At(U),P=ft(U,"DIV",{class:!0});var O=Pt(P);B=ft(O,"P",{id:!0,"data-svelte-h":!0}),ya(B)!=="svelte-icusyc"&&(B.textContent=M),D=At(O),ze(F.$$.fragment,O),O.forEach(Z),this.h()},h(){it(e,"class","text-neutral"),it(B,"id","st-13"),it(P,"class","exclude")},m(U,$){Pe(U,e,$),Pe(U,n,$),Pe(U,r,$),Ge(r,s),Ne(a,r,null),Ge(r,o),Ne(l,r,null),Ge(r,c),Pe(U,u,$),Ne(h,U,$),Pe(U,f,$),Ne(d,U,$),Pe(U,g,$),Ne(v,U,$),Pe(U,A,$),Ne(_,U,$),Pe(U,y,$),Ne(x,U,$),Pe(U,C,$),Ne(S,U,$),Pe(U,I,$),Pe(U,P,$),Ge(P,B),Ge(P,D),Ne(F,P,null),z=!0},p(U,$){const O={};$&8&&(O.$$scope={dirty:$,ctx:U}),l.$set(O);const ie={};$&8&&(ie.$$scope={dirty:$,ctx:U}),h.$set(ie);const W={};$&8&&(W.$$scope={dirty:$,ctx:U}),d.$set(W);const J={};$&8&&(J.$$scope={dirty:$,ctx:U}),_.$set(J);const Ce={};$&8&&(Ce.$$scope={dirty:$,ctx:U}),x.$set(Ce);const Me={};$&8&&(Me.$$scope={dirty:$,ctx:U}),F.$set(Me)},i(U){z||(oe(a.$$.fragment,U),oe(l.$$.fragment,U),oe(h.$$.fragment,U),oe(d.$$.fragment,U),oe(v.$$.fragment,U),oe(_.$$.fragment,U),oe(x.$$.fragment,U),oe(S.$$.fragment,U),oe(F.$$.fragment,U),z=!0)},o(U){pe(a.$$.fragment,U),pe(l.$$.fragment,U),pe(h.$$.fragment,U),pe(d.$$.fragment,U),pe(v.$$.fragment,U),pe(_.$$.fragment,U),pe(x.$$.fragment,U),pe(S.$$.fragment,U),pe(F.$$.fragment,U),z=!1},d(U){U&&(Z(e),Z(n),Z(r),Z(u),Z(f),Z(g),Z(A),Z(y),Z(C),Z(I),Z(P)),Fe(a),Fe(l),Fe(h,U),Fe(d,U),Fe(v,U),Fe(_,U),Fe(x,U),Fe(S,U),Fe(F)}}}function Yvt(i){let e,t,n,r,s,a,o,l,c,u,h;return r=new tvt({}),l=new tL({props:{id:"section-1",classNames:"animate",$$slots:{default:[zvt]},$$scope:{ctx:i}}}),u=new tL({props:{id:"section-2",classNames:"animate",$$slots:{default:[Wvt]},$$scope:{ctx:i}}}),{c(){e=ht("div"),t=ht("div"),n=_t(),Oe(r.$$.fragment),s=_t(),a=ht("div"),o=_t(),Oe(l.$$.fragment),c=_t(),Oe(u.$$.fragment),this.h()},l(f){e=ft(f,"DIV",{id:!0,class:!0});var d=Pt(e);t=ft(d,"DIV",{id:!0,class:!0}),Pt(t).forEach(Z),n=At(d),ze(r.$$.fragment,d),s=At(d),a=ft(d,"DIV",{class:!0}),Pt(a).forEach(Z),o=At(d),ze(l.$$.fragment,d),c=At(d),ze(u.$$.fragment,d),d.forEach(Z),this.h()},h(){it(t,"id","title-spacer"),it(t,"class","h-[2500px]"),it(a,"class","h-[500px]"),it(e,"id","article"),it(e,"class","relative max-w-prose bg-gradient-to-l from-base-100 via-base-300 via-90% py-12")},m(f,d){Pe(f,e,d),Ge(e,t),Ge(e,n),Ne(r,e,null),Ge(e,s),Ge(e,a),Ge(e,o),Ne(l,e,null),Ge(e,c),Ne(u,e,null),h=!0},p(f,[d]){const g={};d&8&&(g.$$scope={dirty:d,ctx:f}),l.$set(g);const v={};d&8&&(v.$$scope={dirty:d,ctx:f}),u.$set(v)},i(f){h||(oe(r.$$.fragment,f),oe(l.$$.fragment,f),oe(u.$$.fragment,f),h=!0)},o(f){pe(r.$$.fragment,f),pe(l.$$.fragment,f),pe(u.$$.fragment,f),h=!1},d(f){f&&Z(e),Fe(r),Fe(l),Fe(u)}}}function Xvt(i,e,t){let n;Xt(i,$3,a=>t(1,n=a));let r;Au(()=>{t(0,r=!0)});function s(){un.utils.toArray("#article section.animate > *").forEach(a=>{let o;a.className==="exclude"?o=un.timeline({paused:!0}).from(a,{opacity:0,y:100,duration:.5}).from(a.querySelectorAll("li"),{x:-40,opacity:0,stagger:{amount:.3}}):o=un.from(a,{opacity:0,y:20,paused:!0}),BP.ScrollTrigger.create({trigger:a,start:"top center",animation:o,pinnedContainer:"#article"})})}return i.$$.update=()=>{i.$$.dirty&3&&r&&n&&s()},[r,n]}class Kvt extends ln{constructor(e){super(),cn(this,e,Xvt,Yvt,an,{})}}const nL=(i,e=0)=>[...Array(i).keys()].map(t=>t+e);function iL(i,e,t){const n=i.slice();return n[5]=e[t],n}function rL(i){let e;return{c(){e=ht("div"),this.h()},l(t){e=ft(t,"DIV",{class:!0}),Pt(e).forEach(Z),this.h()},h(){it(e,"class","border "+i[5]+" svelte-u5jqyo"),vn(e,"pause-animation",i[4])},m(t,n){Pe(t,e,n)},p(t,n){n&16&&vn(e,"pause-animation",t[4])},d(t){t&&Z(e)}}}function Jvt(i){let e,t=Tc(nL(2,1)),n=[];for(let r=0;r<t.length;r+=1)n[r]=rL(iL(i,t,r));return{c(){e=ht("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=ft(r,"DIV",{class:!0,style:!0});var s=Pt(e);for(let a=0;a<n.length;a+=1)n[a].l(s);s.forEach(Z),this.h()},h(){it(e,"class","wrapper svelte-u5jqyo"),oa(e,"--size",i[3]+i[1]),oa(e,"--color",i[0]),oa(e,"--duration",i[2])},m(r,s){Pe(r,e,s);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(r,[s]){if(s&16){t=Tc(nL(2,1));let a;for(a=0;a<t.length;a+=1){const o=iL(r,t,a);n[a]?n[a].p(o,s):(n[a]=rL(o),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}s&10&&oa(e,"--size",r[3]+r[1]),s&1&&oa(e,"--color",r[0]),s&4&&oa(e,"--duration",r[2])},i:Sn,o:Sn,d(r){r&&Z(e),HT(n,r)}}}function Zvt(i,e,t){let{color:n="#FF3E00"}=e,{unit:r="px"}=e,{duration:s="2s"}=e,{size:a="60"}=e,{pause:o=!1}=e;return i.$$set=l=>{"color"in l&&t(0,n=l.color),"unit"in l&&t(1,r=l.unit),"duration"in l&&t(2,s=l.duration),"size"in l&&t(3,a=l.size),"pause"in l&&t(4,o=l.pause)},[n,r,s,a,o]}class e_t extends ln{constructor(e){super(),cn(this,e,Zvt,Jvt,an,{color:0,unit:1,duration:2,size:3,pause:4})}}function t_t(i){let e;return{c(){e=Vt("desktop")},l(t){e=Ht(t,"desktop")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function n_t(i){let e;return{c(){e=Vt("larger screen")},l(t){e=Ht(t,"larger screen")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function i_t(i){let e,t,n,r="The <br/> Matrix Arcade",s,a,o="A Visual Explorable <br/> of Matrix Transformations",l,c,u='By <a href="https://yizhe-ang.github.io/" target="_blank" rel="noopener noreferrer" class="underline decoration-2 underline-offset-8 decoration-neutral text-secondary">Yi Zhe Ang</a>',h,f,d,g="Skip to Playground!",v,A,_,y,x,C,S,I,P,B,M;return x=new oo({props:{$$slots:{default:[t_t]},$$scope:{ctx:i}}}),S=new oo({props:{$$slots:{default:[n_t]},$$scope:{ctx:i}}}),{c(){e=ht("div"),t=ht("div"),n=ht("h1"),n.innerHTML=r,s=_t(),a=ht("div"),a.innerHTML=o,l=_t(),c=ht("div"),c.innerHTML=u,h=_t(),f=ht("div"),d=ht("button"),d.textContent=g,v=_t(),A=ht("div"),_=ht("div"),y=Vt("Whoops! This interactive is better viewed on "),Oe(x.$$.fragment),C=Vt(" with a "),Oe(S.$$.fragment),I=Vt("!"),this.h()},l(D){e=ft(D,"DIV",{id:!0,class:!0});var F=Pt(e);t=ft(F,"DIV",{class:!0});var z=Pt(t);n=ft(z,"H1",{class:!0,"data-svelte-h":!0}),ya(n)!=="svelte-qtdqqx"&&(n.innerHTML=r),s=At(z),a=ft(z,"DIV",{class:!0,"data-svelte-h":!0}),ya(a)!=="svelte-15d5akd"&&(a.innerHTML=o),l=At(z),c=ft(z,"DIV",{class:!0,"data-svelte-h":!0}),ya(c)!=="svelte-w1pdho"&&(c.innerHTML=u),h=At(z),f=ft(z,"DIV",{class:!0});var U=Pt(f);d=ft(U,"BUTTON",{class:!0,"data-svelte-h":!0}),ya(d)!=="svelte-1xbtqr3"&&(d.textContent=g),U.forEach(Z),v=At(z),A=ft(z,"DIV",{class:!0});var $=Pt(A);_=ft($,"DIV",{class:!0});var O=Pt(_);y=Ht(O,"Whoops! This interactive is better viewed on "),ze(x.$$.fragment,O),C=Ht(O," with a "),ze(S.$$.fragment,O),I=Ht(O,"!"),O.forEach(Z),$.forEach(Z),z.forEach(Z),F.forEach(Z),this.h()},h(){it(n,"class","text-7xl sm:text-8xl md:text-9xl font-display drop-shadow-xl"),it(a,"class","text-2xl md:text-3xl font-displayAlt text-right"),it(c,"class","relative md:absolute top-0 right-0 font-displayAlt text-2xl sm:text-3xl md:text-4xl"),it(d,"class","relative playground-btn btn font-sansAlt text-xl backdrop-blur-sm bg-white/10 hover:bg-white/20 border-0 svelte-1d8ak2l"),it(f,"class","relative hidden lg:block"),it(_,"class","text-xl sm:text-2xl text-center w-64 sm:w-96"),it(A,"class","relative alert bg-transparent border-0 flex flex-col mt-10 lg:hidden svelte-1d8ak2l"),it(t,"class","flex flex-col gap-5 items-center relative"),it(e,"id","title"),it(e,"class","relative lg:fixed lg:top-0 lg:left-0 lg:right-0 z-10 grid place-content-center pt-16 px-10 max-w-5xl mx-auto")},m(D,F){Pe(D,e,F),Ge(e,t),Ge(t,n),Ge(t,s),Ge(t,a),Ge(t,l),Ge(t,c),Ge(t,h),Ge(t,f),Ge(f,d),Ge(t,v),Ge(t,A),Ge(A,_),Ge(_,y),Ne(x,_,null),Ge(_,C),Ne(S,_,null),Ge(_,I),P=!0,B||(M=Ki(d,"click",i[1]),B=!0)},p(D,[F]){const z={};F&4&&(z.$$scope={dirty:F,ctx:D}),x.$set(z);const U={};F&4&&(U.$$scope={dirty:F,ctx:D}),S.$set(U)},i(D){P||(oe(x.$$.fragment,D),oe(S.$$.fragment,D),P=!0)},o(D){pe(x.$$.fragment,D),pe(S.$$.fragment,D),P=!1},d(D){D&&Z(e),Fe(x),Fe(S),B=!1,M()}}}function r_t(i,e,t){let n;return Xt(i,G3,s=>t(0,n=s)),[n,()=>{un.to(window,{scrollTo:{y:n.start},duration:1})}]}class s_t extends ln{constructor(e){super(),cn(this,e,r_t,i_t,an,{})}}function sL(i){let e,t,n,r,s,a;t=new f0t({props:{size:Ec}});let o=[{class:"item"},{"data-tip":"Show 3D Grid"},i[14]],l={};for(let c=0;c<o.length;c+=1)l=Bt(l,o[c]);return{c(){e=ht("button"),Oe(t.$$.fragment),this.h()},l(c){e=ft(c,"BUTTON",{class:!0,"data-tip":!0});var u=Pt(e);ze(t.$$.fragment,u),u.forEach(Z),this.h()},h(){rr(e,l),vn(e,"svelte-1u56zeq",!0)},m(c,u){Pe(c,e,u),Ne(t,e,null),e.autofocus&&e.focus(),r=!0,s||(a=sa(i[14].action(e)),s=!0)},p(c,u){rr(e,l=Fn(o,[{class:"item"},{"data-tip":"Show 3D Grid"},u&16384&&c[14]])),vn(e,"svelte-1u56zeq",!0)},i(c){r||(oe(t.$$.fragment,c),c&&(n||Af(()=>{n=r2(e,Sc,{x:-20}),n.start()})),r=!0)},o(c){pe(t.$$.fragment,c),r=!1},d(c){c&&Z(e),Fe(t),s=!1,a()}}}function aL(i){let e,t,n,r,s,a;t=new qmt({props:{size:Ec}});let o=[{class:"item"},i[4],{"data-tip":"Show 3D Points"}],l={};for(let c=0;c<o.length;c+=1)l=Bt(l,o[c]);return{c(){e=ht("button"),Oe(t.$$.fragment),this.h()},l(c){e=ft(c,"BUTTON",{class:!0,"data-tip":!0});var u=Pt(e);ze(t.$$.fragment,u),u.forEach(Z),this.h()},h(){rr(e,l),vn(e,"svelte-1u56zeq",!0)},m(c,u){Pe(c,e,u),Ne(t,e,null),e.autofocus&&e.focus(),r=!0,s||(a=sa(i[4].action(e)),s=!0)},p(c,u){rr(e,l=Fn(o,[{class:"item"},u&16&&c[4],{"data-tip":"Show 3D Points"}])),vn(e,"svelte-1u56zeq",!0)},i(c){r||(oe(t.$$.fragment,c),c&&(n||Af(()=>{n=r2(e,Sc,{x:-20}),n.start()})),r=!0)},o(c){pe(t.$$.fragment,c),r=!1},d(c){c&&Z(e),Fe(t),s=!1,a()}}}function oL(i){let e,t,n,r,s,a;t=new q0t({props:{size:Ec}});let o=[{class:"item"},i[2],{"data-tip":"Show 3D Planes"}],l={};for(let c=0;c<o.length;c+=1)l=Bt(l,o[c]);return{c(){e=ht("button"),Oe(t.$$.fragment),this.h()},l(c){e=ft(c,"BUTTON",{class:!0,"data-tip":!0});var u=Pt(e);ze(t.$$.fragment,u),u.forEach(Z),this.h()},h(){rr(e,l),vn(e,"svelte-1u56zeq",!0)},m(c,u){Pe(c,e,u),Ne(t,e,null),e.autofocus&&e.focus(),r=!0,s||(a=sa(i[2].action(e)),s=!0)},p(c,u){rr(e,l=Fn(o,[{class:"item"},u&4&&c[2],{"data-tip":"Show 3D Planes"}])),vn(e,"svelte-1u56zeq",!0)},i(c){r||(oe(t.$$.fragment,c),c&&(n||Af(()=>{n=r2(e,Sc,{x:-20}),n.start()})),r=!0)},o(c){pe(t.$$.fragment,c),r=!1},d(c){c&&Z(e),Fe(t),s=!1,a()}}}function lL(i){let e,t,n,r,s,a;t=new n0t({props:{size:Ec}});let o=[{class:"item"},i[0],{"data-tip":"Show 3D Model"}],l={};for(let c=0;c<o.length;c+=1)l=Bt(l,o[c]);return{c(){e=ht("button"),Oe(t.$$.fragment),this.h()},l(c){e=ft(c,"BUTTON",{class:!0,"data-tip":!0});var u=Pt(e);ze(t.$$.fragment,u),u.forEach(Z),this.h()},h(){rr(e,l),vn(e,"svelte-1u56zeq",!0)},m(c,u){Pe(c,e,u),Ne(t,e,null),e.autofocus&&e.focus(),r=!0,s||(a=sa(i[0].action(e)),s=!0)},p(c,u){rr(e,l=Fn(o,[{class:"item"},u&1&&c[0],{"data-tip":"Show 3D Model"}])),vn(e,"svelte-1u56zeq",!0)},i(c){r||(oe(t.$$.fragment,c),c&&(n||Af(()=>{n=r2(e,Sc,{x:-20}),n.start()})),r=!0)},o(c){pe(t.$$.fragment,c),r=!1},d(c){c&&Z(e),Fe(t),s=!1,a()}}}function a_t(i){let e,t,n,r,s,a,o,l,c,u,h,f,d,g,v,A,_,y,x,C,S,I,P,B,M,D,F,z,U,$,O,ie,W,J,Ce,Me;n=new v0t({props:{size:Ec}}),a=new vmt({props:{size:Ec}});let ge=[{class:"item"},{"data-tip":"3d View"},i[8]],ve={};for(let ne=0;ne<ge.length;ne+=1)ve=Bt(ve,ge[ne]);let nt=[{class:"separator"},i[9]],$e={};for(let ne=0;ne<nt.length;ne+=1)$e=Bt($e,nt[ne]);h=new Mmt({props:{size:Ec}});let X=[{class:"item"},{"data-tip":"Show Vector"},i[10]],Be={};for(let ne=0;ne<X.length;ne+=1)Be=Bt(Be,X[ne]);g=new K9({props:{size:Ec}});let mt=[{class:"item"},{"data-tip":"Show Grid"},i[11]],Ue={};for(let ne=0;ne<mt.length;ne+=1)Ue=Bt(Ue,mt[ne]);_=new K9({props:{class:"-skew-x-12",size:Ec}});let Tt=[{class:"item"},{"data-tip":"Show Transformed Grid"},i[12]],yt={};for(let ne=0;ne<Tt.length;ne+=1)yt=Bt(yt,Tt[ne]);let Ye=i[13]&&sL(i),lt=[{class:"separator"},i[9]],ue={};for(let ne=0;ne<lt.length;ne+=1)ue=Bt(ue,lt[ne]);B=new O0t({props:{size:Ec}});let dt=[{class:"item"},i[5],{"data-tip":"Show Points"}],le={};for(let ne=0;ne<dt.length;ne+=1)le=Bt(le,dt[ne]);let he=i[13]&&aL(i);z=new Kmt({props:{size:Ec}});let xe=[{class:"item"},i[3],{"data-tip":"Show Plane"}],pt={};for(let ne=0;ne<xe.length;ne+=1)pt=Bt(pt,xe[ne]);let Ze=i[13]&&oL(i);ie=new V0t({props:{size:Ec}});let me=[{class:"item"},i[1],{"data-tip":"Show Image"}],te={};for(let ne=0;ne<me.length;ne+=1)te=Bt(te,me[ne]);let Se=i[13]&&lL(i),j=[{class:"flex items-center gap-1"},i[15]],q={};for(let ne=0;ne<j.length;ne+=1)q=Bt(q,j[ne]);let Ve=[i[6],{class:"flex min-w-max items-center gap-4 rounded-md bg-base-200 px-3 py-3 shadow-lg shadow-neutral-content/20 pointer-events-auto"}],ct={};for(let ne=0;ne<Ve.length;ne+=1)ct=Bt(ct,Ve[ne]);return{c(){e=ht("div"),t=ht("button"),Oe(n.$$.fragment),r=_t(),s=ht("button"),Oe(a.$$.fragment),o=_t(),l=ht("div"),c=_t(),u=ht("button"),Oe(h.$$.fragment),f=_t(),d=ht("button"),Oe(g.$$.fragment),v=_t(),A=ht("button"),Oe(_.$$.fragment),y=_t(),Ye&&Ye.c(),x=_t(),C=ht("div"),S=_t(),I=ht("div"),P=ht("button"),Oe(B.$$.fragment),M=_t(),he&&he.c(),D=_t(),F=ht("button"),Oe(z.$$.fragment),U=_t(),Ze&&Ze.c(),$=_t(),O=ht("button"),Oe(ie.$$.fragment),W=_t(),Se&&Se.c(),this.h()},l(ne){e=ft(ne,"DIV",{class:!0});var Je=Pt(e);t=ft(Je,"BUTTON",{class:!0,"data-tip":!0});var Lt=Pt(t);ze(n.$$.fragment,Lt),Lt.forEach(Z),r=At(Je),s=ft(Je,"BUTTON",{class:!0,"data-tip":!0});var we=Pt(s);ze(a.$$.fragment,we),we.forEach(Z),o=At(Je),l=ft(Je,"DIV",{class:!0}),Pt(l).forEach(Z),c=At(Je),u=ft(Je,"BUTTON",{class:!0,"data-tip":!0});var Ie=Pt(u);ze(h.$$.fragment,Ie),Ie.forEach(Z),f=At(Je),d=ft(Je,"BUTTON",{class:!0,"data-tip":!0});var de=Pt(d);ze(g.$$.fragment,de),de.forEach(Z),v=At(Je),A=ft(Je,"BUTTON",{class:!0,"data-tip":!0});var Xe=Pt(A);ze(_.$$.fragment,Xe),Xe.forEach(Z),y=At(Je),Ye&&Ye.l(Je),x=At(Je),C=ft(Je,"DIV",{class:!0}),Pt(C).forEach(Z),S=At(Je),I=ft(Je,"DIV",{class:!0});var Nt=Pt(I);P=ft(Nt,"BUTTON",{class:!0,"data-tip":!0});var Qt=Pt(P);ze(B.$$.fragment,Qt),Qt.forEach(Z),M=At(Nt),he&&he.l(Nt),D=At(Nt),F=ft(Nt,"BUTTON",{class:!0,"data-tip":!0});var Ft=Pt(F);ze(z.$$.fragment,Ft),Ft.forEach(Z),U=At(Nt),Ze&&Ze.l(Nt),$=At(Nt),O=ft(Nt,"BUTTON",{class:!0,"data-tip":!0});var jt=Pt(O);ze(ie.$$.fragment,jt),jt.forEach(Z),W=At(Nt),Se&&Se.l(Nt),Nt.forEach(Z),Je.forEach(Z),this.h()},h(){it(t,"class","item svelte-1u56zeq"),it(t,"data-tip","Reset View"),rr(s,ve),vn(s,"svelte-1u56zeq",!0),rr(l,$e),vn(l,"svelte-1u56zeq",!0),rr(u,Be),vn(u,"svelte-1u56zeq",!0),rr(d,Ue),vn(d,"svelte-1u56zeq",!0),rr(A,yt),vn(A,"svelte-1u56zeq",!0),rr(C,ue),vn(C,"svelte-1u56zeq",!0),rr(P,le),vn(P,"svelte-1u56zeq",!0),rr(F,pt),vn(F,"svelte-1u56zeq",!0),rr(O,te),vn(O,"svelte-1u56zeq",!0),rr(I,q),vn(I,"svelte-1u56zeq",!0),rr(e,ct),vn(e,"svelte-1u56zeq",!0)},m(ne,Je){Pe(ne,e,Je),Ge(e,t),Ne(n,t,null),Ge(e,r),Ge(e,s),Ne(a,s,null),s.autofocus&&s.focus(),Ge(e,o),Ge(e,l),Ge(e,c),Ge(e,u),Ne(h,u,null),u.autofocus&&u.focus(),Ge(e,f),Ge(e,d),Ne(g,d,null),d.autofocus&&d.focus(),Ge(e,v),Ge(e,A),Ne(_,A,null),A.autofocus&&A.focus(),Ge(e,y),Ye&&Ye.m(e,null),Ge(e,x),Ge(e,C),Ge(e,S),Ge(e,I),Ge(I,P),Ne(B,P,null),P.autofocus&&P.focus(),Ge(I,M),he&&he.m(I,null),Ge(I,D),Ge(I,F),Ne(z,F,null),F.autofocus&&F.focus(),Ge(I,U),Ze&&Ze.m(I,null),Ge(I,$),Ge(I,O),Ne(ie,O,null),O.autofocus&&O.focus(),Ge(I,W),Se&&Se.m(I,null),J=!0,Ce||(Me=[Ki(t,"click",i[26]),sa(i[8].action(s)),sa(i[9].action(l)),sa(i[10].action(u)),sa(i[11].action(d)),sa(i[12].action(A)),sa(i[9].action(C)),sa(i[5].action(P)),sa(i[3].action(F)),sa(i[1].action(O)),sa(i[15].action(I)),sa(i[6].action(e))],Ce=!0)},p(ne,[Je]){rr(s,ve=Fn(ge,[{class:"item"},{"data-tip":"3d View"},Je&256&&ne[8]])),vn(s,"svelte-1u56zeq",!0),rr(l,$e=Fn(nt,[{class:"separator"},Je&512&&ne[9]])),vn(l,"svelte-1u56zeq",!0),rr(u,Be=Fn(X,[{class:"item"},{"data-tip":"Show Vector"},Je&1024&&ne[10]])),vn(u,"svelte-1u56zeq",!0),rr(d,Ue=Fn(mt,[{class:"item"},{"data-tip":"Show Grid"},Je&2048&&ne[11]])),vn(d,"svelte-1u56zeq",!0),rr(A,yt=Fn(Tt,[{class:"item"},{"data-tip":"Show Transformed Grid"},Je&4096&&ne[12]])),vn(A,"svelte-1u56zeq",!0),ne[13]?Ye?(Ye.p(ne,Je),Je&8192&&oe(Ye,1)):(Ye=sL(ne),Ye.c(),oe(Ye,1),Ye.m(e,x)):Ye&&(Rs(),pe(Ye,1,1,()=>{Ye=null}),Ds()),rr(C,ue=Fn(lt,[{class:"separator"},Je&512&&ne[9]])),vn(C,"svelte-1u56zeq",!0),rr(P,le=Fn(dt,[{class:"item"},Je&32&&ne[5],{"data-tip":"Show Points"}])),vn(P,"svelte-1u56zeq",!0),ne[13]?he?(he.p(ne,Je),Je&8192&&oe(he,1)):(he=aL(ne),he.c(),oe(he,1),he.m(I,D)):he&&(Rs(),pe(he,1,1,()=>{he=null}),Ds()),rr(F,pt=Fn(xe,[{class:"item"},Je&8&&ne[3],{"data-tip":"Show Plane"}])),vn(F,"svelte-1u56zeq",!0),ne[13]?Ze?(Ze.p(ne,Je),Je&8192&&oe(Ze,1)):(Ze=oL(ne),Ze.c(),oe(Ze,1),Ze.m(I,$)):Ze&&(Rs(),pe(Ze,1,1,()=>{Ze=null}),Ds()),rr(O,te=Fn(me,[{class:"item"},Je&2&&ne[1],{"data-tip":"Show Image"}])),vn(O,"svelte-1u56zeq",!0),ne[13]?Se?(Se.p(ne,Je),Je&8192&&oe(Se,1)):(Se=lL(ne),Se.c(),oe(Se,1),Se.m(I,null)):Se&&(Rs(),pe(Se,1,1,()=>{Se=null}),Ds()),rr(I,q=Fn(j,[{class:"flex items-center gap-1"},Je&32768&&ne[15]])),vn(I,"svelte-1u56zeq",!0),rr(e,ct=Fn(Ve,[Je&64&&ne[6],{class:"flex min-w-max items-center gap-4 rounded-md bg-base-200 px-3 py-3 shadow-lg shadow-neutral-content/20 pointer-events-auto"}])),vn(e,"svelte-1u56zeq",!0)},i(ne){J||(oe(n.$$.fragment,ne),oe(a.$$.fragment,ne),oe(h.$$.fragment,ne),oe(g.$$.fragment,ne),oe(_.$$.fragment,ne),oe(Ye),oe(B.$$.fragment,ne),oe(he),oe(z.$$.fragment,ne),oe(Ze),oe(ie.$$.fragment,ne),oe(Se),J=!0)},o(ne){pe(n.$$.fragment,ne),pe(a.$$.fragment,ne),pe(h.$$.fragment,ne),pe(g.$$.fragment,ne),pe(_.$$.fragment,ne),pe(Ye),pe(B.$$.fragment,ne),pe(he),pe(z.$$.fragment,ne),pe(Ze),pe(ie.$$.fragment,ne),pe(Se),J=!1},d(ne){ne&&Z(e),Fe(n),Fe(a),Fe(h),Fe(g),Fe(_),Ye&&Ye.d(),Fe(B),he&&he.d(),Fe(z),Ze&&Ze.d(),Fe(ie),Se&&Se.d(),Ce=!1,iv(Me)}}}const Ec=30;function o_t(i,e,t){let n,r,s,a,o,l,c,u,h,f,d,g,v,A,_,y,x;Xt(i,m1,W=>t(7,h=W)),Xt(i,Md,W=>t(13,_=W));const{elements:{root:C,button:S,link:I,separator:P},builders:{createToolbarGroup:B}}=dgt();Xt(i,C,W=>t(6,u=W)),Xt(i,P,W=>t(9,d=W));const{elements:{group:M,item:D}}=B({value:Gu});Xt(i,M,W=>t(15,x=W)),Xt(i,D,W=>t(25,c=W));const{elements:{root:F}}=h0({pressed:Md});Xt(i,F,W=>t(8,f=W));const{elements:{root:z}}=h0({pressed:Wu});Xt(i,z,W=>t(12,A=W));const{elements:{root:U}}=h0({pressed:Td});Xt(i,U,W=>t(11,v=W));const{elements:{root:$}}=h0({pressed:sg});Xt(i,$,W=>t(14,y=W));const{elements:{root:O}}=h0({pressed:yd});Xt(i,O,W=>t(10,g=W));const ie=()=>Zt(m1,h=!h,h);return i.$$.update=()=>{i.$$.dirty&33554432&&t(5,n=c("points")),i.$$.dirty&33554432&&t(4,r=c("3d points")),i.$$.dirty&33554432&&t(3,s=c("planes")),i.$$.dirty&33554432&&t(2,a=c("3d planes")),i.$$.dirty&33554432&&t(1,o=c("image")),i.$$.dirty&33554432&&t(0,l=c("model"))},[l,o,a,s,r,n,u,h,f,d,g,v,A,_,y,x,C,P,M,D,F,z,U,$,O,c,ie]}class l_t extends ln{constructor(e){super(),cn(this,e,o_t,a_t,an,{})}}function c_t(i){let e,t,n,r,s,a,o,l;t=new o0t({props:{size:36,strokeWidth:3,transform:"translate(2, 0)",class:'group-[&[data-state="on"]]:-scale-x-100 transition'}});let c=[i[1],{"data-tip":n=i[0]?"Show Article":"Expand Playground"},{class:r='group bg-base-200 hover:bg-base-100 h-14 w-14 grid place-items-center rounded-full shadow-lg shadow-neutral-content/20 focus:ring-2 focus:ring-info transition-all -translate-x-1/2 -translate-y-1/2 tooltip tooltip-left tooltip-info fixed top-1/2 right-[calc(60ch)] [&[data-state="on"]]:right-0 duration-300'}],u={};for(let h=0;h<c.length;h+=1)u=Bt(u,c[h]);return{c(){e=ht("button"),Oe(t.$$.fragment),this.h()},l(h){e=ft(h,"BUTTON",{"data-tip":!0,class:!0});var f=Pt(e);ze(t.$$.fragment,f),f.forEach(Z),this.h()},h(){rr(e,u)},m(h,f){Pe(h,e,f),Ne(t,e,null),e.autofocus&&e.focus(),a=!0,o||(l=sa(i[1].action(e)),o=!0)},p(h,[f]){rr(e,u=Fn(c,[f&2&&h[1],(!a||f&1&&n!==(n=h[0]?"Show Article":"Expand Playground"))&&{"data-tip":n},{class:r}]))},i(h){a||(oe(t.$$.fragment,h),h&&Af(()=>{a&&(s||(s=bd(e,Sc,{x:-20,duration:200},!0)),s.run(1))}),a=!0)},o(h){pe(t.$$.fragment,h),h&&(s||(s=bd(e,Sc,{x:-20,duration:200},!1)),s.run(0)),a=!1},d(h){h&&Z(e),Fe(t),h&&s&&s.end(),o=!1,l()}}}function u_t(i,e,t){let n,r;Xt(i,mk,u=>t(0,n=u));let s,a=!0;const o={duration:.3},{elements:{root:l}}=h0({pressed:mk});Xt(i,l,u=>t(1,r=u));function c(u){if(a){a=!1;return}u?(un.to("#article",{...o,translateX:"0"}),un.to("#canvas-wrapper",{...o,translateX:"0"})):(un.to("#article",{...o,translateX:"-65ch"}),un.to("#canvas-wrapper",{...o,translateX:"-32.5ch"}))}return Au(()=>{t(3,s=!0)}),i.$$.update=()=>{i.$$.dirty&9&&s&&c(n)},[n,r,l,s]}class h_t extends ln{constructor(e){super(),cn(this,e,u_t,c_t,an,{})}}function f_t(i){let e,t;const n=i[2].default,r=ni(n,i,i[1],null);return{c(){e=ht("a"),r&&r.c(),this.h()},l(s){e=ft(s,"A",{href:!0,target:!0,rel:!0});var a=Pt(e);r&&r.l(a),a.forEach(Z),this.h()},h(){it(e,"href",i[0]),it(e,"target","_blank"),it(e,"rel","noopener noreferrer")},m(s,a){Pe(s,e,a),r&&r.m(e,null),t=!0},p(s,[a]){r&&r.p&&(!t||a&2)&&ii(r,n,s,s[1],t?si(n,s[1],a,null):ri(s[1]),null),(!t||a&1)&&it(e,"href",s[0])},i(s){t||(oe(r,s),t=!0)},o(s){pe(r,s),t=!1},d(s){s&&Z(e),r&&r.d(s)}}}function d_t(i,e,t){let{$$slots:n={},$$scope:r}=e,{href:s}=e;return i.$$set=a=>{"href"in a&&t(0,s=a.href),"$$scope"in a&&t(1,r=a.$$scope)},[s,r,n]}class s0 extends ln{constructor(e){super(),cn(this,e,d_t,f_t,an,{href:0})}}const p_t=i=>({}),cL=i=>({}),m_t=i=>({}),uL=i=>({});function g_t(i){let e,t,n;const r=i[1].icon,s=ni(r,i,i[2],uL),a=i[1].label,o=ni(a,i,i[2],cL);return{c(){s&&s.c(),e=_t(),t=ht("div"),o&&o.c(),this.h()},l(l){s&&s.l(l),e=At(l),t=ft(l,"DIV",{class:!0});var c=Pt(t);o&&o.l(c),c.forEach(Z),this.h()},h(){it(t,"class","visually-hidden svelte-1kc2n5u")},m(l,c){s&&s.m(l,c),Pe(l,e,c),Pe(l,t,c),o&&o.m(t,null),n=!0},p(l,c){s&&s.p&&(!n||c&4)&&ii(s,r,l,l[2],n?si(r,l[2],c,m_t):ri(l[2]),uL),o&&o.p&&(!n||c&4)&&ii(o,a,l,l[2],n?si(a,l[2],c,p_t):ri(l[2]),cL)},i(l){n||(oe(s,l),oe(o,l),n=!0)},o(l){pe(s,l),pe(o,l),n=!1},d(l){l&&(Z(e),Z(t)),s&&s.d(l),o&&o.d(l)}}}function v_t(i){let e,t;return e=new s0({props:{href:i[0],$$slots:{default:[g_t]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},p(n,[r]){const s={};r&1&&(s.href=n[0]),r&4&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function __t(i,e,t){let{$$slots:n={},$$scope:r}=e,{href:s}=e;return i.$$set=a=>{"href"in a&&t(0,s=a.href),"$$scope"in a&&t(2,r=a.$$scope)},[s,n,r]}class Hw extends ln{constructor(e){super(),cn(this,e,__t,v_t,an,{href:0})}}function A_t(i){let e,t;return e=new ngt({props:{slot:"icon",size:_E}}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},p:Sn,i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function b_t(i){let e;return{c(){e=Vt("Twitter")},l(t){e=Ht(t,"Twitter")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function y_t(i){let e,t;return e=new K0t({props:{slot:"icon",size:_E}}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},p:Sn,i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function w_t(i){let e;return{c(){e=Vt("LinkedIn")},l(t){e=Ht(t,"LinkedIn")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function x_t(i){let e,t;return e=new nmt({props:{slot:"icon",size:_E}}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},p:Sn,i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function C_t(i){let e;return{c(){e=Vt("Email")},l(t){e=Ht(t,"Email")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function E_t(i){let e,t;return e=new w0t({props:{slot:"icon",size:_E}}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},p:Sn,i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function S_t(i){let e;return{c(){e=Vt("Github")},l(t){e=Ht(t,"Github")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function M_t(i){let e;return{c(){e=Vt("portfolio")},l(t){e=Ht(t,"portfolio")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function T_t(i){let e;return{c(){e=Vt("Source code")},l(t){e=Ht(t,"Source code")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function I_t(i){let e;return{c(){e=Vt("3Blue1Brown")},l(t){e=Ht(t,"3Blue1Brown")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function P_t(i){let e;return{c(){e=Vt("Visual Kernel")},l(t){e=Ht(t,"Visual Kernel")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function k_t(i){let e;return{c(){e=Vt("Maxwell the Cat")},l(t){e=Ht(t,"Maxwell the Cat")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function B_t(i){let e;return{c(){e=Vt("here")},l(t){e=Ht(t,"here")},m(t,n){Pe(t,e,n)},d(t){t&&Z(e)}}}function R_t(i){let e,t,n,r='<p>Like my stuff? :)</p> <div class="kofi-button grid place-content-center"><a class="kofi-link" href="https://ko-fi.com/U7U4NH69A" target="_blank"><img class="m-0" height="48" style="border:0px;height:48px;" src="https://storage.ko-fi.com/cdn/kofi5.png?v=3" border="0" alt="Buy Me a Coffee at ko-fi.com"/></a></div>',s,a,o,l="Any questions, comments or suggestions? Feel free to connect with me!",c,u,h,f,d,g,v,A,_,y,x,C,S,I,P,B,M,D='<div><a href="https://k-means-explorable.vercel.app/" target="_blank" rel="noopener noreferrer" class="flex flex-col gap-5 items-start"><img src="https://yizhe-ang.github.io/imgs/bg-7.png" alt="thumbnail" class="w-72 h-40 object-cover rounded-xl m-0 shadow-lg shadow-neutral-content/10"/> <span class="block text-2xl">K-Means Clustering</span></a></div>',F,z,U,$,O,ie,W,J,Ce,Me,ge,ve,nt,$e,X,Be,mt=`I'd love to extend this article with more examples of different types of
			linear transformations and their associated matrices, and matrix
			decompositions like spectral decomposition and singular value
			decomposition. Stay tuned!`,Ue,Tt,yt,Ye,lt,ue,dt,le;return h=new Hw({props:{href:"https://twitter.com/yizhe_ang",$$slots:{label:[b_t],icon:[A_t]},$$scope:{ctx:i}}}),d=new Hw({props:{href:"https://www.linkedin.com/in/yizhe-ang/",$$slots:{label:[w_t],icon:[y_t]},$$scope:{ctx:i}}}),v=new Hw({props:{href:"mailto:ang.yizhe@u.nus.edu",$$slots:{label:[C_t],icon:[x_t]},$$scope:{ctx:i}}}),_=new Hw({props:{href:"https://github.com/yizhe-ang",$$slots:{label:[S_t],icon:[E_t]},$$scope:{ctx:i}}}),I=new s0({props:{href:"https://yizhe-ang.github.io/",$$slots:{default:[M_t]},$$scope:{ctx:i}}}),ie=new s0({props:{href:"https://github.com/yizhe-ang/matrix-explorable",$$slots:{default:[T_t]},$$scope:{ctx:i}}}),ge=new s0({props:{href:"https://youtu.be/kYB8IZa5AuE",$$slots:{default:[I_t]},$$scope:{ctx:i}}}),nt=new s0({props:{href:"https://youtu.be/7Gtxd-ew4lk",$$slots:{default:[P_t]},$$scope:{ctx:i}}}),Ye=new s0({props:{href:"https://knowyourmeme.com/memes/maxwell-the-cat-spinning-cat",$$slots:{default:[k_t]},$$scope:{ctx:i}}}),ue=new s0({props:{href:"https://leodog896.github.io/maxwell/",$$slots:{default:[B_t]},$$scope:{ctx:i}}}),{c(){e=ht("footer"),t=ht("section"),n=ht("div"),n.innerHTML=r,s=_t(),a=ht("div"),o=ht("p"),o.textContent=l,c=_t(),u=ht("div"),Oe(h.$$.fragment),f=_t(),Oe(d.$$.fragment),g=_t(),Oe(v.$$.fragment),A=_t(),Oe(_.$$.fragment),y=_t(),x=ht("div"),C=ht("p"),S=Vt("Check out my "),Oe(I.$$.fragment),P=Vt(` and other
				explorables:`),B=_t(),M=ht("div"),M.innerHTML=D,F=_t(),z=ht("div"),U=_t(),$=ht("section"),O=ht("p"),Oe(ie.$$.fragment),W=Vt(` of
			the article.`),J=_t(),Ce=ht("p"),Me=Vt(`This article was directly inspired by explainer videos of matrices and
			linear transformations by `),Oe(ge.$$.fragment),ve=Vt(" and "),Oe(nt.$$.fragment),$e=Vt(`. This
			article is merely my attempt at making an interactive complement to these
			amazing resources already out there.`),X=_t(),Be=ht("p"),Be.textContent=mt,Ue=_t(),Tt=ht("p"),yt=Vt("The "),Oe(Ye.$$.fragment),lt=Vt(" model was taken from "),Oe(ue.$$.fragment),dt=Vt("."),this.h()},l(he){e=ft(he,"FOOTER",{class:!0});var xe=Pt(e);t=ft(xe,"SECTION",{class:!0});var pt=Pt(t);n=ft(pt,"DIV",{"data-svelte-h":!0}),ya(n)!=="svelte-1pd94j4"&&(n.innerHTML=r),s=At(pt),a=ft(pt,"DIV",{});var Ze=Pt(a);o=ft(Ze,"P",{"data-svelte-h":!0}),ya(o)!=="svelte-19d1009"&&(o.textContent=l),c=At(Ze),u=ft(Ze,"DIV",{class:!0});var me=Pt(u);ze(h.$$.fragment,me),f=At(me),ze(d.$$.fragment,me),g=At(me),ze(v.$$.fragment,me),A=At(me),ze(_.$$.fragment,me),me.forEach(Z),Ze.forEach(Z),y=At(pt),x=ft(pt,"DIV",{class:!0});var te=Pt(x);C=ft(te,"P",{});var Se=Pt(C);S=Ht(Se,"Check out my "),ze(I.$$.fragment,Se),P=Ht(Se,` and other
				explorables:`),Se.forEach(Z),B=At(te),M=ft(te,"DIV",{"data-svelte-h":!0}),ya(M)!=="svelte-mwo8j6"&&(M.innerHTML=D),te.forEach(Z),pt.forEach(Z),F=At(xe),z=ft(xe,"DIV",{class:!0}),Pt(z).forEach(Z),U=At(xe),$=ft(xe,"SECTION",{class:!0});var j=Pt($);O=ft(j,"P",{});var q=Pt(O);ze(ie.$$.fragment,q),W=Ht(q,` of
			the article.`),q.forEach(Z),J=At(j),Ce=ft(j,"P",{});var Ve=Pt(Ce);Me=Ht(Ve,`This article was directly inspired by explainer videos of matrices and
			linear transformations by `),ze(ge.$$.fragment,Ve),ve=Ht(Ve," and "),ze(nt.$$.fragment,Ve),$e=Ht(Ve,`. This
			article is merely my attempt at making an interactive complement to these
			amazing resources already out there.`),Ve.forEach(Z),X=At(j),Be=ft(j,"P",{"data-svelte-h":!0}),ya(Be)!=="svelte-19i4n25"&&(Be.textContent=mt),Ue=At(j),Tt=ft(j,"P",{});var ct=Pt(Tt);yt=Ht(ct,"The "),ze(Ye.$$.fragment,ct),lt=Ht(ct," model was taken from "),ze(ue.$$.fragment,ct),dt=Ht(ct,"."),ct.forEach(Z),j.forEach(Z),xe.forEach(Z),this.h()},h(){it(u,"class","flex gap-5 justify-center"),it(x,"class","flex flex-col items-center"),it(t,"class","flex flex-col items-center gap-8 text-center pb-10"),it(z,"class","divider"),it($,"class","prose-lg"),it(e,"class","max-w-prose mx-auto p-5 prose prose-xl pt-16 pb-28")},m(he,xe){Pe(he,e,xe),Ge(e,t),Ge(t,n),Ge(t,s),Ge(t,a),Ge(a,o),Ge(a,c),Ge(a,u),Ne(h,u,null),Ge(u,f),Ne(d,u,null),Ge(u,g),Ne(v,u,null),Ge(u,A),Ne(_,u,null),Ge(t,y),Ge(t,x),Ge(x,C),Ge(C,S),Ne(I,C,null),Ge(C,P),Ge(x,B),Ge(x,M),Ge(e,F),Ge(e,z),Ge(e,U),Ge(e,$),Ge($,O),Ne(ie,O,null),Ge(O,W),Ge($,J),Ge($,Ce),Ge(Ce,Me),Ne(ge,Ce,null),Ge(Ce,ve),Ne(nt,Ce,null),Ge(Ce,$e),Ge($,X),Ge($,Be),Ge($,Ue),Ge($,Tt),Ge(Tt,yt),Ne(Ye,Tt,null),Ge(Tt,lt),Ne(ue,Tt,null),Ge(Tt,dt),le=!0},p(he,[xe]){const pt={};xe&1&&(pt.$$scope={dirty:xe,ctx:he}),h.$set(pt);const Ze={};xe&1&&(Ze.$$scope={dirty:xe,ctx:he}),d.$set(Ze);const me={};xe&1&&(me.$$scope={dirty:xe,ctx:he}),v.$set(me);const te={};xe&1&&(te.$$scope={dirty:xe,ctx:he}),_.$set(te);const Se={};xe&1&&(Se.$$scope={dirty:xe,ctx:he}),I.$set(Se);const j={};xe&1&&(j.$$scope={dirty:xe,ctx:he}),ie.$set(j);const q={};xe&1&&(q.$$scope={dirty:xe,ctx:he}),ge.$set(q);const Ve={};xe&1&&(Ve.$$scope={dirty:xe,ctx:he}),nt.$set(Ve);const ct={};xe&1&&(ct.$$scope={dirty:xe,ctx:he}),Ye.$set(ct);const ne={};xe&1&&(ne.$$scope={dirty:xe,ctx:he}),ue.$set(ne)},i(he){le||(oe(h.$$.fragment,he),oe(d.$$.fragment,he),oe(v.$$.fragment,he),oe(_.$$.fragment,he),oe(I.$$.fragment,he),oe(ie.$$.fragment,he),oe(ge.$$.fragment,he),oe(nt.$$.fragment,he),oe(Ye.$$.fragment,he),oe(ue.$$.fragment,he),le=!0)},o(he){pe(h.$$.fragment,he),pe(d.$$.fragment,he),pe(v.$$.fragment,he),pe(_.$$.fragment,he),pe(I.$$.fragment,he),pe(ie.$$.fragment,he),pe(ge.$$.fragment,he),pe(nt.$$.fragment,he),pe(Ye.$$.fragment,he),pe(ue.$$.fragment,he),le=!1},d(he){he&&Z(e),Fe(h),Fe(d),Fe(v),Fe(_),Fe(I),Fe(ie),Fe(ge),Fe(nt),Fe(Ye),Fe(ue)}}}const _E=36;class D_t extends ln{constructor(e){super(),cn(this,e,null,R_t,an,{})}}function hL(i){let e,t;return e=new s_t({}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function fL(i){let e,t;return e=new h_t({}),{c(){Oe(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,r){Ne(e,n,r),t=!0},i(n){t||(oe(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function L_t(i){let e,t,n,r,s="Loading...",a,o,l,c,u,h,f,d,g,v,A,_,y,x,C,S,I,P,B,M,D,F,z,U=!i[0]&&hL();o=new e_t({props:{color:vl}}),h=new Fpt({}),g=new Kvt({});let $=i[1]&&fL();return y=new l_t({}),C=new sgt({}),P=new Wpt({}),F=new D_t({}),{c(){U&&U.c(),e=_t(),t=ht("div"),n=ht("div"),r=ht("div"),r.textContent=s,a=_t(),Oe(o.$$.fragment),l=_t(),c=ht("article"),u=ht("div"),Oe(h.$$.fragment),d=_t(),Oe(g.$$.fragment),v=_t(),$&&$.c(),A=_t(),_=ht("div"),Oe(y.$$.fragment),x=_t(),Oe(C.$$.fragment),S=_t(),I=ht("div"),Oe(P.$$.fragment),B=_t(),M=ht("div"),D=_t(),Oe(F.$$.fragment),this.h()},l(O){U&&U.l(O),e=At(O),t=ft(O,"DIV",{id:!0,class:!0});var ie=Pt(t);n=ft(ie,"DIV",{class:!0});var W=Pt(n);r=ft(W,"DIV",{class:!0,"data-svelte-h":!0}),ya(r)!=="svelte-1re20dr"&&(r.textContent=s),a=At(W),ze(o.$$.fragment,W),W.forEach(Z),ie.forEach(Z),l=At(O),c=ft(O,"ARTICLE",{class:!0});var J=Pt(c);u=ft(J,"DIV",{id:!0,class:!0});var Ce=Pt(u);ze(h.$$.fragment,Ce),Ce.forEach(Z),d=At(J),ze(g.$$.fragment,J),J.forEach(Z),v=At(O),$&&$.l(O),A=At(O),_=ft(O,"DIV",{id:!0,class:!0});var Me=Pt(_);ze(y.$$.fragment,Me),x=At(Me),ze(C.$$.fragment,Me),S=At(Me),I=ft(Me,"DIV",{});var ge=Pt(I);ze(P.$$.fragment,ge),ge.forEach(Z),Me.forEach(Z),B=At(O),M=ft(O,"DIV",{id:!0,class:!0}),Pt(M).forEach(Z),D=At(O),ze(F.$$.fragment,O),this.h()},h(){it(r,"class","inline-block font-displayAlt text-xl"),it(n,"class","flex flex-col items-center gap-5"),it(t,"id","loading-overlay"),it(t,"class","fixed inset-0 bg-base-300 place-content-center z-50 hidden lg:grid"),it(u,"id","canvas-wrapper"),it(u,"class",f="sticky top-0 flex-1 min-w-0 h-screen bg-base-300 "+(i[0]?"":"pointer-events-none")),it(c,"class","relative bg-base-300 w-[calc(100%+65ch)] hidden lg:flex"),it(_,"id","inputs"),it(_,"class","fixed left-0 top-0 flex flex-col items-start px-8 py-8 gap-7 pointer-events-none invisible"),it(M,"id","st-progress"),it(M,"class","fixed left-0 top-0 bottom-0 w-2 bg-neutral scale-y-0 rounded-full")},m(O,ie){U&&U.m(O,ie),Pe(O,e,ie),Pe(O,t,ie),Ge(t,n),Ge(n,r),Ge(n,a),Ne(o,n,null),Pe(O,l,ie),Pe(O,c,ie),Ge(c,u),Ne(h,u,null),Ge(c,d),Ne(g,c,null),Pe(O,v,ie),$&&$.m(O,ie),Pe(O,A,ie),Pe(O,_,ie),Ne(y,_,null),Ge(_,x),Ne(C,_,null),Ge(_,S),Ge(_,I),Ne(P,I,null),Pe(O,B,ie),Pe(O,M,ie),Pe(O,D,ie),Ne(F,O,ie),z=!0},p(O,[ie]){O[0]?U&&(Rs(),pe(U,1,1,()=>{U=null}),Ds()):U?ie&1&&oe(U,1):(U=hL(),U.c(),oe(U,1),U.m(e.parentNode,e)),(!z||ie&1&&f!==(f="sticky top-0 flex-1 min-w-0 h-screen bg-base-300 "+(O[0]?"":"pointer-events-none")))&&it(u,"class",f),O[1]?$?ie&2&&oe($,1):($=fL(),$.c(),oe($,1),$.m(A.parentNode,A)):$&&(Rs(),pe($,1,1,()=>{$=null}),Ds())},i(O){z||(oe(U),oe(o.$$.fragment,O),oe(h.$$.fragment,O),oe(g.$$.fragment,O),oe($),oe(y.$$.fragment,O),oe(C.$$.fragment,O),oe(P.$$.fragment,O),oe(F.$$.fragment,O),z=!0)},o(O){pe(U),pe(o.$$.fragment,O),pe(h.$$.fragment,O),pe(g.$$.fragment,O),pe($),pe(y.$$.fragment,O),pe(C.$$.fragment,O),pe(P.$$.fragment,O),pe(F.$$.fragment,O),z=!1},d(O){O&&(Z(e),Z(t),Z(l),Z(c),Z(v),Z(A),Z(_),Z(B),Z(M),Z(D)),U&&U.d(O),Fe(o),Fe(h),Fe(g),$&&$.d(O),Fe(y),Fe(C),Fe(P),Fe(F,O)}}}function O_t(i,e,t){let n,r,s,a;return Xt(i,BY,o=>t(2,n=o)),Xt(i,hG,o=>t(3,r=o)),Xt(i,$T,o=>t(0,s=o)),Xt(i,$u,o=>t(1,a=o)),i.$$.update=()=>{i.$$.dirty&12&&r.lg&&n&&(un.to("#loading-overlay",{autoAlpha:0,duration:2}),un.set("body",{overflowY:"visible",overflowX:"hidden"}),BP.ScrollTrigger.refresh())},[s,a,n,r]}class N_t extends ln{constructor(e){super(),cn(this,e,O_t,L_t,an,{})}}function F_t(i){let e,t,n,r;return e=new NY({}),n=new N_t({}),{c(){Oe(e.$$.fragment),t=_t(),Oe(n.$$.fragment)},l(s){ze(e.$$.fragment,s),t=At(s),ze(n.$$.fragment,s)},m(s,a){Ne(e,s,a),Pe(s,t,a),Ne(n,s,a),r=!0},p:Sn,i(s){r||(oe(e.$$.fragment,s),oe(n.$$.fragment,s),r=!0)},o(s){pe(e.$$.fragment,s),pe(n.$$.fragment,s),r=!1},d(s){s&&Z(t),Fe(e,s),Fe(n,s)}}}class L1t extends ln{constructor(e){super(),cn(this,e,null,F_t,an,{})}}export{L1t as component};
